!function(t){"use strict";function e(){var t=document.createElement("mm"),e={WebkitTransition:"webkitTransitionEnd",MozTransition:"transitionend",OTransition:"oTransitionEnd otransitionend",transition:"transitionend"};for(var i in e)if(void 0!==t.style[i])return{end:e[i]};return!1}function i(e){return this.each(function(){var i=t(this),n=i.data("mm"),r=t.extend({},s.DEFAULTS,i.data(),"object"==typeof e&&e);n||i.data("mm",n=new s(this,r)),"string"==typeof e&&n[e]()})}t.fn.emulateTransitionEnd=function(e){var i=!1,s=this;t(this).one("mmTransitionEnd",function(){i=!0});var r=function(){i||t(s).trigger(n.end)};return setTimeout(r,e),this};var n=e();n&&(t.event.special.mmTransitionEnd={bindType:n.end,delegateType:n.end,handle:function(e){return t(e.target).is(this)?e.handleObj.handler.apply(this,arguments):void 0}});var s=function(e,i){this.$element=t(e),this.options=t.extend({},s.DEFAULTS,i),this.transitioning=null,this.init()};s.TRANSITION_DURATION=350,s.DEFAULTS={toggle:!0,doubleTapToGo:!1,activeClass:"active"},s.prototype.init=function(){var e=this,i=this.options.activeClass;this.$element.find("li."+i).has("ul").children("ul").addClass("collapse in"),this.$element.find("li").not("."+i).has("ul").children("ul").addClass("collapse"),this.options.doubleTapToGo&&this.$element.find("li."+i).has("ul").children("a").addClass("doubleTapToGo"),this.$element.find("li").has("ul").children("a").on("click.metisMenu",function(n){var s=t(this),r=s.parent("li"),o=r.children("ul");return n.preventDefault(),r.hasClass(i)?e.hide(o):e.show(o),e.options.doubleTapToGo&&e.doubleTapToGo(s)&&"#"!==s.attr("href")&&""!==s.attr("href")?(n.stopPropagation(),void(document.location=s.attr("href"))):void 0})},s.prototype.doubleTapToGo=function(t){var e=this.$element;return t.hasClass("doubleTapToGo")?(t.removeClass("doubleTapToGo"),!0):t.parent().children("ul").length?(e.find(".doubleTapToGo").removeClass("doubleTapToGo"),t.addClass("doubleTapToGo"),!1):void 0},s.prototype.show=function(e){var i=this.options.activeClass,r=t(e),o=r.parent("li");if(!this.transitioning&&!r.hasClass("in")){o.addClass(i),this.options.toggle&&this.hide(o.siblings().children("ul.in")),r.removeClass("collapse").addClass("collapsing").height(0),this.transitioning=1;var a=function(){r.removeClass("collapsing").addClass("collapse in").height(""),this.transitioning=0};return n?void r.one("mmTransitionEnd",t.proxy(a,this)).emulateTransitionEnd(s.TRANSITION_DURATION).height(r[0].scrollHeight):a.call(this)}},s.prototype.hide=function(e){var i=this.options.activeClass,r=t(e);if(!this.transitioning&&r.hasClass("in")){r.parent("li").removeClass(i),r.height(r.height())[0].offsetHeight,r.addClass("collapsing").removeClass("collapse").removeClass("in"),this.transitioning=1;var o=function(){this.transitioning=0,r.removeClass("collapsing").addClass("collapse")};return n?void r.height(0).one("mmTransitionEnd",t.proxy(o,this)).emulateTransitionEnd(s.TRANSITION_DURATION):o.call(this)}};var r=t.fn.metisMenu;t.fn.metisMenu=i,t.fn.metisMenu.Constructor=s,t.fn.metisMenu.noConflict=function(){return t.fn.metisMenu=r,this}}(jQuery);(function(e){e.fn.extend({slimScroll:function(i){var n=e.extend({width:"auto",height:"250px",size:"7px",color:"#000",position:"right",distance:"1px",start:"top",opacity:.4,alwaysVisible:!1,disableFadeOut:!1,railVisible:!1,railColor:"#333",railOpacity:.2,railDraggable:!0,railClass:"slimScrollRail",barClass:"slimScrollBar",wrapperClass:"slimScrollDiv",allowPageScroll:!1,wheelStep:20,touchScrollStep:200,borderRadius:"7px",railBorderRadius:"7px"},i);this.each(function(){function s(t){if(h){t=t||window.event;var i=0;t.wheelDelta&&(i=-t.wheelDelta/120);t.detail&&(i=t.detail/3);e(t.target||t.srcTarget||t.srcElement).closest("."+n.wrapperClass).is(y.parent())&&r(i,!0);t.preventDefault&&!v&&t.preventDefault();v||(t.returnValue=!1)}}function r(t,e,i){v=!1;var s=t,r=y.outerHeight()-w.outerHeight();e&&(s=parseInt(w.css("top"))+t*parseInt(n.wheelStep)/100*w.outerHeight(),s=Math.min(Math.max(s,0),r),s=0<t?Math.ceil(s):Math.floor(s),w.css({top:s+"px"}));m=parseInt(w.css("top"))/(y.outerHeight()-w.outerHeight());s=m*(y[0].scrollHeight-y.outerHeight());i&&(s=t,t=s/y[0].scrollHeight*y.outerHeight(),t=Math.min(Math.max(t,0),r),w.css({top:t+"px"}));y.scrollTop(s);y.trigger("slimscrolling",~~s);a();l()}function o(){p=Math.max(y.outerHeight()/y[0].scrollHeight*y.outerHeight(),30);w.css({height:p+"px"});var t=p==y.outerHeight()?"none":"block";w.css({display:t})}function a(){o();clearTimeout(d);m==~~m?(v=n.allowPageScroll,g!=m&&y.trigger("slimscroll",0==~~m?"top":"bottom")):v=!1;g=m;p>=y.outerHeight()?v=!0:(w.stop(!0,!0).fadeIn("fast"),n.railVisible&&x.stop(!0,!0).fadeIn("fast"))}function l(){n.alwaysVisible||(d=setTimeout(function(){n.disableFadeOut&&h||c||u||(w.fadeOut("slow"),x.fadeOut("slow"))},1e3))}var h,c,u,d,f,p,m,g,v=!1,y=e(this);if(y.parent().hasClass(n.wrapperClass)){var b=y.scrollTop(),w=y.closest("."+n.barClass),x=y.closest("."+n.railClass);o();if(e.isPlainObject(i)){if("height"in i&&"auto"==i.height){y.parent().css("height","auto");y.css("height","auto");var _=y.parent().parent().height();y.parent().css("height",_);y.css("height",_)}if("scrollTo"in i)b=parseInt(n.scrollTo);else if("scrollBy"in i)b+=parseInt(n.scrollBy);else if("destroy"in i){w.remove();x.remove();y.unwrap();return}r(b,!1,!0)}}else if(!(e.isPlainObject(i)&&"destroy"in i)){n.height="auto"==n.height?y.parent().height():n.height;b=e("<div></div>").addClass(n.wrapperClass).css({position:"relative",overflow:"hidden",width:n.width,height:n.height});y.css({overflow:"hidden",width:n.width,height:n.height});var x=e("<div></div>").addClass(n.railClass).css({width:n.size,height:"100%",position:"absolute",top:0,display:n.alwaysVisible&&n.railVisible?"block":"none","border-radius":n.railBorderRadius,background:n.railColor,opacity:n.railOpacity,zIndex:90}),w=e("<div></div>").addClass(n.barClass).css({background:n.color,width:n.size,position:"absolute",top:0,opacity:n.opacity,display:n.alwaysVisible?"block":"none","border-radius":n.borderRadius,BorderRadius:n.borderRadius,MozBorderRadius:n.borderRadius,WebkitBorderRadius:n.borderRadius,zIndex:99}),_="right"==n.position?{right:n.distance}:{left:n.distance};x.css(_);w.css(_);y.wrap(b);y.parent().append(w);y.parent().append(x);n.railDraggable&&w.bind("mousedown",function(i){var n=e(document);u=!0;t=parseFloat(w.css("top"));pageY=i.pageY;n.bind("mousemove.slimscroll",function(e){currTop=t+e.pageY-pageY;w.css("top",currTop);r(0,w.position().top,!1)});n.bind("mouseup.slimscroll",function(t){u=!1;l();n.unbind(".slimscroll")});return!1}).bind("selectstart.slimscroll",function(t){t.stopPropagation();t.preventDefault();return!1});x.hover(function(){a()},function(){l()});w.hover(function(){c=!0},function(){c=!1});y.hover(function(){h=!0;a();l()},function(){h=!1;l()});y.bind("touchstart",function(t,e){t.originalEvent.touches.length&&(f=t.originalEvent.touches[0].pageY)});y.bind("touchmove",function(t){v||t.originalEvent.preventDefault();t.originalEvent.touches.length&&(r((f-t.originalEvent.touches[0].pageY)/n.touchScrollStep,!0),f=t.originalEvent.touches[0].pageY)});o();"bottom"===n.start?(w.css({top:y.outerHeight()-w.outerHeight()}),r(0,!0)):"top"!==n.start&&(r(e(n.start).position().top,null,!0),n.alwaysVisible||w.hide());window.addEventListener?(this.addEventListener("DOMMouseScroll",s,!1),this.addEventListener("mousewheel",s,!1)):document.attachEvent("onmousewheel",s)}});return this}});e.fn.extend({slimscroll:e.fn.slimScroll})})(jQuery);(function(t,e,i){var n=function(i,n){var s=e.createElementNS("http://www.w3.org/2000/svg",i);t.each(n,function(t,e){s.setAttribute(t,e)});return s},s="createElementNS"in e&&n("svg",{}).createSVGRect,r=1/(window.devicePixelRatio||1),o=t.fn.peity=function(e,i){s&&this.each(function(){var n=t(this),s=n.data("peity");if(s)e&&(s.type=e),t.extend(s.opts,i);else{var r=o.defaults[e],l={};t.each(n.data(),function(t,e){t in r&&(l[t]=e)});var h=t.extend({},r,l,i),s=new a(n,e,h);n.change(function(){s.draw()}).data("peity",s)}s.draw()});return this},a=function(t,e,i){this.$el=t;this.type=e;this.opts=i},l=a.prototype;l.draw=function(){o.graphers[this.type].call(this,this.opts)};l.fill=function(){var e=this.opts.fill,i=e;t.isFunction(i)||(i=function(t,i){return e[i%e.length]});return i};l.prepare=function(e,i){var s;this.svg?s=t(this.svg).empty():(this.svg=n("svg",{class:"peity"}),this.$el.hide().after(this.svg),s=t(this.svg).data("peity",this));this.svg.setAttribute("height",i);this.svg.setAttribute("width",e);return s};l.values=function(){return t.map(this.$el.text().split(this.opts.delimiter),function(t){return parseFloat(t)})};o.defaults={};o.graphers={};o.register=function(t,e,i){this.defaults[t]=e;this.graphers[t]=i};o.register("pie",{delimiter:null,diameter:16,fill:["#ff9900","#fff4dd","#ffc66e"]},function(t){if(!t.delimiter){var e=this.$el.text().match(/[^0-9\.]/);t.delimiter=e?e[0]:","}e=this.values();if("/"==t.delimiter)var s=e[0],e=[s,i.max(0,e[1]-s)];for(var r=0,s=e.length,o=0;r<s;r++)o+=e[r];for(var t=this.prepare(t.width||t.diameter,t.height||t.diameter),r=t.width(),a=t.height(),t=r/2,a=a/2,l=i.min(t,a),h=i.PI,c=this.fill(),u=-h/2,r=0;r<s;r++){var d=e[r],f=d/o,p;if(0!=f){if(1==f)p=n("circle",{cx:t,cy:a,r:l});else{p=2*f*h;var f=u+p,m=l*i.cos(u)+t,u=l*i.sin(u)+a,g=l*i.cos(f)+t,v=l*i.sin(f)+a;p=n("path",{d:["M",t,a,"L",m,u,"A",l,l,0,p>h?1:0,1,g,v,"Z"].join(" ")});u=f}p.setAttribute("fill",c.call(this,d,r,e));this.svg.appendChild(p)}}});o.register("line",{delimiter:",",fill:"#c6d9fd",height:16,max:null,min:0,stroke:"#4d89f9",strokeWidth:1,width:32},function(t){var e=this.values();1==e.length&&e.push(e[0]);for(var s=i.max.apply(i,e.concat([t.max])),r=i.min.apply(i,e.concat([t.min])),o=this.prepare(t.width,t.height),a=o.width(),o=o.height()-t.strokeWidth,l=a/(e.length-1),s=s-r,h=0==s?o:o/s,c=o+r*h,s=[0,c],u=0;u<e.length;u++)s.push(u*l,o-h*(e[u]-r)+t.strokeWidth/2);s.push(a,c);e=n("polygon",{fill:t.fill,points:s.join(" ")});this.svg.appendChild(e);t.strokeWidth&&(t=n("polyline",{fill:"transparent",points:s.slice(2,s.length-2).join(" "),stroke:t.stroke,"stroke-width":t.strokeWidth,"stroke-linecap":"square"}),this.svg.appendChild(t))});o.register("bar",{delimiter:",",fill:["#4D89F9"],gap:1,height:16,max:null,min:0,width:32},function(t){for(var e=this.values(),s=i.max.apply(i,e.concat([t.max])),o=i.min.apply(i,e.concat([t.min])),a=this.prepare(t.width,t.height),l=a.width(),a=a.height(),h=s-o,c=0==h?0:a/h,t=t.gap,l=(l+t)/e.length,u=this.fill(),d=0;d<e.length;d++){var f=e[d],p=a-c*(f-o),m=c*f;if(0==m){if(m=r,0>=o&&0<s||0==h)p-=r}else 0>m&&(p+=m,m=-m);f=n("rect",{fill:u.call(this,f,d,e),x:d*l,y:p,width:l-t,height:m});this.svg.appendChild(f)}})})(jQuery,document,Math);$(document).ready(function(){if($(this).width()<769){$("body").addClass("body-small")}else{$("body").removeClass("body-small")}$("#side-menu").metisMenu();$(".collapse-link").on("click",function(){var t=$(this).closest("div.ibox");var e=$(this).find("i");var i=t.children(".ibox-content");i.slideToggle(200);e.toggleClass("fa-chevron-up").toggleClass("fa-chevron-down");t.toggleClass("").toggleClass("border-bottom");setTimeout(function(){t.resize();t.find("[id^=map-]").resize()},50)});$(".close-link").on("click",function(){var t=$(this).closest("div.ibox");t.remove()});$(".fullscreen-link").on("click",function(){var t=$(this).closest("div.ibox");var e=$(this).find("i");$("body").toggleClass("fullscreen-ibox-mode");e.toggleClass("fa-expand").toggleClass("fa-compress");t.toggleClass("fullscreen");setTimeout(function(){$(window).trigger("resize")},100)});$(".close-canvas-menu").on("click",function(){$("body").toggleClass("mini-navbar");SmoothlyMenu()});$("body.canvas-menu .sidebar-collapse").slimScroll({height:"100%",railOpacity:.9});$(".right-sidebar-toggle").on("click",function(){$("#right-sidebar").toggleClass("sidebar-open")});$(".sidebar-container").slimScroll({height:"100%",railOpacity:.4,wheelStep:10});$(".open-small-chat").on("click",function(){$(this).children().toggleClass("fa-comments").toggleClass("fa-remove");$(".small-chat-box").toggleClass("active")});$(".small-chat-box .content").slimScroll({height:"234px",railOpacity:.4});$(".check-link").on("click",function(){var t=$(this).find("i");var e=$(this).next("span");t.toggleClass("fa-check-square").toggleClass("fa-square-o");e.toggleClass("todo-completed");return false});$(".navbar-minimalize").on("click",function(t){t.preventDefault();$("body").toggleClass("mini-navbar");SmoothlyMenu()});$(".tooltip-demo").tooltip({selector:"[data-toggle=tooltip]",container:"body"});function t(){var t=$("body > #wrapper").height()-61;$(".sidebar-panel").css("min-height",t+"px");var e=$("nav.navbar-default").height();var i=$("#page-wrapper").height();if(e>i){$("#page-wrapper").css("min-height",e+"px")}if(e<i){$("#page-wrapper").css("min-height",$(window).height()+"px")}if($("body").hasClass("fixed-nav")){if(e>i){$("#page-wrapper").css("min-height",e+"px")}else{$("#page-wrapper").css("min-height",$(window).height()-60+"px")}}}t();$(window).bind("load",function(){if($("body").hasClass("fixed-sidebar")){$(".sidebar-collapse").slimScroll({height:"100%",railOpacity:.9})}});$(window).scroll(function(){if($(window).scrollTop()>0&&!$("body").hasClass("fixed-nav")){$("#right-sidebar").addClass("sidebar-top")}else{$("#right-sidebar").removeClass("sidebar-top")}});$(window).bind("load resize scroll",function(){if(!$("body").hasClass("body-small")){t()}});$("[data-toggle=popover]").popover();$(".full-height-scroll").slimscroll({height:"100%"})});$(window).bind("resize",function(){if($(this).width()<769){$("body").addClass("body-small")}else{$("body").removeClass("body-small")}});$(document).ready(function(){if(localStorageSupport()){var t=localStorage.getItem("collapse_menu");var e=localStorage.getItem("fixedsidebar");var i=localStorage.getItem("fixednavbar");var n=localStorage.getItem("boxedlayout");var s=localStorage.getItem("fixedfooter");var r=$("body");if(e=="on"){r.addClass("fixed-sidebar");$(".sidebar-collapse").slimScroll({height:"100%",railOpacity:.9})}if(t=="on"){if(r.hasClass("fixed-sidebar")){if(!r.hasClass("body-small")){r.addClass("mini-navbar")}}else{if(!r.hasClass("body-small")){r.addClass("mini-navbar")}}}if(i=="on"){$(".navbar-static-top").removeClass("navbar-static-top").addClass("navbar-fixed-top");r.addClass("fixed-nav")}if(n=="on"){r.addClass("boxed-layout")}if(s=="on"){$(".footer").addClass("fixed")}}});function localStorageSupport(){return"localStorage"in window&&window["localStorage"]!==null}function animationHover(t,e){t=$(t);t.hover(function(){t.addClass("animated "+e)},function(){window.setTimeout(function(){t.removeClass("animated "+e)},2e3)})}function SmoothlyMenu(){if(!$("body").hasClass("mini-navbar")||$("body").hasClass("body-small")){$("#side-menu").hide();setTimeout(function(){$("#side-menu").fadeIn(400)},200)}else if($("body").hasClass("fixed-sidebar")){$("#side-menu").hide();setTimeout(function(){$("#side-menu").fadeIn(400)},100)}else{$("#side-menu").removeAttr("style")}}function WinMove(){var t="[class*=col]";var e=".ibox-title";var i="[class*=col]";$(t).sortable({handle:e,connectWith:i,tolerance:"pointer",forcePlaceholderSize:true,opacity:.8}).disableSelection()}(function(t){t.gritter={};t.gritter.options={position:"",class_name:"",fade_in_speed:"medium",fade_out_speed:1e3,time:6e3};t.gritter.add=function(t){try{return e.add(t||{})}catch(e){var i="Gritter Error: "+e;typeof console!="undefined"&&console.error?console.error(i,t):alert(i)}};t.gritter.remove=function(t,i){e.removeSpecific(t,i||{})};t.gritter.removeAll=function(t){e.stop(t||{})};var e={position:"",fade_in_speed:"",fade_out_speed:"",time:"",_custom_timer:0,_item_count:0,_is_setup:0,_tpl_close:'<a class="gritter-close" href="#" tabindex="1">Close Notification</a>',_tpl_title:'<span class="gritter-title">[[title]]</span>',_tpl_item:'<div id="gritter-item-[[number]]" class="gritter-item-wrapper [[item_class]]" style="display:none" role="alert"><div class="gritter-top"></div><div class="gritter-item">[[close]][[image]]<div class="[[class_name]]">[[title]]<p>[[text]]</p></div><div style="clear:both"></div></div><div class="gritter-bottom"></div></div>',_tpl_wrap:'<div id="gritter-notice-wrapper"></div>',add:function(i){if(typeof i=="string"){i={text:i}}if(i.text===null){throw'You must supply "text" parameter.'}if(!this._is_setup){this._runSetup()}var n=i.title,s=i.text,r=i.image||"",o=i.sticky||false,a=i.class_name||t.gritter.options.class_name,l=t.gritter.options.position,h=i.time||"";this._verifyWrapper();this._item_count++;var c=this._item_count,u=this._tpl_item;t(["before_open","after_open","before_close","after_close"]).each(function(n,s){e["_"+s+"_"+c]=t.isFunction(i[s])?i[s]:function(){}});this._custom_timer=0;if(h){this._custom_timer=h}var d=r!=""?'<img alt="image" src="'+r+'" class="gritter-image" />':"",f=r!=""?"gritter-with-image":"gritter-without-image";if(n){n=this._str_replace("[[title]]",n,this._tpl_title)}else{n=""}u=this._str_replace(["[[title]]","[[text]]","[[close]]","[[image]]","[[number]]","[[class_name]]","[[item_class]]"],[n,s,this._tpl_close,d,this._item_count,f,a],u);if(this["_before_open_"+c]()===false){return false}t("#gritter-notice-wrapper").addClass(l).append(u);var p=t("#gritter-item-"+this._item_count);p.fadeIn(this.fade_in_speed,function(){e["_after_open_"+c](t(this))});if(!o){this._setFadeTimer(p,c)}t(p).bind("mouseenter mouseleave",function(i){if(i.type=="mouseenter"){if(!o){e._restoreItemIfFading(t(this),c)}}else{if(!o){e._setFadeTimer(t(this),c)}}e._hoverState(t(this),i.type)});t(p).find(".gritter-close").click(function(){e.removeSpecific(c,{},null,true);return false});return c},_countRemoveWrapper:function(e,i,n){i.remove();this["_after_close_"+e](i,n);if(t(".gritter-item-wrapper").length==0){t("#gritter-notice-wrapper").remove()}},_fade:function(t,i,n,s){var n=n||{},r=typeof n.fade!="undefined"?n.fade:true,o=n.speed||this.fade_out_speed,a=s;this["_before_close_"+i](t,a);if(s){t.unbind("mouseenter mouseleave")}if(r){t.animate({opacity:0},o,function(){t.animate({height:0},300,function(){e._countRemoveWrapper(i,t,a)})})}else{this._countRemoveWrapper(i,t)}},_hoverState:function(t,e){if(e=="mouseenter"){t.addClass("hover");t.find(".gritter-close").show()}else{t.removeClass("hover");t.find(".gritter-close").hide()}},removeSpecific:function(e,i,n,s){if(!n){var n=t("#gritter-item-"+e)}this._fade(n,e,i||{},s)},_restoreItemIfFading:function(t,e){clearTimeout(this["_int_id_"+e]);t.stop().css({opacity:"",height:""})},_runSetup:function(){for(opt in t.gritter.options){this[opt]=t.gritter.options[opt]}this._is_setup=1},_setFadeTimer:function(t,i){var n=this._custom_timer?this._custom_timer:this.time;this["_int_id_"+i]=setTimeout(function(){e._fade(t,i)},n)},stop:function(e){var i=t.isFunction(e.before_close)?e.before_close:function(){};var n=t.isFunction(e.after_close)?e.after_close:function(){};var s=t("#gritter-notice-wrapper");i(s);s.fadeOut(function(){t(this).remove();n()})},_str_replace:function(t,e,i,n){var s=0,r=0,o="",a="",l=0,h=0,c=[].concat(t),u=[].concat(e),d=i,f=u instanceof Array,p=d instanceof Array;d=[].concat(d);if(n){this.window[n]=0}for(s=0,l=d.length;s<l;s++){if(d[s]===""){continue}for(r=0,h=c.length;r<h;r++){o=d[s]+"";a=f?u[r]!==undefined?u[r]:"":u[0];d[s]=o.split(c[r]).join(a);if(n&&d[s]!==o){this.window[n]+=(o.length-d[s].length)/c[r].length}}}return p?d:d[0]},_verifyWrapper:function(){if(t("#gritter-notice-wrapper").length==0){t("body").append(this._tpl_wrap)}}}})(jQuery);(function(t,e,i){(function(t){typeof define=="function"&&define.amd?define(["jquery"],t):jQuery&&!jQuery.fn.sparkline&&t(jQuery)})(function(n){"use strict";var s={},r,o,a,l,h,c,u,d,f,p,m,g,v,y,b,w,x,_,k,C,S,T,D,M,P,I,E,$,F,A,H,L,O=0;r=function(){return{common:{type:"line",lineColor:"#00f",fillColor:"#cdf",defaultPixelsPerValue:3,width:"auto",height:"auto",composite:!1,tagValuesAttribute:"values",tagOptionsPrefix:"spark",enableTagOptions:!1,enableHighlight:!0,highlightLighten:1.4,tooltipSkipNull:!0,tooltipPrefix:"",tooltipSuffix:"",disableHiddenCheck:!1,numberFormatter:!1,numberDigitGroupCount:3,numberDigitGroupSep:",",numberDecimalMark:".",disableTooltips:!1,disableInteraction:!1},line:{spotColor:"#f80",highlightSpotColor:"#5f5",highlightLineColor:"#f22",spotRadius:1.5,minSpotColor:"#f80",maxSpotColor:"#f80",lineWidth:1,normalRangeMin:i,normalRangeMax:i,normalRangeColor:"#ccc",drawNormalOnTop:!1,chartRangeMin:i,chartRangeMax:i,chartRangeMinX:i,chartRangeMaxX:i,tooltipFormat:new a('<span style="color: {{color}}">&#9679;</span> {{prefix}}{{y}}{{suffix}}')},bar:{barColor:"#3366cc",negBarColor:"#f44",stackedBarColor:["#3366cc","#dc3912","#ff9900","#109618","#66aa00","#dd4477","#0099c6","#990099"],zeroColor:i,nullColor:i,zeroAxis:!0,barWidth:4,barSpacing:1,chartRangeMax:i,chartRangeMin:i,chartRangeClip:!1,colorMap:i,tooltipFormat:new a('<span style="color: {{color}}">&#9679;</span> {{prefix}}{{value}}{{suffix}}')},tristate:{barWidth:4,barSpacing:1,posBarColor:"#6f6",negBarColor:"#f44",zeroBarColor:"#999",colorMap:{},tooltipFormat:new a('<span style="color: {{color}}">&#9679;</span> {{value:map}}'),tooltipValueLookups:{map:{"-1":"Loss",0:"Draw",1:"Win"}}},discrete:{lineHeight:"auto",thresholdColor:i,thresholdValue:0,chartRangeMax:i,chartRangeMin:i,chartRangeClip:!1,tooltipFormat:new a("{{prefix}}{{value}}{{suffix}}")},bullet:{targetColor:"#f33",targetWidth:3,performanceColor:"#33f",rangeColors:["#d3dafe","#a8b6ff","#7f94ff"],base:i,tooltipFormat:new a("{{fieldkey:fields}} - {{value}}"),tooltipValueLookups:{fields:{r:"Range",p:"Performance",t:"Target"}}},pie:{offset:0,sliceColors:["#3366cc","#dc3912","#ff9900","#109618","#66aa00","#dd4477","#0099c6","#990099"],borderWidth:0,borderColor:"#000",tooltipFormat:new a('<span style="color: {{color}}">&#9679;</span> {{value}} ({{percent.1}}%)')},box:{raw:!1,boxLineColor:"#000",boxFillColor:"#cdf",whiskerColor:"#000",outlierLineColor:"#333",outlierFillColor:"#fff",medianColor:"#f00",showOutliers:!0,outlierIQR:1.5,spotRadius:1.5,target:i,targetColor:"#4a2",chartRangeMax:i,chartRangeMin:i,tooltipFormat:new a("{{field:fields}}: {{value}}"),tooltipFormatFieldlistKey:"field",tooltipValueLookups:{fields:{lq:"Lower Quartile",med:"Median",uq:"Upper Quartile",lo:"Left Outlier",ro:"Right Outlier",lw:"Left Whisker",rw:"Right Whisker"}}}}},I='.jqstooltip { position: absolute;left: 0px;top: 0px;visibility: hidden;background: rgb(0, 0, 0) transparent;background-color: rgba(0,0,0,0.6);filter:progid:DXImageTransform.Microsoft.gradient(startColorstr=#99000000, endColorstr=#99000000);-ms-filter: "progid:DXImageTransform.Microsoft.gradient(startColorstr=#99000000, endColorstr=#99000000)";color: white;font: 10px arial, san serif;text-align: left;white-space: nowrap;padding: 5px;border: 1px solid white;z-index: 10000;}.jqsfield { color: white;font: 10px arial, san serif;text-align: left;}',o=function(){var t,e;return t=function(){this.init.apply(this,arguments)},arguments.length>1?(arguments[0]?(t.prototype=n.extend(new arguments[0],arguments[arguments.length-1]),t._super=arguments[0].prototype):t.prototype=arguments[arguments.length-1],arguments.length>2&&(e=Array.prototype.slice.call(arguments,1,-1),e.unshift(t.prototype),n.extend.apply(n,e))):t.prototype=arguments[0],t.prototype.cls=t,t},n.SPFormatClass=a=o({fre:/\{\{([\w.]+?)(:(.+?))?\}\}/g,precre:/(\w+)\.(\d+)/,init:function(t,e){this.format=t,this.fclass=e},render:function(t,e,n){var s=this,r=t,o,a,l,h,c;return this.format.replace(this.fre,function(){var t;return a=arguments[1],l=arguments[3],o=s.precre.exec(a),o?(c=o[2],a=o[1]):c=!1,h=r[a],h===i?"":l&&e&&e[l]?(t=e[l],t.get?e[l].get(h)||h:e[l][h]||h):(f(h)&&(n.get("numberFormatter")?h=n.get("numberFormatter")(h):h=y(h,c,n.get("numberDigitGroupCount"),n.get("numberDigitGroupSep"),n.get("numberDecimalMark"))),h)})}}),n.spformat=function(t,e){return new a(t,e)},l=function(t,e,i){return t<e?e:t>i?i:t},h=function(t,i){var n;return i===2?(n=e.floor(t.length/2),t.length%2?t[n]:(t[n-1]+t[n])/2):t.length%2?(n=(t.length*i+i)/4,n%1?(t[e.floor(n)]+t[e.floor(n)-1])/2:t[n-1]):(n=(t.length*i+2)/4,n%1?(t[e.floor(n)]+t[e.floor(n)-1])/2:t[n-1])},c=function(t){var e;switch(t){case"undefined":t=i;break;case"null":t=null;break;case"true":t=!0;break;case"false":t=!1;break;default:e=parseFloat(t),t==e&&(t=e)}return t},u=function(t){var e,i=[];for(e=t.length;e--;)i[e]=c(t[e]);return i},d=function(t,e){var i,n,s=[];for(i=0,n=t.length;i<n;i++)t[i]!==e&&s.push(t[i]);return s},f=function(t){return!isNaN(parseFloat(t))&&isFinite(t)},y=function(t,e,i,s,r){var o,a;t=(e===!1?parseFloat(t).toString():t.toFixed(e)).split(""),o=(o=n.inArray(".",t))<0?t.length:o,o<t.length&&(t[o]=r);for(a=o-i;a>0;a-=i)t.splice(a,0,s);return t.join("")},p=function(t,e,i){var n;for(n=e.length;n--;){if(i&&e[n]===null)continue;if(e[n]!==t)return!1}return!0},m=function(t){var e=0,i;for(i=t.length;i--;)e+=typeof t[i]=="number"?t[i]:0;return e},v=function(t){return n.isArray(t)?t:[t]},g=function(e){var i;t.createStyleSheet?t.createStyleSheet().cssText=e:(i=t.createElement("style"),i.type="text/css",t.getElementsByTagName("head")[0].appendChild(i),i[typeof t.body.style.WebkitAppearance=="string"?"innerText":"innerHTML"]=e)},n.fn.simpledraw=function(e,s,r,o){var a,l;if(r&&(a=this.data("_jqs_vcanvas")))return a;if(n.fn.sparkline.canvas===!1)return!1;if(n.fn.sparkline.canvas===i){var h=t.createElement("canvas");if(!h.getContext||!h.getContext("2d")){if(!t.namespaces||!!t.namespaces.v)return n.fn.sparkline.canvas=!1,!1;t.namespaces.add("v","urn:schemas-microsoft-com:vml","#default#VML"),n.fn.sparkline.canvas=function(t,e,i,n){return new H(t,e,i)}}else n.fn.sparkline.canvas=function(t,e,i,n){return new A(t,e,i,n)}}return e===i&&(e=n(this).innerWidth()),s===i&&(s=n(this).innerHeight()),a=n.fn.sparkline.canvas(e,s,this,o),l=n(this).data("_jqs_mhandler"),l&&l.registerCanvas(a),a},n.fn.cleardraw=function(){var t=this.data("_jqs_vcanvas");t&&t.reset()},n.RangeMapClass=b=o({init:function(t){var e,i,n=[];for(e in t)t.hasOwnProperty(e)&&typeof e=="string"&&e.indexOf(":")>-1&&(i=e.split(":"),i[0]=i[0].length===0?-Infinity:parseFloat(i[0]),i[1]=i[1].length===0?Infinity:parseFloat(i[1]),i[2]=t[e],n.push(i));this.map=t,this.rangelist=n||!1},get:function(t){var e=this.rangelist,n,s,r;if((r=this.map[t])!==i)return r;if(e)for(n=e.length;n--;){s=e[n];if(s[0]<=t&&s[1]>=t)return s[2]}return i}}),n.range_map=function(t){return new b(t)},w=o({init:function(t,e){var i=n(t);this.$el=i,this.options=e,this.currentPageX=0,this.currentPageY=0,this.el=t,this.splist=[],this.tooltip=null,this.over=!1,this.displayTooltips=!e.get("disableTooltips"),this.highlightEnabled=!e.get("disableHighlight")},registerSparkline:function(t){this.splist.push(t),this.over&&this.updateDisplay()},registerCanvas:function(t){var e=n(t.canvas);this.canvas=t,this.$canvas=e,e.mouseenter(n.proxy(this.mouseenter,this)),e.mouseleave(n.proxy(this.mouseleave,this)),e.click(n.proxy(this.mouseclick,this))},reset:function(t){this.splist=[],this.tooltip&&t&&(this.tooltip.remove(),this.tooltip=i)},mouseclick:function(t){var e=n.Event("sparklineClick");e.originalEvent=t,e.sparklines=this.splist,this.$el.trigger(e)},mouseenter:function(e){n(t.body).unbind("mousemove.jqs"),n(t.body).bind("mousemove.jqs",n.proxy(this.mousemove,this)),this.over=!0,this.currentPageX=e.pageX,this.currentPageY=e.pageY,this.currentEl=e.target,!this.tooltip&&this.displayTooltips&&(this.tooltip=new x(this.options),this.tooltip.updatePosition(e.pageX,e.pageY)),this.updateDisplay()},mouseleave:function(){n(t.body).unbind("mousemove.jqs");var e=this.splist,i=e.length,s=!1,r,o;this.over=!1,this.currentEl=null,this.tooltip&&(this.tooltip.remove(),this.tooltip=null);for(o=0;o<i;o++)r=e[o],r.clearRegionHighlight()&&(s=!0);s&&this.canvas.render()},mousemove:function(t){this.currentPageX=t.pageX,this.currentPageY=t.pageY,this.currentEl=t.target,this.tooltip&&this.tooltip.updatePosition(t.pageX,t.pageY),this.updateDisplay()},updateDisplay:function(){var t=this.splist,e=t.length,i=!1,s=this.$canvas.offset(),r=this.currentPageX-s.left,o=this.currentPageY-s.top,a,l,h,c,u;if(!this.over)return;for(h=0;h<e;h++)l=t[h],c=l.setRegionHighlight(this.currentEl,r,o),c&&(i=!0);if(i){u=n.Event("sparklineRegionChange"),u.sparklines=this.splist,this.$el.trigger(u);if(this.tooltip){a="";for(h=0;h<e;h++)l=t[h],a+=l.getCurrentRegionTooltip();this.tooltip.setContent(a)}this.disableHighlight||this.canvas.render()}c===null&&this.mouseleave()}}),x=o({sizeStyle:"position: static !important;display: block !important;visibility: hidden !important;float: left !important;",init:function(e){var i=e.get("tooltipClassname","jqstooltip"),s=this.sizeStyle,r;this.container=e.get("tooltipContainer")||t.body,this.tooltipOffsetX=e.get("tooltipOffsetX",10),this.tooltipOffsetY=e.get("tooltipOffsetY",12),n("#jqssizetip").remove(),n("#jqstooltip").remove(),this.sizetip=n("<div/>",{id:"jqssizetip",style:s,class:i}),this.tooltip=n("<div/>",{id:"jqstooltip",class:i}).appendTo(this.container),r=this.tooltip.offset(),this.offsetLeft=r.left,this.offsetTop=r.top,this.hidden=!0,n(window).unbind("resize.jqs scroll.jqs"),n(window).bind("resize.jqs scroll.jqs",n.proxy(this.updateWindowDims,this)),this.updateWindowDims()},updateWindowDims:function(){this.scrollTop=n(window).scrollTop(),this.scrollLeft=n(window).scrollLeft(),this.scrollRight=this.scrollLeft+n(window).width(),this.updatePosition()},getSize:function(t){this.sizetip.html(t).appendTo(this.container),this.width=this.sizetip.width()+1,this.height=this.sizetip.height(),this.sizetip.remove()},setContent:function(t){if(!t){this.tooltip.css("visibility","hidden"),this.hidden=!0;return}this.getSize(t),this.tooltip.html(t).css({width:this.width,height:this.height,visibility:"visible"}),this.hidden&&(this.hidden=!1,this.updatePosition())},updatePosition:function(t,e){if(t===i){if(this.mousex===i)return;t=this.mousex-this.offsetLeft,e=this.mousey-this.offsetTop}else this.mousex=t-=this.offsetLeft,this.mousey=e-=this.offsetTop;if(!this.height||!this.width||this.hidden)return;e-=this.height+this.tooltipOffsetY,t+=this.tooltipOffsetX,e<this.scrollTop&&(e=this.scrollTop),t<this.scrollLeft?t=this.scrollLeft:t+this.width>this.scrollRight&&(t=this.scrollRight-this.width),this.tooltip.css({left:t,top:e})},remove:function(){this.tooltip.remove(),this.sizetip.remove(),this.sizetip=this.tooltip=i,n(window).unbind("resize.jqs scroll.jqs")}}),E=function(){g(I)},n(E),L=[],n.fn.sparkline=function(e,s){return this.each(function(){var r=new n.fn.sparkline.options(this,s),o=n(this),a,l;a=function(){var s,a,l,h,c,u,d;if(e==="html"||e===i){d=this.getAttribute(r.get("tagValuesAttribute"));if(d===i||d===null)d=o.html();s=d.replace(/(^\s*<!--)|(-->\s*$)|\s+/g,"").split(",")}else s=e;a=r.get("width")==="auto"?s.length*r.get("defaultPixelsPerValue"):r.get("width");if(r.get("height")==="auto"){if(!r.get("composite")||!n.data(this,"_jqs_vcanvas"))h=t.createElement("span"),h.innerHTML="a",o.html(h),l=n(h).innerHeight()||n(h).height(),n(h).remove(),h=null}else l=r.get("height");r.get("disableInteraction")?c=!1:(c=n.data(this,"_jqs_mhandler"),c?r.get("composite")||c.reset():(c=new w(this,r),n.data(this,"_jqs_mhandler",c)));if(r.get("composite")&&!n.data(this,"_jqs_vcanvas")){n.data(this,"_jqs_errnotify")||(alert("Attempted to attach a composite sparkline to an element with no existing sparkline"),n.data(this,"_jqs_errnotify",!0));return}u=new(n.fn.sparkline[r.get("type")])(this,s,r,a,l),u.render(),c&&c.registerSparkline(u)};if(n(this).html()&&!r.get("disableHiddenCheck")&&n(this).is(":hidden")||!n(this).parents("body").length){if(!r.get("composite")&&n.data(this,"_jqs_pending"))for(l=L.length;l;l--)L[l-1][0]==this&&L.splice(l-1,1);L.push([this,a]),n.data(this,"_jqs_pending",!0)}else a.call(this)})},n.fn.sparkline.defaults=r(),n.sparkline_display_visible=function(){var t,e,i,s=[];for(e=0,i=L.length;e<i;e++)t=L[e][0],n(t).is(":visible")&&!n(t).parents().is(":hidden")?(L[e][1].call(t),n.data(L[e][0],"_jqs_pending",!1),s.push(e)):!n(t).closest("html").length&&!n.data(t,"_jqs_pending")&&(n.data(L[e][0],"_jqs_pending",!1),s.push(e));for(e=s.length;e;e--)L.splice(s[e-1],1)},n.fn.sparkline.options=o({init:function(t,e){var i,r,o,a;this.userOptions=e=e||{},this.tag=t,this.tagValCache={},r=n.fn.sparkline.defaults,o=r.common,this.tagOptionsPrefix=e.enableTagOptions&&(e.tagOptionsPrefix||o.tagOptionsPrefix),a=this.getTagSetting("type"),a===s?i=r[e.type||o.type]:i=r[a],this.mergedOptions=n.extend({},o,i,e)},getTagSetting:function(t){var e=this.tagOptionsPrefix,n,r,o,a;if(e===!1||e===i)return s;if(this.tagValCache.hasOwnProperty(t))n=this.tagValCache.key;else{n=this.tag.getAttribute(e+t);if(n===i||n===null)n=s;else if(n.substr(0,1)==="["){n=n.substr(1,n.length-2).split(",");for(r=n.length;r--;)n[r]=c(n[r].replace(/(^\s*)|(\s*$)/g,""))}else if(n.substr(0,1)==="{"){o=n.substr(1,n.length-2).split(","),n={};for(r=o.length;r--;)a=o[r].split(":",2),n[a[0].replace(/(^\s*)|(\s*$)/g,"")]=c(a[1].replace(/(^\s*)|(\s*$)/g,""))}else n=c(n);this.tagValCache.key=n}return n},get:function(t,e){var n=this.getTagSetting(t),r;return n!==s?n:(r=this.mergedOptions[t])===i?e:r}}),n.fn.sparkline._base=o({disabled:!1,init:function(t,e,s,r,o){this.el=t,this.$el=n(t),this.values=e,this.options=s,this.width=r,this.height=o,this.currentRegion=i},initTarget:function(){var t=!this.options.get("disableInteraction");(this.target=this.$el.simpledraw(this.width,this.height,this.options.get("composite"),t))?(this.canvasWidth=this.target.pixelWidth,this.canvasHeight=this.target.pixelHeight):this.disabled=!0},render:function(){return this.disabled?(this.el.innerHTML="",!1):!0},getRegion:function(t,e){},setRegionHighlight:function(t,e,n){var s=this.currentRegion,r=!this.options.get("disableHighlight"),o;return e>this.canvasWidth||n>this.canvasHeight||e<0||n<0?null:(o=this.getRegion(t,e,n),s!==o?(s!==i&&r&&this.removeHighlight(),this.currentRegion=o,o!==i&&r&&this.renderHighlight(),!0):!1)},clearRegionHighlight:function(){return this.currentRegion!==i?(this.removeHighlight(),this.currentRegion=i,!0):!1},renderHighlight:function(){this.changeHighlight(!0)},removeHighlight:function(){this.changeHighlight(!1)},changeHighlight:function(t){},getCurrentRegionTooltip:function(){var t=this.options,e="",s=[],r,o,l,h,c,u,d,f,p,m,g,v,y,b;if(this.currentRegion===i)return"";r=this.getCurrentRegionFields(),g=t.get("tooltipFormatter");if(g)return g(this,t,r);t.get("tooltipChartTitle")&&(e+='<div class="jqs jqstitle">'+t.get("tooltipChartTitle")+"</div>\n"),o=this.options.get("tooltipFormat");if(!o)return"";n.isArray(o)||(o=[o]),n.isArray(r)||(r=[r]),d=this.options.get("tooltipFormatFieldlist"),f=this.options.get("tooltipFormatFieldlistKey");if(d&&f){p=[];for(u=r.length;u--;)m=r[u][f],(b=n.inArray(m,d))!=-1&&(p[b]=r[u]);r=p}l=o.length,y=r.length;for(u=0;u<l;u++){v=o[u],typeof v=="string"&&(v=new a(v)),h=v.fclass||"jqsfield";for(b=0;b<y;b++)if(!r[b].isNull||!t.get("tooltipSkipNull"))n.extend(r[b],{prefix:t.get("tooltipPrefix"),suffix:t.get("tooltipSuffix")}),c=v.render(r[b],t.get("tooltipValueLookups"),t),s.push('<div class="'+h+'">'+c+"</div>")}return s.length?e+s.join("\n"):""},getCurrentRegionFields:function(){},calcHighlightColor:function(t,i){var n=i.get("highlightColor"),s=i.get("highlightLighten"),r,o,a,h;if(n)return n;if(s){r=/^#([0-9a-f])([0-9a-f])([0-9a-f])$/i.exec(t)||/^#([0-9a-f]{2})([0-9a-f]{2})([0-9a-f]{2})$/i.exec(t);if(r){a=[],o=t.length===4?16:1;for(h=0;h<3;h++)a[h]=l(e.round(parseInt(r[h+1],16)*o*s),0,255);return"rgb("+a.join(",")+")"}}return t}}),_={changeHighlight:function(t){var e=this.currentRegion,i=this.target,s=this.regionShapes[e],r;s&&(r=this.renderRegion(e,t),n.isArray(r)||n.isArray(s)?(i.replaceWithShapes(s,r),this.regionShapes[e]=n.map(r,function(t){return t.id})):(i.replaceWithShape(s,r),this.regionShapes[e]=r.id))},render:function(){var t=this.values,e=this.target,i=this.regionShapes,s,r,o,a;if(!this.cls._super.render.call(this))return;for(o=t.length;o--;){s=this.renderRegion(o);if(s)if(n.isArray(s)){r=[];for(a=s.length;a--;)s[a].append(),r.push(s[a].id);i[o]=r}else s.append(),i[o]=s.id;else i[o]=null}e.render()}},n.fn.sparkline.line=k=o(n.fn.sparkline._base,{type:"line",init:function(t,e,i,n,s){k._super.init.call(this,t,e,i,n,s),this.vertices=[],this.regionMap=[],this.xvalues=[],this.yvalues=[],this.yminmax=[],this.hightlightSpotId=null,this.lastShapeId=null,this.initTarget()},getRegion:function(t,e,n){var s,r=this.regionMap;for(s=r.length;s--;)if(r[s]!==null&&e>=r[s][0]&&e<=r[s][1])return r[s][2];return i},getCurrentRegionFields:function(){var t=this.currentRegion;return{isNull:this.yvalues[t]===null,x:this.xvalues[t],y:this.yvalues[t],color:this.options.get("lineColor"),fillColor:this.options.get("fillColor"),offset:t}},renderHighlight:function(){var t=this.currentRegion,e=this.target,n=this.vertices[t],s=this.options,r=s.get("spotRadius"),o=s.get("highlightSpotColor"),a=s.get("highlightLineColor"),l,h;if(!n)return;r&&o&&(l=e.drawCircle(n[0],n[1],r,i,o),this.highlightSpotId=l.id,e.insertAfterShape(this.lastShapeId,l)),a&&(h=e.drawLine(n[0],this.canvasTop,n[0],this.canvasTop+this.canvasHeight,a),this.highlightLineId=h.id,e.insertAfterShape(this.lastShapeId,h))},removeHighlight:function(){var t=this.target;this.highlightSpotId&&(t.removeShapeId(this.highlightSpotId),this.highlightSpotId=null),this.highlightLineId&&(t.removeShapeId(this.highlightLineId),this.highlightLineId=null)},scanValues:function(){var t=this.values,i=t.length,n=this.xvalues,s=this.yvalues,r=this.yminmax,o,a,l,h,c;for(o=0;o<i;o++)a=t[o],l=typeof t[o]=="string",h=typeof t[o]=="object"&&t[o]instanceof Array,c=l&&t[o].split(":"),l&&c.length===2?(n.push(Number(c[0])),s.push(Number(c[1])),r.push(Number(c[1]))):h?(n.push(a[0]),s.push(a[1]),r.push(a[1])):(n.push(o),t[o]===null||t[o]==="null"?s.push(null):(s.push(Number(a)),r.push(Number(a))));this.options.get("xvalues")&&(n=this.options.get("xvalues")),this.maxy=this.maxyorg=e.max.apply(e,r),this.miny=this.minyorg=e.min.apply(e,r),this.maxx=e.max.apply(e,n),this.minx=e.min.apply(e,n),this.xvalues=n,this.yvalues=s,this.yminmax=r},processRangeOptions:function(){var t=this.options,e=t.get("normalRangeMin"),n=t.get("normalRangeMax");e!==i&&(e<this.miny&&(this.miny=e),n>this.maxy&&(this.maxy=n)),t.get("chartRangeMin")!==i&&(t.get("chartRangeClip")||t.get("chartRangeMin")<this.miny)&&(this.miny=t.get("chartRangeMin")),t.get("chartRangeMax")!==i&&(t.get("chartRangeClip")||t.get("chartRangeMax")>this.maxy)&&(this.maxy=t.get("chartRangeMax")),t.get("chartRangeMinX")!==i&&(t.get("chartRangeClipX")||t.get("chartRangeMinX")<this.minx)&&(this.minx=t.get("chartRangeMinX")),t.get("chartRangeMaxX")!==i&&(t.get("chartRangeClipX")||t.get("chartRangeMaxX")>this.maxx)&&(this.maxx=t.get("chartRangeMaxX"))},drawNormalRange:function(t,n,s,r,o){var a=this.options.get("normalRangeMin"),l=this.options.get("normalRangeMax"),h=n+e.round(s-s*((l-this.miny)/o)),c=e.round(s*(l-a)/o);this.target.drawRect(t,h,r,c,i,this.options.get("normalRangeColor")).append()},render:function(){var t=this.options,s=this.target,r=this.canvasWidth,o=this.canvasHeight,a=this.vertices,l=t.get("spotRadius"),h=this.regionMap,c,u,d,f,p,m,g,v,y,w,x,_,C,S,T,D,M,P,I,E,$,F,A,H,L;if(!k._super.render.call(this))return;this.scanValues(),this.processRangeOptions(),A=this.xvalues,H=this.yvalues;if(!this.yminmax.length||this.yvalues.length<2)return;f=p=0,c=this.maxx-this.minx===0?1:this.maxx-this.minx,u=this.maxy-this.miny===0?1:this.maxy-this.miny,d=this.yvalues.length-1,l&&(r<l*4||o<l*4)&&(l=0);if(l){$=t.get("highlightSpotColor")&&!t.get("disableInteraction");if($||t.get("minSpotColor")||t.get("spotColor")&&H[d]===this.miny)o-=e.ceil(l);if($||t.get("maxSpotColor")||t.get("spotColor")&&H[d]===this.maxy)o-=e.ceil(l),f+=e.ceil(l);if($||(t.get("minSpotColor")||t.get("maxSpotColor"))&&(H[0]===this.miny||H[0]===this.maxy))p+=e.ceil(l),r-=e.ceil(l);if($||t.get("spotColor")||t.get("minSpotColor")||t.get("maxSpotColor")&&(H[d]===this.miny||H[d]===this.maxy))r-=e.ceil(l)}o--,t.get("normalRangeMin")!==i&&!t.get("drawNormalOnTop")&&this.drawNormalRange(p,f,o,r,u),g=[],v=[g],S=T=null,D=H.length;for(L=0;L<D;L++)y=A[L],x=A[L+1],w=H[L],_=p+e.round((y-this.minx)*(r/c)),C=L<D-1?p+e.round((x-this.minx)*(r/c)):r,T=_+(C-_)/2,h[L]=[S||0,T,L],S=T,w===null?L&&(H[L-1]!==null&&(g=[],v.push(g)),a.push(null)):(w<this.miny&&(w=this.miny),w>this.maxy&&(w=this.maxy),g.length||g.push([_,f+o]),m=[_,f+e.round(o-o*((w-this.miny)/u))],g.push(m),a.push(m));M=[],P=[],I=v.length;for(L=0;L<I;L++)g=v[L],g.length&&(t.get("fillColor")&&(g.push([g[g.length-1][0],f+o]),P.push(g.slice(0)),g.pop()),g.length>2&&(g[0]=[g[0][0],g[1][1]]),M.push(g));I=P.length;for(L=0;L<I;L++)s.drawShape(P[L],t.get("fillColor"),t.get("fillColor")).append();t.get("normalRangeMin")!==i&&t.get("drawNormalOnTop")&&this.drawNormalRange(p,f,o,r,u),I=M.length;for(L=0;L<I;L++)s.drawShape(M[L],t.get("lineColor"),i,t.get("lineWidth")).append();if(l&&t.get("valueSpots")){E=t.get("valueSpots"),E.get===i&&(E=new b(E));for(L=0;L<D;L++)F=E.get(H[L]),F&&s.drawCircle(p+e.round((A[L]-this.minx)*(r/c)),f+e.round(o-o*((H[L]-this.miny)/u)),l,i,F).append()}l&&t.get("spotColor")&&H[d]!==null&&s.drawCircle(p+e.round((A[A.length-1]-this.minx)*(r/c)),f+e.round(o-o*((H[d]-this.miny)/u)),l,i,t.get("spotColor")).append(),this.maxy!==this.minyorg&&(l&&t.get("minSpotColor")&&(y=A[n.inArray(this.minyorg,H)],s.drawCircle(p+e.round((y-this.minx)*(r/c)),f+e.round(o-o*((this.minyorg-this.miny)/u)),l,i,t.get("minSpotColor")).append()),l&&t.get("maxSpotColor")&&(y=A[n.inArray(this.maxyorg,H)],s.drawCircle(p+e.round((y-this.minx)*(r/c)),f+e.round(o-o*((this.maxyorg-this.miny)/u)),l,i,t.get("maxSpotColor")).append())),this.lastShapeId=s.getLastShapeId(),this.canvasTop=f,s.render()}}),n.fn.sparkline.bar=C=o(n.fn.sparkline._base,_,{type:"bar",init:function(t,s,r,o,a){var h=parseInt(r.get("barWidth"),10),f=parseInt(r.get("barSpacing"),10),p=r.get("chartRangeMin"),m=r.get("chartRangeMax"),g=r.get("chartRangeClip"),v=Infinity,y=-Infinity,w,x,_,k,S,T,D,M,P,I,E,$,F,A,H,L,O,R,z,N,B,j,W;C._super.init.call(this,t,s,r,o,a);for(T=0,D=s.length;T<D;T++){N=s[T],w=typeof N=="string"&&N.indexOf(":")>-1;if(w||n.isArray(N))H=!0,w&&(N=s[T]=u(N.split(":"))),N=d(N,null),x=e.min.apply(e,N),_=e.max.apply(e,N),x<v&&(v=x),_>y&&(y=_)}this.stacked=H,this.regionShapes={},this.barWidth=h,this.barSpacing=f,this.totalBarWidth=h+f,this.width=o=s.length*h+(s.length-1)*f,this.initTarget(),g&&(F=p===i?-Infinity:p,A=m===i?Infinity:m),S=[],k=H?[]:S;var Y=[],U=[];for(T=0,D=s.length;T<D;T++)if(H){L=s[T],s[T]=z=[],Y[T]=0,k[T]=U[T]=0;for(O=0,R=L.length;O<R;O++)N=z[O]=g?l(L[O],F,A):L[O],N!==null&&(N>0&&(Y[T]+=N),v<0&&y>0?N<0?U[T]+=e.abs(N):k[T]+=N:k[T]+=e.abs(N-(N<0?y:v)),S.push(N))}else N=g?l(s[T],F,A):s[T],N=s[T]=c(N),N!==null&&S.push(N);this.max=$=e.max.apply(e,S),this.min=E=e.min.apply(e,S),this.stackMax=y=H?e.max.apply(e,Y):$,this.stackMin=v=H?e.min.apply(e,S):E,r.get("chartRangeMin")!==i&&(r.get("chartRangeClip")||r.get("chartRangeMin")<E)&&(E=r.get("chartRangeMin")),r.get("chartRangeMax")!==i&&(r.get("chartRangeClip")||r.get("chartRangeMax")>$)&&($=r.get("chartRangeMax")),this.zeroAxis=P=r.get("zeroAxis",!0),E<=0&&$>=0&&P?I=0:P==0?I=E:E>0?I=E:I=$,this.xaxisOffset=I,M=H?e.max.apply(e,k)+e.max.apply(e,U):$-E,this.canvasHeightEf=P&&E<0?this.canvasHeight-2:this.canvasHeight-1,E<I?(j=H&&$>=0?y:$,B=(j-I)/M*this.canvasHeight,B!==e.ceil(B)&&(this.canvasHeightEf-=2,B=e.ceil(B))):B=this.canvasHeight,this.yoffset=B,n.isArray(r.get("colorMap"))?(this.colorMapByIndex=r.get("colorMap"),this.colorMapByValue=null):(this.colorMapByIndex=null,this.colorMapByValue=r.get("colorMap"),this.colorMapByValue&&this.colorMapByValue.get===i&&(this.colorMapByValue=new b(this.colorMapByValue))),this.range=M},getRegion:function(t,n,s){var r=e.floor(n/this.totalBarWidth);return r<0||r>=this.values.length?i:r},getCurrentRegionFields:function(){var t=this.currentRegion,e=v(this.values[t]),i=[],n,s;for(s=e.length;s--;)n=e[s],i.push({isNull:n===null,value:n,color:this.calcColor(s,n,t),offset:t});return i},calcColor:function(t,e,s){var r=this.colorMapByIndex,o=this.colorMapByValue,a=this.options,l,h;return this.stacked?l=a.get("stackedBarColor"):l=e<0?a.get("negBarColor"):a.get("barColor"),e===0&&a.get("zeroColor")!==i&&(l=a.get("zeroColor")),o&&(h=o.get(e))?l=h:r&&r.length>s&&(l=r[s]),n.isArray(l)?l[t%l.length]:l},renderRegion:function(t,s){var r=this.values[t],o=this.options,a=this.xaxisOffset,l=[],h=this.range,c=this.stacked,u=this.target,d=t*this.totalBarWidth,f=this.canvasHeightEf,m=this.yoffset,g,v,y,b,w,x,_,k,C,S;r=n.isArray(r)?r:[r],_=r.length,k=r[0],b=p(null,r),S=p(a,r,!0);if(b)return o.get("nullColor")?(y=s?o.get("nullColor"):this.calcHighlightColor(o.get("nullColor"),o),g=m>0?m-1:m,u.drawRect(d,g,this.barWidth-1,0,y,y)):i;w=m;for(x=0;x<_;x++){k=r[x];if(c&&k===a){if(!S||C)continue;C=!0}h>0?v=e.floor(f*(e.abs(k-a)/h))+1:v=1,k<a||k===a&&m===0?(g=w,w+=v):(g=m-v,m-=v),y=this.calcColor(x,k,t),s&&(y=this.calcHighlightColor(y,o)),l.push(u.drawRect(d,g,this.barWidth-1,v-1,y,y))}return l.length===1?l[0]:l}}),n.fn.sparkline.tristate=S=o(n.fn.sparkline._base,_,{type:"tristate",init:function(t,e,s,r,o){var a=parseInt(s.get("barWidth"),10),l=parseInt(s.get("barSpacing"),10);S._super.init.call(this,t,e,s,r,o),this.regionShapes={},this.barWidth=a,this.barSpacing=l,this.totalBarWidth=a+l,this.values=n.map(e,Number),this.width=r=e.length*a+(e.length-1)*l,n.isArray(s.get("colorMap"))?(this.colorMapByIndex=s.get("colorMap"),this.colorMapByValue=null):(this.colorMapByIndex=null,this.colorMapByValue=s.get("colorMap"),this.colorMapByValue&&this.colorMapByValue.get===i&&(this.colorMapByValue=new b(this.colorMapByValue))),this.initTarget()},getRegion:function(t,i,n){return e.floor(i/this.totalBarWidth)},getCurrentRegionFields:function(){var t=this.currentRegion;return{isNull:this.values[t]===i,value:this.values[t],color:this.calcColor(this.values[t],t),offset:t}},calcColor:function(t,e){var i=this.values,n=this.options,s=this.colorMapByIndex,r=this.colorMapByValue,o,a;return r&&(a=r.get(t))?o=a:s&&s.length>e?o=s[e]:i[e]<0?o=n.get("negBarColor"):i[e]>0?o=n.get("posBarColor"):o=n.get("zeroBarColor"),o},renderRegion:function(t,i){var n=this.values,s=this.options,r=this.target,o,a,l,h,c,u;o=r.pixelHeight,l=e.round(o/2),h=t*this.totalBarWidth,n[t]<0?(c=l,a=l-1):n[t]>0?(c=0,a=l-1):(c=l-1,a=2),u=this.calcColor(n[t],t);if(u===null)return;return i&&(u=this.calcHighlightColor(u,s)),r.drawRect(h,c,this.barWidth-1,a-1,u,u)}}),n.fn.sparkline.discrete=T=o(n.fn.sparkline._base,_,{type:"discrete",init:function(t,s,r,o,a){T._super.init.call(this,t,s,r,o,a),this.regionShapes={},this.values=s=n.map(s,Number),this.min=e.min.apply(e,s),this.max=e.max.apply(e,s),this.range=this.max-this.min,this.width=o=r.get("width")==="auto"?s.length*2:this.width,this.interval=e.floor(o/s.length),this.itemWidth=o/s.length,r.get("chartRangeMin")!==i&&(r.get("chartRangeClip")||r.get("chartRangeMin")<this.min)&&(this.min=r.get("chartRangeMin")),r.get("chartRangeMax")!==i&&(r.get("chartRangeClip")||r.get("chartRangeMax")>this.max)&&(this.max=r.get("chartRangeMax")),this.initTarget(),this.target&&(this.lineHeight=r.get("lineHeight")==="auto"?e.round(this.canvasHeight*.3):r.get("lineHeight"))},getRegion:function(t,i,n){return e.floor(i/this.itemWidth)},getCurrentRegionFields:function(){var t=this.currentRegion;return{isNull:this.values[t]===i,value:this.values[t],offset:t}},renderRegion:function(t,i){var n=this.values,s=this.options,r=this.min,o=this.max,a=this.range,h=this.interval,c=this.target,u=this.canvasHeight,d=this.lineHeight,f=u-d,p,m,g,v;return m=l(n[t],r,o),v=t*h,p=e.round(f-f*((m-r)/a)),g=s.get("thresholdColor")&&m<s.get("thresholdValue")?s.get("thresholdColor"):s.get("lineColor"),i&&(g=this.calcHighlightColor(g,s)),c.drawLine(v,p,v,p+d,g)}}),n.fn.sparkline.bullet=D=o(n.fn.sparkline._base,{type:"bullet",init:function(t,n,s,r,o){var a,l,h;D._super.init.call(this,t,n,s,r,o),this.values=n=u(n),h=n.slice(),h[0]=h[0]===null?h[2]:h[0],h[1]=n[1]===null?h[2]:h[1],a=e.min.apply(e,n),l=e.max.apply(e,n),s.get("base")===i?a=a<0?a:0:a=s.get("base"),this.min=a,this.max=l,this.range=l-a,this.shapes={},this.valueShapes={},this.regiondata={},this.width=r=s.get("width")==="auto"?"4.0em":r,this.target=this.$el.simpledraw(r,o,s.get("composite")),n.length||(this.disabled=!0),this.initTarget()},getRegion:function(t,e,n){var s=this.target.getShapeAt(t,e,n);return s!==i&&this.shapes[s]!==i?this.shapes[s]:i},getCurrentRegionFields:function(){var t=this.currentRegion;return{fieldkey:t.substr(0,1),value:this.values[t.substr(1)],region:t}},changeHighlight:function(t){var e=this.currentRegion,i=this.valueShapes[e],n;delete this.shapes[i];switch(e.substr(0,1)){case"r":n=this.renderRange(e.substr(1),t);break;case"p":n=this.renderPerformance(t);break;case"t":n=this.renderTarget(t)}this.valueShapes[e]=n.id,this.shapes[n.id]=e,this.target.replaceWithShape(i,n)},renderRange:function(t,i){var n=this.values[t],s=e.round(this.canvasWidth*((n-this.min)/this.range)),r=this.options.get("rangeColors")[t-2];return i&&(r=this.calcHighlightColor(r,this.options)),this.target.drawRect(0,0,s-1,this.canvasHeight-1,r,r)},renderPerformance:function(t){var i=this.values[1],n=e.round(this.canvasWidth*((i-this.min)/this.range)),s=this.options.get("performanceColor");return t&&(s=this.calcHighlightColor(s,this.options)),this.target.drawRect(0,e.round(this.canvasHeight*.3),n-1,e.round(this.canvasHeight*.4)-1,s,s)},renderTarget:function(t){var i=this.values[0],n=e.round(this.canvasWidth*((i-this.min)/this.range)-this.options.get("targetWidth")/2),s=e.round(this.canvasHeight*.1),r=this.canvasHeight-s*2,o=this.options.get("targetColor");return t&&(o=this.calcHighlightColor(o,this.options)),this.target.drawRect(n,s,this.options.get("targetWidth")-1,r-1,o,o)},render:function(){var t=this.values.length,e=this.target,i,n;if(!D._super.render.call(this))return;for(i=2;i<t;i++)n=this.renderRange(i).append(),this.shapes[n.id]="r"+i,this.valueShapes["r"+i]=n.id;this.values[1]!==null&&(n=this.renderPerformance().append(),this.shapes[n.id]="p1",this.valueShapes.p1=n.id),this.values[0]!==null&&(n=this.renderTarget().append(),this.shapes[n.id]="t0",this.valueShapes.t0=n.id),e.render()}}),n.fn.sparkline.pie=M=o(n.fn.sparkline._base,{type:"pie",init:function(t,i,s,r,o){var a=0,l;M._super.init.call(this,t,i,s,r,o),this.shapes={},this.valueShapes={},this.values=i=n.map(i,Number),s.get("width")==="auto"&&(this.width=this.height);if(i.length>0)for(l=i.length;l--;)a+=i[l];this.total=a,this.initTarget(),this.radius=e.floor(e.min(this.canvasWidth,this.canvasHeight)/2)},getRegion:function(t,e,n){var s=this.target.getShapeAt(t,e,n);return s!==i&&this.shapes[s]!==i?this.shapes[s]:i},getCurrentRegionFields:function(){var t=this.currentRegion;return{isNull:this.values[t]===i,value:this.values[t],percent:this.values[t]/this.total*100,color:this.options.get("sliceColors")[t%this.options.get("sliceColors").length],offset:t}},changeHighlight:function(t){var e=this.currentRegion,i=this.renderSlice(e,t),n=this.valueShapes[e];delete this.shapes[n],this.target.replaceWithShape(n,i),this.valueShapes[e]=i.id,this.shapes[i.id]=e},renderSlice:function(t,n){var s=this.target,r=this.options,o=this.radius,a=r.get("borderWidth"),l=r.get("offset"),h=2*e.PI,c=this.values,u=this.total,d=l?2*e.PI*(l/360):0,f,p,m,g,v;g=c.length;for(m=0;m<g;m++){f=d,p=d,u>0&&(p=d+h*(c[m]/u));if(t===m)return v=r.get("sliceColors")[m%r.get("sliceColors").length],n&&(v=this.calcHighlightColor(v,r)),s.drawPieSlice(o,o,o-a,f,p,i,v);d=p}},render:function(){var t=this.target,n=this.values,s=this.options,r=this.radius,o=s.get("borderWidth"),a,l;if(!M._super.render.call(this))return;o&&t.drawCircle(r,r,e.floor(r-o/2),s.get("borderColor"),i,o).append();for(l=n.length;l--;)n[l]&&(a=this.renderSlice(l).append(),this.valueShapes[l]=a.id,this.shapes[a.id]=l);t.render()}}),n.fn.sparkline.box=P=o(n.fn.sparkline._base,{type:"box",init:function(t,e,i,s,r){P._super.init.call(this,t,e,i,s,r),this.values=n.map(e,Number),this.width=i.get("width")==="auto"?"4.0em":s,this.initTarget(),this.values.length||(this.disabled=1)},getRegion:function(){return 1},getCurrentRegionFields:function(){var t=[{field:"lq",value:this.quartiles[0]},{field:"med",value:this.quartiles[1]},{field:"uq",value:this.quartiles[2]}];return this.loutlier!==i&&t.push({field:"lo",value:this.loutlier}),this.routlier!==i&&t.push({field:"ro",value:this.routlier}),this.lwhisker!==i&&t.push({field:"lw",value:this.lwhisker}),this.rwhisker!==i&&t.push({field:"rw",value:this.rwhisker}),t},render:function(){var t=this.target,n=this.values,s=n.length,r=this.options,o=this.canvasWidth,a=this.canvasHeight,l=r.get("chartRangeMin")===i?e.min.apply(e,n):r.get("chartRangeMin"),c=r.get("chartRangeMax")===i?e.max.apply(e,n):r.get("chartRangeMax"),u=0,d,f,p,m,g,v,y,b,w,x,_;if(!P._super.render.call(this))return;if(r.get("raw"))r.get("showOutliers")&&n.length>5?(f=n[0],d=n[1],m=n[2],g=n[3],v=n[4],y=n[5],b=n[6]):(d=n[0],m=n[1],g=n[2],v=n[3],y=n[4]);else{n.sort(function(t,e){return t-e}),m=h(n,1),g=h(n,2),v=h(n,3),p=v-m;if(r.get("showOutliers")){d=y=i;for(w=0;w<s;w++)d===i&&n[w]>m-p*r.get("outlierIQR")&&(d=n[w]),n[w]<v+p*r.get("outlierIQR")&&(y=n[w]);f=n[0],b=n[s-1]}else d=n[0],y=n[s-1]}this.quartiles=[m,g,v],this.lwhisker=d,this.rwhisker=y,this.loutlier=f,this.routlier=b,_=o/(c-l+1),r.get("showOutliers")&&(u=e.ceil(r.get("spotRadius")),o-=2*e.ceil(r.get("spotRadius")),_=o/(c-l+1),f<d&&t.drawCircle((f-l)*_+u,a/2,r.get("spotRadius"),r.get("outlierLineColor"),r.get("outlierFillColor")).append(),b>y&&t.drawCircle((b-l)*_+u,a/2,r.get("spotRadius"),r.get("outlierLineColor"),r.get("outlierFillColor")).append()),t.drawRect(e.round((m-l)*_+u),e.round(a*.1),e.round((v-m)*_),e.round(a*.8),r.get("boxLineColor"),r.get("boxFillColor")).append(),t.drawLine(e.round((d-l)*_+u),e.round(a/2),e.round((m-l)*_+u),e.round(a/2),r.get("lineColor")).append(),t.drawLine(e.round((d-l)*_+u),e.round(a/4),e.round((d-l)*_+u),e.round(a-a/4),r.get("whiskerColor")).append(),t.drawLine(e.round((y-l)*_+u),e.round(a/2),e.round((v-l)*_+u),e.round(a/2),r.get("lineColor")).append(),t.drawLine(e.round((y-l)*_+u),e.round(a/4),e.round((y-l)*_+u),e.round(a-a/4),r.get("whiskerColor")).append(),t.drawLine(e.round((g-l)*_+u),e.round(a*.1),e.round((g-l)*_+u),e.round(a*.9),r.get("medianColor")).append(),r.get("target")&&(x=e.ceil(r.get("spotRadius")),t.drawLine(e.round((r.get("target")-l)*_+u),e.round(a/2-x),e.round((r.get("target")-l)*_+u),e.round(a/2+x),r.get("targetColor")).append(),t.drawLine(e.round((r.get("target")-l)*_+u-x),e.round(a/2),e.round((r.get("target")-l)*_+u+x),e.round(a/2),r.get("targetColor")).append()),t.render()}}),$=o({init:function(t,e,i,n){this.target=t,this.id=e,this.type=i,this.args=n},append:function(){return this.target.appendShape(this),this}}),F=o({_pxregex:/(\d+)(px)?\s*$/i,init:function(t,e,i){if(!t)return;this.width=t,this.height=e,this.target=i,this.lastShapeId=null,i[0]&&(i=i[0]),n.data(i,"_jqs_vcanvas",this)},drawLine:function(t,e,i,n,s,r){return this.drawShape([[t,e],[i,n]],s,r)},drawShape:function(t,e,i,n){return this._genShape("Shape",[t,e,i,n])},drawCircle:function(t,e,i,n,s,r){return this._genShape("Circle",[t,e,i,n,s,r])},drawPieSlice:function(t,e,i,n,s,r,o){return this._genShape("PieSlice",[t,e,i,n,s,r,o])},drawRect:function(t,e,i,n,s,r){return this._genShape("Rect",[t,e,i,n,s,r])},getElement:function(){return this.canvas},getLastShapeId:function(){return this.lastShapeId},reset:function(){alert("reset not implemented")},_insert:function(t,e){n(e).html(t)},_calculatePixelDims:function(t,e,i){var s;s=this._pxregex.exec(e),s?this.pixelHeight=s[1]:this.pixelHeight=n(i).height(),s=this._pxregex.exec(t),s?this.pixelWidth=s[1]:this.pixelWidth=n(i).width()},_genShape:function(t,e){var i=O++;return e.unshift(i),new $(this,i,t,e)},appendShape:function(t){alert("appendShape not implemented")},replaceWithShape:function(t,e){alert("replaceWithShape not implemented")},insertAfterShape:function(t,e){alert("insertAfterShape not implemented")},removeShapeId:function(t){alert("removeShapeId not implemented")},getShapeAt:function(t,e,i){alert("getShapeAt not implemented")},render:function(){alert("render not implemented")}}),A=o(F,{init:function(e,s,r,o){A._super.init.call(this,e,s,r),this.canvas=t.createElement("canvas"),r[0]&&(r=r[0]),n.data(r,"_jqs_vcanvas",this),n(this.canvas).css({display:"inline-block",width:e,height:s,verticalAlign:"top"}),this._insert(this.canvas,r),this._calculatePixelDims(e,s,this.canvas),this.canvas.width=this.pixelWidth,this.canvas.height=this.pixelHeight,this.interact=o,this.shapes={},this.shapeseq=[],this.currentTargetShapeId=i,n(this.canvas).css({width:this.pixelWidth,height:this.pixelHeight})},_getContext:function(t,e,n){var s=this.canvas.getContext("2d");return t!==i&&(s.strokeStyle=t),s.lineWidth=n===i?1:n,e!==i&&(s.fillStyle=e),s},reset:function(){var t=this._getContext();t.clearRect(0,0,this.pixelWidth,this.pixelHeight),this.shapes={},this.shapeseq=[],this.currentTargetShapeId=i},_drawShape:function(t,e,n,s,r){var o=this._getContext(n,s,r),a,l;o.beginPath(),o.moveTo(e[0][0]+.5,e[0][1]+.5);for(a=1,l=e.length;a<l;a++)o.lineTo(e[a][0]+.5,e[a][1]+.5);n!==i&&o.stroke(),s!==i&&o.fill(),this.targetX!==i&&this.targetY!==i&&o.isPointInPath(this.targetX,this.targetY)&&(this.currentTargetShapeId=t)},_drawCircle:function(t,n,s,r,o,a,l){var h=this._getContext(o,a,l);h.beginPath(),h.arc(n,s,r,0,2*e.PI,!1),this.targetX!==i&&this.targetY!==i&&h.isPointInPath(this.targetX,this.targetY)&&(this.currentTargetShapeId=t),o!==i&&h.stroke(),a!==i&&h.fill()},_drawPieSlice:function(t,e,n,s,r,o,a,l){var h=this._getContext(a,l);h.beginPath(),h.moveTo(e,n),h.arc(e,n,s,r,o,!1),h.lineTo(e,n),h.closePath(),a!==i&&h.stroke(),l&&h.fill(),this.targetX!==i&&this.targetY!==i&&h.isPointInPath(this.targetX,this.targetY)&&(this.currentTargetShapeId=t)},_drawRect:function(t,e,i,n,s,r,o){return this._drawShape(t,[[e,i],[e+n,i],[e+n,i+s],[e,i+s],[e,i]],r,o)},appendShape:function(t){return this.shapes[t.id]=t,this.shapeseq.push(t.id),this.lastShapeId=t.id,t.id},replaceWithShape:function(t,e){var i=this.shapeseq,n;this.shapes[e.id]=e;for(n=i.length;n--;)i[n]==t&&(i[n]=e.id);delete this.shapes[t]},replaceWithShapes:function(t,e){var i=this.shapeseq,n={},s,r,o;for(r=t.length;r--;)n[t[r]]=!0;for(r=i.length;r--;)s=i[r],n[s]&&(i.splice(r,1),delete this.shapes[s],o=r);for(r=e.length;r--;)i.splice(o,0,e[r].id),this.shapes[e[r].id]=e[r]},insertAfterShape:function(t,e){var i=this.shapeseq,n;for(n=i.length;n--;)if(i[n]===t){i.splice(n+1,0,e.id),this.shapes[e.id]=e;return}},removeShapeId:function(t){var e=this.shapeseq,i;for(i=e.length;i--;)if(e[i]===t){e.splice(i,1);break}delete this.shapes[t]},getShapeAt:function(t,e,i){return this.targetX=e,this.targetY=i,this.render(),this.currentTargetShapeId},render:function(){var t=this.shapeseq,e=this.shapes,i=t.length,n=this._getContext(),s,r,o;n.clearRect(0,0,this.pixelWidth,this.pixelHeight);for(o=0;o<i;o++)s=t[o],r=e[s],this["_draw"+r.type].apply(this,r.args);this.interact||(this.shapes={},this.shapeseq=[])}}),H=o(F,{init:function(e,i,s){var r;H._super.init.call(this,e,i,s),s[0]&&(s=s[0]),n.data(s,"_jqs_vcanvas",this),this.canvas=t.createElement("span"),n(this.canvas).css({display:"inline-block",position:"relative",overflow:"hidden",width:e,height:i,margin:"0px",padding:"0px",verticalAlign:"top"}),this._insert(this.canvas,s),this._calculatePixelDims(e,i,this.canvas),this.canvas.width=this.pixelWidth,this.canvas.height=this.pixelHeight,r='<v:group coordorigin="0 0" coordsize="'+this.pixelWidth+" "+this.pixelHeight+'"'+' style="position:absolute;top:0;left:0;width:'+this.pixelWidth+"px;height="+this.pixelHeight+'px;"></v:group>',this.canvas.insertAdjacentHTML("beforeEnd",r),this.group=n(this.canvas).children()[0],this.rendered=!1,this.prerender=""},_drawShape:function(t,e,n,s,r){var o=[],a,l,h,c,u,d,f;for(f=0,d=e.length;f<d;f++)o[f]=""+e[f][0]+","+e[f][1];return a=o.splice(0,1),r=r===i?1:r,l=n===i?' stroked="false" ':' strokeWeight="'+r+'px" strokeColor="'+n+'" ',h=s===i?' filled="false"':' fillColor="'+s+'" filled="true" ',c=o[0]===o[o.length-1]?"x ":"",u='<v:shape coordorigin="0 0" coordsize="'+this.pixelWidth+" "+this.pixelHeight+'" '+' id="jqsshape'+t+'" '+l+h+' style="position:absolute;left:0px;top:0px;height:'+this.pixelHeight+"px;width:"+this.pixelWidth+'px;padding:0px;margin:0px;" '+' path="m '+a+" l "+o.join(", ")+" "+c+'e">'+" </v:shape>",u},_drawCircle:function(t,e,n,s,r,o,a){var l,h,c;return e-=s,n-=s,l=r===i?' stroked="false" ':' strokeWeight="'+a+'px" strokeColor="'+r+'" ',h=o===i?' filled="false"':' fillColor="'+o+'" filled="true" ',c='<v:oval  id="jqsshape'+t+'" '+l+h+' style="position:absolute;top:'+n+"px; left:"+e+"px; width:"+s*2+"px; height:"+s*2+'px"></v:oval>',c},_drawPieSlice:function(t,n,s,r,o,a,l,h){var c,u,d,f,p,m,g,v;if(o===a)return"";a-o===2*e.PI&&(o=0,a=2*e.PI),u=n+e.round(e.cos(o)*r),d=s+e.round(e.sin(o)*r),f=n+e.round(e.cos(a)*r),p=s+e.round(e.sin(a)*r);if(u===f&&d===p){if(a-o<e.PI)return"";u=f=n+r,d=p=s}return u===f&&d===p&&a-o<e.PI?"":(c=[n-r,s-r,n+r,s+r,u,d,f,p],m=l===i?' stroked="false" ':' strokeWeight="1px" strokeColor="'+l+'" ',g=h===i?' filled="false"':' fillColor="'+h+'" filled="true" ',v='<v:shape coordorigin="0 0" coordsize="'+this.pixelWidth+" "+this.pixelHeight+'" '+' id="jqsshape'+t+'" '+m+g+' style="position:absolute;left:0px;top:0px;height:'+this.pixelHeight+"px;width:"+this.pixelWidth+'px;padding:0px;margin:0px;" '+' path="m '+n+","+s+" wa "+c.join(", ")+' x e">'+" </v:shape>",v)},_drawRect:function(t,e,i,n,s,r,o){return this._drawShape(t,[[e,i],[e,i+s],[e+n,i+s],[e+n,i],[e,i]],r,o)},reset:function(){this.group.innerHTML=""},appendShape:function(t){var e=this["_draw"+t.type].apply(this,t.args);return this.rendered?this.group.insertAdjacentHTML("beforeEnd",e):this.prerender+=e,this.lastShapeId=t.id,t.id},replaceWithShape:function(t,e){var i=n("#jqsshape"+t),s=this["_draw"+e.type].apply(this,e.args);i[0].outerHTML=s},replaceWithShapes:function(t,e){var i=n("#jqsshape"+t[0]),s="",r=e.length,o;for(o=0;o<r;o++)s+=this["_draw"+e[o].type].apply(this,e[o].args);i[0].outerHTML=s;for(o=1;o<t.length;o++)n("#jqsshape"+t[o]).remove()},insertAfterShape:function(t,e){var i=n("#jqsshape"+t),s=this["_draw"+e.type].apply(this,e.args);i[0].insertAdjacentHTML("afterEnd",s)},removeShapeId:function(t){var e=n("#jqsshape"+t);this.group.removeChild(e[0])},getShapeAt:function(t,e,i){var n=t.id.substr(8);return n},render:function(){this.rendered||(this.group.innerHTML=this.prerender,this.rendered=!0)}})})})(document,Math);!function(t){t(["jquery"],function(t){return function(){function e(t,e,i){return p({type:x.error,iconClass:m().iconClasses.error,message:t,optionsOverride:i,title:e})}function i(e,i){return e||(e=m()),v=t("#"+e.containerId),v.length?v:(i&&(v=u(e)),v)}function n(t,e,i){return p({type:x.info,iconClass:m().iconClasses.info,message:t,optionsOverride:i,title:e})}function s(t){y=t}function r(t,e,i){return p({type:x.success,iconClass:m().iconClasses.success,message:t,optionsOverride:i,title:e})}function o(t,e,i){return p({type:x.warning,iconClass:m().iconClasses.warning,message:t,optionsOverride:i,title:e})}function a(t){var e=m();v||i(e),c(t,e)||h(e)}function l(e){var n=m();return v||i(n),e&&0===t(":focus",e).length?void g(e):void(v.children().length&&v.remove())}function h(e){for(var i=v.children(),n=i.length-1;n>=0;n--)c(t(i[n]),e)}function c(e,i){return e&&0===t(":focus",e).length?(e[i.hideMethod]({duration:i.hideDuration,easing:i.hideEasing,complete:function(){g(e)}}),!0):!1}function u(e){return v=t("<div/>").attr("id",e.containerId).addClass(e.positionClass).attr("aria-live","polite").attr("role","alert"),v.appendTo(t(e.target)),v}function d(){return{tapToDismiss:!0,toastClass:"toast",containerId:"toast-container",debug:!1,showMethod:"fadeIn",showDuration:300,showEasing:"swing",onShown:void 0,hideMethod:"fadeOut",hideDuration:1e3,hideEasing:"swing",onHidden:void 0,extendedTimeOut:1e3,iconClasses:{error:"toast-error",info:"toast-info",success:"toast-success",warning:"toast-warning"},iconClass:"toast-info",positionClass:"toast-top-right",timeOut:5e3,titleClass:"toast-title",messageClass:"toast-message",target:"body",closeHtml:'<button type="button">&times;</button>',newestOnTop:!0,preventDuplicates:!1,progressBar:!1}}function f(t){y&&y(t)}function p(e){function n(e){return!t(":focus",c).length||e?(clearTimeout(x.intervalId),c[a.hideMethod]({duration:a.hideDuration,easing:a.hideEasing,complete:function(){g(c),a.onHidden&&"hidden"!==_.state&&a.onHidden(),_.state="hidden",_.endTime=new Date,f(_)}})):void 0}function s(){(a.timeOut>0||a.extendedTimeOut>0)&&(h=setTimeout(n,a.extendedTimeOut),x.maxHideTime=parseFloat(a.extendedTimeOut),x.hideEta=(new Date).getTime()+x.maxHideTime)}function r(){clearTimeout(h),x.hideEta=0,c.stop(!0,!0)[a.showMethod]({duration:a.showDuration,easing:a.showEasing})}function o(){var t=(x.hideEta-(new Date).getTime())/x.maxHideTime*100;p.width(t+"%")}var a=m(),l=e.iconClass||a.iconClass;if("undefined"!=typeof e.optionsOverride&&(a=t.extend(a,e.optionsOverride),l=e.optionsOverride.iconClass||l),a.preventDuplicates){if(e.message===b)return;b=e.message}w++,v=i(a,!0);var h=null,c=t("<div/>"),u=t("<div/>"),d=t("<div/>"),p=t("<div/>"),y=t(a.closeHtml),x={intervalId:null,hideEta:null,maxHideTime:null},_={toastId:w,state:"visible",startTime:new Date,options:a,map:e};return e.iconClass&&c.addClass(a.toastClass).addClass(l),e.title&&(u.append(e.title).addClass(a.titleClass),c.append(u)),e.message&&(d.append(e.message).addClass(a.messageClass),c.append(d)),a.closeButton&&(y.addClass("toast-close-button").attr("role","button"),c.prepend(y)),a.progressBar&&(p.addClass("toast-progress"),c.prepend(p)),c.hide(),a.newestOnTop?v.prepend(c):v.append(c),c[a.showMethod]({duration:a.showDuration,easing:a.showEasing,complete:a.onShown}),a.timeOut>0&&(h=setTimeout(n,a.timeOut),x.maxHideTime=parseFloat(a.timeOut),x.hideEta=(new Date).getTime()+x.maxHideTime,a.progressBar&&(x.intervalId=setInterval(o,10))),c.hover(r,s),!a.onclick&&a.tapToDismiss&&c.click(n),a.closeButton&&y&&y.click(function(t){t.stopPropagation?t.stopPropagation():void 0!==t.cancelBubble&&t.cancelBubble!==!0&&(t.cancelBubble=!0),n(!0)}),a.onclick&&c.click(function(){a.onclick(),n()}),f(_),a.debug&&console&&console.log(_),c}function m(){return t.extend({},d(),_.options)}function g(t){v||(v=i()),t.is(":visible")||(t.remove(),t=null,0===v.children().length&&(v.remove(),b=void 0))}var v,y,b,w=0,x={error:"error",info:"info",success:"success",warning:"warning"},_={clear:a,remove:l,error:e,getContainer:i,info:n,options:{},subscribe:s,success:r,version:"2.1.0",warning:o};return _}()})}("function"==typeof define&&define.amd?define:function(t,e){"undefined"!=typeof module&&module.exports?module.exports=e(require("jquery")):window.toastr=e(window.jQuery)});(function(t){function e(t,e,s){var r=t[0],o=/er/.test(s)?_indeterminate:/bl/.test(s)?f:u,a=s==_update?{checked:r[u],disabled:r[f],indeterminate:"true"==t.attr(_indeterminate)||"false"==t.attr(_determinate)}:r[o];if(/^(ch|di|in)/.test(s)&&!a)i(t,o);else if(/^(un|en|de)/.test(s)&&a)n(t,o);else if(s==_update)for(var l in a)a[l]?i(t,l,!0):n(t,l,!0);else if(!e||"toggle"==s){if(!e)t[_callback]("ifClicked");a?r[_type]!==c&&n(t,o):i(t,o)}}function i(e,i,s){var p=e[0],m=e.parent(),g=i==u,v=i==_indeterminate,y=i==f,b=v?_determinate:g?d:"enabled",w=r(e,b+o(p[_type])),x=r(e,i+o(p[_type]));if(!0!==p[i]){if(!s&&i==u&&p[_type]==c&&p.name){var _=e.closest("form"),k='input[name="'+p.name+'"]',k=_.length?_.find(k):t(k);k.each(function(){this!==p&&t(this).data(l)&&n(t(this),i)})}v?(p[i]=!0,p[u]&&n(e,u,"force")):(s||(p[i]=!0),g&&p[_indeterminate]&&n(e,_indeterminate,!1));a(e,g,i,s)}p[f]&&r(e,_cursor,!0)&&m.find("."+h).css(_cursor,"default");m[_add](x||r(e,i)||"");m.attr("role")&&!v&&m.attr("aria-"+(y?f:u),"true");m[_remove](w||r(e,b)||"")}function n(t,e,i){var n=t[0],s=t.parent(),l=e==u,c=e==_indeterminate,p=e==f,m=c?_determinate:l?d:"enabled",g=r(t,m+o(n[_type])),v=r(t,e+o(n[_type]));if(!1!==n[e]){if(c||!i||"force"==i)n[e]=!1;a(t,l,m,i)}!n[f]&&r(t,_cursor,!0)&&s.find("."+h).css(_cursor,"pointer");s[_remove](v||r(t,e)||"");s.attr("role")&&!c&&s.attr("aria-"+(p?f:u),"false");s[_add](g||r(t,m)||"")}function s(e,i){if(e.data(l)){e.parent().html(e.attr("style",e.data(l).s||""));if(i)e[_callback](i);e.off(".i").unwrap();t(_label+'[for="'+e[0].id+'"]').add(e.closest(_label)).off(".i")}}function r(t,e,i){if(t.data(l))return t.data(l).o[e+(i?"":"Class")]}function o(t){return t.charAt(0).toUpperCase()+t.slice(1)}function a(t,e,i,n){if(!n){if(e)t[_callback]("ifToggled");t[_callback]("ifChanged")[_callback]("if"+o(i))}}var l="iCheck",h=l+"-helper",c="radio",u="checked",d="un"+u,f="disabled";_determinate="determinate";_indeterminate="in"+_determinate;_update="update";_type="type";_click="click";_touch="touchbegin.i touchend.i";_add="addClass";_remove="removeClass";_callback="trigger";_label="label";_cursor="cursor";_mobile=/ipad|iphone|ipod|android|blackberry|windows phone|opera mini|silk/i.test(navigator.userAgent);t.fn[l]=function(r,o){var a='input[type="checkbox"], input[type="'+c+'"]',d=t(),p=function(e){e.each(function(){var e=t(this);d=e.is(a)?d.add(e):d.add(e.find(a))})};if(/^(check|uncheck|toggle|indeterminate|determinate|disable|enable|update|destroy)$/i.test(r))return r=r.toLowerCase(),p(this),d.each(function(){var i=t(this);"destroy"==r?s(i,"ifDestroyed"):e(i,!0,r);t.isFunction(o)&&o()});if("object"!=typeof r&&r)return this;var m=t.extend({checkedClass:u,disabledClass:f,indeterminateClass:_indeterminate,labelHover:!0},r),g=m.handle,v=m.hoverClass||"hover",y=m.focusClass||"focus",b=m.activeClass||"active",w=!!m.labelHover,x=m.labelHoverClass||"hover",_=(""+m.increaseArea).replace("%","")|0;if("checkbox"==g||g==c)a='input[type="'+g+'"]';-50>_&&(_=-50);p(this);return d.each(function(){var r=t(this);s(r);var o=this,a=o.id,d=-_+"%",p=100+2*_+"%",p={position:"absolute",top:d,left:d,display:"block",width:p,height:p,margin:0,padding:0,background:"#fff",border:0,opacity:0},d=_mobile?{position:"absolute",visibility:"hidden"}:_?p:{position:"absolute",opacity:0},g="checkbox"==o[_type]?m.checkboxClass||"icheckbox":m.radioClass||"i"+c,k=t(_label+'[for="'+a+'"]').add(r.closest(_label)),C=!!m.aria,S=l+"-"+Math.random().toString(36).substr(2,6),T='<div class="'+g+'" '+(C?'role="'+o[_type]+'" ':"");C&&k.each(function(){T+='aria-labelledby="';this.id?T+=this.id:(this.id=S,T+=S);T+='"'});T=r.wrap(T+"/>")[_callback]("ifCreated").parent().append(m.insert);p=t('<ins class="'+h+'"/>').css(p).appendTo(T);r.data(l,{o:m,s:r.attr("style")}).css(d);m.inheritClass&&T[_add](o.className||"");m.inheritID&&a&&T.attr("id",l+"-"+a);"static"==T.css("position")&&T.css("position","relative");e(r,!0,_update);if(k.length)k.on(_click+".i mouseover.i mouseout.i "+_touch,function(i){var n=i[_type],s=t(this);if(!o[f]){if(n==_click){if(t(i.target).is("a"))return;e(r,!1,!0)}else w&&(/ut|nd/.test(n)?(T[_remove](v),s[_remove](x)):(T[_add](v),s[_add](x)));if(_mobile)i.stopPropagation();else return!1}});r.on(_click+".i focus.i blur.i keyup.i keydown.i keypress.i",function(t){var e=t[_type];t=t.keyCode;if(e==_click)return!1;if("keydown"==e&&32==t)return o[_type]==c&&o[u]||(o[u]?n(r,u):i(r,u)),!1;if("keyup"==e&&o[_type]==c)!o[u]&&i(r,u);else if(/us|ur/.test(e))T["blur"==e?_remove:_add](y)});p.on(_click+" mousedown mouseup mouseover mouseout "+_touch,function(t){var i=t[_type],n=/wn|up/.test(i)?b:v;if(!o[f]){if(i==_click)e(r,!1,!0);else{if(/wn|er|in/.test(i))T[_add](n);else T[_remove](n+" "+b);if(k.length&&w&&n==v)k[/ut|nd/.test(i)?_remove:_add](x)}if(_mobile)t.stopPropagation();else return!1}})})}})(window.jQuery||window.Zepto);(function(t,e){typeof exports==="object"&&typeof module!=="undefined"?module.exports=e():typeof define==="function"&&define.amd?define(e):t.moment=e()})(this,function(){"use strict";var t;function e(){return t.apply(null,arguments)}function i(e){t=e}function n(t){return Object.prototype.toString.call(t)==="[object Array]"}function s(t){return t instanceof Date||Object.prototype.toString.call(t)==="[object Date]"}function r(t,e){var i=[],n;for(n=0;n<t.length;++n){i.push(e(t[n],n))}return i}function o(t,e){return Object.prototype.hasOwnProperty.call(t,e)}function a(t,e){for(var i in e){if(o(e,i)){t[i]=e[i]}}if(o(e,"toString")){t.toString=e.toString}if(o(e,"valueOf")){t.valueOf=e.valueOf}return t}function l(t,e,i,n){return Te(t,e,i,n,true).utc()}function h(){return{empty:false,unusedTokens:[],unusedInput:[],overflow:-2,charsLeftOver:0,nullInput:false,invalidMonth:null,invalidFormat:false,userInvalidated:false,iso:false}}function c(t){if(t._pf==null){t._pf=h()}return t._pf}function u(t){if(t._isValid==null){var e=c(t);t._isValid=!isNaN(t._d.getTime())&&e.overflow<0&&!e.empty&&!e.invalidMonth&&!e.invalidWeekday&&!e.nullInput&&!e.invalidFormat&&!e.userInvalidated;if(t._strict){t._isValid=t._isValid&&e.charsLeftOver===0&&e.unusedTokens.length===0&&e.bigHour===undefined}}return t._isValid}function d(t){var e=l(NaN);if(t!=null){a(c(e),t)}else{c(e).userInvalidated=true}return e}function f(t){return t===void 0}var p=e.momentProperties=[];function m(t,e){var i,n,s;if(!f(e._isAMomentObject)){t._isAMomentObject=e._isAMomentObject}if(!f(e._i)){t._i=e._i}if(!f(e._f)){t._f=e._f}if(!f(e._l)){t._l=e._l}if(!f(e._strict)){t._strict=e._strict}if(!f(e._tzm)){t._tzm=e._tzm}if(!f(e._isUTC)){t._isUTC=e._isUTC}if(!f(e._offset)){t._offset=e._offset}if(!f(e._pf)){t._pf=c(e)}if(!f(e._locale)){t._locale=e._locale}if(p.length>0){for(i in p){n=p[i];s=e[n];if(!f(s)){t[n]=s}}}return t}var g=false;function v(t){m(this,t);this._d=new Date(t._d!=null?t._d.getTime():NaN);if(g===false){g=true;e.updateOffset(this);g=false}}function y(t){return t instanceof v||t!=null&&t._isAMomentObject!=null}function b(t){if(t<0){return Math.ceil(t)}else{return Math.floor(t)}}function w(t){var e=+t,i=0;if(e!==0&&isFinite(e)){i=b(e)}return i}function x(t,e,i){var n=Math.min(t.length,e.length),s=Math.abs(t.length-e.length),r=0,o;for(o=0;o<n;o++){if(i&&t[o]!==e[o]||!i&&w(t[o])!==w(e[o])){r++}}return r+s}function _(){}var k={};var C;function S(t){return t?t.toLowerCase().replace("_","-"):t}function T(t){var e=0,i,n,s,r;while(e<t.length){r=S(t[e]).split("-");i=r.length;n=S(t[e+1]);n=n?n.split("-"):null;while(i>0){s=D(r.slice(0,i).join("-"));if(s){return s}if(n&&n.length>=i&&x(r,n,true)>=i-1){break}i--}e++}return null}function D(t){var e=null;if(!k[t]&&typeof module!=="undefined"&&module&&module.exports){try{e=C._abbr;require("./locale/"+t);M(e)}catch(t){}}return k[t]}function M(t,e){var i;if(t){if(f(e)){i=I(t)}else{i=P(t,e)}if(i){C=i}}return C._abbr}function P(t,e){if(e!==null){e.abbr=t;k[t]=k[t]||new _;k[t].set(e);M(t);return k[t]}else{delete k[t];return null}}function I(t){var e;if(t&&t._locale&&t._locale._abbr){t=t._locale._abbr}if(!t){return C}if(!n(t)){e=D(t);if(e){return e}t=[t]}return T(t)}var E={};function $(t,e){var i=t.toLowerCase();E[i]=E[i+"s"]=E[e]=t}function F(t){return typeof t==="string"?E[t]||E[t.toLowerCase()]:undefined}function A(t){var e={},i,n;for(n in t){if(o(t,n)){i=F(n);if(i){e[i]=t[n]}}}return e}function H(t){return t instanceof Function||Object.prototype.toString.call(t)==="[object Function]"}function L(t,i){return function(n){if(n!=null){R(this,t,n);e.updateOffset(this,i);return this}else{return O(this,t)}}}function O(t,e){return t.isValid()?t._d["get"+(t._isUTC?"UTC":"")+e]():NaN}function R(t,e,i){if(t.isValid()){t._d["set"+(t._isUTC?"UTC":"")+e](i)}}function z(t,e){var i;if(typeof t==="object"){for(i in t){this.set(i,t[i])}}else{t=F(t);if(H(this[t])){return this[t](e)}}return this}function N(t,e,i){var n=""+Math.abs(t),s=e-n.length,r=t>=0;return(r?i?"+":"":"-")+Math.pow(10,Math.max(0,s)).toString().substr(1)+n}var B=/(\[[^\[]*\])|(\\)?([Hh]mm(ss)?|Mo|MM?M?M?|Do|DDDo|DD?D?D?|ddd?d?|do?|w[o|w]?|W[o|W]?|Qo?|YYYYYY|YYYYY|YYYY|YY|gg(ggg?)?|GG(GGG?)?|e|E|a|A|hh?|HH?|mm?|ss?|S{1,9}|x|X|zz?|ZZ?|.)/g;var j=/(\[[^\[]*\])|(\\)?(LTS|LT|LL?L?L?|l{1,4})/g;var W={};var Y={};function U(t,e,i,n){var s=n;if(typeof n==="string"){s=function(){return this[n]()}}if(t){Y[t]=s}if(e){Y[e[0]]=function(){return N(s.apply(this,arguments),e[1],e[2])}}if(i){Y[i]=function(){return this.localeData().ordinal(s.apply(this,arguments),t)}}}function q(t){if(t.match(/\[[\s\S]/)){return t.replace(/^\[|\]$/g,"")}return t.replace(/\\/g,"")}function V(t){var e=t.match(B),i,n;for(i=0,n=e.length;i<n;i++){if(Y[e[i]]){e[i]=Y[e[i]]}else{e[i]=q(e[i])}}return function(s){var r="";for(i=0;i<n;i++){r+=e[i]instanceof Function?e[i].call(s,t):e[i]}return r}}function G(t,e){if(!t.isValid()){return t.localeData().invalidDate()}e=X(e,t.localeData());W[e]=W[e]||V(e);return W[e](t)}function X(t,e){var i=5;function n(t){return e.longDateFormat(t)||t}j.lastIndex=0;while(i>=0&&j.test(t)){t=t.replace(j,n);j.lastIndex=0;i-=1}return t}var K=/\d/;var Q=/\d\d/;var Z=/\d{3}/;var J=/\d{4}/;var tt=/[+-]?\d{6}/;var et=/\d\d?/;var it=/\d\d\d\d?/;var nt=/\d\d\d\d\d\d?/;var st=/\d{1,3}/;var rt=/\d{1,4}/;var ot=/[+-]?\d{1,6}/;var at=/\d+/;var lt=/[+-]?\d+/;var ht=/Z|[+-]\d\d:?\d\d/gi;var ct=/Z|[+-]\d\d(?::?\d\d)?/gi;var ut=/[+-]?\d+(\.\d{1,3})?/;var dt=/[0-9]*['a-z\u00A0-\u05FF\u0700-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF]+|[\u0600-\u06FF\/]+(\s*?[\u0600-\u06FF]+){1,2}/i;var ft={};function pt(t,e,i){ft[t]=H(e)?e:function(t,n){return t&&i?i:e}}function mt(t,e){if(!o(ft,t)){return new RegExp(gt(t))}return ft[t](e._strict,e._locale)}function gt(t){return vt(t.replace("\\","").replace(/\\(\[)|\\(\])|\[([^\]\[]*)\]|\\(.)/g,function(t,e,i,n,s){return e||i||n||s}))}function vt(t){return t.replace(/[-\/\\^$*+?.()|[\]{}]/g,"\\$&")}var yt={};function bt(t,e){var i,n=e;if(typeof t==="string"){t=[t]}if(typeof e==="number"){n=function(t,i){i[e]=w(t)}}for(i=0;i<t.length;i++){yt[t[i]]=n}}function wt(t,e){bt(t,function(t,i,n,s){n._w=n._w||{};e(t,n._w,n,s)})}function xt(t,e,i){if(e!=null&&o(yt,t)){yt[t](e,i._a,i,t)}}var _t=0;var kt=1;var Ct=2;var St=3;var Tt=4;var Dt=5;var Mt=6;var Pt=7;var It=8;function Et(t,e){return new Date(Date.UTC(t,e+1,0)).getUTCDate()}U("M",["MM",2],"Mo",function(){return this.month()+1});U("MMM",0,0,function(t){return this.localeData().monthsShort(this,t)});U("MMMM",0,0,function(t){return this.localeData().months(this,t)});$("month","M");pt("M",et);pt("MM",et,Q);pt("MMM",function(t,e){return e.monthsShortRegex(t)});pt("MMMM",function(t,e){return e.monthsRegex(t)});bt(["M","MM"],function(t,e){e[kt]=w(t)-1});bt(["MMM","MMMM"],function(t,e,i,n){var s=i._locale.monthsParse(t,n,i._strict);if(s!=null){e[kt]=s}else{c(i).invalidMonth=t}});var $t=/D[oD]?(\[[^\[\]]*\]|\s+)+MMMM?/;var Ft="January_February_March_April_May_June_July_August_September_October_November_December".split("_");function At(t,e){return n(this._months)?this._months[t.month()]:this._months[$t.test(e)?"format":"standalone"][t.month()]}var Ht="Jan_Feb_Mar_Apr_May_Jun_Jul_Aug_Sep_Oct_Nov_Dec".split("_");function Lt(t,e){return n(this._monthsShort)?this._monthsShort[t.month()]:this._monthsShort[$t.test(e)?"format":"standalone"][t.month()]}function Ot(t,e,i){var n,s,r;if(!this._monthsParse){this._monthsParse=[];this._longMonthsParse=[];this._shortMonthsParse=[]}for(n=0;n<12;n++){s=l([2e3,n]);if(i&&!this._longMonthsParse[n]){this._longMonthsParse[n]=new RegExp("^"+this.months(s,"").replace(".","")+"$","i");this._shortMonthsParse[n]=new RegExp("^"+this.monthsShort(s,"").replace(".","")+"$","i")}if(!i&&!this._monthsParse[n]){r="^"+this.months(s,"")+"|^"+this.monthsShort(s,"");this._monthsParse[n]=new RegExp(r.replace(".",""),"i")}if(i&&e==="MMMM"&&this._longMonthsParse[n].test(t)){return n}else if(i&&e==="MMM"&&this._shortMonthsParse[n].test(t)){return n}else if(!i&&this._monthsParse[n].test(t)){return n}}}function Rt(t,e){var i;if(!t.isValid()){return t}if(typeof e==="string"){e=t.localeData().monthsParse(e);if(typeof e!=="number"){return t}}i=Math.min(t.date(),Et(t.year(),e));t._d["set"+(t._isUTC?"UTC":"")+"Month"](e,i);return t}function zt(t){if(t!=null){Rt(this,t);e.updateOffset(this,true);return this}else{return O(this,"Month")}}function Nt(){return Et(this.year(),this.month())}var Bt=dt;function jt(t){if(this._monthsParseExact){if(!o(this,"_monthsRegex")){Ut.call(this)}if(t){return this._monthsShortStrictRegex}else{return this._monthsShortRegex}}else{return this._monthsShortStrictRegex&&t?this._monthsShortStrictRegex:this._monthsShortRegex}}var Wt=dt;function Yt(t){if(this._monthsParseExact){if(!o(this,"_monthsRegex")){Ut.call(this)}if(t){return this._monthsStrictRegex}else{return this._monthsRegex}}else{return this._monthsStrictRegex&&t?this._monthsStrictRegex:this._monthsRegex}}function Ut(){function t(t,e){return e.length-t.length}var e=[],i=[],n=[],s,r;for(s=0;s<12;s++){r=l([2e3,s]);e.push(this.monthsShort(r,""));i.push(this.months(r,""));n.push(this.months(r,""));n.push(this.monthsShort(r,""))}e.sort(t);i.sort(t);n.sort(t);for(s=0;s<12;s++){e[s]=vt(e[s]);i[s]=vt(i[s]);n[s]=vt(n[s])}this._monthsRegex=new RegExp("^("+n.join("|")+")","i");this._monthsShortRegex=this._monthsRegex;this._monthsStrictRegex=new RegExp("^("+i.join("|")+")$","i");this._monthsShortStrictRegex=new RegExp("^("+e.join("|")+")$","i")}function qt(t){var e;var i=t._a;if(i&&c(t).overflow===-2){e=i[kt]<0||i[kt]>11?kt:i[Ct]<1||i[Ct]>Et(i[_t],i[kt])?Ct:i[St]<0||i[St]>24||i[St]===24&&(i[Tt]!==0||i[Dt]!==0||i[Mt]!==0)?St:i[Tt]<0||i[Tt]>59?Tt:i[Dt]<0||i[Dt]>59?Dt:i[Mt]<0||i[Mt]>999?Mt:-1;if(c(t)._overflowDayOfYear&&(e<_t||e>Ct)){e=Ct}if(c(t)._overflowWeeks&&e===-1){e=Pt}if(c(t)._overflowWeekday&&e===-1){e=It}c(t).overflow=e}return t}function Vt(t){if(e.suppressDeprecationWarnings===false&&typeof console!=="undefined"&&console.warn){console.warn("Deprecation warning: "+t)}}function Gt(t,e){var i=true;return a(function(){if(i){Vt(t+"\nArguments: "+Array.prototype.slice.call(arguments).join(", ")+"\n"+(new Error).stack);i=false}return e.apply(this,arguments)},e)}var Xt={};function Kt(t,e){if(!Xt[t]){Vt(e);Xt[t]=true}}e.suppressDeprecationWarnings=false;var Qt=/^\s*((?:[+-]\d{6}|\d{4})-(?:\d\d-\d\d|W\d\d-\d|W\d\d|\d\d\d|\d\d))(?:(T| )(\d\d(?::\d\d(?::\d\d(?:[.,]\d+)?)?)?)([\+\-]\d\d(?::?\d\d)?|\s*Z)?)?/;var Zt=/^\s*((?:[+-]\d{6}|\d{4})(?:\d\d\d\d|W\d\d\d|W\d\d|\d\d\d|\d\d))(?:(T| )(\d\d(?:\d\d(?:\d\d(?:[.,]\d+)?)?)?)([\+\-]\d\d(?::?\d\d)?|\s*Z)?)?/;var Jt=/Z|[+-]\d\d(?::?\d\d)?/;var te=[["YYYYYY-MM-DD",/[+-]\d{6}-\d\d-\d\d/],["YYYY-MM-DD",/\d{4}-\d\d-\d\d/],["GGGG-[W]WW-E",/\d{4}-W\d\d-\d/],["GGGG-[W]WW",/\d{4}-W\d\d/,false],["YYYY-DDD",/\d{4}-\d{3}/],["YYYY-MM",/\d{4}-\d\d/,false],["YYYYYYMMDD",/[+-]\d{10}/],["YYYYMMDD",/\d{8}/],["GGGG[W]WWE",/\d{4}W\d{3}/],["GGGG[W]WW",/\d{4}W\d{2}/,false],["YYYYDDD",/\d{7}/]];var ee=[["HH:mm:ss.SSSS",/\d\d:\d\d:\d\d\.\d+/],["HH:mm:ss,SSSS",/\d\d:\d\d:\d\d,\d+/],["HH:mm:ss",/\d\d:\d\d:\d\d/],["HH:mm",/\d\d:\d\d/],["HHmmss.SSSS",/\d\d\d\d\d\d\.\d+/],["HHmmss,SSSS",/\d\d\d\d\d\d,\d+/],["HHmmss",/\d\d\d\d\d\d/],["HHmm",/\d\d\d\d/],["HH",/\d\d/]];var ie=/^\/?Date\((\-?\d+)/i;function ne(t){var e,i,n=t._i,s=Qt.exec(n)||Zt.exec(n),r,o,a,l;if(s){c(t).iso=true;for(e=0,i=te.length;e<i;e++){if(te[e][1].exec(s[1])){o=te[e][0];r=te[e][2]!==false;break}}if(o==null){t._isValid=false;return}if(s[3]){for(e=0,i=ee.length;e<i;e++){if(ee[e][1].exec(s[3])){a=(s[2]||" ")+ee[e][0];break}}if(a==null){t._isValid=false;return}}if(!r&&a!=null){t._isValid=false;return}if(s[4]){if(Jt.exec(s[4])){l="Z"}else{t._isValid=false;return}}t._f=o+(a||"")+(l||"");be(t)}else{t._isValid=false}}function se(t){var i=ie.exec(t._i);if(i!==null){t._d=new Date(+i[1]);return}ne(t);if(t._isValid===false){delete t._isValid;e.createFromInputFallback(t)}}e.createFromInputFallback=Gt("moment construction falls back to js Date. This is "+"discouraged and will be removed in upcoming major "+"release. Please refer to "+"https://github.com/moment/moment/issues/1407 for more info.",function(t){t._d=new Date(t._i+(t._useUTC?" UTC":""))});function re(t,e,i,n,s,r,o){var a=new Date(t,e,i,n,s,r,o);if(t<100&&t>=0&&isFinite(a.getFullYear())){a.setFullYear(t)}return a}function oe(t){var e=new Date(Date.UTC.apply(null,arguments));if(t<100&&t>=0&&isFinite(e.getUTCFullYear())){e.setUTCFullYear(t)}return e}U("Y",0,0,function(){var t=this.year();return t<=9999?""+t:"+"+t});U(0,["YY",2],0,function(){return this.year()%100});U(0,["YYYY",4],0,"year");U(0,["YYYYY",5],0,"year");U(0,["YYYYYY",6,true],0,"year");$("year","y");pt("Y",lt);pt("YY",et,Q);pt("YYYY",rt,J);pt("YYYYY",ot,tt);pt("YYYYYY",ot,tt);bt(["YYYYY","YYYYYY"],_t);bt("YYYY",function(t,i){i[_t]=t.length===2?e.parseTwoDigitYear(t):w(t)});bt("YY",function(t,i){i[_t]=e.parseTwoDigitYear(t)});bt("Y",function(t,e){e[_t]=parseInt(t,10)});function ae(t){return le(t)?366:365}function le(t){return t%4===0&&t%100!==0||t%400===0}e.parseTwoDigitYear=function(t){return w(t)+(w(t)>68?1900:2e3)};var he=L("FullYear",false);function ce(){return le(this.year())}function ue(t,e,i){var n=7+e-i,s=(7+oe(t,0,n).getUTCDay()-e)%7;return-s+n-1}function de(t,e,i,n,s){var r=(7+i-n)%7,o=ue(t,n,s),a=1+7*(e-1)+r+o,l,h;if(a<=0){l=t-1;h=ae(l)+a}else if(a>ae(t)){l=t+1;h=a-ae(t)}else{l=t;h=a}return{year:l,dayOfYear:h}}function fe(t,e,i){var n=ue(t.year(),e,i),s=Math.floor((t.dayOfYear()-n-1)/7)+1,r,o;if(s<1){o=t.year()-1;r=s+pe(o,e,i)}else if(s>pe(t.year(),e,i)){r=s-pe(t.year(),e,i);o=t.year()+1}else{o=t.year();r=s}return{week:r,year:o}}function pe(t,e,i){var n=ue(t,e,i),s=ue(t+1,e,i);return(ae(t)-n+s)/7}function me(t,e,i){if(t!=null){return t}if(e!=null){return e}return i}function ge(t){var i=new Date(e.now());if(t._useUTC){return[i.getUTCFullYear(),i.getUTCMonth(),i.getUTCDate()]}return[i.getFullYear(),i.getMonth(),i.getDate()]}function ve(t){var e,i,n=[],s,r;if(t._d){return}s=ge(t);if(t._w&&t._a[Ct]==null&&t._a[kt]==null){ye(t)}if(t._dayOfYear){r=me(t._a[_t],s[_t]);if(t._dayOfYear>ae(r)){c(t)._overflowDayOfYear=true}i=oe(r,0,t._dayOfYear);t._a[kt]=i.getUTCMonth();t._a[Ct]=i.getUTCDate()}for(e=0;e<3&&t._a[e]==null;++e){t._a[e]=n[e]=s[e]}for(;e<7;e++){t._a[e]=n[e]=t._a[e]==null?e===2?1:0:t._a[e]}if(t._a[St]===24&&t._a[Tt]===0&&t._a[Dt]===0&&t._a[Mt]===0){t._nextDay=true;t._a[St]=0}t._d=(t._useUTC?oe:re).apply(null,n);if(t._tzm!=null){t._d.setUTCMinutes(t._d.getUTCMinutes()-t._tzm)}if(t._nextDay){t._a[St]=24}}function ye(t){var e,i,n,s,r,o,a,l;e=t._w;if(e.GG!=null||e.W!=null||e.E!=null){r=1;o=4;i=me(e.GG,t._a[_t],fe(De(),1,4).year);n=me(e.W,1);s=me(e.E,1);if(s<1||s>7){l=true}}else{r=t._locale._week.dow;o=t._locale._week.doy;i=me(e.gg,t._a[_t],fe(De(),r,o).year);n=me(e.w,1);if(e.d!=null){s=e.d;if(s<0||s>6){l=true}}else if(e.e!=null){s=e.e+r;if(e.e<0||e.e>6){l=true}}else{s=r}}if(n<1||n>pe(i,r,o)){c(t)._overflowWeeks=true}else if(l!=null){c(t)._overflowWeekday=true}else{a=de(i,n,s,r,o);t._a[_t]=a.year;t._dayOfYear=a.dayOfYear}}e.ISO_8601=function(){};function be(t){if(t._f===e.ISO_8601){ne(t);return}t._a=[];c(t).empty=true;var i=""+t._i,n,s,r,o,a,l=i.length,h=0;r=X(t._f,t._locale).match(B)||[];for(n=0;n<r.length;n++){o=r[n];s=(i.match(mt(o,t))||[])[0];if(s){a=i.substr(0,i.indexOf(s));if(a.length>0){c(t).unusedInput.push(a)}i=i.slice(i.indexOf(s)+s.length);h+=s.length}if(Y[o]){if(s){c(t).empty=false}else{c(t).unusedTokens.push(o)}xt(o,s,t)}else if(t._strict&&!s){c(t).unusedTokens.push(o)}}c(t).charsLeftOver=l-h;if(i.length>0){c(t).unusedInput.push(i)}if(c(t).bigHour===true&&t._a[St]<=12&&t._a[St]>0){c(t).bigHour=undefined}t._a[St]=we(t._locale,t._a[St],t._meridiem);ve(t);qt(t)}function we(t,e,i){var n;if(i==null){return e}if(t.meridiemHour!=null){return t.meridiemHour(e,i)}else if(t.isPM!=null){n=t.isPM(i);if(n&&e<12){e+=12}if(!n&&e===12){e=0}return e}else{return e}}function xe(t){var e,i,n,s,r;if(t._f.length===0){c(t).invalidFormat=true;t._d=new Date(NaN);return}for(s=0;s<t._f.length;s++){r=0;e=m({},t);if(t._useUTC!=null){e._useUTC=t._useUTC}e._f=t._f[s];be(e);if(!u(e)){continue}r+=c(e).charsLeftOver;r+=c(e).unusedTokens.length*10;c(e).score=r;if(n==null||r<n){n=r;i=e}}a(t,i||e)}function _e(t){if(t._d){return}var e=A(t._i);t._a=r([e.year,e.month,e.day||e.date,e.hour,e.minute,e.second,e.millisecond],function(t){return t&&parseInt(t,10)});ve(t)}function ke(t){var e=new v(qt(Ce(t)));if(e._nextDay){e.add(1,"d");e._nextDay=undefined}return e}function Ce(t){var e=t._i,i=t._f;t._locale=t._locale||I(t._l);if(e===null||i===undefined&&e===""){return d({nullInput:true})}if(typeof e==="string"){t._i=e=t._locale.preparse(e)}if(y(e)){return new v(qt(e))}else if(n(i)){xe(t)}else if(i){be(t)}else if(s(e)){t._d=e}else{Se(t)}if(!u(t)){t._d=null}return t}function Se(t){var i=t._i;if(i===undefined){t._d=new Date(e.now())}else if(s(i)){t._d=new Date(+i)}else if(typeof i==="string"){se(t)}else if(n(i)){t._a=r(i.slice(0),function(t){return parseInt(t,10)});ve(t)}else if(typeof i==="object"){_e(t)}else if(typeof i==="number"){t._d=new Date(i)}else{e.createFromInputFallback(t)}}function Te(t,e,i,n,s){var r={};if(typeof i==="boolean"){n=i;i=undefined}r._isAMomentObject=true;r._useUTC=r._isUTC=s;r._l=i;r._i=t;r._f=e;r._strict=n;return ke(r)}function De(t,e,i,n){return Te(t,e,i,n,false)}var Me=Gt("moment().min is deprecated, use moment.min instead. https://github.com/moment/moment/issues/1548",function(){var t=De.apply(null,arguments);if(this.isValid()&&t.isValid()){return t<this?this:t}else{return d()}});var Pe=Gt("moment().max is deprecated, use moment.max instead. https://github.com/moment/moment/issues/1548",function(){var t=De.apply(null,arguments);if(this.isValid()&&t.isValid()){return t>this?this:t}else{return d()}});function Ie(t,e){var i,s;if(e.length===1&&n(e[0])){e=e[0]}if(!e.length){return De()}i=e[0];for(s=1;s<e.length;++s){if(!e[s].isValid()||e[s][t](i)){i=e[s]}}return i}function Ee(){var t=[].slice.call(arguments,0);return Ie("isBefore",t)}function $e(){var t=[].slice.call(arguments,0);return Ie("isAfter",t)}var Fe=function(){return Date.now?Date.now():+new Date};function Ae(t){var e=A(t),i=e.year||0,n=e.quarter||0,s=e.month||0,r=e.week||0,o=e.day||0,a=e.hour||0,l=e.minute||0,h=e.second||0,c=e.millisecond||0;this._milliseconds=+c+h*1e3+l*6e4+a*36e5;this._days=+o+r*7;this._months=+s+n*3+i*12;this._data={};this._locale=I();this._bubble()}function He(t){return t instanceof Ae}function Le(t,e){U(t,0,0,function(){var t=this.utcOffset();var i="+";if(t<0){t=-t;i="-"}return i+N(~~(t/60),2)+e+N(~~t%60,2)})}Le("Z",":");Le("ZZ","");pt("Z",ct);pt("ZZ",ct);bt(["Z","ZZ"],function(t,e,i){i._useUTC=true;i._tzm=Re(ct,t)});var Oe=/([\+\-]|\d\d)/gi;function Re(t,e){var i=(e||"").match(t)||[];var n=i[i.length-1]||[];var s=(n+"").match(Oe)||["-",0,0];var r=+(s[1]*60)+w(s[2]);return s[0]==="+"?r:-r}function ze(t,i){var n,r;if(i._isUTC){n=i.clone();r=(y(t)||s(t)?+t:+De(t))-+n;n._d.setTime(+n._d+r);e.updateOffset(n,false);return n}else{return De(t).local()}}function Ne(t){return-Math.round(t._d.getTimezoneOffset()/15)*15}e.updateOffset=function(){};function Be(t,i){var n=this._offset||0,s;if(!this.isValid()){return t!=null?this:NaN}if(t!=null){if(typeof t==="string"){t=Re(ct,t)}else if(Math.abs(t)<16){t=t*60}if(!this._isUTC&&i){s=Ne(this)}this._offset=t;this._isUTC=true;if(s!=null){this.add(s,"m")}if(n!==t){if(!i||this._changeInProgress){ri(this,ti(t-n,"m"),1,false)}else if(!this._changeInProgress){this._changeInProgress=true;e.updateOffset(this,true);this._changeInProgress=null}}return this}else{return this._isUTC?n:Ne(this)}}function je(t,e){if(t!=null){if(typeof t!=="string"){t=-t}this.utcOffset(t,e);return this}else{return-this.utcOffset()}}function We(t){return this.utcOffset(0,t)}function Ye(t){if(this._isUTC){this.utcOffset(0,t);this._isUTC=false;if(t){this.subtract(Ne(this),"m")}}return this}function Ue(){if(this._tzm){this.utcOffset(this._tzm)}else if(typeof this._i==="string"){this.utcOffset(Re(ht,this._i))}return this}function qe(t){if(!this.isValid()){return false}t=t?De(t).utcOffset():0;return(this.utcOffset()-t)%60===0}function Ve(){return this.utcOffset()>this.clone().month(0).utcOffset()||this.utcOffset()>this.clone().month(5).utcOffset()}function Ge(){if(!f(this._isDSTShifted)){return this._isDSTShifted}var t={};m(t,this);t=Ce(t);if(t._a){var e=t._isUTC?l(t._a):De(t._a);this._isDSTShifted=this.isValid()&&x(t._a,e.toArray())>0}else{this._isDSTShifted=false}return this._isDSTShifted}function Xe(){return this.isValid()?!this._isUTC:false}function Ke(){return this.isValid()?this._isUTC:false}function Qe(){return this.isValid()?this._isUTC&&this._offset===0:false}var Ze=/^(\-)?(?:(\d*)[. ])?(\d+)\:(\d+)(?:\:(\d+)\.?(\d{3})?\d*)?$/;var Je=/^(-)?P(?:(?:([0-9,.]*)Y)?(?:([0-9,.]*)M)?(?:([0-9,.]*)D)?(?:T(?:([0-9,.]*)H)?(?:([0-9,.]*)M)?(?:([0-9,.]*)S)?)?|([0-9,.]*)W)$/;function ti(t,e){var i=t,n=null,s,r,a;if(He(t)){i={ms:t._milliseconds,d:t._days,M:t._months}}else if(typeof t==="number"){i={};if(e){i[e]=t}else{i.milliseconds=t}}else if(!!(n=Ze.exec(t))){s=n[1]==="-"?-1:1;i={y:0,d:w(n[Ct])*s,h:w(n[St])*s,m:w(n[Tt])*s,s:w(n[Dt])*s,ms:w(n[Mt])*s}}else if(!!(n=Je.exec(t))){s=n[1]==="-"?-1:1;i={y:ei(n[2],s),M:ei(n[3],s),d:ei(n[4],s),h:ei(n[5],s),m:ei(n[6],s),s:ei(n[7],s),w:ei(n[8],s)}}else if(i==null){i={}}else if(typeof i==="object"&&("from"in i||"to"in i)){a=ni(De(i.from),De(i.to));i={};i.ms=a.milliseconds;i.M=a.months}r=new Ae(i);if(He(t)&&o(t,"_locale")){r._locale=t._locale}return r}ti.fn=Ae.prototype;function ei(t,e){var i=t&&parseFloat(t.replace(",","."));return(isNaN(i)?0:i)*e}function ii(t,e){var i={milliseconds:0,months:0};i.months=e.month()-t.month()+(e.year()-t.year())*12;if(t.clone().add(i.months,"M").isAfter(e)){--i.months}i.milliseconds=+e-+t.clone().add(i.months,"M");return i}function ni(t,e){var i;if(!(t.isValid()&&e.isValid())){return{milliseconds:0,months:0}}e=ze(e,t);if(t.isBefore(e)){i=ii(t,e)}else{i=ii(e,t);i.milliseconds=-i.milliseconds;i.months=-i.months}return i}function si(t,e){return function(i,n){var s,r;if(n!==null&&!isNaN(+n)){Kt(e,"moment()."+e+"(period, number) is deprecated. Please use moment()."+e+"(number, period).");r=i;i=n;n=r}i=typeof i==="string"?+i:i;s=ti(i,n);ri(this,s,t);return this}}function ri(t,i,n,s){var r=i._milliseconds,o=i._days,a=i._months;if(!t.isValid()){return}s=s==null?true:s;if(r){t._d.setTime(+t._d+r*n)}if(o){R(t,"Date",O(t,"Date")+o*n)}if(a){Rt(t,O(t,"Month")+a*n)}if(s){e.updateOffset(t,o||a)}}var oi=si(1,"add");var ai=si(-1,"subtract");function li(t,e){var i=t||De(),n=ze(i,this).startOf("day"),s=this.diff(n,"days",true),r=s<-6?"sameElse":s<-1?"lastWeek":s<0?"lastDay":s<1?"sameDay":s<2?"nextDay":s<7?"nextWeek":"sameElse";var o=e&&(H(e[r])?e[r]():e[r]);return this.format(o||this.localeData().calendar(r,this,De(i)))}function hi(){return new v(this)}function ci(t,e){var i=y(t)?t:De(t);if(!(this.isValid()&&i.isValid())){return false}e=F(!f(e)?e:"millisecond");if(e==="millisecond"){return+this>+i}else{return+i<+this.clone().startOf(e)}}function ui(t,e){var i=y(t)?t:De(t);if(!(this.isValid()&&i.isValid())){return false}e=F(!f(e)?e:"millisecond");if(e==="millisecond"){return+this<+i}else{return+this.clone().endOf(e)<+i}}function di(t,e,i){return this.isAfter(t,i)&&this.isBefore(e,i)}function fi(t,e){var i=y(t)?t:De(t),n;if(!(this.isValid()&&i.isValid())){return false}e=F(e||"millisecond");if(e==="millisecond"){return+this===+i}else{n=+i;return+this.clone().startOf(e)<=n&&n<=+this.clone().endOf(e)}}function pi(t,e){return this.isSame(t,e)||this.isAfter(t,e)}function mi(t,e){return this.isSame(t,e)||this.isBefore(t,e)}function gi(t,e,i){var n,s,r,o;if(!this.isValid()){return NaN}n=ze(t,this);if(!n.isValid()){return NaN}s=(n.utcOffset()-this.utcOffset())*6e4;e=F(e);if(e==="year"||e==="month"||e==="quarter"){o=vi(this,n);if(e==="quarter"){o=o/3}else if(e==="year"){o=o/12}}else{r=this-n;o=e==="second"?r/1e3:e==="minute"?r/6e4:e==="hour"?r/36e5:e==="day"?(r-s)/864e5:e==="week"?(r-s)/6048e5:r}return i?o:b(o)}function vi(t,e){var i=(e.year()-t.year())*12+(e.month()-t.month()),n=t.clone().add(i,"months"),s,r;if(e-n<0){s=t.clone().add(i-1,"months");r=(e-n)/(n-s)}else{s=t.clone().add(i+1,"months");r=(e-n)/(s-n)}return-(i+r)}e.defaultFormat="YYYY-MM-DDTHH:mm:ssZ";function yi(){return this.clone().locale("en").format("ddd MMM DD YYYY HH:mm:ss [GMT]ZZ")}function bi(){var t=this.clone().utc();if(0<t.year()&&t.year()<=9999){if(H(Date.prototype.toISOString)){return this.toDate().toISOString()}else{return G(t,"YYYY-MM-DD[T]HH:mm:ss.SSS[Z]")}}else{return G(t,"YYYYYY-MM-DD[T]HH:mm:ss.SSS[Z]")}}function wi(t){var i=G(this,t||e.defaultFormat);return this.localeData().postformat(i)}function xi(t,e){if(this.isValid()&&(y(t)&&t.isValid()||De(t).isValid())){return ti({to:this,from:t}).locale(this.locale()).humanize(!e)}else{return this.localeData().invalidDate()}}function _i(t){return this.from(De(),t)}function ki(t,e){if(this.isValid()&&(y(t)&&t.isValid()||De(t).isValid())){return ti({from:this,to:t}).locale(this.locale()).humanize(!e)}else{return this.localeData().invalidDate()}}function Ci(t){return this.to(De(),t)}function Si(t){var e;if(t===undefined){return this._locale._abbr}else{e=I(t);if(e!=null){this._locale=e}return this}}var Ti=Gt("moment().lang() is deprecated. Instead, use moment().localeData() to get the language configuration. Use moment().locale() to change languages.",function(t){if(t===undefined){return this.localeData()}else{return this.locale(t)}});function Di(){return this._locale}function Mi(t){t=F(t);switch(t){case"year":this.month(0);case"quarter":case"month":this.date(1);case"week":case"isoWeek":case"day":this.hours(0);case"hour":this.minutes(0);case"minute":this.seconds(0);case"second":this.milliseconds(0)}if(t==="week"){this.weekday(0)}if(t==="isoWeek"){this.isoWeekday(1)}if(t==="quarter"){this.month(Math.floor(this.month()/3)*3)}return this}function Pi(t){t=F(t);if(t===undefined||t==="millisecond"){return this}return this.startOf(t).add(1,t==="isoWeek"?"week":t).subtract(1,"ms")}function Ii(){return+this._d-(this._offset||0)*6e4}function Ei(){return Math.floor(+this/1e3)}function $i(){return this._offset?new Date(+this):this._d}function Fi(){var t=this;return[t.year(),t.month(),t.date(),t.hour(),t.minute(),t.second(),t.millisecond()]}function Ai(){var t=this;return{years:t.year(),months:t.month(),date:t.date(),hours:t.hours(),minutes:t.minutes(),seconds:t.seconds(),milliseconds:t.milliseconds()}}function Hi(){return this.isValid()?this.toISOString():"null"}function Li(){return u(this)}function Oi(){return a({},c(this))}function Ri(){return c(this).overflow}function zi(){return{input:this._i,format:this._f,locale:this._locale,isUTC:this._isUTC,strict:this._strict}}U(0,["gg",2],0,function(){return this.weekYear()%100});U(0,["GG",2],0,function(){return this.isoWeekYear()%100});function Ni(t,e){U(0,[t,t.length],0,e)}Ni("gggg","weekYear");Ni("ggggg","weekYear");Ni("GGGG","isoWeekYear");Ni("GGGGG","isoWeekYear");$("weekYear","gg");$("isoWeekYear","GG");pt("G",lt);pt("g",lt);pt("GG",et,Q);pt("gg",et,Q);pt("GGGG",rt,J);pt("gggg",rt,J);pt("GGGGG",ot,tt);pt("ggggg",ot,tt);wt(["gggg","ggggg","GGGG","GGGGG"],function(t,e,i,n){e[n.substr(0,2)]=w(t)});wt(["gg","GG"],function(t,i,n,s){i[s]=e.parseTwoDigitYear(t)});function Bi(t){return Ui.call(this,t,this.week(),this.weekday(),this.localeData()._week.dow,this.localeData()._week.doy)}function ji(t){return Ui.call(this,t,this.isoWeek(),this.isoWeekday(),1,4)}function Wi(){return pe(this.year(),1,4)}function Yi(){var t=this.localeData()._week;return pe(this.year(),t.dow,t.doy)}function Ui(t,e,i,n,s){var r;if(t==null){return fe(this,n,s).year}else{r=pe(t,n,s);if(e>r){e=r}return qi.call(this,t,e,i,n,s)}}function qi(t,e,i,n,s){var r=de(t,e,i,n,s),o=oe(r.year,0,r.dayOfYear);this.year(o.getUTCFullYear());this.month(o.getUTCMonth());this.date(o.getUTCDate());return this}U("Q",0,"Qo","quarter");$("quarter","Q");pt("Q",K);bt("Q",function(t,e){e[kt]=(w(t)-1)*3});function Vi(t){return t==null?Math.ceil((this.month()+1)/3):this.month((t-1)*3+this.month()%3)}U("w",["ww",2],"wo","week");U("W",["WW",2],"Wo","isoWeek");$("week","w");$("isoWeek","W");pt("w",et);pt("ww",et,Q);pt("W",et);pt("WW",et,Q);wt(["w","ww","W","WW"],function(t,e,i,n){e[n.substr(0,1)]=w(t)});function Gi(t){return fe(t,this._week.dow,this._week.doy).week}var Xi={dow:0,doy:6};function Ki(){return this._week.dow}function Qi(){return this._week.doy}function Zi(t){var e=this.localeData().week(this);return t==null?e:this.add((t-e)*7,"d")}function Ji(t){var e=fe(this,1,4).week;return t==null?e:this.add((t-e)*7,"d")}U("D",["DD",2],"Do","date");$("date","D");pt("D",et);pt("DD",et,Q);pt("Do",function(t,e){return t?e._ordinalParse:e._ordinalParseLenient});bt(["D","DD"],Ct);bt("Do",function(t,e){e[Ct]=w(t.match(et)[0],10)});var tn=L("Date",true);U("d",0,"do","day");U("dd",0,0,function(t){return this.localeData().weekdaysMin(this,t)});U("ddd",0,0,function(t){return this.localeData().weekdaysShort(this,t)});U("dddd",0,0,function(t){return this.localeData().weekdays(this,t)});U("e",0,0,"weekday");U("E",0,0,"isoWeekday");$("day","d");$("weekday","e");$("isoWeekday","E");pt("d",et);pt("e",et);pt("E",et);pt("dd",dt);pt("ddd",dt);pt("dddd",dt);wt(["dd","ddd","dddd"],function(t,e,i,n){var s=i._locale.weekdaysParse(t,n,i._strict);if(s!=null){e.d=s}else{c(i).invalidWeekday=t}});wt(["d","e","E"],function(t,e,i,n){e[n]=w(t)});function en(t,e){if(typeof t!=="string"){return t}if(!isNaN(t)){return parseInt(t,10)}t=e.weekdaysParse(t);if(typeof t==="number"){return t}return null}var nn="Sunday_Monday_Tuesday_Wednesday_Thursday_Friday_Saturday".split("_");function sn(t,e){return n(this._weekdays)?this._weekdays[t.day()]:this._weekdays[this._weekdays.isFormat.test(e)?"format":"standalone"][t.day()]}var rn="Sun_Mon_Tue_Wed_Thu_Fri_Sat".split("_");function on(t){return this._weekdaysShort[t.day()]}var an="Su_Mo_Tu_We_Th_Fr_Sa".split("_");function ln(t){return this._weekdaysMin[t.day()]}function hn(t,e,i){var n,s,r;if(!this._weekdaysParse){this._weekdaysParse=[];this._minWeekdaysParse=[];this._shortWeekdaysParse=[];this._fullWeekdaysParse=[]}for(n=0;n<7;n++){s=De([2e3,1]).day(n);if(i&&!this._fullWeekdaysParse[n]){this._fullWeekdaysParse[n]=new RegExp("^"+this.weekdays(s,"").replace(".",".?")+"$","i");this._shortWeekdaysParse[n]=new RegExp("^"+this.weekdaysShort(s,"").replace(".",".?")+"$","i");this._minWeekdaysParse[n]=new RegExp("^"+this.weekdaysMin(s,"").replace(".",".?")+"$","i")}if(!this._weekdaysParse[n]){r="^"+this.weekdays(s,"")+"|^"+this.weekdaysShort(s,"")+"|^"+this.weekdaysMin(s,"");this._weekdaysParse[n]=new RegExp(r.replace(".",""),"i")}if(i&&e==="dddd"&&this._fullWeekdaysParse[n].test(t)){return n}else if(i&&e==="ddd"&&this._shortWeekdaysParse[n].test(t)){return n}else if(i&&e==="dd"&&this._minWeekdaysParse[n].test(t)){return n}else if(!i&&this._weekdaysParse[n].test(t)){return n}}}function cn(t){if(!this.isValid()){return t!=null?this:NaN}var e=this._isUTC?this._d.getUTCDay():this._d.getDay();if(t!=null){t=en(t,this.localeData());return this.add(t-e,"d")}else{return e}}function un(t){if(!this.isValid()){return t!=null?this:NaN}var e=(this.day()+7-this.localeData()._week.dow)%7;return t==null?e:this.add(t-e,"d")}function dn(t){if(!this.isValid()){return t!=null?this:NaN}return t==null?this.day()||7:this.day(this.day()%7?t:t-7)}U("DDD",["DDDD",3],"DDDo","dayOfYear");$("dayOfYear","DDD");pt("DDD",st);pt("DDDD",Z);bt(["DDD","DDDD"],function(t,e,i){i._dayOfYear=w(t)});function fn(t){var e=Math.round((this.clone().startOf("day")-this.clone().startOf("year"))/864e5)+1;return t==null?e:this.add(t-e,"d")}function pn(){return this.hours()%12||12}U("H",["HH",2],0,"hour");U("h",["hh",2],0,pn);U("hmm",0,0,function(){return""+pn.apply(this)+N(this.minutes(),2)});U("hmmss",0,0,function(){return""+pn.apply(this)+N(this.minutes(),2)+N(this.seconds(),2)});U("Hmm",0,0,function(){return""+this.hours()+N(this.minutes(),2)});U("Hmmss",0,0,function(){return""+this.hours()+N(this.minutes(),2)+N(this.seconds(),2)});function mn(t,e){U(t,0,0,function(){return this.localeData().meridiem(this.hours(),this.minutes(),e)})}mn("a",true);mn("A",false);$("hour","h");function gn(t,e){return e._meridiemParse}pt("a",gn);pt("A",gn);pt("H",et);pt("h",et);pt("HH",et,Q);pt("hh",et,Q);pt("hmm",it);pt("hmmss",nt);pt("Hmm",it);pt("Hmmss",nt);bt(["H","HH"],St);bt(["a","A"],function(t,e,i){i._isPm=i._locale.isPM(t);i._meridiem=t});bt(["h","hh"],function(t,e,i){e[St]=w(t);c(i).bigHour=true});bt("hmm",function(t,e,i){var n=t.length-2;e[St]=w(t.substr(0,n));e[Tt]=w(t.substr(n));c(i).bigHour=true});bt("hmmss",function(t,e,i){var n=t.length-4;var s=t.length-2;e[St]=w(t.substr(0,n));e[Tt]=w(t.substr(n,2));e[Dt]=w(t.substr(s));c(i).bigHour=true});bt("Hmm",function(t,e,i){var n=t.length-2;e[St]=w(t.substr(0,n));e[Tt]=w(t.substr(n))});bt("Hmmss",function(t,e,i){var n=t.length-4;var s=t.length-2;e[St]=w(t.substr(0,n));e[Tt]=w(t.substr(n,2));e[Dt]=w(t.substr(s))});function vn(t){return(t+"").toLowerCase().charAt(0)==="p"}var yn=/[ap]\.?m?\.?/i;function bn(t,e,i){if(t>11){return i?"pm":"PM"}else{return i?"am":"AM"}}var wn=L("Hours",true);U("m",["mm",2],0,"minute");$("minute","m");pt("m",et);pt("mm",et,Q);bt(["m","mm"],Tt);var xn=L("Minutes",false);U("s",["ss",2],0,"second");$("second","s");pt("s",et);pt("ss",et,Q);bt(["s","ss"],Dt);var _n=L("Seconds",false);U("S",0,0,function(){return~~(this.millisecond()/100)});U(0,["SS",2],0,function(){return~~(this.millisecond()/10)});U(0,["SSS",3],0,"millisecond");U(0,["SSSS",4],0,function(){return this.millisecond()*10});U(0,["SSSSS",5],0,function(){return this.millisecond()*100});U(0,["SSSSSS",6],0,function(){return this.millisecond()*1e3});U(0,["SSSSSSS",7],0,function(){return this.millisecond()*1e4});U(0,["SSSSSSSS",8],0,function(){return this.millisecond()*1e5});U(0,["SSSSSSSSS",9],0,function(){return this.millisecond()*1e6});$("millisecond","ms");pt("S",st,K);pt("SS",st,Q);pt("SSS",st,Z);var kn;for(kn="SSSS";kn.length<=9;kn+="S"){pt(kn,at)}function Cn(t,e){e[Mt]=w(("0."+t)*1e3)}for(kn="S";kn.length<=9;kn+="S"){bt(kn,Cn)}var Sn=L("Milliseconds",false);U("z",0,0,"zoneAbbr");U("zz",0,0,"zoneName");function Tn(){return this._isUTC?"UTC":""}function Dn(){return this._isUTC?"Coordinated Universal Time":""}var Mn=v.prototype;Mn.add=oi;Mn.calendar=li;Mn.clone=hi;Mn.diff=gi;Mn.endOf=Pi;Mn.format=wi;Mn.from=xi;Mn.fromNow=_i;Mn.to=ki;Mn.toNow=Ci;Mn.get=z;Mn.invalidAt=Ri;Mn.isAfter=ci;Mn.isBefore=ui;Mn.isBetween=di;Mn.isSame=fi;Mn.isSameOrAfter=pi;Mn.isSameOrBefore=mi;Mn.isValid=Li;Mn.lang=Ti;Mn.locale=Si;Mn.localeData=Di;Mn.max=Pe;Mn.min=Me;Mn.parsingFlags=Oi;Mn.set=z;Mn.startOf=Mi;Mn.subtract=ai;Mn.toArray=Fi;Mn.toObject=Ai;Mn.toDate=$i;Mn.toISOString=bi;Mn.toJSON=Hi;Mn.toString=yi;Mn.unix=Ei;Mn.valueOf=Ii;Mn.creationData=zi;Mn.year=he;Mn.isLeapYear=ce;Mn.weekYear=Bi;Mn.isoWeekYear=ji;Mn.quarter=Mn.quarters=Vi;Mn.month=zt;Mn.daysInMonth=Nt;Mn.week=Mn.weeks=Zi;Mn.isoWeek=Mn.isoWeeks=Ji;Mn.weeksInYear=Yi;Mn.isoWeeksInYear=Wi;Mn.date=tn;Mn.day=Mn.days=cn;Mn.weekday=un;Mn.isoWeekday=dn;Mn.dayOfYear=fn;Mn.hour=Mn.hours=wn;Mn.minute=Mn.minutes=xn;Mn.second=Mn.seconds=_n;Mn.millisecond=Mn.milliseconds=Sn;Mn.utcOffset=Be;Mn.utc=We;Mn.local=Ye;Mn.parseZone=Ue;Mn.hasAlignedHourOffset=qe;Mn.isDST=Ve;Mn.isDSTShifted=Ge;Mn.isLocal=Xe;Mn.isUtcOffset=Ke;Mn.isUtc=Qe;Mn.isUTC=Qe;Mn.zoneAbbr=Tn;Mn.zoneName=Dn;Mn.dates=Gt("dates accessor is deprecated. Use date instead.",tn);Mn.months=Gt("months accessor is deprecated. Use month instead",zt);Mn.years=Gt("years accessor is deprecated. Use year instead",he);Mn.zone=Gt("moment().zone is deprecated, use moment().utcOffset instead. https://github.com/moment/moment/issues/1779",je);var Pn=Mn;function In(t){return De(t*1e3)}function En(){return De.apply(null,arguments).parseZone()}var $n={sameDay:"[Today at] LT",nextDay:"[Tomorrow at] LT",nextWeek:"dddd [at] LT",lastDay:"[Yesterday at] LT",lastWeek:"[Last] dddd [at] LT",sameElse:"L"};function Fn(t,e,i){var n=this._calendar[t];return H(n)?n.call(e,i):n}var An={LTS:"h:mm:ss A",LT:"h:mm A",L:"MM/DD/YYYY",LL:"MMMM D, YYYY",LLL:"MMMM D, YYYY h:mm A",LLLL:"dddd, MMMM D, YYYY h:mm A"};function Hn(t){var e=this._longDateFormat[t],i=this._longDateFormat[t.toUpperCase()];if(e||!i){return e}this._longDateFormat[t]=i.replace(/MMMM|MM|DD|dddd/g,function(t){return t.slice(1)});return this._longDateFormat[t]}var Ln="Invalid date";function On(){return this._invalidDate}var Rn="%d";var zn=/\d{1,2}/;function Nn(t){return this._ordinal.replace("%d",t)}function Bn(t){return t}var jn={future:"in %s",past:"%s ago",s:"a few seconds",m:"a minute",mm:"%d minutes",h:"an hour",hh:"%d hours",d:"a day",dd:"%d days",M:"a month",MM:"%d months",y:"a year",yy:"%d years"};function Wn(t,e,i,n){var s=this._relativeTime[i];return H(s)?s(t,e,i,n):s.replace(/%d/i,t)}function Yn(t,e){var i=this._relativeTime[t>0?"future":"past"];return H(i)?i(e):i.replace(/%s/i,e)}function Un(t){var e,i;for(i in t){e=t[i];if(H(e)){this[i]=e}else{this["_"+i]=e}}this._ordinalParseLenient=new RegExp(this._ordinalParse.source+"|"+/\d{1,2}/.source)}var qn=_.prototype;qn._calendar=$n;qn.calendar=Fn;qn._longDateFormat=An;qn.longDateFormat=Hn;qn._invalidDate=Ln;qn.invalidDate=On;qn._ordinal=Rn;qn.ordinal=Nn;qn._ordinalParse=zn;qn.preparse=Bn;qn.postformat=Bn;qn._relativeTime=jn;qn.relativeTime=Wn;qn.pastFuture=Yn;qn.set=Un;qn.months=At;qn._months=Ft;qn.monthsShort=Lt;qn._monthsShort=Ht;qn.monthsParse=Ot;qn._monthsRegex=Wt;qn.monthsRegex=Yt;qn._monthsShortRegex=Bt;qn.monthsShortRegex=jt;qn.week=Gi;qn._week=Xi;qn.firstDayOfYear=Qi;qn.firstDayOfWeek=Ki;qn.weekdays=sn;qn._weekdays=nn;qn.weekdaysMin=ln;qn._weekdaysMin=an;qn.weekdaysShort=on;qn._weekdaysShort=rn;qn.weekdaysParse=hn;qn.isPM=vn;qn._meridiemParse=yn;qn.meridiem=bn;function Vn(t,e,i,n){var s=I();var r=l().set(n,e);return s[i](r,t)}function Gn(t,e,i,n,s){if(typeof t==="number"){e=t;t=undefined}t=t||"";if(e!=null){return Vn(t,e,i,s)}var r;var o=[];for(r=0;r<n;r++){o[r]=Vn(t,r,i,s)}return o}function Xn(t,e){return Gn(t,e,"months",12,"month")}function Kn(t,e){return Gn(t,e,"monthsShort",12,"month")}function Qn(t,e){return Gn(t,e,"weekdays",7,"day")}function Zn(t,e){return Gn(t,e,"weekdaysShort",7,"day")}function Jn(t,e){return Gn(t,e,"weekdaysMin",7,"day")}M("en",{ordinalParse:/\d{1,2}(th|st|nd|rd)/,ordinal:function(t){var e=t%10,i=w(t%100/10)===1?"th":e===1?"st":e===2?"nd":e===3?"rd":"th";return t+i}});e.lang=Gt("moment.lang is deprecated. Use moment.locale instead.",M);e.langData=Gt("moment.langData is deprecated. Use moment.localeData instead.",I);var ts=Math.abs;function es(){var t=this._data;this._milliseconds=ts(this._milliseconds);this._days=ts(this._days);this._months=ts(this._months);t.milliseconds=ts(t.milliseconds);t.seconds=ts(t.seconds);t.minutes=ts(t.minutes);t.hours=ts(t.hours);t.months=ts(t.months);t.years=ts(t.years);return this}function is(t,e,i,n){var s=ti(e,i);t._milliseconds+=n*s._milliseconds;t._days+=n*s._days;t._months+=n*s._months;return t._bubble()}function ns(t,e){return is(this,t,e,1)}function ss(t,e){return is(this,t,e,-1)}function rs(t){if(t<0){return Math.floor(t)}else{return Math.ceil(t)}}function os(){var t=this._milliseconds;var e=this._days;var i=this._months;var n=this._data;var s,r,o,a,l;if(!(t>=0&&e>=0&&i>=0||t<=0&&e<=0&&i<=0)){t+=rs(ls(i)+e)*864e5;e=0;i=0}n.milliseconds=t%1e3;s=b(t/1e3);n.seconds=s%60;r=b(s/60);n.minutes=r%60;o=b(r/60);n.hours=o%24;e+=b(o/24);l=b(as(e));i+=l;e-=rs(ls(l));a=b(i/12);i%=12;n.days=e;n.months=i;n.years=a;return this}function as(t){return t*4800/146097}function ls(t){return t*146097/4800}function hs(t){var e;var i;var n=this._milliseconds;t=F(t);if(t==="month"||t==="year"){e=this._days+n/864e5;i=this._months+as(e);return t==="month"?i:i/12}else{e=this._days+Math.round(ls(this._months));switch(t){case"week":return e/7+n/6048e5;case"day":return e+n/864e5;case"hour":return e*24+n/36e5;case"minute":return e*1440+n/6e4;case"second":return e*86400+n/1e3;case"millisecond":return Math.floor(e*864e5)+n;default:throw new Error("Unknown unit "+t)}}}function cs(){return this._milliseconds+this._days*864e5+this._months%12*2592e6+w(this._months/12)*31536e6}function us(t){return function(){return this.as(t)}}var ds=us("ms");var fs=us("s");var ps=us("m");var ms=us("h");var gs=us("d");var vs=us("w");var ys=us("M");var bs=us("y");function ws(t){t=F(t);return this[t+"s"]()}function xs(t){return function(){return this._data[t]}}var _s=xs("milliseconds");var ks=xs("seconds");var Cs=xs("minutes");var Ss=xs("hours");var Ts=xs("days");var Ds=xs("months");var Ms=xs("years");function Ps(){return b(this.days()/7)}var Is=Math.round;var Es={s:45,m:45,h:22,d:26,M:11};function $s(t,e,i,n,s){return s.relativeTime(e||1,!!i,t,n)}function Fs(t,e,i){var n=ti(t).abs();var s=Is(n.as("s"));var r=Is(n.as("m"));var o=Is(n.as("h"));var a=Is(n.as("d"));var l=Is(n.as("M"));var h=Is(n.as("y"));var c=s<Es.s&&["s",s]||r<=1&&["m"]||r<Es.m&&["mm",r]||o<=1&&["h"]||o<Es.h&&["hh",o]||a<=1&&["d"]||a<Es.d&&["dd",a]||l<=1&&["M"]||l<Es.M&&["MM",l]||h<=1&&["y"]||["yy",h];c[2]=e;c[3]=+t>0;c[4]=i;return $s.apply(null,c)}function As(t,e){if(Es[t]===undefined){return false}if(e===undefined){return Es[t]}Es[t]=e;return true}function Hs(t){var e=this.localeData();var i=Fs(this,!t,e);if(t){i=e.pastFuture(+this,i)}return e.postformat(i)}var Ls=Math.abs;function Os(){var t=Ls(this._milliseconds)/1e3;var e=Ls(this._days);var i=Ls(this._months);var n,s,r;n=b(t/60);s=b(n/60);t%=60;n%=60;r=b(i/12);i%=12;var o=r;var a=i;var l=e;var h=s;var c=n;var u=t;var d=this.asSeconds();if(!d){return"P0D"}return(d<0?"-":"")+"P"+(o?o+"Y":"")+(a?a+"M":"")+(l?l+"D":"")+(h||c||u?"T":"")+(h?h+"H":"")+(c?c+"M":"")+(u?u+"S":"")}var Rs=Ae.prototype;Rs.abs=es;Rs.add=ns;Rs.subtract=ss;Rs.as=hs;Rs.asMilliseconds=ds;Rs.asSeconds=fs;Rs.asMinutes=ps;Rs.asHours=ms;Rs.asDays=gs;Rs.asWeeks=vs;Rs.asMonths=ys;Rs.asYears=bs;Rs.valueOf=cs;Rs._bubble=os;Rs.get=ws;Rs.milliseconds=_s;Rs.seconds=ks;Rs.minutes=Cs;Rs.hours=Ss;Rs.days=Ts;Rs.weeks=Ps;Rs.months=Ds;Rs.years=Ms;Rs.humanize=Hs;Rs.toISOString=Os;Rs.toString=Os;Rs.toJSON=Os;Rs.locale=Si;Rs.localeData=Di;Rs.toIsoString=Gt("toIsoString() is deprecated. Please use toISOString() instead (notice the capitals)",Os);Rs.lang=Ti;U("X",0,0,"unix");U("x",0,0,"valueOf");pt("x",lt);pt("X",ut);bt("X",function(t,e,i){i._d=new Date(parseFloat(t,10)*1e3)});bt("x",function(t,e,i){i._d=new Date(w(t))});e.version="2.11.2";i(De);e.fn=Pn;e.min=Ee;e.max=$e;e.now=Fe;e.utc=l;e.unix=In;e.months=Xn;e.isDate=s;e.locale=M;e.invalid=d;e.duration=ti;e.isMoment=y;e.weekdays=Qn;e.parseZone=En;e.localeData=I;e.isDuration=He;e.monthsShort=Kn;e.weekdaysMin=Jn;e.defineLocale=P;e.weekdaysShort=Zn;e.normalizeUnits=F;e.relativeTimeThreshold=As;e.prototype=Pn;var zs=e;return zs});(function(t,e){typeof exports==="object"&&typeof module!=="undefined"&&typeof require==="function"?e(require("../moment")):typeof define==="function"&&define.amd?define(["moment"],e):e(t.moment)})(this,function(t){"use strict";function e(t,e){var i=t.split("_");return e%10===1&&e%100!==11?i[0]:e%10>=2&&e%10<=4&&(e%100<10||e%100>=20)?i[1]:i[2]}function i(t,i,n){var s={mm:i?"__":"__",hh:"__",dd:"__",MM:"__",yy:"__"};if(n==="m"){return i?"":""}else{return t+" "+e(s[n],+t)}}var n=[/^/i,/^/i,/^/i,/^/i,/^[|]/i,/^/i,/^/i,/^/i,/^/i,/^/i,/^/i,/^/i];var s=t.defineLocale("ru",{months:{format:"___________".split("_"),standalone:"___________".split("_")},monthsShort:{format:"___________".split("_"),standalone:"___________".split("_")},weekdays:{standalone:"______".split("_"),format:"______".split("_"),isFormat:/\[ ?[] ?(?:||)? ?\] ?dddd/},weekdaysShort:"______".split("_"),weekdaysMin:"______".split("_"),monthsParse:n,longMonthsParse:n,shortMonthsParse:n,longDateFormat:{LT:"HH:mm",LTS:"HH:mm:ss",L:"DD.MM.YYYY",LL:"D MMMM YYYY .",LLL:"D MMMM YYYY ., HH:mm",LLLL:"dddd, D MMMM YYYY ., HH:mm"},calendar:{sameDay:"[ ] LT",nextDay:"[ ] LT",lastDay:"[ ] LT",nextWeek:function(t){if(t.week()!==this.week()){switch(this.day()){case 0:return"[ ] dddd [] LT";case 1:case 2:case 4:return"[ ] dddd [] LT";case 3:case 5:case 6:return"[ ] dddd [] LT"}}else{if(this.day()===2){return"[] dddd [] LT"}else{return"[] dddd [] LT"}}},lastWeek:function(t){if(t.week()!==this.week()){switch(this.day()){case 0:return"[ ] dddd [] LT";case 1:case 2:case 4:return"[ ] dddd [] LT";case 3:case 5:case 6:return"[ ] dddd [] LT"}}else{if(this.day()===2){return"[] dddd [] LT"}else{return"[] dddd [] LT"}}},sameElse:"L"},relativeTime:{future:" %s",past:"%s ",s:" ",m:i,mm:i,h:"",hh:i,d:"",dd:i,M:"",MM:i,y:"",yy:i},meridiemParse:/|||/i,isPM:function(t){return/^(|)$/.test(t)},meridiem:function(t,e,i){if(t<4){return""}else if(t<12){return""}else if(t<17){return""}else{return""}},ordinalParse:/\d{1,2}-(||)/,ordinal:function(t,e){switch(e){case"M":case"d":case"DDD":return t+"-";case"D":return t+"-";case"w":case"W":return t+"-";default:return t}},week:{dow:1,doy:7}});return s});(function(t){"use strict";if(typeof define==="function"&&define.amd){define(["jquery","moment"],t)}else if(typeof exports==="object"){module.exports=t(require("jquery"),require("moment"))}else{if(typeof jQuery==="undefined"){throw"bootstrap-datetimepicker requires jQuery to be loaded first"}if(typeof moment==="undefined"){throw"bootstrap-datetimepicker requires Moment.js to be loaded first"}t(jQuery,moment)}})(function(t,e){"use strict";if(!e){throw new Error("bootstrap-datetimepicker requires Moment.js to be loaded first")}var i=function(i,n){var s={},r,o,a=true,l,h=false,c=false,u,d=0,f,p,m,g=[{clsName:"days",navFnc:"M",navStep:1},{clsName:"months",navFnc:"y",navStep:1},{clsName:"years",navFnc:"y",navStep:10},{clsName:"decades",navFnc:"y",navStep:100}],v=["days","months","years","decades"],y=["top","bottom","auto"],b=["left","right","auto"],w=["default","top","bottom"],x={up:38,38:"up",down:40,40:"down",left:37,37:"left",right:39,39:"right",tab:9,9:"tab",escape:27,27:"escape",enter:13,13:"enter",pageUp:33,33:"pageUp",pageDown:34,34:"pageDown",shift:16,16:"shift",control:17,17:"control",space:32,32:"space",t:84,84:"t",delete:46,46:"delete"},_={},k=function(){return e.tz!==undefined&&n.timeZone!==undefined&&n.timeZone!==null&&n.timeZone!==""},C=function(t){var i;if(t===undefined||t===null){i=e()}else if(e.isDate(t)||e.isMoment(t)){i=e(t)}else if(k()){i=e.tz(t,p,n.useStrict,n.timeZone)}else{i=e(t,p,n.useStrict)}if(k()){i.tz(n.timeZone)}return i},S=function(t){if(typeof t!=="string"||t.length>1){throw new TypeError("isEnabled expects a single character string parameter")}switch(t){case"y":return f.indexOf("Y")!==-1;case"M":return f.indexOf("M")!==-1;case"d":return f.toLowerCase().indexOf("d")!==-1;case"h":case"H":return f.toLowerCase().indexOf("h")!==-1;case"m":return f.indexOf("m")!==-1;case"s":return f.indexOf("s")!==-1;default:return false}},T=function(){return S("h")||S("m")||S("s")},D=function(){return S("y")||S("M")||S("d")},M=function(){var e=t("<thead>").append(t("<tr>").append(t("<th>").addClass("prev").attr("data-action","previous").append(t("<span>").addClass(n.icons.previous))).append(t("<th>").addClass("picker-switch").attr("data-action","pickerSwitch").attr("colspan",n.calendarWeeks?"6":"5")).append(t("<th>").addClass("next").attr("data-action","next").append(t("<span>").addClass(n.icons.next)))),i=t("<tbody>").append(t("<tr>").append(t("<td>").attr("colspan",n.calendarWeeks?"8":"7")));return[t("<div>").addClass("datepicker-days").append(t("<table>").addClass("table-condensed").append(e).append(t("<tbody>"))),t("<div>").addClass("datepicker-months").append(t("<table>").addClass("table-condensed").append(e.clone()).append(i.clone())),t("<div>").addClass("datepicker-years").append(t("<table>").addClass("table-condensed").append(e.clone()).append(i.clone())),t("<div>").addClass("datepicker-decades").append(t("<table>").addClass("table-condensed").append(e.clone()).append(i.clone()))]},P=function(){var e=t("<tr>"),i=t("<tr>"),s=t("<tr>");if(S("h")){e.append(t("<td>").append(t("<a>").attr({href:"#",tabindex:"-1",title:n.tooltips.incrementHour}).addClass("btn").attr("data-action","incrementHours").append(t("<span>").addClass(n.icons.up))));i.append(t("<td>").append(t("<span>").addClass("timepicker-hour").attr({"data-time-component":"hours",title:n.tooltips.pickHour}).attr("data-action","showHours")));s.append(t("<td>").append(t("<a>").attr({href:"#",tabindex:"-1",title:n.tooltips.decrementHour}).addClass("btn").attr("data-action","decrementHours").append(t("<span>").addClass(n.icons.down))))}if(S("m")){if(S("h")){e.append(t("<td>").addClass("separator"));i.append(t("<td>").addClass("separator").html(":"));s.append(t("<td>").addClass("separator"))}e.append(t("<td>").append(t("<a>").attr({href:"#",tabindex:"-1",title:n.tooltips.incrementMinute}).addClass("btn").attr("data-action","incrementMinutes").append(t("<span>").addClass(n.icons.up))));i.append(t("<td>").append(t("<span>").addClass("timepicker-minute").attr({"data-time-component":"minutes",title:n.tooltips.pickMinute}).attr("data-action","showMinutes")));s.append(t("<td>").append(t("<a>").attr({href:"#",tabindex:"-1",title:n.tooltips.decrementMinute}).addClass("btn").attr("data-action","decrementMinutes").append(t("<span>").addClass(n.icons.down))))}if(S("s")){if(S("m")){e.append(t("<td>").addClass("separator"));i.append(t("<td>").addClass("separator").html(":"));s.append(t("<td>").addClass("separator"))}e.append(t("<td>").append(t("<a>").attr({href:"#",tabindex:"-1",title:n.tooltips.incrementSecond}).addClass("btn").attr("data-action","incrementSeconds").append(t("<span>").addClass(n.icons.up))));i.append(t("<td>").append(t("<span>").addClass("timepicker-second").attr({"data-time-component":"seconds",title:n.tooltips.pickSecond}).attr("data-action","showSeconds")));s.append(t("<td>").append(t("<a>").attr({href:"#",tabindex:"-1",title:n.tooltips.decrementSecond}).addClass("btn").attr("data-action","decrementSeconds").append(t("<span>").addClass(n.icons.down))))}if(!u){e.append(t("<td>").addClass("separator"));i.append(t("<td>").append(t("<button>").addClass("btn btn-primary").attr({"data-action":"togglePeriod",tabindex:"-1",title:n.tooltips.togglePeriod})));s.append(t("<td>").addClass("separator"))}return t("<div>").addClass("timepicker-picker").append(t("<table>").addClass("table-condensed").append([e,i,s]))},I=function(){var e=t("<div>").addClass("timepicker-hours").append(t("<table>").addClass("table-condensed")),i=t("<div>").addClass("timepicker-minutes").append(t("<table>").addClass("table-condensed")),n=t("<div>").addClass("timepicker-seconds").append(t("<table>").addClass("table-condensed")),s=[P()];if(S("h")){s.push(e)}if(S("m")){s.push(i)}if(S("s")){s.push(n)}return s},E=function(){var e=[];if(n.showTodayButton){e.push(t("<td>").append(t("<a>").attr({"data-action":"today",title:n.tooltips.today}).append(t("<span>").addClass(n.icons.today))))}if(!n.sideBySide&&D()&&T()){e.push(t("<td>").append(t("<a>").attr({"data-action":"togglePicker",title:n.tooltips.selectTime}).append(t("<span>").addClass(n.icons.time))))}if(n.showClear){e.push(t("<td>").append(t("<a>").attr({"data-action":"clear",title:n.tooltips.clear}).append(t("<span>").addClass(n.icons.clear))))}if(n.showClose){e.push(t("<td>").append(t("<a>").attr({"data-action":"close",title:n.tooltips.close}).append(t("<span>").addClass(n.icons.close))))}return t("<table>").addClass("table-condensed").append(t("<tbody>").append(t("<tr>").append(e)))},$=function(){var e=t("<div>").addClass("bootstrap-datetimepicker-widget dropdown-menu"),i=t("<div>").addClass("datepicker").append(M()),s=t("<div>").addClass("timepicker").append(I()),r=t("<ul>").addClass("list-unstyled"),o=t("<li>").addClass("picker-switch"+(n.collapse?" accordion-toggle":"")).append(E());if(n.inline){e.removeClass("dropdown-menu")}if(u){e.addClass("usetwentyfour")}if(S("s")&&!u){e.addClass("wider")}if(n.sideBySide&&D()&&T()){e.addClass("timepicker-sbs");if(n.toolbarPlacement==="top"){e.append(o)}e.append(t("<div>").addClass("row").append(i.addClass("col-md-6")).append(s.addClass("col-md-6")));if(n.toolbarPlacement==="bottom"){e.append(o)}return e}if(n.toolbarPlacement==="top"){r.append(o)}if(D()){r.append(t("<li>").addClass(n.collapse&&T()?"collapse in":"").append(i))}if(n.toolbarPlacement==="default"){r.append(o)}if(T()){r.append(t("<li>").addClass(n.collapse&&D()?"collapse":"").append(s))}if(n.toolbarPlacement==="bottom"){r.append(o)}return e.append(r)},F=function(){var e,s={};if(i.is("input")||n.inline){e=i.data()}else{e=i.find("input").data()}if(e.dateOptions&&e.dateOptions instanceof Object){s=t.extend(true,s,e.dateOptions)}t.each(n,function(t){var i="date"+t.charAt(0).toUpperCase()+t.slice(1);if(e[i]!==undefined){s[t]=e[i]}});return s},A=function(){var e=(h||i).position(),s=(h||i).offset(),r=n.widgetPositioning.vertical,o=n.widgetPositioning.horizontal,a;if(n.widgetParent){a=n.widgetParent.append(c)}else if(i.is("input")){a=i.after(c).parent()}else if(n.inline){a=i.append(c);return}else{a=i;i.children().first().after(c)}if(r==="auto"){if(s.top+c.height()*1.5>=t(window).height()+t(window).scrollTop()&&c.height()+i.outerHeight()<s.top){r="top"}else{r="bottom"}}if(o==="auto"){if(a.width()<s.left+c.outerWidth()/2&&s.left+c.outerWidth()>t(window).width()){o="right"}else{o="left"}}if(r==="top"){c.addClass("top").removeClass("bottom")}else{c.addClass("bottom").removeClass("top")}if(o==="right"){c.addClass("pull-right")}else{c.removeClass("pull-right")}if(a.css("position")==="static"){a=a.parents().filter(function(){return t(this).css("position")!=="static"}).first()}if(a.length===0){throw new Error("datetimepicker component should be placed within a non-static positioned container")}c.css({top:r==="top"?"auto":e.top+i.outerHeight(),bottom:r==="top"?a.outerHeight()-(a===i?0:e.top):"auto",left:o==="left"?a===i?0:e.left:"auto",right:o==="left"?"auto":a.outerWidth()-i.outerWidth()-(a===i?0:e.left)})},H=function(t){if(t.type==="dp.change"&&(t.date&&t.date.isSame(t.oldDate)||!t.date&&!t.oldDate)){return}i.trigger(t)},L=function(t){if(t==="y"){t="YYYY"}H({type:"dp.update",change:t,viewDate:o.clone()})},O=function(t){if(!c){return}if(t){m=Math.max(d,Math.min(3,m+t))}c.find(".datepicker > div").hide().filter(".datepicker-"+g[m].clsName).show()},R=function(){var e=t("<tr>"),i=o.clone().startOf("w").startOf("d");if(n.calendarWeeks===true){e.append(t("<th>").addClass("cw").text("#"))}while(i.isBefore(o.clone().endOf("w"))){e.append(t("<th>").addClass("dow").text(i.format("dd")));i.add(1,"d")}c.find(".datepicker-days thead").append(e)},z=function(t){return n.disabledDates[t.format("YYYY-MM-DD")]===true},N=function(t){return n.enabledDates[t.format("YYYY-MM-DD")]===true},B=function(t){return n.disabledHours[t.format("H")]===true},j=function(t){return n.enabledHours[t.format("H")]===true},W=function(e,i){if(!e.isValid()){return false}if(n.disabledDates&&i==="d"&&z(e)){return false}if(n.enabledDates&&i==="d"&&!N(e)){return false}if(n.minDate&&e.isBefore(n.minDate,i)){return false}if(n.maxDate&&e.isAfter(n.maxDate,i)){return false}if(n.daysOfWeekDisabled&&i==="d"&&n.daysOfWeekDisabled.indexOf(e.day())!==-1){return false}if(n.disabledHours&&(i==="h"||i==="m"||i==="s")&&B(e)){return false}if(n.enabledHours&&(i==="h"||i==="m"||i==="s")&&!j(e)){return false}if(n.disabledTimeIntervals&&(i==="h"||i==="m"||i==="s")){var s=false;t.each(n.disabledTimeIntervals,function(){if(e.isBetween(this[0],this[1])){s=true;return false}});if(s){return false}}return true},Y=function(){var e=[],i=o.clone().startOf("y").startOf("d");while(i.isSame(o,"y")){e.push(t("<span>").attr("data-action","selectMonth").addClass("month").text(i.format("MMM")));i.add(1,"M")}c.find(".datepicker-months td").empty().append(e)},U=function(){var e=c.find(".datepicker-months"),i=e.find("th"),s=e.find("tbody").find("span");i.eq(0).find("span").attr("title",n.tooltips.prevYear);i.eq(1).attr("title",n.tooltips.selectYear);i.eq(2).find("span").attr("title",n.tooltips.nextYear);e.find(".disabled").removeClass("disabled");if(!W(o.clone().subtract(1,"y"),"y")){i.eq(0).addClass("disabled")}i.eq(1).text(o.year());if(!W(o.clone().add(1,"y"),"y")){i.eq(2).addClass("disabled")}s.removeClass("active");if(r.isSame(o,"y")&&!a){s.eq(r.month()).addClass("active")}s.each(function(e){if(!W(o.clone().month(e),"M")){t(this).addClass("disabled")}})},q=function(){var t=c.find(".datepicker-years"),e=t.find("th"),i=o.clone().subtract(5,"y"),s=o.clone().add(6,"y"),l="";e.eq(0).find("span").attr("title",n.tooltips.prevDecade);e.eq(1).attr("title",n.tooltips.selectDecade);e.eq(2).find("span").attr("title",n.tooltips.nextDecade);t.find(".disabled").removeClass("disabled");if(n.minDate&&n.minDate.isAfter(i,"y")){e.eq(0).addClass("disabled")}e.eq(1).text(i.year()+"-"+s.year());if(n.maxDate&&n.maxDate.isBefore(s,"y")){e.eq(2).addClass("disabled")}while(!i.isAfter(s,"y")){l+='<span data-action="selectYear" class="year'+(i.isSame(r,"y")&&!a?" active":"")+(!W(i,"y")?" disabled":"")+'">'+i.year()+"</span>";i.add(1,"y")}t.find("td").html(l)},V=function(){var t=c.find(".datepicker-decades"),i=t.find("th"),s=e({y:o.year()-o.year()%100-1}),a=s.clone().add(100,"y"),l=s.clone(),h=false,u=false,d,f="";i.eq(0).find("span").attr("title",n.tooltips.prevCentury);i.eq(2).find("span").attr("title",n.tooltips.nextCentury);t.find(".disabled").removeClass("disabled");if(s.isSame(e({y:1900}))||n.minDate&&n.minDate.isAfter(s,"y")){i.eq(0).addClass("disabled")}i.eq(1).text(s.year()+"-"+a.year());if(s.isSame(e({y:2e3}))||n.maxDate&&n.maxDate.isBefore(a,"y")){i.eq(2).addClass("disabled")}while(!s.isAfter(a,"y")){d=s.year()+12;h=n.minDate&&n.minDate.isAfter(s,"y")&&n.minDate.year()<=d;u=n.maxDate&&n.maxDate.isAfter(s,"y")&&n.maxDate.year()<=d;f+='<span data-action="selectDecade" class="decade'+(r.isAfter(s)&&r.year()<=d?" active":"")+(!W(s,"y")&&!h&&!u?" disabled":"")+'" data-selection="'+(s.year()+6)+'">'+(s.year()+1)+" - "+(s.year()+12)+"</span>";s.add(12,"y")}f+="<span></span><span></span><span></span>";t.find("td").html(f);i.eq(1).text(l.year()+1+"-"+s.year())},G=function(){var e=c.find(".datepicker-days"),i=e.find("th"),s,l=[],h,u=[],d;if(!D()){return}i.eq(0).find("span").attr("title",n.tooltips.prevMonth);i.eq(1).attr("title",n.tooltips.selectMonth);i.eq(2).find("span").attr("title",n.tooltips.nextMonth);e.find(".disabled").removeClass("disabled");i.eq(1).text(o.format(n.dayViewHeaderFormat));if(!W(o.clone().subtract(1,"M"),"M")){i.eq(0).addClass("disabled")}if(!W(o.clone().add(1,"M"),"M")){i.eq(2).addClass("disabled")}s=o.clone().startOf("M").startOf("w").startOf("d");for(d=0;d<42;d++){if(s.weekday()===0){h=t("<tr>");if(n.calendarWeeks){h.append('<td class="cw">'+s.week()+"</td>")}l.push(h)}u=["day"];if(s.isBefore(o,"M")){u.push("old")}if(s.isAfter(o,"M")){u.push("new")}if(s.isSame(r,"d")&&!a){u.push("active")}if(!W(s,"d")){u.push("disabled")}if(s.isSame(C(),"d")){u.push("today")}if(s.day()===0||s.day()===6){u.push("weekend")}H({type:"dp.classify",date:s,classNames:u});h.append('<td data-action="selectDay" data-day="'+s.format("L")+'" class="'+u.join(" ")+'">'+s.date()+"</td>");s.add(1,"d")}e.find("tbody").empty().append(l);U();q();V()},X=function(){var e=c.find(".timepicker-hours table"),i=o.clone().startOf("d"),n=[],s=t("<tr>");if(o.hour()>11&&!u){i.hour(12)}while(i.isSame(o,"d")&&(u||o.hour()<12&&i.hour()<12||o.hour()>11)){if(i.hour()%4===0){s=t("<tr>");n.push(s)}s.append('<td data-action="selectHour" class="hour'+(!W(i,"h")?" disabled":"")+'">'+i.format(u?"HH":"hh")+"</td>");i.add(1,"h")}e.empty().append(n)},K=function(){var e=c.find(".timepicker-minutes table"),i=o.clone().startOf("h"),s=[],r=t("<tr>"),a=n.stepping===1?5:n.stepping;while(o.isSame(i,"h")){if(i.minute()%(a*4)===0){r=t("<tr>");s.push(r)}r.append('<td data-action="selectMinute" class="minute'+(!W(i,"m")?" disabled":"")+'">'+i.format("mm")+"</td>");i.add(a,"m")}e.empty().append(s)},Q=function(){var e=c.find(".timepicker-seconds table"),i=o.clone().startOf("m"),n=[],s=t("<tr>");while(o.isSame(i,"m")){if(i.second()%20===0){s=t("<tr>");n.push(s)}s.append('<td data-action="selectSecond" class="second'+(!W(i,"s")?" disabled":"")+'">'+i.format("ss")+"</td>");i.add(5,"s")}e.empty().append(n)},Z=function(){var t,e,i=c.find(".timepicker span[data-time-component]");if(!u){t=c.find(".timepicker [data-action=togglePeriod]");e=r.clone().add(r.hours()>=12?-12:12,"h");t.text(r.format("A"));if(W(e,"h")){t.removeClass("disabled")}else{t.addClass("disabled")}}i.filter("[data-time-component=hours]").text(r.format(u?"HH":"hh"));i.filter("[data-time-component=minutes]").text(r.format("mm"));i.filter("[data-time-component=seconds]").text(r.format("ss"));X();K();Q()},J=function(){if(!c){return}G();Z()},tt=function(t){var e=a?null:r;if(!t){a=true;l.val("");i.data("date","");H({type:"dp.change",date:false,oldDate:e});J();return}t=t.clone().locale(n.locale);if(k()){t.tz(n.timeZone)}if(n.stepping!==1){t.minutes(Math.round(t.minutes()/n.stepping)*n.stepping).seconds(0);while(n.minDate&&t.isBefore(n.minDate)){t.add(n.stepping,"minutes")}}if(W(t)){r=t;o=r.clone();l.val(r.format(f));i.data("date",r.format(f));a=false;J();H({type:"dp.change",date:r.clone(),oldDate:e})}else{if(!n.keepInvalid){l.val(a?"":r.format(f))}else{H({type:"dp.change",date:t,oldDate:e})}H({type:"dp.error",date:t,oldDate:e})}},et=function(){var e=false;if(!c){return s}c.find(".collapse").each(function(){var i=t(this).data("collapse");if(i&&i.transitioning){e=true;return false}return true});if(e){return s}if(h&&h.hasClass("btn")){h.toggleClass("active")}c.hide();t(window).off("resize",A);c.off("click","[data-action]");c.off("mousedown",false);c.remove();c=false;H({type:"dp.hide",date:r.clone()});l.blur();o=r.clone();return s},it=function(){tt(null)},nt=function(t){if(n.parseInputDate===undefined){if(!e.isMoment(t)||t instanceof Date){t=C(t)}}else{t=n.parseInputDate(t)}return t},st={next:function(){var t=g[m].navFnc;o.add(g[m].navStep,t);G();L(t)},previous:function(){var t=g[m].navFnc;o.subtract(g[m].navStep,t);G();L(t)},pickerSwitch:function(){O(1)},selectMonth:function(e){var i=t(e.target).closest("tbody").find("span").index(t(e.target));o.month(i);if(m===d){tt(r.clone().year(o.year()).month(o.month()));if(!n.inline){et()}}else{O(-1);G()}L("M")},selectYear:function(e){var i=parseInt(t(e.target).text(),10)||0;o.year(i);if(m===d){tt(r.clone().year(o.year()));if(!n.inline){et()}}else{O(-1);G()}L("YYYY")},selectDecade:function(e){var i=parseInt(t(e.target).data("selection"),10)||0;o.year(i);if(m===d){tt(r.clone().year(o.year()));if(!n.inline){et()}}else{O(-1);G()}L("YYYY")},selectDay:function(e){var i=o.clone();if(t(e.target).is(".old")){i.subtract(1,"M")}if(t(e.target).is(".new")){i.add(1,"M")}tt(i.date(parseInt(t(e.target).text(),10)));if(!T()&&!n.keepOpen&&!n.inline){et()}},incrementHours:function(){var t=r.clone().add(1,"h");if(W(t,"h")){tt(t)}},incrementMinutes:function(){var t=r.clone().add(n.stepping,"m");if(W(t,"m")){tt(t)}},incrementSeconds:function(){var t=r.clone().add(1,"s");if(W(t,"s")){tt(t)}},decrementHours:function(){var t=r.clone().subtract(1,"h");if(W(t,"h")){tt(t)}},decrementMinutes:function(){var t=r.clone().subtract(n.stepping,"m");if(W(t,"m")){tt(t)}},decrementSeconds:function(){var t=r.clone().subtract(1,"s");if(W(t,"s")){tt(t)}},togglePeriod:function(){tt(r.clone().add(r.hours()>=12?-12:12,"h"))},togglePicker:function(e){var i=t(e.target),s=i.closest("ul"),r=s.find(".in"),o=s.find(".collapse:not(.in)"),a;if(r&&r.length){a=r.data("collapse");if(a&&a.transitioning){return}if(r.collapse){r.collapse("hide");o.collapse("show")}else{r.removeClass("in");o.addClass("in")}if(i.is("span")){i.toggleClass(n.icons.time+" "+n.icons.date)}else{i.find("span").toggleClass(n.icons.time+" "+n.icons.date)}}},showPicker:function(){c.find(".timepicker > div:not(.timepicker-picker)").hide();c.find(".timepicker .timepicker-picker").show()},showHours:function(){c.find(".timepicker .timepicker-picker").hide();c.find(".timepicker .timepicker-hours").show()},showMinutes:function(){c.find(".timepicker .timepicker-picker").hide();c.find(".timepicker .timepicker-minutes").show()},showSeconds:function(){c.find(".timepicker .timepicker-picker").hide();c.find(".timepicker .timepicker-seconds").show()},selectHour:function(e){var i=parseInt(t(e.target).text(),10);if(!u){if(r.hours()>=12){if(i!==12){i+=12}}else{if(i===12){i=0}}}tt(r.clone().hours(i));st.showPicker.call(s)},selectMinute:function(e){tt(r.clone().minutes(parseInt(t(e.target).text(),10)));st.showPicker.call(s)},selectSecond:function(e){tt(r.clone().seconds(parseInt(t(e.target).text(),10)));st.showPicker.call(s)},clear:it,today:function(){var t=C();if(W(t,"d")){tt(t)}},close:et},rt=function(e){if(t(e.currentTarget).is(".disabled")){return false}st[t(e.currentTarget).data("action")].apply(s,arguments);return false},ot=function(){var e,i={year:function(t){return t.month(0).date(1).hours(0).seconds(0).minutes(0)},month:function(t){return t.date(1).hours(0).seconds(0).minutes(0)},day:function(t){return t.hours(0).seconds(0).minutes(0)},hour:function(t){return t.seconds(0).minutes(0)},minute:function(t){return t.seconds(0)}};if(l.prop("disabled")||!n.ignoreReadonly&&l.prop("readonly")||c){return s}if(l.val()!==undefined&&l.val().trim().length!==0){tt(nt(l.val().trim()))}else if(a&&n.useCurrent&&(n.inline||l.is("input")&&l.val().trim().length===0)){e=C();if(typeof n.useCurrent==="string"){e=i[n.useCurrent](e)}tt(e)}c=$();R();Y();c.find(".timepicker-hours").hide();c.find(".timepicker-minutes").hide();c.find(".timepicker-seconds").hide();J();O();t(window).on("resize",A);c.on("click","[data-action]",rt);c.on("mousedown",false);if(h&&h.hasClass("btn")){h.toggleClass("active")}A();c.show();if(n.focusOnShow&&!l.is(":focus")){l.focus()}H({type:"dp.show"});return s},at=function(){return c?et():ot()},lt=function(t){var e=null,i,r,o=[],a={},l=t.which,h,u,d="p";_[l]=d;for(i in _){if(_.hasOwnProperty(i)&&_[i]===d){o.push(i);if(parseInt(i,10)!==l){a[i]=true}}}for(i in n.keyBinds){if(n.keyBinds.hasOwnProperty(i)&&typeof n.keyBinds[i]==="function"){h=i.split(" ");if(h.length===o.length&&x[l]===h[h.length-1]){u=true;for(r=h.length-2;r>=0;r--){if(!(x[h[r]]in a)){u=false;break}}if(u){e=n.keyBinds[i];break}}}}if(e){e.call(s,c);t.stopPropagation();t.preventDefault()}},ht=function(t){_[t.which]="r";t.stopPropagation();t.preventDefault()},ct=function(e){var i=t(e.target).val().trim(),n=i?nt(i):null;tt(n);e.stopImmediatePropagation();return false},ut=function(){l.on({change:ct,blur:n.debug?"":et,keydown:lt,keyup:ht,focus:n.allowInputToggle?ot:""});if(i.is("input")){l.on({focus:ot})}else if(h){h.on("click",at);h.on("mousedown",false)}},dt=function(){l.off({change:ct,blur:blur,keydown:lt,keyup:ht,focus:n.allowInputToggle?et:""});if(i.is("input")){l.off({focus:ot})}else if(h){h.off("click",at);h.off("mousedown",false)}},ft=function(e){var i={};t.each(e,function(){var t=nt(this);if(t.isValid()){i[t.format("YYYY-MM-DD")]=true}});return Object.keys(i).length?i:false},pt=function(e){var i={};t.each(e,function(){i[this]=true});return Object.keys(i).length?i:false},mt=function(){var t=n.format||"L LT";f=t.replace(/(\[[^\[]*\])|(\\)?(LTS|LT|LL?L?L?|l{1,4})/g,function(t){var e=r.localeData().longDateFormat(t)||t;return e.replace(/(\[[^\[]*\])|(\\)?(LTS|LT|LL?L?L?|l{1,4})/g,function(t){return r.localeData().longDateFormat(t)||t})});p=n.extraFormats?n.extraFormats.slice():[];if(p.indexOf(t)<0&&p.indexOf(f)<0){p.push(f)}u=f.toLowerCase().indexOf("a")<1&&f.replace(/\[.*?\]/g,"").indexOf("h")<1;if(S("y")){d=2}if(S("M")){d=1}if(S("d")){d=0}m=Math.max(d,m);if(!a){tt(r)}};s.destroy=function(){et();dt();i.removeData("DateTimePicker");i.removeData("date")};s.toggle=at;s.show=ot;s.hide=et;s.disable=function(){et();if(h&&h.hasClass("btn")){h.addClass("disabled")}l.prop("disabled",true);return s};s.enable=function(){if(h&&h.hasClass("btn")){h.removeClass("disabled")}l.prop("disabled",false);return s};s.ignoreReadonly=function(t){if(arguments.length===0){return n.ignoreReadonly}if(typeof t!=="boolean"){throw new TypeError("ignoreReadonly () expects a boolean parameter")}n.ignoreReadonly=t;return s};s.options=function(e){if(arguments.length===0){return t.extend(true,{},n)}if(!(e instanceof Object)){throw new TypeError("options() options parameter should be an object")}t.extend(true,n,e);t.each(n,function(t,e){if(s[t]!==undefined){s[t](e)}else{throw new TypeError("option "+t+" is not recognized!")}});return s};s.date=function(t){if(arguments.length===0){if(a){return null}return r.clone()}if(t!==null&&typeof t!=="string"&&!e.isMoment(t)&&!(t instanceof Date)){throw new TypeError("date() parameter must be one of [null, string, moment or Date]")}tt(t===null?null:nt(t));return s};s.format=function(t){if(arguments.length===0){return n.format}if(typeof t!=="string"&&(typeof t!=="boolean"||t!==false)){throw new TypeError("format() expects a string or boolean:false parameter "+t)}n.format=t;if(f){mt()}return s};s.timeZone=function(t){if(arguments.length===0){return n.timeZone}if(typeof t!=="string"){throw new TypeError("newZone() expects a string parameter")}n.timeZone=t;return s};s.dayViewHeaderFormat=function(t){if(arguments.length===0){return n.dayViewHeaderFormat}if(typeof t!=="string"){throw new TypeError("dayViewHeaderFormat() expects a string parameter")}n.dayViewHeaderFormat=t;return s};s.extraFormats=function(t){if(arguments.length===0){return n.extraFormats}if(t!==false&&!(t instanceof Array)){throw new TypeError("extraFormats() expects an array or false parameter")}n.extraFormats=t;if(p){mt()}return s};s.disabledDates=function(e){if(arguments.length===0){return n.disabledDates?t.extend({},n.disabledDates):n.disabledDates}if(!e){n.disabledDates=false;J();return s}if(!(e instanceof Array)){throw new TypeError("disabledDates() expects an array parameter")}n.disabledDates=ft(e);n.enabledDates=false;J();return s};s.enabledDates=function(e){if(arguments.length===0){return n.enabledDates?t.extend({},n.enabledDates):n.enabledDates}if(!e){n.enabledDates=false;J();return s}if(!(e instanceof Array)){throw new TypeError("enabledDates() expects an array parameter")}n.enabledDates=ft(e);n.disabledDates=false;J();return s};s.daysOfWeekDisabled=function(t){if(arguments.length===0){return n.daysOfWeekDisabled.splice(0)}if(typeof t==="boolean"&&!t){n.daysOfWeekDisabled=false;J();return s}if(!(t instanceof Array)){throw new TypeError("daysOfWeekDisabled() expects an array parameter")}n.daysOfWeekDisabled=t.reduce(function(t,e){e=parseInt(e,10);if(e>6||e<0||isNaN(e)){return t}if(t.indexOf(e)===-1){t.push(e)}return t},[]).sort();if(n.useCurrent&&!n.keepInvalid){var e=0;while(!W(r,"d")){r.add(1,"d");if(e===31){throw"Tried 31 times to find a valid date"}e++}tt(r)}J();return s};s.maxDate=function(t){if(arguments.length===0){return n.maxDate?n.maxDate.clone():n.maxDate}if(typeof t==="boolean"&&t===false){n.maxDate=false;J();return s}if(typeof t==="string"){if(t==="now"||t==="moment"){t=C()}}var e=nt(t);if(!e.isValid()){throw new TypeError("maxDate() Could not parse date parameter: "+t)}if(n.minDate&&e.isBefore(n.minDate)){throw new TypeError("maxDate() date parameter is before options.minDate: "+e.format(f))}n.maxDate=e;if(n.useCurrent&&!n.keepInvalid&&r.isAfter(t)){tt(n.maxDate)}if(o.isAfter(e)){o=e.clone().subtract(n.stepping,"m")}J();return s};s.minDate=function(t){if(arguments.length===0){return n.minDate?n.minDate.clone():n.minDate}if(typeof t==="boolean"&&t===false){n.minDate=false;J();return s}if(typeof t==="string"){if(t==="now"||t==="moment"){t=C()}}var e=nt(t);if(!e.isValid()){throw new TypeError("minDate() Could not parse date parameter: "+t)}if(n.maxDate&&e.isAfter(n.maxDate)){throw new TypeError("minDate() date parameter is after options.maxDate: "+e.format(f))}n.minDate=e;if(n.useCurrent&&!n.keepInvalid&&r.isBefore(t)){tt(n.minDate)}if(o.isBefore(e)){o=e.clone().add(n.stepping,"m")}J();return s};s.defaultDate=function(t){if(arguments.length===0){return n.defaultDate?n.defaultDate.clone():n.defaultDate}if(!t){n.defaultDate=false;return s}if(typeof t==="string"){if(t==="now"||t==="moment"){t=C()}else{t=C(t)}}var e=nt(t);if(!e.isValid()){throw new TypeError("defaultDate() Could not parse date parameter: "+t)}if(!W(e)){throw new TypeError("defaultDate() date passed is invalid according to component setup validations")}n.defaultDate=e;if(n.defaultDate&&n.inline||l.val().trim()===""){tt(n.defaultDate)}return s};s.locale=function(t){if(arguments.length===0){return n.locale}if(!e.localeData(t)){throw new TypeError("locale() locale "+t+" is not loaded from moment locales!")}n.locale=t;r.locale(n.locale);o.locale(n.locale);if(f){mt()}if(c){et();ot()}return s};s.stepping=function(t){if(arguments.length===0){return n.stepping}t=parseInt(t,10);if(isNaN(t)||t<1){t=1}n.stepping=t;return s};s.useCurrent=function(t){var e=["year","month","day","hour","minute"];if(arguments.length===0){return n.useCurrent}if(typeof t!=="boolean"&&typeof t!=="string"){throw new TypeError("useCurrent() expects a boolean or string parameter")}if(typeof t==="string"&&e.indexOf(t.toLowerCase())===-1){throw new TypeError("useCurrent() expects a string parameter of "+e.join(", "))}n.useCurrent=t;return s};s.collapse=function(t){if(arguments.length===0){return n.collapse}if(typeof t!=="boolean"){throw new TypeError("collapse() expects a boolean parameter")}if(n.collapse===t){return s}n.collapse=t;if(c){et();ot()}return s};s.icons=function(e){if(arguments.length===0){return t.extend({},n.icons)}if(!(e instanceof Object)){throw new TypeError("icons() expects parameter to be an Object")}t.extend(n.icons,e);if(c){et();ot()}return s};s.tooltips=function(e){if(arguments.length===0){return t.extend({},n.tooltips)}if(!(e instanceof Object)){throw new TypeError("tooltips() expects parameter to be an Object")}t.extend(n.tooltips,e);if(c){et();ot()}return s};s.useStrict=function(t){if(arguments.length===0){return n.useStrict}if(typeof t!=="boolean"){throw new TypeError("useStrict() expects a boolean parameter")}n.useStrict=t;return s};s.sideBySide=function(t){if(arguments.length===0){return n.sideBySide}if(typeof t!=="boolean"){throw new TypeError("sideBySide() expects a boolean parameter")}n.sideBySide=t;if(c){et();ot()}return s};s.viewMode=function(t){if(arguments.length===0){return n.viewMode}if(typeof t!=="string"){throw new TypeError("viewMode() expects a string parameter")}if(v.indexOf(t)===-1){throw new TypeError("viewMode() parameter must be one of ("+v.join(", ")+") value")}n.viewMode=t;m=Math.max(v.indexOf(t),d);O();return s};s.toolbarPlacement=function(t){if(arguments.length===0){return n.toolbarPlacement}if(typeof t!=="string"){throw new TypeError("toolbarPlacement() expects a string parameter")}if(w.indexOf(t)===-1){throw new TypeError("toolbarPlacement() parameter must be one of ("+w.join(", ")+") value")}n.toolbarPlacement=t;if(c){et();ot()}return s};s.widgetPositioning=function(e){if(arguments.length===0){return t.extend({},n.widgetPositioning)}if({}.toString.call(e)!=="[object Object]"){throw new TypeError("widgetPositioning() expects an object variable")}if(e.horizontal){if(typeof e.horizontal!=="string"){throw new TypeError("widgetPositioning() horizontal variable must be a string")}e.horizontal=e.horizontal.toLowerCase();if(b.indexOf(e.horizontal)===-1){throw new TypeError("widgetPositioning() expects horizontal parameter to be one of ("+b.join(", ")+")")}n.widgetPositioning.horizontal=e.horizontal}if(e.vertical){if(typeof e.vertical!=="string"){throw new TypeError("widgetPositioning() vertical variable must be a string")}e.vertical=e.vertical.toLowerCase();if(y.indexOf(e.vertical)===-1){throw new TypeError("widgetPositioning() expects vertical parameter to be one of ("+y.join(", ")+")")}n.widgetPositioning.vertical=e.vertical}J();return s};s.calendarWeeks=function(t){if(arguments.length===0){return n.calendarWeeks}if(typeof t!=="boolean"){throw new TypeError("calendarWeeks() expects parameter to be a boolean value")}n.calendarWeeks=t;J();return s};s.showTodayButton=function(t){if(arguments.length===0){return n.showTodayButton}if(typeof t!=="boolean"){throw new TypeError("showTodayButton() expects a boolean parameter")}n.showTodayButton=t;if(c){et();ot()}return s};s.showClear=function(t){if(arguments.length===0){return n.showClear}if(typeof t!=="boolean"){throw new TypeError("showClear() expects a boolean parameter")}n.showClear=t;if(c){et();ot()}return s};s.widgetParent=function(e){if(arguments.length===0){return n.widgetParent}if(typeof e==="string"){e=t(e)}if(e!==null&&(typeof e!=="string"&&!(e instanceof t))){throw new TypeError("widgetParent() expects a string or a jQuery object parameter")}n.widgetParent=e;if(c){et();ot()}return s};s.keepOpen=function(t){if(arguments.length===0){return n.keepOpen}if(typeof t!=="boolean"){throw new TypeError("keepOpen() expects a boolean parameter")}n.keepOpen=t;return s};s.focusOnShow=function(t){if(arguments.length===0){return n.focusOnShow}if(typeof t!=="boolean"){throw new TypeError("focusOnShow() expects a boolean parameter")}n.focusOnShow=t;return s};s.inline=function(t){if(arguments.length===0){return n.inline}if(typeof t!=="boolean"){throw new TypeError("inline() expects a boolean parameter")}n.inline=t;return s};s.clear=function(){it();return s};s.keyBinds=function(t){if(arguments.length===0){return n.keyBinds}n.keyBinds=t;return s};s.getMoment=function(t){return C(t)};s.debug=function(t){if(typeof t!=="boolean"){throw new TypeError("debug() expects a boolean parameter")}n.debug=t;return s};s.allowInputToggle=function(t){if(arguments.length===0){return n.allowInputToggle}if(typeof t!=="boolean"){throw new TypeError("allowInputToggle() expects a boolean parameter")}n.allowInputToggle=t;return s};s.showClose=function(t){if(arguments.length===0){return n.showClose}if(typeof t!=="boolean"){throw new TypeError("showClose() expects a boolean parameter")}n.showClose=t;return s};s.keepInvalid=function(t){if(arguments.length===0){return n.keepInvalid}if(typeof t!=="boolean"){throw new TypeError("keepInvalid() expects a boolean parameter")}n.keepInvalid=t;return s};s.datepickerInput=function(t){if(arguments.length===0){return n.datepickerInput}if(typeof t!=="string"){throw new TypeError("datepickerInput() expects a string parameter")}n.datepickerInput=t;return s};s.parseInputDate=function(t){if(arguments.length===0){return n.parseInputDate}if(typeof t!=="function"){throw new TypeError("parseInputDate() sholud be as function")}n.parseInputDate=t;return s};s.disabledTimeIntervals=function(e){if(arguments.length===0){return n.disabledTimeIntervals?t.extend({},n.disabledTimeIntervals):n.disabledTimeIntervals}if(!e){n.disabledTimeIntervals=false;J();return s}if(!(e instanceof Array)){throw new TypeError("disabledTimeIntervals() expects an array parameter")}n.disabledTimeIntervals=e;J();return s};s.disabledHours=function(e){if(arguments.length===0){return n.disabledHours?t.extend({},n.disabledHours):n.disabledHours}if(!e){n.disabledHours=false;J();return s}if(!(e instanceof Array)){throw new TypeError("disabledHours() expects an array parameter")}n.disabledHours=pt(e);n.enabledHours=false;if(n.useCurrent&&!n.keepInvalid){var i=0;while(!W(r,"h")){r.add(1,"h");if(i===24){throw"Tried 24 times to find a valid date"}i++}tt(r)}J();return s};s.enabledHours=function(e){if(arguments.length===0){return n.enabledHours?t.extend({},n.enabledHours):n.enabledHours}if(!e){n.enabledHours=false;J();return s}if(!(e instanceof Array)){throw new TypeError("enabledHours() expects an array parameter")}n.enabledHours=pt(e);n.disabledHours=false;if(n.useCurrent&&!n.keepInvalid){var i=0;while(!W(r,"h")){r.add(1,"h");if(i===24){throw"Tried 24 times to find a valid date"}i++}tt(r)}J();return s};s.viewDate=function(t){if(arguments.length===0){return o.clone()}if(!t){o=r.clone();return s}if(typeof t!=="string"&&!e.isMoment(t)&&!(t instanceof Date)){throw new TypeError("viewDate() parameter must be one of [string, moment or Date]")}o=nt(t);L();return s};if(i.is("input")){l=i}else{l=i.find(n.datepickerInput);if(l.length===0){l=i.find("input")}else if(!l.is("input")){throw new Error('CSS class "'+n.datepickerInput+'" cannot be applied to non input element')}}if(i.hasClass("input-group")){if(i.find(".datepickerbutton").length===0){h=i.find(".input-group-addon")}else{h=i.find(".datepickerbutton")}}if(!n.inline&&!l.is("input")){throw new Error("Could not initialize DateTimePicker without an input element")}r=C();o=r.clone();t.extend(true,n,F());s.options(n);mt();ut();if(l.prop("disabled")){s.disable()}if(l.is("input")&&l.val().trim().length!==0){tt(nt(l.val().trim()))}else if(n.defaultDate&&l.attr("placeholder")===undefined){tt(n.defaultDate)}if(n.inline){ot()}return s};t.fn.datetimepicker=function(e){e=e||{};var n=Array.prototype.slice.call(arguments,1),s=true,r=["destroy","hide","show","toggle"],o;if(typeof e==="object"){return this.each(function(){var n=t(this),s;if(!n.data("DateTimePicker")){s=t.extend(true,{},t.fn.datetimepicker.defaults,e);n.data("DateTimePicker",i(n,s))}})}else if(typeof e==="string"){this.each(function(){var i=t(this),r=i.data("DateTimePicker");if(!r){throw new Error('bootstrap-datetimepicker("'+e+'") method was called on an element that is not using DateTimePicker')}o=r[e].apply(r,n);s=o===r});if(s||t.inArray(e,r)>-1){return this}return o}throw new TypeError("Invalid arguments for DateTimePicker: "+e)};t.fn.datetimepicker.defaults={timeZone:"",format:false,dayViewHeaderFormat:"MMMM YYYY",extraFormats:false,stepping:1,minDate:false,maxDate:false,useCurrent:true,collapse:true,locale:e.locale(),defaultDate:false,disabledDates:false,enabledDates:false,icons:{time:"glyphicon glyphicon-time",date:"glyphicon glyphicon-calendar",up:"glyphicon glyphicon-chevron-up",down:"glyphicon glyphicon-chevron-down",previous:"glyphicon glyphicon-chevron-left",next:"glyphicon glyphicon-chevron-right",today:"glyphicon glyphicon-screenshot",clear:"glyphicon glyphicon-trash",close:"glyphicon glyphicon-remove"},tooltips:{today:"Go to today",clear:"Clear selection",close:"Close the picker",selectMonth:"Select Month",prevMonth:"Previous Month",nextMonth:"Next Month",selectYear:"Select Year",prevYear:"Previous Year",nextYear:"Next Year",selectDecade:"Select Decade",prevDecade:"Previous Decade",nextDecade:"Next Decade",prevCentury:"Previous Century",nextCentury:"Next Century",pickHour:"Pick Hour",incrementHour:"Increment Hour",decrementHour:"Decrement Hour",pickMinute:"Pick Minute",incrementMinute:"Increment Minute",decrementMinute:"Decrement Minute",pickSecond:"Pick Second",incrementSecond:"Increment Second",decrementSecond:"Decrement Second",togglePeriod:"Toggle Period",selectTime:"Select Time"},useStrict:false,sideBySide:false,daysOfWeekDisabled:false,calendarWeeks:false,viewMode:"days",toolbarPlacement:"default",showTodayButton:false,showClear:false,showClose:false,widgetPositioning:{horizontal:"auto",vertical:"auto"},widgetParent:null,ignoreReadonly:false,keepOpen:false,focusOnShow:true,inline:false,keepInvalid:false,datepickerInput:".datepickerinput",keyBinds:{up:function(t){if(!t){return}var e=this.date()||this.getMoment();if(t.find(".datepicker").is(":visible")){this.date(e.clone().subtract(7,"d"))}else{this.date(e.clone().add(this.stepping(),"m"))}},down:function(t){if(!t){this.show();return}var e=this.date()||this.getMoment();if(t.find(".datepicker").is(":visible")){this.date(e.clone().add(7,"d"))}else{this.date(e.clone().subtract(this.stepping(),"m"))}},"control up":function(t){if(!t){return}var e=this.date()||this.getMoment();if(t.find(".datepicker").is(":visible")){this.date(e.clone().subtract(1,"y"))}else{this.date(e.clone().add(1,"h"))}},"control down":function(t){if(!t){return}var e=this.date()||this.getMoment();if(t.find(".datepicker").is(":visible")){this.date(e.clone().add(1,"y"))}else{this.date(e.clone().subtract(1,"h"))}},left:function(t){if(!t){return}var e=this.date()||this.getMoment();if(t.find(".datepicker").is(":visible")){this.date(e.clone().subtract(1,"d"))}},right:function(t){if(!t){return}var e=this.date()||this.getMoment();if(t.find(".datepicker").is(":visible")){this.date(e.clone().add(1,"d"))}},pageUp:function(t){if(!t){return}var e=this.date()||this.getMoment();if(t.find(".datepicker").is(":visible")){this.date(e.clone().subtract(1,"M"))}},pageDown:function(t){if(!t){return}var e=this.date()||this.getMoment();if(t.find(".datepicker").is(":visible")){this.date(e.clone().add(1,"M"))}},enter:function(){this.hide()},escape:function(){this.hide()},"control space":function(t){if(!t){return}if(t.find(".timepicker").is(":visible")){t.find('.btn[data-action="togglePeriod"]').click()}},t:function(){this.date(this.getMoment())},delete:function(){this.clear()}},debug:false,allowInputToggle:false,disabledTimeIntervals:false,disabledHours:false,enabledHours:false,viewDate:false};return t.fn.datetimepicker});if("undefined"==typeof jQuery)throw new Error("Jasny Bootstrap's JavaScript requires jQuery");+function(t){"use strict";function e(){var t=document.createElement("bootstrap"),e={WebkitTransition:"webkitTransitionEnd",MozTransition:"transitionend",OTransition:"oTransitionEnd otransitionend",transition:"transitionend"};for(var i in e)if(void 0!==t.style[i])return{end:e[i]};return!1}void 0===t.support.transition&&(t.fn.emulateTransitionEnd=function(e){var i=!1,n=this;t(this).one(t.support.transition.end,function(){i=!0});var s=function(){i||t(n).trigger(t.support.transition.end)};return setTimeout(s,e),this},t(function(){t.support.transition=e()}))}(window.jQuery),+function(t){"use strict";var e=function(i,n){this.$element=t(i),this.options=t.extend({},e.DEFAULTS,n),this.state=null,this.placement=null,this.options.recalc&&(this.calcClone(),t(window).on("resize",t.proxy(this.recalc,this))),this.options.autohide&&t(document).on("click",t.proxy(this.autohide,this)),this.options.toggle&&this.toggle(),this.options.disablescrolling&&(this.options.disableScrolling=this.options.disablescrolling,delete this.options.disablescrolling)};e.DEFAULTS={toggle:!0,placement:"auto",autohide:!0,recalc:!0,disableScrolling:!0},e.prototype.offset=function(){switch(this.placement){case"left":case"right":return this.$element.outerWidth();case"top":case"bottom":return this.$element.outerHeight()}},e.prototype.calcPlacement=function(){function e(t,e){if("auto"===s.css(e))return t;if("auto"===s.css(t))return e;var i=parseInt(s.css(t),10),n=parseInt(s.css(e),10);return i>n?e:t}if("auto"!==this.options.placement)return void(this.placement=this.options.placement);this.$element.hasClass("in")||this.$element.css("visiblity","hidden !important").addClass("in");var i=t(window).width()/this.$element.width(),n=t(window).height()/this.$element.height(),s=this.$element;this.placement=i>=n?e("left","right"):e("top","bottom"),"hidden !important"===this.$element.css("visibility")&&this.$element.removeClass("in").css("visiblity","")},e.prototype.opposite=function(t){switch(t){case"top":return"bottom";case"left":return"right";case"bottom":return"top";case"right":return"left"}},e.prototype.getCanvasElements=function(){var e=this.options.canvas?t(this.options.canvas):this.$element,i=e.find("*").filter(function(){return"fixed"===t(this).css("position")}).not(this.options.exclude);return e.add(i)},e.prototype.slide=function(e,i,n){if(!t.support.transition){var s={};return s[this.placement]="+="+i,e.animate(s,350,n)}var r=this.placement,o=this.opposite(r);e.each(function(){"auto"!==t(this).css(r)&&t(this).css(r,(parseInt(t(this).css(r),10)||0)+i),"auto"!==t(this).css(o)&&t(this).css(o,(parseInt(t(this).css(o),10)||0)-i)}),this.$element.one(t.support.transition.end,n).emulateTransitionEnd(350)},e.prototype.disableScrolling=function(){var e=t("body").width(),i="padding-"+this.opposite(this.placement);if(void 0===t("body").data("offcanvas-style")&&t("body").data("offcanvas-style",t("body").attr("style")),t("body").css("overflow","hidden"),t("body").width()>e){var n=parseInt(t("body").css(i),10)+t("body").width()-e;setTimeout(function(){t("body").css(i,n)},1)}},e.prototype.show=function(){if(!this.state){var e=t.Event("show.bs.offcanvas");if(this.$element.trigger(e),!e.isDefaultPrevented()){this.state="slide-in",this.calcPlacement();var i=this.getCanvasElements(),n=this.placement,s=this.opposite(n),r=this.offset();-1!==i.index(this.$element)&&(t(this.$element).data("offcanvas-style",t(this.$element).attr("style")||""),this.$element.css(n,-1*r),this.$element.css(n)),i.addClass("canvas-sliding").each(function(){void 0===t(this).data("offcanvas-style")&&t(this).data("offcanvas-style",t(this).attr("style")||""),"static"===t(this).css("position")&&t(this).css("position","relative"),"auto"!==t(this).css(n)&&"0px"!==t(this).css(n)||"auto"!==t(this).css(s)&&"0px"!==t(this).css(s)||t(this).css(n,0)}),this.options.disableScrolling&&this.disableScrolling();var o=function(){"slide-in"==this.state&&(this.state="slid",i.removeClass("canvas-sliding").addClass("canvas-slid"),this.$element.trigger("shown.bs.offcanvas"))};setTimeout(t.proxy(function(){this.$element.addClass("in"),this.slide(i,r,t.proxy(o,this))},this),1)}}},e.prototype.hide=function(){if("slid"===this.state){var e=t.Event("hide.bs.offcanvas");if(this.$element.trigger(e),!e.isDefaultPrevented()){this.state="slide-out";var i=t(".canvas-slid"),n=(this.placement,-1*this.offset()),s=function(){"slide-out"==this.state&&(this.state=null,this.placement=null,this.$element.removeClass("in"),i.removeClass("canvas-sliding"),i.add(this.$element).add("body").each(function(){t(this).attr("style",t(this).data("offcanvas-style")).removeData("offcanvas-style")}),this.$element.trigger("hidden.bs.offcanvas"))};i.removeClass("canvas-slid").addClass("canvas-sliding"),setTimeout(t.proxy(function(){this.slide(i,n,t.proxy(s,this))},this),1)}}},e.prototype.toggle=function(){"slide-in"!==this.state&&"slide-out"!==this.state&&this["slid"===this.state?"hide":"show"]()},e.prototype.calcClone=function(){this.$calcClone=this.$element.clone().html("").addClass("offcanvas-clone").removeClass("in").appendTo(t("body"))},e.prototype.recalc=function(){if("none"!==this.$calcClone.css("display")&&("slid"===this.state||"slide-in"===this.state)){this.state=null,this.placement=null;var e=this.getCanvasElements();this.$element.removeClass("in"),e.removeClass("canvas-slid"),e.add(this.$element).add("body").each(function(){t(this).attr("style",t(this).data("offcanvas-style")).removeData("offcanvas-style")})}},e.prototype.autohide=function(e){0===t(e.target).closest(this.$element).length&&this.hide()};var i=t.fn.offcanvas;t.fn.offcanvas=function(i){return this.each(function(){var n=t(this),s=n.data("bs.offcanvas"),r=t.extend({},e.DEFAULTS,n.data(),"object"==typeof i&&i);s||n.data("bs.offcanvas",s=new e(this,r)),"string"==typeof i&&s[i]()})},t.fn.offcanvas.Constructor=e,t.fn.offcanvas.noConflict=function(){return t.fn.offcanvas=i,this},t(document).on("click.bs.offcanvas.data-api","[data-toggle=offcanvas]",function(e){var i,n=t(this),s=n.attr("data-target")||e.preventDefault()||(i=n.attr("href"))&&i.replace(/.*(?=#[^\s]+$)/,""),r=t(s),o=r.data("bs.offcanvas"),a=o?"toggle":n.data();e.stopPropagation(),o?o.toggle():r.offcanvas(a)})}(window.jQuery),+function(t){"use strict";var e=function(i,n){this.$element=t(i),this.options=t.extend({},e.DEFAULTS,n),this.$element.on("click.bs.rowlink","td:not(.rowlink-skip)",t.proxy(this.click,this))};e.DEFAULTS={target:"a"},e.prototype.click=function(e){var i=t(e.currentTarget).closest("tr").find(this.options.target)[0];if(t(e.target)[0]!==i)if(e.preventDefault(),i.click)i.click();else if(document.createEvent){var n=document.createEvent("MouseEvents");n.initMouseEvent("click",!0,!0,window,0,0,0,0,0,!1,!1,!1,!1,0,null),i.dispatchEvent(n)}};var i=t.fn.rowlink;t.fn.rowlink=function(i){return this.each(function(){var n=t(this),s=n.data("rowlink");s||n.data("rowlink",s=new e(this,i))})},t.fn.rowlink.Constructor=e,t.fn.rowlink.noConflict=function(){return t.fn.rowlink=i,this},t(document).on("click.bs.rowlink.data-api",'[data-link="row"]',function(e){if(0===t(e.target).closest(".rowlink-skip").length){var i=t(this);i.data("rowlink")||(i.rowlink(i.data()),t(e.target).trigger("click.bs.rowlink"))}})}(window.jQuery),+function(t){"use strict";var e=void 0!==window.orientation,i=navigator.userAgent.toLowerCase().indexOf("android")>-1,n="Microsoft Internet Explorer"==window.navigator.appName,s=function(e,n){i||(this.$element=t(e),this.options=t.extend({},s.DEFAULTS,n),this.mask=String(this.options.mask),this.init(),this.listen(),this.checkVal())};s.DEFAULTS={mask:"",placeholder:"_",definitions:{9:"[0-9]",a:"[A-Za-z]","?":"[A-Za-z0-9]","*":"."}},s.prototype.init=function(){var e=this.options.definitions,i=this.mask.length;this.tests=[],this.partialPosition=this.mask.length,this.firstNonMaskPos=null,t.each(this.mask.split(""),t.proxy(function(t,n){"?"==n?(i--,this.partialPosition=t):e[n]?(this.tests.push(new RegExp(e[n])),null===this.firstNonMaskPos&&(this.firstNonMaskPos=this.tests.length-1)):this.tests.push(null)},this)),this.buffer=t.map(this.mask.split(""),t.proxy(function(t){return"?"!=t?e[t]?this.options.placeholder:t:void 0},this)),this.focusText=this.$element.val(),this.$element.data("rawMaskFn",t.proxy(function(){return t.map(this.buffer,function(t,e){return this.tests[e]&&t!=this.options.placeholder?t:null}).join("")},this))},s.prototype.listen=function(){if(!this.$element.attr("readonly")){var e=(n?"paste":"input")+".mask";this.$element.on("unmask.bs.inputmask",t.proxy(this.unmask,this)).on("focus.bs.inputmask",t.proxy(this.focusEvent,this)).on("blur.bs.inputmask",t.proxy(this.blurEvent,this)).on("keydown.bs.inputmask",t.proxy(this.keydownEvent,this)).on("keypress.bs.inputmask",t.proxy(this.keypressEvent,this)).on(e,t.proxy(this.pasteEvent,this))}},s.prototype.caret=function(t,e){if(0!==this.$element.length){if("number"==typeof t)return e="number"==typeof e?e:t,this.$element.each(function(){if(this.setSelectionRange)this.setSelectionRange(t,e);else if(this.createTextRange){var i=this.createTextRange();i.collapse(!0),i.moveEnd("character",e),i.moveStart("character",t),i.select()}});if(this.$element[0].setSelectionRange)t=this.$element[0].selectionStart,e=this.$element[0].selectionEnd;else if(document.selection&&document.selection.createRange){var i=document.selection.createRange();t=0-i.duplicate().moveStart("character",-1e5),e=t+i.text.length}return{begin:t,end:e}}},s.prototype.seekNext=function(t){for(var e=this.mask.length;++t<=e&&!this.tests[t];);return t},s.prototype.seekPrev=function(t){for(;--t>=0&&!this.tests[t];);return t},s.prototype.shiftL=function(t,e){var i=this.mask.length;if(!(0>t)){for(var n=t,s=this.seekNext(e);i>n;n++)if(this.tests[n]){if(!(i>s&&this.tests[n].test(this.buffer[s])))break;this.buffer[n]=this.buffer[s],this.buffer[s]=this.options.placeholder,s=this.seekNext(s)}this.writeBuffer(),this.caret(Math.max(this.firstNonMaskPos,t))}},s.prototype.shiftR=function(t){for(var e=this.mask.length,i=t,n=this.options.placeholder;e>i;i++)if(this.tests[i]){var s=this.seekNext(i),r=this.buffer[i];if(this.buffer[i]=n,!(e>s&&this.tests[s].test(r)))break;n=r}},s.prototype.unmask=function(){this.$element.unbind(".mask").removeData("inputmask")},s.prototype.focusEvent=function(){this.focusText=this.$element.val();var t=this.mask.length,e=this.checkVal();this.writeBuffer();var i=this,n=function(){e==t?i.caret(0,e):i.caret(e)};n(),setTimeout(n,50)},s.prototype.blurEvent=function(){this.checkVal(),this.$element.val()!==this.focusText&&this.$element.trigger("change")},s.prototype.keydownEvent=function(t){var i=t.which;if(8==i||46==i||e&&127==i){var n=this.caret(),s=n.begin,r=n.end;return r-s===0&&(s=46!=i?this.seekPrev(s):r=this.seekNext(s-1),r=46==i?this.seekNext(r):r),this.clearBuffer(s,r),this.shiftL(s,r-1),!1}return 27==i?(this.$element.val(this.focusText),this.caret(0,this.checkVal()),!1):void 0},s.prototype.keypressEvent=function(t){var e=this.mask.length,i=t.which,n=this.caret();if(t.ctrlKey||t.altKey||t.metaKey||32>i)return!0;if(i){n.end-n.begin!==0&&(this.clearBuffer(n.begin,n.end),this.shiftL(n.begin,n.end-1));var s=this.seekNext(n.begin-1);if(e>s){var r=String.fromCharCode(i);if(this.tests[s].test(r)){this.shiftR(s),this.buffer[s]=r,this.writeBuffer();var o=this.seekNext(s);this.caret(o)}}return!1}},s.prototype.pasteEvent=function(){var t=this;setTimeout(function(){t.caret(t.checkVal(!0))},0)},s.prototype.clearBuffer=function(t,e){for(var i=this.mask.length,n=t;e>n&&i>n;n++)this.tests[n]&&(this.buffer[n]=this.options.placeholder)},s.prototype.writeBuffer=function(){return this.$element.val(this.buffer.join("")).val()},s.prototype.checkVal=function(t){for(var e=this.mask.length,i=this.$element.val(),n=-1,s=0,r=0;e>s;s++)if(this.tests[s]){for(this.buffer[s]=this.options.placeholder;r++<i.length;){var o=i.charAt(r-1);if(this.tests[s].test(o)){this.buffer[s]=o,n=s;break}}if(r>i.length)break}else this.buffer[s]==i.charAt(r)&&s!=this.partialPosition&&(r++,n=s);return!t&&n+1<this.partialPosition?(this.$element.val(""),this.clearBuffer(0,e)):(t||n+1>=this.partialPosition)&&(this.writeBuffer(),t||this.$element.val(this.$element.val().substring(0,n+1))),this.partialPosition?s:this.firstNonMaskPos};var r=t.fn.inputmask;t.fn.inputmask=function(e){return this.each(function(){var i=t(this),n=i.data("inputmask");n||i.data("inputmask",n=new s(this,e))})},t.fn.inputmask.Constructor=s,t.fn.inputmask.noConflict=function(){return t.fn.inputmask=r,this},t(document).on("focus.bs.inputmask.data-api","[data-mask]",function(){var e=t(this);e.data("inputmask")||e.inputmask(e.data())})}(window.jQuery),+function(t){"use strict";var e="Microsoft Internet Explorer"==window.navigator.appName,i=function(e,i){if(this.$element=t(e),this.$input=this.$element.find(":file"),0!==this.$input.length){this.name=this.$input.attr("name")||i.name,this.$hidden=this.$element.find('input[type=hidden][name="'+this.name+'"]'),0===this.$hidden.length&&(this.$hidden=t('<input type="hidden">').insertBefore(this.$input)),this.$preview=this.$element.find(".fileinput-preview");var n=this.$preview.css("height");"inline"!==this.$preview.css("display")&&"0px"!==n&&"none"!==n&&this.$preview.css("line-height",n),this.original={exists:this.$element.hasClass("fileinput-exists"),preview:this.$preview.html(),hiddenVal:this.$hidden.val()},this.listen()}};i.prototype.listen=function(){this.$input.on("change.bs.fileinput",t.proxy(this.change,this)),t(this.$input[0].form).on("reset.bs.fileinput",t.proxy(this.reset,this)),this.$element.find('[data-trigger="fileinput"]').on("click.bs.fileinput",t.proxy(this.trigger,this)),this.$element.find('[data-dismiss="fileinput"]').on("click.bs.fileinput",t.proxy(this.clear,this))},i.prototype.change=function(e){var i=void 0===e.target.files?e.target&&e.target.value?[{name:e.target.value.replace(/^.+\\/,"")}]:[]:e.target.files;if(e.stopPropagation(),0===i.length)return void this.clear();this.$hidden.val(""),this.$hidden.attr("name",""),this.$input.attr("name",this.name);var n=i[0];if(this.$preview.length>0&&("undefined"!=typeof n.type?n.type.match(/^image\/(gif|png|jpeg)$/):n.name.match(/\.(gif|png|jpe?g)$/i))&&"undefined"!=typeof FileReader){var s=new FileReader,r=this.$preview,o=this.$element;s.onload=function(e){var s=t("<img>");s[0].src=e.target.result,i[0].result=e.target.result,o.find(".fileinput-filename").text(n.name),"none"!=r.css("max-height")&&s.css("max-height",parseInt(r.css("max-height"),10)-parseInt(r.css("padding-top"),10)-parseInt(r.css("padding-bottom"),10)-parseInt(r.css("border-top"),10)-parseInt(r.css("border-bottom"),10)),r.html(s),o.addClass("fileinput-exists").removeClass("fileinput-new"),o.trigger("change.bs.fileinput",i)},s.readAsDataURL(n)}else this.$element.find(".fileinput-filename").text(n.name),this.$preview.text(n.name),this.$element.addClass("fileinput-exists").removeClass("fileinput-new"),this.$element.trigger("change.bs.fileinput")},i.prototype.clear=function(t){if(t&&t.preventDefault(),this.$hidden.val(""),this.$hidden.attr("name",this.name),this.$input.attr("name",""),e){var i=this.$input.clone(!0);this.$input.after(i),this.$input.remove(),this.$input=i}else this.$input.val("");this.$preview.html(""),this.$element.find(".fileinput-filename").text(""),this.$element.addClass("fileinput-new").removeClass("fileinput-exists"),void 0!==t&&(this.$input.trigger("change"),this.$element.trigger("clear.bs.fileinput"))},i.prototype.reset=function(){this.clear(),this.$hidden.val(this.original.hiddenVal),this.$preview.html(this.original.preview),this.$element.find(".fileinput-filename").text(""),this.original.exists?this.$element.addClass("fileinput-exists").removeClass("fileinput-new"):this.$element.addClass("fileinput-new").removeClass("fileinput-exists"),this.$element.trigger("reset.bs.fileinput")},i.prototype.trigger=function(t){this.$input.trigger("click"),t.preventDefault()};var n=t.fn.fileinput;t.fn.fileinput=function(e){return this.each(function(){var n=t(this),s=n.data("fileinput");s||n.data("fileinput",s=new i(this,e)),"string"==typeof e&&s[e]()})},t.fn.fileinput.Constructor=i,t.fn.fileinput.noConflict=function(){return t.fn.fileinput=n,this},t(document).on("click.fileinput.data-api",'[data-provides="fileinput"]',function(e){var i=t(this);if(!i.data("fileinput")){i.fileinput(i.data());var n=t(e.target).closest('[data-dismiss="fileinput"],[data-trigger="fileinput"]');n.length>0&&(e.preventDefault(),n.trigger("click.bs.fileinput"))}})}(window.jQuery);(function(){var t,e,i,n,s,r,o,a,l=[].slice,h={}.hasOwnProperty,c=function(t,e){for(var i in e){if(h.call(e,i))t[i]=e[i]}function n(){this.constructor=t}n.prototype=e.prototype;t.prototype=new n;t.__super__=e.prototype;return t};o=function(){};e=function(){function t(){}t.prototype.addEventListener=t.prototype.on;t.prototype.on=function(t,e){this._callbacks=this._callbacks||{};if(!this._callbacks[t]){this._callbacks[t]=[]}this._callbacks[t].push(e);return this};t.prototype.emit=function(){var t,e,i,n,s,r;n=arguments[0],t=2<=arguments.length?l.call(arguments,1):[];this._callbacks=this._callbacks||{};i=this._callbacks[n];if(i){for(s=0,r=i.length;s<r;s++){e=i[s];e.apply(this,t)}}return this};t.prototype.removeListener=t.prototype.off;t.prototype.removeAllListeners=t.prototype.off;t.prototype.removeEventListener=t.prototype.off;t.prototype.off=function(t,e){var i,n,s,r,o;if(!this._callbacks||arguments.length===0){this._callbacks={};return this}n=this._callbacks[t];if(!n){return this}if(arguments.length===1){delete this._callbacks[t];return this}for(s=r=0,o=n.length;r<o;s=++r){i=n[s];if(i===e){n.splice(s,1);break}}return this};return t}();t=function(t){var i,n;c(s,t);s.prototype.Emitter=e;s.prototype.events=["drop","dragstart","dragend","dragenter","dragover","dragleave","addedfile","addedfiles","removedfile","thumbnail","error","errormultiple","processing","processingmultiple","uploadprogress","totaluploadprogress","sending","sendingmultiple","success","successmultiple","canceled","canceledmultiple","complete","completemultiple","reset","maxfilesexceeded","maxfilesreached","queuecomplete"];s.prototype.defaultOptions={url:null,method:"post",withCredentials:false,parallelUploads:2,uploadMultiple:false,maxFilesize:256,paramName:"file",createImageThumbnails:true,maxThumbnailFilesize:10,thumbnailWidth:120,thumbnailHeight:120,filesizeBase:1e3,maxFiles:null,params:{},clickable:true,ignoreHiddenFiles:true,acceptedFiles:null,acceptedMimeTypes:null,autoProcessQueue:true,autoQueue:true,addRemoveLinks:false,previewsContainer:null,hiddenInputContainer:"body",capture:null,renameFilename:null,dictDefaultMessage:"Drop files here to upload",dictFallbackMessage:"Your browser does not support drag'n'drop file uploads.",dictFallbackText:"Please use the fallback form below to upload your files like in the olden days.",dictFileTooBig:"File is too big ({{filesize}}MiB). Max filesize: {{maxFilesize}}MiB.",dictInvalidFileType:"You can't upload files of this type.",dictResponseError:"Server responded with {{statusCode}} code.",dictCancelUpload:"Cancel upload",dictCancelUploadConfirmation:"Are you sure you want to cancel this upload?",dictRemoveFile:"Remove file",dictRemoveFileConfirmation:null,dictMaxFilesExceeded:"You can not upload any more files.",accept:function(t,e){return e()},init:function(){return o},forceFallback:false,fallback:function(){var t,e,i,n,r,o;this.element.className=""+this.element.className+" dz-browser-not-supported";o=this.element.getElementsByTagName("div");for(n=0,r=o.length;n<r;n++){t=o[n];if(/(^| )dz-message($| )/.test(t.className)){e=t;t.className="dz-message";continue}}if(!e){e=s.createElement('<div class="dz-message"><span></span></div>');this.element.appendChild(e)}i=e.getElementsByTagName("span")[0];if(i){if(i.textContent!=null){i.textContent=this.options.dictFallbackMessage}else if(i.innerText!=null){i.innerText=this.options.dictFallbackMessage}}return this.element.appendChild(this.getFallbackForm())},resize:function(t){var e,i,n;e={srcX:0,srcY:0,srcWidth:t.width,srcHeight:t.height};i=t.width/t.height;e.optWidth=this.options.thumbnailWidth;e.optHeight=this.options.thumbnailHeight;if(e.optWidth==null&&e.optHeight==null){e.optWidth=e.srcWidth;e.optHeight=e.srcHeight}else if(e.optWidth==null){e.optWidth=i*e.optHeight}else if(e.optHeight==null){e.optHeight=1/i*e.optWidth}n=e.optWidth/e.optHeight;if(t.height<e.optHeight||t.width<e.optWidth){e.trgHeight=e.srcHeight;e.trgWidth=e.srcWidth}else{if(i>n){e.srcHeight=t.height;e.srcWidth=e.srcHeight*n}else{e.srcWidth=t.width;e.srcHeight=e.srcWidth/n}}e.srcX=(t.width-e.srcWidth)/2;e.srcY=(t.height-e.srcHeight)/2;return e},drop:function(t){return this.element.classList.remove("dz-drag-hover")},dragstart:o,dragend:function(t){return this.element.classList.remove("dz-drag-hover")},dragenter:function(t){return this.element.classList.add("dz-drag-hover")},dragover:function(t){return this.element.classList.add("dz-drag-hover")},dragleave:function(t){return this.element.classList.remove("dz-drag-hover")},paste:o,reset:function(){return this.element.classList.remove("dz-started")},addedfile:function(t){var e,i,n,r,o,a,l,h,c,u,d,f,p;if(this.element===this.previewsContainer){this.element.classList.add("dz-started")}if(this.previewsContainer){t.previewElement=s.createElement(this.options.previewTemplate.trim());t.previewTemplate=t.previewElement;this.previewsContainer.appendChild(t.previewElement);u=t.previewElement.querySelectorAll("[data-dz-name]");for(r=0,l=u.length;r<l;r++){e=u[r];e.textContent=this._renameFilename(t.name)}d=t.previewElement.querySelectorAll("[data-dz-size]");for(o=0,h=d.length;o<h;o++){e=d[o];e.innerHTML=this.filesize(t.size)}if(this.options.addRemoveLinks){t._removeLink=s.createElement('<a class="dz-remove" href="javascript:undefined;" data-dz-remove>'+this.options.dictRemoveFile+"</a>");t.previewElement.appendChild(t._removeLink)}i=function(e){return function(i){i.preventDefault();i.stopPropagation();if(t.status===s.UPLOADING){return s.confirm(e.options.dictCancelUploadConfirmation,function(){return e.removeFile(t)})}else{if(e.options.dictRemoveFileConfirmation){return s.confirm(e.options.dictRemoveFileConfirmation,function(){return e.removeFile(t)})}else{return e.removeFile(t)}}}}(this);f=t.previewElement.querySelectorAll("[data-dz-remove]");p=[];for(a=0,c=f.length;a<c;a++){n=f[a];p.push(n.addEventListener("click",i))}return p}},removedfile:function(t){var e;if(t.previewElement){if((e=t.previewElement)!=null){e.parentNode.removeChild(t.previewElement)}}return this._updateMaxFilesReachedClass()},thumbnail:function(t,e){var i,n,s,r;if(t.previewElement){t.previewElement.classList.remove("dz-file-preview");r=t.previewElement.querySelectorAll("[data-dz-thumbnail]");for(n=0,s=r.length;n<s;n++){i=r[n];i.alt=t.name;i.src=e}return setTimeout(function(e){return function(){return t.previewElement.classList.add("dz-image-preview")}}(this),1)}},error:function(t,e){var i,n,s,r,o;if(t.previewElement){t.previewElement.classList.add("dz-error");if(typeof e!=="String"&&e.error){e=e.error}r=t.previewElement.querySelectorAll("[data-dz-errormessage]");o=[];for(n=0,s=r.length;n<s;n++){i=r[n];o.push(i.textContent=e)}return o}},errormultiple:o,processing:function(t){if(t.previewElement){t.previewElement.classList.add("dz-processing");if(t._removeLink){return t._removeLink.textContent=this.options.dictCancelUpload}}},processingmultiple:o,uploadprogress:function(t,e,i){var n,s,r,o,a;if(t.previewElement){o=t.previewElement.querySelectorAll("[data-dz-uploadprogress]");a=[];for(s=0,r=o.length;s<r;s++){n=o[s];if(n.nodeName==="PROGRESS"){a.push(n.value=e)}else{a.push(n.style.width=""+e+"%")}}return a}},totaluploadprogress:o,sending:o,sendingmultiple:o,success:function(t){if(t.previewElement){return t.previewElement.classList.add("dz-success")}},successmultiple:o,canceled:function(t){return this.emit("error",t,"Upload canceled.")},canceledmultiple:o,complete:function(t){if(t._removeLink){t._removeLink.textContent=this.options.dictRemoveFile}if(t.previewElement){return t.previewElement.classList.add("dz-complete")}},completemultiple:o,maxfilesexceeded:o,maxfilesreached:o,queuecomplete:o,addedfiles:o,previewTemplate:'<div class="dz-preview dz-file-preview">\n  <div class="dz-image"><img data-dz-thumbnail /></div>\n  <div class="dz-details">\n    <div class="dz-size"><span data-dz-size></span></div>\n    <div class="dz-filename"><span data-dz-name></span></div>\n  </div>\n  <div class="dz-progress"><span class="dz-upload" data-dz-uploadprogress></span></div>\n  <div class="dz-error-message"><span data-dz-errormessage></span></div>\n  <div class="dz-success-mark">\n    <svg width="54px" height="54px" viewBox="0 0 54 54" version="1.1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" xmlns:sketch="http://www.bohemiancoding.com/sketch/ns">\n      <title>Check</title>\n      <defs></defs>\n      <g id="Page-1" stroke="none" stroke-width="1" fill="none" fill-rule="evenodd" sketch:type="MSPage">\n        <path d="M23.5,31.8431458 L17.5852419,25.9283877 C16.0248253,24.3679711 13.4910294,24.366835 11.9289322,25.9289322 C10.3700136,27.4878508 10.3665912,30.0234455 11.9283877,31.5852419 L20.4147581,40.0716123 C20.5133999,40.1702541 20.6159315,40.2626649 20.7218615,40.3488435 C22.2835669,41.8725651 24.794234,41.8626202 26.3461564,40.3106978 L43.3106978,23.3461564 C44.8771021,21.7797521 44.8758057,19.2483887 43.3137085,17.6862915 C41.7547899,16.1273729 39.2176035,16.1255422 37.6538436,17.6893022 L23.5,31.8431458 Z M27,53 C41.3594035,53 53,41.3594035 53,27 C53,12.6405965 41.3594035,1 27,1 C12.6405965,1 1,12.6405965 1,27 C1,41.3594035 12.6405965,53 27,53 Z" id="Oval-2" stroke-opacity="0.198794158" stroke="#747474" fill-opacity="0.816519475" fill="#FFFFFF" sketch:type="MSShapeGroup"></path>\n      </g>\n    </svg>\n  </div>\n  <div class="dz-error-mark">\n    <svg width="54px" height="54px" viewBox="0 0 54 54" version="1.1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" xmlns:sketch="http://www.bohemiancoding.com/sketch/ns">\n      <title>Error</title>\n      <defs></defs>\n      <g id="Page-1" stroke="none" stroke-width="1" fill="none" fill-rule="evenodd" sketch:type="MSPage">\n        <g id="Check-+-Oval-2" sketch:type="MSLayerGroup" stroke="#747474" stroke-opacity="0.198794158" fill="#FFFFFF" fill-opacity="0.816519475">\n          <path d="M32.6568542,29 L38.3106978,23.3461564 C39.8771021,21.7797521 39.8758057,19.2483887 38.3137085,17.6862915 C36.7547899,16.1273729 34.2176035,16.1255422 32.6538436,17.6893022 L27,23.3431458 L21.3461564,17.6893022 C19.7823965,16.1255422 17.2452101,16.1273729 15.6862915,17.6862915 C14.1241943,19.2483887 14.1228979,21.7797521 15.6893022,23.3461564 L21.3431458,29 L15.6893022,34.6538436 C14.1228979,36.2202479 14.1241943,38.7516113 15.6862915,40.3137085 C17.2452101,41.8726271 19.7823965,41.8744578 21.3461564,40.3106978 L27,34.6568542 L32.6538436,40.3106978 C34.2176035,41.8744578 36.7547899,41.8726271 38.3137085,40.3137085 C39.8758057,38.7516113 39.8771021,36.2202479 38.3106978,34.6538436 L32.6568542,29 Z M27,53 C41.3594035,53 53,41.3594035 53,27 C53,12.6405965 41.3594035,1 27,1 C12.6405965,1 1,12.6405965 1,27 C1,41.3594035 12.6405965,53 27,53 Z" id="Oval-2" sketch:type="MSShapeGroup"></path>\n        </g>\n      </g>\n    </svg>\n  </div>\n</div>'};i=function(){var t,e,i,n,s,r,o;n=arguments[0],i=2<=arguments.length?l.call(arguments,1):[];for(r=0,o=i.length;r<o;r++){e=i[r];for(t in e){s=e[t];n[t]=s}}return n};function s(t,e){var n,r,o;this.element=t;this.version=s.version;this.defaultOptions.previewTemplate=this.defaultOptions.previewTemplate.replace(/\n*/g,"");this.clickableElements=[];this.listeners=[];this.files=[];if(typeof this.element==="string"){this.element=document.querySelector(this.element)}if(!(this.element&&this.element.nodeType!=null)){throw new Error("Invalid dropzone element.")}if(this.element.dropzone){throw new Error("Dropzone already attached.")}s.instances.push(this);this.element.dropzone=this;n=(o=s.optionsForElement(this.element))!=null?o:{};this.options=i({},this.defaultOptions,n,e!=null?e:{});if(this.options.forceFallback||!s.isBrowserSupported()){return this.options.fallback.call(this)}if(this.options.url==null){this.options.url=this.element.getAttribute("action")}if(!this.options.url){throw new Error("No URL provided.")}if(this.options.acceptedFiles&&this.options.acceptedMimeTypes){throw new Error("You can't provide both 'acceptedFiles' and 'acceptedMimeTypes'. 'acceptedMimeTypes' is deprecated.")}if(this.options.acceptedMimeTypes){this.options.acceptedFiles=this.options.acceptedMimeTypes;delete this.options.acceptedMimeTypes}this.options.method=this.options.method.toUpperCase();if((r=this.getExistingFallback())&&r.parentNode){r.parentNode.removeChild(r)}if(this.options.previewsContainer!==false){if(this.options.previewsContainer){this.previewsContainer=s.getElement(this.options.previewsContainer,"previewsContainer")}else{this.previewsContainer=this.element}}if(this.options.clickable){if(this.options.clickable===true){this.clickableElements=[this.element]}else{this.clickableElements=s.getElements(this.options.clickable,"clickable")}}this.init()}s.prototype.getAcceptedFiles=function(){var t,e,i,n,s;n=this.files;s=[];for(e=0,i=n.length;e<i;e++){t=n[e];if(t.accepted){s.push(t)}}return s};s.prototype.getRejectedFiles=function(){var t,e,i,n,s;n=this.files;s=[];for(e=0,i=n.length;e<i;e++){t=n[e];if(!t.accepted){s.push(t)}}return s};s.prototype.getFilesWithStatus=function(t){var e,i,n,s,r;s=this.files;r=[];for(i=0,n=s.length;i<n;i++){e=s[i];if(e.status===t){r.push(e)}}return r};s.prototype.getQueuedFiles=function(){return this.getFilesWithStatus(s.QUEUED)};s.prototype.getUploadingFiles=function(){return this.getFilesWithStatus(s.UPLOADING)};s.prototype.getAddedFiles=function(){return this.getFilesWithStatus(s.ADDED)};s.prototype.getActiveFiles=function(){var t,e,i,n,r;n=this.files;r=[];for(e=0,i=n.length;e<i;e++){t=n[e];if(t.status===s.UPLOADING||t.status===s.QUEUED){r.push(t)}}return r};s.prototype.init=function(){var t,e,i,n,r,o,a;if(this.element.tagName==="form"){this.element.setAttribute("enctype","multipart/form-data")}if(this.element.classList.contains("dropzone")&&!this.element.querySelector(".dz-message")){this.element.appendChild(s.createElement('<div class="dz-default dz-message"><span>'+this.options.dictDefaultMessage+"</span></div>"))}if(this.clickableElements.length){i=function(t){return function(){if(t.hiddenFileInput){t.hiddenFileInput.parentNode.removeChild(t.hiddenFileInput)}t.hiddenFileInput=document.createElement("input");t.hiddenFileInput.setAttribute("type","file");if(t.options.maxFiles==null||t.options.maxFiles>1){t.hiddenFileInput.setAttribute("multiple","multiple")}t.hiddenFileInput.className="dz-hidden-input";if(t.options.acceptedFiles!=null){t.hiddenFileInput.setAttribute("accept",t.options.acceptedFiles)}if(t.options.capture!=null){t.hiddenFileInput.setAttribute("capture",t.options.capture)}t.hiddenFileInput.style.visibility="hidden";t.hiddenFileInput.style.position="absolute";t.hiddenFileInput.style.top="0";t.hiddenFileInput.style.left="0";t.hiddenFileInput.style.height="0";t.hiddenFileInput.style.width="0";document.querySelector(t.options.hiddenInputContainer).appendChild(t.hiddenFileInput);return t.hiddenFileInput.addEventListener("change",function(){var e,n,s,r;n=t.hiddenFileInput.files;if(n.length){for(s=0,r=n.length;s<r;s++){e=n[s];t.addFile(e)}}t.emit("addedfiles",n);return i()})}}(this);i()}this.URL=(o=window.URL)!=null?o:window.webkitURL;a=this.events;for(n=0,r=a.length;n<r;n++){t=a[n];this.on(t,this.options[t])}this.on("uploadprogress",function(t){return function(){return t.updateTotalUploadProgress()}}(this));this.on("removedfile",function(t){return function(){return t.updateTotalUploadProgress()}}(this));this.on("canceled",function(t){return function(e){return t.emit("complete",e)}}(this));this.on("complete",function(t){return function(e){if(t.getAddedFiles().length===0&&t.getUploadingFiles().length===0&&t.getQueuedFiles().length===0){return setTimeout(function(){return t.emit("queuecomplete")},0)}}}(this));e=function(t){t.stopPropagation();if(t.preventDefault){return t.preventDefault()}else{return t.returnValue=false}};this.listeners=[{element:this.element,events:{dragstart:function(t){return function(e){return t.emit("dragstart",e)}}(this),dragenter:function(t){return function(i){e(i);return t.emit("dragenter",i)}}(this),dragover:function(t){return function(i){var n;try{n=i.dataTransfer.effectAllowed}catch(t){}i.dataTransfer.dropEffect="move"===n||"linkMove"===n?"move":"copy";e(i);return t.emit("dragover",i)}}(this),dragleave:function(t){return function(e){return t.emit("dragleave",e)}}(this),drop:function(t){return function(i){e(i);return t.drop(i)}}(this),dragend:function(t){return function(e){return t.emit("dragend",e)}}(this)}}];this.clickableElements.forEach(function(t){return function(e){return t.listeners.push({element:e,events:{click:function(i){if(e!==t.element||(i.target===t.element||s.elementInside(i.target,t.element.querySelector(".dz-message")))){t.hiddenFileInput.click()}return true}}})}}(this));this.enable();return this.options.init.call(this)};s.prototype.destroy=function(){var t;this.disable();this.removeAllFiles(true);if((t=this.hiddenFileInput)!=null?t.parentNode:void 0){this.hiddenFileInput.parentNode.removeChild(this.hiddenFileInput);this.hiddenFileInput=null}delete this.element.dropzone;return s.instances.splice(s.instances.indexOf(this),1)};s.prototype.updateTotalUploadProgress=function(){var t,e,i,n,s,r,o,a;n=0;i=0;t=this.getActiveFiles();if(t.length){a=this.getActiveFiles();for(r=0,o=a.length;r<o;r++){e=a[r];n+=e.upload.bytesSent;i+=e.upload.total}s=100*n/i}else{s=100}return this.emit("totaluploadprogress",s,i,n)};s.prototype._getParamName=function(t){if(typeof this.options.paramName==="function"){return this.options.paramName(t)}else{return""+this.options.paramName+(this.options.uploadMultiple?"["+t+"]":"")}};s.prototype._renameFilename=function(t){if(typeof this.options.renameFilename!=="function"){return t}return this.options.renameFilename(t)};s.prototype.getFallbackForm=function(){var t,e,i,n;if(t=this.getExistingFallback()){return t}i='<div class="dz-fallback">';if(this.options.dictFallbackText){i+="<p>"+this.options.dictFallbackText+"</p>"}i+='<input type="file" name="'+this._getParamName(0)+'" '+(this.options.uploadMultiple?'multiple="multiple"':void 0)+' /><input type="submit" value="Upload!"></div>';e=s.createElement(i);if(this.element.tagName!=="FORM"){n=s.createElement('<form action="'+this.options.url+'" enctype="multipart/form-data" method="'+this.options.method+'"></form>');n.appendChild(e)}else{this.element.setAttribute("enctype","multipart/form-data");this.element.setAttribute("method",this.options.method)}return n!=null?n:e};s.prototype.getExistingFallback=function(){var t,e,i,n,s,r;e=function(t){var e,i,n;for(i=0,n=t.length;i<n;i++){e=t[i];if(/(^| )fallback($| )/.test(e.className)){return e}}};r=["div","form"];for(n=0,s=r.length;n<s;n++){i=r[n];if(t=e(this.element.getElementsByTagName(i))){return t}}};s.prototype.setupEventListeners=function(){var t,e,i,n,s,r,o;r=this.listeners;o=[];for(n=0,s=r.length;n<s;n++){t=r[n];o.push(function(){var n,s;n=t.events;s=[];for(e in n){i=n[e];s.push(t.element.addEventListener(e,i,false))}return s}())}return o};s.prototype.removeEventListeners=function(){var t,e,i,n,s,r,o;r=this.listeners;o=[];for(n=0,s=r.length;n<s;n++){t=r[n];o.push(function(){var n,s;n=t.events;s=[];for(e in n){i=n[e];s.push(t.element.removeEventListener(e,i,false))}return s}())}return o};s.prototype.disable=function(){var t,e,i,n,s;this.clickableElements.forEach(function(t){return t.classList.remove("dz-clickable")});this.removeEventListeners();n=this.files;s=[];for(e=0,i=n.length;e<i;e++){t=n[e];s.push(this.cancelUpload(t))}return s};s.prototype.enable=function(){this.clickableElements.forEach(function(t){return t.classList.add("dz-clickable")});return this.setupEventListeners()};s.prototype.filesize=function(t){var e,i,n,s,r,o,a,l;n=0;s="b";if(t>0){o=["TB","GB","MB","KB","b"];for(i=a=0,l=o.length;a<l;i=++a){r=o[i];e=Math.pow(this.options.filesizeBase,4-i)/10;if(t>=e){n=t/Math.pow(this.options.filesizeBase,4-i);s=r;break}}n=Math.round(10*n)/10}return"<strong>"+n+"</strong> "+s};s.prototype._updateMaxFilesReachedClass=function(){if(this.options.maxFiles!=null&&this.getAcceptedFiles().length>=this.options.maxFiles){if(this.getAcceptedFiles().length===this.options.maxFiles){this.emit("maxfilesreached",this.files)}return this.element.classList.add("dz-max-files-reached")}else{return this.element.classList.remove("dz-max-files-reached")}};s.prototype.drop=function(t){var e,i;if(!t.dataTransfer){return}this.emit("drop",t);e=t.dataTransfer.files;this.emit("addedfiles",e);if(e.length){i=t.dataTransfer.items;if(i&&i.length&&i[0].webkitGetAsEntry!=null){this._addFilesFromItems(i)}else{this.handleFiles(e)}}};s.prototype.paste=function(t){var e,i;if((t!=null?(i=t.clipboardData)!=null?i.items:void 0:void 0)==null){return}this.emit("paste",t);e=t.clipboardData.items;if(e.length){return this._addFilesFromItems(e)}};s.prototype.handleFiles=function(t){var e,i,n,s;s=[];for(i=0,n=t.length;i<n;i++){e=t[i];s.push(this.addFile(e))}return s};s.prototype._addFilesFromItems=function(t){var e,i,n,s,r;r=[];for(n=0,s=t.length;n<s;n++){i=t[n];if(i.webkitGetAsEntry!=null&&(e=i.webkitGetAsEntry())){if(e.isFile){r.push(this.addFile(i.getAsFile()))}else if(e.isDirectory){r.push(this._addFilesFromDirectory(e,e.name))}else{r.push(void 0)}}else if(i.getAsFile!=null){if(i.kind==null||i.kind==="file"){r.push(this.addFile(i.getAsFile()))}else{r.push(void 0)}}else{r.push(void 0)}}return r};s.prototype._addFilesFromDirectory=function(t,e){var i,n,s;i=t.createReader();n=function(t){return typeof console!=="undefined"&&console!==null?typeof console.log==="function"?console.log(t):void 0:void 0};s=function(t){return function(){return i.readEntries(function(i){var n,r,o;if(i.length>0){for(r=0,o=i.length;r<o;r++){n=i[r];if(n.isFile){n.file(function(i){if(t.options.ignoreHiddenFiles&&i.name.substring(0,1)==="."){return}i.fullPath=""+e+"/"+i.name;return t.addFile(i)})}else if(n.isDirectory){t._addFilesFromDirectory(n,""+e+"/"+n.name)}}s()}return null},n)}}(this);return s()};s.prototype.accept=function(t,e){if(t.size>this.options.maxFilesize*1024*1024){return e(this.options.dictFileTooBig.replace("{{filesize}}",Math.round(t.size/1024/10.24)/100).replace("{{maxFilesize}}",this.options.maxFilesize))}else if(!s.isValidFile(t,this.options.acceptedFiles)){return e(this.options.dictInvalidFileType)}else if(this.options.maxFiles!=null&&this.getAcceptedFiles().length>=this.options.maxFiles){e(this.options.dictMaxFilesExceeded.replace("{{maxFiles}}",this.options.maxFiles));return this.emit("maxfilesexceeded",t)}else{return this.options.accept.call(this,t,e)}};s.prototype.addFile=function(t){t.upload={progress:0,total:t.size,bytesSent:0};this.files.push(t);t.status=s.ADDED;this.emit("addedfile",t);this._enqueueThumbnail(t);return this.accept(t,function(e){return function(i){if(i){t.accepted=false;e._errorProcessing([t],i)}else{t.accepted=true;if(e.options.autoQueue){e.enqueueFile(t)}}return e._updateMaxFilesReachedClass()}}(this))};s.prototype.enqueueFiles=function(t){var e,i,n;for(i=0,n=t.length;i<n;i++){e=t[i];this.enqueueFile(e)}return null};s.prototype.enqueueFile=function(t){if(t.status===s.ADDED&&t.accepted===true){t.status=s.QUEUED;if(this.options.autoProcessQueue){return setTimeout(function(t){return function(){return t.processQueue()}}(this),0)}}else{throw new Error("This file can't be queued because it has already been processed or was rejected.")}};s.prototype._thumbnailQueue=[];s.prototype._processingThumbnail=false;s.prototype._enqueueThumbnail=function(t){if(this.options.createImageThumbnails&&t.type.match(/image.*/)&&t.size<=this.options.maxThumbnailFilesize*1024*1024){this._thumbnailQueue.push(t);return setTimeout(function(t){return function(){return t._processThumbnailQueue()}}(this),0)}};s.prototype._processThumbnailQueue=function(){if(this._processingThumbnail||this._thumbnailQueue.length===0){return}this._processingThumbnail=true;return this.createThumbnail(this._thumbnailQueue.shift(),function(t){return function(){t._processingThumbnail=false;return t._processThumbnailQueue()}}(this))};s.prototype.removeFile=function(t){if(t.status===s.UPLOADING){this.cancelUpload(t)}this.files=a(this.files,t);this.emit("removedfile",t);if(this.files.length===0){return this.emit("reset")}};s.prototype.removeAllFiles=function(t){var e,i,n,r;if(t==null){t=false}r=this.files.slice();for(i=0,n=r.length;i<n;i++){e=r[i];if(e.status!==s.UPLOADING||t){this.removeFile(e)}}return null};s.prototype.createThumbnail=function(t,e){var i;i=new FileReader;i.onload=function(n){return function(){if(t.type==="image/svg+xml"){n.emit("thumbnail",t,i.result);if(e!=null){e()}return}return n.createThumbnailFromUrl(t,i.result,e)}}(this);return i.readAsDataURL(t)};s.prototype.createThumbnailFromUrl=function(t,e,i,n){var s;s=document.createElement("img");if(n){s.crossOrigin=n}s.onload=function(e){return function(){var n,o,a,l,h,c,u,d;t.width=s.width;t.height=s.height;a=e.options.resize.call(e,t);if(a.trgWidth==null){a.trgWidth=a.optWidth}if(a.trgHeight==null){a.trgHeight=a.optHeight}n=document.createElement("canvas");o=n.getContext("2d");n.width=a.trgWidth;n.height=a.trgHeight;r(o,s,(h=a.srcX)!=null?h:0,(c=a.srcY)!=null?c:0,a.srcWidth,a.srcHeight,(u=a.trgX)!=null?u:0,(d=a.trgY)!=null?d:0,a.trgWidth,a.trgHeight);l=n.toDataURL("image/png");e.emit("thumbnail",t,l);if(i!=null){return i()}}}(this);if(i!=null){s.onerror=i}return s.src=e};s.prototype.processQueue=function(){var t,e,i,n;e=this.options.parallelUploads;i=this.getUploadingFiles().length;t=i;if(i>=e){return}n=this.getQueuedFiles();if(!(n.length>0)){return}if(this.options.uploadMultiple){return this.processFiles(n.slice(0,e-i))}else{while(t<e){if(!n.length){return}this.processFile(n.shift());t++}}};s.prototype.processFile=function(t){return this.processFiles([t])};s.prototype.processFiles=function(t){var e,i,n;for(i=0,n=t.length;i<n;i++){e=t[i];e.processing=true;e.status=s.UPLOADING;this.emit("processing",e)}if(this.options.uploadMultiple){this.emit("processingmultiple",t)}return this.uploadFiles(t)};s.prototype._getFilesWithXhr=function(t){var e,i;return i=function(){var i,n,s,r;s=this.files;r=[];for(i=0,n=s.length;i<n;i++){e=s[i];if(e.xhr===t){r.push(e)}}return r}.call(this)};s.prototype.cancelUpload=function(t){var e,i,n,r,o,a,l;if(t.status===s.UPLOADING){i=this._getFilesWithXhr(t.xhr);for(n=0,o=i.length;n<o;n++){e=i[n];e.status=s.CANCELED}t.xhr.abort();for(r=0,a=i.length;r<a;r++){e=i[r];this.emit("canceled",e)}if(this.options.uploadMultiple){this.emit("canceledmultiple",i)}}else if((l=t.status)===s.ADDED||l===s.QUEUED){t.status=s.CANCELED;this.emit("canceled",t);if(this.options.uploadMultiple){this.emit("canceledmultiple",[t])}}if(this.options.autoProcessQueue){return this.processQueue()}};n=function(){var t,e;e=arguments[0],t=2<=arguments.length?l.call(arguments,1):[];if(typeof e==="function"){return e.apply(this,t)}return e};s.prototype.uploadFile=function(t){return this.uploadFiles([t])};s.prototype.uploadFiles=function(t){var e,r,o,a,l,h,c,u,d,f,p,m,g,v,y,b,w,x,_,k,C,S,T,D,M,P,I,E,$,F,A,H,L,O;_=new XMLHttpRequest;for(k=0,D=t.length;k<D;k++){e=t[k];e.xhr=_}m=n(this.options.method,t);w=n(this.options.url,t);_.open(m,w,true);_.withCredentials=!!this.options.withCredentials;y=null;o=function(i){return function(){var n,s,r;r=[];for(n=0,s=t.length;n<s;n++){e=t[n];r.push(i._errorProcessing(t,y||i.options.dictResponseError.replace("{{statusCode}}",_.status),_))}return r}}(this);b=function(i){return function(n){var s,r,o,a,l,h,c,u,d;if(n!=null){r=100*n.loaded/n.total;for(o=0,h=t.length;o<h;o++){e=t[o];e.upload={progress:r,total:n.total,bytesSent:n.loaded}}}else{s=true;r=100;for(a=0,c=t.length;a<c;a++){e=t[a];if(!(e.upload.progress===100&&e.upload.bytesSent===e.upload.total)){s=false}e.upload.progress=r;e.upload.bytesSent=e.upload.total}if(s){return}}d=[];for(l=0,u=t.length;l<u;l++){e=t[l];d.push(i.emit("uploadprogress",e,r,e.upload.bytesSent))}return d}}(this);_.onload=function(e){return function(i){var n;if(t[0].status===s.CANCELED){return}if(_.readyState!==4){return}y=_.responseText;if(_.getResponseHeader("content-type")&&~_.getResponseHeader("content-type").indexOf("application/json")){try{y=JSON.parse(y)}catch(t){i=t;y="Invalid JSON response from server."}}b();if(!(200<=(n=_.status)&&n<300)){return o()}else{return e._finished(t,y,i)}}}(this);_.onerror=function(e){return function(){if(t[0].status===s.CANCELED){return}return o()}}(this);v=($=_.upload)!=null?$:_;v.onprogress=b;h={Accept:"application/json","Cache-Control":"no-cache","X-Requested-With":"XMLHttpRequest"};if(this.options.headers){i(h,this.options.headers)}for(a in h){l=h[a];if(l){_.setRequestHeader(a,l)}}r=new FormData;if(this.options.params){F=this.options.params;for(p in F){x=F[p];r.append(p,x)}}for(C=0,M=t.length;C<M;C++){e=t[C];this.emit("sending",e,_,r)}if(this.options.uploadMultiple){this.emit("sendingmultiple",t,_,r)}if(this.element.tagName==="FORM"){A=this.element.querySelectorAll("input, textarea, select, button");for(S=0,P=A.length;S<P;S++){u=A[S];d=u.getAttribute("name");f=u.getAttribute("type");if(u.tagName==="SELECT"&&u.hasAttribute("multiple")){H=u.options;for(T=0,I=H.length;T<I;T++){g=H[T];if(g.selected){r.append(d,g.value)}}}else if(!f||(L=f.toLowerCase())!=="checkbox"&&L!=="radio"||u.checked){r.append(d,u.value)}}}for(c=E=0,O=t.length-1;0<=O?E<=O:E>=O;c=0<=O?++E:--E){r.append(this._getParamName(c),t[c],this._renameFilename(t[c].name))}return this.submitRequest(_,r,t)};s.prototype.submitRequest=function(t,e,i){return t.send(e)};s.prototype._finished=function(t,e,i){var n,r,o;for(r=0,o=t.length;r<o;r++){n=t[r];n.status=s.SUCCESS;this.emit("success",n,e,i);this.emit("complete",n)}if(this.options.uploadMultiple){this.emit("successmultiple",t,e,i);this.emit("completemultiple",t)}if(this.options.autoProcessQueue){return this.processQueue()}};s.prototype._errorProcessing=function(t,e,i){var n,r,o;for(r=0,o=t.length;r<o;r++){n=t[r];n.status=s.ERROR;this.emit("error",n,e,i);this.emit("complete",n)}if(this.options.uploadMultiple){this.emit("errormultiple",t,e,i);this.emit("completemultiple",t)}if(this.options.autoProcessQueue){return this.processQueue()}};return s}(e);t.version="4.3.0";t.options={};t.optionsForElement=function(e){if(e.getAttribute("id")){return t.options[i(e.getAttribute("id"))]}else{return void 0}};t.instances=[];t.forElement=function(t){if(typeof t==="string"){t=document.querySelector(t)}if((t!=null?t.dropzone:void 0)==null){throw new Error("No Dropzone found for given element. This is probably because you're trying to access it before Dropzone had the time to initialize. Use the `init` option to setup any additional observers on your Dropzone.")}return t.dropzone};t.autoDiscover=true;t.discover=function(){var e,i,n,s,r,o;if(document.querySelectorAll){n=document.querySelectorAll(".dropzone")}else{n=[];e=function(t){var e,i,s,r;r=[];for(i=0,s=t.length;i<s;i++){e=t[i];if(/(^| )dropzone($| )/.test(e.className)){r.push(n.push(e))}else{r.push(void 0)}}return r};e(document.getElementsByTagName("div"));e(document.getElementsByTagName("form"))}o=[];for(s=0,r=n.length;s<r;s++){i=n[s];if(t.optionsForElement(i)!==false){o.push(new t(i))}else{o.push(void 0)}}return o};t.blacklistedBrowsers=[/opera.*Macintosh.*version\/12/i];t.isBrowserSupported=function(){var e,i,n,s,r;e=true;if(window.File&&window.FileReader&&window.FileList&&window.Blob&&window.FormData&&document.querySelector){if(!("classList"in document.createElement("a"))){e=false}else{r=t.blacklistedBrowsers;for(n=0,s=r.length;n<s;n++){i=r[n];if(i.test(navigator.userAgent)){e=false;continue}}}}else{e=false}return e};a=function(t,e){var i,n,s,r;r=[];for(n=0,s=t.length;n<s;n++){i=t[n];if(i!==e){r.push(i)}}return r};i=function(t){return t.replace(/[\-_](\w)/g,function(t){return t.charAt(1).toUpperCase()})};t.createElement=function(t){var e;e=document.createElement("div");e.innerHTML=t;return e.childNodes[0]};t.elementInside=function(t,e){if(t===e){return true}while(t=t.parentNode){if(t===e){return true}}return false};t.getElement=function(t,e){var i;if(typeof t==="string"){i=document.querySelector(t)}else if(t.nodeType!=null){i=t}if(i==null){throw new Error("Invalid `"+e+"` option provided. Please provide a CSS selector or a plain HTML element.")}return i};t.getElements=function(t,e){var i,n,s,r,o,a,l,h;if(t instanceof Array){s=[];try{for(r=0,a=t.length;r<a;r++){n=t[r];s.push(this.getElement(n,e))}}catch(t){i=t;s=null}}else if(typeof t==="string"){s=[];h=document.querySelectorAll(t);for(o=0,l=h.length;o<l;o++){n=h[o];s.push(n)}}else if(t.nodeType!=null){s=[t]}if(!(s!=null&&s.length)){throw new Error("Invalid `"+e+"` option provided. Please provide a CSS selector, a plain HTML element or a list of those.")}return s};t.confirm=function(t,e,i){if(window.confirm(t)){return e()}else if(i!=null){return i()}};t.isValidFile=function(t,e){var i,n,s,r,o;if(!e){return true}e=e.split(",");n=t.type;i=n.replace(/\/.*$/,"");for(r=0,o=e.length;r<o;r++){s=e[r];s=s.trim();if(s.charAt(0)==="."){if(t.name.toLowerCase().indexOf(s.toLowerCase(),t.name.length-s.length)!==-1){return true}}else if(/\/\*$/.test(s)){if(i===s.replace(/\/.*$/,"")){return true}}else{if(n===s){return true}}}return false};if(typeof jQuery!=="undefined"&&jQuery!==null){jQuery.fn.dropzone=function(e){return this.each(function(){return new t(this,e)})}}if(typeof module!=="undefined"&&module!==null){module.exports=t}else{window.Dropzone=t}t.ADDED="added";t.QUEUED="queued";t.ACCEPTED=t.QUEUED;t.UPLOADING="uploading";t.PROCESSING=t.UPLOADING;t.CANCELED="canceled";t.ERROR="error";t.SUCCESS="success";s=function(t){var e,i,n,s,r,o,a,l,h,c;a=t.naturalWidth;o=t.naturalHeight;i=document.createElement("canvas");i.width=1;i.height=o;n=i.getContext("2d");n.drawImage(t,0,0);s=n.getImageData(0,0,1,o).data;c=0;r=o;l=o;while(l>c){e=s[(l-1)*4+3];if(e===0){r=l}else{c=l}l=r+c>>1}h=l/o;if(h===0){return 1}else{return h}};r=function(t,e,i,n,r,o,a,l,h,c){var u;u=s(e);return t.drawImage(e,i,n,r,o,a,l,h,c/u)};n=function(t,e){var i,n,s,r,o,a,l,h,c;s=false;c=true;n=t.document;h=n.documentElement;i=n.addEventListener?"addEventListener":"attachEvent";l=n.addEventListener?"removeEventListener":"detachEvent";a=n.addEventListener?"":"on";r=function(i){if(i.type==="readystatechange"&&n.readyState!=="complete"){return}(i.type==="load"?t:n)[l](a+i.type,r,false);if(!s&&(s=true)){return e.call(t,i.type||i)}};o=function(){var t;try{h.doScroll("left")}catch(e){t=e;setTimeout(o,50);return}return r("poll")};if(n.readyState!=="complete"){if(n.createEventObject&&h.doScroll){try{c=!t.frameElement}catch(t){}if(c){o()}}n[i](a+"DOMContentLoaded",r,false);n[i](a+"readystatechange",r,false);return t[i](a+"load",r,false)}};t._autoDiscoverFunction=function(){if(t.autoDiscover){return t.discover()}};n(window,t._autoDiscoverFunction)}).call(this);(function(t,e,i){(function(t){typeof define=="function"&&define.amd?define(["jquery"],t):jQuery&&!jQuery.fn.sparkline&&t(jQuery)})(function(n){"use strict";var s={},r,o,a,l,h,c,u,d,f,p,m,g,v,y,b,w,x,_,k,C,S,T,D,M,P,I,E,$,F,A,H,L,O=0;r=function(){return{common:{type:"line",lineColor:"#00f",fillColor:"#cdf",defaultPixelsPerValue:3,width:"auto",height:"auto",composite:!1,tagValuesAttribute:"values",tagOptionsPrefix:"spark",enableTagOptions:!1,enableHighlight:!0,highlightLighten:1.4,tooltipSkipNull:!0,tooltipPrefix:"",tooltipSuffix:"",disableHiddenCheck:!1,numberFormatter:!1,numberDigitGroupCount:3,numberDigitGroupSep:",",numberDecimalMark:".",disableTooltips:!1,disableInteraction:!1},line:{spotColor:"#f80",highlightSpotColor:"#5f5",highlightLineColor:"#f22",spotRadius:1.5,minSpotColor:"#f80",maxSpotColor:"#f80",lineWidth:1,normalRangeMin:i,normalRangeMax:i,normalRangeColor:"#ccc",drawNormalOnTop:!1,chartRangeMin:i,chartRangeMax:i,chartRangeMinX:i,chartRangeMaxX:i,tooltipFormat:new a('<span style="color: {{color}}">&#9679;</span> {{prefix}}{{y}}{{suffix}}')},bar:{barColor:"#3366cc",negBarColor:"#f44",stackedBarColor:["#3366cc","#dc3912","#ff9900","#109618","#66aa00","#dd4477","#0099c6","#990099"],zeroColor:i,nullColor:i,zeroAxis:!0,barWidth:4,barSpacing:1,chartRangeMax:i,chartRangeMin:i,chartRangeClip:!1,colorMap:i,tooltipFormat:new a('<span style="color: {{color}}">&#9679;</span> {{prefix}}{{value}}{{suffix}}')},tristate:{barWidth:4,barSpacing:1,posBarColor:"#6f6",negBarColor:"#f44",zeroBarColor:"#999",colorMap:{},tooltipFormat:new a('<span style="color: {{color}}">&#9679;</span> {{value:map}}'),tooltipValueLookups:{map:{"-1":"Loss",0:"Draw",1:"Win"}}},discrete:{lineHeight:"auto",thresholdColor:i,thresholdValue:0,chartRangeMax:i,chartRangeMin:i,chartRangeClip:!1,tooltipFormat:new a("{{prefix}}{{value}}{{suffix}}")},bullet:{targetColor:"#f33",targetWidth:3,performanceColor:"#33f",rangeColors:["#d3dafe","#a8b6ff","#7f94ff"],base:i,tooltipFormat:new a("{{fieldkey:fields}} - {{value}}"),tooltipValueLookups:{fields:{r:"Range",p:"Performance",t:"Target"}}},pie:{offset:0,sliceColors:["#3366cc","#dc3912","#ff9900","#109618","#66aa00","#dd4477","#0099c6","#990099"],borderWidth:0,borderColor:"#000",tooltipFormat:new a('<span style="color: {{color}}">&#9679;</span> {{value}} ({{percent.1}}%)')},box:{raw:!1,boxLineColor:"#000",boxFillColor:"#cdf",whiskerColor:"#000",outlierLineColor:"#333",outlierFillColor:"#fff",medianColor:"#f00",showOutliers:!0,outlierIQR:1.5,spotRadius:1.5,target:i,targetColor:"#4a2",chartRangeMax:i,chartRangeMin:i,tooltipFormat:new a("{{field:fields}}: {{value}}"),tooltipFormatFieldlistKey:"field",tooltipValueLookups:{fields:{lq:"Lower Quartile",med:"Median",uq:"Upper Quartile",lo:"Left Outlier",ro:"Right Outlier",lw:"Left Whisker",rw:"Right Whisker"}}}}},I='.jqstooltip { position: absolute;left: 0px;top: 0px;visibility: hidden;background: rgb(0, 0, 0) transparent;background-color: rgba(0,0,0,0.6);filter:progid:DXImageTransform.Microsoft.gradient(startColorstr=#99000000, endColorstr=#99000000);-ms-filter: "progid:DXImageTransform.Microsoft.gradient(startColorstr=#99000000, endColorstr=#99000000)";color: white;font: 10px arial, san serif;text-align: left;white-space: nowrap;padding: 5px;border: 1px solid white;z-index: 10000;}.jqsfield { color: white;font: 10px arial, san serif;text-align: left;}',o=function(){var t,e;return t=function(){this.init.apply(this,arguments)},arguments.length>1?(arguments[0]?(t.prototype=n.extend(new arguments[0],arguments[arguments.length-1]),t._super=arguments[0].prototype):t.prototype=arguments[arguments.length-1],arguments.length>2&&(e=Array.prototype.slice.call(arguments,1,-1),e.unshift(t.prototype),n.extend.apply(n,e))):t.prototype=arguments[0],t.prototype.cls=t,t},n.SPFormatClass=a=o({fre:/\{\{([\w.]+?)(:(.+?))?\}\}/g,precre:/(\w+)\.(\d+)/,init:function(t,e){this.format=t,this.fclass=e},render:function(t,e,n){var s=this,r=t,o,a,l,h,c;return this.format.replace(this.fre,function(){var t;return a=arguments[1],l=arguments[3],o=s.precre.exec(a),o?(c=o[2],a=o[1]):c=!1,h=r[a],h===i?"":l&&e&&e[l]?(t=e[l],t.get?e[l].get(h)||h:e[l][h]||h):(f(h)&&(n.get("numberFormatter")?h=n.get("numberFormatter")(h):h=y(h,c,n.get("numberDigitGroupCount"),n.get("numberDigitGroupSep"),n.get("numberDecimalMark"))),h)})}}),n.spformat=function(t,e){return new a(t,e)},l=function(t,e,i){return t<e?e:t>i?i:t},h=function(t,i){var n;return i===2?(n=e.floor(t.length/2),t.length%2?t[n]:(t[n-1]+t[n])/2):t.length%2?(n=(t.length*i+i)/4,n%1?(t[e.floor(n)]+t[e.floor(n)-1])/2:t[n-1]):(n=(t.length*i+2)/4,n%1?(t[e.floor(n)]+t[e.floor(n)-1])/2:t[n-1])},c=function(t){var e;switch(t){case"undefined":t=i;break;case"null":t=null;break;case"true":t=!0;break;case"false":t=!1;break;default:e=parseFloat(t),t==e&&(t=e)}return t},u=function(t){var e,i=[];for(e=t.length;e--;)i[e]=c(t[e]);return i},d=function(t,e){var i,n,s=[];for(i=0,n=t.length;i<n;i++)t[i]!==e&&s.push(t[i]);return s},f=function(t){return!isNaN(parseFloat(t))&&isFinite(t)},y=function(t,e,i,s,r){var o,a;t=(e===!1?parseFloat(t).toString():t.toFixed(e)).split(""),o=(o=n.inArray(".",t))<0?t.length:o,o<t.length&&(t[o]=r);for(a=o-i;a>0;a-=i)t.splice(a,0,s);return t.join("")},p=function(t,e,i){var n;for(n=e.length;n--;){if(i&&e[n]===null)continue;if(e[n]!==t)return!1}return!0},m=function(t){var e=0,i;for(i=t.length;i--;)e+=typeof t[i]=="number"?t[i]:0;return e},v=function(t){return n.isArray(t)?t:[t]},g=function(e){var i;t.createStyleSheet?t.createStyleSheet().cssText=e:(i=t.createElement("style"),i.type="text/css",t.getElementsByTagName("head")[0].appendChild(i),i[typeof t.body.style.WebkitAppearance=="string"?"innerText":"innerHTML"]=e)},n.fn.simpledraw=function(e,s,r,o){var a,l;if(r&&(a=this.data("_jqs_vcanvas")))return a;if(n.fn.sparkline.canvas===!1)return!1;if(n.fn.sparkline.canvas===i){var h=t.createElement("canvas");if(!h.getContext||!h.getContext("2d")){if(!t.namespaces||!!t.namespaces.v)return n.fn.sparkline.canvas=!1,!1;t.namespaces.add("v","urn:schemas-microsoft-com:vml","#default#VML"),n.fn.sparkline.canvas=function(t,e,i,n){return new H(t,e,i)}}else n.fn.sparkline.canvas=function(t,e,i,n){return new A(t,e,i,n)}}return e===i&&(e=n(this).innerWidth()),s===i&&(s=n(this).innerHeight()),a=n.fn.sparkline.canvas(e,s,this,o),l=n(this).data("_jqs_mhandler"),l&&l.registerCanvas(a),a},n.fn.cleardraw=function(){var t=this.data("_jqs_vcanvas");t&&t.reset()},n.RangeMapClass=b=o({init:function(t){var e,i,n=[];for(e in t)t.hasOwnProperty(e)&&typeof e=="string"&&e.indexOf(":")>-1&&(i=e.split(":"),i[0]=i[0].length===0?-Infinity:parseFloat(i[0]),i[1]=i[1].length===0?Infinity:parseFloat(i[1]),i[2]=t[e],n.push(i));this.map=t,this.rangelist=n||!1},get:function(t){var e=this.rangelist,n,s,r;if((r=this.map[t])!==i)return r;if(e)for(n=e.length;n--;){s=e[n];if(s[0]<=t&&s[1]>=t)return s[2]}return i}}),n.range_map=function(t){return new b(t)},w=o({init:function(t,e){var i=n(t);this.$el=i,this.options=e,this.currentPageX=0,this.currentPageY=0,this.el=t,this.splist=[],this.tooltip=null,this.over=!1,this.displayTooltips=!e.get("disableTooltips"),this.highlightEnabled=!e.get("disableHighlight")},registerSparkline:function(t){this.splist.push(t),this.over&&this.updateDisplay()},registerCanvas:function(t){var e=n(t.canvas);this.canvas=t,this.$canvas=e,e.mouseenter(n.proxy(this.mouseenter,this)),e.mouseleave(n.proxy(this.mouseleave,this)),e.click(n.proxy(this.mouseclick,this))},reset:function(t){this.splist=[],this.tooltip&&t&&(this.tooltip.remove(),this.tooltip=i)},mouseclick:function(t){var e=n.Event("sparklineClick");e.originalEvent=t,e.sparklines=this.splist,this.$el.trigger(e)},mouseenter:function(e){n(t.body).unbind("mousemove.jqs"),n(t.body).bind("mousemove.jqs",n.proxy(this.mousemove,this)),this.over=!0,this.currentPageX=e.pageX,this.currentPageY=e.pageY,this.currentEl=e.target,!this.tooltip&&this.displayTooltips&&(this.tooltip=new x(this.options),this.tooltip.updatePosition(e.pageX,e.pageY)),this.updateDisplay()},mouseleave:function(){n(t.body).unbind("mousemove.jqs");var e=this.splist,i=e.length,s=!1,r,o;this.over=!1,this.currentEl=null,this.tooltip&&(this.tooltip.remove(),this.tooltip=null);for(o=0;o<i;o++)r=e[o],r.clearRegionHighlight()&&(s=!0);s&&this.canvas.render()},mousemove:function(t){this.currentPageX=t.pageX,this.currentPageY=t.pageY,this.currentEl=t.target,this.tooltip&&this.tooltip.updatePosition(t.pageX,t.pageY),this.updateDisplay()},updateDisplay:function(){var t=this.splist,e=t.length,i=!1,s=this.$canvas.offset(),r=this.currentPageX-s.left,o=this.currentPageY-s.top,a,l,h,c,u;if(!this.over)return;for(h=0;h<e;h++)l=t[h],c=l.setRegionHighlight(this.currentEl,r,o),c&&(i=!0);if(i){u=n.Event("sparklineRegionChange"),u.sparklines=this.splist,this.$el.trigger(u);if(this.tooltip){a="";for(h=0;h<e;h++)l=t[h],a+=l.getCurrentRegionTooltip();this.tooltip.setContent(a)}this.disableHighlight||this.canvas.render()}c===null&&this.mouseleave()}}),x=o({sizeStyle:"position: static !important;display: block !important;visibility: hidden !important;float: left !important;",init:function(e){var i=e.get("tooltipClassname","jqstooltip"),s=this.sizeStyle,r;this.container=e.get("tooltipContainer")||t.body,this.tooltipOffsetX=e.get("tooltipOffsetX",10),this.tooltipOffsetY=e.get("tooltipOffsetY",12),n("#jqssizetip").remove(),n("#jqstooltip").remove(),this.sizetip=n("<div/>",{id:"jqssizetip",style:s,class:i}),this.tooltip=n("<div/>",{id:"jqstooltip",class:i}).appendTo(this.container),r=this.tooltip.offset(),this.offsetLeft=r.left,this.offsetTop=r.top,this.hidden=!0,n(window).unbind("resize.jqs scroll.jqs"),n(window).bind("resize.jqs scroll.jqs",n.proxy(this.updateWindowDims,this)),this.updateWindowDims()},updateWindowDims:function(){this.scrollTop=n(window).scrollTop(),this.scrollLeft=n(window).scrollLeft(),this.scrollRight=this.scrollLeft+n(window).width(),this.updatePosition()},getSize:function(t){this.sizetip.html(t).appendTo(this.container),this.width=this.sizetip.width()+1,this.height=this.sizetip.height(),this.sizetip.remove()},setContent:function(t){if(!t){this.tooltip.css("visibility","hidden"),this.hidden=!0;return}this.getSize(t),this.tooltip.html(t).css({width:this.width,height:this.height,visibility:"visible"}),this.hidden&&(this.hidden=!1,this.updatePosition())},updatePosition:function(t,e){if(t===i){if(this.mousex===i)return;t=this.mousex-this.offsetLeft,e=this.mousey-this.offsetTop}else this.mousex=t-=this.offsetLeft,this.mousey=e-=this.offsetTop;if(!this.height||!this.width||this.hidden)return;e-=this.height+this.tooltipOffsetY,t+=this.tooltipOffsetX,e<this.scrollTop&&(e=this.scrollTop),t<this.scrollLeft?t=this.scrollLeft:t+this.width>this.scrollRight&&(t=this.scrollRight-this.width),this.tooltip.css({left:t,top:e})},remove:function(){this.tooltip.remove(),this.sizetip.remove(),this.sizetip=this.tooltip=i,n(window).unbind("resize.jqs scroll.jqs")}}),E=function(){g(I)},n(E),L=[],n.fn.sparkline=function(e,s){return this.each(function(){var r=new n.fn.sparkline.options(this,s),o=n(this),a,l;a=function(){var s,a,l,h,c,u,d;if(e==="html"||e===i){d=this.getAttribute(r.get("tagValuesAttribute"));if(d===i||d===null)d=o.html();s=d.replace(/(^\s*<!--)|(-->\s*$)|\s+/g,"").split(",")}else s=e;a=r.get("width")==="auto"?s.length*r.get("defaultPixelsPerValue"):r.get("width");if(r.get("height")==="auto"){if(!r.get("composite")||!n.data(this,"_jqs_vcanvas"))h=t.createElement("span"),h.innerHTML="a",o.html(h),l=n(h).innerHeight()||n(h).height(),n(h).remove(),h=null}else l=r.get("height");r.get("disableInteraction")?c=!1:(c=n.data(this,"_jqs_mhandler"),c?r.get("composite")||c.reset():(c=new w(this,r),n.data(this,"_jqs_mhandler",c)));if(r.get("composite")&&!n.data(this,"_jqs_vcanvas")){n.data(this,"_jqs_errnotify")||(alert("Attempted to attach a composite sparkline to an element with no existing sparkline"),n.data(this,"_jqs_errnotify",!0));return}u=new(n.fn.sparkline[r.get("type")])(this,s,r,a,l),u.render(),c&&c.registerSparkline(u)};if(n(this).html()&&!r.get("disableHiddenCheck")&&n(this).is(":hidden")||!n(this).parents("body").length){if(!r.get("composite")&&n.data(this,"_jqs_pending"))for(l=L.length;l;l--)L[l-1][0]==this&&L.splice(l-1,1);L.push([this,a]),n.data(this,"_jqs_pending",!0)}else a.call(this)})},n.fn.sparkline.defaults=r(),n.sparkline_display_visible=function(){var t,e,i,s=[];for(e=0,i=L.length;e<i;e++)t=L[e][0],n(t).is(":visible")&&!n(t).parents().is(":hidden")?(L[e][1].call(t),n.data(L[e][0],"_jqs_pending",!1),s.push(e)):!n(t).closest("html").length&&!n.data(t,"_jqs_pending")&&(n.data(L[e][0],"_jqs_pending",!1),s.push(e));for(e=s.length;e;e--)L.splice(s[e-1],1)},n.fn.sparkline.options=o({init:function(t,e){var i,r,o,a;this.userOptions=e=e||{},this.tag=t,this.tagValCache={},r=n.fn.sparkline.defaults,o=r.common,this.tagOptionsPrefix=e.enableTagOptions&&(e.tagOptionsPrefix||o.tagOptionsPrefix),a=this.getTagSetting("type"),a===s?i=r[e.type||o.type]:i=r[a],this.mergedOptions=n.extend({},o,i,e)},getTagSetting:function(t){var e=this.tagOptionsPrefix,n,r,o,a;if(e===!1||e===i)return s;if(this.tagValCache.hasOwnProperty(t))n=this.tagValCache.key;else{n=this.tag.getAttribute(e+t);if(n===i||n===null)n=s;else if(n.substr(0,1)==="["){n=n.substr(1,n.length-2).split(",");for(r=n.length;r--;)n[r]=c(n[r].replace(/(^\s*)|(\s*$)/g,""))}else if(n.substr(0,1)==="{"){o=n.substr(1,n.length-2).split(","),n={};for(r=o.length;r--;)a=o[r].split(":",2),n[a[0].replace(/(^\s*)|(\s*$)/g,"")]=c(a[1].replace(/(^\s*)|(\s*$)/g,""))}else n=c(n);this.tagValCache.key=n}return n},get:function(t,e){var n=this.getTagSetting(t),r;return n!==s?n:(r=this.mergedOptions[t])===i?e:r}}),n.fn.sparkline._base=o({disabled:!1,init:function(t,e,s,r,o){this.el=t,this.$el=n(t),this.values=e,this.options=s,this.width=r,this.height=o,this.currentRegion=i},initTarget:function(){var t=!this.options.get("disableInteraction");(this.target=this.$el.simpledraw(this.width,this.height,this.options.get("composite"),t))?(this.canvasWidth=this.target.pixelWidth,this.canvasHeight=this.target.pixelHeight):this.disabled=!0},render:function(){return this.disabled?(this.el.innerHTML="",!1):!0},getRegion:function(t,e){},setRegionHighlight:function(t,e,n){var s=this.currentRegion,r=!this.options.get("disableHighlight"),o;return e>this.canvasWidth||n>this.canvasHeight||e<0||n<0?null:(o=this.getRegion(t,e,n),s!==o?(s!==i&&r&&this.removeHighlight(),this.currentRegion=o,o!==i&&r&&this.renderHighlight(),!0):!1)},clearRegionHighlight:function(){return this.currentRegion!==i?(this.removeHighlight(),this.currentRegion=i,!0):!1},renderHighlight:function(){this.changeHighlight(!0)},removeHighlight:function(){this.changeHighlight(!1)},changeHighlight:function(t){},getCurrentRegionTooltip:function(){var t=this.options,e="",s=[],r,o,l,h,c,u,d,f,p,m,g,v,y,b;if(this.currentRegion===i)return"";r=this.getCurrentRegionFields(),g=t.get("tooltipFormatter");if(g)return g(this,t,r);t.get("tooltipChartTitle")&&(e+='<div class="jqs jqstitle">'+t.get("tooltipChartTitle")+"</div>\n"),o=this.options.get("tooltipFormat");if(!o)return"";n.isArray(o)||(o=[o]),n.isArray(r)||(r=[r]),d=this.options.get("tooltipFormatFieldlist"),f=this.options.get("tooltipFormatFieldlistKey");if(d&&f){p=[];for(u=r.length;u--;)m=r[u][f],(b=n.inArray(m,d))!=-1&&(p[b]=r[u]);r=p}l=o.length,y=r.length;for(u=0;u<l;u++){v=o[u],typeof v=="string"&&(v=new a(v)),h=v.fclass||"jqsfield";for(b=0;b<y;b++)if(!r[b].isNull||!t.get("tooltipSkipNull"))n.extend(r[b],{prefix:t.get("tooltipPrefix"),suffix:t.get("tooltipSuffix")}),c=v.render(r[b],t.get("tooltipValueLookups"),t),s.push('<div class="'+h+'">'+c+"</div>")}return s.length?e+s.join("\n"):""},getCurrentRegionFields:function(){},calcHighlightColor:function(t,i){var n=i.get("highlightColor"),s=i.get("highlightLighten"),r,o,a,h;if(n)return n;if(s){r=/^#([0-9a-f])([0-9a-f])([0-9a-f])$/i.exec(t)||/^#([0-9a-f]{2})([0-9a-f]{2})([0-9a-f]{2})$/i.exec(t);if(r){a=[],o=t.length===4?16:1;for(h=0;h<3;h++)a[h]=l(e.round(parseInt(r[h+1],16)*o*s),0,255);return"rgb("+a.join(",")+")"}}return t}}),_={changeHighlight:function(t){var e=this.currentRegion,i=this.target,s=this.regionShapes[e],r;s&&(r=this.renderRegion(e,t),n.isArray(r)||n.isArray(s)?(i.replaceWithShapes(s,r),this.regionShapes[e]=n.map(r,function(t){return t.id})):(i.replaceWithShape(s,r),this.regionShapes[e]=r.id))},render:function(){var t=this.values,e=this.target,i=this.regionShapes,s,r,o,a;if(!this.cls._super.render.call(this))return;for(o=t.length;o--;){s=this.renderRegion(o);if(s)if(n.isArray(s)){r=[];for(a=s.length;a--;)s[a].append(),r.push(s[a].id);i[o]=r}else s.append(),i[o]=s.id;else i[o]=null}e.render()}},n.fn.sparkline.line=k=o(n.fn.sparkline._base,{type:"line",init:function(t,e,i,n,s){k._super.init.call(this,t,e,i,n,s),this.vertices=[],this.regionMap=[],this.xvalues=[],this.yvalues=[],this.yminmax=[],this.hightlightSpotId=null,this.lastShapeId=null,this.initTarget()},getRegion:function(t,e,n){var s,r=this.regionMap;for(s=r.length;s--;)if(r[s]!==null&&e>=r[s][0]&&e<=r[s][1])return r[s][2];return i},getCurrentRegionFields:function(){var t=this.currentRegion;return{isNull:this.yvalues[t]===null,x:this.xvalues[t],y:this.yvalues[t],color:this.options.get("lineColor"),fillColor:this.options.get("fillColor"),offset:t}},renderHighlight:function(){var t=this.currentRegion,e=this.target,n=this.vertices[t],s=this.options,r=s.get("spotRadius"),o=s.get("highlightSpotColor"),a=s.get("highlightLineColor"),l,h;if(!n)return;r&&o&&(l=e.drawCircle(n[0],n[1],r,i,o),this.highlightSpotId=l.id,e.insertAfterShape(this.lastShapeId,l)),a&&(h=e.drawLine(n[0],this.canvasTop,n[0],this.canvasTop+this.canvasHeight,a),this.highlightLineId=h.id,e.insertAfterShape(this.lastShapeId,h))},removeHighlight:function(){var t=this.target;this.highlightSpotId&&(t.removeShapeId(this.highlightSpotId),this.highlightSpotId=null),this.highlightLineId&&(t.removeShapeId(this.highlightLineId),this.highlightLineId=null)},scanValues:function(){var t=this.values,i=t.length,n=this.xvalues,s=this.yvalues,r=this.yminmax,o,a,l,h,c;for(o=0;o<i;o++)a=t[o],l=typeof t[o]=="string",h=typeof t[o]=="object"&&t[o]instanceof Array,c=l&&t[o].split(":"),l&&c.length===2?(n.push(Number(c[0])),s.push(Number(c[1])),r.push(Number(c[1]))):h?(n.push(a[0]),s.push(a[1]),r.push(a[1])):(n.push(o),t[o]===null||t[o]==="null"?s.push(null):(s.push(Number(a)),r.push(Number(a))));this.options.get("xvalues")&&(n=this.options.get("xvalues")),this.maxy=this.maxyorg=e.max.apply(e,r),this.miny=this.minyorg=e.min.apply(e,r),this.maxx=e.max.apply(e,n),this.minx=e.min.apply(e,n),this.xvalues=n,this.yvalues=s,this.yminmax=r},processRangeOptions:function(){var t=this.options,e=t.get("normalRangeMin"),n=t.get("normalRangeMax");e!==i&&(e<this.miny&&(this.miny=e),n>this.maxy&&(this.maxy=n)),t.get("chartRangeMin")!==i&&(t.get("chartRangeClip")||t.get("chartRangeMin")<this.miny)&&(this.miny=t.get("chartRangeMin")),t.get("chartRangeMax")!==i&&(t.get("chartRangeClip")||t.get("chartRangeMax")>this.maxy)&&(this.maxy=t.get("chartRangeMax")),t.get("chartRangeMinX")!==i&&(t.get("chartRangeClipX")||t.get("chartRangeMinX")<this.minx)&&(this.minx=t.get("chartRangeMinX")),t.get("chartRangeMaxX")!==i&&(t.get("chartRangeClipX")||t.get("chartRangeMaxX")>this.maxx)&&(this.maxx=t.get("chartRangeMaxX"))},drawNormalRange:function(t,n,s,r,o){var a=this.options.get("normalRangeMin"),l=this.options.get("normalRangeMax"),h=n+e.round(s-s*((l-this.miny)/o)),c=e.round(s*(l-a)/o);this.target.drawRect(t,h,r,c,i,this.options.get("normalRangeColor")).append()},render:function(){var t=this.options,s=this.target,r=this.canvasWidth,o=this.canvasHeight,a=this.vertices,l=t.get("spotRadius"),h=this.regionMap,c,u,d,f,p,m,g,v,y,w,x,_,C,S,T,D,M,P,I,E,$,F,A,H,L;if(!k._super.render.call(this))return;this.scanValues(),this.processRangeOptions(),A=this.xvalues,H=this.yvalues;if(!this.yminmax.length||this.yvalues.length<2)return;f=p=0,c=this.maxx-this.minx===0?1:this.maxx-this.minx,u=this.maxy-this.miny===0?1:this.maxy-this.miny,d=this.yvalues.length-1,l&&(r<l*4||o<l*4)&&(l=0);if(l){$=t.get("highlightSpotColor")&&!t.get("disableInteraction");if($||t.get("minSpotColor")||t.get("spotColor")&&H[d]===this.miny)o-=e.ceil(l);if($||t.get("maxSpotColor")||t.get("spotColor")&&H[d]===this.maxy)o-=e.ceil(l),f+=e.ceil(l);if($||(t.get("minSpotColor")||t.get("maxSpotColor"))&&(H[0]===this.miny||H[0]===this.maxy))p+=e.ceil(l),r-=e.ceil(l);if($||t.get("spotColor")||t.get("minSpotColor")||t.get("maxSpotColor")&&(H[d]===this.miny||H[d]===this.maxy))r-=e.ceil(l)}o--,t.get("normalRangeMin")!==i&&!t.get("drawNormalOnTop")&&this.drawNormalRange(p,f,o,r,u),g=[],v=[g],S=T=null,D=H.length;for(L=0;L<D;L++)y=A[L],x=A[L+1],w=H[L],_=p+e.round((y-this.minx)*(r/c)),C=L<D-1?p+e.round((x-this.minx)*(r/c)):r,T=_+(C-_)/2,h[L]=[S||0,T,L],S=T,w===null?L&&(H[L-1]!==null&&(g=[],v.push(g)),a.push(null)):(w<this.miny&&(w=this.miny),w>this.maxy&&(w=this.maxy),g.length||g.push([_,f+o]),m=[_,f+e.round(o-o*((w-this.miny)/u))],g.push(m),a.push(m));M=[],P=[],I=v.length;for(L=0;L<I;L++)g=v[L],g.length&&(t.get("fillColor")&&(g.push([g[g.length-1][0],f+o]),P.push(g.slice(0)),g.pop()),g.length>2&&(g[0]=[g[0][0],g[1][1]]),M.push(g));I=P.length;for(L=0;L<I;L++)s.drawShape(P[L],t.get("fillColor"),t.get("fillColor")).append();t.get("normalRangeMin")!==i&&t.get("drawNormalOnTop")&&this.drawNormalRange(p,f,o,r,u),I=M.length;for(L=0;L<I;L++)s.drawShape(M[L],t.get("lineColor"),i,t.get("lineWidth")).append();if(l&&t.get("valueSpots")){E=t.get("valueSpots"),E.get===i&&(E=new b(E));for(L=0;L<D;L++)F=E.get(H[L]),F&&s.drawCircle(p+e.round((A[L]-this.minx)*(r/c)),f+e.round(o-o*((H[L]-this.miny)/u)),l,i,F).append()}l&&t.get("spotColor")&&H[d]!==null&&s.drawCircle(p+e.round((A[A.length-1]-this.minx)*(r/c)),f+e.round(o-o*((H[d]-this.miny)/u)),l,i,t.get("spotColor")).append(),this.maxy!==this.minyorg&&(l&&t.get("minSpotColor")&&(y=A[n.inArray(this.minyorg,H)],s.drawCircle(p+e.round((y-this.minx)*(r/c)),f+e.round(o-o*((this.minyorg-this.miny)/u)),l,i,t.get("minSpotColor")).append()),l&&t.get("maxSpotColor")&&(y=A[n.inArray(this.maxyorg,H)],s.drawCircle(p+e.round((y-this.minx)*(r/c)),f+e.round(o-o*((this.maxyorg-this.miny)/u)),l,i,t.get("maxSpotColor")).append())),this.lastShapeId=s.getLastShapeId(),this.canvasTop=f,s.render()}}),n.fn.sparkline.bar=C=o(n.fn.sparkline._base,_,{type:"bar",init:function(t,s,r,o,a){var h=parseInt(r.get("barWidth"),10),f=parseInt(r.get("barSpacing"),10),p=r.get("chartRangeMin"),m=r.get("chartRangeMax"),g=r.get("chartRangeClip"),v=Infinity,y=-Infinity,w,x,_,k,S,T,D,M,P,I,E,$,F,A,H,L,O,R,z,N,B,j,W;C._super.init.call(this,t,s,r,o,a);for(T=0,D=s.length;T<D;T++){N=s[T],w=typeof N=="string"&&N.indexOf(":")>-1;if(w||n.isArray(N))H=!0,w&&(N=s[T]=u(N.split(":"))),N=d(N,null),x=e.min.apply(e,N),_=e.max.apply(e,N),x<v&&(v=x),_>y&&(y=_)}this.stacked=H,this.regionShapes={},this.barWidth=h,this.barSpacing=f,this.totalBarWidth=h+f,this.width=o=s.length*h+(s.length-1)*f,this.initTarget(),g&&(F=p===i?-Infinity:p,A=m===i?Infinity:m),S=[],k=H?[]:S;var Y=[],U=[];for(T=0,D=s.length;T<D;T++)if(H){L=s[T],s[T]=z=[],Y[T]=0,k[T]=U[T]=0;for(O=0,R=L.length;O<R;O++)N=z[O]=g?l(L[O],F,A):L[O],N!==null&&(N>0&&(Y[T]+=N),v<0&&y>0?N<0?U[T]+=e.abs(N):k[T]+=N:k[T]+=e.abs(N-(N<0?y:v)),S.push(N))}else N=g?l(s[T],F,A):s[T],N=s[T]=c(N),N!==null&&S.push(N);this.max=$=e.max.apply(e,S),this.min=E=e.min.apply(e,S),this.stackMax=y=H?e.max.apply(e,Y):$,this.stackMin=v=H?e.min.apply(e,S):E,r.get("chartRangeMin")!==i&&(r.get("chartRangeClip")||r.get("chartRangeMin")<E)&&(E=r.get("chartRangeMin")),r.get("chartRangeMax")!==i&&(r.get("chartRangeClip")||r.get("chartRangeMax")>$)&&($=r.get("chartRangeMax")),this.zeroAxis=P=r.get("zeroAxis",!0),E<=0&&$>=0&&P?I=0:P==0?I=E:E>0?I=E:I=$,this.xaxisOffset=I,M=H?e.max.apply(e,k)+e.max.apply(e,U):$-E,this.canvasHeightEf=P&&E<0?this.canvasHeight-2:this.canvasHeight-1,E<I?(j=H&&$>=0?y:$,B=(j-I)/M*this.canvasHeight,B!==e.ceil(B)&&(this.canvasHeightEf-=2,B=e.ceil(B))):B=this.canvasHeight,this.yoffset=B,n.isArray(r.get("colorMap"))?(this.colorMapByIndex=r.get("colorMap"),this.colorMapByValue=null):(this.colorMapByIndex=null,this.colorMapByValue=r.get("colorMap"),this.colorMapByValue&&this.colorMapByValue.get===i&&(this.colorMapByValue=new b(this.colorMapByValue))),this.range=M},getRegion:function(t,n,s){var r=e.floor(n/this.totalBarWidth);return r<0||r>=this.values.length?i:r},getCurrentRegionFields:function(){var t=this.currentRegion,e=v(this.values[t]),i=[],n,s;for(s=e.length;s--;)n=e[s],i.push({isNull:n===null,value:n,color:this.calcColor(s,n,t),offset:t});return i},calcColor:function(t,e,s){var r=this.colorMapByIndex,o=this.colorMapByValue,a=this.options,l,h;return this.stacked?l=a.get("stackedBarColor"):l=e<0?a.get("negBarColor"):a.get("barColor"),e===0&&a.get("zeroColor")!==i&&(l=a.get("zeroColor")),o&&(h=o.get(e))?l=h:r&&r.length>s&&(l=r[s]),n.isArray(l)?l[t%l.length]:l},renderRegion:function(t,s){var r=this.values[t],o=this.options,a=this.xaxisOffset,l=[],h=this.range,c=this.stacked,u=this.target,d=t*this.totalBarWidth,f=this.canvasHeightEf,m=this.yoffset,g,v,y,b,w,x,_,k,C,S;r=n.isArray(r)?r:[r],_=r.length,k=r[0],b=p(null,r),S=p(a,r,!0);if(b)return o.get("nullColor")?(y=s?o.get("nullColor"):this.calcHighlightColor(o.get("nullColor"),o),g=m>0?m-1:m,u.drawRect(d,g,this.barWidth-1,0,y,y)):i;w=m;for(x=0;x<_;x++){k=r[x];if(c&&k===a){if(!S||C)continue;C=!0}h>0?v=e.floor(f*(e.abs(k-a)/h))+1:v=1,k<a||k===a&&m===0?(g=w,w+=v):(g=m-v,m-=v),y=this.calcColor(x,k,t),s&&(y=this.calcHighlightColor(y,o)),l.push(u.drawRect(d,g,this.barWidth-1,v-1,y,y))}return l.length===1?l[0]:l}}),n.fn.sparkline.tristate=S=o(n.fn.sparkline._base,_,{type:"tristate",init:function(t,e,s,r,o){var a=parseInt(s.get("barWidth"),10),l=parseInt(s.get("barSpacing"),10);S._super.init.call(this,t,e,s,r,o),this.regionShapes={},this.barWidth=a,this.barSpacing=l,this.totalBarWidth=a+l,this.values=n.map(e,Number),this.width=r=e.length*a+(e.length-1)*l,n.isArray(s.get("colorMap"))?(this.colorMapByIndex=s.get("colorMap"),this.colorMapByValue=null):(this.colorMapByIndex=null,this.colorMapByValue=s.get("colorMap"),this.colorMapByValue&&this.colorMapByValue.get===i&&(this.colorMapByValue=new b(this.colorMapByValue))),this.initTarget()},getRegion:function(t,i,n){return e.floor(i/this.totalBarWidth)},getCurrentRegionFields:function(){var t=this.currentRegion;return{isNull:this.values[t]===i,value:this.values[t],color:this.calcColor(this.values[t],t),offset:t}},calcColor:function(t,e){var i=this.values,n=this.options,s=this.colorMapByIndex,r=this.colorMapByValue,o,a;return r&&(a=r.get(t))?o=a:s&&s.length>e?o=s[e]:i[e]<0?o=n.get("negBarColor"):i[e]>0?o=n.get("posBarColor"):o=n.get("zeroBarColor"),o},renderRegion:function(t,i){var n=this.values,s=this.options,r=this.target,o,a,l,h,c,u;o=r.pixelHeight,l=e.round(o/2),h=t*this.totalBarWidth,n[t]<0?(c=l,a=l-1):n[t]>0?(c=0,a=l-1):(c=l-1,a=2),u=this.calcColor(n[t],t);if(u===null)return;return i&&(u=this.calcHighlightColor(u,s)),r.drawRect(h,c,this.barWidth-1,a-1,u,u)}}),n.fn.sparkline.discrete=T=o(n.fn.sparkline._base,_,{type:"discrete",init:function(t,s,r,o,a){T._super.init.call(this,t,s,r,o,a),this.regionShapes={},this.values=s=n.map(s,Number),this.min=e.min.apply(e,s),this.max=e.max.apply(e,s),this.range=this.max-this.min,this.width=o=r.get("width")==="auto"?s.length*2:this.width,this.interval=e.floor(o/s.length),this.itemWidth=o/s.length,r.get("chartRangeMin")!==i&&(r.get("chartRangeClip")||r.get("chartRangeMin")<this.min)&&(this.min=r.get("chartRangeMin")),r.get("chartRangeMax")!==i&&(r.get("chartRangeClip")||r.get("chartRangeMax")>this.max)&&(this.max=r.get("chartRangeMax")),this.initTarget(),this.target&&(this.lineHeight=r.get("lineHeight")==="auto"?e.round(this.canvasHeight*.3):r.get("lineHeight"))},getRegion:function(t,i,n){return e.floor(i/this.itemWidth)},getCurrentRegionFields:function(){var t=this.currentRegion;return{isNull:this.values[t]===i,value:this.values[t],offset:t}},renderRegion:function(t,i){var n=this.values,s=this.options,r=this.min,o=this.max,a=this.range,h=this.interval,c=this.target,u=this.canvasHeight,d=this.lineHeight,f=u-d,p,m,g,v;return m=l(n[t],r,o),v=t*h,p=e.round(f-f*((m-r)/a)),g=s.get("thresholdColor")&&m<s.get("thresholdValue")?s.get("thresholdColor"):s.get("lineColor"),i&&(g=this.calcHighlightColor(g,s)),c.drawLine(v,p,v,p+d,g)}}),n.fn.sparkline.bullet=D=o(n.fn.sparkline._base,{type:"bullet",init:function(t,n,s,r,o){var a,l,h;D._super.init.call(this,t,n,s,r,o),this.values=n=u(n),h=n.slice(),h[0]=h[0]===null?h[2]:h[0],h[1]=n[1]===null?h[2]:h[1],a=e.min.apply(e,n),l=e.max.apply(e,n),s.get("base")===i?a=a<0?a:0:a=s.get("base"),this.min=a,this.max=l,this.range=l-a,this.shapes={},this.valueShapes={},this.regiondata={},this.width=r=s.get("width")==="auto"?"4.0em":r,this.target=this.$el.simpledraw(r,o,s.get("composite")),n.length||(this.disabled=!0),this.initTarget()},getRegion:function(t,e,n){var s=this.target.getShapeAt(t,e,n);return s!==i&&this.shapes[s]!==i?this.shapes[s]:i},getCurrentRegionFields:function(){var t=this.currentRegion;return{fieldkey:t.substr(0,1),value:this.values[t.substr(1)],region:t}},changeHighlight:function(t){var e=this.currentRegion,i=this.valueShapes[e],n;delete this.shapes[i];switch(e.substr(0,1)){case"r":n=this.renderRange(e.substr(1),t);break;case"p":n=this.renderPerformance(t);break;case"t":n=this.renderTarget(t)}this.valueShapes[e]=n.id,this.shapes[n.id]=e,this.target.replaceWithShape(i,n)},renderRange:function(t,i){var n=this.values[t],s=e.round(this.canvasWidth*((n-this.min)/this.range)),r=this.options.get("rangeColors")[t-2];return i&&(r=this.calcHighlightColor(r,this.options)),this.target.drawRect(0,0,s-1,this.canvasHeight-1,r,r)},renderPerformance:function(t){var i=this.values[1],n=e.round(this.canvasWidth*((i-this.min)/this.range)),s=this.options.get("performanceColor");return t&&(s=this.calcHighlightColor(s,this.options)),this.target.drawRect(0,e.round(this.canvasHeight*.3),n-1,e.round(this.canvasHeight*.4)-1,s,s)},renderTarget:function(t){var i=this.values[0],n=e.round(this.canvasWidth*((i-this.min)/this.range)-this.options.get("targetWidth")/2),s=e.round(this.canvasHeight*.1),r=this.canvasHeight-s*2,o=this.options.get("targetColor");return t&&(o=this.calcHighlightColor(o,this.options)),this.target.drawRect(n,s,this.options.get("targetWidth")-1,r-1,o,o)},render:function(){var t=this.values.length,e=this.target,i,n;if(!D._super.render.call(this))return;for(i=2;i<t;i++)n=this.renderRange(i).append(),this.shapes[n.id]="r"+i,this.valueShapes["r"+i]=n.id;this.values[1]!==null&&(n=this.renderPerformance().append(),this.shapes[n.id]="p1",this.valueShapes.p1=n.id),this.values[0]!==null&&(n=this.renderTarget().append(),this.shapes[n.id]="t0",this.valueShapes.t0=n.id),e.render()}}),n.fn.sparkline.pie=M=o(n.fn.sparkline._base,{type:"pie",init:function(t,i,s,r,o){var a=0,l;M._super.init.call(this,t,i,s,r,o),this.shapes={},this.valueShapes={},this.values=i=n.map(i,Number),s.get("width")==="auto"&&(this.width=this.height);if(i.length>0)for(l=i.length;l--;)a+=i[l];this.total=a,this.initTarget(),this.radius=e.floor(e.min(this.canvasWidth,this.canvasHeight)/2)},getRegion:function(t,e,n){var s=this.target.getShapeAt(t,e,n);return s!==i&&this.shapes[s]!==i?this.shapes[s]:i},getCurrentRegionFields:function(){var t=this.currentRegion;return{isNull:this.values[t]===i,value:this.values[t],percent:this.values[t]/this.total*100,color:this.options.get("sliceColors")[t%this.options.get("sliceColors").length],offset:t}},changeHighlight:function(t){var e=this.currentRegion,i=this.renderSlice(e,t),n=this.valueShapes[e];delete this.shapes[n],this.target.replaceWithShape(n,i),this.valueShapes[e]=i.id,this.shapes[i.id]=e},renderSlice:function(t,n){var s=this.target,r=this.options,o=this.radius,a=r.get("borderWidth"),l=r.get("offset"),h=2*e.PI,c=this.values,u=this.total,d=l?2*e.PI*(l/360):0,f,p,m,g,v;g=c.length;for(m=0;m<g;m++){f=d,p=d,u>0&&(p=d+h*(c[m]/u));if(t===m)return v=r.get("sliceColors")[m%r.get("sliceColors").length],n&&(v=this.calcHighlightColor(v,r)),s.drawPieSlice(o,o,o-a,f,p,i,v);d=p}},render:function(){var t=this.target,n=this.values,s=this.options,r=this.radius,o=s.get("borderWidth"),a,l;if(!M._super.render.call(this))return;o&&t.drawCircle(r,r,e.floor(r-o/2),s.get("borderColor"),i,o).append();for(l=n.length;l--;)n[l]&&(a=this.renderSlice(l).append(),this.valueShapes[l]=a.id,this.shapes[a.id]=l);t.render()}}),n.fn.sparkline.box=P=o(n.fn.sparkline._base,{type:"box",init:function(t,e,i,s,r){P._super.init.call(this,t,e,i,s,r),this.values=n.map(e,Number),this.width=i.get("width")==="auto"?"4.0em":s,this.initTarget(),this.values.length||(this.disabled=1)},getRegion:function(){return 1},getCurrentRegionFields:function(){var t=[{field:"lq",value:this.quartiles[0]},{field:"med",value:this.quartiles[1]},{field:"uq",value:this.quartiles[2]}];return this.loutlier!==i&&t.push({field:"lo",value:this.loutlier}),this.routlier!==i&&t.push({field:"ro",value:this.routlier}),this.lwhisker!==i&&t.push({field:"lw",value:this.lwhisker}),this.rwhisker!==i&&t.push({field:"rw",value:this.rwhisker}),t},render:function(){var t=this.target,n=this.values,s=n.length,r=this.options,o=this.canvasWidth,a=this.canvasHeight,l=r.get("chartRangeMin")===i?e.min.apply(e,n):r.get("chartRangeMin"),c=r.get("chartRangeMax")===i?e.max.apply(e,n):r.get("chartRangeMax"),u=0,d,f,p,m,g,v,y,b,w,x,_;if(!P._super.render.call(this))return;if(r.get("raw"))r.get("showOutliers")&&n.length>5?(f=n[0],d=n[1],m=n[2],g=n[3],v=n[4],y=n[5],b=n[6]):(d=n[0],m=n[1],g=n[2],v=n[3],y=n[4]);else{n.sort(function(t,e){return t-e}),m=h(n,1),g=h(n,2),v=h(n,3),p=v-m;if(r.get("showOutliers")){d=y=i;for(w=0;w<s;w++)d===i&&n[w]>m-p*r.get("outlierIQR")&&(d=n[w]),n[w]<v+p*r.get("outlierIQR")&&(y=n[w]);f=n[0],b=n[s-1]}else d=n[0],y=n[s-1]}this.quartiles=[m,g,v],this.lwhisker=d,this.rwhisker=y,this.loutlier=f,this.routlier=b,_=o/(c-l+1),r.get("showOutliers")&&(u=e.ceil(r.get("spotRadius")),o-=2*e.ceil(r.get("spotRadius")),_=o/(c-l+1),f<d&&t.drawCircle((f-l)*_+u,a/2,r.get("spotRadius"),r.get("outlierLineColor"),r.get("outlierFillColor")).append(),b>y&&t.drawCircle((b-l)*_+u,a/2,r.get("spotRadius"),r.get("outlierLineColor"),r.get("outlierFillColor")).append()),t.drawRect(e.round((m-l)*_+u),e.round(a*.1),e.round((v-m)*_),e.round(a*.8),r.get("boxLineColor"),r.get("boxFillColor")).append(),t.drawLine(e.round((d-l)*_+u),e.round(a/2),e.round((m-l)*_+u),e.round(a/2),r.get("lineColor")).append(),t.drawLine(e.round((d-l)*_+u),e.round(a/4),e.round((d-l)*_+u),e.round(a-a/4),r.get("whiskerColor")).append(),t.drawLine(e.round((y-l)*_+u),e.round(a/2),e.round((v-l)*_+u),e.round(a/2),r.get("lineColor")).append(),t.drawLine(e.round((y-l)*_+u),e.round(a/4),e.round((y-l)*_+u),e.round(a-a/4),r.get("whiskerColor")).append(),t.drawLine(e.round((g-l)*_+u),e.round(a*.1),e.round((g-l)*_+u),e.round(a*.9),r.get("medianColor")).append(),r.get("target")&&(x=e.ceil(r.get("spotRadius")),t.drawLine(e.round((r.get("target")-l)*_+u),e.round(a/2-x),e.round((r.get("target")-l)*_+u),e.round(a/2+x),r.get("targetColor")).append(),t.drawLine(e.round((r.get("target")-l)*_+u-x),e.round(a/2),e.round((r.get("target")-l)*_+u+x),e.round(a/2),r.get("targetColor")).append()),t.render()}}),$=o({init:function(t,e,i,n){this.target=t,this.id=e,this.type=i,this.args=n},append:function(){return this.target.appendShape(this),this}}),F=o({_pxregex:/(\d+)(px)?\s*$/i,init:function(t,e,i){if(!t)return;this.width=t,this.height=e,this.target=i,this.lastShapeId=null,i[0]&&(i=i[0]),n.data(i,"_jqs_vcanvas",this)},drawLine:function(t,e,i,n,s,r){return this.drawShape([[t,e],[i,n]],s,r)},drawShape:function(t,e,i,n){return this._genShape("Shape",[t,e,i,n])},drawCircle:function(t,e,i,n,s,r){return this._genShape("Circle",[t,e,i,n,s,r])},drawPieSlice:function(t,e,i,n,s,r,o){return this._genShape("PieSlice",[t,e,i,n,s,r,o])},drawRect:function(t,e,i,n,s,r){return this._genShape("Rect",[t,e,i,n,s,r])},getElement:function(){return this.canvas},getLastShapeId:function(){return this.lastShapeId},reset:function(){alert("reset not implemented")},_insert:function(t,e){n(e).html(t)},_calculatePixelDims:function(t,e,i){var s;s=this._pxregex.exec(e),s?this.pixelHeight=s[1]:this.pixelHeight=n(i).height(),s=this._pxregex.exec(t),s?this.pixelWidth=s[1]:this.pixelWidth=n(i).width()},_genShape:function(t,e){var i=O++;return e.unshift(i),new $(this,i,t,e)},appendShape:function(t){alert("appendShape not implemented")},replaceWithShape:function(t,e){alert("replaceWithShape not implemented")},insertAfterShape:function(t,e){alert("insertAfterShape not implemented")},removeShapeId:function(t){alert("removeShapeId not implemented")},getShapeAt:function(t,e,i){alert("getShapeAt not implemented")},render:function(){alert("render not implemented")}}),A=o(F,{init:function(e,s,r,o){A._super.init.call(this,e,s,r),this.canvas=t.createElement("canvas"),r[0]&&(r=r[0]),n.data(r,"_jqs_vcanvas",this),n(this.canvas).css({display:"inline-block",width:e,height:s,verticalAlign:"top"}),this._insert(this.canvas,r),this._calculatePixelDims(e,s,this.canvas),this.canvas.width=this.pixelWidth,this.canvas.height=this.pixelHeight,this.interact=o,this.shapes={},this.shapeseq=[],this.currentTargetShapeId=i,n(this.canvas).css({width:this.pixelWidth,height:this.pixelHeight})},_getContext:function(t,e,n){var s=this.canvas.getContext("2d");return t!==i&&(s.strokeStyle=t),s.lineWidth=n===i?1:n,e!==i&&(s.fillStyle=e),s},reset:function(){var t=this._getContext();t.clearRect(0,0,this.pixelWidth,this.pixelHeight),this.shapes={},this.shapeseq=[],this.currentTargetShapeId=i},_drawShape:function(t,e,n,s,r){var o=this._getContext(n,s,r),a,l;o.beginPath(),o.moveTo(e[0][0]+.5,e[0][1]+.5);for(a=1,l=e.length;a<l;a++)o.lineTo(e[a][0]+.5,e[a][1]+.5);n!==i&&o.stroke(),s!==i&&o.fill(),this.targetX!==i&&this.targetY!==i&&o.isPointInPath(this.targetX,this.targetY)&&(this.currentTargetShapeId=t)},_drawCircle:function(t,n,s,r,o,a,l){var h=this._getContext(o,a,l);h.beginPath(),h.arc(n,s,r,0,2*e.PI,!1),this.targetX!==i&&this.targetY!==i&&h.isPointInPath(this.targetX,this.targetY)&&(this.currentTargetShapeId=t),o!==i&&h.stroke(),a!==i&&h.fill()},_drawPieSlice:function(t,e,n,s,r,o,a,l){var h=this._getContext(a,l);h.beginPath(),h.moveTo(e,n),h.arc(e,n,s,r,o,!1),h.lineTo(e,n),h.closePath(),a!==i&&h.stroke(),l&&h.fill(),this.targetX!==i&&this.targetY!==i&&h.isPointInPath(this.targetX,this.targetY)&&(this.currentTargetShapeId=t)},_drawRect:function(t,e,i,n,s,r,o){return this._drawShape(t,[[e,i],[e+n,i],[e+n,i+s],[e,i+s],[e,i]],r,o)},appendShape:function(t){return this.shapes[t.id]=t,this.shapeseq.push(t.id),this.lastShapeId=t.id,t.id},replaceWithShape:function(t,e){var i=this.shapeseq,n;this.shapes[e.id]=e;for(n=i.length;n--;)i[n]==t&&(i[n]=e.id);delete this.shapes[t]},replaceWithShapes:function(t,e){var i=this.shapeseq,n={},s,r,o;for(r=t.length;r--;)n[t[r]]=!0;for(r=i.length;r--;)s=i[r],n[s]&&(i.splice(r,1),delete this.shapes[s],o=r);for(r=e.length;r--;)i.splice(o,0,e[r].id),this.shapes[e[r].id]=e[r]},insertAfterShape:function(t,e){var i=this.shapeseq,n;for(n=i.length;n--;)if(i[n]===t){i.splice(n+1,0,e.id),this.shapes[e.id]=e;return}},removeShapeId:function(t){var e=this.shapeseq,i;for(i=e.length;i--;)if(e[i]===t){e.splice(i,1);break}delete this.shapes[t]},getShapeAt:function(t,e,i){return this.targetX=e,this.targetY=i,this.render(),this.currentTargetShapeId},render:function(){var t=this.shapeseq,e=this.shapes,i=t.length,n=this._getContext(),s,r,o;n.clearRect(0,0,this.pixelWidth,this.pixelHeight);for(o=0;o<i;o++)s=t[o],r=e[s],this["_draw"+r.type].apply(this,r.args);this.interact||(this.shapes={},this.shapeseq=[])}}),H=o(F,{init:function(e,i,s){var r;H._super.init.call(this,e,i,s),s[0]&&(s=s[0]),n.data(s,"_jqs_vcanvas",this),this.canvas=t.createElement("span"),n(this.canvas).css({display:"inline-block",position:"relative",overflow:"hidden",width:e,height:i,margin:"0px",padding:"0px",verticalAlign:"top"}),this._insert(this.canvas,s),this._calculatePixelDims(e,i,this.canvas),this.canvas.width=this.pixelWidth,this.canvas.height=this.pixelHeight,r='<v:group coordorigin="0 0" coordsize="'+this.pixelWidth+" "+this.pixelHeight+'"'+' style="position:absolute;top:0;left:0;width:'+this.pixelWidth+"px;height="+this.pixelHeight+'px;"></v:group>',this.canvas.insertAdjacentHTML("beforeEnd",r),this.group=n(this.canvas).children()[0],this.rendered=!1,this.prerender=""},_drawShape:function(t,e,n,s,r){var o=[],a,l,h,c,u,d,f;for(f=0,d=e.length;f<d;f++)o[f]=""+e[f][0]+","+e[f][1];return a=o.splice(0,1),r=r===i?1:r,l=n===i?' stroked="false" ':' strokeWeight="'+r+'px" strokeColor="'+n+'" ',h=s===i?' filled="false"':' fillColor="'+s+'" filled="true" ',c=o[0]===o[o.length-1]?"x ":"",u='<v:shape coordorigin="0 0" coordsize="'+this.pixelWidth+" "+this.pixelHeight+'" '+' id="jqsshape'+t+'" '+l+h+' style="position:absolute;left:0px;top:0px;height:'+this.pixelHeight+"px;width:"+this.pixelWidth+'px;padding:0px;margin:0px;" '+' path="m '+a+" l "+o.join(", ")+" "+c+'e">'+" </v:shape>",u},_drawCircle:function(t,e,n,s,r,o,a){var l,h,c;return e-=s,n-=s,l=r===i?' stroked="false" ':' strokeWeight="'+a+'px" strokeColor="'+r+'" ',h=o===i?' filled="false"':' fillColor="'+o+'" filled="true" ',c='<v:oval  id="jqsshape'+t+'" '+l+h+' style="position:absolute;top:'+n+"px; left:"+e+"px; width:"+s*2+"px; height:"+s*2+'px"></v:oval>',c},_drawPieSlice:function(t,n,s,r,o,a,l,h){var c,u,d,f,p,m,g,v;if(o===a)return"";a-o===2*e.PI&&(o=0,a=2*e.PI),u=n+e.round(e.cos(o)*r),d=s+e.round(e.sin(o)*r),f=n+e.round(e.cos(a)*r),p=s+e.round(e.sin(a)*r);if(u===f&&d===p){if(a-o<e.PI)return"";u=f=n+r,d=p=s}return u===f&&d===p&&a-o<e.PI?"":(c=[n-r,s-r,n+r,s+r,u,d,f,p],m=l===i?' stroked="false" ':' strokeWeight="1px" strokeColor="'+l+'" ',g=h===i?' filled="false"':' fillColor="'+h+'" filled="true" ',v='<v:shape coordorigin="0 0" coordsize="'+this.pixelWidth+" "+this.pixelHeight+'" '+' id="jqsshape'+t+'" '+m+g+' style="position:absolute;left:0px;top:0px;height:'+this.pixelHeight+"px;width:"+this.pixelWidth+'px;padding:0px;margin:0px;" '+' path="m '+n+","+s+" wa "+c.join(", ")+' x e">'+" </v:shape>",v)},_drawRect:function(t,e,i,n,s,r,o){return this._drawShape(t,[[e,i],[e,i+s],[e+n,i+s],[e+n,i],[e,i]],r,o)},reset:function(){this.group.innerHTML=""},appendShape:function(t){var e=this["_draw"+t.type].apply(this,t.args);return this.rendered?this.group.insertAdjacentHTML("beforeEnd",e):this.prerender+=e,this.lastShapeId=t.id,t.id},replaceWithShape:function(t,e){var i=n("#jqsshape"+t),s=this["_draw"+e.type].apply(this,e.args);i[0].outerHTML=s},replaceWithShapes:function(t,e){var i=n("#jqsshape"+t[0]),s="",r=e.length,o;for(o=0;o<r;o++)s+=this["_draw"+e[o].type].apply(this,e[o].args);i[0].outerHTML=s;for(o=1;o<t.length;o++)n("#jqsshape"+t[o]).remove()},insertAfterShape:function(t,e){var i=n("#jqsshape"+t),s=this["_draw"+e.type].apply(this,e.args);i[0].insertAdjacentHTML("afterEnd",s)},removeShapeId:function(t){var e=n("#jqsshape"+t);this.group.removeChild(e[0])},getShapeAt:function(t,e,i){var n=t.id.substr(8);return n},render:function(){this.rendered||(this.group.innerHTML=this.prerender,this.rendered=!0)}})})})(document,Math);!function(t,e,i){"use strict";!function t(e,i,n){function s(o,a){if(!i[o]){if(!e[o]){var l="function"==typeof require&&require;if(!a&&l)return l(o,!0);if(r)return r(o,!0);var h=new Error("Cannot find module '"+o+"'");throw h.code="MODULE_NOT_FOUND",h}var c=i[o]={exports:{}};e[o][0].call(c.exports,function(t){var i=e[o][1][t];return s(i?i:t)},c,c.exports,t,e,i,n)}return i[o].exports}for(var r="function"==typeof require&&require,o=0;o<n.length;o++)s(n[o]);return s}({1:[function(n){var s,r,o,a,l=function(t){return t&&t.__esModule?t:{default:t}},h=n("./modules/handle-dom"),c=n("./modules/utils"),u=n("./modules/handle-swal-dom"),d=n("./modules/handle-click"),f=n("./modules/handle-key"),p=l(f),m=n("./modules/default-params"),g=l(m),v=n("./modules/set-params"),y=l(v);o=a=function(){function n(t){var e=o;return e[t]===i?g["default"][t]:e[t]}var o=arguments[0];if(h.addClass(e.body,"stop-scrolling"),u.resetInput(),o===i)return c.logStr("SweetAlert expects at least 1 attribute!"),!1;var a=c.extend({},g["default"]);switch(typeof o){case"string":a.title=o,a.text=arguments[1]||"",a.type=arguments[2]||"";break;case"object":if(o.title===i)return c.logStr('Missing "title" argument!'),!1;a.title=o.title;for(var l in g["default"])a[l]=n(l);a.confirmButtonText=a.showCancelButton?"Confirm":g["default"].confirmButtonText,a.confirmButtonText=n("confirmButtonText"),a.doneFunction=arguments[1]||null;break;default:return c.logStr('Unexpected type of argument! Expected "string" or "object", got '+typeof o),!1}y["default"](a),u.fixVerticalPosition(),u.openModal(arguments[1]);for(var f=u.getModal(),m=f.querySelectorAll("button"),v=["onclick","onmouseover","onmouseout","onmousedown","onmouseup","onfocus"],b=function(t){return d.handleButton(t,a,f)},w=0;w<m.length;w++)for(var x=0;x<v.length;x++){var _=v[x];m[w][_]=b}u.getOverlay().onclick=b,s=t.onkeydown;var k=function(t){return p["default"](t,a,f)};t.onkeydown=k,t.onfocus=function(){setTimeout(function(){r!==i&&(r.focus(),r=i)},0)}},o.setDefaults=a.setDefaults=function(t){if(!t)throw new Error("userParams is required");if("object"!=typeof t)throw new Error("userParams has to be a object");c.extend(g["default"],t)},o.close=a.close=function(){var n=u.getModal();h.fadeOut(u.getOverlay(),5),h.fadeOut(n,5),h.removeClass(n,"showSweetAlert"),h.addClass(n,"hideSweetAlert"),h.removeClass(n,"visible");var o=n.querySelector(".sa-icon.sa-success");h.removeClass(o,"animate"),h.removeClass(o.querySelector(".sa-tip"),"animateSuccessTip"),h.removeClass(o.querySelector(".sa-long"),"animateSuccessLong");var a=n.querySelector(".sa-icon.sa-error");h.removeClass(a,"animateErrorIcon"),h.removeClass(a.querySelector(".sa-x-mark"),"animateXMark");var l=n.querySelector(".sa-icon.sa-warning");return h.removeClass(l,"pulseWarning"),h.removeClass(l.querySelector(".sa-body"),"pulseWarningIns"),h.removeClass(l.querySelector(".sa-dot"),"pulseWarningIns"),setTimeout(function(){var t=n.getAttribute("data-custom-class");h.removeClass(n,t)},300),h.removeClass(e.body,"stop-scrolling"),t.onkeydown=s,t.previousActiveElement&&t.previousActiveElement.focus(),r=i,clearTimeout(n.timeout),!0},o.showInputError=a.showInputError=function(t){var e=u.getModal(),i=e.querySelector(".sa-input-error");h.addClass(i,"show");var n=e.querySelector(".sa-error-container");h.addClass(n,"show"),n.querySelector("p").innerHTML=t,e.querySelector("input").focus()},o.resetInputError=a.resetInputError=function(t){if(t&&13===t.keyCode)return!1;var e=u.getModal(),i=e.querySelector(".sa-input-error");h.removeClass(i,"show");var n=e.querySelector(".sa-error-container");h.removeClass(n,"show")},"undefined"!=typeof t?t.sweetAlert=t.swal=o:c.logStr("SweetAlert is a frontend module!")},{"./modules/default-params":2,"./modules/handle-click":3,"./modules/handle-dom":4,"./modules/handle-key":5,"./modules/handle-swal-dom":6,"./modules/set-params":8,"./modules/utils":9}],2:[function(t,e,i){Object.defineProperty(i,"__esModule",{value:!0});var n={title:"",text:"",type:null,allowOutsideClick:!1,showConfirmButton:!0,showCancelButton:!1,closeOnConfirm:!0,closeOnCancel:!0,confirmButtonText:"OK",confirmButtonColor:"#AEDEF4",cancelButtonText:"Cancel",imageUrl:null,imageSize:null,timer:null,customClass:"",html:!1,animation:!0,allowEscapeKey:!0,inputType:"text",inputPlaceholder:"",inputValue:""};i["default"]=n,e.exports=i["default"]},{}],3:[function(e,i,n){Object.defineProperty(n,"__esModule",{value:!0});var s=e("./utils"),r=(e("./handle-swal-dom"),e("./handle-dom")),o=function(e,i,n){function o(t){p&&i.confirmButtonColor&&(f.style.backgroundColor=t)}var h,c,u,d=e||t.event,f=d.target||d.srcElement,p=-1!==f.className.indexOf("confirm"),m=-1!==f.className.indexOf("sweet-overlay"),g=r.hasClass(n,"visible"),v=i.doneFunction&&"true"===n.getAttribute("data-has-done-function");switch(p&&i.confirmButtonColor&&(h=i.confirmButtonColor,c=s.colorLuminance(h,-.04),u=s.colorLuminance(h,-.14)),d.type){case"mouseover":o(c);break;case"mouseout":o(h);break;case"mousedown":o(u);break;case"mouseup":o(c);break;case"focus":var y=n.querySelector("button.confirm"),b=n.querySelector("button.cancel");p?b.style.boxShadow="none":y.style.boxShadow="none";break;case"click":var w=n===f,x=r.isDescendant(n,f);if(!w&&!x&&g&&!i.allowOutsideClick)break;p&&v&&g?a(n,i):v&&g||m?l(n,i):r.isDescendant(n,f)&&"BUTTON"===f.tagName&&sweetAlert.close()}},a=function(t,e){var i=!0;r.hasClass(t,"show-input")&&(i=t.querySelector("input").value,i||(i="")),e.doneFunction(i),e.closeOnConfirm&&sweetAlert.close()},l=function(t,e){var i=String(e.doneFunction).replace(/\s/g,""),n="function("===i.substring(0,9)&&")"!==i.substring(9,10);n&&e.doneFunction(!1),e.closeOnCancel&&sweetAlert.close()};n["default"]={handleButton:o,handleConfirm:a,handleCancel:l},i.exports=n["default"]},{"./handle-dom":4,"./handle-swal-dom":6,"./utils":9}],4:[function(i,n,s){Object.defineProperty(s,"__esModule",{value:!0});var r=function(t,e){return new RegExp(" "+e+" ").test(" "+t.className+" ")},o=function(t,e){r(t,e)||(t.className+=" "+e)},a=function(t,e){var i=" "+t.className.replace(/[\t\r\n]/g," ")+" ";if(r(t,e)){for(;i.indexOf(" "+e+" ")>=0;)i=i.replace(" "+e+" "," ");t.className=i.replace(/^\s+|\s+$/g,"")}},l=function(t){var i=e.createElement("div");return i.appendChild(e.createTextNode(t)),i.innerHTML},h=function(t){t.style.opacity="",t.style.display="block"},c=function(t){if(t&&!t.length)return h(t);for(var e=0;e<t.length;++e)h(t[e])},u=function(t){t.style.opacity="",t.style.display="none"},d=function(t){if(t&&!t.length)return u(t);for(var e=0;e<t.length;++e)u(t[e])},f=function(t,e){for(var i=e.parentNode;null!==i;){if(i===t)return!0;i=i.parentNode}return!1},p=function(t){t.style.left="-9999px",t.style.display="block";var e,i=t.clientHeight;return e="undefined"!=typeof getComputedStyle?parseInt(getComputedStyle(t).getPropertyValue("padding-top"),10):parseInt(t.currentStyle.padding),t.style.left="",t.style.display="none","-"+parseInt((i+e)/2)+"px"},m=function(t,e){if(+t.style.opacity<1){e=e||16,t.style.opacity=0,t.style.display="block";var i=+new Date,n=function(t){function e(){return t.apply(this,arguments)}return e.toString=function(){return t.toString()},e}(function(){t.style.opacity=+t.style.opacity+(new Date-i)/100,i=+new Date,+t.style.opacity<1&&setTimeout(n,e)});n()}t.style.display="block"},g=function(t,e){e=e||16,t.style.opacity=1;var i=+new Date,n=function(t){function e(){return t.apply(this,arguments)}return e.toString=function(){return t.toString()},e}(function(){t.style.opacity=+t.style.opacity-(new Date-i)/100,i=+new Date,+t.style.opacity>0?setTimeout(n,e):t.style.display="none"});n()},v=function(i){if("function"==typeof MouseEvent){var n=new MouseEvent("click",{view:t,bubbles:!1,cancelable:!0});i.dispatchEvent(n)}else if(e.createEvent){var s=e.createEvent("MouseEvents");s.initEvent("click",!1,!1),i.dispatchEvent(s)}else e.createEventObject?i.fireEvent("onclick"):"function"==typeof i.onclick&&i.onclick()},y=function(e){"function"==typeof e.stopPropagation?(e.stopPropagation(),e.preventDefault()):t.event&&t.event.hasOwnProperty("cancelBubble")&&(t.event.cancelBubble=!0)};s.hasClass=r,s.addClass=o,s.removeClass=a,s.escapeHtml=l,s._show=h,s.show=c,s._hide=u,s.hide=d,s.isDescendant=f,s.getTopMargin=p,s.fadeIn=m,s.fadeOut=g,s.fireClick=v,s.stopEventPropagation=y},{}],5:[function(e,n,s){Object.defineProperty(s,"__esModule",{value:!0});var r=e("./handle-dom"),o=e("./handle-swal-dom"),a=function(e,n,s){var a=e||t.event,l=a.keyCode||a.which,h=s.querySelector("button.confirm"),c=s.querySelector("button.cancel"),u=s.querySelectorAll("button[tabindex]");if(-1!==[9,13,32,27].indexOf(l)){for(var d=a.target||a.srcElement,f=-1,p=0;p<u.length;p++)if(d===u[p]){f=p;break}9===l?(d=-1===f?h:f===u.length-1?u[0]:u[f+1],r.stopEventPropagation(a),d.focus(),n.confirmButtonColor&&o.setFocusStyle(d,n.confirmButtonColor)):13===l?("INPUT"===d.tagName&&(d=h,h.focus()),d=-1===f?h:i):27===l&&n.allowEscapeKey===!0?(d=c,r.fireClick(d,a)):d=i}};s["default"]=a,n.exports=s["default"]},{"./handle-dom":4,"./handle-swal-dom":6}],6:[function(i,n,s){var r=function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(s,"__esModule",{value:!0});var o=i("./utils"),a=i("./handle-dom"),l=i("./default-params"),h=r(l),c=i("./injected-html"),u=r(c),d=".sweet-alert",f=".sweet-overlay",p=function(){var t=e.createElement("div");for(t.innerHTML=u["default"];t.firstChild;)e.body.appendChild(t.firstChild)},m=function(t){function e(){return t.apply(this,arguments)}return e.toString=function(){return t.toString()},e}(function(){var t=e.querySelector(d);return t||(p(),t=m()),t}),g=function(){var t=m();return t?t.querySelector("input"):void 0},v=function(){return e.querySelector(f)},y=function(t,e){var i=o.hexToRgb(e);t.style.boxShadow="0 0 2px rgba("+i+", 0.8), inset 0 0 0 1px rgba(0, 0, 0, 0.05)"},b=function(i){var n=m();a.fadeIn(v(),10),a.show(n),a.addClass(n,"showSweetAlert"),a.removeClass(n,"hideSweetAlert"),t.previousActiveElement=e.activeElement;var s=n.querySelector("button.confirm");s.focus(),setTimeout(function(){a.addClass(n,"visible")},500);var r=n.getAttribute("data-timer");if("null"!==r&&""!==r){var o=i;n.timeout=setTimeout(function(){var t=(o||null)&&"true"===n.getAttribute("data-has-done-function");t?o(null):sweetAlert.close()},r)}},w=function(){var t=m(),e=g();a.removeClass(t,"show-input"),e.value=h["default"].inputValue,e.setAttribute("type",h["default"].inputType),e.setAttribute("placeholder",h["default"].inputPlaceholder),x()},x=function(t){if(t&&13===t.keyCode)return!1;var e=m(),i=e.querySelector(".sa-input-error");a.removeClass(i,"show");var n=e.querySelector(".sa-error-container");a.removeClass(n,"show")},_=function(){var t=m();t.style.marginTop=a.getTopMargin(m())};s.sweetAlertInitialize=p,s.getModal=m,s.getOverlay=v,s.getInput=g,s.setFocusStyle=y,s.openModal=b,s.resetInput=w,s.resetInputError=x,s.fixVerticalPosition=_},{"./default-params":2,"./handle-dom":4,"./injected-html":7,"./utils":9}],7:[function(t,e,i){Object.defineProperty(i,"__esModule",{value:!0});var n='<div class="sweet-overlay" tabIndex="-1"></div><div class="sweet-alert"><div class="sa-icon sa-error">\n      <span class="sa-x-mark">\n        <span class="sa-line sa-left"></span>\n        <span class="sa-line sa-right"></span>\n      </span>\n    </div><div class="sa-icon sa-warning">\n      <span class="sa-body"></span>\n      <span class="sa-dot"></span>\n    </div><div class="sa-icon sa-info"></div><div class="sa-icon sa-success">\n      <span class="sa-line sa-tip"></span>\n      <span class="sa-line sa-long"></span>\n\n      <div class="sa-placeholder"></div>\n      <div class="sa-fix"></div>\n    </div><div class="sa-icon sa-custom"></div><h2>Title</h2>\n    <p>Text</p>\n    <fieldset>\n      <input type="text" tabIndex="3" />\n      <div class="sa-input-error"></div>\n    </fieldset><div class="sa-error-container">\n      <div class="icon">!</div>\n      <p>Not valid!</p>\n    </div><div class="sa-button-container">\n      <button class="cancel" tabIndex="2">Cancel</button>\n      <button class="confirm" tabIndex="1">OK</button>\n    </div></div>';i["default"]=n,e.exports=i["default"]},{}],8:[function(t,e,n){Object.defineProperty(n,"__esModule",{value:!0});var s=t("./utils"),r=t("./handle-swal-dom"),o=t("./handle-dom"),a=["error","warning","info","success","input","prompt"],l=function(t){var e=r.getModal(),n=e.querySelector("h2"),l=e.querySelector("p"),h=e.querySelector("button.cancel"),c=e.querySelector("button.confirm");if(n.innerHTML=t.html?t.title:o.escapeHtml(t.title).split("\n").join("<br>"),l.innerHTML=t.html?t.text:o.escapeHtml(t.text||"").split("\n").join("<br>"),t.text&&o.show(l),t.customClass)o.addClass(e,t.customClass),e.setAttribute("data-custom-class",t.customClass);else{var u=e.getAttribute("data-custom-class");o.removeClass(e,u),e.setAttribute("data-custom-class","")}if(o.hide(e.querySelectorAll(".sa-icon")),t.type&&!s.isIE8()){var d=function(){for(var n=!1,s=0;s<a.length;s++)if(t.type===a[s]){n=!0;break}if(!n)return logStr("Unknown alert type: "+t.type),{v:!1};var l=["success","error","warning","info"],h=i;-1!==l.indexOf(t.type)&&(h=e.querySelector(".sa-icon.sa-"+t.type),o.show(h));var c=r.getInput();switch(t.type){case"success":o.addClass(h,"animate"),o.addClass(h.querySelector(".sa-tip"),"animateSuccessTip"),o.addClass(h.querySelector(".sa-long"),"animateSuccessLong");break;case"error":o.addClass(h,"animateErrorIcon"),o.addClass(h.querySelector(".sa-x-mark"),"animateXMark");break;case"warning":o.addClass(h,"pulseWarning"),o.addClass(h.querySelector(".sa-body"),"pulseWarningIns"),o.addClass(h.querySelector(".sa-dot"),"pulseWarningIns");break;case"input":case"prompt":c.setAttribute("type",t.inputType),c.value=t.inputValue,c.setAttribute("placeholder",t.inputPlaceholder),o.addClass(e,"show-input"),setTimeout(function(){c.focus(),c.addEventListener("keyup",swal.resetInputError)},400)}}();if("object"==typeof d)return d.v}if(t.imageUrl){var f=e.querySelector(".sa-icon.sa-custom");f.style.backgroundImage="url("+t.imageUrl+")",o.show(f);var p=80,m=80;if(t.imageSize){var g=t.imageSize.toString().split("x"),v=g[0],y=g[1];v&&y?(p=v,m=y):logStr("Parameter imageSize expects value with format WIDTHxHEIGHT, got "+t.imageSize)}f.setAttribute("style",f.getAttribute("style")+"width:"+p+"px; height:"+m+"px")}e.setAttribute("data-has-cancel-button",t.showCancelButton),t.showCancelButton?h.style.display="inline-block":o.hide(h),e.setAttribute("data-has-confirm-button",t.showConfirmButton),t.showConfirmButton?c.style.display="inline-block":o.hide(c),t.cancelButtonText&&(h.innerHTML=o.escapeHtml(t.cancelButtonText)),t.confirmButtonText&&(c.innerHTML=o.escapeHtml(t.confirmButtonText)),t.confirmButtonColor&&(c.style.backgroundColor=t.confirmButtonColor,r.setFocusStyle(c,t.confirmButtonColor)),e.setAttribute("data-allow-outside-click",t.allowOutsideClick);var b=t.doneFunction?!0:!1;e.setAttribute("data-has-done-function",b),t.animation?"string"==typeof t.animation?e.setAttribute("data-animation",t.animation):e.setAttribute("data-animation","pop"):e.setAttribute("data-animation","none"),e.setAttribute("data-timer",t.timer)};n["default"]=l,e.exports=n["default"]},{"./handle-dom":4,"./handle-swal-dom":6,"./utils":9}],9:[function(e,i,n){Object.defineProperty(n,"__esModule",{value:!0});var s=function(t,e){for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i]);return t},r=function(t){var e=/^#?([a-f\d]{2})([a-f\d]{2})([a-f\d]{2})$/i.exec(t);return e?parseInt(e[1],16)+", "+parseInt(e[2],16)+", "+parseInt(e[3],16):null},o=function(){return t.attachEvent&&!t.addEventListener},a=function(e){t.console&&t.console.log("SweetAlert: "+e)},l=function(t,e){t=String(t).replace(/[^0-9a-f]/gi,""),t.length<6&&(t=t[0]+t[0]+t[1]+t[1]+t[2]+t[2]),e=e||0;var i,n,s="#";for(n=0;3>n;n++)i=parseInt(t.substr(2*n,2),16),i=Math.round(Math.min(Math.max(0,i+i*e),255)).toString(16),s+=("00"+i).substr(i.length);return s};n.extend=s,n.hexToRgb=r,n.isIE8=o,n.logStr=a,n.colorLuminance=l},{}]},{},[1]),"function"==typeof define&&define.amd?define(function(){return sweetAlert}):"undefined"!=typeof module&&module.exports&&(module.exports=sweetAlert)}(window,document);!function(t){"function"==typeof define&&define.amd?define(["jquery"],t):t("object"==typeof exports?require("jquery"):jQuery)}(function(t){var e=function(){if(t&&t.fn&&t.fn.select2&&t.fn.select2.amd)var e=t.fn.select2.amd;var e;return function(){if(!e||!e.requirejs){e?i=e:e={};var t,i,n;!function(e){function s(t,e){return w.call(t,e)}function r(t,e){var i,n,s,r,o,a,l,h,c,u,d,f=e&&e.split("/"),p=y.map,m=p&&p["*"]||{};if(t&&"."===t.charAt(0))if(e){for(f=f.slice(0,f.length-1),t=t.split("/"),o=t.length-1,y.nodeIdCompat&&_.test(t[o])&&(t[o]=t[o].replace(_,"")),t=f.concat(t),c=0;c<t.length;c+=1)if(d=t[c],"."===d)t.splice(c,1),c-=1;else if(".."===d){if(1===c&&(".."===t[2]||".."===t[0]))break;c>0&&(t.splice(c-1,2),c-=2)}t=t.join("/")}else 0===t.indexOf("./")&&(t=t.substring(2));if((f||m)&&p){for(i=t.split("/"),c=i.length;c>0;c-=1){if(n=i.slice(0,c).join("/"),f)for(u=f.length;u>0;u-=1)if(s=p[f.slice(0,u).join("/")],s&&(s=s[n])){r=s,a=c;break}if(r)break;!l&&m&&m[n]&&(l=m[n],h=c)}!r&&l&&(r=l,a=h),r&&(i.splice(0,a,r),t=i.join("/"))}return t}function o(t,i){return function(){return f.apply(e,x.call(arguments,0).concat([t,i]))}}function a(t){return function(e){return r(e,t)}}function l(t){return function(e){g[t]=e}}function h(t){if(s(v,t)){var i=v[t];delete v[t],b[t]=!0,d.apply(e,i)}if(!s(g,t)&&!s(b,t))throw new Error("No "+t);return g[t]}function c(t){var e,i=t?t.indexOf("!"):-1;return i>-1&&(e=t.substring(0,i),t=t.substring(i+1,t.length)),[e,t]}function u(t){return function(){return y&&y.config&&y.config[t]||{}}}var d,f,p,m,g={},v={},y={},b={},w=Object.prototype.hasOwnProperty,x=[].slice,_=/\.js$/;p=function(t,e){var i,n=c(t),s=n[0];return t=n[1],s&&(s=r(s,e),i=h(s)),s?t=i&&i.normalize?i.normalize(t,a(e)):r(t,e):(t=r(t,e),n=c(t),s=n[0],t=n[1],s&&(i=h(s))),{f:s?s+"!"+t:t,n:t,pr:s,p:i}},m={require:function(t){return o(t)},exports:function(t){var e=g[t];return"undefined"!=typeof e?e:g[t]={}},module:function(t){return{id:t,uri:"",exports:g[t],config:u(t)}}},d=function(t,i,n,r){var a,c,u,d,f,y,w=[],x=typeof n;if(r=r||t,"undefined"===x||"function"===x){for(i=!i.length&&n.length?["require","exports","module"]:i,f=0;f<i.length;f+=1)if(d=p(i[f],r),c=d.f,"require"===c)w[f]=m.require(t);else if("exports"===c)w[f]=m.exports(t),y=!0;else if("module"===c)a=w[f]=m.module(t);else if(s(g,c)||s(v,c)||s(b,c))w[f]=h(c);else{if(!d.p)throw new Error(t+" missing "+c);d.p.load(d.n,o(r,!0),l(c),{}),w[f]=g[c]}u=n?n.apply(g[t],w):void 0,t&&(a&&a.exports!==e&&a.exports!==g[t]?g[t]=a.exports:u===e&&y||(g[t]=u))}else t&&(g[t]=n)},t=i=f=function(t,i,n,s,r){if("string"==typeof t)return m[t]?m[t](i):h(p(t,i).f);if(!t.splice){if(y=t,y.deps&&f(y.deps,y.callback),!i)return;i.splice?(t=i,i=n,n=null):t=e}return i=i||function(){},"function"==typeof n&&(n=s,s=r),s?d(e,t,i,n):setTimeout(function(){d(e,t,i,n)},4),f},f.config=function(t){return f(t)},t._defined=g,n=function(t,e,i){e.splice||(i=e,e=[]),s(g,t)||s(v,t)||(v[t]=[t,e,i])},n.amd={jQuery:!0}}(),e.requirejs=t,e.require=i,e.define=n}}(),e.define("almond",function(){}),e.define("jquery",[],function(){var e=t||$;return null==e&&console&&console.error&&console.error("Select2: An instance of jQuery or a jQuery-compatible library was not found. Make sure that you are including jQuery before Select2 on your web page."),e}),e.define("select2/utils",["jquery"],function(t){function e(t){var e=t.prototype,i=[];for(var n in e){var s=e[n];"function"==typeof s&&"constructor"!==n&&i.push(n)}return i}var i={};i.Extend=function(t,e){function i(){this.constructor=t}var n={}.hasOwnProperty;for(var s in e)n.call(e,s)&&(t[s]=e[s]);return i.prototype=e.prototype,t.prototype=new i,t.__super__=e.prototype,t},i.Decorate=function(t,i){function n(){var e=Array.prototype.unshift,n=i.prototype.constructor.length,s=t.prototype.constructor;n>0&&(e.call(arguments,t.prototype.constructor),s=i.prototype.constructor),s.apply(this,arguments)}function s(){this.constructor=n}var r=e(i),o=e(t);i.displayName=t.displayName,n.prototype=new s;for(var a=0;a<o.length;a++){var l=o[a];n.prototype[l]=t.prototype[l]}for(var h=function(t){var e=function(){};t in n.prototype&&(e=n.prototype[t]);var s=i.prototype[t];return function(){var t=Array.prototype.unshift;return t.call(arguments,e),s.apply(this,arguments)}},c=0;c<r.length;c++){var u=r[c];n.prototype[u]=h(u)}return n};var n=function(){this.listeners={}};return n.prototype.on=function(t,e){this.listeners=this.listeners||{},t in this.listeners?this.listeners[t].push(e):this.listeners[t]=[e]},n.prototype.trigger=function(t){var e=Array.prototype.slice;this.listeners=this.listeners||{},t in this.listeners&&this.invoke(this.listeners[t],e.call(arguments,1)),"*"in this.listeners&&this.invoke(this.listeners["*"],arguments)},n.prototype.invoke=function(t,e){for(var i=0,n=t.length;n>i;i++)t[i].apply(this,e)},i.Observable=n,i.generateChars=function(t){for(var e="",i=0;t>i;i++){var n=Math.floor(36*Math.random());e+=n.toString(36)}return e},i.bind=function(t,e){return function(){t.apply(e,arguments)}},i._convertData=function(t){for(var e in t){var i=e.split("-"),n=t;if(1!==i.length){for(var s=0;s<i.length;s++){var r=i[s];r=r.substring(0,1).toLowerCase()+r.substring(1),r in n||(n[r]={}),s==i.length-1&&(n[r]=t[e]),n=n[r]}delete t[e]}}return t},i.hasScroll=function(e,i){var n=t(i),s=i.style.overflowX,r=i.style.overflowY;return s!==r||"hidden"!==r&&"visible"!==r?"scroll"===s||"scroll"===r?!0:n.innerHeight()<i.scrollHeight||n.innerWidth()<i.scrollWidth:!1},i.escapeMarkup=function(t){var e={"\\":"&#92;","&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;","/":"&#47;"};return"string"!=typeof t?t:String(t).replace(/[&<>"'\/\\]/g,function(t){return e[t]})},i.appendMany=function(e,i){if("1.7"===t.fn.jquery.substr(0,3)){var n=t();t.map(i,function(t){n=n.add(t)}),i=n}e.append(i)},i}),e.define("select2/results",["jquery","./utils"],function(t,e){function i(t,e,n){this.$element=t,this.data=n,this.options=e,i.__super__.constructor.call(this)}return e.Extend(i,e.Observable),i.prototype.render=function(){var e=t('<ul class="select2-results__options" role="tree"></ul>');return this.options.get("multiple")&&e.attr("aria-multiselectable","true"),this.$results=e,e},i.prototype.clear=function(){this.$results.empty()},i.prototype.displayMessage=function(e){var i=this.options.get("escapeMarkup");this.clear(),this.hideLoading();var n=t('<li role="treeitem" class="select2-results__option"></li>'),s=this.options.get("translations").get(e.message);n.append(i(s(e.args))),this.$results.append(n)},i.prototype.append=function(t){this.hideLoading();var e=[];if(null==t.results||0===t.results.length)return void(0===this.$results.children().length&&this.trigger("results:message",{message:"noResults"}));t.results=this.sort(t.results);for(var i=0;i<t.results.length;i++){var n=t.results[i],s=this.option(n);e.push(s)}this.$results.append(e)},i.prototype.position=function(t,e){var i=e.find(".select2-results");i.append(t)},i.prototype.sort=function(t){var e=this.options.get("sorter");return e(t)},i.prototype.setClasses=function(){var e=this;this.data.current(function(i){var n=t.map(i,function(t){return t.id.toString()}),s=e.$results.find(".select2-results__option[aria-selected]");s.each(function(){var e=t(this),i=t.data(this,"data"),s=""+i.id;null!=i.element&&i.element.selected||null==i.element&&t.inArray(s,n)>-1?e.attr("aria-selected","true"):e.attr("aria-selected","false")});var r=s.filter("[aria-selected=true]");r.length>0?r.first().trigger("mouseenter"):s.first().trigger("mouseenter")})},i.prototype.showLoading=function(t){this.hideLoading();var e=this.options.get("translations").get("searching"),i={disabled:!0,loading:!0,text:e(t)},n=this.option(i);n.className+=" loading-results",this.$results.prepend(n)},i.prototype.hideLoading=function(){this.$results.find(".loading-results").remove()},i.prototype.option=function(e){var i=document.createElement("li");i.className="select2-results__option";var n={role:"treeitem","aria-selected":"false"};e.disabled&&(delete n["aria-selected"],n["aria-disabled"]="true"),null==e.id&&delete n["aria-selected"],null!=e._resultId&&(i.id=e._resultId),e.title&&(i.title=e.title),e.children&&(n.role="group",n["aria-label"]=e.text,delete n["aria-selected"]);for(var s in n){var r=n[s];i.setAttribute(s,r)}if(e.children){var o=t(i),a=document.createElement("strong");a.className="select2-results__group";{t(a)}this.template(e,a);for(var l=[],h=0;h<e.children.length;h++){var c=e.children[h],u=this.option(c);l.push(u)}var d=t("<ul></ul>",{class:"select2-results__options select2-results__options--nested"});d.append(l),o.append(a),o.append(d)}else this.template(e,i);return t.data(i,"data",e),i},i.prototype.bind=function(e){var i=this,n=e.id+"-results";this.$results.attr("id",n),e.on("results:all",function(t){i.clear(),i.append(t.data),e.isOpen()&&i.setClasses()}),e.on("results:append",function(t){i.append(t.data),e.isOpen()&&i.setClasses()}),e.on("query",function(t){i.showLoading(t)}),e.on("select",function(){e.isOpen()&&i.setClasses()}),e.on("unselect",function(){e.isOpen()&&i.setClasses()}),e.on("open",function(){i.$results.attr("aria-expanded","true"),i.$results.attr("aria-hidden","false"),i.setClasses(),i.ensureHighlightVisible()}),e.on("close",function(){i.$results.attr("aria-expanded","false"),i.$results.attr("aria-hidden","true"),i.$results.removeAttr("aria-activedescendant")}),e.on("results:toggle",function(){var t=i.getHighlightedResults();0!==t.length&&t.trigger("mouseup")}),e.on("results:select",function(){var t=i.getHighlightedResults();if(0!==t.length){var e=t.data("data");"true"==t.attr("aria-selected")?i.trigger("close"):i.trigger("select",{data:e})}}),e.on("results:previous",function(){var t=i.getHighlightedResults(),e=i.$results.find("[aria-selected]"),n=e.index(t);if(0!==n){var s=n-1;0===t.length&&(s=0);var r=e.eq(s);r.trigger("mouseenter");var o=i.$results.offset().top,a=r.offset().top,l=i.$results.scrollTop()+(a-o);0===s?i.$results.scrollTop(0):0>a-o&&i.$results.scrollTop(l)}}),e.on("results:next",function(){var t=i.getHighlightedResults(),e=i.$results.find("[aria-selected]"),n=e.index(t),s=n+1;if(!(s>=e.length)){var r=e.eq(s);r.trigger("mouseenter");var o=i.$results.offset().top+i.$results.outerHeight(!1),a=r.offset().top+r.outerHeight(!1),l=i.$results.scrollTop()+a-o;0===s?i.$results.scrollTop(0):a>o&&i.$results.scrollTop(l)}}),e.on("results:focus",function(t){t.element.addClass("select2-results__option--highlighted")}),e.on("results:message",function(t){i.displayMessage(t)}),t.fn.mousewheel&&this.$results.on("mousewheel",function(t){var e=i.$results.scrollTop(),n=i.$results.get(0).scrollHeight-i.$results.scrollTop()+t.deltaY,s=t.deltaY>0&&e-t.deltaY<=0,r=t.deltaY<0&&n<=i.$results.height();s?(i.$results.scrollTop(0),t.preventDefault(),t.stopPropagation()):r&&(i.$results.scrollTop(i.$results.get(0).scrollHeight-i.$results.height()),t.preventDefault(),t.stopPropagation())}),this.$results.on("mouseup",".select2-results__option[aria-selected]",function(e){var n=t(this),s=n.data("data");return"true"===n.attr("aria-selected")?void(i.options.get("multiple")?i.trigger("unselect",{originalEvent:e,data:s}):i.trigger("close")):void i.trigger("select",{originalEvent:e,data:s})}),this.$results.on("mouseenter",".select2-results__option[aria-selected]",function(){var e=t(this).data("data");i.getHighlightedResults().removeClass("select2-results__option--highlighted"),i.trigger("results:focus",{data:e,element:t(this)})})},i.prototype.getHighlightedResults=function(){var t=this.$results.find(".select2-results__option--highlighted");return t},i.prototype.destroy=function(){this.$results.remove()},i.prototype.ensureHighlightVisible=function(){var t=this.getHighlightedResults();if(0!==t.length){var e=this.$results.find("[aria-selected]"),i=e.index(t),n=this.$results.offset().top,s=t.offset().top,r=this.$results.scrollTop()+(s-n),o=s-n;r-=2*t.outerHeight(!1),2>=i?this.$results.scrollTop(0):(o>this.$results.outerHeight()||0>o)&&this.$results.scrollTop(r)}},i.prototype.template=function(e,i){var n=this.options.get("templateResult"),s=this.options.get("escapeMarkup"),r=n(e);null==r?i.style.display="none":"string"==typeof r?i.innerHTML=s(r):t(i).append(r)},i}),e.define("select2/keys",[],function(){var t={BACKSPACE:8,TAB:9,ENTER:13,SHIFT:16,CTRL:17,ALT:18,ESC:27,SPACE:32,PAGE_UP:33,PAGE_DOWN:34,END:35,HOME:36,LEFT:37,UP:38,RIGHT:39,DOWN:40,DELETE:46};return t}),e.define("select2/selection/base",["jquery","../utils","../keys"],function(t,e,i){function n(t,e){this.$element=t,this.options=e,n.__super__.constructor.call(this)}return e.Extend(n,e.Observable),n.prototype.render=function(){var e=t('<span class="select2-selection" role="combobox" aria-autocomplete="list" aria-haspopup="true" aria-expanded="false"></span>');return this._tabindex=0,null!=this.$element.data("old-tabindex")?this._tabindex=this.$element.data("old-tabindex"):null!=this.$element.attr("tabindex")&&(this._tabindex=this.$element.attr("tabindex")),e.attr("title",this.$element.attr("title")),e.attr("tabindex",this._tabindex),this.$selection=e,e},n.prototype.bind=function(t){var e=this,n=(t.id+"-container",t.id+"-results");this.container=t,this.$selection.on("focus",function(t){e.trigger("focus",t)}),this.$selection.on("blur",function(t){e.trigger("blur",t)}),this.$selection.on("keydown",function(t){e.trigger("keypress",t),t.which===i.SPACE&&t.preventDefault()}),t.on("results:focus",function(t){e.$selection.attr("aria-activedescendant",t.data._resultId)}),t.on("selection:update",function(t){e.update(t.data)}),t.on("open",function(){e.$selection.attr("aria-expanded","true"),e.$selection.attr("aria-owns",n),e._attachCloseHandler(t)}),t.on("close",function(){e.$selection.attr("aria-expanded","false"),e.$selection.removeAttr("aria-activedescendant"),e.$selection.removeAttr("aria-owns"),e.$selection.focus(),e._detachCloseHandler(t)}),t.on("enable",function(){e.$selection.attr("tabindex",e._tabindex)}),t.on("disable",function(){e.$selection.attr("tabindex","-1")})},n.prototype._attachCloseHandler=function(e){t(document.body).on("mousedown.select2."+e.id,function(e){var i=t(e.target),n=i.closest(".select2"),s=t(".select2.select2-container--open");s.each(function(){var e=t(this);if(this!=n[0]){var i=e.data("element");i.select2("close")}})})},n.prototype._detachCloseHandler=function(e){t(document.body).off("mousedown.select2."+e.id)},n.prototype.position=function(t,e){var i=e.find(".selection");i.append(t)},n.prototype.destroy=function(){this._detachCloseHandler(this.container)},n.prototype.update=function(){throw new Error("The `update` method must be defined in child classes.")},n}),e.define("select2/selection/single",["jquery","./base","../utils","../keys"],function(t,e,i){function n(){n.__super__.constructor.apply(this,arguments)}return i.Extend(n,e),n.prototype.render=function(){var t=n.__super__.render.call(this);return t.addClass("select2-selection--single"),t.html('<span class="select2-selection__rendered"></span><span class="select2-selection__arrow" role="presentation"><b role="presentation"></b></span>'),t},n.prototype.bind=function(t){var e=this;n.__super__.bind.apply(this,arguments);var i=t.id+"-container";this.$selection.find(".select2-selection__rendered").attr("id",i),this.$selection.attr("aria-labelledby",i),this.$selection.on("mousedown",function(t){1===t.which&&e.trigger("toggle",{originalEvent:t})}),this.$selection.on("focus",function(){}),this.$selection.on("blur",function(){}),t.on("selection:update",function(t){e.update(t.data)})},n.prototype.clear=function(){this.$selection.find(".select2-selection__rendered").empty()},n.prototype.display=function(t){var e=this.options.get("templateSelection"),i=this.options.get("escapeMarkup");return i(e(t))},n.prototype.selectionContainer=function(){return t("<span></span>")},n.prototype.update=function(t){if(0===t.length)return void this.clear();var e=t[0],i=this.display(e),n=this.$selection.find(".select2-selection__rendered");n.empty().append(i),n.prop("title",e.title||e.text)},n}),e.define("select2/selection/multiple",["jquery","./base","../utils"],function(t,e,i){function n(){n.__super__.constructor.apply(this,arguments)}return i.Extend(n,e),n.prototype.render=function(){var t=n.__super__.render.call(this);return t.addClass("select2-selection--multiple"),t.html('<ul class="select2-selection__rendered"></ul>'),t},n.prototype.bind=function(){var e=this;n.__super__.bind.apply(this,arguments),this.$selection.on("click",function(t){e.trigger("toggle",{originalEvent:t})}),this.$selection.on("click",".select2-selection__choice__remove",function(i){var n=t(this),s=n.parent(),r=s.data("data");e.trigger("unselect",{originalEvent:i,data:r})})},n.prototype.clear=function(){this.$selection.find(".select2-selection__rendered").empty()},n.prototype.display=function(t){var e=this.options.get("templateSelection"),i=this.options.get("escapeMarkup");return i(e(t))},n.prototype.selectionContainer=function(){var e=t('<li class="select2-selection__choice"><span class="select2-selection__choice__remove" role="presentation">&times;</span></li>');return e},n.prototype.update=function(t){if(this.clear(),0!==t.length){for(var e=[],n=0;n<t.length;n++){var s=t[n],r=this.display(s),o=this.selectionContainer();o.append(r),o.prop("title",s.title||s.text),o.data("data",s),e.push(o)}var a=this.$selection.find(".select2-selection__rendered");i.appendMany(a,e)}},n}),e.define("select2/selection/placeholder",["../utils"],function(){function t(t,e,i){this.placeholder=this.normalizePlaceholder(i.get("placeholder")),t.call(this,e,i)}return t.prototype.normalizePlaceholder=function(t,e){return"string"==typeof e&&(e={id:"",text:e}),e},t.prototype.createPlaceholder=function(t,e){var i=this.selectionContainer();return i.html(this.display(e)),i.addClass("select2-selection__placeholder").removeClass("select2-selection__choice"),i},t.prototype.update=function(t,e){var i=1==e.length&&e[0].id!=this.placeholder.id,n=e.length>1;if(n||i)return t.call(this,e);this.clear();var s=this.createPlaceholder(this.placeholder);this.$selection.find(".select2-selection__rendered").append(s)},t}),e.define("select2/selection/allowClear",["jquery","../keys"],function(t,e){function i(){}return i.prototype.bind=function(t,e,i){var n=this;t.call(this,e,i),null==this.placeholder&&this.options.get("debug")&&window.console&&console.error&&console.error("Select2: The `allowClear` option should be used in combination with the `placeholder` option."),this.$selection.on("mousedown",".select2-selection__clear",function(t){n._handleClear(t)}),e.on("keypress",function(t){n._handleKeyboardClear(t,e)})},i.prototype._handleClear=function(t,e){if(!this.options.get("disabled")){var i=this.$selection.find(".select2-selection__clear");if(0!==i.length){e.stopPropagation();for(var n=i.data("data"),s=0;s<n.length;s++){var r={data:n[s]};if(this.trigger("unselect",r),r.prevented)return}this.$element.val(this.placeholder.id).trigger("change"),this.trigger("toggle")}}},i.prototype._handleKeyboardClear=function(t,i,n){n.isOpen()||(i.which==e.DELETE||i.which==e.BACKSPACE)&&this._handleClear(i)},i.prototype.update=function(e,i){if(e.call(this,i),!(this.$selection.find(".select2-selection__placeholder").length>0||0===i.length)){var n=t('<span class="select2-selection__clear">&times;</span>');n.data("data",i),this.$selection.find(".select2-selection__rendered").prepend(n)}},i}),e.define("select2/selection/search",["jquery","../utils","../keys"],function(t,e,i){function n(t,e,i){t.call(this,e,i)}return n.prototype.render=function(e){var i=t('<li class="select2-search select2-search--inline"><input class="select2-search__field" type="search" tabindex="-1" autocomplete="off" autocorrect="off" autocapitalize="off" spellcheck="false" role="textbox" /></li>');this.$searchContainer=i,this.$search=i.find("input");var n=e.call(this);return n},n.prototype.bind=function(t,e,n){var s=this;t.call(this,e,n),e.on("open",function(){s.$search.attr("tabindex",0),s.$search.focus()}),e.on("close",function(){s.$search.attr("tabindex",-1),s.$search.val(""),s.$search.focus()}),e.on("enable",function(){s.$search.prop("disabled",!1)}),e.on("disable",function(){s.$search.prop("disabled",!0)}),this.$selection.on("focusin",".select2-search--inline",function(t){s.trigger("focus",t)}),this.$selection.on("focusout",".select2-search--inline",function(t){s.trigger("blur",t)}),this.$selection.on("keydown",".select2-search--inline",function(t){t.stopPropagation(),s.trigger("keypress",t),s._keyUpPrevented=t.isDefaultPrevented();var e=t.which;if(e===i.BACKSPACE&&""===s.$search.val()){var n=s.$searchContainer.prev(".select2-selection__choice");if(n.length>0){var r=n.data("data");s.searchRemoveChoice(r),t.preventDefault()}}}),this.$selection.on("input",".select2-search--inline",function(){s.$selection.off("keyup.search")}),this.$selection.on("keyup.search input",".select2-search--inline",function(t){s.handleSearch(t)})},n.prototype.createPlaceholder=function(t,e){this.$search.attr("placeholder",e.text)},n.prototype.update=function(t,e){this.$search.attr("placeholder",""),t.call(this,e),this.$selection.find(".select2-selection__rendered").append(this.$searchContainer),this.resizeSearch()},n.prototype.handleSearch=function(){if(this.resizeSearch(),!this._keyUpPrevented){var t=this.$search.val();this.trigger("query",{term:t})}this._keyUpPrevented=!1},n.prototype.searchRemoveChoice=function(t,e){this.trigger("unselect",{data:e}),this.trigger("open"),this.$search.val(e.text+" ")},n.prototype.resizeSearch=function(){this.$search.css("width","25px");var t="";if(""!==this.$search.attr("placeholder"))t=this.$selection.find(".select2-selection__rendered").innerWidth();else{var e=this.$search.val().length+1;t=.75*e+"em"}this.$search.css("width",t)},n}),e.define("select2/selection/eventRelay",["jquery"],function(t){function e(){}return e.prototype.bind=function(e,i,n){var s=this,r=["open","opening","close","closing","select","selecting","unselect","unselecting"],o=["opening","closing","selecting","unselecting"];e.call(this,i,n),i.on("*",function(e,i){if(-1!==t.inArray(e,r)){i=i||{};var n=t.Event("select2:"+e,{params:i});s.$element.trigger(n),-1!==t.inArray(e,o)&&(i.prevented=n.isDefaultPrevented())}})},e}),e.define("select2/translation",["jquery","require"],function(t,e){function i(t){this.dict=t||{}}return i.prototype.all=function(){return this.dict},i.prototype.get=function(t){return this.dict[t]},i.prototype.extend=function(e){this.dict=t.extend({},e.all(),this.dict)},i._cache={},i.loadPath=function(t){if(!(t in i._cache)){var n=e(t);i._cache[t]=n}return new i(i._cache[t])},i}),e.define("select2/diacritics",[],function(){var t={"":"A","":"A","":"A","":"A","":"A","":"A","":"A","":"A","":"A","":"A","":"A","":"A","":"A","":"A","":"A","":"A","":"A","":"A","":"A","":"A","":"A","":"A","":"A","":"A","":"A","":"A","":"A","":"A","":"A","":"A","":"A","":"A","":"A","":"AA","":"AE","":"AE","":"AE","":"AO","":"AU","":"AV","":"AV","":"AY","":"B","":"B","":"B","":"B","":"B","":"B","":"B","":"B","":"C","":"C","":"C","":"C","":"C","":"C","":"C","":"C","":"C","":"C","":"C","":"D","":"D","":"D","":"D","":"D","":"D","":"D","":"D","":"D","":"D","":"D","":"D","":"D","":"DZ","":"DZ","":"Dz","":"Dz","":"E","":"E","":"E","":"E","":"E","":"E","":"E","":"E","":"E","":"E","":"E","":"E","":"E","":"E","":"E","":"E","":"E","":"E","":"E","":"E","":"E","":"E","":"E","":"E","":"E","":"E","":"E","":"E","":"E","":"F","":"F","":"F","":"F","":"F","":"G","":"G","":"G","":"G","":"G","":"G","":"G","":"G","":"G","":"G","":"G","":"G","":"G","":"G","":"H","":"H","":"H","":"H","":"H","":"H","":"H","":"H","":"H","":"H","":"H","":"H","":"H","":"I","":"I","":"I","":"I","":"I","":"I","":"I","":"I","":"I","":"I","":"I","":"I","":"I","":"I","":"I","":"I","":"I","":"I","":"I","":"J","":"J","":"J","":"J","":"K","":"K","":"K","":"K","":"K","":"K","":"K","":"K","":"K","":"K","":"K","":"K","":"K","":"L","":"L","":"L","":"L","":"L","":"L","":"L","":"L","":"L","":"L","":"L","":"L","":"L","":"L","":"L","":"L","":"L","":"LJ","":"Lj","":"M","":"M","":"M","":"M","":"M","":"M","":"M","":"N","":"N","":"N","":"N","":"N","":"N","":"N","":"N","":"N","":"N","":"N","":"N","":"N","":"N","":"N","":"NJ","":"Nj","":"O","":"O","":"O","":"O","":"O","":"O","":"O","":"O","":"O","":"O","":"O","":"O","":"O","":"O","":"O","":"O","":"O","":"O","":"O","":"O","":"O","":"O","":"O","":"O","":"O","":"O","":"O","":"O","":"O","":"O","":"O","":"O","":"O","":"O","":"O","":"O","":"O","":"O","":"O","":"O","":"O","":"O","":"OI","":"OO","":"OU","":"P","":"P","":"P","":"P","":"P","":"P","":"P","":"P","":"P","":"Q","":"Q","":"Q","":"Q","":"Q","":"R","":"R","":"R","":"R","":"R","":"R","":"R","":"R","":"R","":"R","":"R","":"R","":"R","":"R","":"R","":"R","":"S","":"S","":"S","":"S","":"S","":"S","":"S","":"S","":"S","":"S","":"S","":"S","":"S","":"S","":"S","":"S","":"T","":"T","":"T","":"T","":"T","":"T","":"T","":"T","":"T","":"T","":"T","":"T","":"T","":"T","":"TZ","":"U","":"U","":"U","":"U","":"U","":"U","":"U","":"U","":"U","":"U","":"U","":"U","":"U","":"U","":"U","":"U","":"U","":"U","":"U","":"U","":"U","":"U","":"U","":"U","":"U","":"U","":"U","":"U","":"U","":"U","":"U","":"U","":"U","":"V","":"V","":"V","":"V","":"V","":"V","":"V","":"VY","":"W","":"W","":"W","":"W","":"W","":"W","":"W","":"W","":"W","":"X","":"X","":"X","":"X","":"Y","":"Y","":"Y","":"Y","":"Y","":"Y","":"Y","":"Y","":"Y","":"Y","":"Y","":"Y","":"Y","":"Y","":"Z","":"Z","":"Z","":"Z","":"Z","":"Z","":"Z","":"Z","":"Z","":"Z","":"Z","":"Z","":"Z","":"a","":"a","":"a","":"a","":"a","":"a","":"a","":"a","":"a","":"a","":"a","":"a","":"a","":"a","":"a","":"a","":"a","":"a","":"a","":"a","":"a","":"a","":"a","":"a","":"a","":"a","":"a","":"a","":"a","":"a","":"a","":"a","":"a","":"a","":"aa","":"ae","":"ae","":"ae","":"ao","":"au","":"av","":"av","":"ay","":"b","":"b","":"b","":"b","":"b","":"b","":"b","":"b","":"c","":"c","":"c","":"c","":"c","":"c","":"c","":"c","":"c","":"c","":"c","":"c","":"d","":"d","":"d","":"d","":"d","":"d","":"d","":"d","":"d","":"d","":"d","":"d","":"d","":"dz","":"dz","":"e","":"e","":"e","":"e","":"e","":"e","":"e","":"e","":"e","":"e","":"e","":"e","":"e","":"e","":"e","":"e","":"e","":"e","":"e","":"e","":"e","":"e","":"e","":"e","":"e","":"e","":"e","":"e","":"e","":"e","":"f","":"f","":"f","":"f","":"f","":"g","":"g","":"g","":"g","":"g","":"g","":"g","":"g","":"g","":"g","":"g","":"g","":"g","":"g","":"h","":"h","":"h","":"h","":"h","":"h","":"h","":"h","":"h","":"h","":"h","":"h","":"h","":"h","":"hv","":"i","":"i","":"i","":"i","":"i","":"i","":"i","":"i","":"i","":"i","":"i","":"i","":"i","":"i","":"i","":"i","":"i","":"i","":"i","":"j","":"j","":"j","":"j","":"j","":"k","":"k","":"k","":"k","":"k","":"k","":"k","":"k","":"k","":"k","":"k","":"k","":"k","":"l","":"l","":"l","":"l","":"l","":"l","":"l","":"l","":"l","":"l","":"l","":"l","":"l","":"l","":"l","":"l","":"l","":"l","":"lj","":"m","":"m","":"m","":"m","":"m","":"m","":"m","":"n","":"n","":"n","":"n","":"n","":"n","":"n","":"n","":"n","":"n","":"n","":"n","":"n","":"n","":"n","":"n","":"nj","":"o","":"o","":"o","":"o","":"o","":"o","":"o","":"o","":"o","":"o","":"o","":"o","":"o","":"o","":"o","":"o","":"o","":"o","":"o","":"o","":"o","":"o","":"o","":"o","":"o","":"o","":"o","":"o","":"o","":"o","":"o","":"o","":"o","":"o","":"o","":"o","":"o","":"o","":"o","":"o","":"o","":"o","":"oi","":"ou","":"oo","":"p","":"p","":"p","":"p","":"p","":"p","":"p","":"p","":"p","":"q","":"q","":"q","":"q","":"q","":"r","":"r","":"r","":"r","":"r","":"r","":"r","":"r","":"r","":"r","":"r","":"r","":"r","":"r","":"r","":"r","":"s","":"s","":"s","":"s","":"s","":"s","":"s","":"s","":"s","":"s","":"s","":"s","":"s","":"s","":"s","":"s","":"s","":"t","":"t","":"t","":"t","":"t","":"t","":"t","":"t","":"t","":"t","":"t","":"t","":"t","":"t","":"t","":"tz","":"u","":"u","":"u","":"u","":"u","":"u","":"u","":"u","":"u","":"u","":"u","":"u","":"u","":"u","":"u","":"u","":"u","":"u","":"u","":"u","":"u","":"u","":"u","":"u","":"u","":"u","":"u","":"u","":"u","":"u","":"u","":"u","":"u","":"v","":"v","":"v","":"v","":"v","":"v","":"v","":"vy","":"w","":"w","":"w","":"w","":"w","":"w","":"w","":"w","":"w","":"w","":"x","":"x","":"x","":"x","":"y","":"y","":"y","":"y","":"y","":"y","":"y","":"y","":"y","":"y","":"y","":"y","":"y","":"y","":"y","":"z","":"z","":"z","":"z","":"z","":"z","":"z","":"z","":"z","":"z","":"z","":"z","":"z","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":""};return t}),e.define("select2/data/base",["../utils"],function(t){function e(){e.__super__.constructor.call(this)}return t.Extend(e,t.Observable),e.prototype.current=function(){throw new Error("The `current` method must be defined in child classes.")},e.prototype.query=function(){throw new Error("The `query` method must be defined in child classes.")},e.prototype.bind=function(){},e.prototype.destroy=function(){},e.prototype.generateResultId=function(e,i){var n=e.id+"-result-";return n+=t.generateChars(4),n+=null!=i.id?"-"+i.id.toString():"-"+t.generateChars(4)},e}),e.define("select2/data/select",["./base","../utils","jquery"],function(t,e,i){function n(t,e){this.$element=t,this.options=e,n.__super__.constructor.call(this)}return e.Extend(n,t),n.prototype.current=function(t){var e=[],n=this;this.$element.find(":selected").each(function(){var t=i(this),s=n.item(t);e.push(s)}),t(e)},n.prototype.select=function(t){var e=this;if(t.selected=!0,i(t.element).is("option"))return t.element.selected=!0,void this.$element.trigger("change");if(this.$element.prop("multiple"))this.current(function(n){var s=[];t=[t],t.push.apply(t,n);for(var r=0;r<t.length;r++){var o=t[r].id;-1===i.inArray(o,s)&&s.push(o)}e.$element.val(s),e.$element.trigger("change")});else{var n=t.id;this.$element.val(n),this.$element.trigger("change")}},n.prototype.unselect=function(t){var e=this;if(this.$element.prop("multiple"))return t.selected=!1,i(t.element).is("option")?(t.element.selected=!1,void this.$element.trigger("change")):void this.current(function(n){for(var s=[],r=0;r<n.length;r++){var o=n[r].id;o!==t.id&&-1===i.inArray(o,s)&&s.push(o)}e.$element.val(s),e.$element.trigger("change")})},n.prototype.bind=function(t){var e=this;this.container=t,t.on("select",function(t){e.select(t.data)}),t.on("unselect",function(t){e.unselect(t.data)})},n.prototype.destroy=function(){this.$element.find("*").each(function(){i.removeData(this,"data")})},n.prototype.query=function(t,e){var n=[],s=this,r=this.$element.children();r.each(function(){var e=i(this);if(e.is("option")||e.is("optgroup")){var r=s.item(e),o=s.matches(t,r);null!==o&&n.push(o)}}),e({results:n})},n.prototype.addOptions=function(t){e.appendMany(this.$element,t)},n.prototype.option=function(t){var e;t.children?(e=document.createElement("optgroup"),e.label=t.text):(e=document.createElement("option"),void 0!==e.textContent?e.textContent=t.text:e.innerText=t.text),t.id&&(e.value=t.id),t.disabled&&(e.disabled=!0),t.selected&&(e.selected=!0),t.title&&(e.title=t.title);var n=i(e),s=this._normalizeItem(t);return s.element=e,i.data(e,"data",s),n},n.prototype.item=function(t){var e={};if(e=i.data(t[0],"data"),null!=e)return e;if(t.is("option"))e={id:t.val(),text:t.text(),disabled:t.prop("disabled"),selected:t.prop("selected"),title:t.prop("title")};else if(t.is("optgroup")){e={text:t.prop("label"),children:[],title:t.prop("title")};for(var n=t.children("option"),s=[],r=0;r<n.length;r++){var o=i(n[r]),a=this.item(o);s.push(a)}e.children=s}return e=this._normalizeItem(e),e.element=t[0],i.data(t[0],"data",e),e},n.prototype._normalizeItem=function(t){i.isPlainObject(t)||(t={id:t,text:t}),t=i.extend({},{text:""},t);var e={selected:!1,disabled:!1};return null!=t.id&&(t.id=t.id.toString()),null!=t.text&&(t.text=t.text.toString()),null==t._resultId&&t.id&&null!=this.container&&(t._resultId=this.generateResultId(this.container,t)),i.extend({},e,t)},n.prototype.matches=function(t,e){var i=this.options.get("matcher");return i(t,e)},n}),e.define("select2/data/array",["./select","../utils","jquery"],function(t,e,i){function n(t,e){var i=e.get("data")||[];n.__super__.constructor.call(this,t,e),this.addOptions(this.convertToOptions(i))}return e.Extend(n,t),n.prototype.select=function(t){var e=this.$element.find("option").filter(function(e,i){return i.value==t.id.toString()});0===e.length&&(e=this.option(t),this.addOptions(e)),n.__super__.select.call(this,t)},n.prototype.convertToOptions=function(t){function n(t){return function(){return i(this).val()==t.id}}for(var s=this,r=this.$element.find("option"),o=r.map(function(){return s.item(i(this)).id}).get(),a=[],l=0;l<t.length;l++){var h=this._normalizeItem(t[l]);if(i.inArray(h.id,o)>=0){var c=r.filter(n(h)),u=this.item(c),d=(i.extend(!0,{},u,h),this.option(u));c.replaceWith(d)}else{var f=this.option(h);if(h.children){var p=this.convertToOptions(h.children);e.appendMany(f,p)}a.push(f)}}return a},n}),e.define("select2/data/ajax",["./array","../utils","jquery"],function(t,e,i){function n(e,i){this.ajaxOptions=this._applyDefaults(i.get("ajax")),null!=this.ajaxOptions.processResults&&(this.processResults=this.ajaxOptions.processResults),t.__super__.constructor.call(this,e,i)}return e.Extend(n,t),n.prototype._applyDefaults=function(t){var e={data:function(t){return{q:t.term}},transport:function(t,e,n){var s=i.ajax(t);return s.then(e),s.fail(n),s}};return i.extend({},e,t,!0)},n.prototype.processResults=function(t){return t},n.prototype.query=function(t,e){function n(){var n=r.transport(r,function(n){var r=s.processResults(n,t);s.options.get("debug")&&window.console&&console.error&&(r&&r.results&&i.isArray(r.results)||console.error("Select2: The AJAX results did not return an array in the `results` key of the response.")),e(r)},function(){});s._request=n}var s=this;null!=this._request&&(i.isFunction(this._request.abort)&&this._request.abort(),this._request=null);var r=i.extend({type:"GET"},this.ajaxOptions);"function"==typeof r.url&&(r.url=r.url(t)),"function"==typeof r.data&&(r.data=r.data(t)),this.ajaxOptions.delay&&""!==t.term?(this._queryTimeout&&window.clearTimeout(this._queryTimeout),this._queryTimeout=window.setTimeout(n,this.ajaxOptions.delay)):n()},n}),e.define("select2/data/tags",["jquery"],function(t){function e(e,i,n){var s=n.get("tags"),r=n.get("createTag");if(void 0!==r&&(this.createTag=r),e.call(this,i,n),t.isArray(s))for(var o=0;o<s.length;o++){var a=s[o],l=this._normalizeItem(a),h=this.option(l);this.$element.append(h)}}return e.prototype.query=function(t,e,i){function n(t,r){for(var o=t.results,a=0;a<o.length;a++){var l=o[a],h=null!=l.children&&!n({results:l.children},!0),c=l.text===e.term;if(c||h)return r?!1:(t.data=o,void i(t))}if(r)return!0;var u=s.createTag(e);if(null!=u){var d=s.option(u);d.attr("data-select2-tag",!0),s.addOptions([d]),s.insertTag(o,u)}t.results=o,i(t)}var s=this;return this._removeOldTags(),null==e.term||null!=e.page?void t.call(this,e,i):void t.call(this,e,n)},e.prototype.createTag=function(e,i){var n=t.trim(i.term);return""===n?null:{id:n,text:n}},e.prototype.insertTag=function(t,e,i){e.unshift(i)},e.prototype._removeOldTags=function(){var e=(this._lastTag,this.$element.find("option[data-select2-tag]"));e.each(function(){this.selected||t(this).remove()})},e}),e.define("select2/data/tokenizer",["jquery"],function(t){function e(t,e,i){var n=i.get("tokenizer");void 0!==n&&(this.tokenizer=n),t.call(this,e,i)}return e.prototype.bind=function(t,e,i){t.call(this,e,i),this.$search=e.dropdown.$search||e.selection.$search||i.find(".select2-search__field")},e.prototype.query=function(t,e,i){function n(t){s.select(t)}var s=this;e.term=e.term||"";var r=this.tokenizer(e,this.options,n);r.term!==e.term&&(this.$search.length&&(this.$search.val(r.term),this.$search.focus()),e.term=r.term),t.call(this,e,i)},e.prototype.tokenizer=function(e,i,n,s){for(var r=n.get("tokenSeparators")||[],o=i.term,a=0,l=this.createTag||function(t){return{id:t.term,text:t.term}};a<o.length;){var h=o[a];if(-1!==t.inArray(h,r)){var c=o.substr(0,a),u=t.extend({},i,{term:c}),d=l(u);s(d),o=o.substr(a+1)||"",a=0}else a++}return{term:o}},e}),e.define("select2/data/minimumInputLength",[],function(){function t(t,e,i){this.minimumInputLength=i.get("minimumInputLength"),t.call(this,e,i)}return t.prototype.query=function(t,e,i){return e.term=e.term||"",e.term.length<this.minimumInputLength?void this.trigger("results:message",{message:"inputTooShort",args:{minimum:this.minimumInputLength,input:e.term,params:e}}):void t.call(this,e,i)},t}),e.define("select2/data/maximumInputLength",[],function(){function t(t,e,i){this.maximumInputLength=i.get("maximumInputLength"),t.call(this,e,i)}return t.prototype.query=function(t,e,i){return e.term=e.term||"",this.maximumInputLength>0&&e.term.length>this.maximumInputLength?void this.trigger("results:message",{message:"inputTooLong",args:{maximum:this.maximumInputLength,input:e.term,params:e}}):void t.call(this,e,i)},t}),e.define("select2/data/maximumSelectionLength",[],function(){function t(t,e,i){this.maximumSelectionLength=i.get("maximumSelectionLength"),t.call(this,e,i)}return t.prototype.query=function(t,e,i){var n=this;this.current(function(s){var r=null!=s?s.length:0;return n.maximumSelectionLength>0&&r>=n.maximumSelectionLength?void n.trigger("results:message",{message:"maximumSelected",args:{maximum:n.maximumSelectionLength}}):void t.call(n,e,i)})},t}),e.define("select2/dropdown",["jquery","./utils"],function(t,e){function i(t,e){this.$element=t,this.options=e,i.__super__.constructor.call(this)}return e.Extend(i,e.Observable),i.prototype.render=function(){var e=t('<span class="select2-dropdown"><span class="select2-results"></span></span>');return e.attr("dir",this.options.get("dir")),this.$dropdown=e,e},i.prototype.position=function(){},i.prototype.destroy=function(){this.$dropdown.remove()},i}),e.define("select2/dropdown/search",["jquery","../utils"],function(t){function e(){}return e.prototype.render=function(e){var i=e.call(this),n=t('<span class="select2-search select2-search--dropdown"><input class="select2-search__field" type="search" tabindex="-1" autocomplete="off" autocorrect="off" autocapitalize="off" spellcheck="false" role="textbox" /></span>');return this.$searchContainer=n,this.$search=n.find("input"),i.prepend(n),i},e.prototype.bind=function(e,i,n){var s=this;e.call(this,i,n),this.$search.on("keydown",function(t){s.trigger("keypress",t),s._keyUpPrevented=t.isDefaultPrevented()}),this.$search.on("input",function(){t(this).off("keyup")}),this.$search.on("keyup input",function(t){s.handleSearch(t)}),i.on("open",function(){s.$search.attr("tabindex",0),s.$search.focus(),window.setTimeout(function(){s.$search.focus()},0)}),i.on("close",function(){s.$search.attr("tabindex",-1),s.$search.val("")}),i.on("results:all",function(t){if(null==t.query.term||""===t.query.term){var e=s.showSearch(t);e?s.$searchContainer.removeClass("select2-search--hide"):s.$searchContainer.addClass("select2-search--hide")}})},e.prototype.handleSearch=function(){if(!this._keyUpPrevented){var t=this.$search.val();this.trigger("query",{term:t})}this._keyUpPrevented=!1},e.prototype.showSearch=function(){return!0},e}),e.define("select2/dropdown/hidePlaceholder",[],function(){function t(t,e,i,n){this.placeholder=this.normalizePlaceholder(i.get("placeholder")),t.call(this,e,i,n)}return t.prototype.append=function(t,e){e.results=this.removePlaceholder(e.results),t.call(this,e)},t.prototype.normalizePlaceholder=function(t,e){return"string"==typeof e&&(e={id:"",text:e}),e},t.prototype.removePlaceholder=function(t,e){for(var i=e.slice(0),n=e.length-1;n>=0;n--){var s=e[n];this.placeholder.id===s.id&&i.splice(n,1)}return i},t}),e.define("select2/dropdown/infiniteScroll",["jquery"],function(t){function e(t,e,i,n){this.lastParams={},t.call(this,e,i,n),this.$loadingMore=this.createLoadingMore(),this.loading=!1}return e.prototype.append=function(t,e){this.$loadingMore.remove(),this.loading=!1,t.call(this,e),this.showLoadingMore(e)&&this.$results.append(this.$loadingMore)},e.prototype.bind=function(e,i,n){var s=this;e.call(this,i,n),i.on("query",function(t){s.lastParams=t,s.loading=!0}),i.on("query:append",function(t){s.lastParams=t,s.loading=!0}),this.$results.on("scroll",function(){var e=t.contains(document.documentElement,s.$loadingMore[0]);if(!s.loading&&e){var i=s.$results.offset().top+s.$results.outerHeight(!1),n=s.$loadingMore.offset().top+s.$loadingMore.outerHeight(!1);i+50>=n&&s.loadMore()}})},e.prototype.loadMore=function(){this.loading=!0;var e=t.extend({},{page:1},this.lastParams);e.page++,this.trigger("query:append",e)},e.prototype.showLoadingMore=function(t,e){return e.pagination&&e.pagination.more},e.prototype.createLoadingMore=function(){var e=t('<li class="option load-more" role="treeitem"></li>'),i=this.options.get("translations").get("loadingMore");return e.html(i(this.lastParams)),e},e}),e.define("select2/dropdown/attachBody",["jquery","../utils"],function(t,e){function i(t,e,i){this.$dropdownParent=i.get("dropdownParent")||document.body,t.call(this,e,i)}return i.prototype.bind=function(t,e,i){var n=this,s=!1;t.call(this,e,i),e.on("open",function(){n._showDropdown(),n._attachPositioningHandler(e),s||(s=!0,e.on("results:all",function(){n._positionDropdown(),n._resizeDropdown()}),e.on("results:append",function(){n._positionDropdown(),n._resizeDropdown()}))}),e.on("close",function(){n._hideDropdown(),n._detachPositioningHandler(e)}),this.$dropdownContainer.on("mousedown",function(t){t.stopPropagation()})},i.prototype.position=function(t,e,i){e.attr("class",i.attr("class")),e.removeClass("select2"),e.addClass("select2-container--open"),e.css({position:"absolute",top:-999999}),this.$container=i},i.prototype.render=function(e){var i=t("<span></span>"),n=e.call(this);return i.append(n),this.$dropdownContainer=i,i},i.prototype._hideDropdown=function(){this.$dropdownContainer.detach()},i.prototype._attachPositioningHandler=function(i){var n=this,s="scroll.select2."+i.id,r="resize.select2."+i.id,o="orientationchange.select2."+i.id,a=this.$container.parents().filter(e.hasScroll);a.each(function(){t(this).data("select2-scroll-position",{x:t(this).scrollLeft(),y:t(this).scrollTop()})}),a.on(s,function(){var e=t(this).data("select2-scroll-position");t(this).scrollTop(e.y)}),t(window).on(s+" "+r+" "+o,function(){n._positionDropdown(),n._resizeDropdown()})},i.prototype._detachPositioningHandler=function(i){var n="scroll.select2."+i.id,s="resize.select2."+i.id,r="orientationchange.select2."+i.id,o=this.$container.parents().filter(e.hasScroll);o.off(n),t(window).off(n+" "+s+" "+r)},i.prototype._positionDropdown=function(){var e=t(window),i=this.$dropdown.hasClass("select2-dropdown--above"),n=this.$dropdown.hasClass("select2-dropdown--below"),s=null,r=(this.$container.position(),this.$container.offset());r.bottom=r.top+this.$container.outerHeight(!1);var o={height:this.$container.outerHeight(!1)};o.top=r.top,o.bottom=r.top+o.height;var a={height:this.$dropdown.outerHeight(!1)},l={top:e.scrollTop(),bottom:e.scrollTop()+e.height()},h=l.top<r.top-a.height,c=l.bottom>r.bottom+a.height,u={left:r.left,top:o.bottom};i||n||(s="below"),c||!h||i?!h&&c&&i&&(s="below"):s="above",("above"==s||i&&"below"!==s)&&(u.top=o.top-a.height),null!=s&&(this.$dropdown.removeClass("select2-dropdown--below select2-dropdown--above").addClass("select2-dropdown--"+s),this.$container.removeClass("select2-container--below select2-container--above").addClass("select2-container--"+s)),this.$dropdownContainer.css(u)},i.prototype._resizeDropdown=function(){this.$dropdownContainer.width();var t={width:this.$container.outerWidth(!1)+"px"};this.options.get("dropdownAutoWidth")&&(t.minWidth=t.width,t.width="auto"),this.$dropdown.css(t)},i.prototype._showDropdown=function(){this.$dropdownContainer.appendTo(this.$dropdownParent),this._positionDropdown(),this._resizeDropdown()},i}),e.define("select2/dropdown/minimumResultsForSearch",[],function(){function t(e){for(var i=0,n=0;n<e.length;n++){var s=e[n];s.children?i+=t(s.children):i++}return i}function e(t,e,i,n){this.minimumResultsForSearch=i.get("minimumResultsForSearch"),this.minimumResultsForSearch<0&&(this.minimumResultsForSearch=1/0),t.call(this,e,i,n)}return e.prototype.showSearch=function(e,i){return t(i.data.results)<this.minimumResultsForSearch?!1:e.call(this,i)},e}),e.define("select2/dropdown/selectOnClose",[],function(){function t(){}return t.prototype.bind=function(t,e,i){var n=this;t.call(this,e,i),e.on("close",function(){n._handleSelectOnClose()})},t.prototype._handleSelectOnClose=function(){var t=this.getHighlightedResults();t.length<1||this.trigger("select",{data:t.data("data")})},t}),e.define("select2/dropdown/closeOnSelect",[],function(){function t(){}return t.prototype.bind=function(t,e,i){var n=this;t.call(this,e,i),e.on("select",function(t){n._selectTriggered(t)}),e.on("unselect",function(t){n._selectTriggered(t)})},t.prototype._selectTriggered=function(t,e){var i=e.originalEvent;i&&i.ctrlKey||this.trigger("close")},t}),e.define("select2/i18n/en",[],function(){return{errorLoading:function(){return"The results could not be loaded."},inputTooLong:function(t){var e=t.input.length-t.maximum,i="Please delete "+e+" character";return 1!=e&&(i+="s"),i},inputTooShort:function(t){var e=t.minimum-t.input.length,i="Please enter "+e+" or more characters";return i},loadingMore:function(){return"Loading more results"},maximumSelected:function(t){var e="You can only select "+t.maximum+" item";return 1!=t.maximum&&(e+="s"),e},noResults:function(){return"No results found"},searching:function(){return"Searching"}}}),e.define("select2/defaults",["jquery","require","./results","./selection/single","./selection/multiple","./selection/placeholder","./selection/allowClear","./selection/search","./selection/eventRelay","./utils","./translation","./diacritics","./data/select","./data/array","./data/ajax","./data/tags","./data/tokenizer","./data/minimumInputLength","./data/maximumInputLength","./data/maximumSelectionLength","./dropdown","./dropdown/search","./dropdown/hidePlaceholder","./dropdown/infiniteScroll","./dropdown/attachBody","./dropdown/minimumResultsForSearch","./dropdown/selectOnClose","./dropdown/closeOnSelect","./i18n/en"],function(t,e,i,n,s,r,o,a,l,h,c,u,d,f,p,m,g,v,y,b,w,x,_,k,C,S,T,D,M){function P(){this.reset()}P.prototype.apply=function(u){if(u=t.extend({},this.defaults,u),null==u.dataAdapter){if(u.dataAdapter=null!=u.ajax?p:null!=u.data?f:d,u.minimumInputLength>0&&(u.dataAdapter=h.Decorate(u.dataAdapter,v)),u.maximumInputLength>0&&(u.dataAdapter=h.Decorate(u.dataAdapter,y)),u.maximumSelectionLength>0&&(u.dataAdapter=h.Decorate(u.dataAdapter,b)),u.tags&&(u.dataAdapter=h.Decorate(u.dataAdapter,m)),(null!=u.tokenSeparators||null!=u.tokenizer)&&(u.dataAdapter=h.Decorate(u.dataAdapter,g)),null!=u.query){var M=e(u.amdBase+"compat/query");u.dataAdapter=h.Decorate(u.dataAdapter,M)}if(null!=u.initSelection){var P=e(u.amdBase+"compat/initSelection");u.dataAdapter=h.Decorate(u.dataAdapter,P)}}if(null==u.resultsAdapter&&(u.resultsAdapter=i,null!=u.ajax&&(u.resultsAdapter=h.Decorate(u.resultsAdapter,k)),null!=u.placeholder&&(u.resultsAdapter=h.Decorate(u.resultsAdapter,_)),u.selectOnClose&&(u.resultsAdapter=h.Decorate(u.resultsAdapter,T))),null==u.dropdownAdapter){if(u.multiple)u.dropdownAdapter=w;else{var I=h.Decorate(w,x);u.dropdownAdapter=I}if(0!==u.minimumResultsForSearch&&(u.dropdownAdapter=h.Decorate(u.dropdownAdapter,S)),u.closeOnSelect&&(u.dropdownAdapter=h.Decorate(u.dropdownAdapter,D)),null!=u.dropdownCssClass||null!=u.dropdownCss||null!=u.adaptDropdownCssClass){var E=e(u.amdBase+"compat/dropdownCss");u.dropdownAdapter=h.Decorate(u.dropdownAdapter,E)}u.dropdownAdapter=h.Decorate(u.dropdownAdapter,C)}if(null==u.selectionAdapter){if(u.selectionAdapter=u.multiple?s:n,null!=u.placeholder&&(u.selectionAdapter=h.Decorate(u.selectionAdapter,r)),u.allowClear&&(u.selectionAdapter=h.Decorate(u.selectionAdapter,o)),u.multiple&&(u.selectionAdapter=h.Decorate(u.selectionAdapter,a)),null!=u.containerCssClass||null!=u.containerCss||null!=u.adaptContainerCssClass){var $=e(u.amdBase+"compat/containerCss");u.selectionAdapter=h.Decorate(u.selectionAdapter,$)}u.selectionAdapter=h.Decorate(u.selectionAdapter,l)}if("string"==typeof u.language)if(u.language.indexOf("-")>0){var F=u.language.split("-"),A=F[0];u.language=[u.language,A]}else u.language=[u.language];if(t.isArray(u.language)){var H=new c;u.language.push("en");for(var L=u.language,O=0;O<L.length;O++){var R=L[O],z={};try{z=c.loadPath(R)}catch(t){try{R=this.defaults.amdLanguageBase+R,z=c.loadPath(R)}catch(t){u.debug&&window.console&&console.warn&&console.warn('Select2: The language file for "'+R+'" could not be automatically loaded. A fallback will be used instead.');continue}}H.extend(z)}u.translations=H}else{var N=c.loadPath(this.defaults.amdLanguageBase+"en"),B=new c(u.language);B.extend(N),u.translations=B}return u},P.prototype.reset=function(){function e(t){function e(t){return u[t]||t}return t.replace(/[^\u0000-\u007E]/g,e)}function i(n,s){if(""===t.trim(n.term))return s;if(s.children&&s.children.length>0){for(var r=t.extend(!0,{},s),o=s.children.length-1;o>=0;o--){var a=s.children[o],l=i(n,a);null==l&&r.children.splice(o,1)}return r.children.length>0?r:i(n,r)}var h=e(s.text).toUpperCase(),c=e(n.term).toUpperCase();return h.indexOf(c)>-1?s:null}this.defaults={amdBase:"./",amdLanguageBase:"./i18n/",closeOnSelect:!0,debug:!1,dropdownAutoWidth:!1,escapeMarkup:h.escapeMarkup,language:M,matcher:i,minimumInputLength:0,maximumInputLength:0,maximumSelectionLength:0,minimumResultsForSearch:0,selectOnClose:!1,sorter:function(t){return t},templateResult:function(t){return t.text},templateSelection:function(t){return t.text},theme:"default",width:"resolve"}},P.prototype.set=function(e,i){var n=t.camelCase(e),s={};s[n]=i;var r=h._convertData(s);t.extend(this.defaults,r)};var I=new P;return I}),e.define("select2/options",["require","jquery","./defaults","./utils"],function(t,e,i,n){function s(e,s){if(this.options=e,null!=s&&this.fromElement(s),this.options=i.apply(this.options),s&&s.is("input")){var r=t(this.get("amdBase")+"compat/inputData");this.options.dataAdapter=n.Decorate(this.options.dataAdapter,r)}}return s.prototype.fromElement=function(t){var i=["select2"];null==this.options.multiple&&(this.options.multiple=t.prop("multiple")),null==this.options.disabled&&(this.options.disabled=t.prop("disabled")),null==this.options.language&&(t.prop("lang")?this.options.language=t.prop("lang").toLowerCase():t.closest("[lang]").prop("lang")&&(this.options.language=t.closest("[lang]").prop("lang"))),null==this.options.dir&&(this.options.dir=t.prop("dir")?t.prop("dir"):t.closest("[dir]").prop("dir")?t.closest("[dir]").prop("dir"):"ltr"),t.prop("disabled",this.options.disabled),t.prop("multiple",this.options.multiple),t.data("select2Tags")&&(this.options.debug&&window.console&&console.warn&&console.warn('Select2: The `data-select2-tags` attribute has been changed to use the `data-data` and `data-tags="true"` attributes and will be removed in future versions of Select2.'),t.data("data",t.data("select2Tags")),t.data("tags",!0)),t.data("ajaxUrl")&&(this.options.debug&&window.console&&console.warn&&console.warn("Select2: The `data-ajax-url` attribute has been changed to `data-ajax--url` and support for the old attribute will be removed in future versions of Select2."),t.attr("ajax--url",t.data("ajaxUrl")),t.data("ajax--url",t.data("ajaxUrl")));var s={};s=e.fn.jquery&&"1."==e.fn.jquery.substr(0,2)&&t[0].dataset?e.extend(!0,{},t[0].dataset,t.data()):t.data();var r=e.extend(!0,{},s);r=n._convertData(r);for(var o in r)e.inArray(o,i)>-1||(e.isPlainObject(this.options[o])?e.extend(this.options[o],r[o]):this.options[o]=r[o]);return this},s.prototype.get=function(t){return this.options[t]},s.prototype.set=function(t,e){this.options[t]=e},s}),e.define("select2/core",["jquery","./options","./utils","./keys"],function(t,e,i,n){var s=function(t,i){null!=t.data("select2")&&t.data("select2").destroy(),this.$element=t,this.id=this._generateId(t),i=i||{},this.options=new e(i,t),s.__super__.constructor.call(this);var n=t.attr("tabindex")||0;t.data("old-tabindex",n),t.attr("tabindex","-1");var r=this.options.get("dataAdapter");this.dataAdapter=new r(t,this.options);var o=this.render();this._placeContainer(o);var a=this.options.get("selectionAdapter");this.selection=new a(t,this.options),this.$selection=this.selection.render(),this.selection.position(this.$selection,o);var l=this.options.get("dropdownAdapter");this.dropdown=new l(t,this.options),this.$dropdown=this.dropdown.render(),this.dropdown.position(this.$dropdown,o);var h=this.options.get("resultsAdapter");this.results=new h(t,this.options,this.dataAdapter),this.$results=this.results.render(),this.results.position(this.$results,this.$dropdown);var c=this;this._bindAdapters(),this._registerDomEvents(),this._registerDataEvents(),this._registerSelectionEvents(),this._registerDropdownEvents(),this._registerResultsEvents(),this._registerEvents(),this.dataAdapter.current(function(t){c.trigger("selection:update",{data:t})}),t.addClass("select2-hidden-accessible"),t.attr("aria-hidden","true"),this._syncAttributes(),t.data("select2",this)};return i.Extend(s,i.Observable),s.prototype._generateId=function(t){var e="";return e=null!=t.attr("id")?t.attr("id"):null!=t.attr("name")?t.attr("name")+"-"+i.generateChars(2):i.generateChars(4),e="select2-"+e},s.prototype._placeContainer=function(t){t.insertAfter(this.$element);var e=this._resolveWidth(this.$element,this.options.get("width"));null!=e&&t.css("width",e)},s.prototype._resolveWidth=function(t,e){var i=/^width:(([-+]?([0-9]*\.)?[0-9]+)(px|em|ex|%|in|cm|mm|pt|pc))/i;if("resolve"==e){var n=this._resolveWidth(t,"style");return null!=n?n:this._resolveWidth(t,"element")}if("element"==e){var s=t.outerWidth(!1);return 0>=s?"auto":s+"px"}if("style"==e){var r=t.attr("style");if("string"!=typeof r)return null;for(var o=r.split(";"),a=0,l=o.length;l>a;a+=1){var h=o[a].replace(/\s/g,""),c=h.match(i);if(null!==c&&c.length>=1)return c[1]}return null}return e},s.prototype._bindAdapters=function(){this.dataAdapter.bind(this,this.$container),this.selection.bind(this,this.$container),this.dropdown.bind(this,this.$container),this.results.bind(this,this.$container)},s.prototype._registerDomEvents=function(){var e=this;this.$element.on("change.select2",function(){e.dataAdapter.current(function(t){e.trigger("selection:update",{data:t})})}),this._sync=i.bind(this._syncAttributes,this),this.$element[0].attachEvent&&this.$element[0].attachEvent("onpropertychange",this._sync);var n=window.MutationObserver||window.WebKitMutationObserver||window.MozMutationObserver;null!=n?(this._observer=new n(function(i){t.each(i,e._sync)}),this._observer.observe(this.$element[0],{attributes:!0,subtree:!1})):this.$element[0].addEventListener&&this.$element[0].addEventListener("DOMAttrModified",e._sync,!1)},s.prototype._registerDataEvents=function(){var t=this;this.dataAdapter.on("*",function(e,i){t.trigger(e,i)})},s.prototype._registerSelectionEvents=function(){var e=this,i=["toggle"];this.selection.on("toggle",function(){e.toggleDropdown()}),this.selection.on("*",function(n,s){-1===t.inArray(n,i)&&e.trigger(n,s)})},s.prototype._registerDropdownEvents=function(){var t=this;this.dropdown.on("*",function(e,i){t.trigger(e,i)})},s.prototype._registerResultsEvents=function(){var t=this;this.results.on("*",function(e,i){t.trigger(e,i)})},s.prototype._registerEvents=function(){var t=this;this.on("open",function(){t.$container.addClass("select2-container--open")}),this.on("close",function(){t.$container.removeClass("select2-container--open")}),this.on("enable",function(){t.$container.removeClass("select2-container--disabled")}),this.on("disable",function(){t.$container.addClass("select2-container--disabled")}),this.on("focus",function(){t.$container.addClass("select2-container--focus")}),this.on("blur",function(){t.$container.removeClass("select2-container--focus")}),this.on("query",function(e){t.isOpen()||t.trigger("open"),this.dataAdapter.query(e,function(i){t.trigger("results:all",{data:i,query:e})})}),this.on("query:append",function(e){this.dataAdapter.query(e,function(i){t.trigger("results:append",{data:i,query:e})})}),this.on("keypress",function(e){var i=e.which;t.isOpen()?i===n.ENTER?(t.trigger("results:select"),e.preventDefault()):i===n.SPACE&&e.ctrlKey?(t.trigger("results:toggle"),e.preventDefault()):i===n.UP?(t.trigger("results:previous"),e.preventDefault()):i===n.DOWN?(t.trigger("results:next"),e.preventDefault()):(i===n.ESC||i===n.TAB)&&(t.close(),e.preventDefault()):(i===n.ENTER||i===n.SPACE||(i===n.DOWN||i===n.UP)&&e.altKey)&&(t.open(),e.preventDefault())})},s.prototype._syncAttributes=function(){this.options.set("disabled",this.$element.prop("disabled")),this.options.get("disabled")?(this.isOpen()&&this.close(),this.trigger("disable")):this.trigger("enable")},s.prototype.trigger=function(t,e){var i=s.__super__.trigger,n={open:"opening",close:"closing",select:"selecting",unselect:"unselecting"};if(t in n){var r=n[t],o={prevented:!1,name:t,args:e};if(i.call(this,r,o),o.prevented)return void(e.prevented=!0)}i.call(this,t,e)},s.prototype.toggleDropdown=function(){this.options.get("disabled")||(this.isOpen()?this.close():this.open())},s.prototype.open=function(){this.isOpen()||(this.trigger("query",{}),this.trigger("open"))},s.prototype.close=function(){this.isOpen()&&this.trigger("close")},s.prototype.isOpen=function(){return this.$container.hasClass("select2-container--open")},s.prototype.enable=function(t){this.options.get("debug")&&window.console&&console.warn&&console.warn('Select2: The `select2("enable")` method has been deprecated and will be removed in later Select2 versions. Use $element.prop("disabled") instead.'),(null==t||0===t.length)&&(t=[!0]);var e=!t[0];this.$element.prop("disabled",e)},s.prototype.data=function(){this.options.get("debug")&&arguments.length>0&&window.console&&console.warn&&console.warn('Select2: Data can no longer be set using `select2("data")`. You should consider setting the value instead using `$element.val()`.');var t=[];return this.dataAdapter.current(function(e){t=e}),t},s.prototype.val=function(e){if(this.options.get("debug")&&window.console&&console.warn&&console.warn('Select2: The `select2("val")` method has been deprecated and will be removed in later Select2 versions. Use $element.val() instead.'),null==e||0===e.length)return this.$element.val();var i=e[0];t.isArray(i)&&(i=t.map(i,function(t){return t.toString()})),this.$element.val(i).trigger("change")},s.prototype.destroy=function(){this.$container.remove(),this.$element[0].detachEvent&&this.$element[0].detachEvent("onpropertychange",this._sync),null!=this._observer?(this._observer.disconnect(),this._observer=null):this.$element[0].removeEventListener&&this.$element[0].removeEventListener("DOMAttrModified",this._sync,!1),this._sync=null,this.$element.off(".select2"),this.$element.attr("tabindex",this.$element.data("old-tabindex")),this.$element.removeClass("select2-hidden-accessible"),this.$element.attr("aria-hidden","false"),this.$element.removeData("select2"),this.dataAdapter.destroy(),this.selection.destroy(),this.dropdown.destroy(),this.results.destroy(),this.dataAdapter=null,this.selection=null,this.dropdown=null,this.results=null},s.prototype.render=function(){var e=t('<span class="select2 select2-container"><span class="selection"></span><span class="dropdown-wrapper" aria-hidden="true"></span></span>');return e.attr("dir",this.options.get("dir")),this.$container=e,this.$container.addClass("select2-container--"+this.options.get("theme")),e.data("element",this.$element),e},s}),e.define("select2/compat/utils",["jquery"],function(t){function e(e,i,n){var s,r,o=[];s=t.trim(e.attr("class")),s&&(s=""+s,t(s.split(/\s+/)).each(function(){0===this.indexOf("select2-")&&o.push(this)})),s=t.trim(i.attr("class")),s&&(s=""+s,t(s.split(/\s+/)).each(function(){0!==this.indexOf("select2-")&&(r=n(this),null!=r&&o.push(r))})),e.attr("class",o.join(" "))}return{syncCssClasses:e}}),e.define("select2/compat/containerCss",["jquery","./utils"],function(t,e){function i(){return null}function n(){}return n.prototype.render=function(n){var s=n.call(this),r=this.options.get("containerCssClass")||"";t.isFunction(r)&&(r=r(this.$element));var o=this.options.get("adaptContainerCssClass");if(o=o||i,-1!==r.indexOf(":all:")){r=r.replace(":all","");var a=o;o=function(t){var e=a(t);return null!=e?e+" "+t:t}}var l=this.options.get("containerCss")||{};return t.isFunction(l)&&(l=l(this.$element)),e.syncCssClasses(s,this.$element,o),s.css(l),s.addClass(r),s},n}),e.define("select2/compat/dropdownCss",["jquery","./utils"],function(t,e){function i(){return null}function n(){}return n.prototype.render=function(n){var s=n.call(this),r=this.options.get("dropdownCssClass")||"";t.isFunction(r)&&(r=r(this.$element));var o=this.options.get("adaptDropdownCssClass");if(o=o||i,-1!==r.indexOf(":all:")){r=r.replace(":all","");var a=o;o=function(t){var e=a(t);return null!=e?e+" "+t:t}}var l=this.options.get("dropdownCss")||{};return t.isFunction(l)&&(l=l(this.$element)),e.syncCssClasses(s,this.$element,o),s.css(l),s.addClass(r),s},n}),e.define("select2/compat/initSelection",["jquery"],function(t){function e(t,e,i){i.get("debug")&&window.console&&console.warn&&console.warn("Select2: The `initSelection` option has been deprecated in favor of a custom data adapter that overrides the `current` method. This method is now called multiple times instead of a single time when the instance is initialized. Support will be removed for the `initSelection` option in future versions of Select2"),this.initSelection=i.get("initSelection"),this._isInitialized=!1,t.call(this,e,i)}return e.prototype.current=function(e,i){var n=this;return this._isInitialized?void e.call(this,i):void this.initSelection.call(null,this.$element,function(e){n._isInitialized=!0,t.isArray(e)||(e=[e]),i(e)})},e}),e.define("select2/compat/inputData",["jquery"],function(t){function e(t,e,i){this._currentData=[],this._valueSeparator=i.get("valueSeparator")||",","hidden"===e.prop("type")&&i.get("debug")&&console&&console.warn&&console.warn("Select2: Using a hidden input with Select2 is no longer supported and may stop working in the future. It is recommended to use a `<select>` element instead."),t.call(this,e,i)}return e.prototype.current=function(e,i){function n(e,i){var s=[];return e.selected||-1!==t.inArray(e.id,i)?(e.selected=!0,s.push(e)):e.selected=!1,e.children&&s.push.apply(s,n(e.children,i)),s}for(var s=[],r=0;r<this._currentData.length;r++){var o=this._currentData[r];s.push.apply(s,n(o,this.$element.val().split(this._valueSeparator)))}i(s)},e.prototype.select=function(e,i){if(this.options.get("multiple")){var n=this.$element.val();n+=this._valueSeparator+i.id,this.$element.val(n),this.$element.trigger("change")}else this.current(function(e){t.map(e,function(t){t.selected=!1})}),this.$element.val(i.id),this.$element.trigger("change")},e.prototype.unselect=function(t,e){var i=this;e.selected=!1,this.current(function(t){for(var n=[],s=0;s<t.length;s++){var r=t[s];e.id!=r.id&&n.push(r.id)}i.$element.val(n.join(i._valueSeparator)),i.$element.trigger("change")})},e.prototype.query=function(t,e,i){for(var n=[],s=0;s<this._currentData.length;s++){var r=this._currentData[s],o=this.matches(e,r);null!==o&&n.push(o)}i({results:n})},e.prototype.addOptions=function(e,i){var n=t.map(i,function(e){return t.data(e[0],"data")});this._currentData.push.apply(this._currentData,n)},e}),e.define("select2/compat/matcher",["jquery"],function(t){function e(e){function i(i,n){var s=t.extend(!0,{},n);if(null==i.term||""===t.trim(i.term))return s;if(n.children){for(var r=n.children.length-1;r>=0;r--){var o=n.children[r],a=e(i.term,o.text,o);a||s.children.splice(r,1)}if(s.children.length>0)return s}return e(i.term,n.text,n)?s:null}return i}return e}),e.define("select2/compat/query",[],function(){function t(t,e,i){i.get("debug")&&window.console&&console.warn&&console.warn("Select2: The `query` option has been deprecated in favor of a custom data adapter that overrides the `query` method. Support will be removed for the `query` option in future versions of Select2."),t.call(this,e,i)}return t.prototype.query=function(t,e,i){e.callback=i;var n=this.options.get("query");n.call(null,e)},t}),e.define("select2/dropdown/attachContainer",[],function(){function t(t,e,i){t.call(this,e,i)}return t.prototype.position=function(t,e,i){var n=i.find(".dropdown-wrapper");n.append(e),e.addClass("select2-dropdown--below"),i.addClass("select2-container--below")},t}),e.define("select2/dropdown/stopPropagation",[],function(){function t(){}return t.prototype.bind=function(t,e,i){t.call(this,e,i);var n=["blur","change","click","dblclick","focus","focusin","focusout","input","keydown","keyup","keypress","mousedown","mouseenter","mouseleave","mousemove","mouseover","mouseup","search","touchend","touchstart"];this.$dropdown.on(n.join(" "),function(t){t.stopPropagation()})},t}),e.define("select2/selection/stopPropagation",[],function(){function t(){}return t.prototype.bind=function(t,e,i){t.call(this,e,i);var n=["blur","change","click","dblclick","focus","focusin","focusout","input","keydown","keyup","keypress","mousedown","mouseenter","mouseleave","mousemove","mouseover","mouseup","search","touchend","touchstart"];this.$selection.on(n.join(" "),function(t){t.stopPropagation()})},t}),e.define("jquery.select2",["jquery","require","./select2/core","./select2/defaults"],function(t,e,i,n){if(e("jquery.mousewheel"),null==t.fn.select2){var s=["open","close","destroy"];t.fn.select2=function(e){if(e=e||{},"object"==typeof e)return this.each(function(){{var n=t.extend({},e,!0);new i(t(this),n)}}),this;if("string"==typeof e){var n=this.data("select2");null==n&&window.console&&console.error&&console.error("The select2('"+e+"') method was called on an element that is not using Select2.");var r=Array.prototype.slice.call(arguments,1),o=n[e](r);return t.inArray(e,s)>-1?this:o}throw new Error("Invalid arguments for Select2: "+e)}}return null==t.fn.select2.defaults&&(t.fn.select2.defaults=n),i}),function(i){"function"==typeof e.define&&e.define.amd?e.define("jquery.mousewheel",["jquery"],i):"object"==typeof exports?module.exports=i:i(t)}(function(t){function e(e){var o=e||window.event,a=l.call(arguments,1),h=0,u=0,d=0,f=0,p=0,m=0;if(e=t.event.fix(o),e.type="mousewheel","detail"in o&&(d=-1*o.detail),"wheelDelta"in o&&(d=o.wheelDelta),"wheelDeltaY"in o&&(d=o.wheelDeltaY),"wheelDeltaX"in o&&(u=-1*o.wheelDeltaX),"axis"in o&&o.axis===o.HORIZONTAL_AXIS&&(u=-1*d,d=0),h=0===d?u:d,"deltaY"in o&&(d=-1*o.deltaY,h=d),"deltaX"in o&&(u=o.deltaX,0===d&&(h=-1*u)),0!==d||0!==u){if(1===o.deltaMode){var g=t.data(this,"mousewheel-line-height");h*=g,d*=g,u*=g}else if(2===o.deltaMode){var v=t.data(this,"mousewheel-page-height");h*=v,d*=v,u*=v}if(f=Math.max(Math.abs(d),Math.abs(u)),(!r||r>f)&&(r=f,n(o,f)&&(r/=40)),n(o,f)&&(h/=40,u/=40,d/=40),h=Math[h>=1?"floor":"ceil"](h/r),u=Math[u>=1?"floor":"ceil"](u/r),d=Math[d>=1?"floor":"ceil"](d/r),c.settings.normalizeOffset&&this.getBoundingClientRect){var y=this.getBoundingClientRect();p=e.clientX-y.left,m=e.clientY-y.top}return e.deltaX=u,e.deltaY=d,e.deltaFactor=r,e.offsetX=p,e.offsetY=m,e.deltaMode=0,a.unshift(e,h,u,d),s&&clearTimeout(s),s=setTimeout(i,200),(t.event.dispatch||t.event.handle).apply(this,a)}}function i(){r=null}function n(t,e){return c.settings.adjustOldDeltas&&"mousewheel"===t.type&&e%120===0}var s,r,o=["wheel","mousewheel","DOMMouseScroll","MozMousePixelScroll"],a="onwheel"in document||document.documentMode>=9?["wheel"]:["mousewheel","DomMouseScroll","MozMousePixelScroll"],l=Array.prototype.slice;if(t.event.fixHooks)for(var h=o.length;h;)t.event.fixHooks[o[--h]]=t.event.mouseHooks;var c=t.event.special.mousewheel={version:"3.1.12",setup:function(){if(this.addEventListener)for(var i=a.length;i;)this.addEventListener(a[--i],e,!1);else this.onmousewheel=e;t.data(this,"mousewheel-line-height",c.getLineHeight(this)),t.data(this,"mousewheel-page-height",c.getPageHeight(this))},teardown:function(){if(this.removeEventListener)for(var i=a.length;i;)this.removeEventListener(a[--i],e,!1);else this.onmousewheel=null;t.removeData(this,"mousewheel-line-height"),t.removeData(this,"mousewheel-page-height")},getLineHeight:function(e){var i=t(e),n=i["offsetParent"in t.fn?"offsetParent":"parent"]();return n.length||(n=t("body")),parseInt(n.css("fontSize"),10)||parseInt(i.css("fontSize"),10)||16},getPageHeight:function(e){return t(e).height()},settings:{adjustOldDeltas:!0,normalizeOffset:!0}};t.fn.extend({mousewheel:function(t){return t?this.bind("mousewheel",t):this.trigger("mousewheel")},unmousewheel:function(t){return this.unbind("mousewheel",t)}})}),{define:e.define,require:e.require}}(),i=e.require("jquery.select2");return t.fn.select2.amd=e,i});!function(t){"function"==typeof define&&define.amd?define(["jquery"],t):"object"==typeof module&&module.exports?module.exports=t(require("jquery")):t(window.jQuery)}(function($){"use strict";var func=function(){var t=function(t){return function(e){return t===e}},e=function(t,e){return t===e},i=function(t){return function(e,i){return e[t]===i[t]}},n=function(){return!0},s=function(){return!1},r=function(t){return function(){return!t.apply(t,arguments)}},o=function(t,e){return function(i){return t(i)&&e(i)}},a=function(t){return t},l=function(t,e){return function(){return t[e].apply(t,arguments)}},h=0,c=function(t){var e=++h+"";return t?t+e:e},u=function(t){var e=$(document);return{top:t.top+e.scrollTop(),left:t.left+e.scrollLeft(),width:t.right-t.left,height:t.bottom-t.top}},d=function(t){var e={};for(var i in t)t.hasOwnProperty(i)&&(e[t[i]]=i);return e},f=function(t,e){return e=e||"",e+t.split(".").map(function(t){return t.substring(0,1).toUpperCase()+t.substring(1)}).join("")},p=function(t,e,i){var n;return function(){var s=this,r=arguments,o=function(){n=null,i||t.apply(s,r)},a=i&&!n;clearTimeout(n),n=setTimeout(o,e),a&&t.apply(s,r)}};return{eq:t,eq2:e,peq2:i,ok:n,fail:s,self:a,not:r,and:o,invoke:l,uniqueId:c,rect2bnd:u,invertObject:d,namespaceToCamel:f,debounce:p}}(),list=function(){var t=function(t){return t[0]},e=function(t){return t[t.length-1]},i=function(t){return t.slice(0,t.length-1)},n=function(t){return t.slice(1)},s=function(t,e){for(var i=0,n=t.length;n>i;i++){var s=t[i];if(e(s))return s}},r=function(t,e){for(var i=0,n=t.length;n>i;i++)if(!e(t[i]))return!1;return!0},o=function(t,e){return $.inArray(e,t)},a=function(t,e){return-1!==o(t,e)},l=function(t,e){return e=e||func.self,t.reduce(function(t,i){return t+e(i)},0)},h=function(t){for(var e=[],i=-1,n=t.length;++i<n;)e[i]=t[i];return e},c=function(t){return!t||!t.length},u=function(i,s){if(!i.length)return[];var r=n(i);return r.reduce(function(t,i){var n=e(t);return s(e(n),i)?n[n.length]=i:t[t.length]=[i],t},[[t(i)]])},d=function(t){for(var e=[],i=0,n=t.length;n>i;i++)t[i]&&e.push(t[i]);return e},f=function(t){for(var e=[],i=0,n=t.length;n>i;i++)a(e,t[i])||e.push(t[i]);return e},p=function(t,e){var i=o(t,e);return-1===i?null:t[i+1]},m=function(t,e){var i=o(t,e);return-1===i?null:t[i-1]};return{head:t,last:e,initial:i,tail:n,prev:m,next:p,find:s,contains:a,all:r,sum:l,from:h,isEmpty:c,clusterBy:u,compact:d,unique:f}}(),isSupportAmd="function"==typeof define&&define.amd,isFontInstalled=function(t){var e="Comic Sans MS"===t?"Courier New":"Comic Sans MS",i=$("<div>").css({position:"absolute",left:"-9999px",top:"-9999px",fontSize:"200px"}).text("mmmmmmmmmwwwwwww").appendTo(document.body),n=i.css("fontFamily",e).width(),s=i.css("fontFamily",t+","+e).width();return i.remove(),n!==s},userAgent=navigator.userAgent,isMSIE=/MSIE|Trident/i.test(userAgent),browserVersion;if(isMSIE){var matches=/MSIE (\d+[.]\d+)/.exec(userAgent);matches&&(browserVersion=parseFloat(matches[1])),matches=/Trident\/.*rv:([0-9]{1,}[\.0-9]{0,})/.exec(userAgent),matches&&(browserVersion=parseFloat(matches[1]))}var isEdge=/Edge\/\d+/.test(userAgent),hasCodeMirror=!!window.CodeMirror;if(!hasCodeMirror&&isSupportAmd&&"undefined"!=typeof require)if("undefined"!=typeof require.resolve)try{require.resolve("codemirror"),hasCodeMirror=!0}catch(t){}else"undefined"!=typeof eval("require").specified&&(hasCodeMirror=eval("require").specified("codemirror"));var agent={isMac:navigator.appVersion.indexOf("Mac")>-1,isMSIE:isMSIE,isEdge:isEdge,isFF:!isEdge&&/firefox/i.test(userAgent),isPhantom:/PhantomJS/i.test(userAgent),isWebkit:!isEdge&&/webkit/i.test(userAgent),isChrome:!isEdge&&/chrome/i.test(userAgent),isSafari:!isEdge&&/safari/i.test(userAgent),browserVersion:browserVersion,jqueryVersion:parseFloat($.fn.jquery),isSupportAmd:isSupportAmd,hasCodeMirror:hasCodeMirror,isFontInstalled:isFontInstalled,isW3CRangeSupport:!!document.createRange},NBSP_CHAR=String.fromCharCode(160),ZERO_WIDTH_NBSP_CHAR="\ufeff",dom=function(){var t=function(t){return t&&$(t).hasClass("note-editable")},e=function(t){return t&&$(t).hasClass("note-control-sizing")},i=function(t){return t=t.toUpperCase(),function(e){return e&&e.nodeName.toUpperCase()===t}},n=function(t){return t&&3===t.nodeType},s=function(t){return t&&1===t.nodeType},r=function(t){return t&&/^BR|^IMG|^HR|^IFRAME|^BUTTON/.test(t.nodeName.toUpperCase())},o=function(e){return t(e)?!1:e&&/^DIV|^P|^LI|^H[1-7]/.test(e.nodeName.toUpperCase())},a=function(t){return t&&/^H[1-7]/.test(t.nodeName.toUpperCase())},l=i("PRE"),h=i("LI"),c=function(t){return o(t)&&!h(t)},u=i("TABLE"),d=i("DATA"),f=function(t){return!(y(t)||p(t)||m(t)||o(t)||u(t)||v(t)||d(t))},p=function(t){return t&&/^UL|^OL/.test(t.nodeName.toUpperCase())},m=i("HR"),g=function(t){return t&&/^TD|^TH/.test(t.nodeName.toUpperCase())},v=i("BLOCKQUOTE"),y=function(e){return g(e)||v(e)||t(e)},b=i("A"),w=function(t){return f(t)&&!!P(t,o)},x=function(t){return f(t)&&!P(t,o)},_=i("BODY"),k=function(t,e){return t.nextSibling===e||t.previousSibling===e},C=function(t,e){e=e||func.ok;var i=[];return t.previousSibling&&e(t.previousSibling)&&i.push(t.previousSibling),i.push(t),t.nextSibling&&e(t.nextSibling)&&i.push(t.nextSibling),i},S=agent.isMSIE&&agent.browserVersion<11?"&nbsp;":"<br>",T=function(t){return n(t)?t.nodeValue.length:t?t.childNodes.length:0},D=function(t){var e=T(t);return 0===e?!0:n(t)||1!==e||t.innerHTML!==S?list.all(t.childNodes,n)&&""===t.innerHTML?!0:!1:!0},M=function(t){r(t)||T(t)||(t.innerHTML=S)},P=function(e,i){for(;e;){if(i(e))return e;if(t(e))break;e=e.parentNode}return null},I=function(e,i){for(e=e.parentNode;e&&1===T(e);){if(i(e))return e;if(t(e))break;e=e.parentNode}return null},E=function(e,i){i=i||func.fail;var n=[];return P(e,function(e){return t(e)||n.push(e),i(e)}),n},F=function(t,e){var i=E(t);return list.last(i.filter(e))},A=function(t,e){for(var i=E(t),n=e;n;n=n.parentNode)if($.inArray(n,i)>-1)return n;return null},H=function(t,e){e=e||func.fail;for(var i=[];t&&!e(t);)i.push(t),t=t.previousSibling;return i},L=function(t,e){e=e||func.fail;for(var i=[];t&&!e(t);)i.push(t),t=t.nextSibling;return i},O=function(t,e){var i=[];return e=e||func.ok,function n(s){t!==s&&e(s)&&i.push(s);for(var r=0,o=s.childNodes.length;o>r;r++)n(s.childNodes[r])}(t),i},R=function(t,e){var i=t.parentNode,n=$("<"+e+">")[0];return i.insertBefore(n,t),n.appendChild(t),n},z=function(t,e){var i=e.nextSibling,n=e.parentNode;return i?n.insertBefore(t,i):n.appendChild(t),t},N=function(t,e){return $.each(e,function(e,i){t.appendChild(i)}),t},B=function(t){return 0===t.offset},j=function(t){return t.offset===T(t.node)},W=function(t){return B(t)||j(t)},Y=function(t,e){for(;t&&t!==e;){if(0!==G(t))return!1;t=t.parentNode}return!0},U=function(t,e){if(!e)return!1;for(;t&&t!==e;){if(G(t)!==T(t.parentNode)-1)return!1;t=t.parentNode}return!0},q=function(t,e){return B(t)&&Y(t.node,e)},V=function(t,e){return j(t)&&U(t.node,e)},G=function(t){for(var e=0;t=t.previousSibling;)e+=1;return e},X=function(t){return!!(t&&t.childNodes&&t.childNodes.length)},K=function(e,i){var n,s;if(0===e.offset){if(t(e.node))return null;n=e.node.parentNode,s=G(e.node)}else X(e.node)?(n=e.node.childNodes[e.offset-1],s=T(n)):(n=e.node,s=i?0:e.offset-1);return{node:n,offset:s}},Q=function(e,i){var n,s;if(T(e.node)===e.offset){if(t(e.node))return null;n=e.node.parentNode,s=G(e.node)+1}else X(e.node)?(n=e.node.childNodes[e.offset],s=0):(n=e.node,s=i?T(e.node):e.offset+1);return{node:n,offset:s}},Z=function(t,e){return t.node===e.node&&t.offset===e.offset},J=function(t){if(n(t.node)||!X(t.node)||D(t.node))return!0;var e=t.node.childNodes[t.offset-1],i=t.node.childNodes[t.offset];return e&&!r(e)||i&&!r(i)?!1:!0},tt=function(t,e){for(;t;){if(e(t))return t;t=K(t)}return null},et=function(t,e){for(;t;){if(e(t))return t;t=Q(t)}return null},it=function(t){if(!n(t.node))return!1;var e=t.node.nodeValue.charAt(t.offset-1);return e&&" "!==e&&e!==NBSP_CHAR},nt=function(t,e,i,n){for(var s=t;s&&(i(s),!Z(s,e));){var r=n&&t.node!==s.node&&e.node!==s.node;s=Q(s,r)}},st=function(t,e){var i=E(e,func.eq(t));return i.map(G).reverse()},rt=function(t,e){for(var i=t,n=0,s=e.length;s>n;n++)i=i.childNodes.length<=e[n]?i.childNodes[i.childNodes.length-1]:i.childNodes[e[n]];return i},ot=function(t,e){var i=e&&e.isSkipPaddingBlankHTML,s=e&&e.isNotSplitEdgePoint;if(W(t)&&(n(t.node)||s)){if(B(t))return t.node;if(j(t))return t.node.nextSibling}if(n(t.node))return t.node.splitText(t.offset);var r=t.node.childNodes[t.offset],o=z(t.node.cloneNode(!1),t.node);return N(o,L(r)),i||(M(t.node),M(o)),o},at=function(t,e,i){var n=E(e.node,func.eq(t));return n.length?1===n.length?ot(e,i):n.reduce(function(t,n){return t===e.node&&(t=ot(e,i)),ot({node:n,offset:t?dom.position(t):T(n)},i)}):null},lt=function(t,e){var i,n,s=e?o:y,r=E(t.node,s),a=list.last(r)||t.node;s(a)?(i=r[r.length-2],n=a):(i=a,n=i.parentNode);var l=i&&at(i,t,{isSkipPaddingBlankHTML:e,isNotSplitEdgePoint:e});return l||n!==t.node||(l=t.node.childNodes[t.offset]),{rightNode:l,container:n}},ht=function(t){return document.createElement(t)},ct=function(t){return document.createTextNode(t)},ut=function(t,e){if(t&&t.parentNode){if(t.removeNode)return t.removeNode(e);var i=t.parentNode;if(!e){var n,s,r=[];for(n=0,s=t.childNodes.length;s>n;n++)r.push(t.childNodes[n]);for(n=0,s=r.length;s>n;n++)i.insertBefore(r[n],t)}i.removeChild(t)}},dt=function(e,i){for(;e&&!t(e)&&i(e);){var n=e.parentNode;ut(e),e=n}},ft=function(t,e){if(t.nodeName.toUpperCase()===e.toUpperCase())return t;var i=ht(e);return t.style.cssText&&(i.style.cssText=t.style.cssText),N(i,list.from(t.childNodes)),z(i,t),ut(t),i},pt=i("TEXTAREA"),mt=function(t,e){var i=pt(t[0])?t.val():t.html();return e?i.replace(/[\n\r]/g,""):i},gt=function(t,e){var i=mt(t);if(e){var n=/<(\/?)(\b(?!!)[^>\s]*)(.*?)(\s*\/?>)/g;i=i.replace(n,function(t,e,i){i=i.toUpperCase();var n=/^DIV|^TD|^TH|^P|^LI|^H[1-7]/.test(i)&&!!e,s=/^BLOCKQUOTE|^TABLE|^TBODY|^TR|^HR|^UL|^OL/.test(i);return t+(n||s?"\n":"")}),i=$.trim(i)}return i},vt=function(t){var e=$(t),i=e.offset(),n=e.outerHeight(!0);return{left:i.left,top:i.top+n}},yt=function(t,e){Object.keys(e).forEach(function(i){t.on(i,e[i])})},bt=function(t,e){Object.keys(e).forEach(function(i){t.off(i,e[i])})};return{NBSP_CHAR:NBSP_CHAR,ZERO_WIDTH_NBSP_CHAR:ZERO_WIDTH_NBSP_CHAR,blank:S,emptyPara:"<p>"+S+"</p>",makePredByNodeName:i,isEditable:t,isControlSizing:e,isText:n,isElement:s,isVoid:r,isPara:o,isPurePara:c,isHeading:a,isInline:f,isBlock:func.not(f),isBodyInline:x,isBody:_,isParaInline:w,isPre:l,isList:p,isTable:u,isData:d,isCell:g,isBlockquote:v,isBodyContainer:y,isAnchor:b,isDiv:i("DIV"),isLi:h,isBR:i("BR"),isSpan:i("SPAN"),isB:i("B"),isU:i("U"),isS:i("S"),isI:i("I"),isImg:i("IMG"),isTextarea:pt,isEmpty:D,isEmptyAnchor:func.and(b,D),isClosestSibling:k,withClosestSiblings:C,nodeLength:T,isLeftEdgePoint:B,isRightEdgePoint:j,isEdgePoint:W,isLeftEdgeOf:Y,isRightEdgeOf:U,isLeftEdgePointOf:q,isRightEdgePointOf:V,prevPoint:K,nextPoint:Q,isSamePoint:Z,isVisiblePoint:J,prevPointUntil:tt,nextPointUntil:et,isCharPoint:it,walkPoint:nt,ancestor:P,singleChildAncestor:I,listAncestor:E,lastAncestor:F,listNext:L,listPrev:H,listDescendant:O,commonAncestor:A,wrap:R,insertAfter:z,appendChildNodes:N,position:G,hasChildren:X,makeOffsetPath:st,fromOffsetPath:rt,splitTree:at,splitPoint:lt,create:ht,createText:ct,remove:ut,removeWhile:dt,replace:ft,html:gt,value:mt,posFromPlaceholder:vt,attachEvents:yt,detachEvents:bt}}(),Context=function(t,e){var i=this,n=$.summernote.ui;return this.memos={},this.modules={},this.layoutInfo={},this.options=e,this.initialize=function(){return this.layoutInfo=n.createLayout(t,e),this._initialize(),t.hide(),this},this.destroy=function(){this._destroy(),t.removeData("summernote"),n.removeLayout(t,this.layoutInfo)},this.reset=function(){var t=i.isDisabled();this.code(dom.emptyPara),this._destroy(),this._initialize(),t&&i.disable()},this._initialize=function(){var t=$.extend({},this.options.buttons);Object.keys(t).forEach(function(e){i.memo("button."+e,t[e])});var e=$.extend({},this.options.modules,$.summernote.plugins||{});Object.keys(e).forEach(function(t){i.module(t,e[t],!0)}),Object.keys(this.modules).forEach(function(t){i.initializeModule(t)})},this._destroy=function(){Object.keys(this.modules).reverse().forEach(function(t){i.removeModule(t)}),Object.keys(this.memos).forEach(function(t){i.removeMemo(t)})},this.code=function(e){var i=this.invoke("codeview.isActivated");return void 0===e?(this.invoke("codeview.sync"),i?this.layoutInfo.codable.val():this.layoutInfo.editable.html()):(i?this.layoutInfo.codable.val(e):this.layoutInfo.editable.html(e),t.val(e),this.triggerEvent("change",e),void 0)},this.isDisabled=function(){return"false"===this.layoutInfo.editable.attr("contenteditable")},this.enable=function(){this.layoutInfo.editable.attr("contenteditable",!0),this.invoke("toolbar.activate",!0)},this.disable=function(){this.invoke("codeview.isActivated")&&this.invoke("codeview.deactivate"),this.layoutInfo.editable.attr("contenteditable",!1),this.invoke("toolbar.deactivate",!0)},this.triggerEvent=function(){var e=list.head(arguments),i=list.tail(list.from(arguments)),n=this.options.callbacks[func.namespaceToCamel(e,"on")];n&&n.apply(t[0],i),t.trigger("summernote."+e,i)},this.initializeModule=function(e){var i=this.modules[e];i.shouldInitialize=i.shouldInitialize||func.ok,i.shouldInitialize()&&(i.initialize&&i.initialize(),i.events&&dom.attachEvents(t,i.events))},this.module=function(t,e,i){return 1===arguments.length?this.modules[t]:(this.modules[t]=new e(this),void(i||this.initializeModule(t)))},this.removeModule=function(e){var i=this.modules[e];i.shouldInitialize()&&(i.events&&dom.detachEvents(t,i.events),i.destroy&&i.destroy()),delete this.modules[e]},this.memo=function(t,e){return 1===arguments.length?this.memos[t]:void(this.memos[t]=e)},this.removeMemo=function(t){this.memos[t]&&this.memos[t].destroy&&this.memos[t].destroy(),delete this.memos[t]},this.createInvokeHandler=function(t,e){return function(n){n.preventDefault(),i.invoke(t,e||$(n.target).closest("[data-value]").data("value"))}},this.invoke=function(){var t=list.head(arguments),e=list.tail(list.from(arguments)),i=t.split("."),n=i.length>1,s=n&&list.head(i),r=n?list.last(i):list.head(i),o=this.modules[s||"editor"];return!s&&this[r]?this[r].apply(this,e):o&&o[r]&&o.shouldInitialize()?o[r].apply(o,e):void 0},this.initialize()};$.fn.extend({summernote:function(){var t=$.type(list.head(arguments)),e="string"===t,i="object"===t,n=i?list.head(arguments):{};n=$.extend({},$.summernote.options,n),n.langInfo=$.extend(!0,{},$.summernote.lang["en-US"],$.summernote.lang[n.lang]),n.icons=$.extend(!0,{},$.summernote.options.icons,n.icons),this.each(function(t,e){var i=$(e);if(!i.data("summernote")){var s=new Context(i,n);i.data("summernote",s),i.data("summernote").triggerEvent("init",s.layoutInfo)}});var s=this.first();if(s.length){var r=s.data("summernote");if(e)return r.invoke.apply(r,list.from(arguments));n.focus&&r.invoke("editor.focus")}return this}});var Renderer=function(t,e,i,n){this.render=function(s){var r=$(t);if(i&&i.contents&&r.html(i.contents),i&&i.className&&r.addClass(i.className),i&&i.data&&$.each(i.data,function(t,e){r.attr("data-"+t,e)}),i&&i.click&&r.on("click",i.click),e){var o=r.find(".note-children-container");e.forEach(function(t){t.render(o.length?o:r)})}return n&&n(r,i),i&&i.callback&&i.callback(r),s&&s.append(r),r}},renderer={create:function(t,e){return function(){var i=$.isArray(arguments[0])?arguments[0]:[],n="object"==typeof arguments[1]?arguments[1]:arguments[0];return n&&n.children&&(i=n.children),new Renderer(t,i,n,e)}}},editor=renderer.create('<div class="note-editor note-frame panel panel-default"/>'),toolbar=renderer.create('<div class="note-toolbar panel-heading"/>'),editingArea=renderer.create('<div class="note-editing-area"/>'),codable=renderer.create('<textarea class="note-codable"/>'),editable=renderer.create('<div class="note-editable panel-body" contentEditable="true"/>'),statusbar=renderer.create(['<div class="note-statusbar">','  <div class="note-resizebar">','    <div class="note-icon-bar"/>','    <div class="note-icon-bar"/>','    <div class="note-icon-bar"/>',"  </div>","</div>"].join("")),airEditor=renderer.create('<div class="note-editor"/>'),airEditable=renderer.create('<div class="note-editable" contentEditable="true"/>'),buttonGroup=renderer.create('<div class="note-btn-group btn-group">'),button=renderer.create('<button type="button" class="note-btn btn btn-default btn-sm" tabindex="-1">',function(t,e){e&&e.tooltip&&t.attr({title:e.tooltip}).tooltip({container:"body",trigger:"hover",placement:"bottom"})}),dropdown=renderer.create('<div class="dropdown-menu">',function(t,e){var i=$.isArray(e.items)?e.items.map(function(t){var i="string"==typeof t?t:t.value||"",n=e.template?e.template(t):t;return'<li><a href="#" data-value="'+i+'">'+n+"</a></li>"}).join(""):e.items;t.html(i)}),dropdownCheck=renderer.create('<div class="dropdown-menu note-check">',function(t,e){var i=$.isArray(e.items)?e.items.map(function(t){var i="string"==typeof t?t:t.value||"",n=e.template?e.template(t):t;return'<li><a href="#" data-value="'+i+'">'+icon(e.checkClassName)+" "+n+"</a></li>"}).join(""):e.items;t.html(i)}),palette=renderer.create('<div class="note-color-palette"/>',function(t,e){for(var i=[],n=0,s=e.colors.length;s>n;n++){for(var r=e.eventName,o=e.colors[n],a=[],l=0,h=o.length;h>l;l++){var c=o[l];a.push(['<button type="button" class="note-color-btn"','style="background-color:',c,'" ','data-event="',r,'" ','data-value="',c,'" ','title="',c,'" ','data-toggle="button" tabindex="-1"></button>'].join(""))}i.push('<div class="note-color-row">'+a.join("")+"</div>")}t.html(i.join("")),t.find(".note-color-btn").tooltip({container:"body",trigger:"hover",placement:"bottom"})}),dialog=renderer.create('<div class="modal" aria-hidden="false" tabindex="-1"/>',function(t,e){e.fade&&t.addClass("fade"),t.html(['<div class="modal-dialog">','  <div class="modal-content">',e.title?'    <div class="modal-header">      <button type="button" class="close" data-dismiss="modal" aria-label="Close"><span aria-hidden="true">&times;</span></button>      <h4 class="modal-title">'+e.title+"</h4>    </div>":"",'    <div class="modal-body">'+e.body+"</div>",e.footer?'    <div class="modal-footer">'+e.footer+"</div>":"","  </div>","</div>"].join(""))}),popover=renderer.create(['<div class="note-popover popover in">','  <div class="arrow"/>','  <div class="popover-content note-children-container"/>',"</div>"].join(""),function(t,e){var i="undefined"!=typeof e.direction?e.direction:"bottom";t.addClass(i),e.hideArrow&&t.find(".arrow").hide()}),icon=function(t,e){return e=e||"i","<"+e+' class="'+t+'"/>'},ui={editor:editor,toolbar:toolbar,editingArea:editingArea,codable:codable,editable:editable,statusbar:statusbar,airEditor:airEditor,airEditable:airEditable,buttonGroup:buttonGroup,button:button,dropdown:dropdown,dropdownCheck:dropdownCheck,palette:palette,dialog:dialog,popover:popover,icon:icon,toggleBtn:function(t,e){t.toggleClass("disabled",!e),t.attr("disabled",!e)},toggleBtnActive:function(t,e){t.toggleClass("active",e)},onDialogShown:function(t,e){t.one("shown.bs.modal",e)},onDialogHidden:function(t,e){t.one("hidden.bs.modal",e)},showDialog:function(t){t.modal("show")},hideDialog:function(t){t.modal("hide")},createLayout:function(t,e){var i=(e.airMode?ui.airEditor([ui.editingArea([ui.airEditable()])]):ui.editor([ui.toolbar(),ui.editingArea([ui.codable(),ui.editable()]),ui.statusbar()])).render();return i.insertAfter(t),{note:t,editor:i,toolbar:i.find(".note-toolbar"),editingArea:i.find(".note-editing-area"),editable:i.find(".note-editable"),codable:i.find(".note-codable"),statusbar:i.find(".note-statusbar")}},removeLayout:function(t,e){t.html(e.editable.html()),e.editor.remove(),t.show()}};$.summernote=$.summernote||{lang:{}},$.extend($.summernote.lang,{"en-US":{font:{bold:"Bold",italic:"Italic",underline:"Underline",clear:"Remove Font Style",height:"Line Height",name:"Font Family",strikethrough:"Strikethrough",subscript:"Subscript",superscript:"Superscript",size:"Font Size"},image:{image:"Picture",insert:"Insert Image",resizeFull:"Resize Full",resizeHalf:"Resize Half",resizeQuarter:"Resize Quarter",floatLeft:"Float Left",floatRight:"Float Right",floatNone:"Float None",shapeRounded:"Shape: Rounded",shapeCircle:"Shape: Circle",shapeThumbnail:"Shape: Thumbnail",shapeNone:"Shape: None",dragImageHere:"Drag image or text here",dropImage:"Drop image or Text",selectFromFiles:"Select from files",maximumFileSize:"Maximum file size",maximumFileSizeError:"Maximum file size exceeded.",url:"Image URL",remove:"Remove Image"},video:{video:"Video",videoLink:"Video Link",insert:"Insert Video",url:"Video URL?",providers:"(YouTube, Vimeo, Vine, Instagram, DailyMotion or Youku)"},link:{link:"Link",insert:"Insert Link",unlink:"Unlink",edit:"Edit",textToDisplay:"Text to display",url:"To what URL should this link go?",openInNewWindow:"Open in new window"},table:{table:"Table"},hr:{insert:"Insert Horizontal Rule"},style:{style:"Style",normal:"Normal",blockquote:"Quote",pre:"Code",h1:"Header 1",h2:"Header 2",h3:"Header 3",h4:"Header 4",h5:"Header 5",h6:"Header 6"},lists:{unordered:"Unordered list",ordered:"Ordered list"},options:{help:"Help",fullscreen:"Full Screen",codeview:"Code View"},paragraph:{paragraph:"Paragraph",outdent:"Outdent",indent:"Indent",left:"Align left",center:"Align center",right:"Align right",justify:"Justify full"},color:{recent:"Recent Color",more:"More Color",background:"Background Color",foreground:"Foreground Color",transparent:"Transparent",setTransparent:"Set transparent",reset:"Reset",resetToDefault:"Reset to default"},shortcut:{shortcuts:"Keyboard shortcuts",close:"Close",textFormatting:"Text formatting",action:"Action",paragraphFormatting:"Paragraph formatting",documentStyle:"Document Style",extraKeys:"Extra keys"},help:{insertParagraph:"Insert Paragraph",undo:"Undoes the last command",redo:"Redoes the last command",tab:"Tab",untab:"Untab",bold:"Set a bold style",italic:"Set a italic style",underline:"Set a underline style",strikethrough:"Set a strikethrough style",removeFormat:"Clean a style",justifyLeft:"Set left align",justifyCenter:"Set center align",justifyRight:"Set right align",justifyFull:"Set full align",insertUnorderedList:"Toggle unordered list",insertOrderedList:"Toggle ordered list",outdent:"Outdent on current paragraph",indent:"Indent on current paragraph",formatPara:"Change current block's format as a paragraph(P tag)",formatH1:"Change current block's format as H1",formatH2:"Change current block's format as H2",formatH3:"Change current block's format as H3",formatH4:"Change current block's format as H4",formatH5:"Change current block's format as H5",formatH6:"Change current block's format as H6",insertHorizontalRule:"Insert horizontal rule","linkDialog.show":"Show Link Dialog"},history:{undo:"Undo",redo:"Redo"},specialChar:{specialChar:"SPECIAL CHARACTERS",select:"Select Special characters"}}});var key=function(){var t={BACKSPACE:8,TAB:9,ENTER:13,SPACE:32,LEFT:37,UP:38,RIGHT:39,DOWN:40,NUM0:48,NUM1:49,NUM2:50,NUM3:51,NUM4:52,NUM5:53,NUM6:54,NUM7:55,NUM8:56,B:66,E:69,I:73,J:74,K:75,L:76,R:82,S:83,U:85,V:86,Y:89,Z:90,SLASH:191,LEFTBRACKET:219,BACKSLASH:220,RIGHTBRACKET:221};return{isEdit:function(e){return list.contains([t.BACKSPACE,t.TAB,t.ENTER,t.SPACE],e)},isMove:function(e){return list.contains([t.LEFT,t.UP,t.RIGHT,t.DOWN],e)},nameFromCode:func.invertObject(t),code:t}}(),range=function(){var t=function(t,e){var i,n,s=t.parentElement(),r=document.body.createTextRange(),o=list.from(s.childNodes);for(i=0;i<o.length;i++)if(!dom.isText(o[i])){if(r.moveToElementText(o[i]),r.compareEndPoints("StartToStart",t)>=0)break;n=o[i]}if(0!==i&&dom.isText(o[i-1])){var a=document.body.createTextRange(),l=null;a.moveToElementText(n||s),a.collapse(!n),l=n?n.nextSibling:s.firstChild;var h=t.duplicate();h.setEndPoint("StartToStart",a);for(var c=h.text.replace(/[\r\n]/g,"").length;c>l.nodeValue.length&&l.nextSibling;)c-=l.nodeValue.length,l=l.nextSibling;l.nodeValue;e&&l.nextSibling&&dom.isText(l.nextSibling)&&c===l.nodeValue.length&&(c-=l.nodeValue.length,l=l.nextSibling),s=l,i=c}return{cont:s,offset:i}},e=function(t){var e=function(t,i){var n,s;if(dom.isText(t)){var r=dom.listPrev(t,func.not(dom.isText)),o=list.last(r).previousSibling;n=o||t.parentNode,i+=list.sum(list.tail(r),dom.nodeLength),s=!o}else{if(n=t.childNodes[i]||t,dom.isText(n))return e(n,0);i=0,s=!1}return{node:n,collapseToStart:s,offset:i}},i=document.body.createTextRange(),n=e(t.node,t.offset);return i.moveToElementText(n.node),i.collapse(n.collapseToStart),i.moveStart("character",n.offset),i},i=function(t,n,s,r){this.sc=t,this.so=n,this.ec=s,this.eo=r;var o=function(){if(agent.isW3CRangeSupport){var i=document.createRange();return i.setStart(t,n),i.setEnd(s,r),i}var o=e({node:t,offset:n});return o.setEndPoint("EndToEnd",e({node:s,offset:r})),o};this.getPoints=function(){return{sc:t,so:n,ec:s,eo:r}},this.getStartPoint=function(){return{node:t,offset:n}},this.getEndPoint=function(){return{node:s,offset:r}},this.select=function(){var t=o();if(agent.isW3CRangeSupport){var e=document.getSelection();e.rangeCount>0&&e.removeAllRanges(),e.addRange(t)}else t.select();return this},this.scrollIntoView=function(t){var e=$(t).height();return t.scrollTop+e<this.sc.offsetTop&&(t.scrollTop+=Math.abs(t.scrollTop+e-this.sc.offsetTop)),this},this.normalize=function(){var t=function(t,e){if(dom.isVisiblePoint(t)&&!dom.isEdgePoint(t)||dom.isVisiblePoint(t)&&dom.isRightEdgePoint(t)&&!e||dom.isVisiblePoint(t)&&dom.isLeftEdgePoint(t)&&e||dom.isVisiblePoint(t)&&dom.isBlock(t.node)&&dom.isEmpty(t.node))return t;var i=dom.ancestor(t.node,dom.isBlock);if((dom.isLeftEdgePointOf(t,i)||dom.isVoid(dom.prevPoint(t).node))&&!e||(dom.isRightEdgePointOf(t,i)||dom.isVoid(dom.nextPoint(t).node))&&e){if(dom.isVisiblePoint(t))return t;e=!e}var n=e?dom.nextPointUntil(dom.nextPoint(t),dom.isVisiblePoint):dom.prevPointUntil(dom.prevPoint(t),dom.isVisiblePoint);return n||t},e=t(this.getEndPoint(),!1),n=this.isCollapsed()?e:t(this.getStartPoint(),!0);return new i(n.node,n.offset,e.node,e.offset)},this.nodes=function(t,e){t=t||func.ok;var i=e&&e.includeAncestor,n=e&&e.fullyContains,s=this.getStartPoint(),r=this.getEndPoint(),o=[],a=[];return dom.walkPoint(s,r,function(e){if(!dom.isEditable(e.node)){var s;n?(dom.isLeftEdgePoint(e)&&a.push(e.node),dom.isRightEdgePoint(e)&&list.contains(a,e.node)&&(s=e.node)):s=i?dom.ancestor(e.node,t):e.node,s&&t(s)&&o.push(s)}},!0),list.unique(o)},this.commonAncestor=function(){return dom.commonAncestor(t,s)},this.expand=function(e){var o=dom.ancestor(t,e),a=dom.ancestor(s,e);if(!o&&!a)return new i(t,n,s,r);var l=this.getPoints();return o&&(l.sc=o,l.so=0),a&&(l.ec=a,l.eo=dom.nodeLength(a)),new i(l.sc,l.so,l.ec,l.eo)},this.collapse=function(e){return e?new i(t,n,t,n):new i(s,r,s,r)},this.splitText=function(){var e=t===s,o=this.getPoints();return dom.isText(s)&&!dom.isEdgePoint(this.getEndPoint())&&s.splitText(r),dom.isText(t)&&!dom.isEdgePoint(this.getStartPoint())&&(o.sc=t.splitText(n),o.so=0,e&&(o.ec=o.sc,o.eo=r-n)),new i(o.sc,o.so,o.ec,o.eo)},this.deleteContents=function(){if(this.isCollapsed())return this;var t=this.splitText(),e=t.nodes(null,{fullyContains:!0}),n=dom.prevPointUntil(t.getStartPoint(),function(t){return!list.contains(e,t.node)}),s=[];return $.each(e,function(t,e){var i=e.parentNode;n.node!==i&&1===dom.nodeLength(i)&&s.push(i),dom.remove(e,!1)}),$.each(s,function(t,e){dom.remove(e,!1)}),new i(n.node,n.offset,n.node,n.offset).normalize()};var a=function(e){return function(){var i=dom.ancestor(t,e);return!!i&&i===dom.ancestor(s,e)}};this.isOnEditable=a(dom.isEditable),this.isOnList=a(dom.isList),this.isOnAnchor=a(dom.isAnchor),this.isOnCell=a(dom.isCell),this.isOnData=a(dom.isData),this.isLeftEdgeOf=function(t){if(!dom.isLeftEdgePoint(this.getStartPoint()))return!1;var e=dom.ancestor(this.sc,t);return e&&dom.isLeftEdgeOf(this.sc,e)},this.isCollapsed=function(){return t===s&&n===r},this.wrapBodyInlineWithPara=function(){if(dom.isBodyContainer(t)&&dom.isEmpty(t))return t.innerHTML=dom.emptyPara,new i(t.firstChild,0,t.firstChild,0);var e=this.normalize();if(dom.isParaInline(t)||dom.isPara(t))return e;var n;if(dom.isInline(e.sc)){var s=dom.listAncestor(e.sc,func.not(dom.isInline));n=list.last(s),dom.isInline(n)||(n=s[s.length-2]||e.sc.childNodes[e.so])}else n=e.sc.childNodes[e.so>0?e.so-1:0];var r=dom.listPrev(n,dom.isParaInline).reverse();if(r=r.concat(dom.listNext(n.nextSibling,dom.isParaInline)),r.length){var o=dom.wrap(list.head(r),"p");dom.appendChildNodes(o,list.tail(r))}return this.normalize()},this.insertNode=function(t){var e=this.wrapBodyInlineWithPara().deleteContents(),i=dom.splitPoint(e.getStartPoint(),dom.isInline(t));return i.rightNode?i.rightNode.parentNode.insertBefore(t,i.rightNode):i.container.appendChild(t),t},this.pasteHTML=function(t){var e=$("<div></div>").html(t)[0],i=list.from(e.childNodes),n=this.wrapBodyInlineWithPara().deleteContents();return i.reverse().map(function(t){return n.insertNode(t)}).reverse()},this.toString=function(){var t=o();return agent.isW3CRangeSupport?t.toString():t.text},this.getWordRange=function(t){var e=this.getEndPoint();if(!dom.isCharPoint(e))return this;var n=dom.prevPointUntil(e,function(t){return!dom.isCharPoint(t)});return t&&(e=dom.nextPointUntil(e,function(t){return!dom.isCharPoint(t)})),new i(n.node,n.offset,e.node,e.offset)},this.bookmark=function(e){return{s:{path:dom.makeOffsetPath(e,t),offset:n},e:{path:dom.makeOffsetPath(e,s),offset:r}}},this.paraBookmark=function(e){return{s:{path:list.tail(dom.makeOffsetPath(list.head(e),t)),offset:n},e:{path:list.tail(dom.makeOffsetPath(list.last(e),s)),offset:r}}},this.getClientRects=function(){var t=o();return t.getClientRects()}};return{create:function(t,e,n,s){if(4===arguments.length)return new i(t,e,n,s);if(2===arguments.length)return n=t,s=e,new i(t,e,n,s);var r=this.createFromSelection();return r||1!==arguments.length?r:(r=this.createFromNode(arguments[0]),r.collapse(dom.emptyPara===arguments[0].innerHTML))},createFromSelection:function(){var e,n,s,r;if(agent.isW3CRangeSupport){var o=document.getSelection();if(!o||0===o.rangeCount)return null;if(dom.isBody(o.anchorNode))return null;var a=o.getRangeAt(0);e=a.startContainer,n=a.startOffset,s=a.endContainer,r=a.endOffset}else{var l=document.selection.createRange(),h=l.duplicate();h.collapse(!1);var c=l;c.collapse(!0);var u=t(c,!0),d=t(h,!1);dom.isText(u.node)&&dom.isLeftEdgePoint(u)&&dom.isTextNode(d.node)&&dom.isRightEdgePoint(d)&&d.node.nextSibling===u.node&&(u=d),e=u.cont,n=u.offset,s=d.cont,r=d.offset}return new i(e,n,s,r)},createFromNode:function(t){var e=t,i=0,n=t,s=dom.nodeLength(n);return dom.isVoid(e)&&(i=dom.listPrev(e).length-1,e=e.parentNode),dom.isBR(n)?(s=dom.listPrev(n).length-1,n=n.parentNode):dom.isVoid(n)&&(s=dom.listPrev(n).length,n=n.parentNode),this.create(e,i,n,s)},createFromNodeBefore:function(t){return this.createFromNode(t).collapse(!0)},createFromNodeAfter:function(t){return this.createFromNode(t).collapse()},createFromBookmark:function(t,e){var n=dom.fromOffsetPath(t,e.s.path),s=e.s.offset,r=dom.fromOffsetPath(t,e.e.path),o=e.e.offset;return new i(n,s,r,o)},createFromParaBookmark:function(t,e){var n=t.s.offset,s=t.e.offset,r=dom.fromOffsetPath(list.head(e),t.s.path),o=dom.fromOffsetPath(list.last(e),t.e.path);return new i(r,n,o,s)}}}(),async=function(){var t=function(t){return $.Deferred(function(e){$.extend(new FileReader,{onload:function(t){var i=t.target.result;e.resolve(i)},onerror:function(){e.reject(this)}}).readAsDataURL(t)}).promise()},e=function(t){return $.Deferred(function(e){var i=$("<img>");i.one("load",function(){i.off("error abort"),e.resolve(i)}).one("error abort",function(){i.off("load").detach(),e.reject(i)}).css({display:"none"}).appendTo(document.body).attr("src",t)}).promise()};return{readFileAsDataURL:t,createImage:e}}(),History=function(t){var e=[],i=-1,n=t[0],s=function(){var e=range.create(n),i={s:{path:[],offset:0},e:{path:[],offset:0}};return{contents:t.html(),bookmark:e?e.bookmark(n):i}},r=function(e){null!==e.contents&&t.html(e.contents),null!==e.bookmark&&range.createFromBookmark(n,e.bookmark).select()};this.rewind=function(){t.html()!==e[i].contents&&this.recordUndo(),i=0,r(e[i])},this.reset=function(){e=[],i=-1,t.html(""),this.recordUndo()},this.undo=function(){t.html()!==e[i].contents&&this.recordUndo(),i>0&&(i--,r(e[i]))},this.redo=function(){e.length-1>i&&(i++,r(e[i]))},this.recordUndo=function(){i++,e.length>i&&(e=e.slice(0,i)),e.push(s())}},Style=function(){var t=function(t,e){if(agent.jqueryVersion<1.9){var i={};return $.each(e,function(e,n){i[n]=t.css(n)}),i}return t.css.call(t,e)};this.fromNode=function(e){var i=["font-family","font-size","text-align","list-style-type","line-height"],n=t(e,i)||{};return n["font-size"]=parseInt(n["font-size"],10),n},this.stylePara=function(t,e){$.each(t.nodes(dom.isPara,{includeAncestor:!0}),function(t,i){$(i).css(e)})},this.styleNodes=function(t,e){t=t.splitText();var i=e&&e.nodeName||"SPAN",n=!(!e||!e.expandClosestSibling),s=!(!e||!e.onlyPartialContains);if(t.isCollapsed())return[t.insertNode(dom.create(i))];var r=dom.makePredByNodeName(i),o=t.nodes(dom.isText,{fullyContains:!0}).map(function(t){return dom.singleChildAncestor(t,r)||dom.wrap(t,i)});if(n){if(s){var a=t.nodes();r=func.and(r,function(t){return list.contains(a,t)})}return o.map(function(t){var e=dom.withClosestSiblings(t,r),i=list.head(e),n=list.tail(e);return $.each(n,function(t,e){dom.appendChildNodes(i,e.childNodes),dom.remove(e)}),list.head(e)})}return o},this.current=function(t){var e=$(dom.isElement(t.sc)?t.sc:t.sc.parentNode),i=this.fromNode(e);try{i=$.extend(i,{"font-bold":document.queryCommandState("bold")?"bold":"normal","font-italic":document.queryCommandState("italic")?"italic":"normal","font-underline":document.queryCommandState("underline")?"underline":"normal","font-subscript":document.queryCommandState("subscript")?"subscript":"normal","font-superscript":document.queryCommandState("superscript")?"superscript":"normal","font-strikethrough":document.queryCommandState("strikethrough")?"strikethrough":"normal"})}catch(t){}if(t.isOnList()){var n=["circle","disc","disc-leading-zero","square"],s=$.inArray(i["list-style-type"],n)>-1;i["list-style"]=s?"unordered":"ordered"}else i["list-style"]="none";var r=dom.ancestor(t.sc,dom.isPara);if(r&&r.style["line-height"])i["line-height"]=r.style.lineHeight;else{var o=parseInt(i["line-height"],10)/parseInt(i["font-size"],10);i["line-height"]=o.toFixed(1)}return i.anchor=t.isOnAnchor()&&dom.ancestor(t.sc,dom.isAnchor),i.ancestors=dom.listAncestor(t.sc,dom.isEditable),i.range=t,i}},Bullet=function(){var t=this;this.insertOrderedList=function(t){this.toggleList("OL",t)},this.insertUnorderedList=function(t){this.toggleList("UL",t)},this.indent=function(t){var e=this,i=range.create(t).wrapBodyInlineWithPara(),n=i.nodes(dom.isPara,{includeAncestor:!0}),s=list.clusterBy(n,func.peq2("parentNode"));$.each(s,function(t,i){var n=list.head(i);dom.isLi(n)?e.wrapList(i,n.parentNode.nodeName):$.each(i,function(t,e){$(e).css("marginLeft",function(t,e){return(parseInt(e,10)||0)+25})})}),i.select()},this.outdent=function(t){var e=this,i=range.create(t).wrapBodyInlineWithPara(),n=i.nodes(dom.isPara,{includeAncestor:!0}),s=list.clusterBy(n,func.peq2("parentNode"));$.each(s,function(t,i){var n=list.head(i);dom.isLi(n)?e.releaseList([i]):$.each(i,function(t,e){$(e).css("marginLeft",function(t,e){return e=parseInt(e,10)||0,e>25?e-25:""})})}),i.select()},this.toggleList=function(e,i){var n=range.create(i).wrapBodyInlineWithPara(),s=n.nodes(dom.isPara,{includeAncestor:!0}),r=n.paraBookmark(s),o=list.clusterBy(s,func.peq2("parentNode"));if(list.find(s,dom.isPurePara)){var a=[];$.each(o,function(i,n){a=a.concat(t.wrapList(n,e))}),s=a}else{var l=n.nodes(dom.isList,{includeAncestor:!0}).filter(function(t){return!$.nodeName(t,e)});l.length?$.each(l,function(t,i){dom.replace(i,e)}):s=this.releaseList(o,!0)}range.createFromParaBookmark(r,s).select()},this.wrapList=function(t,e){var i=list.head(t),n=list.last(t),s=dom.isList(i.previousSibling)&&i.previousSibling,r=dom.isList(n.nextSibling)&&n.nextSibling,o=s||dom.insertAfter(dom.create(e||"UL"),n);return t=t.map(function(t){return dom.isPurePara(t)?dom.replace(t,"LI"):t}),dom.appendChildNodes(o,t),r&&(dom.appendChildNodes(o,list.from(r.childNodes)),dom.remove(r)),t},this.releaseList=function(t,e){var i=[];return $.each(t,function(t,n){var s=list.head(n),r=list.last(n),o=e?dom.lastAncestor(s,dom.isList):s.parentNode,a=o.childNodes.length>1?dom.splitTree(o,{node:r.parentNode,offset:dom.position(r)+1},{isSkipPaddingBlankHTML:!0}):null,l=dom.splitTree(o,{node:s.parentNode,offset:dom.position(s)},{isSkipPaddingBlankHTML:!0});n=e?dom.listDescendant(l,dom.isLi):list.from(l.childNodes).filter(dom.isLi),(e||!dom.isList(o.parentNode))&&(n=n.map(function(t){return dom.replace(t,"P")})),$.each(list.from(n).reverse(),function(t,e){dom.insertAfter(e,o)});var h=list.compact([o,l,a]);$.each(h,function(t,e){var i=[e].concat(dom.listDescendant(e,dom.isList));$.each(i.reverse(),function(t,e){dom.nodeLength(e)||dom.remove(e,!0)})}),i=i.concat(n)}),i}},Typing=function(){var t=new Bullet;this.insertTab=function(t,e){var i=dom.createText(new Array(e+1).join(dom.NBSP_CHAR));t=t.deleteContents(),t.insertNode(i,!0),t=range.create(i,e),t.select()},this.insertParagraph=function(e){var i=range.create(e);i=i.deleteContents(),i=i.wrapBodyInlineWithPara();var n,s=dom.ancestor(i.sc,dom.isPara);if(s){if(dom.isEmpty(s)&&dom.isLi(s))return void t.toggleList(s.parentNode.nodeName);if(dom.isEmpty(s)&&dom.isPara(s)&&dom.isBlockquote(s.parentNode))dom.insertAfter(s,s.parentNode),n=s;else{n=dom.splitTree(s,i.getStartPoint());var r=dom.listDescendant(s,dom.isEmptyAnchor);r=r.concat(dom.listDescendant(n,dom.isEmptyAnchor)),$.each(r,function(t,e){dom.remove(e)}),(dom.isHeading(n)||dom.isPre(n))&&dom.isEmpty(n)&&(n=dom.replace(n,"p"))}}else{var o=i.sc.childNodes[i.so];n=$(dom.emptyPara)[0],o?i.sc.insertBefore(n,o):i.sc.appendChild(n)}range.create(n,0).normalize().select().scrollIntoView(e)}},Table=function(){this.tab=function(t,e){var i=dom.ancestor(t.commonAncestor(),dom.isCell),n=dom.ancestor(i,dom.isTable),s=dom.listDescendant(n,dom.isCell),r=list[e?"prev":"next"](s,i);r&&range.create(r,0).select()},this.createTable=function(t,e,i){for(var n,s=[],r=0;t>r;r++)s.push("<td>"+dom.blank+"</td>");n=s.join("");for(var o,a=[],l=0;e>l;l++)a.push("<tr>"+n+"</tr>");o=a.join("");var h=$("<table>"+o+"</table>");return i&&i.tableClassName&&h.addClass(i.tableClassName),h[0]}},KEY_BOGUS="bogus",Editor=function(t){var e=this,i=t.layoutInfo.note,n=t.layoutInfo.editor,s=t.layoutInfo.editable,r=t.options,o=r.langInfo,a=s[0],l=null,h=new Style,c=new Table,u=new Typing,d=new Bullet,f=new History(s);this.initialize=function(){s.on("keydown",function(i){i.keyCode===key.code.ENTER&&t.triggerEvent("enter",i),t.triggerEvent("keydown",i),i.isDefaultPrevented()||(r.shortcuts?e.handleKeyMap(i):e.preventDefaultEditableShortCuts(i))}).on("keyup",function(e){t.triggerEvent("keyup",e)}).on("focus",function(e){t.triggerEvent("focus",e)}).on("blur",function(e){t.triggerEvent("blur",e)}).on("mousedown",function(e){t.triggerEvent("mousedown",e)}).on("mouseup",function(e){t.triggerEvent("mouseup",e)}).on("scroll",function(e){t.triggerEvent("scroll",e)}).on("paste",function(e){t.triggerEvent("paste",e)}),s.html(dom.html(i)||dom.emptyPara);var o=agent.isMSIE?"DOMCharacterDataModified DOMSubtreeModified DOMNodeInserted":"input";s.on(o,func.debounce(function(){t.triggerEvent("change",s.html())},250)),n.on("focusin",function(e){t.triggerEvent("focusin",e)}).on("focusout",function(e){t.triggerEvent("focusout",e)}),r.airMode||(r.width&&n.outerWidth(r.width),r.height&&s.outerHeight(r.height),r.maxHeight&&s.css("max-height",r.maxHeight),r.minHeight&&s.css("min-height",r.minHeight)),f.recordUndo()},this.destroy=function(){s.off()},this.handleKeyMap=function(e){var i=r.keyMap[agent.isMac?"mac":"pc"],n=[];e.metaKey&&n.push("CMD"),e.ctrlKey&&!e.altKey&&n.push("CTRL"),e.shiftKey&&n.push("SHIFT");var s=key.nameFromCode[e.keyCode];s&&n.push(s);var o=i[n.join("+")];o?(e.preventDefault(),t.invoke(o)):key.isEdit(e.keyCode)&&this.afterCommand()},this.preventDefaultEditableShortCuts=function(t){(t.ctrlKey||t.metaKey)&&list.contains([66,73,85],t.keyCode)&&t.preventDefault()},this.createRange=function(){return this.focus(),range.create(a)},this.saveRange=function(t){l=this.createRange(),t&&l.collapse().select()},this.restoreRange=function(){l&&(l.select(),this.focus())},this.saveTarget=function(t){s.data("target",t)},this.clearTarget=function(){s.removeData("target")},this.restoreTarget=function(){return s.data("target")},this.currentStyle=function(){var t=range.create();return t&&(t=t.normalize()),t?h.current(t):h.fromNode(s)},this.styleFromNode=function(t){return h.fromNode(t)},this.undo=function(){t.triggerEvent("before.command",s.html()),f.undo(),t.triggerEvent("change",s.html())},t.memo("help.undo",o.help.undo),this.redo=function(){t.triggerEvent("before.command",s.html()),f.redo(),t.triggerEvent("change",s.html())},t.memo("help.redo",o.help.redo);for(var p=this.beforeCommand=function(){t.triggerEvent("before.command",s.html()),e.focus()},m=this.afterCommand=function(e){f.recordUndo(),e||t.triggerEvent("change",s.html())},g=["bold","italic","underline","strikethrough","superscript","subscript","justifyLeft","justifyCenter","justifyRight","justifyFull","formatBlock","removeFormat","backColor","foreColor","fontName"],v=0,y=g.length;y>v;v++)this[g[v]]=function(t){return function(e){p(),document.execCommand(t,!1,e),m(!0)}}(g[v]),t.memo("help."+g[v],o.help[g[v]]);this.tab=function(){var t=this.createRange();t.isCollapsed()&&t.isOnCell()?c.tab(t):(p(),u.insertTab(t,r.tabSize),m())},t.memo("help.tab",o.help.tab),this.untab=function(){var t=this.createRange();t.isCollapsed()&&t.isOnCell()&&c.tab(t,!0)},t.memo("help.untab",o.help.untab),this.wrapCommand=function(t){return function(){p(),t.apply(e,arguments),m()}},this.insertParagraph=this.wrapCommand(function(){u.insertParagraph(a)}),t.memo("help.insertParagraph",o.help.insertParagraph),this.insertOrderedList=this.wrapCommand(function(){d.insertOrderedList(a)}),t.memo("help.insertOrderedList",o.help.insertOrderedList),this.insertUnorderedList=this.wrapCommand(function(){d.insertUnorderedList(a)}),t.memo("help.insertUnorderedList",o.help.insertUnorderedList),this.indent=this.wrapCommand(function(){d.indent(a)}),t.memo("help.indent",o.help.indent),this.outdent=this.wrapCommand(function(){d.outdent(a)}),t.memo("help.outdent",o.help.outdent),this.insertImage=function(e,i){return async.createImage(e,i).then(function(t){p(),"function"==typeof i?i(t):("string"==typeof i&&t.attr("data-filename",i),t.css("width",Math.min(s.width(),t.width()))),t.show(),range.create(a).insertNode(t[0]),range.createFromNodeAfter(t[0]).select(),m()}).fail(function(e){t.triggerEvent("image.upload.error",e)})},this.insertImages=function(i){$.each(i,function(i,n){var s=n.name;r.maximumImageFileSize&&r.maximumImageFileSize<n.size?t.triggerEvent("image.upload.error",o.image.maximumFileSizeError):async.readFileAsDataURL(n).then(function(t){return e.insertImage(t,s)}).fail(function(){t.triggerEvent("image.upload.error")})})},this.insertImagesOrCallback=function(e){var i=r.callbacks;i.onImageUpload?t.triggerEvent("image.upload",e):this.insertImages(e)},this.insertNode=this.wrapCommand(function(t){var e=this.createRange();e.insertNode(t),range.createFromNodeAfter(t).select()}),this.insertText=this.wrapCommand(function(t){var e=this.createRange(),i=e.insertNode(dom.createText(t));range.create(i,dom.nodeLength(i)).select()}),this.getSelectedText=function(){var t=this.createRange();return t.isOnAnchor()&&(t=range.createFromNode(dom.ancestor(t.sc,dom.isAnchor))),t.toString()},this.pasteHTML=this.wrapCommand(function(t){var e=this.createRange().pasteHTML(t);range.createFromNodeAfter(list.last(e)).select()}),this.formatBlock=this.wrapCommand(function(t){t=agent.isMSIE?"<"+t+">":t,document.execCommand("FormatBlock",!1,t)}),this.formatPara=function(){this.formatBlock("P")},t.memo("help.formatPara",o.help.formatPara);for(var v=1;6>=v;v++)this["formatH"+v]=function(t){return function(){this.formatBlock("H"+t)}}(v),t.memo("help.formatH"+v,o.help["formatH"+v]);this.fontSize=function(t){var e=this.createRange();if(e&&e.isCollapsed()){var i=h.styleNodes(e),n=list.head(i);$(i).css({"font-size":t+"px"}),n&&!dom.nodeLength(n)&&(n.innerHTML=dom.ZERO_WIDTH_NBSP_CHAR,range.createFromNodeAfter(n.firstChild).select(),s.data(KEY_BOGUS,n))}else p(),$(h.styleNodes(e)).css({"font-size":t+"px"}),m()},this.insertHorizontalRule=this.wrapCommand(function(){var t=this.createRange().insertNode(dom.create("HR"));t.nextSibling&&range.create(t.nextSibling,0).normalize().select()}),t.memo("help.insertHorizontalRule",o.help.insertHorizontalRule),this.removeBogus=function(){var t=s.data(KEY_BOGUS);if(t){var e=list.find(list.from(t.childNodes),dom.isText),i=e.nodeValue.indexOf(dom.ZERO_WIDTH_NBSP_CHAR);-1!==i&&e.deleteData(i,1),dom.isEmpty(t)&&dom.remove(t),s.removeData(KEY_BOGUS)}},this.lineHeight=this.wrapCommand(function(t){h.stylePara(this.createRange(),{lineHeight:t})}),this.unlink=function(){var t=this.createRange();if(t.isOnAnchor()){var e=dom.ancestor(t.sc,dom.isAnchor);t=range.createFromNode(e),t.select(),p(),document.execCommand("unlink"),m()}},this.createLink=this.wrapCommand(function(t){var e=t.url,i=t.text,n=t.isNewWindow,s=t.range||this.createRange(),o=s.toString()!==i;"string"==typeof e&&(e=e.trim()),r.onCreateLink&&(e=r.onCreateLink(e));var a=[];if(o){s=s.deleteContents();var l=s.insertNode($("<A>"+i+"</A>")[0]);a.push(l)}else a=h.styleNodes(s,{nodeName:"A",expandClosestSibling:!0,onlyPartialContains:!0});$.each(a,function(t,i){e=/^[A-Za-z][A-Za-z0-9+-.]*\:[\/\/]?/.test(e)?e:"http://"+e,$(i).attr("href",e),n?$(i).attr("target","_blank"):$(i).removeAttr("target")});var c=range.createFromNodeBefore(list.head(a)),u=c.getStartPoint(),d=range.createFromNodeAfter(list.last(a)),f=d.getEndPoint();range.create(u.node,u.offset,f.node,f.offset).select()}),this.getLinkInfo=function(){var t=this.createRange().expand(dom.isAnchor),e=$(list.head(t.nodes(dom.isAnchor)));return{range:t,text:t.toString(),isNewWindow:e.length?"_blank"===e.attr("target"):!1,url:e.length?e.attr("href"):""}},this.color=this.wrapCommand(function(t){var e=t.foreColor,i=t.backColor;e&&document.execCommand("foreColor",!1,e),i&&document.execCommand("backColor",!1,i)}),this.insertTable=this.wrapCommand(function(t){var e=t.split("x"),i=this.createRange().deleteContents();i.insertNode(c.createTable(e[0],e[1],r))}),this.floatMe=this.wrapCommand(function(t){var e=$(this.restoreTarget());e.css("float",t)}),this.resize=this.wrapCommand(function(t){var e=$(this.restoreTarget());e.css({width:100*t+"%",height:""})}),this.resizeTo=function(t,e,i){var n;if(i){var s=t.y/t.x,r=e.data("ratio");n={width:r>s?t.x:t.y/r,height:r>s?t.x*r:t.y}}else n={width:t.x,height:t.y};e.css(n)},this.removeMedia=this.wrapCommand(function(){var e=$(this.restoreTarget()).detach();t.triggerEvent("media.delete",e,s)}),this.hasFocus=function(){return s.is(":focus")},this.focus=function(){this.hasFocus()||s.focus()},this.isEmpty=function(){return dom.isEmpty(s[0])||dom.emptyPara===s.html()},this.empty=function(){t.invoke("code",dom.emptyPara)}},Clipboard=function(t){var e=this,i=t.layoutInfo.editable;this.events={"summernote.keydown":function(i,n){e.needKeydownHook()&&(n.ctrlKey||n.metaKey)&&n.keyCode===key.code.V&&(t.invoke("editor.saveRange"),e.$paste.focus(),setTimeout(function(){e.pasteByHook()},0))}},this.needKeydownHook=function(){return agent.isMSIE&&agent.browserVersion>10||agent.isFF},this.initialize=function(){this.needKeydownHook()?(this.$paste=$('<div tabindex="-1" />').attr("contenteditable",!0).css({position:"absolute",left:-1e5,opacity:0}),i.before(this.$paste),this.$paste.on("paste",function(e){t.triggerEvent("paste",e)})):i.on("paste",this.pasteByEvent)},this.destroy=function(){this.needKeydownHook()&&(this.$paste.remove(),this.$paste=null)},this.pasteByHook=function(){var e=this.$paste[0].firstChild;if(dom.isImg(e)){for(var i=e.src,n=atob(i.split(",")[1]),s=new Uint8Array(n.length),r=0;r<n.length;r++)s[r]=n.charCodeAt(r);var o=new Blob([s],{type:"image/png"});o.name="clipboard.png",t.invoke("editor.restoreRange"),t.invoke("editor.focus"),t.invoke("editor.insertImagesOrCallback",[o])}else{var a=$("<div />").html(this.$paste.html()).html();t.invoke("editor.restoreRange"),t.invoke("editor.focus"),a&&t.invoke("editor.pasteHTML",a)}this.$paste.empty()},this.pasteByEvent=function(e){var i=e.originalEvent.clipboardData;if(i&&i.items&&i.items.length){var n=list.head(i.items);"file"===n.kind&&-1!==n.type.indexOf("image/")&&t.invoke("editor.insertImagesOrCallback",[n.getAsFile()]),t.invoke("editor.afterCommand")}}},Dropzone=function(t){var e=$(document),i=t.layoutInfo.editor,n=t.layoutInfo.editable,s=t.options,r=s.langInfo,o={},a=$(['<div class="note-dropzone">','  <div class="note-dropzone-message"/>',"</div>"].join("")).prependTo(i),l=function(){Object.keys(o).forEach(function(t){e.off(t.substr(2).toLowerCase(),o[t])}),o={}};this.initialize=function(){s.disableDragAndDrop?(o.onDrop=function(t){t.preventDefault()},e.on("drop",o.onDrop)):this.attachDragAndDropEvent()},this.attachDragAndDropEvent=function(){var s=$(),l=a.find(".note-dropzone-message");o.onDragenter=function(e){var n=t.invoke("codeview.isActivated"),o=i.width()>0&&i.height()>0;n||s.length||!o||(i.addClass("dragover"),a.width(i.width()),a.height(i.height()),l.text(r.image.dragImageHere)),s=s.add(e.target)},o.onDragleave=function(t){s=s.not(t.target),s.length||i.removeClass("dragover")},o.onDrop=function(){s=$(),i.removeClass("dragover")},e.on("dragenter",o.onDragenter).on("dragleave",o.onDragleave).on("drop",o.onDrop),a.on("dragenter",function(){a.addClass("hover"),l.text(r.image.dropImage)}).on("dragleave",function(){a.removeClass("hover"),l.text(r.image.dragImageHere)}),a.on("drop",function(e){var i=e.originalEvent.dataTransfer;i&&i.files&&i.files.length?(e.preventDefault(),n.focus(),t.invoke("editor.insertImagesOrCallback",i.files)):$.each(i.types,function(e,n){var s=i.getData(n);n.toLowerCase().indexOf("text")>-1?t.invoke("editor.pasteHTML",s):$(s).each(function(){t.invoke("editor.insertNode",this)})})}).on("dragover",!1)},this.destroy=function(){l()}},CodeMirror;agent.hasCodeMirror&&(agent.isSupportAmd?require(["codemirror"],function(t){CodeMirror=t}):CodeMirror=window.CodeMirror);var Codeview=function(t){var e=t.layoutInfo.editor,i=t.layoutInfo.editable,n=t.layoutInfo.codable,s=t.options;this.sync=function(){var t=this.isActivated();t&&agent.hasCodeMirror&&n.data("cmEditor").save()},this.isActivated=function(){return e.hasClass("codeview")},this.toggle=function(){this.isActivated()?this.deactivate():this.activate(),t.triggerEvent("codeview.toggled")},this.activate=function(){if(n.val(dom.html(i,s.prettifyHtml)),n.height(i.height()),t.invoke("toolbar.updateCodeview",!0),e.addClass("codeview"),n.focus(),agent.hasCodeMirror){var r=CodeMirror.fromTextArea(n[0],s.codemirror);if(s.codemirror.tern){var o=new CodeMirror.TernServer(s.codemirror.tern);r.ternServer=o,r.on("cursorActivity",function(t){o.updateArgHints(t)})}r.setSize(null,i.outerHeight()),n.data("cmEditor",r)}},this.deactivate=function(){if(agent.hasCodeMirror){var r=n.data("cmEditor");n.val(r.getValue()),r.toTextArea()}var o=dom.value(n,s.prettifyHtml)||dom.emptyPara,a=i.html()!==o;i.html(o),i.height(s.height?n.height():"auto"),e.removeClass("codeview"),a&&t.triggerEvent("change",i.html(),i),i.focus(),t.invoke("toolbar.updateCodeview",!1)},this.destroy=function(){this.isActivated()&&this.deactivate()}},EDITABLE_PADDING=24,Statusbar=function(t){var e=$(document),i=t.layoutInfo.statusbar,n=t.layoutInfo.editable,s=t.options;this.initialize=function(){s.airMode||s.disableResizeEditor||i.on("mousedown",function(t){t.preventDefault(),t.stopPropagation();var i=n.offset().top-e.scrollTop();e.on("mousemove",function(t){var e=t.clientY-(i+EDITABLE_PADDING);e=s.minheight>0?Math.max(e,s.minheight):e,e=s.maxHeight>0?Math.min(e,s.maxHeight):e,n.height(e)}).one("mouseup",function(){e.off("mousemove")})})},this.destroy=function(){i.off(),i.remove()}},Fullscreen=function(t){var e=t.layoutInfo.editor,i=t.layoutInfo.toolbar,n=t.layoutInfo.editable,s=t.layoutInfo.codable,r=$(window),o=$("html, body");this.toggle=function(){var a=function(t){n.css("height",t.h),s.css("height",t.h),s.data("cmeditor")&&s.data("cmeditor").setsize(null,t.h)};e.toggleClass("fullscreen"),this.isFullscreen()?(n.data("orgHeight",n.css("height")),r.on("resize",function(){a({h:r.height()-i.outerHeight()})}).trigger("resize"),o.css("overflow","hidden")):(r.off("resize"),a({h:n.data("orgHeight")}),o.css("overflow","visible")),t.invoke("toolbar.updateFullscreen",this.isFullscreen())},this.isFullscreen=function(){return e.hasClass("fullscreen")}},Handle=function(t){var e=this,i=$(document),n=t.layoutInfo.editingArea,s=t.options;this.events={"summernote.mousedown":function(t,i){e.update(i.target)&&i.preventDefault()},"summernote.keyup summernote.scroll summernote.change summernote.dialog.shown":function(){e.update()}},this.initialize=function(){this.$handle=$(['<div class="note-handle">','<div class="note-control-selection">','<div class="note-control-selection-bg"></div>','<div class="note-control-holder note-control-nw"></div>','<div class="note-control-holder note-control-ne"></div>','<div class="note-control-holder note-control-sw"></div>','<div class="',s.disableResizeImage?"note-control-holder":"note-control-sizing",' note-control-se"></div>',s.disableResizeImage?"":'<div class="note-control-selection-info"></div>',"</div>","</div>"].join("")).prependTo(n),this.$handle.on("mousedown",function(n){if(dom.isControlSizing(n.target)){n.preventDefault(),n.stopPropagation();var s=e.$handle.find(".note-control-selection").data("target"),r=s.offset(),o=i.scrollTop();i.on("mousemove",function(i){t.invoke("editor.resizeTo",{x:i.clientX-r.left,y:i.clientY-(r.top-o)},s,!i.shiftKey),e.update(s[0])}).one("mouseup",function(e){e.preventDefault(),i.off("mousemove"),t.invoke("editor.afterCommand")}),s.data("ratio")||s.data("ratio",s.height()/s.width())}})},this.destroy=function(){this.$handle.remove()},this.update=function(e){var i=dom.isImg(e),n=this.$handle.find(".note-control-selection");if(t.invoke("imagePopover.update",e),i){var s=$(e),r=s.position(),o={w:s.outerWidth(!0),h:s.outerHeight(!0)};n.css({display:"block",left:r.left,top:r.top,width:o.w,height:o.h}).data("target",s);var a=o.w+"x"+o.h;n.find(".note-control-selection-info").text(a),t.invoke("editor.saveTarget",e)}else this.hide();return i},this.hide=function(){t.invoke("editor.clearTarget"),this.$handle.children().hide()}},AutoLink=function(t){var e=this,i="http://",n=/^([A-Za-z][A-Za-z0-9+-.]*\:[\/\/]?|mailto:[A-Z0-9._%+-]+@)?(www\.)?(.+)$/i;this.events={"summernote.keyup":function(t,i){i.isDefaultPrevented()||e.handleKeyup(i)},"summernote.keydown":function(t,i){e.handleKeydown(i)}},this.initialize=function(){this.lastWordRange=null},this.destroy=function(){this.lastWordRange=null},this.replace=function(){if(this.lastWordRange){var e=this.lastWordRange.toString(),s=e.match(n);if(s&&(s[1]||s[2])){var r=s[1]?e:i+e,o=$("<a />").html(e).attr("href",r)[0];this.lastWordRange.insertNode(o),this.lastWordRange=null,t.invoke("editor.focus")}}},this.handleKeydown=function(e){if(list.contains([key.code.ENTER,key.code.SPACE],e.keyCode)){var i=t.invoke("editor.createRange").getWordRange();this.lastWordRange=i}},this.handleKeyup=function(t){list.contains([key.code.ENTER,key.code.SPACE],t.keyCode)&&this.replace()}},AutoSync=function(t){var e=t.layoutInfo.note;this.events={"summernote.change":function(){e.val(t.invoke("code"))}},this.shouldInitialize=function(){return dom.isTextarea(e[0])}},Placeholder=function(t){var e=this,i=t.layoutInfo.editingArea,n=t.options;this.events={"summernote.init summernote.change":function(){e.update()},"summernote.codeview.toggled":function(){e.update()}},this.shouldInitialize=function(){return!!n.placeholder},this.initialize=function(){this.$placeholder=$('<div class="note-placeholder">'),this.$placeholder.on("click",function(){t.invoke("focus")}).text(n.placeholder).prependTo(i)},this.destroy=function(){this.$placeholder.remove()},this.update=function(){var e=!t.invoke("codeview.isActivated")&&t.invoke("editor.isEmpty");this.$placeholder.toggle(e)}},Buttons=function(t){var e=this,i=$.summernote.ui,n=t.layoutInfo.toolbar,s=t.options,r=s.langInfo,o=func.invertObject(s.keyMap[agent.isMac?"mac":"pc"]),a=this.representShortcut=function(t){var e=o[t];return s.shortcuts&&e?(agent.isMac&&(e=e.replace("CMD","").replace("SHIFT","")),e=e.replace("BACKSLASH","\\").replace("SLASH","/").replace("LEFTBRACKET","[").replace("RIGHTBRACKET","]")," ("+e+")"):""};this.initialize=function(){this.addToolbarButtons(),this.addImagePopoverButtons(),this.addLinkPopoverButtons(),this.fontInstalledMap={}},this.destroy=function(){delete this.fontInstalledMap},this.isFontInstalled=function(t){return e.fontInstalledMap.hasOwnProperty(t)||(e.fontInstalledMap[t]=agent.isFontInstalled(t)||list.contains(s.fontNamesIgnoreCheck,t)),e.fontInstalledMap[t]},this.addToolbarButtons=function(){t.memo("button.style",function(){return i.buttonGroup([i.button({className:"dropdown-toggle",contents:i.icon(s.icons.magic)+" "+i.icon(s.icons.caret,"span"),tooltip:r.style.style,data:{toggle:"dropdown"}}),i.dropdown({className:"dropdown-style",items:t.options.styleTags,template:function(t){"string"==typeof t&&(t={tag:t,title:r.style.hasOwnProperty(t)?r.style[t]:t});var e=t.tag,i=t.title,n=t.style?' style="'+t.style+'" ':"",s=t.className?' class="'+t.className+'"':"";return"<"+e+n+s+">"+i+"</"+e+">"},click:t.createInvokeHandler("editor.formatBlock")})]).render()}),t.memo("button.bold",function(){return i.button({className:"note-btn-bold",contents:i.icon(s.icons.bold),tooltip:r.font.bold+a("bold"),click:t.createInvokeHandler("editor.bold")}).render()}),t.memo("button.italic",function(){return i.button({className:"note-btn-italic",contents:i.icon(s.icons.italic),tooltip:r.font.italic+a("italic"),click:t.createInvokeHandler("editor.italic")}).render()}),t.memo("button.underline",function(){return i.button({className:"note-btn-underline",contents:i.icon(s.icons.underline),tooltip:r.font.underline+a("underline"),click:t.createInvokeHandler("editor.underline")}).render()}),t.memo("button.clear",function(){return i.button({contents:i.icon(s.icons.eraser),tooltip:r.font.clear+a("removeFormat"),click:t.createInvokeHandler("editor.removeFormat")}).render()}),t.memo("button.strikethrough",function(){return i.button({className:"note-btn-strikethrough",contents:i.icon(s.icons.strikethrough),tooltip:r.font.strikethrough+a("strikethrough"),click:t.createInvokeHandler("editor.strikethrough")}).render()}),t.memo("button.superscript",function(){return i.button({className:"note-btn-superscript",contents:i.icon(s.icons.superscript),tooltip:r.font.superscript,click:t.createInvokeHandler("editor.superscript")}).render()}),t.memo("button.subscript",function(){return i.button({className:"note-btn-subscript",contents:i.icon(s.icons.subscript),tooltip:r.font.subscript,click:t.createInvokeHandler("editor.subscript")}).render()}),t.memo("button.fontname",function(){return i.buttonGroup([i.button({className:"dropdown-toggle",contents:'<span class="note-current-fontname"/> '+i.icon(s.icons.caret,"span"),tooltip:r.font.name,data:{toggle:"dropdown"}}),i.dropdownCheck({className:"dropdown-fontname",checkClassName:s.icons.menuCheck,items:s.fontNames.filter(e.isFontInstalled),template:function(t){return'<span style="font-family:'+t+'">'+t+"</span>"},click:t.createInvokeHandler("editor.fontName")})]).render()}),t.memo("button.fontsize",function(){return i.buttonGroup([i.button({className:"dropdown-toggle",contents:'<span class="note-current-fontsize"/>'+i.icon(s.icons.caret,"span"),tooltip:r.font.size,data:{toggle:"dropdown"}}),i.dropdownCheck({className:"dropdown-fontsize",checkClassName:s.icons.menuCheck,items:s.fontSizes,click:t.createInvokeHandler("editor.fontSize")})]).render()}),t.memo("button.color",function(){return i.buttonGroup({className:"note-color",children:[i.button({className:"note-current-color-button",contents:i.icon(s.icons.font+" note-recent-color"),tooltip:r.color.recent,click:function(e){var i=$(e.currentTarget);t.invoke("editor.color",{backColor:i.attr("data-backColor"),foreColor:i.attr("data-foreColor")})},callback:function(t){var e=t.find(".note-recent-color");e.css("background-color","#FFFF00"),t.attr("data-backColor","#FFFF00")}}),i.button({className:"dropdown-toggle",contents:i.icon(s.icons.caret,"span"),tooltip:r.color.more,data:{toggle:"dropdown"}}),i.dropdown({items:["<li>",'<div class="btn-group">','  <div class="note-palette-title">'+r.color.background+"</div>","  <div>",'    <button type="button" class="note-color-reset btn btn-default" data-event="backColor" data-value="inherit">',r.color.transparent,"    </button>","  </div>",'  <div class="note-holder" data-event="backColor"/>',"</div>",'<div class="btn-group">','  <div class="note-palette-title">'+r.color.foreground+"</div>","  <div>",'    <button type="button" class="note-color-reset btn btn-default" data-event="removeFormat" data-value="foreColor">',r.color.resetToDefault,"    </button>","  </div>",'  <div class="note-holder" data-event="foreColor"/>',"</div>","</li>"].join(""),callback:function(t){t.find(".note-holder").each(function(){var t=$(this);t.append(i.palette({colors:s.colors,eventName:t.data("event")}).render())})},click:function(e){var i=$(e.target),n=i.data("event"),s=i.data("value");if(n&&s){var r="backColor"===n?"background-color":"color",o=i.closest(".note-color").find(".note-recent-color"),a=i.closest(".note-color").find(".note-current-color-button");o.css(r,s),a.attr("data-"+n,s),t.invoke("editor."+n,s)}}})]}).render()}),t.memo("button.ul",function(){return i.button({contents:i.icon(s.icons.unorderedlist),tooltip:r.lists.unordered+a("insertUnorderedList"),click:t.createInvokeHandler("editor.insertUnorderedList")}).render()}),t.memo("button.ol",function(){return i.button({contents:i.icon(s.icons.orderedlist),tooltip:r.lists.ordered+a("insertOrderedList"),click:t.createInvokeHandler("editor.insertOrderedList")}).render()});var n=i.button({contents:i.icon(s.icons.alignLeft),tooltip:r.paragraph.left+a("justifyLeft"),click:t.createInvokeHandler("editor.justifyLeft")}),o=i.button({contents:i.icon(s.icons.alignCenter),tooltip:r.paragraph.center+a("justifyCenter"),click:t.createInvokeHandler("editor.justifyCenter")}),l=i.button({contents:i.icon(s.icons.alignRight),tooltip:r.paragraph.right+a("justifyRight"),click:t.createInvokeHandler("editor.justifyRight")}),h=i.button({contents:i.icon(s.icons.alignJustify),tooltip:r.paragraph.justify+a("justifyFull"),click:t.createInvokeHandler("editor.justifyFull")}),c=i.button({contents:i.icon(s.icons.outdent),tooltip:r.paragraph.outdent+a("outdent"),click:t.createInvokeHandler("editor.outdent")}),u=i.button({contents:i.icon(s.icons.indent),tooltip:r.paragraph.indent+a("indent"),click:t.createInvokeHandler("editor.indent")});t.memo("button.justifyLeft",func.invoke(n,"render")),t.memo("button.justifyCenter",func.invoke(o,"render")),t.memo("button.justifyRight",func.invoke(l,"render")),t.memo("button.justifyFull",func.invoke(h,"render")),t.memo("button.outdent",func.invoke(c,"render")),t.memo("button.indent",func.invoke(u,"render")),t.memo("button.paragraph",function(){return i.buttonGroup([i.button({className:"dropdown-toggle",contents:i.icon(s.icons.alignLeft)+" "+i.icon(s.icons.caret,"span"),tooltip:r.paragraph.paragraph,data:{toggle:"dropdown"}}),i.dropdown([i.buttonGroup({className:"note-align",children:[n,o,l,h]}),i.buttonGroup({className:"note-list",children:[c,u]})])]).render()}),t.memo("button.height",function(){return i.buttonGroup([i.button({className:"dropdown-toggle",contents:i.icon(s.icons.textHeight)+" "+i.icon(s.icons.caret,"span"),tooltip:r.font.height,data:{toggle:"dropdown"}}),i.dropdownCheck({items:s.lineHeights,checkClassName:s.icons.menuCheck,className:"dropdown-line-height",click:t.createInvokeHandler("editor.lineHeight")})]).render()}),t.memo("button.table",function(){return i.buttonGroup([i.button({className:"dropdown-toggle",contents:i.icon(s.icons.table)+" "+i.icon(s.icons.caret,"span"),tooltip:r.table.table,data:{toggle:"dropdown"}}),i.dropdown({className:"note-table",items:['<div class="note-dimension-picker">','  <div class="note-dimension-picker-mousecatcher" data-event="insertTable" data-value="1x1"/>','  <div class="note-dimension-picker-highlighted"/>','  <div class="note-dimension-picker-unhighlighted"/>',"</div>",'<div class="note-dimension-display">1 x 1</div>'].join("")})],{callback:function(i){var n=i.find(".note-dimension-picker-mousecatcher");n.css({width:s.insertTableMaxSize.col+"em",height:s.insertTableMaxSize.row+"em"}).mousedown(t.createInvokeHandler("editor.insertTable")).on("mousemove",e.tableMoveHandler)}}).render()}),t.memo("button.link",function(){return i.button({contents:i.icon(s.icons.link),tooltip:r.link.link+a("linkDialog.show"),click:t.createInvokeHandler("linkDialog.show")}).render()}),t.memo("button.picture",function(){return i.button({contents:i.icon(s.icons.picture),tooltip:r.image.image,click:t.createInvokeHandler("imageDialog.show")}).render()}),t.memo("button.video",function(){return i.button({contents:i.icon(s.icons.video),tooltip:r.video.video,click:t.createInvokeHandler("videoDialog.show")}).render()}),t.memo("button.hr",function(){return i.button({contents:i.icon(s.icons.minus),tooltip:r.hr.insert+a("insertHorizontalRule"),click:t.createInvokeHandler("editor.insertHorizontalRule")}).render()}),t.memo("button.fullscreen",function(){return i.button({className:"btn-fullscreen",contents:i.icon(s.icons.arrowsAlt),tooltip:r.options.fullscreen,click:t.createInvokeHandler("fullscreen.toggle")}).render()}),t.memo("button.codeview",function(){return i.button({className:"btn-codeview",contents:i.icon(s.icons.code),tooltip:r.options.codeview,click:t.createInvokeHandler("codeview.toggle")}).render()}),t.memo("button.redo",function(){return i.button({contents:i.icon(s.icons.redo),tooltip:r.history.redo+a("redo"),click:t.createInvokeHandler("editor.redo")}).render()}),t.memo("button.undo",function(){return i.button({contents:i.icon(s.icons.undo),tooltip:r.history.undo+a("undo"),click:t.createInvokeHandler("editor.undo")}).render()}),t.memo("button.help",function(){return i.button({contents:i.icon(s.icons.question),tooltip:r.options.help,click:t.createInvokeHandler("helpDialog.show")}).render()})},this.addImagePopoverButtons=function(){t.memo("button.imageSize100",function(){return i.button({contents:'<span class="note-fontsize-10">100%</span>',tooltip:r.image.resizeFull,click:t.createInvokeHandler("editor.resize","1")}).render()}),t.memo("button.imageSize50",function(){return i.button({contents:'<span class="note-fontsize-10">50%</span>',tooltip:r.image.resizeHalf,click:t.createInvokeHandler("editor.resize","0.5")}).render()}),t.memo("button.imageSize25",function(){return i.button({contents:'<span class="note-fontsize-10">25%</span>',tooltip:r.image.resizeQuarter,click:t.createInvokeHandler("editor.resize","0.25")}).render()}),t.memo("button.floatLeft",function(){return i.button({contents:i.icon(s.icons.alignLeft),tooltip:r.image.floatLeft,click:t.createInvokeHandler("editor.floatMe","left")}).render()}),t.memo("button.floatRight",function(){return i.button({contents:i.icon(s.icons.alignRight),tooltip:r.image.floatRight,click:t.createInvokeHandler("editor.floatMe","right")}).render()}),t.memo("button.floatNone",function(){return i.button({contents:i.icon(s.icons.alignJustify),tooltip:r.image.floatNone,click:t.createInvokeHandler("editor.floatMe","none")}).render()}),t.memo("button.removeMedia",function(){return i.button({contents:i.icon(s.icons.trash),tooltip:r.image.remove,click:t.createInvokeHandler("editor.removeMedia")}).render()})},this.addLinkPopoverButtons=function(){t.memo("button.linkDialogShow",function(){return i.button({contents:i.icon(s.icons.link),tooltip:r.link.edit,click:t.createInvokeHandler("linkDialog.show")}).render()}),t.memo("button.unlink",function(){return i.button({contents:i.icon(s.icons.unlink),tooltip:r.link.unlink,click:t.createInvokeHandler("editor.unlink")}).render()})},this.build=function(e,n){for(var s=0,r=n.length;r>s;s++){for(var o=n[s],a=o[0],l=o[1],h=i.buttonGroup({className:"note-"+a}).render(),c=0,u=l.length;u>c;c++){var d=t.memo("button."+l[c]);d&&h.append("function"==typeof d?d(t):d)}h.appendTo(e)}},this.updateCurrentStyle=function(){var i=t.invoke("editor.currentStyle");if(this.updateBtnStates({".note-btn-bold":function(){return"bold"===i["font-bold"]},".note-btn-italic":function(){return"italic"===i["font-italic"]},".note-btn-underline":function(){return"underline"===i["font-underline"]},".note-btn-subscript":function(){return"subscript"===i["font-subscript"]},".note-btn-superscript":function(){return"superscript"===i["font-superscript"]},".note-btn-strikethrough":function(){return"strikethrough"===i["font-strikethrough"]}}),i["font-family"]){var s=i["font-family"].split(",").map(function(t){return t.replace(/[\'\"]/g,"").replace(/\s+$/,"").replace(/^\s+/,"")}),r=list.find(s,e.isFontInstalled);n.find(".dropdown-fontname li a").each(function(){var t=$(this).data("value")+""==r+"";this.className=t?"checked":""}),n.find(".note-current-fontname").text(r)}if(i["font-size"]){var o=i["font-size"];n.find(".dropdown-fontsize li a").each(function(){var t=$(this).data("value")+""==o+"";this.className=t?"checked":""}),n.find(".note-current-fontsize").text(o)}if(i["line-height"]){var a=i["line-height"];n.find(".dropdown-line-height li a").each(function(){var t=$(this).data("value")+""==a+"";this.className=t?"checked":""})}},this.updateBtnStates=function(t){$.each(t,function(t,e){i.toggleBtnActive(n.find(t),e())})},this.tableMoveHandler=function(t){var e,i=18,n=$(t.target.parentNode),r=n.next(),o=n.find(".note-dimension-picker-mousecatcher"),a=n.find(".note-dimension-picker-highlighted"),l=n.find(".note-dimension-picker-unhighlighted");if(void 0===t.offsetX){var h=$(t.target).offset();e={x:t.pageX-h.left,y:t.pageY-h.top}}else e={x:t.offsetX,y:t.offsetY};var c={c:Math.ceil(e.x/i)||1,r:Math.ceil(e.y/i)||1};a.css({width:c.c+"em",height:c.r+"em"}),o.data("value",c.c+"x"+c.r),3<c.c&&c.c<s.insertTableMaxSize.col&&l.css({width:c.c+1+"em"}),3<c.r&&c.r<s.insertTableMaxSize.row&&l.css({height:c.r+1+"em"}),r.html(c.c+" x "+c.r)}},Toolbar=function(t){var e=$.summernote.ui,i=t.layoutInfo.note,n=t.layoutInfo.toolbar,s=t.options;this.shouldInitialize=function(){return!s.airMode},this.initialize=function(){s.toolbar=s.toolbar||[],s.toolbar.length?t.invoke("buttons.build",n,s.toolbar):n.hide(),s.toolbarContainer&&n.appendTo(s.toolbarContainer),i.on("summernote.keyup summernote.mouseup summernote.change",function(){t.invoke("buttons.updateCurrentStyle")}),t.invoke("buttons.updateCurrentStyle")},this.destroy=function(){n.children().remove()},this.updateFullscreen=function(t){e.toggleBtnActive(n.find(".btn-fullscreen"),t)},this.updateCodeview=function(t){e.toggleBtnActive(n.find(".btn-codeview"),t),t?this.deactivate():this.activate()},this.activate=function(t){var i=n.find("button");t||(i=i.not(".btn-codeview")),e.toggleBtn(i,!0)},this.deactivate=function(t){var i=n.find("button");t||(i=i.not(".btn-codeview")),e.toggleBtn(i,!1)}},LinkDialog=function(t){var e=this,i=$.summernote.ui,n=t.layoutInfo.editor,s=t.options,r=s.langInfo;this.initialize=function(){var t=s.dialogsInBody?$(document.body):n,e='<div class="form-group"><label>'+r.link.textToDisplay+'</label><input class="note-link-text form-control" type="text" /></div><div class="form-group"><label>'+r.link.url+'</label><input class="note-link-url form-control" type="text" value="http://" /></div>'+(s.disableLinkTarget?"":'<div class="checkbox"><label><input type="checkbox" checked> '+r.link.openInNewWindow+"</label></div>"),o='<button href="#" class="btn btn-primary note-link-btn disabled" disabled>'+r.link.insert+"</button>";this.$dialog=i.dialog({className:"link-dialog",title:r.link.insert,fade:s.dialogsFade,body:e,footer:o}).render().appendTo(t)},this.destroy=function(){i.hideDialog(this.$dialog),this.$dialog.remove()},this.bindEnterKey=function(t,e){t.on("keypress",function(t){t.keyCode===key.code.ENTER&&e.trigger("click")})},this.toggleLinkBtn=function(t,e,n){i.toggleBtn(t,e.val()&&n.val())},this.showLinkDialog=function(n){return $.Deferred(function(s){var r=e.$dialog.find(".note-link-text"),o=e.$dialog.find(".note-link-url"),a=e.$dialog.find(".note-link-btn"),l=e.$dialog.find("input[type=checkbox]");i.onDialogShown(e.$dialog,function(){t.triggerEvent("dialog.shown"),n.url||(n.url=n.text),r.val(n.text);var i=function(){e.toggleLinkBtn(a,r,o),n.text=r.val()};r.on("input",i).on("paste",function(){setTimeout(i,0)});var h=function(){e.toggleLinkBtn(a,r,o),n.text||r.val(o.val())};o.on("input",h).on("paste",function(){setTimeout(h,0)}).val(n.url).trigger("focus"),e.toggleLinkBtn(a,r,o),e.bindEnterKey(o,a),e.bindEnterKey(r,a),l.prop("checked",n.isNewWindow),a.one("click",function(t){t.preventDefault(),s.resolve({range:n.range,url:o.val(),text:r.val(),isNewWindow:l.is(":checked")}),e.$dialog.modal("hide")})}),i.onDialogHidden(e.$dialog,function(){r.off("input paste keypress"),o.off("input paste keypress"),a.off("click"),"pending"===s.state()&&s.reject()}),i.showDialog(e.$dialog)}).promise()},this.show=function(){var e=t.invoke("editor.getLinkInfo");t.invoke("editor.saveRange"),this.showLinkDialog(e).then(function(e){t.invoke("editor.restoreRange"),t.invoke("editor.createLink",e)}).fail(function(){t.invoke("editor.restoreRange")})},t.memo("help.linkDialog.show",s.langInfo.help["linkDialog.show"])},LinkPopover=function(t){var e=this,i=$.summernote.ui,n=t.options;this.events={"summernote.keyup summernote.mouseup summernote.change summernote.scroll":function(){e.update()},"summernote.dialog.shown":function(){e.hide()}},this.shouldInitialize=function(){return!list.isEmpty(n.popover.link)},this.initialize=function(){this.$popover=i.popover({className:"note-link-popover",callback:function(t){var e=t.find(".popover-content");e.prepend('<span><a target="_blank"></a>&nbsp;</span>')}}).render().appendTo("body");var e=this.$popover.find(".popover-content");t.invoke("buttons.build",e,n.popover.link)},this.destroy=function(){this.$popover.remove()},this.update=function(){if(!t.invoke("editor.hasFocus"))return void this.hide();var e=t.invoke("editor.createRange");if(e.isCollapsed()&&e.isOnAnchor()){var i=dom.ancestor(e.sc,dom.isAnchor),n=$(i).attr("href");this.$popover.find("a").attr("href",n).html(n);var s=dom.posFromPlaceholder(i);this.$popover.css({display:"block",left:s.left,top:s.top})}else this.hide()},this.hide=function(){this.$popover.hide()}},ImageDialog=function(t){var e=this,i=$.summernote.ui,n=t.layoutInfo.editor,s=t.options,r=s.langInfo;this.initialize=function(){var t=s.dialogsInBody?$(document.body):n,e="";if(s.maximumImageFileSize){var o=Math.floor(Math.log(s.maximumImageFileSize)/Math.log(1024)),a=1*(s.maximumImageFileSize/Math.pow(1024,o)).toFixed(2)+" "+" KMGTP"[o]+"B";e="<small>"+r.image.maximumFileSize+" : "+a+"</small>"}var l='<div class="form-group note-group-select-from-files"><label>'+r.image.selectFromFiles+'</label><input class="note-image-input form-control" type="file" name="files" accept="image/*" multiple="multiple" />'+e+'</div><div class="form-group note-group-image-url" style="overflow:auto;"><label>'+r.image.url+'</label><input class="note-image-url form-control col-md-12" type="text" /></div>',h='<button href="#" class="btn btn-primary note-image-btn disabled" disabled>'+r.image.insert+"</button>";this.$dialog=i.dialog({title:r.image.insert,fade:s.dialogsFade,body:l,footer:h}).render().appendTo(t)},this.destroy=function(){i.hideDialog(this.$dialog),this.$dialog.remove()},this.bindEnterKey=function(t,e){t.on("keypress",function(t){t.keyCode===key.code.ENTER&&e.trigger("click")})},this.show=function(){t.invoke("editor.saveRange"),this.showImageDialog().then(function(n){i.hideDialog(e.$dialog),t.invoke("editor.restoreRange"),"string"==typeof n?t.invoke("editor.insertImage",n):t.invoke("editor.insertImagesOrCallback",n)}).fail(function(){t.invoke("editor.restoreRange")})},this.showImageDialog=function(){return $.Deferred(function(n){var s=e.$dialog.find(".note-image-input"),r=e.$dialog.find(".note-image-url"),o=e.$dialog.find(".note-image-btn");i.onDialogShown(e.$dialog,function(){t.triggerEvent("dialog.shown"),s.replaceWith(s.clone().on("change",function(){n.resolve(this.files||this.value)}).val("")),o.click(function(t){t.preventDefault(),n.resolve(r.val())}),r.on("keyup paste",function(){var t=r.val();i.toggleBtn(o,t)}).val("").trigger("focus"),e.bindEnterKey(r,o)}),i.onDialogHidden(e.$dialog,function(){s.off("change"),r.off("keyup paste keypress"),o.off("click"),"pending"===n.state()&&n.reject()}),i.showDialog(e.$dialog)})}},ImagePopover=function(t){var e=$.summernote.ui,i=t.options;this.shouldInitialize=function(){return!list.isEmpty(i.popover.image)},this.initialize=function(){this.$popover=e.popover({className:"note-image-popover"}).render().appendTo("body");var n=this.$popover.find(".popover-content");t.invoke("buttons.build",n,i.popover.image)},this.destroy=function(){this.$popover.remove()},this.update=function(t){if(dom.isImg(t)){var e=dom.posFromPlaceholder(t);this.$popover.css({display:"block",left:e.left,top:e.top})}else this.hide()},this.hide=function(){this.$popover.hide()}},VideoDialog=function(t){var e=this,i=$.summernote.ui,n=t.layoutInfo.editor,s=t.options,r=s.langInfo;this.initialize=function(){var t=s.dialogsInBody?$(document.body):n,e='<div class="form-group row-fluid"><label>'+r.video.url+' <small class="text-muted">'+r.video.providers+'</small></label><input class="note-video-url form-control span12" type="text" /></div>',o='<button href="#" class="btn btn-primary note-video-btn disabled" disabled>'+r.video.insert+"</button>";this.$dialog=i.dialog({title:r.video.insert,fade:s.dialogsFade,body:e,footer:o}).render().appendTo(t)},this.destroy=function(){i.hideDialog(this.$dialog),this.$dialog.remove()},this.bindEnterKey=function(t,e){t.on("keypress",function(t){t.keyCode===key.code.ENTER&&e.trigger("click")})},this.createVideoNode=function(t){var e,i=/^(?:https?:\/\/)?(?:www\.)?(?:youtu\.be\/|youtube\.com\/(?:embed\/|v\/|watch\?v=|watch\?.+&v=))((\w|-){11})(?:\S+)?$/,n=t.match(i),s=/(?:www\.|\/\/)instagram\.com\/p\/(.[a-zA-Z0-9_-]*)/,r=t.match(s),o=/\/\/vine\.co\/v\/([a-zA-Z0-9]+)/,a=t.match(o),l=/\/\/(player\.)?vimeo\.com\/([a-z]*\/)*([0-9]{6,11})[?]?.*/,h=t.match(l),c=/.+dailymotion.com\/(video|hub)\/([^_]+)[^#]*(#video=([^_&]+))?/,u=t.match(c),d=/\/\/v\.youku\.com\/v_show\/id_(\w+)=*\.html/,f=t.match(d),p=/^.+.(mp4|m4v)$/,m=t.match(p),g=/^.+.(ogg|ogv)$/,v=t.match(g),y=/^.+.(webm)$/,b=t.match(y);if(n&&11===n[1].length){var w=n[1];e=$("<iframe>").attr("frameborder",0).attr("src","//www.youtube.com/embed/"+w).attr("width","640").attr("height","360")}else if(r&&r[0].length)e=$("<iframe>").attr("frameborder",0).attr("src","https://instagram.com/p/"+r[1]+"/embed/").attr("width","612").attr("height","710").attr("scrolling","no").attr("allowtransparency","true");else if(a&&a[0].length)e=$("<iframe>").attr("frameborder",0).attr("src",a[0]+"/embed/simple").attr("width","600").attr("height","600").attr("class","vine-embed");else if(h&&h[3].length)e=$("<iframe webkitallowfullscreen mozallowfullscreen allowfullscreen>").attr("frameborder",0).attr("src","//player.vimeo.com/video/"+h[3]).attr("width","640").attr("height","360");else if(u&&u[2].length)e=$("<iframe>").attr("frameborder",0).attr("src","//www.dailymotion.com/embed/video/"+u[2]).attr("width","640").attr("height","360");else if(f&&f[1].length)e=$("<iframe webkitallowfullscreen mozallowfullscreen allowfullscreen>").attr("frameborder",0).attr("height","498").attr("width","510").attr("src","//player.youku.com/embed/"+f[1]);else{if(!(m||v||b))return!1;e=$("<video controls>").attr("src",t).attr("width","640").attr("height","360")}return e.addClass("note-video-clip"),e[0]},this.show=function(){var n=t.invoke("editor.getSelectedText");t.invoke("editor.saveRange"),this.showVideoDialog(n).then(function(n){i.hideDialog(e.$dialog),t.invoke("editor.restoreRange");var s=e.createVideoNode(n);s&&t.invoke("editor.insertNode",s)}).fail(function(){t.invoke("editor.restoreRange")})},this.showVideoDialog=function(n){return $.Deferred(function(s){var r=e.$dialog.find(".note-video-url"),o=e.$dialog.find(".note-video-btn");i.onDialogShown(e.$dialog,function(){t.triggerEvent("dialog.shown"),r.val(n).on("input",function(){i.toggleBtn(o,r.val())}).trigger("focus"),o.click(function(t){t.preventDefault(),s.resolve(r.val())}),e.bindEnterKey(r,o)}),i.onDialogHidden(e.$dialog,function(){r.off("input"),o.off("click"),"pending"===s.state()&&s.reject()}),i.showDialog(e.$dialog)})}},HelpDialog=function(t){var e=this,i=$.summernote.ui,n=t.layoutInfo.editor,s=t.options,r=s.langInfo;this.createShortCutList=function(){var e=s.keyMap[agent.isMac?"mac":"pc"];return Object.keys(e).map(function(i){var n=e[i],s=$('<div><div class="help-list-item"/></div>');return s.append($("<label><kbd>"+i+"</kdb></label>").css({width:180,"margin-right":10})).append($("<span/>").html(t.memo("help."+n)||n)),s.html()}).join("")},this.initialize=function(){var t=s.dialogsInBody?$(document.body):n,e=['<p class="text-center">','<a href="http://summernote.org/" target="_blank">Summernote 0.8.2</a>  ','<a href="https://github.com/summernote/summernote" target="_blank">Project</a>  ','<a href="https://github.com/summernote/summernote/issues" target="_blank">Issues</a>',"</p>"].join("");this.$dialog=i.dialog({title:r.options.help,fade:s.dialogsFade,body:this.createShortCutList(),footer:e,callback:function(t){t.find(".modal-body").css({"max-height":300,overflow:"scroll"})}}).render().appendTo(t)},this.destroy=function(){i.hideDialog(this.$dialog),this.$dialog.remove()},this.showHelpDialog=function(){return $.Deferred(function(n){i.onDialogShown(e.$dialog,function(){t.triggerEvent("dialog.shown"),n.resolve()}),i.showDialog(e.$dialog)}).promise()},this.show=function(){t.invoke("editor.saveRange"),this.showHelpDialog().then(function(){t.invoke("editor.restoreRange")})}},AirPopover=function(t){var e=this,i=$.summernote.ui,n=t.options,s=20;this.events={"summernote.keyup summernote.mouseup summernote.scroll":function(){e.update()},"summernote.change summernote.dialog.shown":function(){e.hide()},"summernote.focusout":function(t,i){agent.isFF||i.relatedTarget&&dom.ancestor(i.relatedTarget,func.eq(e.$popover[0]))||e.hide()}},this.shouldInitialize=function(){return n.airMode&&!list.isEmpty(n.popover.air)},this.initialize=function(){this.$popover=i.popover({className:"note-air-popover"}).render().appendTo("body");var e=this.$popover.find(".popover-content");t.invoke("buttons.build",e,n.popover.air)},this.destroy=function(){this.$popover.remove()},this.update=function(){var e=t.invoke("editor.currentStyle");if(e.range&&!e.range.isCollapsed()){var i=list.last(e.range.getClientRects());if(i){var n=func.rect2bnd(i);this.$popover.css({display:"block",left:Math.max(n.left+n.width/2,0)-s,top:n.top+n.height})}}else this.hide()},this.hide=function(){this.$popover.hide()}},HintPopover=function(t){var e=this,i=$.summernote.ui,n=5,s=t.options.hint||[],r=t.options.hintDirection||"bottom",o=$.isArray(s)?s:[s];this.events={"summernote.keyup":function(t,i){i.isDefaultPrevented()||e.handleKeyup(i)},"summernote.keydown":function(t,i){e.handleKeydown(i)},"summernote.dialog.shown":function(){e.hide()}},this.shouldInitialize=function(){return o.length>0},this.initialize=function(){this.lastWordRange=null,this.$popover=i.popover({className:"note-hint-popover",hideArrow:!0,direction:""}).render().appendTo("body"),this.$popover.hide(),this.$content=this.$popover.find(".popover-content"),this.$content.on("click",".note-hint-item",function(){e.$content.find(".active").removeClass("active"),$(this).addClass("active"),e.replace()})},this.destroy=function(){this.$popover.remove()},this.selectItem=function(t){this.$content.find(".active").removeClass("active"),t.addClass("active"),this.$content[0].scrollTop=t[0].offsetTop-this.$content.innerHeight()/2},this.moveDown=function(){var t=this.$content.find(".note-hint-item.active"),e=t.next();if(e.length)this.selectItem(e);else{var i=t.parent().next();i.length||(i=this.$content.find(".note-hint-group").first()),this.selectItem(i.find(".note-hint-item").first())}},this.moveUp=function(){var t=this.$content.find(".note-hint-item.active"),e=t.prev();if(e.length)this.selectItem(e);else{var i=t.parent().prev();i.length||(i=this.$content.find(".note-hint-group").last()),this.selectItem(i.find(".note-hint-item").last())}},this.replace=function(){var e=this.$content.find(".note-hint-item.active");if(e.length){var i=this.nodeFromItem(e);this.lastWordRange.insertNode(i),range.createFromNode(i).collapse().select(),this.lastWordRange=null,this.hide(),t.invoke("editor.focus")}},this.nodeFromItem=function(t){var e=o[t.data("index")],i=t.data("item"),n=e.content?e.content(i):i;return"string"==typeof n&&(n=dom.createText(n)),n},this.createItemTemplates=function(t,e){var i=o[t];return e.map(function(e,n){var s=$('<div class="note-hint-item"/>');return s.append(i.template?i.template(e):e+""),s.data({index:t,item:e}),0===t&&0===n&&s.addClass("active"),s})},this.handleKeydown=function(t){this.$popover.is(":visible")&&(t.keyCode===key.code.ENTER?(t.preventDefault(),this.replace()):t.keyCode===key.code.UP?(t.preventDefault(),this.moveUp()):t.keyCode===key.code.DOWN&&(t.preventDefault(),this.moveDown()))},this.searchKeyword=function(t,e,i){var n=o[t];if(n&&n.match.test(e)&&n.search){var s=n.match.exec(e);n.search(s[1],i)}else i()},this.createGroup=function(t,i){var n=$('<div class="note-hint-group note-hint-group-'+t+'"/>');return this.searchKeyword(t,i,function(i){i=i||[],i.length&&(n.html(e.createItemTemplates(t,i)),e.show())}),n},this.handleKeyup=function(i){if(list.contains([key.code.ENTER,key.code.UP,key.code.DOWN],i.keyCode)){if(i.keyCode===key.code.ENTER&&this.$popover.is(":visible"))return}else{var s=t.invoke("editor.createRange").getWordRange(),a=s.toString();if(o.length&&a){this.$content.empty();var l=func.rect2bnd(list.last(s.getClientRects()));l&&(this.$popover.hide(),this.lastWordRange=s,o.forEach(function(t,i){t.match.test(a)&&e.createGroup(i,a).appendTo(e.$content)}),"top"===r?this.$popover.css({left:l.left,top:l.top-this.$popover.outerHeight()-n}):this.$popover.css({left:l.left,top:l.top+l.height+n}))}else this.hide()}},this.show=function(){this.$popover.show()},this.hide=function(){this.$popover.hide()}};$.summernote=$.extend($.summernote,{version:"0.8.2",ui:ui,dom:dom,plugins:{},options:{modules:{editor:Editor,clipboard:Clipboard,dropzone:Dropzone,codeview:Codeview,statusbar:Statusbar,fullscreen:Fullscreen,handle:Handle,hintPopover:HintPopover,autoLink:AutoLink,autoSync:AutoSync,placeholder:Placeholder,buttons:Buttons,toolbar:Toolbar,linkDialog:LinkDialog,linkPopover:LinkPopover,imageDialog:ImageDialog,imagePopover:ImagePopover,videoDialog:VideoDialog,helpDialog:HelpDialog,airPopover:AirPopover},buttons:{},lang:"en-US",toolbar:[["style",["style"]],["font",["bold","underline","clear"]],["fontname",["fontname"]],["color",["color"]],["para",["ul","ol","paragraph"]],["table",["table"]],["insert",["link","picture","video"]],["view",["fullscreen","codeview","help"]]],popover:{image:[["imagesize",["imageSize100","imageSize50","imageSize25"]],["float",["floatLeft","floatRight","floatNone"]],["remove",["removeMedia"]]],link:[["link",["linkDialogShow","unlink"]]],air:[["color",["color"]],["font",["bold","underline","clear"]],["para",["ul","paragraph"]],["table",["table"]],["insert",["link","picture"]]]},airMode:!1,width:null,height:null,focus:!1,tabSize:4,styleWithSpan:!0,shortcuts:!0,textareaAutoSync:!0,direction:null,styleTags:["p","blockquote","pre","h1","h2","h3","h4","h5","h6"],fontNames:["Arial","Arial Black","Comic Sans MS","Courier New","Helvetica Neue","Helvetica","Impact","Lucida Grande","Tahoma","Times New Roman","Verdana"],fontSizes:["8","9","10","11","12","14","18","24","36"],colors:[["#000000","#424242","#636363","#9C9C94","#CEC6CE","#EFEFEF","#F7F7F7","#FFFFFF"],["#FF0000","#FF9C00","#FFFF00","#00FF00","#00FFFF","#0000FF","#9C00FF","#FF00FF"],["#F7C6CE","#FFE7CE","#FFEFC6","#D6EFD6","#CEDEE7","#CEE7F7","#D6D6E7","#E7D6DE"],["#E79C9C","#FFC69C","#FFE79C","#B5D6A5","#A5C6CE","#9CC6EF","#B5A5D6","#D6A5BD"],["#E76363","#F7AD6B","#FFD663","#94BD7B","#73A5AD","#6BADDE","#8C7BC6","#C67BA5"],["#CE0000","#E79439","#EFC631","#6BA54A","#4A7B8C","#3984C6","#634AA5","#A54A7B"],["#9C0000","#B56308","#BD9400","#397B21","#104A5A","#085294","#311873","#731842"],["#630000","#7B3900","#846300","#295218","#083139","#003163","#21104A","#4A1031"]],lineHeights:["1.0","1.2","1.4","1.5","1.6","1.8","2.0","3.0"],tableClassName:"table table-bordered",insertTableMaxSize:{col:10,row:10},dialogsInBody:!1,dialogsFade:!1,maximumImageFileSize:null,callbacks:{onInit:null,onFocus:null,onBlur:null,onEnter:null,onKeyup:null,onKeydown:null,onImageUpload:null,onImageUploadError:null},codemirror:{mode:"text/html",htmlMode:!0,lineNumbers:!0},keyMap:{pc:{ENTER:"insertParagraph","CTRL+Z":"undo","CTRL+Y":"redo",TAB:"tab","SHIFT+TAB":"untab","CTRL+B":"bold","CTRL+I":"italic","CTRL+U":"underline","CTRL+SHIFT+S":"strikethrough","CTRL+BACKSLASH":"removeFormat","CTRL+SHIFT+L":"justifyLeft","CTRL+SHIFT+E":"justifyCenter","CTRL+SHIFT+R":"justifyRight","CTRL+SHIFT+J":"justifyFull","CTRL+SHIFT+NUM7":"insertUnorderedList","CTRL+SHIFT+NUM8":"insertOrderedList","CTRL+LEFTBRACKET":"outdent","CTRL+RIGHTBRACKET":"indent","CTRL+NUM0":"formatPara","CTRL+NUM1":"formatH1","CTRL+NUM2":"formatH2","CTRL+NUM3":"formatH3","CTRL+NUM4":"formatH4","CTRL+NUM5":"formatH5","CTRL+NUM6":"formatH6","CTRL+ENTER":"insertHorizontalRule","CTRL+K":"linkDialog.show"},mac:{ENTER:"insertParagraph","CMD+Z":"undo","CMD+SHIFT+Z":"redo",TAB:"tab","SHIFT+TAB":"untab","CMD+B":"bold","CMD+I":"italic","CMD+U":"underline","CMD+SHIFT+S":"strikethrough","CMD+BACKSLASH":"removeFormat","CMD+SHIFT+L":"justifyLeft","CMD+SHIFT+E":"justifyCenter","CMD+SHIFT+R":"justifyRight","CMD+SHIFT+J":"justifyFull","CMD+SHIFT+NUM7":"insertUnorderedList","CMD+SHIFT+NUM8":"insertOrderedList","CMD+LEFTBRACKET":"outdent","CMD+RIGHTBRACKET":"indent","CMD+NUM0":"formatPara","CMD+NUM1":"formatH1","CMD+NUM2":"formatH2","CMD+NUM3":"formatH3","CMD+NUM4":"formatH4","CMD+NUM5":"formatH5","CMD+NUM6":"formatH6","CMD+ENTER":"insertHorizontalRule","CMD+K":"linkDialog.show"}},icons:{align:"note-icon-align",alignCenter:"note-icon-align-center",alignJustify:"note-icon-align-justify",alignLeft:"note-icon-align-left",alignRight:"note-icon-align-right",indent:"note-icon-align-indent",outdent:"note-icon-align-outdent",arrowsAlt:"note-icon-arrows-alt",bold:"note-icon-bold",caret:"note-icon-caret",circle:"note-icon-circle",close:"note-icon-close",code:"note-icon-code",eraser:"note-icon-eraser",font:"note-icon-font",frame:"note-icon-frame",italic:"note-icon-italic",link:"note-icon-link",unlink:"note-icon-chain-broken",magic:"note-icon-magic",menuCheck:"note-icon-check",minus:"note-icon-minus",orderedlist:"note-icon-orderedlist",pencil:"note-icon-pencil",picture:"note-icon-picture",question:"note-icon-question",redo:"note-icon-redo",square:"note-icon-square",strikethrough:"note-icon-strikethrough",subscript:"note-icon-subscript",superscript:"note-icon-superscript",table:"note-icon-table",textHeight:"note-icon-text-height",trash:"note-icon-trash",underline:"note-icon-underline",undo:"note-icon-undo",unorderedlist:"note-icon-unorderedlist",video:"note-icon-video"}}})});(function(t){var e="0.3.4",i="hasOwnProperty",n=/[\.\/]/,s="*",r=function(){},o=function(t,e){return t-e},a,l,h={n:{}},c=function(t,e){var i=h,n=l,s=Array.prototype.slice.call(arguments,2),r=c.listeners(t),u=0,d=!1,f,p=[],m={},g=[],v=a,y=[];a=t,l=0;for(var b=0,w=r.length;b<w;b++)"zIndex"in r[b]&&(p.push(r[b].zIndex),r[b].zIndex<0&&(m[r[b].zIndex]=r[b]));p.sort(o);while(p[u]<0){f=m[p[u++]],g.push(f.apply(e,s));if(l){l=n;return g}}for(b=0;b<w;b++){f=r[b];if("zIndex"in f)if(f.zIndex==p[u]){g.push(f.apply(e,s));if(l)break;do{u++,f=m[p[u]],f&&g.push(f.apply(e,s));if(l)break}while(f)}else m[f.zIndex]=f;else{g.push(f.apply(e,s));if(l)break}}l=n,a=v;return g.length?g:null};c.listeners=function(t){var e=t.split(n),i=h,r,o,a,l,c,u,d,f,p=[i],m=[];for(l=0,c=e.length;l<c;l++){f=[];for(u=0,d=p.length;u<d;u++){i=p[u].n,o=[i[e[l]],i[s]],a=2;while(a--)r=o[a],r&&(f.push(r),m=m.concat(r.f||[]))}p=f}return m},c.on=function(t,e){var i=t.split(n),s=h;for(var o=0,a=i.length;o<a;o++)s=s.n,!s[i[o]]&&(s[i[o]]={n:{}}),s=s[i[o]];s.f=s.f||[];for(o=0,a=s.f.length;o<a;o++)if(s.f[o]==e)return r;s.f.push(e);return function(t){+t==+t&&(e.zIndex=+t)}},c.stop=function(){l=1},c.nt=function(t){if(t)return new RegExp("(?:\\.|\\/|^)"+t+"(?:\\.|\\/|$)").test(a);return a},c.off=c.unbind=function(t,e){var r=t.split(n),o,a,l,c,u,d,f,p=[h];for(c=0,u=r.length;c<u;c++)for(d=0;d<p.length;d+=l.length-2){l=[d,1],o=p[d].n;if(r[c]!=s)o[r[c]]&&l.push(o[r[c]]);else for(a in o)o[i](a)&&l.push(o[a]);p.splice.apply(p,l)}for(c=0,u=p.length;c<u;c++){o=p[c];while(o.n){if(e){if(o.f){for(d=0,f=o.f.length;d<f;d++)if(o.f[d]==e){o.f.splice(d,1);break}!o.f.length&&delete o.f}for(a in o.n)if(o.n[i](a)&&o.n[a].f){var m=o.n[a].f;for(d=0,f=m.length;d<f;d++)if(m[d]==e){m.splice(d,1);break}!m.length&&delete o.n[a].f}}else{delete o.f;for(a in o.n)o.n[i](a)&&o.n[a].f&&delete o.n[a].f}o=o.n}}},c.once=function(t,e){var i=function(){var n=e.apply(this,arguments);c.unbind(t,i);return n};return c.on(t,i)},c.version=e,c.toString=function(){return"You are running Eve "+e},typeof module!="undefined"&&module.exports?module.exports=c:typeof define!="undefined"?define("eve",[],function(){return c}):t.eve=c})(this),function(){function t(t){for(var e=0;e<Me.length;e++)Me[e].el.paper==t&&Me.splice(e--,1)}function e(t,e,i,s,r,a){i=lt(i);var l,h,c,u=[],d,f,p,m=t.ms,g={},v={},y={};if(s)for(x=0,k=Me.length;x<k;x++){var b=Me[x];if(b.el.id==e.id&&b.anim==t){b.percent!=i?(Me.splice(x,1),c=1):h=b,e.attr(b.totalOrigin);break}}else s=+v;for(var x=0,k=t.percents.length;x<k;x++){if(t.percents[x]==i||t.percents[x]>s*t.top){i=t.percents[x],f=t.percents[x-1]||0,m=m/t.top*(i-f),d=t.percents[x+1],l=t.anim[i];break}s&&e.attr(t.anim[t.percents[x]])}if(!!l){if(!h){for(var C in l)if(l[T](C))if(dt[T](C)||e.paper.customAttributes[T](C)){g[C]=e.attr(C),g[C]==null&&(g[C]=ut[C]),v[C]=l[C];switch(dt[C]){case G:y[C]=(v[C]-g[C])/m;break;case"colour":g[C]=w.getRGB(g[C]);var S=w.getRGB(v[C]);y[C]={r:(S.r-g[C].r)/m,g:(S.g-g[C].g)/m,b:(S.b-g[C].b)/m};break;case"path":var D=Kt(g[C],v[C]),M=D[1];g[C]=D[0],y[C]=[];for(x=0,k=g[C].length;x<k;x++){y[C][x]=[0];for(var P=1,I=g[C][x].length;P<I;P++)y[C][x][P]=(M[x][P]-g[C][x][P])/m}break;case"transform":var E=e._,$=ae(E[C],v[C]);if($){g[C]=$.from,v[C]=$.to,y[C]=[],y[C].real=!0;for(x=0,k=g[C].length;x<k;x++){y[C][x]=[g[C][x][0]];for(P=1,I=g[C][x].length;P<I;P++)y[C][x][P]=(v[C][x][P]-g[C][x][P])/m}}else{var A=e.matrix||new o,H={_:{transform:E.transform},getBBox:function(){return e.getBBox(1)}};g[C]=[A.a,A.b,A.c,A.d,A.e,A.f],re(H,v[C]),v[C]=H._.transform,y[C]=[(H.matrix.a-A.a)/m,(H.matrix.b-A.b)/m,(H.matrix.c-A.c)/m,(H.matrix.d-A.d)/m,(H.matrix.e-A.e)/m,(H.matrix.f-A.f)/m]}break;case"csv":var L=O(l[C])[R](_),z=O(g[C])[R](_);if(C=="clip-rect"){g[C]=z,y[C]=[],x=z.length;while(x--)y[C][x]=(L[x]-g[C][x])/m}v[C]=L;break;default:L=[][F](l[C]),z=[][F](g[C]),y[C]=[],x=e.paper.customAttributes[C].length;while(x--)y[C][x]=((L[x]||0)-(z[x]||0))/m}}var N=l.easing,B=w.easing_formulas[N];if(!B){B=O(N).match(rt);if(B&&B.length==5){var j=B;B=function(t){return n(t,+j[1],+j[2],+j[3],+j[4],m)}}else B=St}p=l.start||t.start||+new Date,b={anim:t,percent:i,timestamp:p,start:p+(t.del||0),status:0,initstatus:s||0,stop:!1,ms:m,easing:B,from:g,diff:y,to:v,el:e,callback:l.callback,prev:f,next:d,repeat:a||t.times,origin:e.attr(),totalOrigin:r},Me.push(b);if(s&&!h&&!c){b.stop=!0,b.start=new Date-m*s;if(Me.length==1)return Ie()}c&&(b.start=new Date-b.ms*s),Me.length==1&&Pe(Ie)}else h.initstatus=s,h.start=new Date-h.ms*s;eve("raphael.anim.start."+e.id,e,t)}}function i(t,e){var i=[],n={};this.ms=e,this.times=1;if(t){for(var s in t)t[T](s)&&(n[lt(s)]=t[s],i.push(lt(s)));i.sort(kt)}this.anim=n,this.top=i[i.length-1],this.percents=i}function n(t,e,i,n,s,r){function o(t,e){var i,n,s,r,o,a;for(s=t,a=0;a<8;a++){r=l(s)-t;if(U(r)<e)return s;o=(3*u*s+2*c)*s+h;if(U(o)<1e-6)break;s=s-r/o}i=0,n=1,s=t;if(s<i)return i;if(s>n)return n;while(i<n){r=l(s);if(U(r-t)<e)return s;t>r?i=s:n=s,s=(n-i)/2+i}return s}function a(t,e){var i=o(t,e);return((p*i+f)*i+d)*i}function l(t){return((u*t+c)*t+h)*t}var h=3*e,c=3*(n-e)-h,u=1-h-c,d=3*i,f=3*(s-i)-d,p=1-d-f;return a(t,1/(200*r))}function s(){return this.x+L+this.y+L+this.width+"  "+this.height}function r(){return this.x+L+this.y}function o(t,e,i,n,s,r){t!=null?(this.a=+t,this.b=+e,this.c=+i,this.d=+n,this.e=+s,this.f=+r):(this.a=1,this.b=0,this.c=0,this.d=1,this.e=0,this.f=0)}function a(t,e,i){t=w._path2curve(t),e=w._path2curve(e);var n,s,r,o,a,h,c,u,d,f,p=i?0:[];for(var m=0,g=t.length;m<g;m++){var v=t[m];if(v[0]=="M")n=a=v[1],s=h=v[2];else{v[0]=="C"?(d=[n,s].concat(v.slice(1)),n=d[6],s=d[7]):(d=[n,s,n,s,a,h,a,h],n=a,s=h);for(var y=0,b=e.length;y<b;y++){var x=e[y];if(x[0]=="M")r=c=x[1],o=u=x[2];else{x[0]=="C"?(f=[r,o].concat(x.slice(1)),r=f[6],o=f[7]):(f=[r,o,r,o,c,u,c,u],r=c,o=u);var _=l(d,f,i);if(i)p+=_;else{for(var k=0,C=_.length;k<C;k++)_[k].segment1=m,_[k].segment2=y,_[k].bez1=d,_[k].bez2=f;p=p.concat(_)}}}}}return p}function l(t,e,i){var n=w.bezierBBox(t),s=w.bezierBBox(e);if(!w.isBBoxIntersect(n,s))return i?0:[];var r=f.apply(0,t),o=f.apply(0,e),a=~~(r/5),l=~~(o/5),h=[],c=[],d={},p=i?0:[];for(var m=0;m<a+1;m++){var g=w.findDotsAtSegment.apply(w,t.concat(m/a));h.push({x:g.x,y:g.y,t:m/a})}for(m=0;m<l+1;m++)g=w.findDotsAtSegment.apply(w,e.concat(m/l)),c.push({x:g.x,y:g.y,t:m/l});for(m=0;m<a;m++)for(var v=0;v<l;v++){var y=h[m],b=h[m+1],x=c[v],_=c[v+1],k=U(b.x-y.x)<.001?"y":"x",C=U(_.x-x.x)<.001?"y":"x",S=u(y.x,y.y,b.x,b.y,x.x,x.y,_.x,_.y);if(S){if(d[S.x.toFixed(4)]==S.y.toFixed(4))continue;d[S.x.toFixed(4)]=S.y.toFixed(4);var T=y.t+U((S[k]-y[k])/(b[k]-y[k]))*(b.t-y.t),D=x.t+U((S[C]-x[C])/(_[C]-x[C]))*(_.t-x.t);T>=0&&T<=1&&D>=0&&D<=1&&(i?p++:p.push({x:S.x,y:S.y,t1:T,t2:D}))}}return p}function h(t,e){return l(t,e,1)}function c(t,e){return l(t,e)}function u(t,e,i,n,s,r,o,a){if(!(W(t,i)<Y(s,o)||Y(t,i)>W(s,o)||W(e,n)<Y(r,a)||Y(e,n)>W(r,a))){var l=(t*n-e*i)*(s-o)-(t-i)*(s*a-r*o),h=(t*n-e*i)*(r-a)-(e-n)*(s*a-r*o),c=(t-i)*(r-a)-(e-n)*(s-o);if(!c)return;var u=l/c,d=h/c,f=+u.toFixed(2),p=+d.toFixed(2);if(f<+Y(t,i).toFixed(2)||f>+W(t,i).toFixed(2)||f<+Y(s,o).toFixed(2)||f>+W(s,o).toFixed(2)||p<+Y(e,n).toFixed(2)||p>+W(e,n).toFixed(2)||p<+Y(r,a).toFixed(2)||p>+W(r,a).toFixed(2))return;return{x:u,y:d}}}function d(t,e,i,n,s,r,o,a,l){if(!(l<0||f(t,e,i,n,s,r,o,a)<l)){var h=1,c=h/2,u=h-c,d,p=.01;d=f(t,e,i,n,s,r,o,a,u);while(U(d-l)>p)c/=2,u+=(d<l?1:-1)*c,d=f(t,e,i,n,s,r,o,a,u);return u}}function f(t,e,i,n,s,r,o,a,l){l==null&&(l=1),l=l>1?1:l<0?0:l;var h=l/2,c=12,u=[-.1252,.1252,-.3678,.3678,-.5873,.5873,-.7699,.7699,-.9041,.9041,-.9816,.9816],d=[.2491,.2491,.2335,.2335,.2032,.2032,.1601,.1601,.1069,.1069,.0472,.0472],f=0;for(var m=0;m<c;m++){var g=h*u[m]+h,v=p(g,t,i,s,o),y=p(g,e,n,r,a),b=v*v+y*y;f+=d[m]*j.sqrt(b)}return h*f}function p(t,e,i,n,s){var r=-3*e+9*i-9*n+3*s,o=t*r+6*e-12*i+6*n;return t*o-3*e+3*i}function m(t,e){var i=[];for(var n=0,s=t.length;s-2*!e>n;n+=2){var r=[{x:+t[n-2],y:+t[n-1]},{x:+t[n],y:+t[n+1]},{x:+t[n+2],y:+t[n+3]},{x:+t[n+4],y:+t[n+5]}];e?n?s-4==n?r[3]={x:+t[0],y:+t[1]}:s-2==n&&(r[2]={x:+t[0],y:+t[1]},r[3]={x:+t[2],y:+t[3]}):r[0]={x:+t[s-2],y:+t[s-1]}:s-4==n?r[3]=r[2]:n||(r[0]={x:+t[n],y:+t[n+1]}),i.push(["C",(-r[0].x+6*r[1].x+r[2].x)/6,(-r[0].y+6*r[1].y+r[2].y)/6,(r[1].x+6*r[2].x-r[3].x)/6,(r[1].y+6*r[2].y-r[3].y)/6,r[2].x,r[2].y])}return i}function g(){return this.hex}function v(t,e,i){function n(){var s=Array.prototype.slice.call(arguments,0),r=s.join(""),o=n.cache=n.cache||{},a=n.count=n.count||[];if(o[T](r)){y(a,r);return i?i(o[r]):o[r]}a.length>=1e3&&delete o[a.shift()],a.push(r),o[r]=t[$](e,s);return i?i(o[r]):o[r]}return n}function y(t,e){for(var i=0,n=t.length;i<n;i++)if(t[i]===e)return t.push(t.splice(i,1)[0])}function b(t){if(Object(t)!==t)return t;var e=new t.constructor;for(var i in t)t[T](i)&&(e[i]=b(t[i]));return e}function w(t){if(w.is(t,"function"))return x?t():eve.on("raphael.DOMload",t);if(w.is(t,K))return w._engine.create[$](w,t.splice(0,3+w.is(t[0],G))).add(t);var e=Array.prototype.slice.call(arguments,0);if(w.is(e[e.length-1],"function")){var i=e.pop();return x?i.call(w._engine.create[$](w,e)):eve.on("raphael.DOMload",function(){i.call(w._engine.create[$](w,e))})}return w._engine.create[$](w,arguments)}w.version="2.1.0",w.eve=eve;var x,_=/[, ]+/,k={circle:1,rect:1,path:1,ellipse:1,text:1,image:1},C=/\{(\d+)\}/g,S="prototype",T="hasOwnProperty",D={doc:document,win:window},M={was:Object.prototype[T].call(D.win,"Raphael"),is:D.win.Raphael},P=function(){this.ca=this.customAttributes={}},I,E="appendChild",$="apply",F="concat",A="createTouch"in D.doc,H="",L=" ",O=String,R="split",z="click dblclick mousedown mousemove mouseout mouseover mouseup touchstart touchmove touchend touchcancel"[R](L),N={mousedown:"touchstart",mousemove:"touchmove",mouseup:"touchend"},B=O.prototype.toLowerCase,j=Math,W=j.max,Y=j.min,U=j.abs,q=j.pow,V=j.PI,G="number",X="string",K="array",Q="toString",Z="fill",J=Object.prototype.toString,tt={},et="push",it=w._ISURL=/^url\(['"]?([^\)]+?)['"]?\)$/i,nt=/^\s*((#[a-f\d]{6})|(#[a-f\d]{3})|rgba?\(\s*([\d\.]+%?\s*,\s*[\d\.]+%?\s*,\s*[\d\.]+%?(?:\s*,\s*[\d\.]+%?)?)\s*\)|hsba?\(\s*([\d\.]+(?:deg|\xb0|%)?\s*,\s*[\d\.]+%?\s*,\s*[\d\.]+(?:%?\s*,\s*[\d\.]+)?)%?\s*\)|hsla?\(\s*([\d\.]+(?:deg|\xb0|%)?\s*,\s*[\d\.]+%?\s*,\s*[\d\.]+(?:%?\s*,\s*[\d\.]+)?)%?\s*\))\s*$/i,st={NaN:1,Infinity:1,"-Infinity":1},rt=/^(?:cubic-)?bezier\(([^,]+),([^,]+),([^,]+),([^\)]+)\)/,ot=j.round,at="setAttribute",lt=parseFloat,ht=parseInt,ct=O.prototype.toUpperCase,ut=w._availableAttrs={"arrow-end":"none","arrow-start":"none",blur:0,"clip-rect":"0 0 1e9 1e9",cursor:"default",cx:0,cy:0,fill:"#fff","fill-opacity":1,font:'10px "Arial"',"font-family":'"Arial"',"font-size":"10","font-style":"normal","font-weight":400,gradient:0,height:0,href:"http://raphaeljs.com/","letter-spacing":0,opacity:1,path:"M0,0",r:0,rx:0,ry:0,src:"",stroke:"#000","stroke-dasharray":"","stroke-linecap":"butt","stroke-linejoin":"butt","stroke-miterlimit":0,"stroke-opacity":1,"stroke-width":1,target:"_blank","text-anchor":"middle",title:"Raphael",transform:"",width:0,x:0,y:0},dt=w._availableAnimAttrs={blur:G,"clip-rect":"csv",cx:G,cy:G,fill:"colour","fill-opacity":G,"font-size":G,height:G,opacity:G,path:"path",r:G,rx:G,ry:G,stroke:"colour","stroke-opacity":G,"stroke-width":G,transform:"transform",width:G,x:G,y:G},ft=/[\x09\x0a\x0b\x0c\x0d\x20\xa0\u1680\u180e\u2000\u2001\u2002\u2003\u2004\u2005\u2006\u2007\u2008\u2009\u200a\u202f\u205f\u3000\u2028\u2029]/g,pt=/[\x09\x0a\x0b\x0c\x0d\x20\xa0\u1680\u180e\u2000\u2001\u2002\u2003\u2004\u2005\u2006\u2007\u2008\u2009\u200a\u202f\u205f\u3000\u2028\u2029]*,[\x09\x0a\x0b\x0c\x0d\x20\xa0\u1680\u180e\u2000\u2001\u2002\u2003\u2004\u2005\u2006\u2007\u2008\u2009\u200a\u202f\u205f\u3000\u2028\u2029]*/,mt={hs:1,rg:1},gt=/,?([achlmqrstvxz]),?/gi,vt=/([achlmrqstvz])[\x09\x0a\x0b\x0c\x0d\x20\xa0\u1680\u180e\u2000\u2001\u2002\u2003\u2004\u2005\u2006\u2007\u2008\u2009\u200a\u202f\u205f\u3000\u2028\u2029,]*((-?\d*\.?\d*(?:e[\-+]?\d+)?[\x09\x0a\x0b\x0c\x0d\x20\xa0\u1680\u180e\u2000\u2001\u2002\u2003\u2004\u2005\u2006\u2007\u2008\u2009\u200a\u202f\u205f\u3000\u2028\u2029]*,?[\x09\x0a\x0b\x0c\x0d\x20\xa0\u1680\u180e\u2000\u2001\u2002\u2003\u2004\u2005\u2006\u2007\u2008\u2009\u200a\u202f\u205f\u3000\u2028\u2029]*)+)/gi,yt=/([rstm])[\x09\x0a\x0b\x0c\x0d\x20\xa0\u1680\u180e\u2000\u2001\u2002\u2003\u2004\u2005\u2006\u2007\u2008\u2009\u200a\u202f\u205f\u3000\u2028\u2029,]*((-?\d*\.?\d*(?:e[\-+]?\d+)?[\x09\x0a\x0b\x0c\x0d\x20\xa0\u1680\u180e\u2000\u2001\u2002\u2003\u2004\u2005\u2006\u2007\u2008\u2009\u200a\u202f\u205f\u3000\u2028\u2029]*,?[\x09\x0a\x0b\x0c\x0d\x20\xa0\u1680\u180e\u2000\u2001\u2002\u2003\u2004\u2005\u2006\u2007\u2008\u2009\u200a\u202f\u205f\u3000\u2028\u2029]*)+)/gi,bt=/(-?\d*\.?\d*(?:e[\-+]?\d+)?)[\x09\x0a\x0b\x0c\x0d\x20\xa0\u1680\u180e\u2000\u2001\u2002\u2003\u2004\u2005\u2006\u2007\u2008\u2009\u200a\u202f\u205f\u3000\u2028\u2029]*,?[\x09\x0a\x0b\x0c\x0d\x20\xa0\u1680\u180e\u2000\u2001\u2002\u2003\u2004\u2005\u2006\u2007\u2008\u2009\u200a\u202f\u205f\u3000\u2028\u2029]*/gi,wt=w._radial_gradient=/^r(?:\(([^,]+?)[\x09\x0a\x0b\x0c\x0d\x20\xa0\u1680\u180e\u2000\u2001\u2002\u2003\u2004\u2005\u2006\u2007\u2008\u2009\u200a\u202f\u205f\u3000\u2028\u2029]*,[\x09\x0a\x0b\x0c\x0d\x20\xa0\u1680\u180e\u2000\u2001\u2002\u2003\u2004\u2005\u2006\u2007\u2008\u2009\u200a\u202f\u205f\u3000\u2028\u2029]*([^\)]+?)\))?/,xt={},_t=function(t,e){return t.key-e.key},kt=function(t,e){return lt(t)-lt(e)},Ct=function(){},St=function(t){return t},Tt=w._rectPath=function(t,e,i,n,s){if(s)return[["M",t+s,e],["l",i-s*2,0],["a",s,s,0,0,1,s,s],["l",0,n-s*2],["a",s,s,0,0,1,-s,s],["l",s*2-i,0],["a",s,s,0,0,1,-s,-s],["l",0,s*2-n],["a",s,s,0,0,1,s,-s],["z"]];return[["M",t,e],["l",i,0],["l",0,n],["l",-i,0],["z"]]},Dt=function(t,e,i,n){n==null&&(n=i);return[["M",t,e],["m",0,-n],["a",i,n,0,1,1,0,2*n],["a",i,n,0,1,1,0,-2*n],["z"]]},Mt=w._getPath={path:function(t){return t.attr("path")},circle:function(t){var e=t.attrs;return Dt(e.cx,e.cy,e.r)},ellipse:function(t){var e=t.attrs;return Dt(e.cx,e.cy,e.rx,e.ry)},rect:function(t){var e=t.attrs;return Tt(e.x,e.y,e.width,e.height,e.r)},image:function(t){var e=t.attrs;return Tt(e.x,e.y,e.width,e.height)},text:function(t){var e=t._getBBox();return Tt(e.x,e.y,e.width,e.height)}},Pt=w.mapPath=function(t,e){if(!e)return t;var i,n,s,r,o,a,l;t=Kt(t);for(s=0,o=t.length;s<o;s++){l=t[s];for(r=1,a=l.length;r<a;r+=2)i=e.x(l[r],l[r+1]),n=e.y(l[r],l[r+1]),l[r]=i,l[r+1]=n}return t};w._g=D,w.type=D.win.SVGAngle||D.doc.implementation.hasFeature("http://www.w3.org/TR/SVG11/feature#BasicStructure","1.1")?"SVG":"VML";if(w.type=="VML"){var It=D.doc.createElement("div"),Et;It.innerHTML='<v:shape adj="1"/>',Et=It.firstChild,Et.style.behavior="url(#default#VML)";if(!Et||typeof Et.adj!="object")return w.type=H;It=null}w.svg=!(w.vml=w.type=="VML"),w._Paper=P,w.fn=I=P.prototype=w.prototype,w._id=0,w._oid=0,w.is=function(t,e){e=B.call(e);if(e=="finite")return!st[T](+t);if(e=="array")return t instanceof Array;return e=="null"&&t===null||e==typeof t&&t!==null||e=="object"&&t===Object(t)||e=="array"&&Array.isArray&&Array.isArray(t)||J.call(t).slice(8,-1).toLowerCase()==e},w.angle=function(t,e,i,n,s,r){if(s==null){var o=t-i,a=e-n;if(!o&&!a)return 0;return(180+j.atan2(-a,-o)*180/V+360)%360}return w.angle(t,e,s,r)-w.angle(i,n,s,r)},w.rad=function(t){return t%360*V/180},w.deg=function(t){return t*180/V%360},w.snapTo=function(t,e,i){i=w.is(i,"finite")?i:10;if(w.is(t,K)){var n=t.length;while(n--)if(U(t[n]-e)<=i)return t[n]}else{t=+t;var s=e%t;if(s<i)return e-s;if(s>t-i)return e-s+t}return e};var $t=w.createUUID=function(t,e){return function(){return"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(t,e).toUpperCase()}}(/[xy]/g,function(t){var e=j.random()*16|0,i=t=="x"?e:e&3|8;return i.toString(16)});w.setWindow=function(t){eve("raphael.setWindow",w,D.win,t),D.win=t,D.doc=D.win.document,w._engine.initWin&&w._engine.initWin(D.win)};var Ft=function(t){if(w.vml){var e=/^\s+|\s+$/g,i;try{var n=new ActiveXObject("htmlfile");n.write("<body>"),n.close(),i=n.body}catch(t){i=createPopup().document.body}var s=i.createTextRange();Ft=v(function(t){try{i.style.color=O(t).replace(e,H);var n=s.queryCommandValue("ForeColor");n=(n&255)<<16|n&65280|(n&16711680)>>>16;return"#"+("000000"+n.toString(16)).slice(-6)}catch(t){return"none"}})}else{var r=D.doc.createElement("i");r.title="Raphal Colour Picker",r.style.display="none",D.doc.body.appendChild(r),Ft=v(function(t){r.style.color=t;return D.doc.defaultView.getComputedStyle(r,H).getPropertyValue("color")})}return Ft(t)},At=function(){return"hsb("+[this.h,this.s,this.b]+")"},Ht=function(){return"hsl("+[this.h,this.s,this.l]+")"},Lt=function(){return this.hex},Ot=function(t,e,i){e==null&&w.is(t,"object")&&"r"in t&&"g"in t&&"b"in t&&(i=t.b,e=t.g,t=t.r);if(e==null&&w.is(t,X)){var n=w.getRGB(t);t=n.r,e=n.g,i=n.b}if(t>1||e>1||i>1)t/=255,e/=255,i/=255;return[t,e,i]},Rt=function(t,e,i,n){t*=255,e*=255,i*=255;var s={r:t,g:e,b:i,hex:w.rgb(t,e,i),toString:Lt};w.is(n,"finite")&&(s.opacity=n);return s};w.color=function(t){var e;w.is(t,"object")&&"h"in t&&"s"in t&&"b"in t?(e=w.hsb2rgb(t),t.r=e.r,t.g=e.g,t.b=e.b,t.hex=e.hex):w.is(t,"object")&&"h"in t&&"s"in t&&"l"in t?(e=w.hsl2rgb(t),t.r=e.r,t.g=e.g,t.b=e.b,t.hex=e.hex):(w.is(t,"string")&&(t=w.getRGB(t)),w.is(t,"object")&&"r"in t&&"g"in t&&"b"in t?(e=w.rgb2hsl(t),t.h=e.h,t.s=e.s,t.l=e.l,e=w.rgb2hsb(t),t.v=e.b):(t={hex:"none"},t.r=t.g=t.b=t.h=t.s=t.v=t.l=-1)),t.toString=Lt;return t},w.hsb2rgb=function(t,e,i,n){this.is(t,"object")&&"h"in t&&"s"in t&&"b"in t&&(i=t.b,e=t.s,t=t.h,n=t.o),t*=360;var s,r,o,a,l;t=t%360/60,l=i*e,a=l*(1-U(t%2-1)),s=r=o=i-l,t=~~t,s+=[l,a,0,0,a,l][t],r+=[a,l,l,a,0,0][t],o+=[0,0,a,l,l,a][t];return Rt(s,r,o,n)},w.hsl2rgb=function(t,e,i,n){this.is(t,"object")&&"h"in t&&"s"in t&&"l"in t&&(i=t.l,e=t.s,t=t.h);if(t>1||e>1||i>1)t/=360,e/=100,i/=100;t*=360;var s,r,o,a,l;t=t%360/60,l=2*e*(i<.5?i:1-i),a=l*(1-U(t%2-1)),s=r=o=i-l/2,t=~~t,s+=[l,a,0,0,a,l][t],r+=[a,l,l,a,0,0][t],o+=[0,0,a,l,l,a][t];return Rt(s,r,o,n)},w.rgb2hsb=function(t,e,i){i=Ot(t,e,i),t=i[0],e=i[1],i=i[2];var n,s,r,o;r=W(t,e,i),o=r-Y(t,e,i),n=o==0?null:r==t?(e-i)/o:r==e?(i-t)/o+2:(t-e)/o+4,n=(n+360)%6*60/360,s=o==0?0:o/r;return{h:n,s:s,b:r,toString:At}},w.rgb2hsl=function(t,e,i){i=Ot(t,e,i),t=i[0],e=i[1],i=i[2];var n,s,r,o,a,l;o=W(t,e,i),a=Y(t,e,i),l=o-a,n=l==0?null:o==t?(e-i)/l:o==e?(i-t)/l+2:(t-e)/l+4,n=(n+360)%6*60/360,r=(o+a)/2,s=l==0?0:r<.5?l/(2*r):l/(2-2*r);return{h:n,s:s,l:r,toString:Ht}},w._path2string=function(){return this.join(",").replace(gt,"$1")};var zt=w._preload=function(t,e){var i=D.doc.createElement("img");i.style.cssText="position:absolute;left:-9999em;top:-9999em",i.onload=function(){e.call(this),this.onload=null,D.doc.body.removeChild(this)},i.onerror=function(){D.doc.body.removeChild(this)},D.doc.body.appendChild(i),i.src=t};w.getRGB=v(function(t){if(!t||!!((t=O(t)).indexOf("-")+1))return{r:-1,g:-1,b:-1,hex:"none",error:1,toString:g};if(t=="none")return{r:-1,g:-1,b:-1,hex:"none",toString:g};!mt[T](t.toLowerCase().substring(0,2))&&t.charAt()!="#"&&(t=Ft(t));var e,i,n,s,r,o,a,l=t.match(nt);if(l){l[2]&&(s=ht(l[2].substring(5),16),n=ht(l[2].substring(3,5),16),i=ht(l[2].substring(1,3),16)),l[3]&&(s=ht((o=l[3].charAt(3))+o,16),n=ht((o=l[3].charAt(2))+o,16),i=ht((o=l[3].charAt(1))+o,16)),l[4]&&(a=l[4][R](pt),i=lt(a[0]),a[0].slice(-1)=="%"&&(i*=2.55),n=lt(a[1]),a[1].slice(-1)=="%"&&(n*=2.55),s=lt(a[2]),a[2].slice(-1)=="%"&&(s*=2.55),l[1].toLowerCase().slice(0,4)=="rgba"&&(r=lt(a[3])),a[3]&&a[3].slice(-1)=="%"&&(r/=100));if(l[5]){a=l[5][R](pt),i=lt(a[0]),a[0].slice(-1)=="%"&&(i*=2.55),n=lt(a[1]),a[1].slice(-1)=="%"&&(n*=2.55),s=lt(a[2]),a[2].slice(-1)=="%"&&(s*=2.55),(a[0].slice(-3)=="deg"||a[0].slice(-1)=="")&&(i/=360),l[1].toLowerCase().slice(0,4)=="hsba"&&(r=lt(a[3])),a[3]&&a[3].slice(-1)=="%"&&(r/=100);return w.hsb2rgb(i,n,s,r)}if(l[6]){a=l[6][R](pt),i=lt(a[0]),a[0].slice(-1)=="%"&&(i*=2.55),n=lt(a[1]),a[1].slice(-1)=="%"&&(n*=2.55),s=lt(a[2]),a[2].slice(-1)=="%"&&(s*=2.55),(a[0].slice(-3)=="deg"||a[0].slice(-1)=="")&&(i/=360),l[1].toLowerCase().slice(0,4)=="hsla"&&(r=lt(a[3])),a[3]&&a[3].slice(-1)=="%"&&(r/=100);return w.hsl2rgb(i,n,s,r)}l={r:i,g:n,b:s,toString:g},l.hex="#"+(16777216|s|n<<8|i<<16).toString(16).slice(1),w.is(r,"finite")&&(l.opacity=r);return l}return{r:-1,g:-1,b:-1,hex:"none",error:1,toString:g}},w),w.hsb=v(function(t,e,i){return w.hsb2rgb(t,e,i).hex}),w.hsl=v(function(t,e,i){return w.hsl2rgb(t,e,i).hex}),w.rgb=v(function(t,e,i){return"#"+(16777216|i|e<<8|t<<16).toString(16).slice(1)}),w.getColor=function(t){var e=this.getColor.start=this.getColor.start||{h:0,s:1,b:t||.75},i=this.hsb2rgb(e.h,e.s,e.b);e.h+=.075,e.h>1&&(e.h=0,e.s-=.2,e.s<=0&&(this.getColor.start={h:0,s:1,b:e.b}));return i.hex},w.getColor.reset=function(){delete this.start},w.parsePathString=function(t){if(!t)return null;var e=Nt(t);if(e.arr)return jt(e.arr);var i={a:7,c:6,h:1,l:2,m:2,r:4,q:4,s:4,t:2,v:1,z:0},n=[];w.is(t,K)&&w.is(t[0],K)&&(n=jt(t)),n.length||O(t).replace(vt,function(t,e,s){var r=[],o=e.toLowerCase();s.replace(bt,function(t,e){e&&r.push(+e)}),o=="m"&&r.length>2&&(n.push([e][F](r.splice(0,2))),o="l",e=e=="m"?"l":"L");if(o=="r")n.push([e][F](r));else while(r.length>=i[o]){n.push([e][F](r.splice(0,i[o])));if(!i[o])break}}),n.toString=w._path2string,e.arr=jt(n);return n},w.parseTransformString=v(function(t){if(!t)return null;var e={r:3,s:4,t:2,m:6},i=[];w.is(t,K)&&w.is(t[0],K)&&(i=jt(t)),i.length||O(t).replace(yt,function(t,e,n){var s=[],r=B.call(e);n.replace(bt,function(t,e){e&&s.push(+e)}),i.push([e][F](s))}),i.toString=w._path2string;return i});var Nt=function(t){var e=Nt.ps=Nt.ps||{};e[t]?e[t].sleep=100:e[t]={sleep:100},setTimeout(function(){for(var i in e)e[T](i)&&i!=t&&(e[i].sleep--,!e[i].sleep&&delete e[i])});return e[t]};w.findDotsAtSegment=function(t,e,i,n,s,r,o,a,l){var h=1-l,c=q(h,3),u=q(h,2),d=l*l,f=d*l,p=c*t+u*3*l*i+h*3*l*l*s+f*o,m=c*e+u*3*l*n+h*3*l*l*r+f*a,g=t+2*l*(i-t)+d*(s-2*i+t),v=e+2*l*(n-e)+d*(r-2*n+e),y=i+2*l*(s-i)+d*(o-2*s+i),b=n+2*l*(r-n)+d*(a-2*r+n),w=h*t+l*i,x=h*e+l*n,_=h*s+l*o,k=h*r+l*a,C=90-j.atan2(g-y,v-b)*180/V;(g>y||v<b)&&(C+=180);return{x:p,y:m,m:{x:g,y:v},n:{x:y,y:b},start:{x:w,y:x},end:{x:_,y:k},alpha:C}},w.bezierBBox=function(t,e,i,n,s,r,o,a){w.is(t,"array")||(t=[t,e,i,n,s,r,o,a]);var l=Xt.apply(null,t);return{x:l.min.x,y:l.min.y,x2:l.max.x,y2:l.max.y,width:l.max.x-l.min.x,height:l.max.y-l.min.y}},w.isPointInsideBBox=function(t,e,i){return e>=t.x&&e<=t.x2&&i>=t.y&&i<=t.y2},w.isBBoxIntersect=function(t,e){var i=w.isPointInsideBBox;return i(e,t.x,t.y)||i(e,t.x2,t.y)||i(e,t.x,t.y2)||i(e,t.x2,t.y2)||i(t,e.x,e.y)||i(t,e.x2,e.y)||i(t,e.x,e.y2)||i(t,e.x2,e.y2)||(t.x<e.x2&&t.x>e.x||e.x<t.x2&&e.x>t.x)&&(t.y<e.y2&&t.y>e.y||e.y<t.y2&&e.y>t.y)},w.pathIntersection=function(t,e){return a(t,e)},w.pathIntersectionNumber=function(t,e){return a(t,e,1)},w.isPointInsidePath=function(t,e,i){var n=w.pathBBox(t);return w.isPointInsideBBox(n,e,i)&&a(t,[["M",e,i],["H",n.x2+10]],1)%2==1},w._removedFactory=function(t){return function(){eve("raphael.log",null,"Raphal: you are calling to method "+t+" of removed object",t)}};var Bt=w.pathBBox=function(t){var e=Nt(t);if(e.bbox)return e.bbox;if(!t)return{x:0,y:0,width:0,height:0,x2:0,y2:0};t=Kt(t);var i=0,n=0,s=[],r=[],o;for(var a=0,l=t.length;a<l;a++){o=t[a];if(o[0]=="M")i=o[1],n=o[2],s.push(i),r.push(n);else{var h=Xt(i,n,o[1],o[2],o[3],o[4],o[5],o[6]);s=s[F](h.min.x,h.max.x),r=r[F](h.min.y,h.max.y),i=o[5],n=o[6]}}var c=Y[$](0,s),u=Y[$](0,r),d=W[$](0,s),f=W[$](0,r),p={x:c,y:u,x2:d,y2:f,width:d-c,height:f-u};e.bbox=b(p);return p},jt=function(t){var e=b(t);e.toString=w._path2string;return e},Wt=w._pathToRelative=function(t){var e=Nt(t);if(e.rel)return jt(e.rel);if(!w.is(t,K)||!w.is(t&&t[0],K))t=w.parsePathString(t);var i=[],n=0,s=0,r=0,o=0,a=0;t[0][0]=="M"&&(n=t[0][1],s=t[0][2],r=n,o=s,a++,i.push(["M",n,s]));for(var l=a,h=t.length;l<h;l++){var c=i[l]=[],u=t[l];if(u[0]!=B.call(u[0])){c[0]=B.call(u[0]);switch(c[0]){case"a":c[1]=u[1],c[2]=u[2],c[3]=u[3],c[4]=u[4],c[5]=u[5],c[6]=+(u[6]-n).toFixed(3),c[7]=+(u[7]-s).toFixed(3);break;case"v":c[1]=+(u[1]-s).toFixed(3);break;case"m":r=u[1],o=u[2];default:for(var d=1,f=u.length;d<f;d++)c[d]=+(u[d]-(d%2?n:s)).toFixed(3)}}else{c=i[l]=[],u[0]=="m"&&(r=u[1]+n,o=u[2]+s);for(var p=0,m=u.length;p<m;p++)i[l][p]=u[p]}var g=i[l].length;switch(i[l][0]){case"z":n=r,s=o;break;case"h":n+=+i[l][g-1];break;case"v":s+=+i[l][g-1];break;default:n+=+i[l][g-2],s+=+i[l][g-1]}}i.toString=w._path2string,e.rel=jt(i);return i},Yt=w._pathToAbsolute=function(t){var e=Nt(t);if(e.abs)return jt(e.abs);if(!w.is(t,K)||!w.is(t&&t[0],K))t=w.parsePathString(t);if(!t||!t.length)return[["M",0,0]];var i=[],n=0,s=0,r=0,o=0,a=0;t[0][0]=="M"&&(n=+t[0][1],s=+t[0][2],r=n,o=s,a++,i[0]=["M",n,s]);var l=t.length==3&&t[0][0]=="M"&&t[1][0].toUpperCase()=="R"&&t[2][0].toUpperCase()=="Z";for(var h,c,u=a,d=t.length;u<d;u++){i.push(h=[]),c=t[u];if(c[0]!=ct.call(c[0])){h[0]=ct.call(c[0]);switch(h[0]){case"A":h[1]=c[1],h[2]=c[2],h[3]=c[3],h[4]=c[4],h[5]=c[5],h[6]=+(c[6]+n),h[7]=+(c[7]+s);break;case"V":h[1]=+c[1]+s;break;case"H":h[1]=+c[1]+n;break;case"R":var f=[n,s][F](c.slice(1));for(var p=2,g=f.length;p<g;p++)f[p]=+f[p]+n,f[++p]=+f[p]+s;i.pop(),i=i[F](m(f,l));break;case"M":r=+c[1]+n,o=+c[2]+s;default:for(p=1,g=c.length;p<g;p++)h[p]=+c[p]+(p%2?n:s)}}else if(c[0]=="R")f=[n,s][F](c.slice(1)),i.pop(),i=i[F](m(f,l)),h=["R"][F](c.slice(-2));else for(var v=0,y=c.length;v<y;v++)h[v]=c[v];switch(h[0]){case"Z":n=r,s=o;break;case"H":n=h[1];break;case"V":s=h[1];break;case"M":r=h[h.length-2],o=h[h.length-1];default:n=h[h.length-2],s=h[h.length-1]}}i.toString=w._path2string,e.abs=jt(i);return i},Ut=function(t,e,i,n){return[t,e,i,n,i,n]},qt=function(t,e,i,n,s,r){var o=1/3,a=2/3;return[o*t+a*i,o*e+a*n,o*s+a*i,o*r+a*n,s,r]},Vt=function(t,e,i,n,s,r,o,a,l,h){var c=V*120/180,u=V/180*(+s||0),d=[],f,p=v(function(t,e,i){var n=t*j.cos(i)-e*j.sin(i),s=t*j.sin(i)+e*j.cos(i);return{x:n,y:s}});if(!h){f=p(t,e,-u),t=f.x,e=f.y,f=p(a,l,-u),a=f.x,l=f.y;var m=j.cos(V/180*s),g=j.sin(V/180*s),y=(t-a)/2,b=(e-l)/2,w=y*y/(i*i)+b*b/(n*n);w>1&&(w=j.sqrt(w),i=w*i,n=w*n);var x=i*i,_=n*n,k=(r==o?-1:1)*j.sqrt(U((x*_-x*b*b-_*y*y)/(x*b*b+_*y*y))),C=k*i*b/n+(t+a)/2,S=k*-n*y/i+(e+l)/2,T=j.asin(((e-S)/n).toFixed(9)),D=j.asin(((l-S)/n).toFixed(9));T=t<C?V-T:T,D=a<C?V-D:D,T<0&&(T=V*2+T),D<0&&(D=V*2+D),o&&T>D&&(T=T-V*2),!o&&D>T&&(D=D-V*2)}else T=h[0],D=h[1],C=h[2],S=h[3];var M=D-T;if(U(M)>c){var P=D,I=a,E=l;D=T+c*(o&&D>T?1:-1),a=C+i*j.cos(D),l=S+n*j.sin(D),d=Vt(a,l,i,n,s,0,o,I,E,[D,P,C,S])}M=D-T;var $=j.cos(T),A=j.sin(T),H=j.cos(D),L=j.sin(D),O=j.tan(M/4),z=4/3*i*O,N=4/3*n*O,B=[t,e],W=[t+z*A,e-N*$],Y=[a+z*L,l-N*H],q=[a,l];W[0]=2*B[0]-W[0],W[1]=2*B[1]-W[1];if(h)return[W,Y,q][F](d);d=[W,Y,q][F](d).join()[R](",");var G=[];for(var X=0,K=d.length;X<K;X++)G[X]=X%2?p(d[X-1],d[X],u).y:p(d[X],d[X+1],u).x;return G},Gt=function(t,e,i,n,s,r,o,a,l){var h=1-l;return{x:q(h,3)*t+q(h,2)*3*l*i+h*3*l*l*s+q(l,3)*o,y:q(h,3)*e+q(h,2)*3*l*n+h*3*l*l*r+q(l,3)*a}},Xt=v(function(t,e,i,n,s,r,o,a){var l=s-2*i+t-(o-2*s+i),h=2*(i-t)-2*(s-i),c=t-i,u=(-h+j.sqrt(h*h-4*l*c))/2/l,d=(-h-j.sqrt(h*h-4*l*c))/2/l,f=[e,a],p=[t,o],m;U(u)>"1e12"&&(u=.5),U(d)>"1e12"&&(d=.5),u>0&&u<1&&(m=Gt(t,e,i,n,s,r,o,a,u),p.push(m.x),f.push(m.y)),d>0&&d<1&&(m=Gt(t,e,i,n,s,r,o,a,d),p.push(m.x),f.push(m.y)),l=r-2*n+e-(a-2*r+n),h=2*(n-e)-2*(r-n),c=e-n,u=(-h+j.sqrt(h*h-4*l*c))/2/l,d=(-h-j.sqrt(h*h-4*l*c))/2/l,U(u)>"1e12"&&(u=.5),U(d)>"1e12"&&(d=.5),u>0&&u<1&&(m=Gt(t,e,i,n,s,r,o,a,u),p.push(m.x),f.push(m.y)),d>0&&d<1&&(m=Gt(t,e,i,n,s,r,o,a,d),p.push(m.x),f.push(m.y));return{min:{x:Y[$](0,p),y:Y[$](0,f)},max:{x:W[$](0,p),y:W[$](0,f)}}}),Kt=w._path2curve=v(function(t,e){var i=!e&&Nt(t);if(!e&&i.curve)return jt(i.curve);var n=Yt(t),s=e&&Yt(e),r={x:0,y:0,bx:0,by:0,X:0,Y:0,qx:null,qy:null},o={x:0,y:0,bx:0,by:0,X:0,Y:0,qx:null,qy:null},a=function(t,e){var i,n;if(!t)return["C",e.x,e.y,e.x,e.y,e.x,e.y];!(t[0]in{T:1,Q:1})&&(e.qx=e.qy=null);switch(t[0]){case"M":e.X=t[1],e.Y=t[2];break;case"A":t=["C"][F](Vt[$](0,[e.x,e.y][F](t.slice(1))));break;case"S":i=e.x+(e.x-(e.bx||e.x)),n=e.y+(e.y-(e.by||e.y)),t=["C",i,n][F](t.slice(1));break;case"T":e.qx=e.x+(e.x-(e.qx||e.x)),e.qy=e.y+(e.y-(e.qy||e.y)),t=["C"][F](qt(e.x,e.y,e.qx,e.qy,t[1],t[2]));break;case"Q":e.qx=t[1],e.qy=t[2],t=["C"][F](qt(e.x,e.y,t[1],t[2],t[3],t[4]));break;case"L":t=["C"][F](Ut(e.x,e.y,t[1],t[2]));break;case"H":t=["C"][F](Ut(e.x,e.y,t[1],e.y));break;case"V":t=["C"][F](Ut(e.x,e.y,e.x,t[1]));break;case"Z":t=["C"][F](Ut(e.x,e.y,e.X,e.Y))}return t},l=function(t,e){if(t[e].length>7){t[e].shift();var i=t[e];while(i.length)t.splice(e++,0,["C"][F](i.splice(0,6)));t.splice(e,1),u=W(n.length,s&&s.length||0)}},h=function(t,e,i,r,o){t&&e&&t[o][0]=="M"&&e[o][0]!="M"&&(e.splice(o,0,["M",r.x,r.y]),i.bx=0,i.by=0,i.x=t[o][1],i.y=t[o][2],u=W(n.length,s&&s.length||0))};for(var c=0,u=W(n.length,s&&s.length||0);c<u;c++){n[c]=a(n[c],r),l(n,c),s&&(s[c]=a(s[c],o)),s&&l(s,c),h(n,s,r,o,c),h(s,n,o,r,c);var d=n[c],f=s&&s[c],p=d.length,m=s&&f.length;r.x=d[p-2],r.y=d[p-1],r.bx=lt(d[p-4])||r.x,r.by=lt(d[p-3])||r.y,o.bx=s&&(lt(f[m-4])||o.x),o.by=s&&(lt(f[m-3])||o.y),o.x=s&&f[m-2],o.y=s&&f[m-1]}s||(i.curve=jt(n));return s?[n,s]:n},null,jt),Qt=w._parseDots=v(function(t){var e=[];for(var i=0,n=t.length;i<n;i++){var s={},r=t[i].match(/^([^:]*):?([\d\.]*)/);s.color=w.getRGB(r[1]);if(s.color.error)return null;s.color=s.color.hex,r[2]&&(s.offset=r[2]+"%"),e.push(s)}for(i=1,n=e.length-1;i<n;i++)if(!e[i].offset){var o=lt(e[i-1].offset||0),a=0;for(var l=i+1;l<n;l++)if(e[l].offset){a=e[l].offset;break}a||(a=100,l=n),a=lt(a);var h=(a-o)/(l-i+1);for(;i<l;i++)o+=h,e[i].offset=o+"%"}return e}),Zt=w._tear=function(t,e){t==e.top&&(e.top=t.prev),t==e.bottom&&(e.bottom=t.next),t.next&&(t.next.prev=t.prev),t.prev&&(t.prev.next=t.next)},Jt=w._tofront=function(t,e){e.top!==t&&(Zt(t,e),t.next=null,t.prev=e.top,e.top.next=t,e.top=t)},te=w._toback=function(t,e){e.bottom!==t&&(Zt(t,e),t.next=e.bottom,t.prev=null,e.bottom.prev=t,e.bottom=t)},ee=w._insertafter=function(t,e,i){Zt(t,i),e==i.top&&(i.top=t),e.next&&(e.next.prev=t),t.next=e.next,t.prev=e,e.next=t},ie=w._insertbefore=function(t,e,i){Zt(t,i),e==i.bottom&&(i.bottom=t),e.prev&&(e.prev.next=t),t.prev=e.prev,e.prev=t,t.next=e},ne=w.toMatrix=function(t,e){var i=Bt(t),n={_:{transform:H},getBBox:function(){return i}};re(n,e);return n.matrix},se=w.transformPath=function(t,e){return Pt(t,ne(t,e))},re=w._extractTransform=function(t,e){if(e==null)return t._.transform;e=O(e).replace(/\.{3}|\u2026/g,t._.transform||H);var i=w.parseTransformString(e),n=0,s=0,r=0,a=1,l=1,h=t._,c=new o;h.transform=i||[];if(i)for(var u=0,d=i.length;u<d;u++){var f=i[u],p=f.length,m=O(f[0]).toLowerCase(),g=f[0]!=m,v=g?c.invert():0,y,b,x,_,k;m=="t"&&p==3?g?(y=v.x(0,0),b=v.y(0,0),x=v.x(f[1],f[2]),_=v.y(f[1],f[2]),c.translate(x-y,_-b)):c.translate(f[1],f[2]):m=="r"?p==2?(k=k||t.getBBox(1),c.rotate(f[1],k.x+k.width/2,k.y+k.height/2),n+=f[1]):p==4&&(g?(x=v.x(f[2],f[3]),_=v.y(f[2],f[3]),c.rotate(f[1],x,_)):c.rotate(f[1],f[2],f[3]),n+=f[1]):m=="s"?p==2||p==3?(k=k||t.getBBox(1),c.scale(f[1],f[p-1],k.x+k.width/2,k.y+k.height/2),a*=f[1],l*=f[p-1]):p==5&&(g?(x=v.x(f[3],f[4]),_=v.y(f[3],f[4]),c.scale(f[1],f[2],x,_)):c.scale(f[1],f[2],f[3],f[4]),a*=f[1],l*=f[2]):m=="m"&&p==7&&c.add(f[1],f[2],f[3],f[4],f[5],f[6]),h.dirtyT=1,t.matrix=c}t.matrix=c,h.sx=a,h.sy=l,h.deg=n,h.dx=s=c.e,h.dy=r=c.f,a==1&&l==1&&!n&&h.bbox?(h.bbox.x+=+s,h.bbox.y+=+r):h.dirtyT=1},oe=function(t){var e=t[0];switch(e.toLowerCase()){case"t":return[e,0,0];case"m":return[e,1,0,0,1,0,0];case"r":return t.length==4?[e,0,t[2],t[3]]:[e,0];case"s":return t.length==5?[e,1,1,t[3],t[4]]:t.length==3?[e,1,1]:[e,1]}},ae=w._equaliseTransform=function(t,e){e=O(e).replace(/\.{3}|\u2026/g,t),t=w.parseTransformString(t)||[],e=w.parseTransformString(e)||[];var i=W(t.length,e.length),n=[],s=[],r=0,o,a,l,h;for(;r<i;r++){l=t[r]||oe(e[r]),h=e[r]||oe(l);if(l[0]!=h[0]||l[0].toLowerCase()=="r"&&(l[2]!=h[2]||l[3]!=h[3])||l[0].toLowerCase()=="s"&&(l[3]!=h[3]||l[4]!=h[4]))return;n[r]=[],s[r]=[];for(o=0,a=W(l.length,h.length);o<a;o++)o in l&&(n[r][o]=l[o]),o in h&&(s[r][o]=h[o])}return{from:n,to:s}};w._getContainer=function(t,e,i,n){var s;s=n==null&&!w.is(t,"object")?D.doc.getElementById(t):t;if(s!=null){if(s.tagName)return e==null?{container:s,width:s.style.pixelWidth||s.offsetWidth,height:s.style.pixelHeight||s.offsetHeight}:{container:s,width:e,height:i};return{container:1,x:t,y:e,width:i,height:n}}},w.pathToRelative=Wt,w._engine={},w.path2curve=Kt,w.matrix=function(t,e,i,n,s,r){return new o(t,e,i,n,s,r)},function(t){function e(t){var e=j.sqrt(i(t));t[0]&&(t[0]/=e),t[1]&&(t[1]/=e)}function i(t){return t[0]*t[0]+t[1]*t[1]}t.add=function(t,e,i,n,s,r){var a=[[],[],[]],l=[[this.a,this.c,this.e],[this.b,this.d,this.f],[0,0,1]],h=[[t,i,s],[e,n,r],[0,0,1]],c,u,d,f;t&&t instanceof o&&(h=[[t.a,t.c,t.e],[t.b,t.d,t.f],[0,0,1]]);for(c=0;c<3;c++)for(u=0;u<3;u++){f=0;for(d=0;d<3;d++)f+=l[c][d]*h[d][u];a[c][u]=f}this.a=a[0][0],this.b=a[1][0],this.c=a[0][1],this.d=a[1][1],this.e=a[0][2],this.f=a[1][2]},t.invert=function(){var t=this,e=t.a*t.d-t.b*t.c;return new o(t.d/e,-t.b/e,-t.c/e,t.a/e,(t.c*t.f-t.d*t.e)/e,(t.b*t.e-t.a*t.f)/e)},t.clone=function(){return new o(this.a,this.b,this.c,this.d,this.e,this.f)},t.translate=function(t,e){this.add(1,0,0,1,t,e)},t.scale=function(t,e,i,n){e==null&&(e=t),(i||n)&&this.add(1,0,0,1,i,n),this.add(t,0,0,e,0,0),(i||n)&&this.add(1,0,0,1,-i,-n)},t.rotate=function(t,e,i){t=w.rad(t),e=e||0,i=i||0;var n=+j.cos(t).toFixed(9),s=+j.sin(t).toFixed(9);this.add(n,s,-s,n,e,i),this.add(1,0,0,1,-e,-i)},t.x=function(t,e){return t*this.a+e*this.c+this.e},t.y=function(t,e){return t*this.b+e*this.d+this.f},t.get=function(t){return+this[O.fromCharCode(97+t)].toFixed(4)},t.toString=function(){return w.svg?"matrix("+[this.get(0),this.get(1),this.get(2),this.get(3),this.get(4),this.get(5)].join()+")":[this.get(0),this.get(2),this.get(1),this.get(3),0,0].join()},t.toFilter=function(){return"progid:DXImageTransform.Microsoft.Matrix(M11="+this.get(0)+", M12="+this.get(2)+", M21="+this.get(1)+", M22="+this.get(3)+", Dx="+this.get(4)+", Dy="+this.get(5)+", sizingmethod='auto expand')"},t.offset=function(){return[this.e.toFixed(4),this.f.toFixed(4)]},t.split=function(){var t={};t.dx=this.e,t.dy=this.f;var n=[[this.a,this.c],[this.b,this.d]];t.scalex=j.sqrt(i(n[0])),e(n[0]),t.shear=n[0][0]*n[1][0]+n[0][1]*n[1][1],n[1]=[n[1][0]-n[0][0]*t.shear,n[1][1]-n[0][1]*t.shear],t.scaley=j.sqrt(i(n[1])),e(n[1]),t.shear/=t.scaley;var s=-n[0][1],r=n[1][1];r<0?(t.rotate=w.deg(j.acos(r)),s<0&&(t.rotate=360-t.rotate)):t.rotate=w.deg(j.asin(s)),t.isSimple=!+t.shear.toFixed(9)&&(t.scalex.toFixed(9)==t.scaley.toFixed(9)||!t.rotate),t.isSuperSimple=!+t.shear.toFixed(9)&&t.scalex.toFixed(9)==t.scaley.toFixed(9)&&!t.rotate,t.noRotation=!+t.shear.toFixed(9)&&!t.rotate;return t},t.toTransformString=function(t){var e=t||this[R]();if(e.isSimple){e.scalex=+e.scalex.toFixed(4),e.scaley=+e.scaley.toFixed(4),e.rotate=+e.rotate.toFixed(4);return(e.dx||e.dy?"t"+[e.dx,e.dy]:H)+(e.scalex!=1||e.scaley!=1?"s"+[e.scalex,e.scaley,0,0]:H)+(e.rotate?"r"+[e.rotate,0,0]:H)}return"m"+[this.get(0),this.get(1),this.get(2),this.get(3),this.get(4),this.get(5)]}}(o.prototype);var le=navigator.userAgent.match(/Version\/(.*?)\s/)||navigator.userAgent.match(/Chrome\/(\d+)/);navigator.vendor=="Apple Computer, Inc."&&(le&&le[1]<4||navigator.platform.slice(0,2)=="iP")||navigator.vendor=="Google Inc."&&le&&le[1]<8?I.safari=function(){var t=this.rect(-99,-99,this.width+99,this.height+99).attr({stroke:"none"});setTimeout(function(){t.remove()})}:I.safari=Ct;var he=function(){this.returnValue=!1},ce=function(){return this.originalEvent.preventDefault()},ue=function(){this.cancelBubble=!0},de=function(){return this.originalEvent.stopPropagation()},fe=function(){if(D.doc.addEventListener)return function(t,e,i,n){var s=A&&N[e]?N[e]:e,r=function(s){var r=D.doc.documentElement.scrollTop||D.doc.body.scrollTop,o=D.doc.documentElement.scrollLeft||D.doc.body.scrollLeft,a=s.clientX+o,l=s.clientY+r;if(A&&N[T](e))for(var h=0,c=s.targetTouches&&s.targetTouches.length;h<c;h++)if(s.targetTouches[h].target==t){var u=s;s=s.targetTouches[h],s.originalEvent=u,s.preventDefault=ce,s.stopPropagation=de;break}return i.call(n,s,a,l)};t.addEventListener(s,r,!1);return function(){t.removeEventListener(s,r,!1);return!0}};if(D.doc.attachEvent)return function(t,e,i,n){var s=function(t){t=t||D.win.event;var e=D.doc.documentElement.scrollTop||D.doc.body.scrollTop,s=D.doc.documentElement.scrollLeft||D.doc.body.scrollLeft,r=t.clientX+s,o=t.clientY+e;t.preventDefault=t.preventDefault||he,t.stopPropagation=t.stopPropagation||ue;return i.call(n,t,r,o)};t.attachEvent("on"+e,s);var r=function(){t.detachEvent("on"+e,s);return!0};return r}}(),pe=[],me=function(t){var e=t.clientX,i=t.clientY,n=D.doc.documentElement.scrollTop||D.doc.body.scrollTop,s=D.doc.documentElement.scrollLeft||D.doc.body.scrollLeft,r,o=pe.length;while(o--){r=pe[o];if(A){var a=t.touches.length,l;while(a--){l=t.touches[a];if(l.identifier==r.el._drag.id){e=l.clientX,i=l.clientY,(t.originalEvent?t.originalEvent:t).preventDefault();break}}}else t.preventDefault();var h=r.el.node,c,u=h.nextSibling,d=h.parentNode,f=h.style.display;D.win.opera&&d.removeChild(h),h.style.display="none",c=r.el.paper.getElementByPoint(e,i),h.style.display=f,D.win.opera&&(u?d.insertBefore(h,u):d.appendChild(h)),c&&eve("raphael.drag.over."+r.el.id,r.el,c),e+=s,i+=n,eve("raphael.drag.move."+r.el.id,r.move_scope||r.el,e-r.el._drag.x,i-r.el._drag.y,e,i,t)}},ge=function(t){w.unmousemove(me).unmouseup(ge);var e=pe.length,i;while(e--)i=pe[e],i.el._drag={},eve("raphael.drag.end."+i.el.id,i.end_scope||i.start_scope||i.move_scope||i.el,t);pe=[]},ve=w.el={};for(var ye=z.length;ye--;)(function(t){w[t]=ve[t]=function(e,i){w.is(e,"function")&&(this.events=this.events||[],this.events.push({name:t,f:e,unbind:fe(this.shape||this.node||D.doc,t,e,i||this)}));return this},w["un"+t]=ve["un"+t]=function(e){var i=this.events||[],n=i.length;while(n--)if(i[n].name==t&&i[n].f==e){i[n].unbind(),i.splice(n,1),!i.length&&delete this.events;return this}return this}})(z[ye]);ve.data=function(t,e){var i=xt[this.id]=xt[this.id]||{};if(arguments.length==1){if(w.is(t,"object")){for(var n in t)t[T](n)&&this.data(n,t[n]);return this}eve("raphael.data.get."+this.id,this,i[t],t);return i[t]}i[t]=e,eve("raphael.data.set."+this.id,this,e,t);return this},ve.removeData=function(t){t==null?xt[this.id]={}:xt[this.id]&&delete xt[this.id][t];return this},ve.hover=function(t,e,i,n){return this.mouseover(t,i).mouseout(e,n||i)},ve.unhover=function(t,e){return this.unmouseover(t).unmouseout(e)};var be=[];ve.drag=function(t,e,i,n,s,r){function o(o){(o.originalEvent||o).preventDefault();var a=D.doc.documentElement.scrollTop||D.doc.body.scrollTop,l=D.doc.documentElement.scrollLeft||D.doc.body.scrollLeft;this._drag.x=o.clientX+l,this._drag.y=o.clientY+a,this._drag.id=o.identifier,!pe.length&&w.mousemove(me).mouseup(ge),pe.push({el:this,move_scope:n,start_scope:s,end_scope:r}),e&&eve.on("raphael.drag.start."+this.id,e),t&&eve.on("raphael.drag.move."+this.id,t),i&&eve.on("raphael.drag.end."+this.id,i),eve("raphael.drag.start."+this.id,s||n||this,o.clientX+l,o.clientY+a,o)}this._drag={},be.push({el:this,start:o}),this.mousedown(o);return this},ve.onDragOver=function(t){t?eve.on("raphael.drag.over."+this.id,t):eve.unbind("raphael.drag.over."+this.id)},ve.undrag=function(){var t=be.length;while(t--)be[t].el==this&&(this.unmousedown(be[t].start),be.splice(t,1),eve.unbind("raphael.drag.*."+this.id));!be.length&&w.unmousemove(me).unmouseup(ge)},I.circle=function(t,e,i){var n=w._engine.circle(this,t||0,e||0,i||0);this.__set__&&this.__set__.push(n);return n},I.rect=function(t,e,i,n,s){var r=w._engine.rect(this,t||0,e||0,i||0,n||0,s||0);this.__set__&&this.__set__.push(r);return r},I.ellipse=function(t,e,i,n){var s=w._engine.ellipse(this,t||0,e||0,i||0,n||0);this.__set__&&this.__set__.push(s);return s},I.path=function(t){t&&!w.is(t,X)&&!w.is(t[0],K)&&(t+=H);var e=w._engine.path(w.format[$](w,arguments),this);this.__set__&&this.__set__.push(e);return e},I.image=function(t,e,i,n,s){var r=w._engine.image(this,t||"about:blank",e||0,i||0,n||0,s||0);this.__set__&&this.__set__.push(r);return r},I.text=function(t,e,i){var n=w._engine.text(this,t||0,e||0,O(i));this.__set__&&this.__set__.push(n);return n},I.set=function(t){!w.is(t,"array")&&(t=Array.prototype.splice.call(arguments,0,arguments.length));var e=new $e(t);this.__set__&&this.__set__.push(e);return e},I.setStart=function(t){this.__set__=t||this.set()},I.setFinish=function(t){var e=this.__set__;delete this.__set__;return e},I.setSize=function(t,e){return w._engine.setSize.call(this,t,e)},I.setViewBox=function(t,e,i,n,s){return w._engine.setViewBox.call(this,t,e,i,n,s)},I.top=I.bottom=null,I.raphael=w;var we=function(t){var e=t.getBoundingClientRect(),i=t.ownerDocument,n=i.body,s=i.documentElement,r=s.clientTop||n.clientTop||0,o=s.clientLeft||n.clientLeft||0,a=e.top+(D.win.pageYOffset||s.scrollTop||n.scrollTop)-r,l=e.left+(D.win.pageXOffset||s.scrollLeft||n.scrollLeft)-o;return{y:a,x:l}};I.getElementByPoint=function(t,e){var i=this,n=i.canvas,s=D.doc.elementFromPoint(t,e);if(D.win.opera&&s.tagName=="svg"){var r=we(n),o=n.createSVGRect();o.x=t-r.x,o.y=e-r.y,o.width=o.height=1;var a=n.getIntersectionList(o,null);a.length&&(s=a[a.length-1])}if(!s)return null;while(s.parentNode&&s!=n.parentNode&&!s.raphael)s=s.parentNode;s==i.canvas.parentNode&&(s=n),s=s&&s.raphael?i.getById(s.raphaelid):null;return s},I.getById=function(t){var e=this.bottom;while(e){if(e.id==t)return e;e=e.next}return null},I.forEach=function(t,e){var i=this.bottom;while(i){if(t.call(e,i)===!1)return this;i=i.next}return this},I.getElementsByPoint=function(t,e){var i=this.set();this.forEach(function(n){n.isPointInside(t,e)&&i.push(n)});return i},ve.isPointInside=function(t,e){var i=this.realPath=this.realPath||Mt[this.type](this);return w.isPointInsidePath(i,t,e)},ve.getBBox=function(t){if(this.removed)return{};var e=this._;if(t){if(e.dirty||!e.bboxwt)this.realPath=Mt[this.type](this),e.bboxwt=Bt(this.realPath),e.bboxwt.toString=s,e.dirty=0;return e.bboxwt}if(e.dirty||e.dirtyT||!e.bbox){if(e.dirty||!this.realPath)e.bboxwt=0,this.realPath=Mt[this.type](this);e.bbox=Bt(Pt(this.realPath,this.matrix)),e.bbox.toString=s,e.dirty=e.dirtyT=0}return e.bbox},ve.clone=function(){if(this.removed)return null;var t=this.paper[this.type]().attr(this.attr());this.__set__&&this.__set__.push(t);return t},ve.glow=function(t){if(this.type=="text")return null;t=t||{};var e={width:(t.width||10)+(+this.attr("stroke-width")||1),fill:t.fill||!1,opacity:t.opacity||.5,offsetx:t.offsetx||0,offsety:t.offsety||0,color:t.color||"#000"},i=e.width/2,n=this.paper,s=n.set(),r=this.realPath||Mt[this.type](this);r=this.matrix?Pt(r,this.matrix):r;for(var o=1;o<i+1;o++)s.push(n.path(r).attr({stroke:e.color,fill:e.fill?e.color:"none","stroke-linejoin":"round","stroke-linecap":"round","stroke-width":+(e.width/i*o).toFixed(3),opacity:+(e.opacity/i).toFixed(3)}));return s.insertBefore(this).translate(e.offsetx,e.offsety)};var xe={},_e=function(t,e,i,n,s,r,o,a,l){return l==null?f(t,e,i,n,s,r,o,a):w.findDotsAtSegment(t,e,i,n,s,r,o,a,d(t,e,i,n,s,r,o,a,l))},ke=function(t,e){return function(i,n,s){i=Kt(i);var r,o,a,l,h="",c={},u,d=0;for(var f=0,p=i.length;f<p;f++){a=i[f];if(a[0]=="M")r=+a[1],o=+a[2];else{l=_e(r,o,a[1],a[2],a[3],a[4],a[5],a[6]);if(d+l>n){if(e&&!c.start){u=_e(r,o,a[1],a[2],a[3],a[4],a[5],a[6],n-d),h+=["C"+u.start.x,u.start.y,u.m.x,u.m.y,u.x,u.y];if(s)return h;c.start=h,h=["M"+u.x,u.y+"C"+u.n.x,u.n.y,u.end.x,u.end.y,a[5],a[6]].join(),d+=l,r=+a[5],o=+a[6];continue}if(!t&&!e){u=_e(r,o,a[1],a[2],a[3],a[4],a[5],a[6],n-d);return{x:u.x,y:u.y,alpha:u.alpha}}}d+=l,r=+a[5],o=+a[6]}h+=a.shift()+a}c.end=h,u=t?d:e?c:w.findDotsAtSegment(r,o,a[0],a[1],a[2],a[3],a[4],a[5],1),u.alpha&&(u={x:u.x,y:u.y,alpha:u.alpha});return u}},Ce=ke(1),Se=ke(),Te=ke(0,1);w.getTotalLength=Ce,w.getPointAtLength=Se,w.getSubpath=function(t,e,i){if(this.getTotalLength(t)-i<1e-6)return Te(t,e).end;var n=Te(t,i,1);return e?Te(n,e).end:n},ve.getTotalLength=function(){if(this.type=="path"){if(this.node.getTotalLength)return this.node.getTotalLength();return Ce(this.attrs.path)}},ve.getPointAtLength=function(t){if(this.type=="path")return Se(this.attrs.path,t)},ve.getSubpath=function(t,e){if(this.type=="path")return w.getSubpath(this.attrs.path,t,e)};var De=w.easing_formulas={linear:function(t){return t},"<":function(t){return q(t,1.7)},">":function(t){return q(t,.48)},"<>":function(t){var e=.48-t/1.04,i=j.sqrt(.1734+e*e),n=i-e,s=q(U(n),1/3)*(n<0?-1:1),r=-i-e,o=q(U(r),1/3)*(r<0?-1:1),a=s+o+.5;return(1-a)*3*a*a+a*a*a},backIn:function(t){var e=1.70158;return t*t*((e+1)*t-e)},backOut:function(t){t=t-1;var e=1.70158;return t*t*((e+1)*t+e)+1},elastic:function(t){if(t==!!t)return t;return q(2,-10*t)*j.sin((t-.075)*2*V/.3)+1},bounce:function(t){var e=7.5625,i=2.75,n;t<1/i?n=e*t*t:t<2/i?(t-=1.5/i,n=e*t*t+.75):t<2.5/i?(t-=2.25/i,n=e*t*t+.9375):(t-=2.625/i,n=e*t*t+.984375);return n}};De.easeIn=De["ease-in"]=De["<"],De.easeOut=De["ease-out"]=De[">"],De.easeInOut=De["ease-in-out"]=De["<>"],De["back-in"]=De.backIn,De["back-out"]=De.backOut;var Me=[],Pe=window.requestAnimationFrame||window.webkitRequestAnimationFrame||window.mozRequestAnimationFrame||window.oRequestAnimationFrame||window.msRequestAnimationFrame||function(t){setTimeout(t,16)},Ie=function(){var t=+new Date,i=0;for(;i<Me.length;i++){var n=Me[i];if(n.el.removed||n.paused)continue;var s=t-n.start,r=n.ms,o=n.easing,a=n.from,l=n.diff,h=n.to,c=n.t,u=n.el,d={},f,p={},m;n.initstatus?(s=(n.initstatus*n.anim.top-n.prev)/(n.percent-n.prev)*r,n.status=n.initstatus,delete n.initstatus,n.stop&&Me.splice(i--,1)):n.status=(n.prev+(n.percent-n.prev)*(s/r))/n.anim.top;if(s<0)continue;if(s<r){var g=o(s/r);for(var v in a)if(a[T](v)){switch(dt[v]){case G:f=+a[v]+g*r*l[v];break;case"colour":f="rgb("+[Ee(ot(a[v].r+g*r*l[v].r)),Ee(ot(a[v].g+g*r*l[v].g)),Ee(ot(a[v].b+g*r*l[v].b))].join(",")+")";break;case"path":f=[];for(var y=0,b=a[v].length;y<b;y++){f[y]=[a[v][y][0]];for(var x=1,_=a[v][y].length;x<_;x++)f[y][x]=+a[v][y][x]+g*r*l[v][y][x];f[y]=f[y].join(L)}f=f.join(L);break;case"transform":if(l[v].real){f=[];for(y=0,b=a[v].length;y<b;y++){f[y]=[a[v][y][0]];for(x=1,_=a[v][y].length;x<_;x++)f[y][x]=a[v][y][x]+g*r*l[v][y][x]}}else{var k=function(t){return+a[v][t]+g*r*l[v][t]};f=[["m",k(0),k(1),k(2),k(3),k(4),k(5)]]}break;case"csv":if(v=="clip-rect"){f=[],y=4;while(y--)f[y]=+a[v][y]+g*r*l[v][y]}break;default:var C=[][F](a[v]);f=[],y=u.paper.customAttributes[v].length;while(y--)f[y]=+C[y]+g*r*l[v][y]}d[v]=f}u.attr(d),function(t,e,i){setTimeout(function(){eve("raphael.anim.frame."+t,e,i)})}(u.id,u,n.anim)}else{(function(t,e,i){setTimeout(function(){eve("raphael.anim.frame."+e.id,e,i),eve("raphael.anim.finish."+e.id,e,i),w.is(t,"function")&&t.call(e)})})(n.callback,u,n.anim),u.attr(h),Me.splice(i--,1);if(n.repeat>1&&!n.next){for(m in h)h[T](m)&&(p[m]=n.totalOrigin[m]);n.el.attr(p),e(n.anim,n.el,n.anim.percents[0],null,n.totalOrigin,n.repeat-1)}n.next&&!n.stop&&e(n.anim,n.el,n.next,null,n.totalOrigin,n.repeat)}}w.svg&&u&&u.paper&&u.paper.safari(),Me.length&&Pe(Ie)},Ee=function(t){return t>255?255:t<0?0:t};ve.animateWith=function(t,n,s,r,o,a){var l=this;if(l.removed){a&&a.call(l);return l}var h=s instanceof i?s:w.animation(s,r,o,a),c,u;e(h,l,h.percents[0],null,l.attr());for(var d=0,f=Me.length;d<f;d++)if(Me[d].anim==n&&Me[d].el==t){Me[f-1].start=Me[d].start;break}return l},ve.onAnimation=function(t){t?eve.on("raphael.anim.frame."+this.id,t):eve.unbind("raphael.anim.frame."+this.id);return this},i.prototype.delay=function(t){var e=new i(this.anim,this.ms);e.times=this.times,e.del=+t||0;return e},i.prototype.repeat=function(t){var e=new i(this.anim,this.ms);e.del=this.del,e.times=j.floor(W(t,0))||1;return e},w.animation=function(t,e,n,s){if(t instanceof i)return t;if(w.is(n,"function")||!n)s=s||n||null,n=null;t=Object(t),e=+e||0;var r={},o,a;for(a in t)t[T](a)&&lt(a)!=a&&lt(a)+"%"!=a&&(o=!0,r[a]=t[a]);if(!o)return new i(t,e);n&&(r.easing=n),s&&(r.callback=s);return new i({100:r},e)},ve.animate=function(t,n,s,r){var o=this;if(o.removed){r&&r.call(o);return o}var a=t instanceof i?t:w.animation(t,n,s,r);e(a,o,a.percents[0],null,o.attr());return o},ve.setTime=function(t,e){t&&e!=null&&this.status(t,Y(e,t.ms)/t.ms);return this},ve.status=function(t,i){var n=[],s=0,r,o;if(i!=null){e(t,this,-1,Y(i,1));return this}r=Me.length;for(;s<r;s++){o=Me[s];if(o.el.id==this.id&&(!t||o.anim==t)){if(t)return o.status;n.push({anim:o.anim,status:o.status})}}if(t)return 0;return n},ve.pause=function(t){for(var e=0;e<Me.length;e++)Me[e].el.id==this.id&&(!t||Me[e].anim==t)&&eve("raphael.anim.pause."+this.id,this,Me[e].anim)!==!1&&(Me[e].paused=!0);return this},ve.resume=function(t){for(var e=0;e<Me.length;e++)if(Me[e].el.id==this.id&&(!t||Me[e].anim==t)){var i=Me[e];eve("raphael.anim.resume."+this.id,this,i.anim)!==!1&&(delete i.paused,this.status(i.anim,i.status))}return this},ve.stop=function(t){for(var e=0;e<Me.length;e++)Me[e].el.id==this.id&&(!t||Me[e].anim==t)&&eve("raphael.anim.stop."+this.id,this,Me[e].anim)!==!1&&Me.splice(e--,1);return this},eve.on("raphael.remove",t),eve.on("raphael.clear",t),ve.toString=function(){return"Raphals object"};var $e=function(t){this.items=[],this.length=0,this.type="set";if(t)for(var e=0,i=t.length;e<i;e++)t[e]&&(t[e].constructor==ve.constructor||t[e].constructor==$e)&&(this[this.items.length]=this.items[this.items.length]=t[e],this.length++)},Fe=$e.prototype;Fe.push=function(){var t,e;for(var i=0,n=arguments.length;i<n;i++)t=arguments[i],t&&(t.constructor==ve.constructor||t.constructor==$e)&&(e=this.items.length,this[e]=this.items[e]=t,this.length++);return this},Fe.pop=function(){this.length&&delete this[this.length--];return this.items.pop()},Fe.forEach=function(t,e){for(var i=0,n=this.items.length;i<n;i++)if(t.call(e,this.items[i],i)===!1)return this;return this};for(var Ae in ve)ve[T](Ae)&&(Fe[Ae]=function(t){return function(){var e=arguments;return this.forEach(function(i){i[t][$](i,e)})}}(Ae));Fe.attr=function(t,e){if(t&&w.is(t,K)&&w.is(t[0],"object"))for(var i=0,n=t.length;i<n;i++)this.items[i].attr(t[i]);else for(var s=0,r=this.items.length;s<r;s++)this.items[s].attr(t,e);return this},Fe.clear=function(){while(this.length)this.pop()},Fe.splice=function(t,e,i){t=t<0?W(this.length+t,0):t,e=W(0,Y(this.length-t,e));var n=[],s=[],r=[],o;for(o=2;o<arguments.length;o++)r.push(arguments[o]);for(o=0;o<e;o++)s.push(this[t+o]);for(;o<this.length-t;o++)n.push(this[t+o]);var a=r.length;for(o=0;o<a+n.length;o++)this.items[t+o]=this[t+o]=o<a?r[o]:n[o-a];o=this.items.length=this.length-=e-a;while(this[o])delete this[o++];return new $e(s)},Fe.exclude=function(t){for(var e=0,i=this.length;e<i;e++)if(this[e]==t){this.splice(e,1);return!0}},Fe.animate=function(t,e,i,n){(w.is(i,"function")||!i)&&(n=i||null);var s=this.items.length,r=s,o,a=this,l;if(!s)return this;n&&(l=function(){!--s&&n.call(a)}),i=w.is(i,X)?i:l;var h=w.animation(t,e,i,l);o=this.items[--r].animate(h);while(r--)this.items[r]&&!this.items[r].removed&&this.items[r].animateWith(o,h,h);return this},Fe.insertAfter=function(t){var e=this.items.length;while(e--)this.items[e].insertAfter(t);return this},Fe.getBBox=function(){var t=[],e=[],i=[],n=[];for(var s=this.items.length;s--;)if(!this.items[s].removed){var r=this.items[s].getBBox();t.push(r.x),e.push(r.y),i.push(r.x+r.width),n.push(r.y+r.height)}t=Y[$](0,t),e=Y[$](0,e),i=W[$](0,i),n=W[$](0,n);return{x:t,y:e,x2:i,y2:n,width:i-t,height:n-e}},Fe.clone=function(t){t=new $e;for(var e=0,i=this.items.length;e<i;e++)t.push(this.items[e].clone());return t},Fe.toString=function(){return"Raphals set"},w.registerFont=function(t){if(!t.face)return t;this.fonts=this.fonts||{};var e={w:t.w,face:{},glyphs:{}},i=t.face["font-family"];for(var n in t.face)t.face[T](n)&&(e.face[n]=t.face[n]);this.fonts[i]?this.fonts[i].push(e):this.fonts[i]=[e];if(!t.svg){e.face["units-per-em"]=ht(t.face["units-per-em"],10);for(var s in t.glyphs)if(t.glyphs[T](s)){var r=t.glyphs[s];e.glyphs[s]={w:r.w,k:{},d:r.d&&"M"+r.d.replace(/[mlcxtrv]/g,function(t){return{l:"L",c:"C",x:"z",t:"m",r:"l",v:"c"}[t]||"M"})+"z"};if(r.k)for(var o in r.k)r[T](o)&&(e.glyphs[s].k[o]=r.k[o])}}return t},I.getFont=function(t,e,i,n){n=n||"normal",i=i||"normal",e=+e||{normal:400,bold:700,lighter:300,bolder:800}[e]||400;if(!!w.fonts){var s=w.fonts[t];if(!s){var r=new RegExp("(^|\\s)"+t.replace(/[^\w\d\s+!~.:_-]/g,H)+"(\\s|$)","i");for(var o in w.fonts)if(w.fonts[T](o)&&r.test(o)){s=w.fonts[o];break}}var a;if(s)for(var l=0,h=s.length;l<h;l++){a=s[l];if(a.face["font-weight"]==e&&(a.face["font-style"]==i||!a.face["font-style"])&&a.face["font-stretch"]==n)break}return a}},I.print=function(t,e,i,n,s,r,o){r=r||"middle",o=W(Y(o||0,1),-1);var a=O(i)[R](H),l=0,h=0,c=H,u;w.is(n,i)&&(n=this.getFont(n));if(n){u=(s||16)/n.face["units-per-em"];var d=n.face.bbox[R](_),f=+d[0],p=d[3]-d[1],m=0,g=+d[1]+(r=="baseline"?p+ +n.face.descent:p/2);for(var v=0,y=a.length;v<y;v++){if(a[v]=="\n")l=0,x=0,h=0,m+=p;else{var b=h&&n.glyphs[a[v-1]]||{},x=n.glyphs[a[v]];l+=h?(b.w||n.w)+(b.k&&b.k[a[v]]||0)+n.w*o:0,h=1}x&&x.d&&(c+=w.transformPath(x.d,["t",l*u,m*u,"s",u,u,f,g,"t",(t-f)/u,(e-g)/u]))}}return this.path(c).attr({fill:"#000",stroke:"none"})},I.add=function(t){if(w.is(t,"array")){var e=this.set(),i=0,n=t.length,s;for(;i<n;i++)s=t[i]||{},k[T](s.type)&&e.push(this[s.type]().attr(s))}return e},w.format=function(t,e){var i=w.is(e,K)?[0][F](e):arguments;t&&w.is(t,X)&&i.length-1&&(t=t.replace(C,function(t,e){return i[++e]==null?H:i[e]}));return t||H},w.fullfill=function(){var t=/\{([^\}]+)\}/g,e=/(?:(?:^|\.)(.+?)(?=\[|\.|$|\()|\[('|")(.+?)\2\])(\(\))?/g,i=function(t,i,n){var s=n;i.replace(e,function(t,e,i,n,r){e=e||n,s&&(e in s&&(s=s[e]),typeof s=="function"&&r&&(s=s()))}),s=(s==null||s==n?t:s)+"";return s};return function(e,n){return String(e).replace(t,function(t,e){return i(t,e,n)})}}(),w.ninja=function(){M.was?D.win.Raphael=M.is:delete Raphael;return w},w.st=Fe,function(t,e,i){function n(){/in/.test(t.readyState)?setTimeout(n,9):w.eve("raphael.DOMload")}t.readyState==null&&t.addEventListener&&(t.addEventListener(e,i=function(){t.removeEventListener(e,i,!1),t.readyState="complete"},!1),t.readyState="loading"),n()}(document,"DOMContentLoaded"),M.was?D.win.Raphael=w:Raphael=w,eve.on("raphael.DOMload",function(){x=!0})}(),window.Raphael.svg&&function(t){var e="hasOwnProperty",i=String,n=parseFloat,s=parseInt,r=Math,o=r.max,a=r.abs,l=r.pow,h=/[, ]+/,c=t.eve,u="",d=" ",f="http://www.w3.org/1999/xlink",p={block:"M5,0 0,2.5 5,5z",classic:"M5,0 0,2.5 5,5 3.5,3 3.5,2z",diamond:"M2.5,0 5,2.5 2.5,5 0,2.5z",open:"M6,1 1,3.5 6,6",oval:"M2.5,0A2.5,2.5,0,0,1,2.5,5 2.5,2.5,0,0,1,2.5,0z"},m={};t.toString=function(){return"Your browser supports SVG.\nYou are running Raphal "+this.version};var g=function(n,s){if(s){typeof n=="string"&&(n=g(n));for(var r in s)s[e](r)&&(r.substring(0,6)=="xlink:"?n.setAttributeNS(f,r.substring(6),i(s[r])):n.setAttribute(r,i(s[r])))}else n=t._g.doc.createElementNS("http://www.w3.org/2000/svg",n),n.style&&(n.style.webkitTapHighlightColor="rgba(0,0,0,0)");return n},v=function(e,s){var h="linear",c=e.id+s,d=.5,f=.5,p=e.node,m=e.paper,v=p.style,y=t._g.doc.getElementById(c);if(!y){s=i(s).replace(t._radial_gradient,function(t,e,i){h="radial";if(e&&i){d=n(e),f=n(i);var s=(f>.5)*2-1;l(d-.5,2)+l(f-.5,2)>.25&&(f=r.sqrt(.25-l(d-.5,2))*s+.5)&&f!=.5&&(f=f.toFixed(5)-1e-5*s)}return u}),s=s.split(/\s*\-\s*/);if(h=="linear"){var b=s.shift();b=-n(b);if(isNaN(b))return null;var w=[0,0,r.cos(t.rad(b)),r.sin(t.rad(b))],x=1/(o(a(w[2]),a(w[3]))||1);w[2]*=x,w[3]*=x,w[2]<0&&(w[0]=-w[2],w[2]=0),w[3]<0&&(w[1]=-w[3],w[3]=0)}var _=t._parseDots(s);if(!_)return null;c=c.replace(/[\(\)\s,\xb0#]/g,"_"),e.gradient&&c!=e.gradient.id&&(m.defs.removeChild(e.gradient),delete e.gradient);if(!e.gradient){y=g(h+"Gradient",{id:c}),e.gradient=y,g(y,h=="radial"?{fx:d,fy:f}:{x1:w[0],y1:w[1],x2:w[2],y2:w[3],gradientTransform:e.matrix.invert()}),m.defs.appendChild(y);for(var k=0,C=_.length;k<C;k++)y.appendChild(g("stop",{offset:_[k].offset?_[k].offset:k?"100%":"0%","stop-color":_[k].color||"#fff"}))}}g(p,{fill:"url(#"+c+")",opacity:1,"fill-opacity":1}),v.fill=u,v.opacity=1,v.fillOpacity=1;return 1},y=function(t){var e=t.getBBox(1);g(t.pattern,{patternTransform:t.matrix.invert()+" translate("+e.x+","+e.y+")"})},b=function(n,s,r){if(n.type=="path"){var o=i(s).toLowerCase().split("-"),a=n.paper,l=r?"end":"start",h=n.node,c=n.attrs,d=c["stroke-width"],f=o.length,v="classic",y,b,w,x,_,k=3,C=3,S=5;while(f--)switch(o[f]){case"block":case"classic":case"oval":case"diamond":case"open":case"none":v=o[f];break;case"wide":C=5;break;case"narrow":C=2;break;case"long":k=5;break;case"short":k=2}v=="open"?(k+=2,C+=2,S+=2,w=1,x=r?4:1,_={fill:"none",stroke:c.stroke}):(x=w=k/2,_={fill:c.stroke,stroke:"none"}),n._.arrows?r?(n._.arrows.endPath&&m[n._.arrows.endPath]--,n._.arrows.endMarker&&m[n._.arrows.endMarker]--):(n._.arrows.startPath&&m[n._.arrows.startPath]--,n._.arrows.startMarker&&m[n._.arrows.startMarker]--):n._.arrows={};if(v!="none"){var T="raphael-marker-"+v,D="raphael-marker-"+l+v+k+C;t._g.doc.getElementById(T)?m[T]++:(a.defs.appendChild(g(g("path"),{"stroke-linecap":"round",d:p[v],id:T})),m[T]=1);var M=t._g.doc.getElementById(D),P;M?(m[D]++,P=M.getElementsByTagName("use")[0]):(M=g(g("marker"),{id:D,markerHeight:C,markerWidth:k,orient:"auto",refX:x,refY:C/2}),P=g(g("use"),{"xlink:href":"#"+T,transform:(r?"rotate(180 "+k/2+" "+C/2+") ":u)+"scale("+k/S+","+C/S+")","stroke-width":(1/((k/S+C/S)/2)).toFixed(4)}),M.appendChild(P),a.defs.appendChild(M),m[D]=1),g(P,_);var I=w*(v!="diamond"&&v!="oval");r?(y=n._.arrows.startdx*d||0,b=t.getTotalLength(c.path)-I*d):(y=I*d,b=t.getTotalLength(c.path)-(n._.arrows.enddx*d||0)),_={},_["marker-"+l]="url(#"+D+")";if(b||y)_.d=Raphael.getSubpath(c.path,y,b);g(h,_),n._.arrows[l+"Path"]=T,n._.arrows[l+"Marker"]=D,n._.arrows[l+"dx"]=I,n._.arrows[l+"Type"]=v,n._.arrows[l+"String"]=s}else r?(y=n._.arrows.startdx*d||0,b=t.getTotalLength(c.path)-y):(y=0,b=t.getTotalLength(c.path)-(n._.arrows.enddx*d||0)),n._.arrows[l+"Path"]&&g(h,{d:Raphael.getSubpath(c.path,y,b)}),delete n._.arrows[l+"Path"],delete n._.arrows[l+"Marker"],delete n._.arrows[l+"dx"],delete n._.arrows[l+"Type"],delete n._.arrows[l+"String"];for(_ in m)if(m[e](_)&&!m[_]){var E=t._g.doc.getElementById(_);E&&E.parentNode.removeChild(E)}}},w={"":[0],none:[0],"-":[3,1],".":[1,1],"-.":[3,1,1,1],"-..":[3,1,1,1,1,1],". ":[1,3],"- ":[4,3],"--":[8,3],"- .":[4,3,1,3],"--.":[8,3,1,3],"--..":[8,3,1,3,1,3]},x=function(t,e,n){e=w[i(e).toLowerCase()];if(e){var s=t.attrs["stroke-width"]||"1",r={round:s,square:s,butt:0}[t.attrs["stroke-linecap"]||n["stroke-linecap"]]||0,o=[],a=e.length;while(a--)o[a]=e[a]*s+(a%2?1:-1)*r;g(t.node,{"stroke-dasharray":o.join(",")})}},_=function(n,r){var l=n.node,c=n.attrs,d=l.style.visibility;l.style.visibility="hidden";for(var p in r)if(r[e](p)){if(!t._availableAttrs[e](p))continue;var m=r[p];c[p]=m;switch(p){case"blur":n.blur(m);break;case"href":case"title":case"target":var w=l.parentNode;if(w.tagName.toLowerCase()!="a"){var _=g("a");w.insertBefore(_,l),_.appendChild(l),w=_}p=="target"?w.setAttributeNS(f,"show",m=="blank"?"new":m):w.setAttributeNS(f,p,m);break;case"cursor":l.style.cursor=m;break;case"transform":n.transform(m);break;case"arrow-start":b(n,m);break;case"arrow-end":b(n,m,1);break;case"clip-rect":var k=i(m).split(h);if(k.length==4){n.clip&&n.clip.parentNode.parentNode.removeChild(n.clip.parentNode);var S=g("clipPath"),T=g("rect");S.id=t.createUUID(),g(T,{x:k[0],y:k[1],width:k[2],height:k[3]}),S.appendChild(T),n.paper.defs.appendChild(S),g(l,{"clip-path":"url(#"+S.id+")"}),n.clip=T}if(!m){var D=l.getAttribute("clip-path");if(D){var M=t._g.doc.getElementById(D.replace(/(^url\(#|\)$)/g,u));M&&M.parentNode.removeChild(M),g(l,{"clip-path":u}),delete n.clip}}break;case"path":n.type=="path"&&(g(l,{d:m?c.path=t._pathToAbsolute(m):"M0,0"}),n._.dirty=1,n._.arrows&&("startString"in n._.arrows&&b(n,n._.arrows.startString),"endString"in n._.arrows&&b(n,n._.arrows.endString,1)));break;case"width":l.setAttribute(p,m),n._.dirty=1;if(c.fx)p="x",m=c.x;else break;case"x":c.fx&&(m=-c.x-(c.width||0));case"rx":if(p=="rx"&&n.type=="rect")break;case"cx":l.setAttribute(p,m),n.pattern&&y(n),n._.dirty=1;break;case"height":l.setAttribute(p,m),n._.dirty=1;if(c.fy)p="y",m=c.y;else break;case"y":c.fy&&(m=-c.y-(c.height||0));case"ry":if(p=="ry"&&n.type=="rect")break;case"cy":l.setAttribute(p,m),n.pattern&&y(n),n._.dirty=1;break;case"r":n.type=="rect"?g(l,{rx:m,ry:m}):l.setAttribute(p,m),n._.dirty=1;break;case"src":n.type=="image"&&l.setAttributeNS(f,"href",m);break;case"stroke-width":if(n._.sx!=1||n._.sy!=1)m/=o(a(n._.sx),a(n._.sy))||1;n.paper._vbSize&&(m*=n.paper._vbSize),l.setAttribute(p,m),c["stroke-dasharray"]&&x(n,c["stroke-dasharray"],r),n._.arrows&&("startString"in n._.arrows&&b(n,n._.arrows.startString),"endString"in n._.arrows&&b(n,n._.arrows.endString,1));break;case"stroke-dasharray":x(n,m,r);break;case"fill":var P=i(m).match(t._ISURL);if(P){S=g("pattern");var I=g("image");S.id=t.createUUID(),g(S,{x:0,y:0,patternUnits:"userSpaceOnUse",height:1,width:1}),g(I,{x:0,y:0,"xlink:href":P[1]}),S.appendChild(I),function(e){t._preload(P[1],function(){var t=this.offsetWidth,i=this.offsetHeight;g(e,{width:t,height:i}),g(I,{width:t,height:i}),n.paper.safari()})}(S),n.paper.defs.appendChild(S),g(l,{fill:"url(#"+S.id+")"}),n.pattern=S,n.pattern&&y(n);break}var E=t.getRGB(m);if(!E.error)delete r.gradient,delete c.gradient,!t.is(c.opacity,"undefined")&&t.is(r.opacity,"undefined")&&g(l,{opacity:c.opacity}),!t.is(c["fill-opacity"],"undefined")&&t.is(r["fill-opacity"],"undefined")&&g(l,{"fill-opacity":c["fill-opacity"]});else if((n.type=="circle"||n.type=="ellipse"||i(m).charAt()!="r")&&v(n,m)){if("opacity"in c||"fill-opacity"in c){var $=t._g.doc.getElementById(l.getAttribute("fill").replace(/^url\(#|\)$/g,u));if($){var F=$.getElementsByTagName("stop");g(F[F.length-1],{"stop-opacity":("opacity"in c?c.opacity:1)*("fill-opacity"in c?c["fill-opacity"]:1)})}}c.gradient=m,c.fill="none";break}E[e]("opacity")&&g(l,{"fill-opacity":E.opacity>1?E.opacity/100:E.opacity});case"stroke":E=t.getRGB(m),l.setAttribute(p,E.hex),p=="stroke"&&E[e]("opacity")&&g(l,{"stroke-opacity":E.opacity>1?E.opacity/100:E.opacity}),p=="stroke"&&n._.arrows&&("startString"in n._.arrows&&b(n,n._.arrows.startString),"endString"in n._.arrows&&b(n,n._.arrows.endString,1));break;case"gradient":(n.type=="circle"||n.type=="ellipse"||i(m).charAt()!="r")&&v(n,m);break;case"opacity":c.gradient&&!c[e]("stroke-opacity")&&g(l,{"stroke-opacity":m>1?m/100:m});case"fill-opacity":if(c.gradient){$=t._g.doc.getElementById(l.getAttribute("fill").replace(/^url\(#|\)$/g,u)),$&&(F=$.getElementsByTagName("stop"),g(F[F.length-1],{"stop-opacity":m}));break};default:p=="font-size"&&(m=s(m,10)+"px");var A=p.replace(/(\-.)/g,function(t){return t.substring(1).toUpperCase()});l.style[A]=m,n._.dirty=1,l.setAttribute(p,m)}}C(n,r),l.style.visibility=d},k=1.2,C=function(n,r){if(n.type=="text"&&!!(r[e]("text")||r[e]("font")||r[e]("font-size")||r[e]("x")||r[e]("y"))){var o=n.attrs,a=n.node,l=a.firstChild?s(t._g.doc.defaultView.getComputedStyle(a.firstChild,u).getPropertyValue("font-size"),10):10;if(r[e]("text")){o.text=r.text;while(a.firstChild)a.removeChild(a.firstChild);var h=i(r.text).split("\n"),c=[],d;for(var f=0,p=h.length;f<p;f++)d=g("tspan"),f&&g(d,{dy:l*k,x:o.x}),d.appendChild(t._g.doc.createTextNode(h[f])),a.appendChild(d),c[f]=d}else{c=a.getElementsByTagName("tspan");for(f=0,p=c.length;f<p;f++)f?g(c[f],{dy:l*k,x:o.x}):g(c[0],{dy:0})}g(a,{x:o.x,y:o.y}),n._.dirty=1;var m=n._getBBox(),v=o.y-(m.y+m.height/2);v&&t.is(v,"finite")&&g(c[0],{dy:v})}},S=function(e,i){var n=0,s=0;this[0]=this.node=e,e.raphael=!0,this.id=t._oid++,e.raphaelid=this.id,this.matrix=t.matrix(),this.realPath=null,this.paper=i,this.attrs=this.attrs||{},this._={transform:[],sx:1,sy:1,deg:0,dx:0,dy:0,dirty:1},!i.bottom&&(i.bottom=this),this.prev=i.top,i.top&&(i.top.next=this),i.top=this,this.next=null},T=t.el;S.prototype=T,T.constructor=S,t._engine.path=function(t,e){var i=g("path");e.canvas&&e.canvas.appendChild(i);var n=new S(i,e);n.type="path",_(n,{fill:"none",stroke:"#000",path:t});return n},T.rotate=function(t,e,s){if(this.removed)return this;t=i(t).split(h),t.length-1&&(e=n(t[1]),s=n(t[2])),t=n(t[0]),s==null&&(e=s);if(e==null||s==null){var r=this.getBBox(1);e=r.x+r.width/2,s=r.y+r.height/2}this.transform(this._.transform.concat([["r",t,e,s]]));return this},T.scale=function(t,e,s,r){if(this.removed)return this;t=i(t).split(h),t.length-1&&(e=n(t[1]),s=n(t[2]),r=n(t[3])),t=n(t[0]),e==null&&(e=t),r==null&&(s=r);if(s==null||r==null)var o=this.getBBox(1);s=s==null?o.x+o.width/2:s,r=r==null?o.y+o.height/2:r,this.transform(this._.transform.concat([["s",t,e,s,r]]));return this},T.translate=function(t,e){if(this.removed)return this;t=i(t).split(h),t.length-1&&(e=n(t[1])),t=n(t[0])||0,e=+e||0,this.transform(this._.transform.concat([["t",t,e]]));return this},T.transform=function(i){var n=this._;if(i==null)return n.transform;t._extractTransform(this,i),this.clip&&g(this.clip,{transform:this.matrix.invert()}),this.pattern&&y(this),this.node&&g(this.node,{transform:this.matrix});if(n.sx!=1||n.sy!=1){var s=this.attrs[e]("stroke-width")?this.attrs["stroke-width"]:1;this.attr({"stroke-width":s})}return this},T.hide=function(){!this.removed&&this.paper.safari(this.node.style.display="none");return this},T.show=function(){!this.removed&&this.paper.safari(this.node.style.display="");return this},T.remove=function(){if(!this.removed&&!!this.node.parentNode){var e=this.paper;e.__set__&&e.__set__.exclude(this),c.unbind("raphael.*.*."+this.id),this.gradient&&e.defs.removeChild(this.gradient),t._tear(this,e),this.node.parentNode.tagName.toLowerCase()=="a"?this.node.parentNode.parentNode.removeChild(this.node.parentNode):this.node.parentNode.removeChild(this.node);for(var i in this)this[i]=typeof this[i]=="function"?t._removedFactory(i):null;this.removed=!0}},T._getBBox=function(){if(this.node.style.display=="none"){this.show();var t=!0}var e={};try{e=this.node.getBBox()}catch(t){}finally{e=e||{}}t&&this.hide();return e},T.attr=function(i,n){if(this.removed)return this;if(i==null){var s={};for(var r in this.attrs)this.attrs[e](r)&&(s[r]=this.attrs[r]);s.gradient&&s.fill=="none"&&(s.fill=s.gradient)&&delete s.gradient,s.transform=this._.transform;return s}if(n==null&&t.is(i,"string")){if(i=="fill"&&this.attrs.fill=="none"&&this.attrs.gradient)return this.attrs.gradient;if(i=="transform")return this._.transform;var o=i.split(h),a={};for(var l=0,u=o.length;l<u;l++)i=o[l],i in this.attrs?a[i]=this.attrs[i]:t.is(this.paper.customAttributes[i],"function")?a[i]=this.paper.customAttributes[i].def:a[i]=t._availableAttrs[i];return u-1?a:a[o[0]]}if(n==null&&t.is(i,"array")){a={};for(l=0,u=i.length;l<u;l++)a[i[l]]=this.attr(i[l]);return a}if(n!=null){var d={};d[i]=n}else i!=null&&t.is(i,"object")&&(d=i);for(var f in d)c("raphael.attr."+f+"."+this.id,this,d[f]);for(f in this.paper.customAttributes)if(this.paper.customAttributes[e](f)&&d[e](f)&&t.is(this.paper.customAttributes[f],"function")){var p=this.paper.customAttributes[f].apply(this,[].concat(d[f]));this.attrs[f]=d[f];for(var m in p)p[e](m)&&(d[m]=p[m])}_(this,d);return this},T.toFront=function(){if(this.removed)return this;this.node.parentNode.tagName.toLowerCase()=="a"?this.node.parentNode.parentNode.appendChild(this.node.parentNode):this.node.parentNode.appendChild(this.node);var e=this.paper;e.top!=this&&t._tofront(this,e);return this},T.toBack=function(){if(this.removed)return this;var e=this.node.parentNode;e.tagName.toLowerCase()=="a"?e.parentNode.insertBefore(this.node.parentNode,this.node.parentNode.parentNode.firstChild):e.firstChild!=this.node&&e.insertBefore(this.node,this.node.parentNode.firstChild),t._toback(this,this.paper);var i=this.paper;return this},T.insertAfter=function(e){if(this.removed)return this;var i=e.node||e[e.length-1].node;i.nextSibling?i.parentNode.insertBefore(this.node,i.nextSibling):i.parentNode.appendChild(this.node),t._insertafter(this,e,this.paper);return this},T.insertBefore=function(e){if(this.removed)return this;var i=e.node||e[0].node;i.parentNode.insertBefore(this.node,i),t._insertbefore(this,e,this.paper);return this},T.blur=function(e){var i=this;if(+e!==0){var n=g("filter"),s=g("feGaussianBlur");i.attrs.blur=e,n.id=t.createUUID(),g(s,{stdDeviation:+e||1.5}),n.appendChild(s),i.paper.defs.appendChild(n),i._blur=n,g(i.node,{filter:"url(#"+n.id+")"})}else i._blur&&(i._blur.parentNode.removeChild(i._blur),delete i._blur,delete i.attrs.blur),i.node.removeAttribute("filter")},t._engine.circle=function(t,e,i,n){var s=g("circle");t.canvas&&t.canvas.appendChild(s);var r=new S(s,t);r.attrs={cx:e,cy:i,r:n,fill:"none",stroke:"#000"},r.type="circle",g(s,r.attrs);return r},t._engine.rect=function(t,e,i,n,s,r){var o=g("rect");t.canvas&&t.canvas.appendChild(o);var a=new S(o,t);a.attrs={x:e,y:i,width:n,height:s,r:r||0,rx:r||0,ry:r||0,fill:"none",stroke:"#000"},a.type="rect",g(o,a.attrs);return a},t._engine.ellipse=function(t,e,i,n,s){var r=g("ellipse");t.canvas&&t.canvas.appendChild(r);var o=new S(r,t);o.attrs={cx:e,cy:i,rx:n,ry:s,fill:"none",stroke:"#000"},o.type="ellipse",g(r,o.attrs);return o},t._engine.image=function(t,e,i,n,s,r){var o=g("image");g(o,{x:i,y:n,width:s,height:r,preserveAspectRatio:"none"}),o.setAttributeNS(f,"href",e),t.canvas&&t.canvas.appendChild(o);var a=new S(o,t);a.attrs={x:i,y:n,width:s,height:r,src:e},a.type="image";return a},t._engine.text=function(e,i,n,s){var r=g("text");e.canvas&&e.canvas.appendChild(r);var o=new S(r,e);o.attrs={x:i,y:n,"text-anchor":"middle",text:s,font:t._availableAttrs.font,stroke:"none",fill:"#000"},o.type="text",_(o,o.attrs);return o},t._engine.setSize=function(t,e){this.width=t||this.width,this.height=e||this.height,this.canvas.setAttribute("width",this.width),this.canvas.setAttribute("height",this.height),this._viewBox&&this.setViewBox.apply(this,this._viewBox);return this},t._engine.create=function(){var e=t._getContainer.apply(0,arguments),i=e&&e.container,n=e.x,s=e.y,r=e.width,o=e.height;if(!i)throw new Error("SVG container not found.");var a=g("svg"),l="overflow:hidden;",h;n=n||0,s=s||0,r=r||512,o=o||342,g(a,{height:o,version:1.1,width:r,xmlns:"http://www.w3.org/2000/svg"}),i==1?(a.style.cssText=l+"position:absolute;left:"+n+"px;top:"+s+"px",t._g.doc.body.appendChild(a),h=1):(a.style.cssText=l+"position:relative",i.firstChild?i.insertBefore(a,i.firstChild):i.appendChild(a)),i=new t._Paper,i.width=r,i.height=o,i.canvas=a,i.clear(),i._left=i._top=0,h&&(i.renderfix=function(){}),i.renderfix();return i},t._engine.setViewBox=function(t,e,i,n,s){c("raphael.setViewBox",this,this._viewBox,[t,e,i,n,s]);var r=o(i/this.width,n/this.height),a=this.top,l=s?"meet":"xMinYMin",h,u;t==null?(this._vbSize&&(r=1),delete this._vbSize,h="0 0 "+this.width+d+this.height):(this._vbSize=r,h=t+d+e+d+i+d+n),g(this.canvas,{viewBox:h,preserveAspectRatio:l});while(r&&a)u="stroke-width"in a.attrs?a.attrs["stroke-width"]:1,a.attr({"stroke-width":u}),a._.dirty=1,a._.dirtyT=1,a=a.prev;this._viewBox=[t,e,i,n,!!s];return this},t.prototype.renderfix=function(){var t=this.canvas,e=t.style,i;try{i=t.getScreenCTM()||t.createSVGMatrix()}catch(e){i=t.createSVGMatrix()}var n=-i.e%1,s=-i.f%1;if(n||s)n&&(this._left=(this._left+n)%1,e.left=this._left+"px"),s&&(this._top=(this._top+s)%1,e.top=this._top+"px")},t.prototype.clear=function(){t.eve("raphael.clear",this);var e=this.canvas;while(e.firstChild)e.removeChild(e.firstChild);this.bottom=this.top=null,(this.desc=g("desc")).appendChild(t._g.doc.createTextNode("Created with Raphal "+t.version)),e.appendChild(this.desc),e.appendChild(this.defs=g("defs"))},t.prototype.remove=function(){c("raphael.remove",this),this.canvas.parentNode&&this.canvas.parentNode.removeChild(this.canvas);for(var e in this)this[e]=typeof this[e]=="function"?t._removedFactory(e):null};var D=t.st;for(var M in T)T[e](M)&&!D[e](M)&&(D[M]=function(t){return function(){var e=arguments;return this.forEach(function(i){i[t].apply(i,e)})}}(M))}(window.Raphael),window.Raphael.vml&&function(t){var e="hasOwnProperty",i=String,n=parseFloat,s=Math,r=s.round,o=s.max,a=s.min,l=s.abs,h="fill",c=/[, ]+/,u=t.eve,d=" progid:DXImageTransform.Microsoft",f=" ",p="",m={M:"m",L:"l",C:"c",Z:"x",m:"t",l:"r",c:"v",z:"x"},g=/([clmz]),?([^clmz]*)/gi,v=/ progid:\S+Blur\([^\)]+\)/g,y=/-?[^,\s-]+/g,b="position:absolute;left:0;top:0;width:1px;height:1px",w=21600,x={path:1,rect:1,image:1},_={circle:1,ellipse:1},k=function(e){var n=/[ahqstv]/gi,s=t._pathToAbsolute;i(e).match(n)&&(s=t._path2curve),n=/[clmz]/g;if(s==t._pathToAbsolute&&!i(e).match(n)){var o=i(e).replace(g,function(t,e,i){var n=[],s=e.toLowerCase()=="m",o=m[e];i.replace(y,function(t){s&&n.length==2&&(o+=n+m[e=="m"?"l":"L"],n=[]),n.push(r(t*w))});return o+n});return o}var a=s(e),l,h;o=[];for(var c=0,u=a.length;c<u;c++){l=a[c],h=a[c][0].toLowerCase(),h=="z"&&(h="x");for(var d=1,v=l.length;d<v;d++)h+=r(l[d]*w)+(d!=v-1?",":p);o.push(h)}return o.join(f)},C=function(e,i,n){var s=t.matrix();s.rotate(-e,.5,.5);return{dx:s.x(i,n),dy:s.y(i,n)}},S=function(t,e,i,n,s,r){var o=t._,a=t.matrix,c=o.fillpos,u=t.node,d=u.style,p=1,m="",g,v=w/e,y=w/i;d.visibility="hidden";if(!!e&&!!i){u.coordsize=l(v)+f+l(y),d.rotation=r*(e*i<0?-1:1);if(r){var b=C(r,n,s);n=b.dx,s=b.dy}e<0&&(m+="x"),i<0&&(m+=" y")&&(p=-1),d.flip=m,u.coordorigin=n*-v+f+s*-y;if(c||o.fillsize){var x=u.getElementsByTagName(h);x=x&&x[0],u.removeChild(x),c&&(b=C(r,a.x(c[0],c[1]),a.y(c[0],c[1])),x.position=b.dx*p+f+b.dy*p),o.fillsize&&(x.size=o.fillsize[0]*l(e)+f+o.fillsize[1]*l(i)),u.appendChild(x)}d.visibility="visible"}};t.toString=function(){return"Your browser doesnt support SVG. Falling down to VML.\nYou are running Raphal "+this.version};var T=function(t,e,n){var s=i(e).toLowerCase().split("-"),r=n?"end":"start",o=s.length,a="classic",l="medium",h="medium";while(o--)switch(s[o]){case"block":case"classic":case"oval":case"diamond":case"open":case"none":a=s[o];break;case"wide":case"narrow":h=s[o];break;case"long":case"short":l=s[o]}var c=t.node.getElementsByTagName("stroke")[0];c[r+"arrow"]=a,c[r+"arrowlength"]=l,c[r+"arrowwidth"]=h},D=function(s,l){s.attrs=s.attrs||{};var u=s.node,d=s.attrs,m=u.style,g,v=x[s.type]&&(l.x!=d.x||l.y!=d.y||l.width!=d.width||l.height!=d.height||l.cx!=d.cx||l.cy!=d.cy||l.rx!=d.rx||l.ry!=d.ry||l.r!=d.r),y=_[s.type]&&(d.cx!=l.cx||d.cy!=l.cy||d.r!=l.r||d.rx!=l.rx||d.ry!=l.ry),b=s;for(var C in l)l[e](C)&&(d[C]=l[C]);v&&(d.path=t._getPath[s.type](s),s._.dirty=1),l.href&&(u.href=l.href),l.title&&(u.title=l.title),l.target&&(u.target=l.target),l.cursor&&(m.cursor=l.cursor),"blur"in l&&s.blur(l.blur);if(l.path&&s.type=="path"||v)u.path=k(~i(d.path).toLowerCase().indexOf("r")?t._pathToAbsolute(d.path):d.path),s.type=="image"&&(s._.fillpos=[d.x,d.y],s._.fillsize=[d.width,d.height],S(s,1,1,0,0,0));"transform"in l&&s.transform(l.transform);if(y){var D=+d.cx,P=+d.cy,I=+d.rx||+d.r||0,$=+d.ry||+d.r||0;u.path=t.format("ar{0},{1},{2},{3},{4},{1},{4},{1}x",r((D-I)*w),r((P-$)*w),r((D+I)*w),r((P+$)*w),r(D*w))}if("clip-rect"in l){var F=i(l["clip-rect"]).split(c);if(F.length==4){F[2]=+F[2]+ +F[0],F[3]=+F[3]+ +F[1];var A=u.clipRect||t._g.doc.createElement("div"),H=A.style;H.clip=t.format("rect({1}px {2}px {3}px {0}px)",F),u.clipRect||(H.position="absolute",H.top=0,H.left=0,H.width=s.paper.width+"px",H.height=s.paper.height+"px",u.parentNode.insertBefore(A,u),A.appendChild(u),u.clipRect=A)}l["clip-rect"]||u.clipRect&&(u.clipRect.style.clip="auto")}if(s.textpath){var L=s.textpath.style;l.font&&(L.font=l.font),l["font-family"]&&(L.fontFamily='"'+l["font-family"].split(",")[0].replace(/^['"]+|['"]+$/g,p)+'"'),l["font-size"]&&(L.fontSize=l["font-size"]),l["font-weight"]&&(L.fontWeight=l["font-weight"]),l["font-style"]&&(L.fontStyle=l["font-style"])}"arrow-start"in l&&T(b,l["arrow-start"]),"arrow-end"in l&&T(b,l["arrow-end"],1);if(l.opacity!=null||l["stroke-width"]!=null||l.fill!=null||l.src!=null||l.stroke!=null||l["stroke-width"]!=null||l["stroke-opacity"]!=null||l["fill-opacity"]!=null||l["stroke-dasharray"]!=null||l["stroke-miterlimit"]!=null||l["stroke-linejoin"]!=null||l["stroke-linecap"]!=null){var O=u.getElementsByTagName(h),R=!1;O=O&&O[0],!O&&(R=O=E(h)),s.type=="image"&&l.src&&(O.src=l.src),l.fill&&(O.on=!0);if(O.on==null||l.fill=="none"||l.fill===null)O.on=!1;if(O.on&&l.fill){var z=i(l.fill).match(t._ISURL);if(z){O.parentNode==u&&u.removeChild(O),O.rotate=!0,O.src=z[1],O.type="tile";var N=s.getBBox(1);O.position=N.x+f+N.y,s._.fillpos=[N.x,N.y],t._preload(z[1],function(){s._.fillsize=[this.offsetWidth,this.offsetHeight]})}else O.color=t.getRGB(l.fill).hex,O.src=p,O.type="solid",t.getRGB(l.fill).error&&(b.type in{circle:1,ellipse:1}||i(l.fill).charAt()!="r")&&M(b,l.fill,O)&&(d.fill="none",d.gradient=l.fill,O.rotate=!1)}if("fill-opacity"in l||"opacity"in l){var B=((+d["fill-opacity"]+1||2)-1)*((+d.opacity+1||2)-1)*((+t.getRGB(l.fill).o+1||2)-1);B=a(o(B,0),1),O.opacity=B,O.src&&(O.color="none")}u.appendChild(O);var j=u.getElementsByTagName("stroke")&&u.getElementsByTagName("stroke")[0],W=!1;!j&&(W=j=E("stroke"));if(l.stroke&&l.stroke!="none"||l["stroke-width"]||l["stroke-opacity"]!=null||l["stroke-dasharray"]||l["stroke-miterlimit"]||l["stroke-linejoin"]||l["stroke-linecap"])j.on=!0;(l.stroke=="none"||l.stroke===null||j.on==null||l.stroke==0||l["stroke-width"]==0)&&(j.on=!1);var Y=t.getRGB(l.stroke);j.on&&l.stroke&&(j.color=Y.hex),B=((+d["stroke-opacity"]+1||2)-1)*((+d.opacity+1||2)-1)*((+Y.o+1||2)-1);var U=(n(l["stroke-width"])||1)*.75;B=a(o(B,0),1),l["stroke-width"]==null&&(U=d["stroke-width"]),l["stroke-width"]&&(j.weight=U),U&&U<1&&(B*=U)&&(j.weight=1),j.opacity=B,l["stroke-linejoin"]&&(j.joinstyle=l["stroke-linejoin"]||"miter"),j.miterlimit=l["stroke-miterlimit"]||8,l["stroke-linecap"]&&(j.endcap=l["stroke-linecap"]=="butt"?"flat":l["stroke-linecap"]=="square"?"square":"round");if(l["stroke-dasharray"]){var q={"-":"shortdash",".":"shortdot","-.":"shortdashdot","-..":"shortdashdotdot",". ":"dot","- ":"dash","--":"longdash","- .":"dashdot","--.":"longdashdot","--..":"longdashdotdot"};j.dashstyle=q[e](l["stroke-dasharray"])?q[l["stroke-dasharray"]]:p}W&&u.appendChild(j)}if(b.type=="text"){b.paper.canvas.style.display=p;var V=b.paper.span,G=100,X=d.font&&d.font.match(/\d+(?:\.\d*)?(?=px)/);m=V.style,d.font&&(m.font=d.font),d["font-family"]&&(m.fontFamily=d["font-family"]),d["font-weight"]&&(m.fontWeight=d["font-weight"]),d["font-style"]&&(m.fontStyle=d["font-style"]),X=n(d["font-size"]||X&&X[0])||10,m.fontSize=X*G+"px",b.textpath.string&&(V.innerHTML=i(b.textpath.string).replace(/</g,"&#60;").replace(/&/g,"&#38;").replace(/\n/g,"<br>"));var K=V.getBoundingClientRect();b.W=d.w=(K.right-K.left)/G,b.H=d.h=(K.bottom-K.top)/G,b.X=d.x,b.Y=d.y+b.H/2,("x"in l||"y"in l)&&(b.path.v=t.format("m{0},{1}l{2},{1}",r(d.x*w),r(d.y*w),r(d.x*w)+1));var Q=["x","y","text","font","font-family","font-weight","font-style","font-size"];for(var Z=0,J=Q.length;Z<J;Z++)if(Q[Z]in l){b._.dirty=1;break}switch(d["text-anchor"]){case"start":b.textpath.style["v-text-align"]="left",b.bbx=b.W/2;break;case"end":b.textpath.style["v-text-align"]="right",b.bbx=-b.W/2;break;default:b.textpath.style["v-text-align"]="center",b.bbx=0}b.textpath.style["v-text-kern"]=!0}},M=function(e,r,o){e.attrs=e.attrs||{};var a=e.attrs,l=Math.pow,h,c,u="linear",d=".5 .5";e.attrs.gradient=r,r=i(r).replace(t._radial_gradient,function(t,e,i){u="radial",e&&i&&(e=n(e),i=n(i),l(e-.5,2)+l(i-.5,2)>.25&&(i=s.sqrt(.25-l(e-.5,2))*((i>.5)*2-1)+.5),d=e+f+i);return p}),r=r.split(/\s*\-\s*/);if(u=="linear"){var m=r.shift();m=-n(m);if(isNaN(m))return null}var g=t._parseDots(r);if(!g)return null;e=e.shape||e.node;if(g.length){e.removeChild(o),o.on=!0,o.method="none",o.color=g[0].color,o.color2=g[g.length-1].color;var v=[];for(var y=0,b=g.length;y<b;y++)g[y].offset&&v.push(g[y].offset+f+g[y].color);o.colors=v.length?v.join():"0% "+o.color,u=="radial"?(o.type="gradientTitle",o.focus="100%",o.focussize="0 0",o.focusposition=d,o.angle=0):(o.type="gradient",o.angle=(270-m)%360),e.appendChild(o)}return 1},P=function(e,i){this[0]=this.node=e,e.raphael=!0,this.id=t._oid++,e.raphaelid=this.id,this.X=0,this.Y=0,this.attrs={},this.paper=i,this.matrix=t.matrix(),this._={transform:[],sx:1,sy:1,dx:0,dy:0,deg:0,dirty:1,dirtyT:1},!i.bottom&&(i.bottom=this),this.prev=i.top,i.top&&(i.top.next=this),i.top=this,this.next=null},I=t.el;P.prototype=I,I.constructor=P,I.transform=function(e){if(e==null)return this._.transform;var n=this.paper._viewBoxShift,s=n?"s"+[n.scale,n.scale]+"-1-1t"+[n.dx,n.dy]:p,r;n&&(r=e=i(e).replace(/\.{3}|\u2026/g,this._.transform||p)),t._extractTransform(this,s+e);var o=this.matrix.clone(),a=this.skew,l=this.node,h,c=~i(this.attrs.fill).indexOf("-"),u=!i(this.attrs.fill).indexOf("url(");o.translate(-.5,-.5);if(u||c||this.type=="image"){a.matrix="1 0 0 1",a.offset="0 0",h=o.split();if(c&&h.noRotation||!h.isSimple){l.style.filter=o.toFilter();var d=this.getBBox(),m=this.getBBox(1),g=d.x-m.x,v=d.y-m.y;l.coordorigin=g*-w+f+v*-w,S(this,1,1,g,v,0)}else l.style.filter=p,S(this,h.scalex,h.scaley,h.dx,h.dy,h.rotate)}else l.style.filter=p,a.matrix=i(o),a.offset=o.offset();r&&(this._.transform=r);return this},I.rotate=function(t,e,s){if(this.removed)return this;if(t!=null){t=i(t).split(c),t.length-1&&(e=n(t[1]),s=n(t[2])),t=n(t[0]),s==null&&(e=s);if(e==null||s==null){var r=this.getBBox(1);e=r.x+r.width/2,s=r.y+r.height/2}this._.dirtyT=1,this.transform(this._.transform.concat([["r",t,e,s]]));return this}},I.translate=function(t,e){if(this.removed)return this;t=i(t).split(c),t.length-1&&(e=n(t[1])),t=n(t[0])||0,e=+e||0,this._.bbox&&(this._.bbox.x+=t,this._.bbox.y+=e),this.transform(this._.transform.concat([["t",t,e]]));return this},I.scale=function(t,e,s,r){if(this.removed)return this;t=i(t).split(c),t.length-1&&(e=n(t[1]),s=n(t[2]),r=n(t[3]),isNaN(s)&&(s=null),isNaN(r)&&(r=null)),t=n(t[0]),e==null&&(e=t),r==null&&(s=r);if(s==null||r==null)var o=this.getBBox(1);s=s==null?o.x+o.width/2:s,r=r==null?o.y+o.height/2:r,this.transform(this._.transform.concat([["s",t,e,s,r]])),this._.dirtyT=1;return this},I.hide=function(){!this.removed&&(this.node.style.display="none");return this},I.show=function(){!this.removed&&(this.node.style.display=p);return this},I._getBBox=function(){if(this.removed)return{};return{x:this.X+(this.bbx||0)-this.W/2,y:this.Y-this.H,width:this.W,height:this.H}},I.remove=function(){if(!this.removed&&!!this.node.parentNode){this.paper.__set__&&this.paper.__set__.exclude(this),t.eve.unbind("raphael.*.*."+this.id),t._tear(this,this.paper),this.node.parentNode.removeChild(this.node),this.shape&&this.shape.parentNode.removeChild(this.shape);for(var e in this)this[e]=typeof this[e]=="function"?t._removedFactory(e):null;this.removed=!0}},I.attr=function(i,n){if(this.removed)return this;if(i==null){var s={};for(var r in this.attrs)this.attrs[e](r)&&(s[r]=this.attrs[r]);s.gradient&&s.fill=="none"&&(s.fill=s.gradient)&&delete s.gradient,s.transform=this._.transform;return s}if(n==null&&t.is(i,"string")){if(i==h&&this.attrs.fill=="none"&&this.attrs.gradient)return this.attrs.gradient;var o=i.split(c),a={};for(var l=0,d=o.length;l<d;l++)i=o[l],i in this.attrs?a[i]=this.attrs[i]:t.is(this.paper.customAttributes[i],"function")?a[i]=this.paper.customAttributes[i].def:a[i]=t._availableAttrs[i];return d-1?a:a[o[0]]}if(this.attrs&&n==null&&t.is(i,"array")){a={};for(l=0,d=i.length;l<d;l++)a[i[l]]=this.attr(i[l]);return a}var f;n!=null&&(f={},f[i]=n),n==null&&t.is(i,"object")&&(f=i);for(var p in f)u("raphael.attr."+p+"."+this.id,this,f[p]);if(f){for(p in this.paper.customAttributes)if(this.paper.customAttributes[e](p)&&f[e](p)&&t.is(this.paper.customAttributes[p],"function")){var m=this.paper.customAttributes[p].apply(this,[].concat(f[p]));this.attrs[p]=f[p];for(var g in m)m[e](g)&&(f[g]=m[g])}f.text&&this.type=="text"&&(this.textpath.string=f.text),D(this,f)}return this},I.toFront=function(){!this.removed&&this.node.parentNode.appendChild(this.node),this.paper&&this.paper.top!=this&&t._tofront(this,this.paper);return this},I.toBack=function(){if(this.removed)return this;this.node.parentNode.firstChild!=this.node&&(this.node.parentNode.insertBefore(this.node,this.node.parentNode.firstChild),t._toback(this,this.paper));return this},I.insertAfter=function(e){if(this.removed)return this;e.constructor==t.st.constructor&&(e=e[e.length-1]),e.node.nextSibling?e.node.parentNode.insertBefore(this.node,e.node.nextSibling):e.node.parentNode.appendChild(this.node),t._insertafter(this,e,this.paper);return this},I.insertBefore=function(e){if(this.removed)return this;e.constructor==t.st.constructor&&(e=e[0]),e.node.parentNode.insertBefore(this.node,e.node),t._insertbefore(this,e,this.paper);return this},I.blur=function(e){var i=this.node.runtimeStyle,n=i.filter;n=n.replace(v,p),+e!==0?(this.attrs.blur=e,i.filter=n+f+d+".Blur(pixelradius="+(+e||1.5)+")",i.margin=t.format("-{0}px 0 0 -{0}px",r(+e||1.5))):(i.filter=n,i.margin=0,delete this.attrs.blur)},t._engine.path=function(t,e){var i=E("shape");i.style.cssText=b,i.coordsize=w+f+w,i.coordorigin=e.coordorigin;var n=new P(i,e),s={fill:"none",stroke:"#000"};t&&(s.path=t),n.type="path",n.path=[],n.Path=p,D(n,s),e.canvas.appendChild(i);var r=E("skew");r.on=!0,i.appendChild(r),n.skew=r,n.transform(p);return n},t._engine.rect=function(e,i,n,s,r,o){var a=t._rectPath(i,n,s,r,o),l=e.path(a),h=l.attrs;l.X=h.x=i,l.Y=h.y=n,l.W=h.width=s,l.H=h.height=r,h.r=o,h.path=a,l.type="rect";return l},t._engine.ellipse=function(t,e,i,n,s){var r=t.path(),o=r.attrs;r.X=e-n,r.Y=i-s,r.W=n*2,r.H=s*2,r.type="ellipse",D(r,{cx:e,cy:i,rx:n,ry:s});return r},t._engine.circle=function(t,e,i,n){var s=t.path(),r=s.attrs;s.X=e-n,s.Y=i-n,s.W=s.H=n*2,s.type="circle",D(s,{cx:e,cy:i,r:n});return s},t._engine.image=function(e,i,n,s,r,o){var a=t._rectPath(n,s,r,o),l=e.path(a).attr({stroke:"none"}),c=l.attrs,u=l.node,d=u.getElementsByTagName(h)[0];c.src=i,l.X=c.x=n,l.Y=c.y=s,l.W=c.width=r,l.H=c.height=o,c.path=a,l.type="image",d.parentNode==u&&u.removeChild(d),d.rotate=!0,d.src=i,d.type="tile",l._.fillpos=[n,s],l._.fillsize=[r,o],u.appendChild(d),S(l,1,1,0,0,0);return l},t._engine.text=function(e,n,s,o){var a=E("shape"),l=E("path"),h=E("textpath");n=n||0,s=s||0,o=o||"",l.v=t.format("m{0},{1}l{2},{1}",r(n*w),r(s*w),r(n*w)+1),l.textpathok=!0,h.string=i(o),h.on=!0,a.style.cssText=b,a.coordsize=w+f+w,a.coordorigin="0 0";var c=new P(a,e),u={fill:"#000",stroke:"none",font:t._availableAttrs.font,text:o};c.shape=a,c.path=l,c.textpath=h,c.type="text",c.attrs.text=i(o),c.attrs.x=n,c.attrs.y=s,c.attrs.w=1,c.attrs.h=1,D(c,u),a.appendChild(h),a.appendChild(l),e.canvas.appendChild(a);var d=E("skew");d.on=!0,a.appendChild(d),c.skew=d,c.transform(p);return c},t._engine.setSize=function(e,i){var n=this.canvas.style;this.width=e,this.height=i,e==+e&&(e+="px"),i==+i&&(i+="px"),n.width=e,n.height=i,n.clip="rect(0 "+e+" "+i+" 0)",this._viewBox&&t._engine.setViewBox.apply(this,this._viewBox);return this},t._engine.setViewBox=function(e,i,n,s,r){t.eve("raphael.setViewBox",this,this._viewBox,[e,i,n,s,r]);var a=this.width,l=this.height,h=1/o(n/a,s/l),c,u;r&&(c=l/s,u=a/n,n*c<a&&(e-=(a-n*c)/2/c),s*u<l&&(i-=(l-s*u)/2/u)),this._viewBox=[e,i,n,s,!!r],this._viewBoxShift={dx:-e,dy:-i,scale:h},this.forEach(function(t){t.transform("...")});return this};var E;t._engine.initWin=function(t){var e=t.document;e.createStyleSheet().addRule(".rvml","behavior:url(#default#VML)");try{!e.namespaces.rvml&&e.namespaces.add("rvml","urn:schemas-microsoft-com:vml"),E=function(t){return e.createElement("<rvml:"+t+' class="rvml">')}}catch(t){E=function(t){return e.createElement("<"+t+' xmlns="urn:schemas-microsoft.com:vml" class="rvml">')}}},t._engine.initWin(t._g.win),t._engine.create=function(){var e=t._getContainer.apply(0,arguments),i=e.container,n=e.height,s,r=e.width,o=e.x,a=e.y;if(!i)throw new Error("VML container not found.");var l=new t._Paper,h=l.canvas=t._g.doc.createElement("div"),c=h.style;o=o||0,a=a||0,r=r||512,n=n||342,l.width=r,l.height=n,r==+r&&(r+="px"),n==+n&&(n+="px"),l.coordsize=w*1e3+f+w*1e3,l.coordorigin="0 0",l.span=t._g.doc.createElement("span"),l.span.style.cssText="position:absolute;left:-9999em;top:-9999em;padding:0;margin:0;line-height:1;",h.appendChild(l.span),c.cssText=t.format("top:0;left:0;width:{0};height:{1};display:inline-block;position:relative;clip:rect(0 {0} {1} 0);overflow:hidden",r,n),i==1?(t._g.doc.body.appendChild(h),c.left=o+"px",c.top=a+"px",c.position="absolute"):i.firstChild?i.insertBefore(h,i.firstChild):i.appendChild(h),l.renderfix=function(){};return l},t.prototype.clear=function(){t.eve("raphael.clear",this),this.canvas.innerHTML=p,this.span=t._g.doc.createElement("span"),this.span.style.cssText="position:absolute;left:-9999em;top:-9999em;padding:0;margin:0;line-height:1;display:inline;",this.canvas.appendChild(this.span),this.bottom=this.top=null},t.prototype.remove=function(){t.eve("raphael.remove",this),this.canvas.parentNode.removeChild(this.canvas);for(var e in this)this[e]=typeof this[e]=="function"?t._removedFactory(e):null;return!0};var $=t.st;for(var F in I)I[e](F)&&!$[e](F)&&($[F]=function(t){return function(){var e=arguments;return this.forEach(function(i){i[t].apply(i,e)})}}(F))}(window.Raphael);(function(){var t,e,i,n,s=[].slice,r=function(t,e){return function(){return t.apply(e,arguments)}},o={}.hasOwnProperty,a=function(t,e){for(var i in e){if(o.call(e,i))t[i]=e[i]}function n(){this.constructor=t}n.prototype=e.prototype;t.prototype=new n;t.__super__=e.prototype;return t},l=[].indexOf||function(t){for(var e=0,i=this.length;e<i;e++){if(e in this&&this[e]===t)return e}return-1};e=window.Morris={};t=jQuery;e.EventEmitter=function(){function t(){}t.prototype.on=function(t,e){if(this.handlers==null){this.handlers={}}if(this.handlers[t]==null){this.handlers[t]=[]}this.handlers[t].push(e);return this};t.prototype.fire=function(){var t,e,i,n,r,o,a;i=arguments[0],t=2<=arguments.length?s.call(arguments,1):[];if(this.handlers!=null&&this.handlers[i]!=null){o=this.handlers[i];a=[];for(n=0,r=o.length;n<r;n++){e=o[n];a.push(e.apply(null,t))}return a}};return t}();e.commas=function(t){var e,i,n,s;if(t!=null){n=t<0?"-":"";e=Math.abs(t);i=Math.floor(e).toFixed(0);n+=i.replace(/(?=(?:\d{3})+$)(?!^)/g,",");s=e.toString();if(s.length>i.length){n+=s.slice(i.length)}return n}else{return"-"}};e.pad2=function(t){return(t<10?"0":"")+t};e.Grid=function(i){a(n,i);function n(e){this.resizeHandler=r(this.resizeHandler,this);var i=this;if(typeof e.element==="string"){this.el=t(document.getElementById(e.element))}else{this.el=t(e.element)}if(this.el==null||this.el.length===0){throw new Error("Graph container element not found")}if(this.el.css("position")==="static"){this.el.css("position","relative")}this.options=t.extend({},this.gridDefaults,this.defaults||{},e);if(typeof this.options.units==="string"){this.options.postUnits=e.units}this.raphael=new Raphael(this.el[0]);this.elementWidth=null;this.elementHeight=null;this.dirty=false;this.selectFrom=null;if(this.init){this.init()}this.setData(this.options.data);this.el.bind("mousemove",function(t){var e,n,s,r,o;n=i.el.offset();o=t.pageX-n.left;if(i.selectFrom){e=i.data[i.hitTest(Math.min(o,i.selectFrom))]._x;s=i.data[i.hitTest(Math.max(o,i.selectFrom))]._x;r=s-e;return i.selectionRect.attr({x:e,width:r})}else{return i.fire("hovermove",o,t.pageY-n.top)}});this.el.bind("mouseleave",function(t){if(i.selectFrom){i.selectionRect.hide();i.selectFrom=null}return i.fire("hoverout")});this.el.bind("touchstart touchmove touchend",function(t){var e,n;n=t.originalEvent.touches[0]||t.originalEvent.changedTouches[0];e=i.el.offset();return i.fire("hovermove",n.pageX-e.left,n.pageY-e.top)});this.el.bind("click",function(t){var e;e=i.el.offset();return i.fire("gridclick",t.pageX-e.left,t.pageY-e.top)});if(this.options.rangeSelect){this.selectionRect=this.raphael.rect(0,0,0,this.el.innerHeight()).attr({fill:this.options.rangeSelectColor,stroke:false}).toBack().hide();this.el.bind("mousedown",function(t){var e;e=i.el.offset();return i.startRange(t.pageX-e.left)});this.el.bind("mouseup",function(t){var e;e=i.el.offset();i.endRange(t.pageX-e.left);return i.fire("hovermove",t.pageX-e.left,t.pageY-e.top)})}if(this.options.resize){t(window).bind("resize",function(t){if(i.timeoutId!=null){window.clearTimeout(i.timeoutId)}return i.timeoutId=window.setTimeout(i.resizeHandler,100)})}this.el.css("-webkit-tap-highlight-color","rgba(0,0,0,0)");if(this.postInit){this.postInit()}}n.prototype.gridDefaults={dateFormat:null,axes:true,grid:true,gridLineColor:"#aaa",gridStrokeWidth:.5,gridTextColor:"#888",gridTextSize:12,gridTextFamily:"sans-serif",gridTextWeight:"normal",hideHover:false,yLabelFormat:null,xLabelAngle:0,numLines:5,padding:25,parseTime:true,postUnits:"",preUnits:"",ymax:"auto",ymin:"auto 0",goals:[],goalStrokeWidth:1,goalLineColors:["#666633","#999966","#cc6666","#663333"],events:[],eventStrokeWidth:1,eventLineColors:["#005a04","#ccffbb","#3a5f0b","#005502"],rangeSelect:null,rangeSelectColor:"#eef",resize:false};n.prototype.setData=function(t,i){var n,s,r,o,a,l,h,c,u,d,f,p,m,g,v;if(i==null){i=true}this.options.data=t;if(t==null||t.length===0){this.data=[];this.raphael.clear();if(this.hover!=null){this.hover.hide()}return}p=this.cumulative?0:null;m=this.cumulative?0:null;if(this.options.goals.length>0){a=Math.min.apply(Math,this.options.goals);o=Math.max.apply(Math,this.options.goals);m=m!=null?Math.min(m,a):a;p=p!=null?Math.max(p,o):o}this.data=function(){var i,n,o;o=[];for(r=i=0,n=t.length;i<n;r=++i){h=t[r];l={src:h};l.label=h[this.options.xkey];if(this.options.parseTime){l.x=e.parseDate(l.label);if(this.options.dateFormat){l.label=this.options.dateFormat(l.x)}else if(typeof l.label==="number"){l.label=new Date(l.label).toString()}}else{l.x=r;if(this.options.xLabelFormat){l.label=this.options.xLabelFormat(l)}}u=0;l.y=function(){var t,e,i,n;i=this.options.ykeys;n=[];for(s=t=0,e=i.length;t<e;s=++t){f=i[s];g=h[f];if(typeof g==="string"){g=parseFloat(g)}if(g!=null&&typeof g!=="number"){g=null}if(g!=null){if(this.cumulative){u+=g}else{if(p!=null){p=Math.max(g,p);m=Math.min(g,m)}else{p=m=g}}}if(this.cumulative&&u!=null){p=Math.max(u,p);m=Math.min(u,m)}n.push(g)}return n}.call(this);o.push(l)}return o}.call(this);if(this.options.parseTime){this.data=this.data.sort(function(t,e){return(t.x>e.x)-(e.x>t.x)})}this.xmin=this.data[0].x;this.xmax=this.data[this.data.length-1].x;this.events=[];if(this.options.events.length>0){if(this.options.parseTime){this.events=function(){var t,i,s,r;s=this.options.events;r=[];for(t=0,i=s.length;t<i;t++){n=s[t];r.push(e.parseDate(n))}return r}.call(this)}else{this.events=this.options.events}this.xmax=Math.max(this.xmax,Math.max.apply(Math,this.events));this.xmin=Math.min(this.xmin,Math.min.apply(Math,this.events))}if(this.xmin===this.xmax){this.xmin-=1;this.xmax+=1}this.ymin=this.yboundary("min",m);this.ymax=this.yboundary("max",p);if(this.ymin===this.ymax){if(m){this.ymin-=1}this.ymax+=1}if((v=this.options.axes)===true||v==="both"||v==="y"||this.options.grid===true){if(this.options.ymax===this.gridDefaults.ymax&&this.options.ymin===this.gridDefaults.ymin){this.grid=this.autoGridLines(this.ymin,this.ymax,this.options.numLines);this.ymin=Math.min(this.ymin,this.grid[0]);this.ymax=Math.max(this.ymax,this.grid[this.grid.length-1])}else{c=(this.ymax-this.ymin)/(this.options.numLines-1);this.grid=function(){var t,e,i,n;n=[];for(d=t=e=this.ymin,i=this.ymax;c>0?t<=i:t>=i;d=t+=c){n.push(d)}return n}.call(this)}}this.dirty=true;if(i){return this.redraw()}};n.prototype.yboundary=function(t,e){var i,n;i=this.options["y"+t];if(typeof i==="string"){if(i.slice(0,4)==="auto"){if(i.length>5){n=parseInt(i.slice(5),10);if(e==null){return n}return Math[t](e,n)}else{if(e!=null){return e}else{return 0}}}else{return parseInt(i,10)}}else{return i}};n.prototype.autoGridLines=function(t,e,i){var n,s,r,o,a,l,h,c,u;a=e-t;u=Math.floor(Math.log(a)/Math.log(10));h=Math.pow(10,u);s=Math.floor(t/h)*h;n=Math.ceil(e/h)*h;l=(n-s)/(i-1);if(h===1&&l>1&&Math.ceil(l)!==l){l=Math.ceil(l);n=s+l*(i-1)}if(s<0&&n>0){s=Math.floor(t/l)*l;n=Math.ceil(e/l)*l}if(l<1){o=Math.floor(Math.log(l)/Math.log(10));r=function(){var t,e;e=[];for(c=t=s;l>0?t<=n:t>=n;c=t+=l){e.push(parseFloat(c.toFixed(1-o)))}return e}()}else{r=function(){var t,e;e=[];for(c=t=s;l>0?t<=n:t>=n;c=t+=l){e.push(c)}return e}()}return r};n.prototype._calc=function(){var t,e,i,n,s,r,o,a;s=this.el.width();i=this.el.height();if(this.elementWidth!==s||this.elementHeight!==i||this.dirty){this.elementWidth=s;this.elementHeight=i;this.dirty=false;this.left=this.options.padding;this.right=this.elementWidth-this.options.padding;this.top=this.options.padding;this.bottom=this.elementHeight-this.options.padding;if((o=this.options.axes)===true||o==="both"||o==="y"){r=function(){var t,i,n,s;n=this.grid;s=[];for(t=0,i=n.length;t<i;t++){e=n[t];s.push(this.measureText(this.yAxisFormat(e)).width)}return s}.call(this);this.left+=Math.max.apply(Math,r)}if((a=this.options.axes)===true||a==="both"||a==="x"){t=function(){var t,e,i;i=[];for(n=t=0,e=this.data.length;0<=e?t<e:t>e;n=0<=e?++t:--t){i.push(this.measureText(this.data[n].text,-this.options.xLabelAngle).height)}return i}.call(this);this.bottom-=Math.max.apply(Math,t)}this.width=Math.max(1,this.right-this.left);this.height=Math.max(1,this.bottom-this.top);this.dx=this.width/(this.xmax-this.xmin);this.dy=this.height/(this.ymax-this.ymin);if(this.calc){return this.calc()}}};n.prototype.transY=function(t){return this.bottom-(t-this.ymin)*this.dy};n.prototype.transX=function(t){if(this.data.length===1){return(this.left+this.right)/2}else{return this.left+(t-this.xmin)*this.dx}};n.prototype.redraw=function(){this.raphael.clear();this._calc();this.drawGrid();this.drawGoals();this.drawEvents();if(this.draw){return this.draw()}};n.prototype.measureText=function(t,e){var i,n;if(e==null){e=0}n=this.raphael.text(100,100,t).attr("font-size",this.options.gridTextSize).attr("font-family",this.options.gridTextFamily).attr("font-weight",this.options.gridTextWeight).rotate(e);i=n.getBBox();n.remove();return i};n.prototype.yAxisFormat=function(t){return this.yLabelFormat(t)};n.prototype.yLabelFormat=function(t){if(typeof this.options.yLabelFormat==="function"){return this.options.yLabelFormat(t)}else{return""+this.options.preUnits+e.commas(t)+this.options.postUnits}};n.prototype.drawGrid=function(){var t,e,i,n,s,r,o,a;if(this.options.grid===false&&((s=this.options.axes)!==true&&s!=="both"&&s!=="y")){return}r=this.grid;a=[];for(i=0,n=r.length;i<n;i++){t=r[i];e=this.transY(t);if((o=this.options.axes)===true||o==="both"||o==="y"){this.drawYAxisLabel(this.left-this.options.padding/2,e,this.yAxisFormat(t))}if(this.options.grid){a.push(this.drawGridLine("M"+this.left+","+e+"H"+(this.left+this.width)))}else{a.push(void 0)}}return a};n.prototype.drawGoals=function(){var t,e,i,n,s,r,o;r=this.options.goals;o=[];for(i=n=0,s=r.length;n<s;i=++n){e=r[i];t=this.options.goalLineColors[i%this.options.goalLineColors.length];o.push(this.drawGoal(e,t))}return o};n.prototype.drawEvents=function(){var t,e,i,n,s,r,o;r=this.events;o=[];for(i=n=0,s=r.length;n<s;i=++n){e=r[i];t=this.options.eventLineColors[i%this.options.eventLineColors.length];o.push(this.drawEvent(e,t))}return o};n.prototype.drawGoal=function(t,e){return this.raphael.path("M"+this.left+","+this.transY(t)+"H"+this.right).attr("stroke",e).attr("stroke-width",this.options.goalStrokeWidth)};n.prototype.drawEvent=function(t,e){return this.raphael.path("M"+this.transX(t)+","+this.bottom+"V"+this.top).attr("stroke",e).attr("stroke-width",this.options.eventStrokeWidth)};n.prototype.drawYAxisLabel=function(t,e,i){return this.raphael.text(t,e,i).attr("font-size",this.options.gridTextSize).attr("font-family",this.options.gridTextFamily).attr("font-weight",this.options.gridTextWeight).attr("fill",this.options.gridTextColor).attr("text-anchor","end")};n.prototype.drawGridLine=function(t){return this.raphael.path(t).attr("stroke",this.options.gridLineColor).attr("stroke-width",this.options.gridStrokeWidth)};n.prototype.startRange=function(t){this.hover.hide();this.selectFrom=t;return this.selectionRect.attr({x:t,width:0}).show()};n.prototype.endRange=function(t){var e,i;if(this.selectFrom){i=Math.min(this.selectFrom,t);e=Math.max(this.selectFrom,t);this.options.rangeSelect.call(this.el,{start:this.data[this.hitTest(i)].x,end:this.data[this.hitTest(e)].x});return this.selectFrom=null}};n.prototype.resizeHandler=function(){this.timeoutId=null;this.raphael.setSize(this.el.width(),this.el.height());return this.redraw()};return n}(e.EventEmitter);e.parseDate=function(t){var e,i,n,s,r,o,a,l,h,c,u;if(typeof t==="number"){return t}i=t.match(/^(\d+) Q(\d)$/);s=t.match(/^(\d+)-(\d+)$/);r=t.match(/^(\d+)-(\d+)-(\d+)$/);a=t.match(/^(\d+) W(\d+)$/);l=t.match(/^(\d+)-(\d+)-(\d+)[ T](\d+):(\d+)(Z|([+-])(\d\d):?(\d\d))?$/);h=t.match(/^(\d+)-(\d+)-(\d+)[ T](\d+):(\d+):(\d+(\.\d+)?)(Z|([+-])(\d\d):?(\d\d))?$/);if(i){return new Date(parseInt(i[1],10),parseInt(i[2],10)*3-1,1).getTime()}else if(s){return new Date(parseInt(s[1],10),parseInt(s[2],10)-1,1).getTime()}else if(r){return new Date(parseInt(r[1],10),parseInt(r[2],10)-1,parseInt(r[3],10)).getTime()}else if(a){c=new Date(parseInt(a[1],10),0,1);if(c.getDay()!==4){c.setMonth(0,1+(4-c.getDay()+7)%7)}return c.getTime()+parseInt(a[2],10)*6048e5}else if(l){if(!l[6]){return new Date(parseInt(l[1],10),parseInt(l[2],10)-1,parseInt(l[3],10),parseInt(l[4],10),parseInt(l[5],10)).getTime()}else{o=0;if(l[6]!=="Z"){o=parseInt(l[8],10)*60+parseInt(l[9],10);if(l[7]==="+"){o=0-o}}return Date.UTC(parseInt(l[1],10),parseInt(l[2],10)-1,parseInt(l[3],10),parseInt(l[4],10),parseInt(l[5],10)+o)}}else if(h){u=parseFloat(h[6]);e=Math.floor(u);n=Math.round((u-e)*1e3);if(!h[8]){return new Date(parseInt(h[1],10),parseInt(h[2],10)-1,parseInt(h[3],10),parseInt(h[4],10),parseInt(h[5],10),e,n).getTime()}else{o=0;if(h[8]!=="Z"){o=parseInt(h[10],10)*60+parseInt(h[11],10);if(h[9]==="+"){o=0-o}}return Date.UTC(parseInt(h[1],10),parseInt(h[2],10)-1,parseInt(h[3],10),parseInt(h[4],10),parseInt(h[5],10)+o,e,n)}}else{return new Date(parseInt(t,10),0,1).getTime()}};e.Hover=function(){i.defaults={class:"morris-hover morris-default-style"};function i(i){if(i==null){i={}}this.options=t.extend({},e.Hover.defaults,i);this.el=t("<div class='"+this.options["class"]+"'></div>");this.el.hide();this.options.parent.append(this.el)}i.prototype.update=function(t,e,i){if(!t){return this.hide()}else{this.html(t);this.show();return this.moveTo(e,i)}};i.prototype.html=function(t){return this.el.html(t)};i.prototype.moveTo=function(t,e){var i,n,s,r,o,a;o=this.options.parent.innerWidth();r=this.options.parent.innerHeight();n=this.el.outerWidth();i=this.el.outerHeight();s=Math.min(Math.max(0,t-n/2),o-n);if(e!=null){a=e-i-10;if(a<0){a=e+10;if(a+i>r){a=r/2-i/2}}}else{a=r/2-i/2}return this.el.css({left:s+"px",top:parseInt(a)+"px"})};i.prototype.show=function(){return this.el.show()};i.prototype.hide=function(){return this.el.hide()};return i}();e.Line=function(t){a(i,t);function i(t){this.hilight=r(this.hilight,this);this.onHoverOut=r(this.onHoverOut,this);this.onHoverMove=r(this.onHoverMove,this);this.onGridClick=r(this.onGridClick,this);if(!(this instanceof e.Line)){return new e.Line(t)}i.__super__.constructor.call(this,t)}i.prototype.init=function(){if(this.options.hideHover!=="always"){this.hover=new e.Hover({parent:this.el});this.on("hovermove",this.onHoverMove);this.on("hoverout",this.onHoverOut);return this.on("gridclick",this.onGridClick)}};i.prototype.defaults={lineWidth:3,pointSize:4,lineColors:["#0b62a4","#7A92A3","#4da74d","#afd8f8","#edc240","#cb4b4b","#9440ed"],pointStrokeWidths:[1],pointStrokeColors:["#ffffff"],pointFillColors:[],smooth:true,xLabels:"auto",xLabelFormat:null,xLabelMargin:24,hideHover:false};i.prototype.calc=function(){this.calcPoints();return this.generatePaths()};i.prototype.calcPoints=function(){var t,e,i,n,s,r;s=this.data;r=[];for(i=0,n=s.length;i<n;i++){t=s[i];t._x=this.transX(t.x);t._y=function(){var i,n,s,r;s=t.y;r=[];for(i=0,n=s.length;i<n;i++){e=s[i];if(e!=null){r.push(this.transY(e))}else{r.push(e)}}return r}.call(this);r.push(t._ymax=Math.min.apply(Math,[this.bottom].concat(function(){var i,n,s,r;s=t._y;r=[];for(i=0,n=s.length;i<n;i++){e=s[i];if(e!=null){r.push(e)}}return r}())))}return r};i.prototype.hitTest=function(t){var e,i,n,s,r;if(this.data.length===0){return null}r=this.data.slice(1);for(e=n=0,s=r.length;n<s;e=++n){i=r[e];if(t<(i._x+this.data[e]._x)/2){break}}return e};i.prototype.onGridClick=function(t,e){var i;i=this.hitTest(t);return this.fire("click",i,this.data[i].src,t,e)};i.prototype.onHoverMove=function(t,e){var i;i=this.hitTest(t);return this.displayHoverForRow(i)};i.prototype.onHoverOut=function(){if(this.options.hideHover!==false){return this.displayHoverForRow(null)}};i.prototype.displayHoverForRow=function(t){var e;if(t!=null){(e=this.hover).update.apply(e,this.hoverContentForRow(t));return this.hilight(t)}else{this.hover.hide();return this.hilight()}};i.prototype.hoverContentForRow=function(t){var e,i,n,s,r,o,a;n=this.data[t];e="<div class='morris-hover-row-label'>"+n.label+"</div>";a=n.y;for(i=r=0,o=a.length;r<o;i=++r){s=a[i];e+="<div class='morris-hover-point' style='color: "+this.colorFor(n,i,"label")+"'>\n  "+this.options.labels[i]+":\n  "+this.yLabelFormat(s)+"\n</div>"}if(typeof this.options.hoverCallback==="function"){e=this.options.hoverCallback(t,this.options,e,n.src)}return[e,n._x,n._ymax]};i.prototype.generatePaths=function(){var t,i,n,s;return this.paths=function(){var r,o,a,h;h=[];for(i=r=0,o=this.options.ykeys.length;0<=o?r<o:r>o;i=0<=o?++r:--r){s=typeof this.options.smooth==="boolean"?this.options.smooth:(a=this.options.ykeys[i],l.call(this.options.smooth,a)>=0);t=function(){var t,e,s,r;s=this.data;r=[];for(t=0,e=s.length;t<e;t++){n=s[t];if(n._y[i]!==void 0){r.push({x:n._x,y:n._y[i]})}}return r}.call(this);if(t.length>1){h.push(e.Line.createPath(t,s,this.bottom))}else{h.push(null)}}return h}.call(this)};i.prototype.draw=function(){var t;if((t=this.options.axes)===true||t==="both"||t==="x"){this.drawXAxis()}this.drawSeries();if(this.options.hideHover===false){return this.displayHoverForRow(this.data.length-1)}};i.prototype.drawXAxis=function(){var t,i,n,s,r,o,a,l,h,c,u=this;a=this.bottom+this.options.padding/2;r=null;s=null;t=function(t,e){var i,n,o,l,h;i=u.drawXAxisLabel(u.transX(e),a,t);h=i.getBBox();i.transform("r"+-u.options.xLabelAngle);n=i.getBBox();i.transform("t0,"+n.height/2+"...");if(u.options.xLabelAngle!==0){l=-.5*h.width*Math.cos(u.options.xLabelAngle*Math.PI/180);i.transform("t"+l+",0...")}n=i.getBBox();if((r==null||r>=n.x+n.width||s!=null&&s>=n.x)&&n.x>=0&&n.x+n.width<u.el.width()){if(u.options.xLabelAngle!==0){o=1.25*u.options.gridTextSize/Math.sin(u.options.xLabelAngle*Math.PI/180);s=n.x-o}return r=n.x-u.options.xLabelMargin}else{return i.remove()}};if(this.options.parseTime){if(this.data.length===1&&this.options.xLabels==="auto"){n=[[this.data[0].label,this.data[0].x]]}else{n=e.labelSeries(this.xmin,this.xmax,this.width,this.options.xLabels,this.options.xLabelFormat)}}else{n=function(){var t,e,i,n;i=this.data;n=[];for(t=0,e=i.length;t<e;t++){o=i[t];n.push([o.label,o.x])}return n}.call(this)}n.reverse();c=[];for(l=0,h=n.length;l<h;l++){i=n[l];c.push(t(i[0],i[1]))}return c};i.prototype.drawSeries=function(){var t,e,i,n,s,r;this.seriesPoints=[];for(t=e=n=this.options.ykeys.length-1;n<=0?e<=0:e>=0;t=n<=0?++e:--e){this._drawLineFor(t)}r=[];for(t=i=s=this.options.ykeys.length-1;s<=0?i<=0:i>=0;t=s<=0?++i:--i){r.push(this._drawPointFor(t))}return r};i.prototype._drawPointFor=function(t){var e,i,n,s,r,o;this.seriesPoints[t]=[];r=this.data;o=[];for(n=0,s=r.length;n<s;n++){i=r[n];e=null;if(i._y[t]!=null){e=this.drawLinePoint(i._x,i._y[t],this.colorFor(i,t,"point"),t)}o.push(this.seriesPoints[t].push(e))}return o};i.prototype._drawLineFor=function(t){var e;e=this.paths[t];if(e!==null){return this.drawLinePath(e,this.colorFor(null,t,"line"),t)}};i.createPath=function(t,i,n){var s,r,o,a,l,h,c,u,d,f,p,m,g,v;c="";if(i){o=e.Line.gradients(t)}u={y:null};for(a=g=0,v=t.length;g<v;a=++g){s=t[a];if(s.y!=null){if(u.y!=null){if(i){r=o[a];h=o[a-1];l=(s.x-u.x)/4;d=u.x+l;p=Math.min(n,u.y+l*h);f=s.x-l;m=Math.min(n,s.y-l*r);c+="C"+d+","+p+","+f+","+m+","+s.x+","+s.y}else{c+="L"+s.x+","+s.y}}else{if(!i||o[a]!=null){c+="M"+s.x+","+s.y}}}u=s}return c};i.gradients=function(t){var e,i,n,s,r,o,a,l;i=function(t,e){return(t.y-e.y)/(t.x-e.x)};l=[];for(n=o=0,a=t.length;o<a;n=++o){e=t[n];if(e.y!=null){s=t[n+1]||{y:null};r=t[n-1]||{y:null};if(r.y!=null&&s.y!=null){l.push(i(r,s))}else if(r.y!=null){l.push(i(r,e))}else if(s.y!=null){l.push(i(e,s))}else{l.push(null)}}else{l.push(null)}}return l};i.prototype.hilight=function(t){var e,i,n,s,r;if(this.prevHilight!==null&&this.prevHilight!==t){for(e=i=0,s=this.seriesPoints.length-1;0<=s?i<=s:i>=s;e=0<=s?++i:--i){if(this.seriesPoints[e][this.prevHilight]){this.seriesPoints[e][this.prevHilight].animate(this.pointShrinkSeries(e))}}}if(t!==null&&this.prevHilight!==t){for(e=n=0,r=this.seriesPoints.length-1;0<=r?n<=r:n>=r;e=0<=r?++n:--n){if(this.seriesPoints[e][t]){this.seriesPoints[e][t].animate(this.pointGrowSeries(e))}}}return this.prevHilight=t};i.prototype.colorFor=function(t,e,i){if(typeof this.options.lineColors==="function"){return this.options.lineColors.call(this,t,e,i)}else if(i==="point"){return this.options.pointFillColors[e%this.options.pointFillColors.length]||this.options.lineColors[e%this.options.lineColors.length]}else{return this.options.lineColors[e%this.options.lineColors.length]}};i.prototype.drawXAxisLabel=function(t,e,i){return this.raphael.text(t,e,i).attr("font-size",this.options.gridTextSize).attr("font-family",this.options.gridTextFamily).attr("font-weight",this.options.gridTextWeight).attr("fill",this.options.gridTextColor)};i.prototype.drawLinePath=function(t,e,i){return this.raphael.path(t).attr("stroke",e).attr("stroke-width",this.lineWidthForSeries(i))};i.prototype.drawLinePoint=function(t,e,i,n){return this.raphael.circle(t,e,this.pointSizeForSeries(n)).attr("fill",i).attr("stroke-width",this.pointStrokeWidthForSeries(n)).attr("stroke",this.pointStrokeColorForSeries(n))};i.prototype.pointStrokeWidthForSeries=function(t){return this.options.pointStrokeWidths[t%this.options.pointStrokeWidths.length]};i.prototype.pointStrokeColorForSeries=function(t){return this.options.pointStrokeColors[t%this.options.pointStrokeColors.length]};i.prototype.lineWidthForSeries=function(t){if(this.options.lineWidth instanceof Array){return this.options.lineWidth[t%this.options.lineWidth.length]}else{return this.options.lineWidth}};i.prototype.pointSizeForSeries=function(t){if(this.options.pointSize instanceof Array){return this.options.pointSize[t%this.options.pointSize.length]}else{return this.options.pointSize}};i.prototype.pointGrowSeries=function(t){return Raphael.animation({r:this.pointSizeForSeries(t)+3},25,"linear")};i.prototype.pointShrinkSeries=function(t){return Raphael.animation({r:this.pointSizeForSeries(t)},25,"linear")};return i}(e.Grid);e.labelSeries=function(i,n,s,r,o){var a,l,h,c,u,d,f,p,m,g,v;h=200*(n-i)/s;l=new Date(i);f=e.LABEL_SPECS[r];if(f===void 0){v=e.AUTO_LABEL_ORDER;for(m=0,g=v.length;m<g;m++){c=v[m];d=e.LABEL_SPECS[c];if(h>=d.span){f=d;break}}}if(f===void 0){f=e.LABEL_SPECS["second"]}if(o){f=t.extend({},f,{fmt:o})}a=f.start(l);u=[];while((p=a.getTime())<=n){if(p>=i){u.push([f.fmt(a),p])}f.incr(a)}return u};i=function(t){return{span:t*60*1e3,start:function(t){return new Date(t.getFullYear(),t.getMonth(),t.getDate(),t.getHours())},fmt:function(t){return""+e.pad2(t.getHours())+":"+e.pad2(t.getMinutes())},incr:function(e){return e.setUTCMinutes(e.getUTCMinutes()+t)}}};n=function(t){return{span:t*1e3,start:function(t){return new Date(t.getFullYear(),t.getMonth(),t.getDate(),t.getHours(),t.getMinutes())},fmt:function(t){return""+e.pad2(t.getHours())+":"+e.pad2(t.getMinutes())+":"+e.pad2(t.getSeconds())},incr:function(e){return e.setUTCSeconds(e.getUTCSeconds()+t)}}};e.LABEL_SPECS={decade:{span:1728e8,start:function(t){return new Date(t.getFullYear()-t.getFullYear()%10,0,1)},fmt:function(t){return""+t.getFullYear()},incr:function(t){return t.setFullYear(t.getFullYear()+10)}},year:{span:1728e7,start:function(t){return new Date(t.getFullYear(),0,1)},fmt:function(t){return""+t.getFullYear()},incr:function(t){return t.setFullYear(t.getFullYear()+1)}},month:{span:24192e5,start:function(t){return new Date(t.getFullYear(),t.getMonth(),1)},fmt:function(t){return""+t.getFullYear()+"-"+e.pad2(t.getMonth()+1)},incr:function(t){return t.setMonth(t.getMonth()+1)}},week:{span:6048e5,start:function(t){return new Date(t.getFullYear(),t.getMonth(),t.getDate())},fmt:function(t){return""+t.getFullYear()+"-"+e.pad2(t.getMonth()+1)+"-"+e.pad2(t.getDate())},incr:function(t){return t.setDate(t.getDate()+7)}},day:{span:864e5,start:function(t){return new Date(t.getFullYear(),t.getMonth(),t.getDate())},fmt:function(t){return""+t.getFullYear()+"-"+e.pad2(t.getMonth()+1)+"-"+e.pad2(t.getDate())},incr:function(t){return t.setDate(t.getDate()+1)}},hour:i(60),"30min":i(30),"15min":i(15),"10min":i(10),"5min":i(5),minute:i(1),"30sec":n(30),"15sec":n(15),"10sec":n(10),"5sec":n(5),second:n(1)};e.AUTO_LABEL_ORDER=["decade","year","month","week","day","hour","30min","15min","10min","5min","minute","30sec","15sec","10sec","5sec","second"];e.Area=function(i){var n;a(s,i);n={fillOpacity:"auto",behaveLikeLine:false};function s(i){var r;if(!(this instanceof e.Area)){return new e.Area(i)}r=t.extend({},n,i);this.cumulative=!r.behaveLikeLine;if(r.fillOpacity==="auto"){r.fillOpacity=r.behaveLikeLine?.8:1}s.__super__.constructor.call(this,r)}s.prototype.calcPoints=function(){var t,e,i,n,s,r,o;r=this.data;o=[];for(n=0,s=r.length;n<s;n++){t=r[n];t._x=this.transX(t.x);e=0;t._y=function(){var n,s,r,o;r=t.y;o=[];for(n=0,s=r.length;n<s;n++){i=r[n];if(this.options.behaveLikeLine){o.push(this.transY(i))}else{e+=i||0;o.push(this.transY(e))}}return o}.call(this);o.push(t._ymax=Math.max.apply(Math,t._y))}return o};s.prototype.drawSeries=function(){var t,e,i,n,s,r,o,a,l,h,c;this.seriesPoints=[];if(this.options.behaveLikeLine){e=function(){l=[];for(var t=0,e=this.options.ykeys.length-1;0<=e?t<=e:t>=e;0<=e?t++:t--){l.push(t)}return l}.apply(this)}else{e=function(){h=[];for(var t=a=this.options.ykeys.length-1;a<=0?t<=0:t>=0;a<=0?t++:t--){h.push(t)}return h}.apply(this)}c=[];for(s=0,r=e.length;s<r;s++){t=e[s];this._drawFillFor(t);this._drawLineFor(t);c.push(this._drawPointFor(t))}return c};s.prototype._drawFillFor=function(t){var e;e=this.paths[t];if(e!==null){e=e+("L"+this.transX(this.xmax)+","+this.bottom+"L"+this.transX(this.xmin)+","+this.bottom+"Z");return this.drawFilledPath(e,this.fillForSeries(t))}};s.prototype.fillForSeries=function(t){var e;e=Raphael.rgb2hsl(this.colorFor(this.data[t],t,"line"));return Raphael.hsl(e.h,this.options.behaveLikeLine?e.s*.9:e.s*.75,Math.min(.98,this.options.behaveLikeLine?e.l*1.2:e.l*1.25))};s.prototype.drawFilledPath=function(t,e){return this.raphael.path(t).attr("fill",e).attr("fill-opacity",this.options.fillOpacity).attr("stroke","none")};return s}(e.Line);e.Bar=function(i){a(n,i);function n(i){this.onHoverOut=r(this.onHoverOut,this);this.onHoverMove=r(this.onHoverMove,this);this.onGridClick=r(this.onGridClick,this);if(!(this instanceof e.Bar)){return new e.Bar(i)}n.__super__.constructor.call(this,t.extend({},i,{parseTime:false}))}n.prototype.init=function(){this.cumulative=this.options.stacked;if(this.options.hideHover!=="always"){this.hover=new e.Hover({parent:this.el});this.on("hovermove",this.onHoverMove);this.on("hoverout",this.onHoverOut);return this.on("gridclick",this.onGridClick)}};n.prototype.defaults={barSizeRatio:.75,barGap:3,barColors:["#0b62a4","#7a92a3","#4da74d","#afd8f8","#edc240","#cb4b4b","#9440ed"],barOpacity:1,barRadius:[0,0,0,0],xLabelMargin:50};n.prototype.calc=function(){var t;this.calcBars();if(this.options.hideHover===false){return(t=this.hover).update.apply(t,this.hoverContentForRow(this.data.length-1))}};n.prototype.calcBars=function(){var t,e,i,n,s,r,o;r=this.data;o=[];for(t=n=0,s=r.length;n<s;t=++n){e=r[t];e._x=this.left+this.width*(t+.5)/this.data.length;o.push(e._y=function(){var t,n,s,r;s=e.y;r=[];for(t=0,n=s.length;t<n;t++){i=s[t];if(i!=null){r.push(this.transY(i))}else{r.push(null)}}return r}.call(this))}return o};n.prototype.draw=function(){var t;if((t=this.options.axes)===true||t==="both"||t==="x"){this.drawXAxis()}return this.drawSeries()};n.prototype.drawXAxis=function(){var t,e,i,n,s,r,o,a,l,h,c,u,d;h=this.bottom+(this.options.xAxisLabelTopPadding||this.options.padding/2);o=null;r=null;d=[];for(t=c=0,u=this.data.length;0<=u?c<u:c>u;t=0<=u?++c:--c){a=this.data[this.data.length-1-t];e=this.drawXAxisLabel(a._x,h,a.label);l=e.getBBox();e.transform("r"+-this.options.xLabelAngle);i=e.getBBox();e.transform("t0,"+i.height/2+"...");if(this.options.xLabelAngle!==0){s=-.5*l.width*Math.cos(this.options.xLabelAngle*Math.PI/180);e.transform("t"+s+",0...")}if((o==null||o>=i.x+i.width||r!=null&&r>=i.x)&&i.x>=0&&i.x+i.width<this.el.width()){if(this.options.xLabelAngle!==0){n=1.25*this.options.gridTextSize/Math.sin(this.options.xLabelAngle*Math.PI/180);r=i.x-n}d.push(o=i.x-this.options.xLabelMargin)}else{d.push(e.remove())}}return d};n.prototype.drawSeries=function(){var t,e,i,n,s,r,o,a,l,h,c,u,d,f,p;i=this.width/this.options.data.length;a=this.options.stacked?1:this.options.ykeys.length;t=(i*this.options.barSizeRatio-this.options.barGap*(a-1))/a;if(this.options.barSize){t=Math.min(t,this.options.barSize)}u=i-t*a-this.options.barGap*(a-1);o=u/2;p=this.ymin<=0&&this.ymax>=0?this.transY(0):null;return this.bars=function(){var a,u,m,g;m=this.data;g=[];for(n=a=0,u=m.length;a<u;n=++a){l=m[n];s=0;g.push(function(){var a,u,m,g;m=l._y;g=[];for(h=a=0,u=m.length;a<u;h=++a){f=m[h];if(f!==null){if(p){d=Math.min(f,p);e=Math.max(f,p)}else{d=f;e=this.bottom}r=this.left+n*i+o;if(!this.options.stacked){r+=h*(t+this.options.barGap)}c=e-d;if(this.options.verticalGridCondition&&this.options.verticalGridCondition(l.x)){this.drawBar(this.left+n*i,this.top,i,Math.abs(this.top-this.bottom),this.options.verticalGridColor,this.options.verticalGridOpacity,this.options.barRadius)}if(this.options.stacked){d-=s}this.drawBar(r,d,t,c,this.colorFor(l,h,"bar"),this.options.barOpacity,this.options.barRadius);g.push(s+=c)}else{g.push(null)}}return g}.call(this))}return g}.call(this)};n.prototype.colorFor=function(t,e,i){var n,s;if(typeof this.options.barColors==="function"){n={x:t.x,y:t.y[e],label:t.label};s={index:e,key:this.options.ykeys[e],label:this.options.labels[e]};return this.options.barColors.call(this,n,s,i)}else{return this.options.barColors[e%this.options.barColors.length]}};n.prototype.hitTest=function(t){if(this.data.length===0){return null}t=Math.max(Math.min(t,this.right),this.left);return Math.min(this.data.length-1,Math.floor((t-this.left)/(this.width/this.data.length)))};n.prototype.onGridClick=function(t,e){var i;i=this.hitTest(t);return this.fire("click",i,this.data[i].src,t,e)};n.prototype.onHoverMove=function(t,e){var i,n;i=this.hitTest(t);return(n=this.hover).update.apply(n,this.hoverContentForRow(i))};n.prototype.onHoverOut=function(){if(this.options.hideHover!==false){return this.hover.hide()}};n.prototype.hoverContentForRow=function(t){var e,i,n,s,r,o,a,l;n=this.data[t];e="<div class='morris-hover-row-label'>"+n.label+"</div>";l=n.y;for(i=o=0,a=l.length;o<a;i=++o){r=l[i];e+="<div class='morris-hover-point' style='color: "+this.colorFor(n,i,"label")+"'>\n  "+this.options.labels[i]+":\n  "+this.yLabelFormat(r)+"\n</div>"}if(typeof this.options.hoverCallback==="function"){e=this.options.hoverCallback(t,this.options,e,n.src)}s=this.left+(t+.5)*this.width/this.data.length;return[e,s]};n.prototype.drawXAxisLabel=function(t,e,i){var n;return n=this.raphael.text(t,e,i).attr("font-size",this.options.gridTextSize).attr("font-family",this.options.gridTextFamily).attr("font-weight",this.options.gridTextWeight).attr("fill",this.options.gridTextColor)};n.prototype.drawBar=function(t,e,i,n,s,r,o){var a,l;a=Math.max.apply(Math,o);if(a===0||a>n){l=this.raphael.rect(t,e,i,n)}else{l=this.raphael.path(this.roundedRect(t,e,i,n,o))}return l.attr("fill",s).attr("fill-opacity",r).attr("stroke","none")};n.prototype.roundedRect=function(t,e,i,n,s){if(s==null){s=[0,0,0,0]}return["M",t,s[0]+e,"Q",t,e,t+s[0],e,"L",t+i-s[1],e,"Q",t+i,e,t+i,e+s[1],"L",t+i,e+n-s[2],"Q",t+i,e+n,t+i-s[2],e+n,"L",t+s[3],e+n,"Q",t,e+n,t,e+n-s[3],"Z"]};return n}(e.Grid);e.Donut=function(i){a(n,i);n.prototype.defaults={colors:["#0B62A4","#3980B5","#679DC6","#95BBD7","#B0CCE1","#095791","#095085","#083E67","#052C48","#042135"],backgroundColor:"#FFFFFF",labelColor:"#000000",formatter:e.commas,resize:false};function n(i){this.resizeHandler=r(this.resizeHandler,this);this.select=r(this.select,this);this.click=r(this.click,this);var n=this;if(!(this instanceof e.Donut)){return new e.Donut(i)}this.options=t.extend({},this.defaults,i);if(typeof i.element==="string"){this.el=t(document.getElementById(i.element))}else{this.el=t(i.element)}if(this.el===null||this.el.length===0){throw new Error("Graph placeholder not found.")}if(i.data===void 0||i.data.length===0){return}this.raphael=new Raphael(this.el[0]);if(this.options.resize){t(window).bind("resize",function(t){if(n.timeoutId!=null){window.clearTimeout(n.timeoutId)}return n.timeoutId=window.setTimeout(n.resizeHandler,100)})}this.setData(i.data)}n.prototype.redraw=function(){var t,i,n,s,r,o,a,l,h,c,u,d,f,p,m,g,v,y,b,w,x,_,k;this.raphael.clear();i=this.el.width()/2;n=this.el.height()/2;f=(Math.min(i,n)-10)/3;u=0;w=this.values;for(p=0,v=w.length;p<v;p++){d=w[p];u+=d}l=5/(2*f);t=1.9999*Math.PI-l*this.data.length;o=0;r=0;this.segments=[];x=this.values;for(s=m=0,y=x.length;m<y;s=++m){d=x[s];h=o+l+t*(d/u);c=new e.DonutSegment(i,n,f*2,f,o,h,this.data[s].color||this.options.colors[r%this.options.colors.length],this.options.backgroundColor,r,this.raphael);c.render();this.segments.push(c);c.on("hover",this.select);c.on("click",this.click);o=h;r+=1}this.text1=this.drawEmptyDonutLabel(i,n-10,this.options.labelColor,15,800);this.text2=this.drawEmptyDonutLabel(i,n+10,this.options.labelColor,14);a=Math.max.apply(Math,this.values);r=0;_=this.values;k=[];for(g=0,b=_.length;g<b;g++){d=_[g];if(d===a){this.select(r);break}k.push(r+=1)}return k};n.prototype.setData=function(t){var e;this.data=t;this.values=function(){var t,i,n,s;n=this.data;s=[];for(t=0,i=n.length;t<i;t++){e=n[t];s.push(parseFloat(e.value))}return s}.call(this);return this.redraw()};n.prototype.click=function(t){return this.fire("click",t,this.data[t])};n.prototype.select=function(t){var e,i,n,s,r,o;o=this.segments;for(s=0,r=o.length;s<r;s++){i=o[s];i.deselect()}n=this.segments[t];n.select();e=this.data[t];return this.setLabels(e.label,this.options.formatter(e.value,e))};n.prototype.setLabels=function(t,e){var i,n,s,r,o,a,l,h;i=(Math.min(this.el.width()/2,this.el.height()/2)-10)*2/3;r=1.8*i;s=i/2;n=i/3;this.text1.attr({text:t,transform:""});o=this.text1.getBBox();a=Math.min(r/o.width,s/o.height);this.text1.attr({transform:"S"+a+","+a+","+(o.x+o.width/2)+","+(o.y+o.height)});this.text2.attr({text:e,transform:""});l=this.text2.getBBox();h=Math.min(r/l.width,n/l.height);return this.text2.attr({transform:"S"+h+","+h+","+(l.x+l.width/2)+","+l.y})};n.prototype.drawEmptyDonutLabel=function(t,e,i,n,s){var r;r=this.raphael.text(t,e,"").attr("font-size",n).attr("fill",i);if(s!=null){r.attr("font-weight",s)}return r};n.prototype.resizeHandler=function(){this.timeoutId=null;this.raphael.setSize(this.el.width(),this.el.height());return this.redraw()};return n}(e.EventEmitter);e.DonutSegment=function(t){a(e,t);function e(t,e,i,n,s,o,a,l,h,c){this.cx=t;this.cy=e;this.inner=i;this.outer=n;this.color=a;this.backgroundColor=l;this.index=h;this.raphael=c;this.deselect=r(this.deselect,this);this.select=r(this.select,this);this.sin_p0=Math.sin(s);this.cos_p0=Math.cos(s);this.sin_p1=Math.sin(o);this.cos_p1=Math.cos(o);this.is_long=o-s>Math.PI?1:0;this.path=this.calcSegment(this.inner+3,this.inner+this.outer-5);this.selectedPath=this.calcSegment(this.inner+3,this.inner+this.outer);this.hilight=this.calcArc(this.inner)}e.prototype.calcArcPoints=function(t){return[this.cx+t*this.sin_p0,this.cy+t*this.cos_p0,this.cx+t*this.sin_p1,this.cy+t*this.cos_p1]};e.prototype.calcSegment=function(t,e){var i,n,s,r,o,a,l,h,c,u;c=this.calcArcPoints(t),i=c[0],s=c[1],n=c[2],r=c[3];u=this.calcArcPoints(e),o=u[0],l=u[1],a=u[2],h=u[3];return"M"+i+","+s+("A"+t+","+t+",0,"+this.is_long+",0,"+n+","+r)+("L"+a+","+h)+("A"+e+","+e+",0,"+this.is_long+",1,"+o+","+l)+"Z"};e.prototype.calcArc=function(t){var e,i,n,s,r;r=this.calcArcPoints(t),e=r[0],n=r[1],i=r[2],s=r[3];return"M"+e+","+n+("A"+t+","+t+",0,"+this.is_long+",0,"+i+","+s)};e.prototype.render=function(){var t=this;this.arc=this.drawDonutArc(this.hilight,this.color);return this.seg=this.drawDonutSegment(this.path,this.color,this.backgroundColor,function(){return t.fire("hover",t.index)},function(){return t.fire("click",t.index)})};e.prototype.drawDonutArc=function(t,e){return this.raphael.path(t).attr({stroke:e,"stroke-width":2,opacity:0})};e.prototype.drawDonutSegment=function(t,e,i,n,s){return this.raphael.path(t).attr({fill:e,stroke:i,"stroke-width":3}).hover(n).click(s)};e.prototype.select=function(){if(!this.selected){this.seg.animate({path:this.selectedPath},150,"<>");this.arc.animate({opacity:1},150,"<>");return this.selected=true}};e.prototype.deselect=function(){if(this.selected){this.seg.animate({path:this.path},150,"<>");this.arc.animate({opacity:0},150,"<>");return this.selected=false}};return e}(e.EventEmitter)}).call(this);!function(t){"function"==typeof define&&define.amd?define(["jquery"],t):t("object"==typeof exports?require("jquery"):jQuery)}(function($){"use strict";var escape=/["\\\x00-\x1f\x7f-\x9f]/g,meta={"\b":"\\b","\t":"\\t","\n":"\\n","\f":"\\f","\r":"\\r",'"':'\\"',"\\":"\\\\"},hasOwn=Object.prototype.hasOwnProperty;$.toJSON="object"==typeof JSON&&JSON.stringify?JSON.stringify:function(t){if(null===t)return"null";var e,i,n,s,r=$.type(t);if("undefined"!==r){if("number"===r||"boolean"===r)return String(t);if("string"===r)return $.quoteString(t);if("function"==typeof t.toJSON)return $.toJSON(t.toJSON());if("date"===r){var o=t.getUTCMonth()+1,a=t.getUTCDate(),l=t.getUTCFullYear(),h=t.getUTCHours(),c=t.getUTCMinutes(),u=t.getUTCSeconds(),d=t.getUTCMilliseconds();return o<10&&(o="0"+o),a<10&&(a="0"+a),h<10&&(h="0"+h),c<10&&(c="0"+c),u<10&&(u="0"+u),d<100&&(d="0"+d),d<10&&(d="0"+d),'"'+l+"-"+o+"-"+a+"T"+h+":"+c+":"+u+"."+d+'Z"'}if(e=[],$.isArray(t)){for(i=0;i<t.length;i++)e.push($.toJSON(t[i])||"null");return"["+e.join(",")+"]"}if("object"==typeof t){for(i in t)if(hasOwn.call(t,i)){if(r=typeof i,"number"===r)n='"'+i+'"';else{if("string"!==r)continue;n=$.quoteString(i)}r=typeof t[i],"function"!==r&&"undefined"!==r&&(s=$.toJSON(t[i]),e.push(n+":"+s))}return"{"+e.join(",")+"}"}}},$.evalJSON="object"==typeof JSON&&JSON.parse?JSON.parse:function(str){return eval("("+str+")")},$.secureEvalJSON="object"==typeof JSON&&JSON.parse?JSON.parse:function(str){var filtered=str.replace(/\\["\\\/bfnrtu]/g,"@").replace(/"[^"\\\n\r]*"|true|false|null|-?\d+(?:\.\d*)?(?:[eE][+\-]?\d+)?/g,"]").replace(/(?:^|:|,)(?:\s*\[)+/g,"");if(/^[\],:{}\s]*$/.test(filtered))return eval("("+str+")");throw new SyntaxError("Error parsing JSON, source is not valid.")},$.quoteString=function(t){return t.match(escape)?'"'+t.replace(escape,function(t){var e=meta[t];return"string"==typeof e?e:(e=t.charCodeAt(),"\\u00"+Math.floor(e/16).toString(16)+(e%16).toString(16))})+'"':'"'+t+'"'}});(function(t){"use strict";var e=0;var i={listinit:function(){t('a[data-action="delPoint"]').on("click",function(){var e=t(this).attr("data-id");swal({title:"  ?",text:"      !",type:"warning",showCancelButton:true,confirmButtonColor:"#DD6B55",confirmButtonText:", !",cancelButtonText:"",closeOnConfirm:false},function(){i.delPoint(e)})});t('select[name="partnersel"]').on("change",function(){var i=t('select[name="magazsel"] :selected').val();var n=t(this).val();e(i,n)});t('select[name="magazsel"]').on("change",function(){var i=t('select[name="partnersel"] :selected').val();var n=t(this).val();e(n,i)});function e(e,i){if(e>0&&i>0){t('tr[data-partner = "'+i+'"][data-magaz = "'+e+'"]').show();t('tr[data-magaz][data-partner != "'+i+'"], tr[data-magaz][data-magaz != "'+e+'"]').hide();t("#PointAddBtn").attr("href","point-add/"+i)}else if(i>0){t('tr[data-partner = "'+i+'"]').show();t('tr[data-magaz][data-partner != "'+i+'"]').hide();t("#PointAddBtn").attr("href","point-add/"+i)}else if(e>0){t('tr[data-magaz = "'+e+'"]').show();t('tr[data-magaz][data-magaz != "'+e+'"]').hide()}else{t("tr[data-magaz]").show()}}},init:function(){t("#pointeditform").on("submit",function(){i.savePoint();return false});t('select[name="IsCustom"]').on("change",function(){if(t(this).val()==1){t("#siteConstructBtn").show()}else{t("#siteConstructBtn").hide()}}).trigger("change");t("#siteConstructBtn").on("click",function(){var e=t("#pointeditform").find('[name="ID"]').val();var i=t("#pointeditform").find('[name="idpart"]').val();if(e>0&&i>0){window.location="/partner/uslug/add?IdPartner="+i+"&IdUsl="+e}});t("#showKodModal").on("show.bs.modal",function(e){var i=t(e.relatedTarget).attr("data-id");t(e.currentTarget).find(".modal-body").html("<p>    : "+'<p><code>&lt;script src="https://qroplata.ru/shop.js"&gt;&lt;/script&gt;<br>'+'&lt;a href="javascript:windowOpen.showQR({id:&apos;'+i+'&apos;});">&lt;/a&gt;'+"</code>")});t("#modalMailInfo").on("show.bs.modal",function(e){t("#summernote").summernote({toolbar:[["style",["bold","italic","underline","clear"]],["fontsize",["fontsize"]],["color",["color"]],["para",["ul","ol","paragraph"]]]});t("#summernote").summernote("code",t('input[name="EmailShablon"]').val());t("#summernote").summernote("focus")});t("#modalMailInfoSave").on("click",function(){var e=t("#summernote").summernote("code");t("#summernote").summernote("destroy");t('input[name="EmailShablon"]').val(e);t("#modalMailInfo").modal("hide")});t("#colorpickerField1, #colorpickerField2").ColorPicker({onSubmit:function(e,i,n,s){t(s).val(i);t(s).ColorPickerHide()},onBeforeShow:function(){t(this).ColorPickerSetColor(this.value)}}).on("keyup",function(){t(this).ColorPickerSetColor(this.value)})},savePoint:function(){toastr.options={closeButton:true,progressBar:true,showMethod:"slideDown",timeOut:1e3};var i=new FormData(t("#pointeditform")[0]);if(e){e.abort()}e=t.ajax({type:"POST",url:"/partner/uslug/point-save",data:i,cache:false,contentType:false,processData:false,beforeSend:function(){t("#pointeditform").closest(".ibox-content").toggleClass("sk-loading")},success:function(e){if(e.status==1){toastr.success("Ok"," ");if(e.id){window.location="/partner/uslug/point-edit/"+e.id}}else{toastr.error(e.error,"")}t("#pointeditform").closest(".ibox-content").toggleClass("sk-loading")},error:function(e){t("#pointeditform").closest(".ibox-content").toggleClass("sk-loading");toastr.error(" ","")}})},delPoint:function(i){if(e){e.abort()}var n=t('meta[name="csrf-token"]').attr("content");var s=t("#IdPartner").val();e=t.ajax({type:"POST",url:"/partner/uslug/point-del",data:{id:i,_csrf:n},beforeSend:function(){},success:function(t){swal({title:" !",text:"  .",type:"success"},function(){window.location="/partner/uslug/index"})},error:function(t){}})}};window.points=i})(jQuery||$);(function(t){"use strict";let e=0;let i={login:function(){toastr.options={closeButton:true,progressBar:true,showMethod:"slideDown",timeOut:1e3};if(e){e.abort()}e=t.ajax({type:"POST",url:"/partner/login",data:t("#loginform").serialize(),beforeSend:function(){},success:function(t){if(t.status!==1){toastr.error("  / ","")}else{window.location.href="/partner/index"}},error:function(e){if(e.status!=302){t("#loginerror").show();toastr.error(" ","");window.location.reload()}}})},changepassw:function(){t("#passwform").on("submit",function(){toastr.options={closeButton:true,progressBar:true,showMethod:"slideDown",timeOut:1e3};if(e){e.abort()}e=t.ajax({type:"POST",url:"/partner/default/changepw",data:t("#passwform").serialize(),beforeSend:function(){t("#formProfileUser").closest(".ibox-content").toggleClass("sk-loading")},success:function(e){t("#formProfileUser").closest(".ibox-content").toggleClass("sk-loading");if(e.status==1){toastr.success("OK"," ");t("#passwform").reset()}else{toastr.error(",    ","")}},error:function(){t("#formProfileUser").closest(".ibox-content").toggleClass("sk-loading");toastr.error(" ","")}});return false})}};let n={statlistreq:function(i){if(e){e.abort()}e=t.ajax({type:"POST",url:"/partner/stat/listdata?page="+i,data:t("#statlistform").serialize(),beforeSend:function(){t("#statlistform").closest(".ibox-content").toggleClass("sk-loading")},success:function(e){t("#statlistform").closest(".ibox-content").toggleClass("sk-loading");if(e.status==1){t("#statlistresult").html(e.data)}else{t("#statlistresult").html("<p class='text-center'>"+e.message+"</p>")}},error:function(){t("#statlistform").closest(".ibox-content").toggleClass("sk-loading");t("#statlistresult").html("<p class='text-center'></p>")}})},statlist:function(){this.excerpt();t('[name="calDay"],[name="calWeek"],[name="calMon"]').on("click",function(){t('[name="calDay"]').removeClass("active");t('[name="calWeek"]').removeClass("active");t('[name="calMon"]').removeClass("active");t(this).addClass("active");let e,i;e=moment(new Date).hour(23).minute(59).seconds(59);i=moment(new Date).hour(0).minute(0).seconds(0);if(t(this).attr("name")=="calDay"){t('[name="datefrom"]').data("DateTimePicker").date(i);t('[name="dateto"]').data("DateTimePicker").date(e)}else if(t(this).attr("name")=="calWeek"){i=i.subtract(7,"days");t('[name="datefrom"]').data("DateTimePicker").date(i);t('[name="dateto"]').data("DateTimePicker").date(e)}else if(t(this).attr("name")=="calMon"){i=i.subtract(1,"months");t('[name="datefrom"]').data("DateTimePicker").date(i);t('[name="dateto"]').data("DateTimePicker").date(e)}});t('[name="datefrom"],[name="dateto"]').datetimepicker({format:"DD.MM.YYYY HH:mm",showClose:true});t("#statlistform").on("submit",function(){n.statlistreq(0);return false});t("#statlistresult").on("click",'[data-action="cancelpay"]',function(){let i=t(this).attr("data-id");swal({title:"  ",text:"      !",type:"warning",showCancelButton:true,confirmButtonColor:"#DD6B55",confirmButtonText:", !",cancelButtonText:" ",closeOnConfirm:false},function(){if(e){e.abort()}e=t.ajax({type:"POST",url:"/partner/stat/reversorder",data:{id:i},beforeSend:function(){t("#statlistform").closest(".ibox-content").toggleClass("sk-loading")},success:function(e){t("#statlistform").closest(".ibox-content").toggleClass("sk-loading");if(e.status==1){swal({title:"",text:e.message,type:"success"},function(){t("#statlistform").trigger("submit")})}else{swal({title:"",text:e.message,type:"error"},function(){t("#statlistform").trigger("submit")})}},error:function(){t("#statlistform").closest(".ibox-content").toggleClass("sk-loading");swal({title:"",text:" ",type:"error"},function(){t("#statlistform").trigger("submit")})}})});return false})},excerpt:function(){t(document).on("click",".excerpt",function(e){e.preventDefault();let i=t(this).attr("data-id");t.ajax({data:"id="+i,method:"post",url:"/partner/stat/excerpt",success:function(e){if(e.status===1){t(".pdf-modal .modal-body").html(e.data);t(".pdf-modal .modal-footer input:first-child").attr("data-id",i);t(".pdf-modal .modal-footer input:last-child").attr("data-id",i);t(".pdf-modal .modal-header h3").html(" "+e.message+"");t(".pdf-modal").modal("show")}else{t("#statlistform").closest(".ibox-content").toggleClass("sk-loading");swal({title:"",text:e.message,type:"error"},function(){t("#statlistform").closest(".ibox-content").toggleClass("sk-loading")})}},error:function(e){t("#statlistform").closest(".ibox-content").toggleClass("sk-loading");swal({title:"",text:"  .    . .",type:"error"},function(){t("#statlistform").closest(".ibox-content").toggleClass("sk-loading")})}})});t(document).on("click",".pdf-modal .modal-footer input:first-child",function(){let e=t(this).attr("data-id");window.open("/partner/stat/export-excerpt/"+e)});t(document).on("click",".pdf-modal .modal-footer input:last-child",function(){let e=t(this).attr("data-id");let i=t(this).prev().val();t.ajax({data:"id="+e+"&email="+i,method:"post",url:"/partner/stat/send-excerpt",success:function(e){if(e.status==1){swal({title:"",text:e.message,type:"success"},function(){t("#statlistform").trigger("submit");t(".pdf-modal .modal-footer input:nth-child(2)").css("color","rgb(103, 106, 108)")})}else{swal({title:"",text:e.data.email,type:"error"},function(){t("#statlistform").trigger("submit");t(".pdf-modal .modal-footer input:nth-child(2)").css("color","red")})}},error:function(e){t("#statlistform").closest(".ibox-content").toggleClass("sk-loading");swal({title:"",text:"  .    . .",type:"error"},function(){t("#statlistform").closest(".ibox-content").toggleClass("sk-loading")})}})});t(document).on("change",".pdf-modal .modal-footer input:nth-child(2)",function(){t(this).css("color","rgb(103, 106, 108)")})},mfodistribution:function(){t(document).on("submit","#partner-distribution",function(e){e.preventDefault();let i=t(this).serialize();t.ajax({method:"post",url:"/partner/settings/save-distribution",data:i,success:function(e){if(e.status===1){swal({title:"",text:e.message,type:"success"},function(){t("#statlistform").trigger("submit")})}else{swal({title:"",text:e.data.email[0].error,type:"error"},function(){t("#statlistform").trigger("submit");for(var i=0;i<e.data.email.length;i++){let n=t('#partner-distribution input[name= "email['+e.data.email[i].id+']"]');n.parent().addClass("has-error")}})}},error:function(e){t("#statlistform").closest(".ibox-content").toggleClass("sk-loading");swal({title:"",text:"  .    . .",type:"error"},function(){t("#statlistform").closest(".ibox-content").toggleClass("sk-loading")})}});return false})},otchlist:function(){t('[name="datefrom"],[name="dateto"]').datetimepicker({format:"DD.MM.YYYY HH:mm",showClose:true});t("#otchlistform").on("submit",function(){if(e){e.abort()}e=t.ajax({type:"POST",url:"/partner/stat/otchdata",data:t("#otchlistform").serialize(),beforeSend:function(){t("#otchlistform").closest(".ibox-content").toggleClass("sk-loading")},success:function(e){t("#otchlistform").closest(".ibox-content").toggleClass("sk-loading");t("#otchlistresult").html(e)},error:function(){t("#otchlistform").closest(".ibox-content").toggleClass("sk-loading");t("#otchlistresult").html("")}});return false});t("#otchetpsxls").on("click",function(){let e=t('[name="datefrom"]').val();let i=t('[name="dateto"]').val();t("#otchetpsxls").attr("href","/partner/stat/otchetps?datefrom="+e+"&dateto="+i);return true})},statgraph:function(){t('[name="datefrom"],[name="dateto"]').datetimepicker({format:"DD.MM.YYYY"});t("#saleform").on("submit",function(){n.statgraphload();return false});n.statgraphload()},statgraphload:function(){if(e){e.abort()}e=t.ajax({type:"POST",url:"/partner/stat/saledata",data:t("#saleform").serialize(),beforeSend:function(){t("#sale-graph").empty();t("#saleform").closest(".ibox-content").toggleClass("sk-loading")},success:function(e){t("#saleform").closest(".ibox-content").toggleClass("sk-loading");if(e.status==1){Morris.Line({element:"sale-graph",data:e.data,xkey:"x",ykeys:["a"],labels:[""],lineColors:["#f46f2a"],hideHover:"auto",parseTime:false,resize:true})}else{t("#sale-graph").html(e.message)}},error:function(){t("#saleform").closest(".ibox-content").toggleClass("sk-loading");t("#sale-graph").html(" ")}})},statgraphdraft:function(){t('[name="datefrom"],[name="dateto"]').datetimepicker({format:"DD.MM.YYYY"});t("#saleformdraft").on("submit",function(){n.statgraphdraftload();return false});n.statgraphdraftload()},statgraphdraftload:function(){if(e){e.abort()}e=t.ajax({type:"POST",url:"/partner/stat/saledraftdata",data:t("#saleformdraft").serialize(),beforeSend:function(){t("#sale-graphdraft").empty();t("#saleformdraft").closest(".ibox-content").toggleClass("sk-loading")},success:function(e){t("#saleformdraft").closest(".ibox-content").toggleClass("sk-loading");if(e.status==1){Morris.Line({element:"sale-graphdraft",data:e.data,xkey:"x",ykeys:["a"],labels:[" "],lineColors:["#f46f2a"],hideHover:"auto",parseTime:false,resize:true})}else{t("#sale-graphdraft").html(e.message)}},error:function(){t("#saleformdraft").closest(".ibox-content").toggleClass("sk-loading");t("#sale-graphdraft").html(" ")}})},statgraphkonvers:function(){t('[name="datefrom"],[name="dateto"]').datetimepicker({format:"DD.MM.YYYY"});t("#saleformkonvers").on("submit",function(){n.statgraphkonversload();return false});n.statgraphkonversload()},statgraphkonversload:function(){if(e){e.abort()}e=t.ajax({type:"POST",url:"/partner/stat/salekonversdata",data:t("#saleformkonvers").serialize(),beforeSend:function(){t("#sale-graphkonvers").empty();t("#saleformkonvers").closest(".ibox-content").toggleClass("sk-loading")},success:function(e){t("#saleformkonvers").closest(".ibox-content").toggleClass("sk-loading");if(e.status==1){Morris.Line({element:"sale-graphkonvers",data:e.data,xkey:"x",ykeys:["a"],labels:[""],lineColors:["#f46f2a"],hideHover:"auto",parseTime:false,resize:true})}else{t("#sale-graphkonvers").html(e.message)}},error:function(){t("#saleformkonvers").closest(".ibox-content").toggleClass("sk-loading");t("#sale-graphkonvers").html(" ")}})},statgraphplatelshik:function(){t('[name="datefrom"],[name="dateto"]').datetimepicker({format:"DD.MM.YYYY"});t("#platelshikform").on("submit",function(){n.statgraphplatelshikload();return false});n.statgraphplatelshikload()},statgraphplatelshikload:function(){if(e){e.abort()}e=t.ajax({type:"POST",url:"/partner/stat/platelshikdata",data:t("#platelshikform").serialize(),beforeSend:function(){t("#plat-graph-error").empty();t("#plat-graph-country").empty();t("#plat-graph-city").empty();t("#plat-graph-bank").empty();t("#plat-graph-card").empty();t("#platelshikform").closest(".ibox-content").toggleClass("sk-loading")},success:function(e){t("#platelshikform").closest(".ibox-content").toggleClass("sk-loading");if(e.status==1){Morris.Donut({element:"plat-graph-country",data:e.country,colors:["#f46f2a"],resize:true});Morris.Donut({element:"plat-graph-city",data:e.city,colors:["#f40f36"],resize:true});Morris.Donut({element:"plat-graph-bank",data:e.bank,colors:["#f4a84c"],resize:true});Morris.Donut({element:"plat-graph-card",data:e.card,colors:["#a500f4"],resize:true})}else{t("#plat-graph-error").html(e.message)}},error:function(){t("#platelshikform").closest(".ibox-content").toggleClass("sk-loading");t("#plat-graph-error").html(" ")}})},statrekurrent:function(){t('[name="datefrom"],[name="dateto"]').datetimepicker({format:"MM.YYYY"});t("#recurrentform").on("submit",function(){n.statrekurrentload();return false});n.statrekurrentload()},statrekurrentload:function(){if(e){e.abort()}e=t.ajax({type:"POST",url:"/partner/stat/recurrentpaysdata",data:t("#recurrentform").serialize(),beforeSend:function(){t("#recurrent-graph").empty();t("#recurrentform").closest(".ibox-content").toggleClass("sk-loading")},success:function(e){t("#recurrentform").closest(".ibox-content").toggleClass("sk-loading");if(e.status==1){Morris.Line({element:"recurrent-graph",data:e.data,xkey:"x",ykeys:["a"],labels:[e.label],lineColors:["#f46f2a"],hideHover:"auto",parseTime:false,resize:true})}else{t("#recurrent-graph").html(e.message)}},error:function(){t("#recurrentform").closest(".ibox-content").toggleClass("sk-loading");t("#recurrent-graph").html(" ")}})},recurrentcard:function(){t('[name="datefrom"],[name="dateto"]').datetimepicker({format:"DD.MM.YYYY"});t("#recurrentcardform").on("submit",function(t){t.preventDefault();n.recurrentcardformload();return false});n.recurrentcardformload()},recurrentcardformload:function(){if(e){e.abort()}e=t.ajax({type:"POST",url:"/partner/stat/recurrentcarddata",data:t("#recurrentcardform").serialize(),beforeSend:function(){t("#recurrentcardform").closest(".ibox-content").toggleClass("sk-loading")},success:function(e){t("#recurrentcardform").closest(".ibox-content").toggleClass("sk-loading");if(e.status==1){t("#recurrentcardresult").html(e.data)}else{t("#recurrentcardresult").html(e.message)}},error:function(e){t("#recurrentcardform").closest(".ibox-content").toggleClass("sk-loading");t("#recurrentcardresult").html(" ")}})},mfobalance:function(){t('[name="calDay"],[name="calWeek"],[name="calMon"]').on("click",function(){t('[name="calDay"]').removeClass("active");t('[name="calWeek"]').removeClass("active");t('[name="calMon"]').removeClass("active");t(this).addClass("active");let e,i;e=moment(new Date).hour(23).minute(59).seconds(59);i=moment(new Date).hour(0).minute(0).seconds(0);if(t(this).attr("name")=="calDay"){t('[name="datefrom"]').data("DateTimePicker").date(i);t('[name="dateto"]').data("DateTimePicker").date(e)}else if(t(this).attr("name")=="calWeek"){i=i.subtract(7,"days");t('[name="datefrom"]').data("DateTimePicker").date(i);t('[name="dateto"]').data("DateTimePicker").date(e)}else if(t(this).attr("name")=="calMon"){i=i.subtract(1,"months");t('[name="datefrom"]').data("DateTimePicker").date(i);t('[name="dateto"]').data("DateTimePicker").date(e)}});t('[name="datefrom"],[name="dateto"]').datetimepicker({format:"DD.MM.YYYY HH:mm",showClose:true});t("#mfosumlistform").on("submit",function(){n.mfobalancesorderreq(0);return false})},mfobalancesorderreq:function(i){if(e){e.abort()}e=t.ajax({type:"POST",url:"/partner/mfo/balanceorder?page="+i,data:t("#mfosumlistform").serialize(),beforeSend:function(){t("#mfosumlistform").closest(".ibox-content").toggleClass("sk-loading")},success:function(e){t("#mfosumlistform").closest(".ibox-content").toggleClass("sk-loading");if(e.status==1){t("#mfobalanceresult").html(e.data);t("#vypostbeg").html(e.ostbeg);t("#vypostend").html(e.ostend)}},error:function(e){t("#mfosumlistform").closest(".ibox-content").toggleClass("sk-loading");t("#mfobalanceresult").html("")}})},mfosettings:function(){t("#mfosettings").on("submit",function(i){i.preventDefault();let n=t("#mfosettings");let s=n.closest(".ibox-content");toastr.options={closeButton:true,progressBar:true,showMethod:"slideDown",timeOut:1e3};if(e){e.abort()}e=t.ajax({type:"POST",url:"/partner/settings/settingssave",data:n.serialize(),beforeSend:function(){s.toggleClass("sk-loading")},success:function(e){s.toggleClass("sk-loading");if(e.status==1){toastr.success("OK"," ");t("#mfosettings").reset()}else{toastr.error(e.message,"")}},error:function(t){s.toggleClass("sk-loading");toastr.error(" ","")}});return false})},mfoalarms:function(){t("#alarmssettings").on("submit",function(i){i.preventDefault();let n=t("#alarmssettings");let s=n.closest(".ibox-content");toastr.options={closeButton:true,progressBar:true,showMethod:"slideDown",timeOut:1e3};if(e){e.abort()}e=t.ajax({type:"POST",url:"/partner/settings/alarmssave",data:n.serialize(),beforeSend:function(){s.toggleClass("sk-loading")},success:function(e){s.toggleClass("sk-loading");if(e.status==1){toastr.success("OK"," ");t("#mfosettings").reset()}else{toastr.error(e.message,"")}},error:function(t){s.toggleClass("sk-loading");toastr.error(" ","")}});return false})},orderlist:function(){t('[name="datefrom"],[name="dateto"]').datetimepicker({format:"DD.MM.YYYY"});t("#orderform").on("submit",function(){if(e){e.abort()}e=t.ajax({type:"POST",url:"/partner/order/list",data:t("#orderform").serialize(),beforeSend:function(){t("#orderform").closest(".ibox-content").toggleClass("sk-loading")},success:function(e){t("#orderform").closest(".ibox-content").toggleClass("sk-loading");if(e.status==1){t("#orderlistresult").html(e.data)}else{t("#orderlistresult").html(e.message)}},error:function(e){t("#orderform").closest(".ibox-content").toggleClass("sk-loading");t("#orderlistresult").html(" ")}});return false})},orderlistdata:function(){t("#orderlisttable").off().on("click",'[data-action="cancelorder"]',function(){let i=t(this).attr("data-id");if(e){e.abort()}e=t.ajax({type:"POST",url:"/partner/order/cancel",data:{id:i},beforeSend:function(){t("#orderform").closest(".ibox-content").toggleClass("sk-loading")},success:function(e){t("#orderform").closest(".ibox-content").toggleClass("sk-loading");if(e.status==1){t("#orderform").trigger("submit")}else{toastr.error(e.message,"")}},error:function(e){t("#orderform").closest(".ibox-content").toggleClass("sk-loading");toastr.error(" ","")}});return false}).on("click",'[data-action="resendorder"]',function(){let i=t(this).attr("data-id");if(e){e.abort()}e=t.ajax({type:"POST",url:"/partner/order/resend",data:{id:i},beforeSend:function(){t("#orderform").closest(".ibox-content").toggleClass("sk-loading")},success:function(e){t("#orderform").closest(".ibox-content").toggleClass("sk-loading");if(e.status==1){toastr.success("OK","    ")}else{toastr.error(e.message,"")}},error:function(e){t("#orderform").closest(".ibox-content").toggleClass("sk-loading");toastr.error(" ","")}})})},orderadd:function(){t("#saveorder").on("click",function(){let i=t("#formAddOrder");let n=i.closest(".ibox-content");toastr.options={closeButton:true,progressBar:true,showMethod:"slideDown",timeOut:1e3};if(e){e.abort()}e=t.ajax({type:"POST",url:"/partner/order/save",data:i.serialize(),beforeSend:function(){n.toggleClass("sk-loading")},success:function(t){n.toggleClass("sk-loading");if(t.status==1){toastr.success("OK"," ");window.location.href="/partner/order"}else{toastr.error(t.message,"")}},error:function(t){n.toggleClass("sk-loading");toastr.error(" ","")}});return false})},notiflist:function(){t('[name="datefrom"],[name="dateto"]').datetimepicker({format:"DD.MM.YYYY"});t("#notiflistform").on("submit",function(){if(e){e.abort()}e=t.ajax({type:"POST",url:"/partner/callback/listitems",data:t("#notiflistform").serialize(),beforeSend:function(){t("#notiflistform").closest(".ibox-content").toggleClass("sk-loading")},success:function(e){t("#notiflistform").closest(".ibox-content").toggleClass("sk-loading");if(e.status==1){t("#notiflistresult").html(e.data)}else{t("#notiflistresult").html(e.message)}},error:function(e){t("#notiflistform").closest(".ibox-content").toggleClass("sk-loading");t("#notiflistresult").html(" ")}});return false});t("#notiflistresult").on("click",'[data-action="repeatnotif"]',function(){let i=t(this).attr("data-id");if(e){e.abort()}e=t.ajax({type:"POST",url:"/partner/callback/repeat",data:{id:i},beforeSend:function(){t("#notiflistform").closest(".ibox-content").toggleClass("sk-loading")},success:function(e){t("#notiflistform").closest(".ibox-content").toggleClass("sk-loading");if(e.status==1){toastr.success("OK",e.message);t("#notiflistform").trigger("submit")}else{toastr.error("",e.message)}},error:function(){t("#notiflistform").closest(".ibox-content").toggleClass("sk-loading");toastr.error(" ","")}});return false})},comisotchet:function(){t('[name="datefrom"],[name="dateto"]').datetimepicker({format:"DD.MM.YYYY HH:mm",showClose:true});t("#veekenddays").on("submit",function(){if(e){e.abort()}e=t.ajax({type:"POST",url:"/partner/admin/saveveekenddays",data:t("#veekenddays").serialize(),beforeSend:function(){t("#veekenddays").closest(".ibox-content").toggleClass("sk-loading")},success:function(e){t("#veekenddays").closest(".ibox-content").toggleClass("sk-loading");if(e.status==1){toastr.success("OK",e.message)}else{toastr.error("",e.message)}},error:function(){t("#veekenddays").closest(".ibox-content").toggleClass("sk-loading");toastr.error(""," .")}});return false});t("#comisotchetform").on("submit",function(){if(e){e.abort()}e=t.ajax({type:"POST",url:"/partner/admin/comisotchetdata",data:t("#comisotchetform").serialize(),beforeSend:function(){t("#comisotchetresult").closest(".ibox-content").toggleClass("sk-loading")},success:function(e){t("#comisotchetform").closest(".ibox-content").toggleClass("sk-loading");if(e.status==1){t("#comisotchetresult").html(e.data)}else{t("#comisotchetresult").html(e.message)}},error:function(){t("#comisotchetform").closest(".ibox-content").toggleClass("sk-loading");t("#comisotchetresult").html("")}});return false});t("#comisotchetresult").off().on("click",'a[data-action="vyvyodsum"]',function(){toastr.options={closeButton:true,progressBar:true,showMethod:"slideDown",timeOut:1e3};let i=t(this).attr("data-id");let n=t(this).attr("data-type");let s=t('[name="datefrom"]').val();let r=t('[name="dateto"]').val();let o=t(this).attr("data-summ");if(!confirm("  "+(o/100).toFixed(2)+" .?")){return false}e=t.ajax({type:"POST",url:"/partner/admin/vyvodvoznag",data:{partner:i,type:n,isCron:0,summ:o,datefrom:s,dateto:r},beforeSend:function(){t("#comisotchetresult").closest(".ibox-content").toggleClass("sk-loading")},success:function(e){t("#comisotchetform").closest(".ibox-content").toggleClass("sk-loading");if(e.status==1){toastr.success("OK",e.message);t("#comisotchetform").trigger("submit")}else{toastr.error("",e.message)}},error:function(){t("#comisotchetform").closest(".ibox-content").toggleClass("sk-loading");toastr.error(""," .")}});return false});t("#modal-perevod").on("shown.bs.modal",function(){t("#perevodform")[0].reset();t('[name="Perechislen[IdPartner]"]').trigger("change")});t('[name="Perechislen[IdPartner]"]').on("change",function(){let i=t(this).val();e=t.ajax({type:"POST",url:"/partner/admin/perevodaginfo",data:{partner:i},beforeSend:function(){t("#perevodpartner").prop("disabled",true);t('[name="Perechislen[IdPartner]"]').prop("disabled",true)},success:function(e){t('[name="Perechislen[IdPartner]"]').prop("disabled",false);if(e.status==1){t("#perevodpartner").prop("disabled",false);if(e.data.schettcb.length===0){t("#TypeSchet1").prop("disabled",true).prop("checked",false);t("#TypeSchet1Info").html(" !")}else{t("#TypeSchet1").prop("disabled",false).prop("checked",true);t("#TypeSchet1Info").html(e.data.schettcb)}if(e.data.schetrs.length===0){t("#TypeSchet2").prop("disabled",true);t("#TypeSchet2Info").html(" !")}else{t("#TypeSchet2").prop("disabled",false);if(e.data.schettcb.length===0){t("#TypeSchet2").prop("checked",true)}t("#TypeSchet2Info").html(e.data.schetrs+" "+e.data.schetinfo+",  "+e.data.schetbik)}t("#infoschet").html(e.data.urlico+"\r\n  "+e.data.schetfrom);if(e.data.schettcb.length===0&&e.data.schetrs.length===0){t("#perevodpartner").prop("disabled",true)}else{t("#perevodpartner").prop("disabled",false)}t("#balancepartner").html(e.data.balance.toFixed(2))}else{t("#perevodpartner").prop("disabled",true);toastr.error("",e.message)}},error:function(){t('[name="Perechislen[IdPartner]"]').prop("disabled",false);toastr.error(""," .")}})});t("#perevodpartner").on("click",function(){let i=parseFloat(t("#balancepartner").html());let n=parseFloat(t("#perevodform").find("#Summ").val());if(isNaN(n)||n<1||n>i){toastr.error("","  ");return false}let s="  ?\r\n\r\n"+t("#infoschet").html()+"\r\n : ";if(t("#TypeSchet1").prop("checked")){s+=t("#perevodform").find("#TypeSchet1Info").html()+" ()"}else{s+=t("#perevodform").find("#TypeSchet2Info").html()+" (/)"}s+="\r\n: "+n.toFixed(2)+" .";swal({title:" ",text:s,showCancelButton:true,confirmButtonColor:"#f46f2a",confirmButtonText:"",cancelButtonText:"",closeOnConfirm:true},function(){e=t.ajax({type:"POST",url:"/partner/admin/perevodacreate",data:t("#perevodform").serialize(),beforeSend:function(){t("#perevodpartner").prop("disabled",true)},success:function(e){t("#perevodpartner").prop("disabled",false);if(e.status==1){swal({title:"OK",text:e.message,type:"success"},function(){t("#perevodform")[0].reset();t("#modal-perevod").modal("hide");t("#comisotchetform").trigger("submit")})}else{toastr.error("",e.message)}},error:function(){t("#perevodpartner").prop("disabled",false);toastr.error(""," .")}})});return false})},banksave:function(){t("#submitbanks").on("click",function(){if(e){e.abort()}e=t.ajax({type:"POST",url:"/partner/admin/banksave",data:t("#banks").serialize(),beforeSend:function(){t("#banks").closest(".ibox-content").toggleClass("sk-loading")},success:function(e){t("#banks").closest(".ibox-content").toggleClass("sk-loading");if(e.status==1){toastr.success("OK"," ")}else{toastr.error(e.message,"")}},error:function(){t("#banks").closest(".ibox-content").toggleClass("sk-loading");toastr.error(" ","")}});return false})},registerpartner:function(){let i=t("#registerpartnerform");i.on("submit",function(n){n.preventDefault();if(e){e.abort()}e=t.ajax({type:"POST",url:"/partner/partner/partner-add",data:i.serialize(),beforeSend:function(){t("#submitregpartner").prop("disabled",true)},success:function(e){t("#submitregpartner").prop("disabled",false);if(e.status==1){toastr.success("OK"," ");t("#modal-regpartner").modal("hide").on("hidden.bs.modal",function(){window.location.href="/partner/partner/partner-edit/"+e.id})}else{toastr.error(e.message,"")}},error:function(){t("#submitregpartner").prop("disabled",false);toastr.error(" ","")}});return false})},listpartners:function(){t("#partnertypesel0,#partnertypesel1").on("change",function(){let e=t(this).val();if(e>=0){t('tr[data-parttype = "'+e+'"]').show();t('tr[data-parttype][data-parttype != "'+e+'"]').hide()}else{t("tr[parttype]").show()}});t("#partnertypesel0").trigger("change");t("#listpartners").on("click","tr[data-click]",function(){let e=t(this).attr("data-click");window.location.href=e})},editpartner:function(){toastr.options={closeButton:true,progressBar:true,showMethod:"slideDown",timeOut:1e3};t("#formEditCommonCont").on("submit",function(){let e=t("#formEditCommonCont");s.saveKont(e);return false});t("#formEditTehCont").on("submit",function(){let e=t("#formEditTehCont");s.saveKont(e);return false});t("#formEditFinansCont").on("submit",function(){let e=t("#formEditFinansCont");s.saveKont(e);return false});let i=document.location.toString();if(i.match("#tab")){t('.nav-tabs a[href="#'+i.split("#")[1]+'"]').tab("show")}t("#btnEditRekviz").on("click",function(){let e=t('form[name="formEditRekviz"]');t.ajax({url:"/partner/partner/rekviz-save",method:"POST",data:e.serialize(),beforeSend:function(){e.closest(".ibox-content").toggleClass("sk-loading")},success:function(t){e.closest(".ibox-content").toggleClass("sk-loading");if(t.status==0){toastr.error(t.message,"")}else{toastr.success("OK"," ")}},error:function(){e.closest(".ibox-content").toggleClass("sk-loading")}});return false});t("#btnEditPartner").on("click",function(e){e.preventDefault();n.savepatnerpart(t("#formEditPartner"));return false});t("#btnEditPartnerStatus").on("click",function(e){e.preventDefault();n.savepatnerpart(t("#formEditPartnerStatus"));return false});t("#btnEditPartnerTkb").on("click",function(e){e.preventDefault();n.savepatnerpart(t("#formEditPartnerTkb"));return false});t("#btnEditPartnerIntegr").on("click",function(e){e.preventDefault();n.savepatnerpart(t("#formEditPartnerIntegr"));return false});t("#formEditMainSms").on("submit",function(e){e.preventDefault();let i=t(this);t.ajax({url:"/partner/partner/mainsms-save",method:"POST",data:i.serialize(),beforeSend:function(){i.closest(".ibox-content").toggleClass("sk-loading")},success:function(t){i.closest(".ibox-content").toggleClass("sk-loading");if(t.status==1){toastr.success("OK","   .")}else{toastr.error(t.error,"")}},error:function(){i.closest(".ibox-content").toggleClass("sk-loading")}});return false});t("#btnEditDistribution").on("click",function(){let e=t("#formEditDistribution");t.ajax({url:"/partner/partner/save-distribution",method:"POST",data:e.serialize(),beforeSend:function(){e.closest(".ibox-content").toggleClass("sk-loading")},success:function(t){e.closest(".ibox-content").toggleClass("sk-loading");if(t.status==0){toastr.error(t.message,"")}else{toastr.success("OK",t.message)}},error:function(){e.closest(".ibox-content").toggleClass("sk-loading")}});return false});t("#btnOpoveshSettings").on("click",function(){let i=t("#formOpoveshSettings");e=t.ajax({type:"POST",url:"/partner/settings/settingssave",data:i.serialize(),beforeSend:function(){i.closest(".ibox-content").toggleClass("sk-loading")},success:function(t){i.closest(".ibox-content").toggleClass("sk-loading");if(t.status==1){toastr.success("OK"," ")}else{toastr.error(t.message,"")}},error:function(t){i.closest(".ibox-content").toggleClass("sk-loading");toastr.error(" ","")}});return false});t("#btnEditPartnerAdmin").on("click",function(){let i=t("#formEditPartnerAdmin");e=t.ajax({type:"POST",url:"/partner/partner/users-save",data:i.serialize(),beforeSend:function(){i.closest(".ibox-content").toggleClass("sk-loading")},success:function(t){i.closest(".ibox-content").toggleClass("sk-loading");if(t.status==1){toastr.success("OK"," ")}else{toastr.error(t.message,"")}},error:function(t){i.closest(".ibox-content").toggleClass("sk-loading");toastr.error(" ","")}});return false})},savepatnerpart:function(e){t.ajax({url:"/partner/partner/partner-save",method:"POST",data:e.serialize(),beforeSend:function(){e.closest(".ibox-content").toggleClass("sk-loading")},success:function(t){e.closest(".ibox-content").toggleClass("sk-loading");if(t.status==0){toastr.error(t.message,"")}else{toastr.success("OK","  ")}},error:function(){e.closest(".ibox-content").toggleClass("sk-loading")}})},patnerparuserslk:function(){toastr.options={closeButton:true,progressBar:true,showMethod:"slideDown",timeOut:1e3};t("#saveUser").on("click",function(){let e=t("#formEditUser").serialize();t.ajax({url:"/partner/partner/users-save",method:"POST",data:e,beforeSend:function(){t("#saveUser").prop("disabled",true)},success:function(e){t("#saveUser").prop("disabled",false);if(e.status==1){toastr.success("OK"," ");window.location.href="/partner/partner/users-edit/"+e.id}else{toastr.error(e.message,"")}},error:function(){t("#saveUser").prop("disabled",false)}});return false});t(".select2").select2({placeholder:" ",allowClear:true})},partnerlistuslugi:function(){t('a[data-action="delUsluga"]').on("click",function(){let i=t(this).attr("data-id");swal({title:"  ?",text:"      !",type:"warning",showCancelButton:true,confirmButtonColor:"#DD6B55",confirmButtonText:", !",cancelButtonText:"",closeOnConfirm:false},function(){if(e){e.abort()}let n=t('meta[name="csrf-token"]').attr("content");e=t.ajax({type:"POST",url:"/partner/partner/uslugi-del",data:{ID:i,_csrf:n},beforeSend:function(){},success:function(t){if(t.status==1){swal({title:" !",text:"  .",type:"success"},function(){window.location.href="/partner/partner/partner-edit/"+t.id+"#tab-2"})}else{swal({title:"",text:t.message,type:"error"})}},error:function(t){swal({title:"",text:" ",type:"error"})}})})})},partneredituslug:function(){t("#saveUsluga").on("click",function(){toastr.options={closeButton:true,progressBar:true,showMethod:"slideDown",timeOut:1e3};let e=t('form[name="EditUsluga"]').serialize();t.ajax({url:"/partner/partner/uslugi-save",method:"POST",data:e,beforeSend:function(){t("#saveUsluga").prop("disabled",true)},success:function(e){t("#saveUsluga").prop("disabled",false);if(e.status==0){toastr.error(e.message,"")}else{toastr.success("OK"," ");window.location.href="/partner/partner/uslugi-edit/"+e.id}},error:function(){t("#saveUsluga").prop("disabled",false)}});return false})}};let s={listinit:function(){t('select[name="partnersel"]').on("change",function(){let e=t(this).val();if(e>0){t('tr[data-partner = "'+e+'"]').show();t('tr[data-partner][data-partner != "'+e+'"]').hide()}else{t("tr[data-partner]").show()}})},init:function(){},saveKont:function(e){t.ajax({url:"/partner/partner/cont-save",method:"POST",data:e.serialize(),beforeSend:function(){e.closest(".ibox-content").toggleClass("sk-loading")},success:function(t){e.closest(".ibox-content").toggleClass("sk-loading");if(t.status==1){toastr.success("OK"," ")}else{toastr.error(t.error,"")}},error:function(){e.closest(".ibox-content").toggleClass("sk-loading");toastr.error(data.error,"")}})}};window.date_range={start:function(){t('[name="calDay"],[name="calWeek"],[name="calMon"]').on("click",function(){t('[name="calDay"]').removeClass("active");t('[name="calWeek"]').removeClass("active");t('[name="calMon"]').removeClass("active");t(this).addClass("active");let e,i;e=moment(new Date).hour(23).minute(59).seconds(59);i=moment(new Date).hour(0).minute(0).seconds(0);if(t(this).attr("name")=="calDay"){t('[name="datefrom"]').data("DateTimePicker").date(i);t('[name="dateto"]').data("DateTimePicker").date(e)}else if(t(this).attr("name")=="calWeek"){i=i.subtract(7,"days");t('[name="datefrom"]').data("DateTimePicker").date(i);t('[name="dateto"]').data("DateTimePicker").date(e)}else if(t(this).attr("name")=="calMon"){i=i.subtract(1,"months");t('[name="datefrom"]').data("DateTimePicker").date(i);t('[name="dateto"]').data("DateTimePicker").date(e)}});t('[name="datefrom"],[name="dateto"]').datetimepicker({format:"DD.MM.YYYY HH:mm",showClose:true})}};window.loginNav=i;window.lk=n;window.commInfo=s})(jQuery||$);(function(t){"use strict";let e=0;let i={};window.uslugi=i})(jQuery||$);"use strict";var tplUsl={form:function(t){if(t==="two"){return'<form action="#" method="POST" id="fielsForm" class="col-xs-6 nopadding"><ul class="list-group" id="listgroupsortable" ondrop="addUsl.dropElem(event)" ondragover="addUsl.makeDroppable(event)">'+"</ul></form>"+'<form action="#" method="POST" id="fielsForm2" class="col-xs-6 nopadding"><ul class="list-group" id="listgroupsortable2" ondrop="addUsl.dropElem(event)" ondragover="addUsl.makeDroppable(event)">'+"</ul></form>"}else{return'<form action="#" method="POST" id="fielsForm">'+'<ul class="list-group" id="listgroupsortable" '+'ondrop="addUsl.dropElem(event)" ondragover="addUsl.makeDroppable(event)"></ul>'+"</form>"}},field:function(t){return' <li class="list-group-item">'+'<a href="#" class="close" onclick="addUsl.delField(this)"></a>'+t+"</li>"},input:function(t,e,i){return'<div class="form-group">         <label>'+t+'</label>         <input type="hidden" name="inp[]" value="'+encodeURIComponent($.toJSON({type:i,label:t,coment:e}))+'">          <input type="text" class="form-control">         <span class="help-block">'+e+"</span>        </div>        "},datetime:function(t,e){return'<div class="form-group">            <label>'+t+'</label>            <input type="hidden" name="inp[]" value="'+encodeURIComponent($.toJSON({type:"datetime",label:t,coment:e}))+'">             <div class="input-group date datetimepicker">            <input type="hidden" value="">             <input type="text" class="form-control" />            <span class="input-group-addon">            <span class="glyphicon glyphicon-calendar"></span>            </span>            </div>            <span class="help-block">'+e+"</span>            </div>            "},summ:function(t){var e=parseFloat(t).toFixed(2);return'<div class="form-group">         <label class="summfield">: '+e+' .</label>            <input type="hidden" name="inp[]" value="'+encodeURIComponent($.toJSON({type:"summ",fixed:e}))+'">         </div>        '},statictext:function(t){return'<div class="form-group">         <p>'+t+'</p>            <input type="hidden" name="inp[]" value="'+encodeURIComponent($.toJSON({type:"statictext",label:t}))+'">         </div>        '},staticimage:function(t,e,i){var n=e[0];var s="";if(i!==undefined){var r=i[0];tplUsl.readFileSelect(r.files[0],n);s=URL.createObjectURL(r.files[0])}else{var o="/shopdata/"+$('[name="IdPartner"]').val()+"/";s=o+n+".png"}return'<div class="form-group">'+'<input type="hidden" name="valFile['+n+']" id="valFile_'+n+'" value="">'+'<img class="media-object" style="max-width: 240px" src="'+s+'">'+"</div>"+'<input type="hidden" name="inp[]" '+'value="'+encodeURIComponent($.toJSON({type:"staticimage",label:t,vals:[n]}))+'">'},selects:function(t,e,i){var n='<div class="form-group">        <label class="labelselect">'+t+'</label>        <select class="form-control" data-type="selects">';$.each(i,function(t,e){n+='<option value="'+t+'">'+e+"</option>"});n+='</select><span class="help-block">'+e+"</span></div>";n+='<input type="hidden" name="inp[]" '+'value="'+encodeURIComponent($.toJSON({type:"selects",label:t,coment:e,vals:i}))+'">';return n},radios:function(t,e,i){var n='<div class="form-group">        <label class="labelselect">'+t+'</label>        <input type="hidden" value="radiogroup" data-type="radios">';$.each(i,function(t,e){n+='<div class="radio">'+"  <label>"+'    <input type="radio" value="'+t+'">'+e+"  </label>"+"</div>"});n+='<span class="help-block">'+e+"</span></div>";n+='<input type="hidden" name="inp[]" '+'value="'+encodeURIComponent($.toJSON({type:"radios",label:t,coment:e,vals:i}))+'">';return n},checks:function(t,e,i){var n='<div class="form-group">        <label class="labelselect">'+t+'</label>        <input type="hidden" value="checkgroup" data-type="checks">';$.each(i,function(t,e){n+='<div class="checkbox">'+"  <label>"+'    <input type="checkbox" value="'+t+'">'+e+"  </label>"+"</div>"});n+='<span class="help-block">'+e+"</span></div>";n+='<input type="hidden" name="inp[]" '+'value="'+encodeURIComponent($.toJSON({type:"checks",label:t,coment:e,vals:i}))+'">';return n},readFileSelect:function(t,e){if(!t||!t.type.match("image.*")){return}var i=new FileReader;i.onload=function(t){return function(t){$("#valFile_"+e).val(t.target.result)}}(t,e);i.readAsDataURL(t)},generateUUID:function(){var t=(new Date).getTime();if(typeof performance!=="undefined"&&typeof performance.now==="function"){t+=performance.now()}return"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,function(e){var i=(t+Math.random()*16)%16|0;t=Math.floor(t/16);return(e==="x"?i:i&3|8).toString(16)})},radioimgs:function(t,e,i){var n=[];if(i!==undefined){$.each(i,function(t,i){if(i.files[0]){tplUsl.readFileSelect(i.files[0],e[t].file);n[t]=URL.createObjectURL(i.files[0])}else{n[t]=undefined}})}else{var s="/shopdata/"+$('[name="IdPartner"]').val()+"/";$.each(e,function(t,e){n[t]=s+e.file+".png"})}var r='<div class="form-group">        <label class="labelselect">'+t+'</label>        <input type="hidden" value="radiogroup" data-type="radioimgs">';$.each(e,function(t,e){r+='<input type="hidden" name="valFile['+e.file+']" id="valFile_'+e.file+'" value="">'+'<div class="radio">'+"  <label>"+'    <input type="radio" value="'+t+'" style="margin-top: 17px;">'+'<div class="media">'+'  <div class="media-left">';if(n[t]!==undefined){r+='<img class="media-object" src="'+n[t]+'">'}else{}r+="  </div>"+'  <div class="media-body">'+'    <h4 class="media-heading">'+e.val+"</h4>"+e.comment+"  </div>"+"  </label>"+"</div>"+"</div>"});r+='<input type="hidden" name="inp[]" '+'value="'+encodeURIComponent($.toJSON({type:"radioimgs",label:t,vals:e}))+'">';return r},paramInput:function(){return""+'<div class="form-group">'+'<label for="fieldLabel"> </label><label id="fieldLabelLen" class="maxleninfo pull-right">70/70</label>'+'<input type="text" class="form-control" name="fieldLabel" id="fieldLabel" maxlength="70">'+"</div>"+'<div class="form-group">'+'<label for="fieldComent"></label><label id="fieldComentLen" class="maxleninfo pull-right">70/70</label>'+'<input type="text" class="form-control" name="fieldComent" id="fieldComent" maxlength="70">'+"</div>"},paramSumm:function(){return""+'<div class="form-group">'+'<label for="fieldLabel"> <small>( 1  150 000 .)</small></label>'+'<input type="text" class="form-control summ" name="fieldLabel" id="fieldLabel" maxlength="10">'+"</div>"},paramStaticText:function(){return""+'<div class="form-group">'+'<label for="fieldLabel"></label><label id="fieldLabelLen" class="maxleninfo pull-right">250/250</label>'+'<textarea class="form-control" name="fieldLabel" id="fieldLabel" maxlength="250"></textarea>'+"</div>"},paramStaticImage:function(){return""+'<div class="form-group">'+"<label><small> ( 240x240 px)</small></label>"+'<input type="file" name="valFile[]" accept="image/*">'+"</div>"},paramSelect:function(){return""+'<div class="form-group">'+'<label for="fieldLabel"> </label><label id="fieldLabelLen" class="maxleninfo pull-right">70/70</label>'+'<input type="text" class="form-control" name="fieldLabel" id="fieldLabel" maxlength="70">'+"</div>"+'<div class="form-group">'+"<label>:</label>"+tplUsl.paramSelectFld()+tplUsl.paramSelectFld()+'<div><a onclick="tplUsl.addFieldSelect(this)"><i class="fa fa-plus-circle" aria-hidden="true"></i> </a></div>'+"</div>"+'<div class="form-group">'+'<label for="fieldComent"></label><label id="fieldComentLen" class="maxleninfo pull-right">70/70</label>'+'<input type="text" class="form-control" name="fieldComent" id="fieldComent" maxlength="70">'+"</div>"},paramSelectFld:function(){return'<div class="form-group form-inline">'+'<input type="text" class="form-control" value="" name="selval[]" style="margin-left: 15px; width: 80%;" maxlength="50">'+' <a href="#" onclick="tplUsl.delFieldSelect(this)">'+'<i class="fa fa-times-circle" aria-hidden="true"></i>'+"</a></div>"},delFieldSelect:function(t){$(t).parent().remove()},addFieldSelect:function(t){var e=$(t).parent().parent().find(".form-group").length;if(e<10){$(tplUsl.paramSelectFld()).insertBefore($(t).parent())}else{toastr.options={closeButton:true,progressBar:true,showMethod:"slideDown",timeOut:1e3};toastr.error("  10 ","")}},paramSelectImgs:function(){return'<div class="form-group">'+'<label for="fieldLabel"> </label><label id="fieldLabelLen" class="maxleninfo pull-right">70/70</label>'+'<input type="text" class="form-control" name="fieldLabel" id="fieldLabel" maxlength="70">'+"</div>"+'<div class="form-group">'+"<label>:</label>"+tplUsl.paramSelectFldImgs()+tplUsl.paramSelectFldImgs()+'<div><a onclick="tplUsl.addFieldSelectImg(this)">'+'<i class="fa fa-plus-circle" aria-hidden="true"></i> </a>'+"</div>"+"</div>"},paramSelectFldImgs:function(){return'<div class="row" style="margin-left: 15px;"><div class="col-sm-10">'+'<div class="form-group">'+'<label></label><label class="maxleninfo pull-right">50/50</label>'+'<input type="text" class="form-control" value="" name="selval[]" maxlength="50">'+"</div>"+'<div class="form-group">'+'<label></label><label class="maxleninfo pull-right">70/70</label>'+'<input type="text" class="form-control" value="" name="valComent[]" maxlength="70">'+"</div>"+'<div class="form-group">'+"<label><small> ( 80x80 px)</small></label>"+'<input type="file" name="valFile[]" accept="image/*">'+"</div>"+"</div>"+'<div  class="col-sm-2" style="margin-top: 31px;"><a href="#" onclick="tplUsl.delFieldSelectImg(this)">'+'<i class="fa fa-times-circle" aria-hidden="true"></i>'+"</a></div></div>"},addFieldSelectImg:function(t){var e=$(t).parent().parent().find(".row").length;if(e<10){$(tplUsl.paramSelectFldImgs()).insertBefore($(t).parent())}else{toastr.options={closeButton:true,progressBar:true,showMethod:"slideDown",timeOut:1e3};toastr.error("  10 ","")}},delFieldSelectImg:function(t){$(t).parent().parent().remove()}};function initAdd(){i();toastr.options={closeButton:true,progressBar:true,showMethod:"slideDown",timeOut:1e3};$('a[data-toggle="tab"]').on("shown.bs.tab",function(t){var e=$(this).attr("data-progress");$(".progress-bar").css("width",e+"%")});$("#addFeildModal").on("show.bs.modal",function(){$(".modal-dialog",this).css("width",700);if($('[name="TypeTemplate"]').val()=="two"){$(".modal-dialog",this).css("width",400)}$(".modal-body").off("keypress").off("input").on("keypress, input","input, textarea",function(t){var e=$(this).attr("maxlength");if($(this).prev(".maxleninfo")){$(this).prev(".maxleninfo").html(e-$(this).val().length+"/"+e)}});switch(addUsl.idField){case"text":case"dig":case"datetime":$("#addFeildModalLabel").html("  ");$(this).find(".modal-body").html(tplUsl.paramInput);break;case"summ":$("#addFeildModalLabel").html("  ");$(this).find(".modal-body").html(tplUsl.paramSumm);$(".modal-body").find("input.summ").off("keypress").off("input").off("paste").on("keypress input paste",function(t){var e=$(this).val();return t.charCode>=48&&t.charCode<=57||t.charCode===46&&e.indexOf(".")===-1});break;case"statictext":$("#addFeildModalLabel").html("  ");$(this).find(".modal-body").html(tplUsl.paramStaticText);break;case"staticimage":$("#addFeildModalLabel").html("  ");$(this).find(".modal-body").html(tplUsl.paramStaticImage);break;case"selects":case"radios":case"checks":$("#addFeildModalLabel").html("  ");$(this).find(".modal-body").html(tplUsl.paramSelect);break;case"radioimgs":$("#addFeildModalLabel").html("  ");$(this).find(".modal-body").html(tplUsl.paramSelectImgs);break}});$(".modal-dialog").draggable();$("#addFeildModalOk").on("click",function(){if(!t())return false;var e=$("#addFeildModalBody").find('[name="fieldLabel"]').val();var i=$("#addFeildModalBody").find('[name="fieldComent"]').val();if(addUsl.typesFlt.indexOf(addUsl.idField)!==-1){var n=[];$.each($("#addFeildModalBody").find('[name="valComent[]"]'),function(t,e){n[t]=e});var s=$("#addFeildModalBody").find('[name="valFile[]"]');var r=[];$.each(s,function(t,e){r[t]=tplUsl.generateUUID()});var o=[];$.each($("#addFeildModalBody").find('[name="selval[]"]'),function(t,e){if(addUsl.idField==="radioimgs"){o[t]={val:$(e).val(),comment:$(n[t]).val(),file:r[t]}}else{o[t]=$(e).val()}});if(addUsl.idField==="staticimage"){o[0]=r[0]}var a=addUsl.addField(addUsl.idField,e,i,o,s);if(a!==""){var l=$("#"+addUsl.dropFrom).find(".list-group-item");var h=0;if(l.length>0){$.each(l,function(t,e){var i=$(e).offset().top-$(document).scrollTop()+$(e).height();if(i>addUsl.dropPosY){$(a).insertBefore(e);h=1;return false}})}if(!h){$("#"+addUsl.dropFrom).append(a)}if(addUsl.idField==="datetime"){$(".datetimepicker").datetimepicker()}}}$("#addFeildModal").modal("hide");return false});function t(){var t;switch(addUsl.idField){case"text":case"dig":case"datetime":break;case"summ":t=$("#addFeildModalBody").find('[name="fieldLabel"]').val();if(parseFloat(t)<=0||parseFloat(t)>15e4){toastr.error(" ","");return false}break;case"statictext":t=$("#addFeildModalBody").find('[name="fieldLabel"]').val();if(t==""){toastr.error(" ","");return false}break;case"staticimage":t=$("#addFeildModalBody").find("[name^=valFile]").val();if(t==""){toastr.error(" ","");return false}break;case"selects":case"radios":case"radioimgs":t=true;$.each($("#addFeildModalBody").find("[name^=selval]"),function(e,i){if(!$(i).val().length){t=false}});if(t){t=$("#addFeildModalBody").find("[name^=selval]").length;if(t<2||t>10){t=false}}if(!t){toastr.error("   2  10 ","");return false}break;case"checks":t=true;$.each($("#addFeildModalBody").find("[name^=selval]"),function(e,i){if(!$(i).val().length){t=false}});if(t){t=$("#addFeildModalBody").find("[name^=selval]").length;if(!t||t>10){t=false}}if(!t){toastr.error("   10 ","");return false}break}return true}$('a[data-click="prototype"]').on("click",function(){addUsl.typeFrom=$(this).attr("data-id");$("#addFormModal").modal("show")});$("#addFormModal").on("show.bs.modal",function(){});$("#addFormModalOk").on("click",function(){var t="";$("#uslbody").html(tplUsl.form(addUsl.typeFrom));$("#uslname").html(t);$('[name="NameForm"]').val(t);$('[name="TypeTemplate"]').val(addUsl.typeFrom);addUsl.setSortable("listgroupsortable");if(addUsl.typeFrom==="two"){addUsl.setSortable("listgroupsortable2")}$("#addFormModal").modal("hide")});$(".modal").on("change",'[name^="valFile"]',function(){var t=this.files[0];if(t!==undefined){console.log(t.type);if(t.name.length<1){$(this).val("")}else if(t.size>2e7){toastr.error("  ","");$(this).val("")}else if(t.type!=="image/png"&&t.type!=="image/jpg"&&t.type!=="image/gif"&&t.type!=="image/jpeg"){toastr.error("   ","");$(this).val("")}}else{$(this).val("")}});$("#uslFormSave").on("click",function(){if(!e())return false;var t=new FormData($("#uslForm")[0]);$.each($("#fielsForm").find('input[name="inp[]"]'),function(e,i){t.append("inp1["+e+"]",$(i).val())});$.each($("#fielsForm").find("input[name^=valFile]"),function(e,i){console.log(i);t.append($(i).attr("name"),$(i).val())});$.each($("#fielsForm2").find('input[name="inp[]"]'),function(e,i){t.append("inp2["+e+"]",$(i).val())});$.each($("#fielsForm2").find("input[name^=valFile]"),function(e,i){console.log(i);t.append($(i).attr("name"),$(i).val())});$.ajax({type:"POST",url:"/partner/uslug/addpost",beforeSend:function(){$("#uslFormSave").prop("disabled",true)},data:t,cache:false,contentType:false,processData:false,success:function(t){$("#uslFormSave").prop("disabled",false);if(t.status===1){toastr.success("Ok"," ");$('[name="IdUsl"]').val(t.idusl)}else{toastr.error(" ","")}},error:function(){$("#uslFormSave").prop("disabled",false);toastr.error("  ","")}})});function e(){var t=$("#listgroupsortable").find(".list-group-item").length+$("#listgroupsortable2").find(".list-group-item").length;if(!t){toastr.error("  ","");return false}var e=$("#listgroupsortable").find("label.summfield").length+$("#listgroupsortable2").find("label.summfield").length;if(!e){toastr.error("   ","");return false}return true}function i(){var t=$('[name="IdUsl"]').val();if(!t){addUsl.addSortable("two")}else{var e=$('[name="IdPartner"]').val();$.ajax({type:"GET",url:"/partner/uslug/add?IdUsl="+t+"&IdPartner="+e,beforeSend:function(){},success:function(t){if(t.status===1){addUsl.addSortable(t.CustomData.TypeTemplate);$('[name="NameForm"]').val(t.CustomData.NameForm);$("#uslname").html(t.CustomData.NameForm);$('[name="TypeTemplate"]').val(t.CustomData.TypeTemplate);var e="listgroupsortable";$.each(t.CustomData.fields1,function(t,i){var n;if(i.type==="summ"){n=addUsl.addField(i.type,i.fixed)}else{n=addUsl.addField(i.type,i.label,i.coment,i.vals,i.valsRFl)}if(n!==""){$("#"+e).append(n);if(i.type==="datetime"){$(".datetimepicker").datetimepicker({format:"DD.MM.YYYY HH:mm"})}}});e="listgroupsortable2";$.each(t.CustomData.fields2,function(t,i){var n;if(i.type==="summ"){n=addUsl.addField(i.type,i.fixed)}else{n=addUsl.addField(i.type,i.label,i.coment,i.vals,i.valsRFl)}if(n!==""){$("#"+e).append(n);if(i.type==="datetime"){$(".datetimepicker").datetimepicker()}}})}else{}},error:function(){}})}}}"use strict";var addUsl={sortable:null,sortable2:null,idField:null,typeFrom:null,typesFlt:["text","dig","datetime","summ","statictext","staticimage","selects","radios","radioimgs","checks","checkimgs"],dropFrom:"",dropPosY:0,addSortable:function(t){if(t==="one"){$("#uslbody").append(tplUsl.form("one"));addUsl.setSortable("listgroupsortable")}else{$("#uslbody").append(tplUsl.form("two"));addUsl.setSortable("listgroupsortable");addUsl.setSortable("listgroupsortable2")}},setSortable:function(t){var e=document.getElementById(t);if(e!==undefined&&t==="listgroupsortable"){addUsl.sortable=Sortable.create(e,{group:{name:"fields",pull:true,put:function(t){if(t.el.children.length<=4){return true}else{return false}}},animation:150})}if(e!==undefined&&t==="listgroupsortable2"){addUsl.sortable2=Sortable.create(e,{group:{name:"fields",pull:true,put:function(t){return t.el.children.length<=4}},animation:150})}},delField:function(t){$(t).parent().remove()},addField:function(t,e,i,n,s){var r="";switch(t){case"text":case"dig":r=tplUsl.field(tplUsl.input(e,i,t));break;case"datetime":r=tplUsl.field(tplUsl.datetime(e,i));break;case"summ":var o=$("#listgroupsortable").find("label.summfield");if(!o.length){o=$("#listgroupsortable2").find("label.summfield")}if(o){addUsl.delField(o.parent())}r=tplUsl.field(tplUsl.summ(e));break;case"statictext":r=tplUsl.field(tplUsl.statictext(e));break;case"staticimage":r=tplUsl.field(tplUsl.staticimage(e,n,s));break;case"selects":r=tplUsl.field(tplUsl.selects(e,i,n));break;case"radios":r=tplUsl.field(tplUsl.radios(e,i,n));break;case"checks":r=tplUsl.field(tplUsl.checks(e,i,n));break;case"radioimgs":r=tplUsl.field(tplUsl.radioimgs(e,n,s));break}return r},dragElem:function(t){var e=$(t.target).attr("data-id");if(!e){e=$(t.target).parent().attr("data-id")}t.dataTransfer.setData("text/plain",e)},makeDroppable:function(t){t.preventDefault()},dropElem:function(t){t.preventDefault();addUsl.dropPosY=t.pageY;addUsl.dropFrom=t.target.id;if(addUsl.dropFrom===""){addUsl.dropFrom=$(t.target).closest("ul").attr("id")}var e=t.dataTransfer.getData("text/plain");if(addUsl.typesFlt.indexOf(e)!==-1){var i=$("#"+addUsl.dropFrom).find(".list-group-item").length;if(i>4){toastr.error("  ","");return false}else{addUsl.idField=t.dataTransfer.getData("text/plain");$("#addFeildModal").modal("show")}}}};(function t(e){"use strict";if(typeof define==="function"&&define.amd){define(e)}else if(typeof module!="undefined"&&typeof module.exports!="undefined"){module.exports=e()}else{window["Sortable"]=e()}})(function t(){"use strict";if(typeof window==="undefined"||!window.document){return function t(){throw new Error("Sortable.js requires a window with a document")}}var e,i,n,s,r,o,a,l,h,c,u,d,f,p,m,g,v,y={},b,w,x,_=/\s+/g,k=/left|right|inline/,C="Sortable"+(new Date).getTime(),S=window,T=S.document,D=S.parseInt,M=S.setTimeout,P=S.jQuery||S.Zepto,I=S.Polymer,E=false,$="draggable"in T.createElement("div"),F=function(t){if(!!navigator.userAgent.match(/(?:Trident.*rv[ :]?11\.|msie)/i)){return false}t=T.createElement("x");t.style.cssText="pointer-events:auto";return t.style.pointerEvents==="auto"}(),A=false,H=Math.abs,L=Math.min,O=[],R=[],z=rt(function(t,e,i){if(i&&e.scroll){var n=i[C],s,r,o=e.scrollSensitivity,a=e.scrollSpeed,u=t.clientX,d=t.clientY,f=window.innerWidth,p=window.innerHeight,m,g,v,b;if(h!==i){l=e.scroll;h=i;c=e.scrollFn;if(l===true){l=i;do{if(l.offsetWidth<l.scrollWidth||l.offsetHeight<l.scrollHeight){break}}while(l=l.parentNode)}}if(l){s=l;r=l.getBoundingClientRect();m=(H(r.right-u)<=o)-(H(r.left-u)<=o);g=(H(r.bottom-d)<=o)-(H(r.top-d)<=o)}if(!(m||g)){m=(f-u<=o)-(u<=o);g=(p-d<=o)-(d<=o);(m||g)&&(s=S)}if(y.vx!==m||y.vy!==g||y.el!==s){y.el=s;y.vx=m;y.vy=g;clearInterval(y.pid);if(s){y.pid=setInterval(function(){b=g?g*a:0;v=m?m*a:0;if("function"===typeof c){return c.call(n,v,b,t)}if(s===S){S.scrollTo(S.pageXOffset+v,S.pageYOffset+b)}else{s.scrollTop+=b;s.scrollLeft+=v}},24)}}}},30),N=function(t){function e(t,e){if(t===void 0||t===true){t=i.name}if(typeof t==="function"){return t}else{return function(i,n){var s=n.options.group.name;return e?t:t&&(t.join?t.indexOf(s)>-1:s==t)}}}var i={};var n=t.group;if(!n||typeof n!="object"){n={name:n}}i.name=n.name;i.checkPull=e(n.pull,true);i.checkPut=e(n.put);i.revertClone=n.revertClone;t.group=i};function B(t,e){if(!(t&&t.nodeType&&t.nodeType===1)){throw"Sortable: `el` must be HTMLElement, and not "+{}.toString.call(t)}this.el=t;this.options=e=ot({},e);t[C]=this;var i={group:Math.random(),sort:true,disabled:false,store:null,handle:null,scroll:true,scrollSensitivity:30,scrollSpeed:10,draggable:/[uo]l/i.test(t.nodeName)?"li":">*",ghostClass:"sortable-ghost",chosenClass:"sortable-chosen",dragClass:"sortable-drag",ignore:"a, img",filter:null,preventOnFilter:true,animation:0,setData:function(t,e){t.setData("Text",e.textContent)},dropBubble:false,dragoverBubble:false,dataIdAttr:"data-id",delay:0,forceFallback:false,fallbackClass:"sortable-fallback",fallbackOnBody:false,fallbackTolerance:0,fallbackOffset:{x:0,y:0}};for(var n in i){!(n in e)&&(e[n]=i[n])}N(e);for(var s in this){if(s.charAt(0)==="_"&&typeof this[s]==="function"){this[s]=this[s].bind(this)}}this.nativeDraggable=e.forceFallback?false:$;q(t,"mousedown",this._onTapStart);q(t,"touchstart",this._onTapStart);q(t,"pointerdown",this._onTapStart);if(this.nativeDraggable){q(t,"dragover",this);q(t,"dragenter",this)}R.push(this._onDragOver);e.store&&this.sort(e.store.get(this))}B.prototype={constructor:B,_onTapStart:function(t){var i=this,n=this.el,s=this.options,r=s.preventOnFilter,o=t.type,l=t.touches&&t.touches[0],h=(l||t).target,c=t.target.shadowRoot&&(t.path&&t.path[0])||h,u=s.filter,d;lt(n);if(e){return}if(/mousedown|pointerdown/.test(o)&&t.button!==0||s.disabled){return}if(c.isContentEditable){return}h=W(h,s.draggable,n);if(!h){return}if(a===h){return}d=nt(h,s.draggable);if(typeof u==="function"){if(u.call(this,t,h,this)){Q(i,c,"filter",h,n,n,d);r&&t.preventDefault();return}}else if(u){u=u.split(",").some(function(t){t=W(c,t.trim(),n);if(t){Q(i,t,"filter",h,n,n,d);return true}});if(u){r&&t.preventDefault();return}}if(s.handle&&!W(c,s.handle,n)){return}this._prepareDragStart(t,l,h,d)},_prepareDragStart:function(t,n,s,l){var h=this,c=h.el,u=h.options,d=c.ownerDocument,f;if(s&&!e&&s.parentNode===c){b=t;r=c;e=s;i=e.parentNode;o=e.nextSibling;a=s;g=u.group;p=l;this._lastX=(n||t).clientX;this._lastY=(n||t).clientY;e.style["will-change"]="all";f=function(){h._disableDelayedDrag();e.draggable=h.nativeDraggable;G(e,u.chosenClass,true);h._triggerDragStart(t,n);Q(h,r,"choose",e,r,r,p)};u.ignore.split(",").forEach(function(t){K(e,t.trim(),J)});q(d,"mouseup",h._onDrop);q(d,"touchend",h._onDrop);q(d,"touchcancel",h._onDrop);q(d,"pointercancel",h._onDrop);q(d,"selectstart",h);if(u.delay){q(d,"mouseup",h._disableDelayedDrag);q(d,"touchend",h._disableDelayedDrag);q(d,"touchcancel",h._disableDelayedDrag);q(d,"mousemove",h._disableDelayedDrag);q(d,"touchmove",h._disableDelayedDrag);q(d,"pointermove",h._disableDelayedDrag);h._dragStartTimer=M(f,u.delay)}else{f()}}},_disableDelayedDrag:function(){var t=this.el.ownerDocument;clearTimeout(this._dragStartTimer);V(t,"mouseup",this._disableDelayedDrag);V(t,"touchend",this._disableDelayedDrag);V(t,"touchcancel",this._disableDelayedDrag);V(t,"mousemove",this._disableDelayedDrag);V(t,"touchmove",this._disableDelayedDrag);V(t,"pointermove",this._disableDelayedDrag)},_triggerDragStart:function(t,i){i=i||(t.pointerType=="touch"?t:null);if(i){b={target:e,clientX:i.clientX,clientY:i.clientY};this._onDragStart(b,"touch")}else if(!this.nativeDraggable){this._onDragStart(b,true)}else{q(e,"dragend",this);q(r,"dragstart",this._onDragStart)}try{if(T.selection){ht(function(){T.selection.empty()})}else{window.getSelection().removeAllRanges()}}catch(t){}},_dragStarted:function(){if(r&&e){var t=this.options;G(e,t.ghostClass,true);G(e,t.dragClass,false);B.active=this;Q(this,r,"start",e,r,r,p)}else{this._nulling()}},_emulateDragOver:function(){if(w){if(this._lastX===w.clientX&&this._lastY===w.clientY){return}this._lastX=w.clientX;this._lastY=w.clientY;if(!F){X(n,"display","none")}var t=T.elementFromPoint(w.clientX,w.clientY),e=t,i=R.length;if(e){do{if(e[C]){while(i--){R[i]({clientX:w.clientX,clientY:w.clientY,target:t,rootEl:e})}break}t=e}while(e=e.parentNode)}if(!F){X(n,"display","")}}},_onTouchMove:function(t){if(b){var e=this.options,i=e.fallbackTolerance,s=e.fallbackOffset,r=t.touches?t.touches[0]:t,o=r.clientX-b.clientX+s.x,a=r.clientY-b.clientY+s.y,l=t.touches?"translate3d("+o+"px,"+a+"px,0)":"translate("+o+"px,"+a+"px)";if(!B.active){if(i&&L(H(r.clientX-this._lastX),H(r.clientY-this._lastY))<i){return}this._dragStarted()}this._appendGhost();x=true;w=r;X(n,"webkitTransform",l);X(n,"mozTransform",l);X(n,"msTransform",l);X(n,"transform",l);t.preventDefault()}},_appendGhost:function(){if(!n){var t=e.getBoundingClientRect(),i=X(e),s=this.options,o;n=e.cloneNode(true);G(n,s.ghostClass,false);G(n,s.fallbackClass,true);G(n,s.dragClass,true);X(n,"top",t.top-D(i.marginTop,10));X(n,"left",t.left-D(i.marginLeft,10));X(n,"width",t.width);X(n,"height",t.height);X(n,"opacity","0.8");X(n,"position","fixed");X(n,"zIndex","100000");X(n,"pointerEvents","none");s.fallbackOnBody&&T.body.appendChild(n)||r.appendChild(n);o=n.getBoundingClientRect();X(n,"width",t.width*2-o.width);X(n,"height",t.height*2-o.height)}},_onDragStart:function(t,i){var n=this;var o=t.dataTransfer;var a=n.options;n._offUpEvents();if(g.checkPull(n,n,e,t)){s=at(e);s.draggable=false;s.style["will-change"]="";X(s,"display","none");G(s,n.options.chosenClass,false);n._cloneId=ht(function(){r.insertBefore(s,e);Q(n,r,"clone",e)})}G(e,a.dragClass,true);if(i){if(i==="touch"){q(T,"touchmove",n._onTouchMove);q(T,"touchend",n._onDrop);q(T,"touchcancel",n._onDrop);q(T,"pointermove",n._onTouchMove);q(T,"pointerup",n._onDrop)}else{q(T,"mousemove",n._onTouchMove);q(T,"mouseup",n._onDrop)}n._loopId=setInterval(n._emulateDragOver,50)}else{if(o){o.effectAllowed="move";a.setData&&a.setData.call(n,o,e)}q(T,"drop",n);q(T,"mouseover",n);n._dragStartId=ht(n._dragStarted)}},_onDragOver:function(t){var a=this.el,l,h,c,p,m=this.options,y=m.group,b=B.active,w=g===y,_=false,S=m.sort;if(t.preventDefault!==void 0){t.preventDefault();!m.dragoverBubble&&t.stopPropagation()}if(e.animated){return}x=true;if(b&&!m.disabled&&(w?S||(p=!r.contains(e)):v===this||(b.lastPullMode=g.checkPull(this,b,e,t))&&y.checkPut(this,b,e,t))&&(t.rootEl===void 0||t.rootEl===this.el)){z(t,m,this.el);if(A){return}l=W(t.target,m.draggable,a);h=e.getBoundingClientRect();if(v!==this){v=this;_=true}if(p){j(b,true);i=r;if(s||o){r.insertBefore(e,s||o)}else if(!S){r.appendChild(e)}return}if(a.children.length===0||a.children[0]===n||a===t.target&&et(a,t)){if(a.children.length!==0&&a.children[0]!==n&&a===t.target){l=a.lastElementChild}if(l){if(l.animated){return}c=l.getBoundingClientRect()}j(b,w);if(Z(r,a,e,h,l,c,t)!==false){if(!e.contains(a)){a.appendChild(e);i=a}this._animate(h,e);l&&this._animate(c,l)}}else if(l&&!l.animated&&l!==e&&l.parentNode[C]!==void 0){if(u!==l){u=l;d=X(l);f=X(l.parentNode)}c=l.getBoundingClientRect();var T=c.right-c.left,D=c.bottom-c.top,P=k.test(d.cssFloat+d.display)||f.display=="flex"&&f["flex-direction"].indexOf("row")===0,I=l.offsetWidth>e.offsetWidth,E=l.offsetHeight>e.offsetHeight,$=(P?(t.clientX-c.left)/T:(t.clientY-c.top)/D)>.5,F=l.nextElementSibling,H=false;if(P){var L=e.offsetTop,O=l.offsetTop;if(L===O){H=l.previousElementSibling===e&&!I||$&&I}else if(l.previousElementSibling===e||e.previousElementSibling===l){H=(t.clientY-c.top)/D>.5}else{H=O>L}}else if(!_){H=F!==e&&!E||$&&E}var R=Z(r,a,e,h,l,c,t,H);if(R!==false){if(R===1||R===-1){H=R===1}A=true;M(tt,30);j(b,w);if(!e.contains(a)){if(H&&!F){a.appendChild(e)}else{l.parentNode.insertBefore(e,H?F:l)}}i=e.parentNode;this._animate(h,e);this._animate(c,l)}}}},_animate:function(t,e){var i=this.options.animation;if(i){var n=e.getBoundingClientRect();if(t.nodeType===1){t=t.getBoundingClientRect()}X(e,"transition","none");X(e,"transform","translate3d("+(t.left-n.left)+"px,"+(t.top-n.top)+"px,0)");e.offsetWidth;X(e,"transition","all "+i+"ms");X(e,"transform","translate3d(0,0,0)");clearTimeout(e.animated);e.animated=M(function(){X(e,"transition","");X(e,"transform","");e.animated=false},i)}},_offUpEvents:function(){var t=this.el.ownerDocument;V(T,"touchmove",this._onTouchMove);V(T,"pointermove",this._onTouchMove);V(t,"mouseup",this._onDrop);V(t,"touchend",this._onDrop);V(t,"pointerup",this._onDrop);V(t,"touchcancel",this._onDrop);V(t,"pointercancel",this._onDrop);V(t,"selectstart",this)},_onDrop:function(t){var a=this.el,l=this.options;clearInterval(this._loopId);clearInterval(y.pid);clearTimeout(this._dragStartTimer);ct(this._cloneId);ct(this._dragStartId);V(T,"mouseover",this);V(T,"mousemove",this._onTouchMove);if(this.nativeDraggable){V(T,"drop",this);V(a,"dragstart",this._onDragStart)}this._offUpEvents();if(t){if(x){t.preventDefault();!l.dropBubble&&t.stopPropagation()}n&&n.parentNode&&n.parentNode.removeChild(n);if(r===i||B.active.lastPullMode!=="clone"){s&&s.parentNode&&s.parentNode.removeChild(s)}if(e){if(this.nativeDraggable){V(e,"dragend",this)}J(e);e.style["will-change"]="";G(e,this.options.ghostClass,false);G(e,this.options.chosenClass,false);Q(this,r,"unchoose",e,i,r,p);if(r!==i){m=nt(e,l.draggable);if(m>=0){Q(null,i,"add",e,i,r,p,m);Q(this,r,"remove",e,i,r,p,m);Q(null,i,"sort",e,i,r,p,m);Q(this,r,"sort",e,i,r,p,m)}}else{if(e.nextSibling!==o){m=nt(e,l.draggable);if(m>=0){Q(this,r,"update",e,i,r,p,m);Q(this,r,"sort",e,i,r,p,m)}}}if(B.active){if(m==null||m===-1){m=p}Q(this,r,"end",e,i,r,p,m);this.save()}}}this._nulling()},_nulling:function(){r=e=i=n=o=s=a=l=h=b=w=x=m=u=d=v=g=B.active=null;O.forEach(function(t){t.checked=true});O.length=0},handleEvent:function(t){switch(t.type){case"drop":case"dragend":this._onDrop(t);break;case"dragover":case"dragenter":if(e){this._onDragOver(t);U(t)}break;case"mouseover":this._onDrop(t);break;case"selectstart":t.preventDefault();break}},toArray:function(){var t=[],e,i=this.el.children,n=0,s=i.length,r=this.options;for(;n<s;n++){e=i[n];if(W(e,r.draggable,this.el)){t.push(e.getAttribute(r.dataIdAttr)||it(e))}}return t},sort:function(t){var e={},i=this.el;this.toArray().forEach(function(t,n){var s=i.children[n];if(W(s,this.options.draggable,i)){e[t]=s}},this);t.forEach(function(t){if(e[t]){i.removeChild(e[t]);i.appendChild(e[t])}})},save:function(){var t=this.options.store;t&&t.set(this)},closest:function(t,e){return W(t,e||this.options.draggable,this.el)},option:function(t,e){var i=this.options;if(e===void 0){return i[t]}else{i[t]=e;if(t==="group"){N(i)}}},destroy:function(){var t=this.el;t[C]=null;V(t,"mousedown",this._onTapStart);V(t,"touchstart",this._onTapStart);V(t,"pointerdown",this._onTapStart);if(this.nativeDraggable){V(t,"dragover",this);V(t,"dragenter",this)}Array.prototype.forEach.call(t.querySelectorAll("[draggable]"),function(t){t.removeAttribute("draggable")});R.splice(R.indexOf(this._onDragOver),1);this._onDrop();this.el=t=null}};function j(t,i){if(t.lastPullMode!=="clone"){i=true}if(s&&s.state!==i){X(s,"display",i?"none":"");if(!i){if(s.state){if(t.options.group.revertClone){r.insertBefore(s,o);t._animate(e,s)}else{r.insertBefore(s,e)}}}s.state=i}}function W(t,e,i){if(t){i=i||T;do{if(e===">*"&&t.parentNode===i||st(t,e)){return t}}while(t=Y(t))}return null}function Y(t){var e=t.host;return e&&e.nodeType?e:t.parentNode}function U(t){if(t.dataTransfer){t.dataTransfer.dropEffect="move"}t.preventDefault()}function q(t,e,i){t.addEventListener(e,i,E)}function V(t,e,i){t.removeEventListener(e,i,E)}function G(t,e,i){if(t){if(t.classList){t.classList[i?"add":"remove"](e)}else{var n=(" "+t.className+" ").replace(_," ").replace(" "+e+" "," ");t.className=(n+(i?" "+e:"")).replace(_," ")}}}function X(t,e,i){var n=t&&t.style;if(n){if(i===void 0){if(T.defaultView&&T.defaultView.getComputedStyle){i=T.defaultView.getComputedStyle(t,"")}else if(t.currentStyle){i=t.currentStyle}return e===void 0?i:i[e]}else{if(!(e in n)){e="-webkit-"+e}n[e]=i+(typeof i==="string"?"":"px")}}}function K(t,e,i){if(t){var n=t.getElementsByTagName(e),s=0,r=n.length;if(i){for(;s<r;s++){i(n[s],s)}}return n}return[]}function Q(t,e,i,n,r,o,a,l){t=t||e[C];var h=T.createEvent("Event"),c=t.options,u="on"+i.charAt(0).toUpperCase()+i.substr(1);h.initEvent(i,true,true);h.to=r||e;h.from=o||e;h.item=n||e;h.clone=s;h.oldIndex=a;h.newIndex=l;e.dispatchEvent(h);if(c[u]){c[u].call(t,h)}}function Z(t,e,i,n,s,r,o,a){var l,h=t[C],c=h.options.onMove,u;l=T.createEvent("Event");l.initEvent("move",true,true);l.to=e;l.from=t;l.dragged=i;l.draggedRect=n;l.related=s||e;l.relatedRect=r||e.getBoundingClientRect();l.willInsertAfter=a;t.dispatchEvent(l);if(c){u=c.call(h,l,o)}return u}function J(t){t.draggable=false}function tt(){A=false}function et(t,e){var i=t.lastElementChild,n=i.getBoundingClientRect();return e.clientY-(n.top+n.height)>5||e.clientX-(n.left+n.width)>5}function it(t){var e=t.tagName+t.className+t.src+t.href+t.textContent,i=e.length,n=0;while(i--){n+=e.charCodeAt(i)}return n.toString(36)}function nt(t,e){var i=0;if(!t||!t.parentNode){return-1}while(t&&(t=t.previousElementSibling)){if(t.nodeName.toUpperCase()!=="TEMPLATE"&&(e===">*"||st(t,e))){i++}}return i}function st(t,e){if(t){e=e.split(".");var i=e.shift().toUpperCase(),n=new RegExp("\\s("+e.join("|")+")(?=\\s)","g");return(i===""||t.nodeName.toUpperCase()==i)&&(!e.length||((" "+t.className+" ").match(n)||[]).length==e.length)}return false}function rt(t,e){var i,n;return function(){if(i===void 0){i=arguments;n=this;M(function(){if(i.length===1){t.call(n,i[0])}else{t.apply(n,i)}i=void 0},e)}}}function ot(t,e){if(t&&e){for(var i in e){if(e.hasOwnProperty(i)){t[i]=e[i]}}}return t}function at(t){if(I&&I.dom){return I.dom(t).cloneNode(true)}else if(P){return P(t).clone(true)[0]}else{return t.cloneNode(true)}}function lt(t){var e=t.getElementsByTagName("input");var i=e.length;while(i--){var n=e[i];n.checked&&O.push(n)}}function ht(t){return M(t,0)}function ct(t){return clearTimeout(t)}q(T,"touchmove",function(t){if(B.active){t.preventDefault()}});try{window.addEventListener("test",null,Object.defineProperty({},"passive",{get:function(){E={capture:false,passive:false}}}))}catch(t){}B.utils={on:q,off:V,css:X,find:K,is:function(t,e){return!!W(t,e,t)},extend:ot,throttle:rt,closest:W,toggleClass:G,clone:at,index:nt,nextTick:ht,cancelNextTick:ct};B.create=function(t,e){return new B(t,e)};B.version="1.6.1";return B});(function(t){if(typeof define==="function"&&define.amd){define(["jquery"],t)}else{t(jQuery)}})(function(t){t.ui=t.ui||{};var e=t.ui.version="1.12.1";var i=0;var n=Array.prototype.slice;t.cleanData=function(e){return function(i){var n,s,r;for(r=0;(s=i[r])!=null;r++){try{n=t._data(s,"events");if(n&&n.remove){t(s).triggerHandler("remove")}}catch(t){}}e(i)}}(t.cleanData);t.widget=function(e,i,n){var s,r,o;var a={};var l=e.split(".")[0];e=e.split(".")[1];var h=l+"-"+e;if(!n){n=i;i=t.Widget}if(t.isArray(n)){n=t.extend.apply(null,[{}].concat(n))}t.expr[":"][h.toLowerCase()]=function(e){return!!t.data(e,h)};t[l]=t[l]||{};s=t[l][e];r=t[l][e]=function(t,e){if(!this._createWidget){return new r(t,e)}if(arguments.length){this._createWidget(t,e)}};t.extend(r,s,{version:n.version,_proto:t.extend({},n),_childConstructors:[]});o=new i;o.options=t.widget.extend({},o.options);t.each(n,function(e,n){if(!t.isFunction(n)){a[e]=n;return}a[e]=function(){function t(){return i.prototype[e].apply(this,arguments)}function s(t){return i.prototype[e].apply(this,t)}return function(){var e=this._super;var i=this._superApply;var r;this._super=t;this._superApply=s;r=n.apply(this,arguments);this._super=e;this._superApply=i;return r}}()});r.prototype=t.widget.extend(o,{widgetEventPrefix:s?o.widgetEventPrefix||e:e},a,{constructor:r,namespace:l,widgetName:e,widgetFullName:h});if(s){t.each(s._childConstructors,function(e,i){var n=i.prototype;t.widget(n.namespace+"."+n.widgetName,r,i._proto)});delete s._childConstructors}else{i._childConstructors.push(r)}t.widget.bridge(e,r);return r};t.widget.extend=function(e){var i=n.call(arguments,1);var s=0;var r=i.length;var o;var a;for(;s<r;s++){for(o in i[s]){a=i[s][o];if(i[s].hasOwnProperty(o)&&a!==undefined){if(t.isPlainObject(a)){e[o]=t.isPlainObject(e[o])?t.widget.extend({},e[o],a):t.widget.extend({},a)}else{e[o]=a}}}}return e};t.widget.bridge=function(e,i){var s=i.prototype.widgetFullName||e;t.fn[e]=function(r){var o=typeof r==="string";var a=n.call(arguments,1);var l=this;if(o){if(!this.length&&r==="instance"){l=undefined}else{this.each(function(){var i;var n=t.data(this,s);if(r==="instance"){l=n;return false}if(!n){return t.error("cannot call methods on "+e+" prior to initialization; "+"attempted to call method '"+r+"'")}if(!t.isFunction(n[r])||r.charAt(0)==="_"){return t.error("no such method '"+r+"' for "+e+" widget instance")}i=n[r].apply(n,a);if(i!==n&&i!==undefined){l=i&&i.jquery?l.pushStack(i.get()):i;return false}})}}else{if(a.length){r=t.widget.extend.apply(null,[r].concat(a))}this.each(function(){var e=t.data(this,s);if(e){e.option(r||{});if(e._init){e._init()}}else{t.data(this,s,new i(r,this))}})}return l}};t.Widget=function(){};t.Widget._childConstructors=[];t.Widget.prototype={widgetName:"widget",widgetEventPrefix:"",defaultElement:"<div>",options:{classes:{},disabled:false,create:null},_createWidget:function(e,n){n=t(n||this.defaultElement||this)[0];this.element=t(n);this.uuid=i++;this.eventNamespace="."+this.widgetName+this.uuid;this.bindings=t();this.hoverable=t();this.focusable=t();this.classesElementLookup={};if(n!==this){t.data(n,this.widgetFullName,this);this._on(true,this.element,{remove:function(t){if(t.target===n){this.destroy()}}});this.document=t(n.style?n.ownerDocument:n.document||n);this.window=t(this.document[0].defaultView||this.document[0].parentWindow)}this.options=t.widget.extend({},this.options,this._getCreateOptions(),e);this._create();if(this.options.disabled){this._setOptionDisabled(this.options.disabled)}this._trigger("create",null,this._getCreateEventData());this._init()},_getCreateOptions:function(){return{}},_getCreateEventData:t.noop,_create:t.noop,_init:t.noop,destroy:function(){var e=this;this._destroy();t.each(this.classesElementLookup,function(t,i){e._removeClass(i,t)});this.element.off(this.eventNamespace).removeData(this.widgetFullName);this.widget().off(this.eventNamespace).removeAttr("aria-disabled");this.bindings.off(this.eventNamespace)},_destroy:t.noop,widget:function(){return this.element},option:function(e,i){var n=e;var s;var r;var o;if(arguments.length===0){return t.widget.extend({},this.options)}if(typeof e==="string"){n={};s=e.split(".");e=s.shift();if(s.length){r=n[e]=t.widget.extend({},this.options[e]);for(o=0;o<s.length-1;o++){r[s[o]]=r[s[o]]||{};r=r[s[o]]}e=s.pop();if(arguments.length===1){return r[e]===undefined?null:r[e]}r[e]=i}else{if(arguments.length===1){return this.options[e]===undefined?null:this.options[e]}n[e]=i}}this._setOptions(n);return this},_setOptions:function(t){var e;for(e in t){this._setOption(e,t[e])}return this},_setOption:function(t,e){if(t==="classes"){this._setOptionClasses(e)}this.options[t]=e;if(t==="disabled"){this._setOptionDisabled(e)}return this},_setOptionClasses:function(e){var i,n,s;for(i in e){s=this.classesElementLookup[i];if(e[i]===this.options.classes[i]||!s||!s.length){continue}n=t(s.get());this._removeClass(s,i);n.addClass(this._classes({element:n,keys:i,classes:e,add:true}))}},_setOptionDisabled:function(t){this._toggleClass(this.widget(),this.widgetFullName+"-disabled",null,!!t);if(t){this._removeClass(this.hoverable,null,"ui-state-hover");this._removeClass(this.focusable,null,"ui-state-focus")}},enable:function(){return this._setOptions({disabled:false})},disable:function(){return this._setOptions({disabled:true})},_classes:function(e){var i=[];var n=this;e=t.extend({element:this.element,classes:this.options.classes||{}},e);function s(s,r){var o,a;for(a=0;a<s.length;a++){o=n.classesElementLookup[s[a]]||t();if(e.add){o=t(t.unique(o.get().concat(e.element.get())))}else{o=t(o.not(e.element).get())}n.classesElementLookup[s[a]]=o;i.push(s[a]);if(r&&e.classes[s[a]]){i.push(e.classes[s[a]])}}}this._on(e.element,{remove:"_untrackClassesElement"});if(e.keys){s(e.keys.match(/\S+/g)||[],true)}if(e.extra){s(e.extra.match(/\S+/g)||[])}return i.join(" ")},_untrackClassesElement:function(e){var i=this;t.each(i.classesElementLookup,function(n,s){if(t.inArray(e.target,s)!==-1){i.classesElementLookup[n]=t(s.not(e.target).get())}})},_removeClass:function(t,e,i){return this._toggleClass(t,e,i,false)},_addClass:function(t,e,i){return this._toggleClass(t,e,i,true)},_toggleClass:function(t,e,i,n){n=typeof n==="boolean"?n:i;var s=typeof t==="string"||t===null,r={extra:s?e:i,keys:s?t:e,element:s?this.element:t,add:n};r.element.toggleClass(this._classes(r),n);return this},_on:function(e,i,n){var s;var r=this;if(typeof e!=="boolean"){n=i;i=e;e=false}if(!n){n=i;i=this.element;s=this.widget()}else{i=s=t(i);this.bindings=this.bindings.add(i)}t.each(n,function(n,o){function a(){if(!e&&(r.options.disabled===true||t(this).hasClass("ui-state-disabled"))){return}return(typeof o==="string"?r[o]:o).apply(r,arguments)}if(typeof o!=="string"){a.guid=o.guid=o.guid||a.guid||t.guid++}var l=n.match(/^([\w:-]*)\s*(.*)$/);var h=l[1]+r.eventNamespace;var c=l[2];if(c){s.on(h,c,a)}else{i.on(h,a)}})},_off:function(e,i){i=(i||"").split(" ").join(this.eventNamespace+" ")+this.eventNamespace;e.off(i).off(i);this.bindings=t(this.bindings.not(e).get());this.focusable=t(this.focusable.not(e).get());this.hoverable=t(this.hoverable.not(e).get())},_delay:function(t,e){function i(){return(typeof t==="string"?n[t]:t).apply(n,arguments)}var n=this;return setTimeout(i,e||0)},_hoverable:function(e){this.hoverable=this.hoverable.add(e);this._on(e,{mouseenter:function(e){this._addClass(t(e.currentTarget),null,"ui-state-hover")},mouseleave:function(e){this._removeClass(t(e.currentTarget),null,"ui-state-hover")}})},_focusable:function(e){this.focusable=this.focusable.add(e);this._on(e,{focusin:function(e){this._addClass(t(e.currentTarget),null,"ui-state-focus")},focusout:function(e){this._removeClass(t(e.currentTarget),null,"ui-state-focus")}})},_trigger:function(e,i,n){var s,r;var o=this.options[e];n=n||{};i=t.Event(i);i.type=(e===this.widgetEventPrefix?e:this.widgetEventPrefix+e).toLowerCase();i.target=this.element[0];r=i.originalEvent;if(r){for(s in r){if(!(s in i)){i[s]=r[s]}}}this.element.trigger(i,n);return!(t.isFunction(o)&&o.apply(this.element[0],[i].concat(n))===false||i.isDefaultPrevented())}};t.each({show:"fadeIn",hide:"fadeOut"},function(e,i){t.Widget.prototype["_"+e]=function(n,s,r){if(typeof s==="string"){s={effect:s}}var o;var a=!s?e:s===true||typeof s==="number"?i:s.effect||i;s=s||{};if(typeof s==="number"){s={duration:s}}o=!t.isEmptyObject(s);s.complete=r;if(s.delay){n.delay(s.delay)}if(o&&t.effects&&t.effects.effect[a]){n[e](s)}else if(a!==e&&n[a]){n[a](s.duration,s.easing,r)}else{n.queue(function(i){t(this)[e]();if(r){r.call(n[0])}i()})}}});var s=t.widget;var r=t.extend(t.expr[":"],{data:t.expr.createPseudo?t.expr.createPseudo(function(e){return function(i){return!!t.data(i,e)}}):function(e,i,n){return!!t.data(e,n[3])}});var o=t.fn.extend({disableSelection:function(){var t="onselectstart"in document.createElement("div")?"selectstart":"mousedown";return function(){return this.on(t+".ui-disableSelection",function(t){t.preventDefault()})}}(),enableSelection:function(){return this.off(".ui-disableSelection")}});var a=t.fn.scrollParent=function(e){var i=this.css("position"),n=i==="absolute",s=e?/(auto|scroll|hidden)/:/(auto|scroll)/,r=this.parents().filter(function(){var e=t(this);if(n&&e.css("position")==="static"){return false}return s.test(e.css("overflow")+e.css("overflow-y")+e.css("overflow-x"))}).eq(0);return i==="fixed"||!r.length?t(this[0].ownerDocument||document):r};var l=t.ui.ie=!!/msie [\w.]+/.exec(navigator.userAgent.toLowerCase());var h=false;t(document).on("mouseup",function(){h=false});var c=t.widget("ui.mouse",{version:"1.12.1",options:{cancel:"input, textarea, button, select, option",distance:1,delay:0},_mouseInit:function(){var e=this;this.element.on("mousedown."+this.widgetName,function(t){return e._mouseDown(t)}).on("click."+this.widgetName,function(i){if(true===t.data(i.target,e.widgetName+".preventClickEvent")){t.removeData(i.target,e.widgetName+".preventClickEvent");i.stopImmediatePropagation();return false}});this.started=false},_mouseDestroy:function(){this.element.off("."+this.widgetName);if(this._mouseMoveDelegate){this.document.off("mousemove."+this.widgetName,this._mouseMoveDelegate).off("mouseup."+this.widgetName,this._mouseUpDelegate)}},_mouseDown:function(e){if(h){return}this._mouseMoved=false;this._mouseStarted&&this._mouseUp(e);this._mouseDownEvent=e;var i=this,n=e.which===1,s=typeof this.options.cancel==="string"&&e.target.nodeName?t(e.target).closest(this.options.cancel).length:false;if(!n||s||!this._mouseCapture(e)){return true}this.mouseDelayMet=!this.options.delay;if(!this.mouseDelayMet){this._mouseDelayTimer=setTimeout(function(){i.mouseDelayMet=true},this.options.delay)}if(this._mouseDistanceMet(e)&&this._mouseDelayMet(e)){this._mouseStarted=this._mouseStart(e)!==false;if(!this._mouseStarted){e.preventDefault();return true}}if(true===t.data(e.target,this.widgetName+".preventClickEvent")){t.removeData(e.target,this.widgetName+".preventClickEvent")}this._mouseMoveDelegate=function(t){return i._mouseMove(t)};this._mouseUpDelegate=function(t){return i._mouseUp(t)};this.document.on("mousemove."+this.widgetName,this._mouseMoveDelegate).on("mouseup."+this.widgetName,this._mouseUpDelegate);e.preventDefault();h=true;return true},_mouseMove:function(e){if(this._mouseMoved){if(t.ui.ie&&(!document.documentMode||document.documentMode<9)&&!e.button){return this._mouseUp(e)}else if(!e.which){if(e.originalEvent.altKey||e.originalEvent.ctrlKey||e.originalEvent.metaKey||e.originalEvent.shiftKey){this.ignoreMissingWhich=true}else if(!this.ignoreMissingWhich){return this._mouseUp(e)}}}if(e.which||e.button){this._mouseMoved=true}if(this._mouseStarted){this._mouseDrag(e);return e.preventDefault()}if(this._mouseDistanceMet(e)&&this._mouseDelayMet(e)){this._mouseStarted=this._mouseStart(this._mouseDownEvent,e)!==false;this._mouseStarted?this._mouseDrag(e):this._mouseUp(e)}return!this._mouseStarted},_mouseUp:function(e){this.document.off("mousemove."+this.widgetName,this._mouseMoveDelegate).off("mouseup."+this.widgetName,this._mouseUpDelegate);if(this._mouseStarted){this._mouseStarted=false;if(e.target===this._mouseDownEvent.target){t.data(e.target,this.widgetName+".preventClickEvent",true)}this._mouseStop(e)}if(this._mouseDelayTimer){clearTimeout(this._mouseDelayTimer);delete this._mouseDelayTimer}this.ignoreMissingWhich=false;h=false;e.preventDefault()},_mouseDistanceMet:function(t){return Math.max(Math.abs(this._mouseDownEvent.pageX-t.pageX),Math.abs(this._mouseDownEvent.pageY-t.pageY))>=this.options.distance},_mouseDelayMet:function(){return this.mouseDelayMet},_mouseStart:function(){},_mouseDrag:function(){},_mouseStop:function(){},_mouseCapture:function(){return true}});var u=t.ui.plugin={add:function(e,i,n){var s,r=t.ui[e].prototype;for(s in n){r.plugins[s]=r.plugins[s]||[];r.plugins[s].push([i,n[s]])}},call:function(t,e,i,n){var s,r=t.plugins[e];if(!r){return}if(!n&&(!t.element[0].parentNode||t.element[0].parentNode.nodeType===11)){return}for(s=0;s<r.length;s++){if(t.options[r[s][0]]){r[s][1].apply(t.element,i)}}}};var d=t.ui.safeActiveElement=function(t){var e;try{e=t.activeElement}catch(i){e=t.body}if(!e){e=t.body}if(!e.nodeName){e=t.body}return e};var f=t.ui.safeBlur=function(e){if(e&&e.nodeName.toLowerCase()!=="body"){t(e).trigger("blur")}};t.widget("ui.draggable",t.ui.mouse,{version:"1.12.1",widgetEventPrefix:"drag",options:{addClasses:true,appendTo:"parent",axis:false,connectToSortable:false,containment:false,cursor:"auto",cursorAt:false,grid:false,handle:false,helper:"original",iframeFix:false,opacity:false,refreshPositions:false,revert:false,revertDuration:500,scope:"default",scroll:true,scrollSensitivity:20,scrollSpeed:20,snap:false,snapMode:"both",snapTolerance:20,stack:false,zIndex:false,drag:null,start:null,stop:null},_create:function(){if(this.options.helper==="original"){this._setPositionRelative()}if(this.options.addClasses){this._addClass("ui-draggable")}this._setHandleClassName();this._mouseInit()},_setOption:function(t,e){this._super(t,e);if(t==="handle"){this._removeHandleClassName();this._setHandleClassName()}},_destroy:function(){if((this.helper||this.element).is(".ui-draggable-dragging")){this.destroyOnClear=true;return}this._removeHandleClassName();this._mouseDestroy()},_mouseCapture:function(e){var i=this.options;if(this.helper||i.disabled||t(e.target).closest(".ui-resizable-handle").length>0){return false}this.handle=this._getHandle(e);if(!this.handle){return false}this._blurActiveElement(e);this._blockFrames(i.iframeFix===true?"iframe":i.iframeFix);return true},_blockFrames:function(e){this.iframeBlocks=this.document.find(e).map(function(){var e=t(this);return t("<div>").css("position","absolute").appendTo(e.parent()).outerWidth(e.outerWidth()).outerHeight(e.outerHeight()).offset(e.offset())[0]})},_unblockFrames:function(){if(this.iframeBlocks){this.iframeBlocks.remove();delete this.iframeBlocks}},_blurActiveElement:function(e){var i=t.ui.safeActiveElement(this.document[0]),n=t(e.target);if(n.closest(i).length){return}t.ui.safeBlur(i)},_mouseStart:function(e){var i=this.options;this.helper=this._createHelper(e);this._addClass(this.helper,"ui-draggable-dragging");this._cacheHelperProportions();if(t.ui.ddmanager){t.ui.ddmanager.current=this}this._cacheMargins();this.cssPosition=this.helper.css("position");this.scrollParent=this.helper.scrollParent(true);this.offsetParent=this.helper.offsetParent();this.hasFixedAncestor=this.helper.parents().filter(function(){return t(this).css("position")==="fixed"}).length>0;this.positionAbs=this.element.offset();this._refreshOffsets(e);this.originalPosition=this.position=this._generatePosition(e,false);this.originalPageX=e.pageX;this.originalPageY=e.pageY;i.cursorAt&&this._adjustOffsetFromHelper(i.cursorAt);this._setContainment();if(this._trigger("start",e)===false){this._clear();return false}this._cacheHelperProportions();if(t.ui.ddmanager&&!i.dropBehaviour){t.ui.ddmanager.prepareOffsets(this,e)}this._mouseDrag(e,true);if(t.ui.ddmanager){t.ui.ddmanager.dragStart(this,e)}return true},_refreshOffsets:function(t){this.offset={top:this.positionAbs.top-this.margins.top,left:this.positionAbs.left-this.margins.left,scroll:false,parent:this._getParentOffset(),relative:this._getRelativeOffset()};this.offset.click={left:t.pageX-this.offset.left,top:t.pageY-this.offset.top}},_mouseDrag:function(e,i){if(this.hasFixedAncestor){this.offset.parent=this._getParentOffset()}this.position=this._generatePosition(e,true);this.positionAbs=this._convertPositionTo("absolute");if(!i){var n=this._uiHash();if(this._trigger("drag",e,n)===false){this._mouseUp(new t.Event("mouseup",e));return false}this.position=n.position}this.helper[0].style.left=this.position.left+"px";this.helper[0].style.top=this.position.top+"px";if(t.ui.ddmanager){t.ui.ddmanager.drag(this,e)}return false},_mouseStop:function(e){var i=this,n=false;if(t.ui.ddmanager&&!this.options.dropBehaviour){n=t.ui.ddmanager.drop(this,e)}if(this.dropped){n=this.dropped;this.dropped=false}if(this.options.revert==="invalid"&&!n||this.options.revert==="valid"&&n||this.options.revert===true||t.isFunction(this.options.revert)&&this.options.revert.call(this.element,n)){t(this.helper).animate(this.originalPosition,parseInt(this.options.revertDuration,10),function(){if(i._trigger("stop",e)!==false){i._clear()}})}else{if(this._trigger("stop",e)!==false){this._clear()}}return false},_mouseUp:function(e){this._unblockFrames();if(t.ui.ddmanager){t.ui.ddmanager.dragStop(this,e)}if(this.handleElement.is(e.target)){this.element.trigger("focus")}return t.ui.mouse.prototype._mouseUp.call(this,e)},cancel:function(){if(this.helper.is(".ui-draggable-dragging")){this._mouseUp(new t.Event("mouseup",{target:this.element[0]}))}else{this._clear()}return this},_getHandle:function(e){return this.options.handle?!!t(e.target).closest(this.element.find(this.options.handle)).length:true},_setHandleClassName:function(){this.handleElement=this.options.handle?this.element.find(this.options.handle):this.element;this._addClass(this.handleElement,"ui-draggable-handle")},_removeHandleClassName:function(){this._removeClass(this.handleElement,"ui-draggable-handle")},_createHelper:function(e){var i=this.options,n=t.isFunction(i.helper),s=n?t(i.helper.apply(this.element[0],[e])):i.helper==="clone"?this.element.clone().removeAttr("id"):this.element;if(!s.parents("body").length){s.appendTo(i.appendTo==="parent"?this.element[0].parentNode:i.appendTo)}if(n&&s[0]===this.element[0]){this._setPositionRelative()}if(s[0]!==this.element[0]&&!/(fixed|absolute)/.test(s.css("position"))){s.css("position","absolute")}return s},_setPositionRelative:function(){if(!/^(?:r|a|f)/.test(this.element.css("position"))){this.element[0].style.position="relative"}},_adjustOffsetFromHelper:function(e){if(typeof e==="string"){e=e.split(" ")}if(t.isArray(e)){e={left:+e[0],top:+e[1]||0}}if("left"in e){this.offset.click.left=e.left+this.margins.left}if("right"in e){this.offset.click.left=this.helperProportions.width-e.right+this.margins.left}if("top"in e){this.offset.click.top=e.top+this.margins.top}if("bottom"in e){this.offset.click.top=this.helperProportions.height-e.bottom+this.margins.top}},_isRootNode:function(t){return/(html|body)/i.test(t.tagName)||t===this.document[0]},_getParentOffset:function(){var e=this.offsetParent.offset(),i=this.document[0];if(this.cssPosition==="absolute"&&this.scrollParent[0]!==i&&t.contains(this.scrollParent[0],this.offsetParent[0])){e.left+=this.scrollParent.scrollLeft();e.top+=this.scrollParent.scrollTop()}if(this._isRootNode(this.offsetParent[0])){e={top:0,left:0}}return{top:e.top+(parseInt(this.offsetParent.css("borderTopWidth"),10)||0),left:e.left+(parseInt(this.offsetParent.css("borderLeftWidth"),10)||0)}},_getRelativeOffset:function(){if(this.cssPosition!=="relative"){return{top:0,left:0}}var t=this.element.position(),e=this._isRootNode(this.scrollParent[0]);return{top:t.top-(parseInt(this.helper.css("top"),10)||0)+(!e?this.scrollParent.scrollTop():0),left:t.left-(parseInt(this.helper.css("left"),10)||0)+(!e?this.scrollParent.scrollLeft():0)}},_cacheMargins:function(){this.margins={left:parseInt(this.element.css("marginLeft"),10)||0,top:parseInt(this.element.css("marginTop"),10)||0,right:parseInt(this.element.css("marginRight"),10)||0,bottom:parseInt(this.element.css("marginBottom"),10)||0}},_cacheHelperProportions:function(){this.helperProportions={width:this.helper.outerWidth(),height:this.helper.outerHeight()}},_setContainment:function(){var e,i,n,s=this.options,r=this.document[0];this.relativeContainer=null;if(!s.containment){this.containment=null;return}if(s.containment==="window"){this.containment=[t(window).scrollLeft()-this.offset.relative.left-this.offset.parent.left,t(window).scrollTop()-this.offset.relative.top-this.offset.parent.top,t(window).scrollLeft()+t(window).width()-this.helperProportions.width-this.margins.left,t(window).scrollTop()+(t(window).height()||r.body.parentNode.scrollHeight)-this.helperProportions.height-this.margins.top];return}if(s.containment==="document"){this.containment=[0,0,t(r).width()-this.helperProportions.width-this.margins.left,(t(r).height()||r.body.parentNode.scrollHeight)-this.helperProportions.height-this.margins.top];return}if(s.containment.constructor===Array){this.containment=s.containment;return}if(s.containment==="parent"){s.containment=this.helper[0].parentNode}i=t(s.containment);n=i[0];if(!n){return}e=/(scroll|auto)/.test(i.css("overflow"));this.containment=[(parseInt(i.css("borderLeftWidth"),10)||0)+(parseInt(i.css("paddingLeft"),10)||0),(parseInt(i.css("borderTopWidth"),10)||0)+(parseInt(i.css("paddingTop"),10)||0),(e?Math.max(n.scrollWidth,n.offsetWidth):n.offsetWidth)-(parseInt(i.css("borderRightWidth"),10)||0)-(parseInt(i.css("paddingRight"),10)||0)-this.helperProportions.width-this.margins.left-this.margins.right,(e?Math.max(n.scrollHeight,n.offsetHeight):n.offsetHeight)-(parseInt(i.css("borderBottomWidth"),10)||0)-(parseInt(i.css("paddingBottom"),10)||0)-this.helperProportions.height-this.margins.top-this.margins.bottom];this.relativeContainer=i},_convertPositionTo:function(t,e){if(!e){e=this.position}var i=t==="absolute"?1:-1,n=this._isRootNode(this.scrollParent[0]);return{top:e.top+this.offset.relative.top*i+this.offset.parent.top*i-(this.cssPosition==="fixed"?-this.offset.scroll.top:n?0:this.offset.scroll.top)*i,left:e.left+this.offset.relative.left*i+this.offset.parent.left*i-(this.cssPosition==="fixed"?-this.offset.scroll.left:n?0:this.offset.scroll.left)*i}},_generatePosition:function(t,e){var i,n,s,r,o=this.options,a=this._isRootNode(this.scrollParent[0]),l=t.pageX,h=t.pageY;if(!a||!this.offset.scroll){this.offset.scroll={top:this.scrollParent.scrollTop(),left:this.scrollParent.scrollLeft()}}if(e){if(this.containment){if(this.relativeContainer){n=this.relativeContainer.offset();i=[this.containment[0]+n.left,this.containment[1]+n.top,this.containment[2]+n.left,this.containment[3]+n.top]}else{i=this.containment}if(t.pageX-this.offset.click.left<i[0]){l=i[0]+this.offset.click.left}if(t.pageY-this.offset.click.top<i[1]){h=i[1]+this.offset.click.top}if(t.pageX-this.offset.click.left>i[2]){l=i[2]+this.offset.click.left}if(t.pageY-this.offset.click.top>i[3]){h=i[3]+this.offset.click.top}}if(o.grid){s=o.grid[1]?this.originalPageY+Math.round((h-this.originalPageY)/o.grid[1])*o.grid[1]:this.originalPageY;h=i?s-this.offset.click.top>=i[1]||s-this.offset.click.top>i[3]?s:s-this.offset.click.top>=i[1]?s-o.grid[1]:s+o.grid[1]:s;r=o.grid[0]?this.originalPageX+Math.round((l-this.originalPageX)/o.grid[0])*o.grid[0]:this.originalPageX;l=i?r-this.offset.click.left>=i[0]||r-this.offset.click.left>i[2]?r:r-this.offset.click.left>=i[0]?r-o.grid[0]:r+o.grid[0]:r}if(o.axis==="y"){l=this.originalPageX}if(o.axis==="x"){h=this.originalPageY}}return{top:h-this.offset.click.top-this.offset.relative.top-this.offset.parent.top+(this.cssPosition==="fixed"?-this.offset.scroll.top:a?0:this.offset.scroll.top),left:l-this.offset.click.left-this.offset.relative.left-this.offset.parent.left+(this.cssPosition==="fixed"?-this.offset.scroll.left:a?0:this.offset.scroll.left)}},_clear:function(){this._removeClass(this.helper,"ui-draggable-dragging");if(this.helper[0]!==this.element[0]&&!this.cancelHelperRemoval){this.helper.remove()}this.helper=null;this.cancelHelperRemoval=false;if(this.destroyOnClear){this.destroy()}},_trigger:function(e,i,n){n=n||this._uiHash();t.ui.plugin.call(this,e,[i,n,this],true);if(/^(drag|start|stop)/.test(e)){this.positionAbs=this._convertPositionTo("absolute");n.offset=this.positionAbs}return t.Widget.prototype._trigger.call(this,e,i,n)},plugins:{},_uiHash:function(){return{helper:this.helper,position:this.position,originalPosition:this.originalPosition,offset:this.positionAbs}}});t.ui.plugin.add("draggable","connectToSortable",{start:function(e,i,n){var s=t.extend({},i,{item:n.element});n.sortables=[];t(n.options.connectToSortable).each(function(){var i=t(this).sortable("instance");if(i&&!i.options.disabled){n.sortables.push(i);i.refreshPositions();i._trigger("activate",e,s)}})},stop:function(e,i,n){var s=t.extend({},i,{item:n.element});n.cancelHelperRemoval=false;t.each(n.sortables,function(){var t=this;if(t.isOver){t.isOver=0;n.cancelHelperRemoval=true;t.cancelHelperRemoval=false;t._storedCSS={position:t.placeholder.css("position"),top:t.placeholder.css("top"),left:t.placeholder.css("left")};t._mouseStop(e);t.options.helper=t.options._helper}else{t.cancelHelperRemoval=true;t._trigger("deactivate",e,s)}})},drag:function(e,i,n){t.each(n.sortables,function(){var s=false,r=this;r.positionAbs=n.positionAbs;r.helperProportions=n.helperProportions;r.offset.click=n.offset.click;if(r._intersectsWith(r.containerCache)){s=true;t.each(n.sortables,function(){this.positionAbs=n.positionAbs;this.helperProportions=n.helperProportions;this.offset.click=n.offset.click;if(this!==r&&this._intersectsWith(this.containerCache)&&t.contains(r.element[0],this.element[0])){s=false}return s})}if(s){if(!r.isOver){r.isOver=1;n._parent=i.helper.parent();r.currentItem=i.helper.appendTo(r.element).data("ui-sortable-item",true);r.options._helper=r.options.helper;r.options.helper=function(){return i.helper[0]};e.target=r.currentItem[0];r._mouseCapture(e,true);r._mouseStart(e,true,true);r.offset.click.top=n.offset.click.top;r.offset.click.left=n.offset.click.left;r.offset.parent.left-=n.offset.parent.left-r.offset.parent.left;r.offset.parent.top-=n.offset.parent.top-r.offset.parent.top;n._trigger("toSortable",e);n.dropped=r.element;t.each(n.sortables,function(){this.refreshPositions()});n.currentItem=n.element;r.fromOutside=n}if(r.currentItem){r._mouseDrag(e);i.position=r.position}}else{if(r.isOver){r.isOver=0;r.cancelHelperRemoval=true;r.options._revert=r.options.revert;r.options.revert=false;r._trigger("out",e,r._uiHash(r));r._mouseStop(e,true);r.options.revert=r.options._revert;r.options.helper=r.options._helper;if(r.placeholder){r.placeholder.remove()}i.helper.appendTo(n._parent);n._refreshOffsets(e);i.position=n._generatePosition(e,true);n._trigger("fromSortable",e);n.dropped=false;t.each(n.sortables,function(){this.refreshPositions()})}}})}});t.ui.plugin.add("draggable","cursor",{start:function(e,i,n){var s=t("body"),r=n.options;if(s.css("cursor")){r._cursor=s.css("cursor")}s.css("cursor",r.cursor)},stop:function(e,i,n){var s=n.options;if(s._cursor){t("body").css("cursor",s._cursor)}}});t.ui.plugin.add("draggable","opacity",{start:function(e,i,n){var s=t(i.helper),r=n.options;if(s.css("opacity")){r._opacity=s.css("opacity")}s.css("opacity",r.opacity)},stop:function(e,i,n){var s=n.options;if(s._opacity){t(i.helper).css("opacity",s._opacity)}}});t.ui.plugin.add("draggable","scroll",{start:function(t,e,i){if(!i.scrollParentNotHidden){i.scrollParentNotHidden=i.helper.scrollParent(false)}if(i.scrollParentNotHidden[0]!==i.document[0]&&i.scrollParentNotHidden[0].tagName!=="HTML"){i.overflowOffset=i.scrollParentNotHidden.offset()}},drag:function(e,i,n){var s=n.options,r=false,o=n.scrollParentNotHidden[0],a=n.document[0];if(o!==a&&o.tagName!=="HTML"){if(!s.axis||s.axis!=="x"){if(n.overflowOffset.top+o.offsetHeight-e.pageY<s.scrollSensitivity){o.scrollTop=r=o.scrollTop+s.scrollSpeed}else if(e.pageY-n.overflowOffset.top<s.scrollSensitivity){o.scrollTop=r=o.scrollTop-s.scrollSpeed}}if(!s.axis||s.axis!=="y"){if(n.overflowOffset.left+o.offsetWidth-e.pageX<s.scrollSensitivity){o.scrollLeft=r=o.scrollLeft+s.scrollSpeed}else if(e.pageX-n.overflowOffset.left<s.scrollSensitivity){o.scrollLeft=r=o.scrollLeft-s.scrollSpeed}}}else{if(!s.axis||s.axis!=="x"){if(e.pageY-t(a).scrollTop()<s.scrollSensitivity){r=t(a).scrollTop(t(a).scrollTop()-s.scrollSpeed)}else if(t(window).height()-(e.pageY-t(a).scrollTop())<s.scrollSensitivity){r=t(a).scrollTop(t(a).scrollTop()+s.scrollSpeed)}}if(!s.axis||s.axis!=="y"){if(e.pageX-t(a).scrollLeft()<s.scrollSensitivity){r=t(a).scrollLeft(t(a).scrollLeft()-s.scrollSpeed)}else if(t(window).width()-(e.pageX-t(a).scrollLeft())<s.scrollSensitivity){r=t(a).scrollLeft(t(a).scrollLeft()+s.scrollSpeed)}}}if(r!==false&&t.ui.ddmanager&&!s.dropBehaviour){t.ui.ddmanager.prepareOffsets(n,e)}}});t.ui.plugin.add("draggable","snap",{start:function(e,i,n){var s=n.options;n.snapElements=[];t(s.snap.constructor!==String?s.snap.items||":data(ui-draggable)":s.snap).each(function(){var e=t(this),i=e.offset();if(this!==n.element[0]){n.snapElements.push({item:this,width:e.outerWidth(),height:e.outerHeight(),top:i.top,left:i.left})}})},drag:function(e,i,n){var s,r,o,a,l,h,c,u,d,f,p=n.options,m=p.snapTolerance,g=i.offset.left,v=g+n.helperProportions.width,y=i.offset.top,b=y+n.helperProportions.height;for(d=n.snapElements.length-1;d>=0;d--){l=n.snapElements[d].left-n.margins.left;h=l+n.snapElements[d].width;c=n.snapElements[d].top-n.margins.top;u=c+n.snapElements[d].height;if(v<l-m||g>h+m||b<c-m||y>u+m||!t.contains(n.snapElements[d].item.ownerDocument,n.snapElements[d].item)){if(n.snapElements[d].snapping){n.options.snap.release&&n.options.snap.release.call(n.element,e,t.extend(n._uiHash(),{snapItem:n.snapElements[d].item}))}n.snapElements[d].snapping=false;continue}if(p.snapMode!=="inner"){s=Math.abs(c-b)<=m;r=Math.abs(u-y)<=m;o=Math.abs(l-v)<=m;a=Math.abs(h-g)<=m;if(s){i.position.top=n._convertPositionTo("relative",{top:c-n.helperProportions.height,left:0}).top}if(r){i.position.top=n._convertPositionTo("relative",{top:u,left:0}).top}if(o){i.position.left=n._convertPositionTo("relative",{top:0,left:l-n.helperProportions.width}).left}if(a){i.position.left=n._convertPositionTo("relative",{top:0,left:h}).left}}f=s||r||o||a;if(p.snapMode!=="outer"){s=Math.abs(c-y)<=m;r=Math.abs(u-b)<=m;o=Math.abs(l-g)<=m;a=Math.abs(h-v)<=m;if(s){i.position.top=n._convertPositionTo("relative",{top:c,left:0}).top}if(r){i.position.top=n._convertPositionTo("relative",{top:u-n.helperProportions.height,left:0}).top}if(o){i.position.left=n._convertPositionTo("relative",{top:0,left:l}).left}if(a){i.position.left=n._convertPositionTo("relative",{top:0,left:h-n.helperProportions.width}).left}}if(!n.snapElements[d].snapping&&(s||r||o||a||f)){n.options.snap.snap&&n.options.snap.snap.call(n.element,e,t.extend(n._uiHash(),{snapItem:n.snapElements[d].item}))}n.snapElements[d].snapping=s||r||o||a||f}}});t.ui.plugin.add("draggable","stack",{start:function(e,i,n){var s,r=n.options,o=t.makeArray(t(r.stack)).sort(function(e,i){return(parseInt(t(e).css("zIndex"),10)||0)-(parseInt(t(i).css("zIndex"),10)||0)});if(!o.length){return}s=parseInt(t(o[0]).css("zIndex"),10)||0;t(o).each(function(e){t(this).css("zIndex",s+e)});this.css("zIndex",s+o.length)}});t.ui.plugin.add("draggable","zIndex",{start:function(e,i,n){var s=t(i.helper),r=n.options;if(s.css("zIndex")){r._zIndex=s.css("zIndex")}s.css("zIndex",r.zIndex)},stop:function(e,i,n){var s=n.options;if(s._zIndex){t(i.helper).css("zIndex",s._zIndex)}}});var p=t.ui.draggable;t.widget("ui.droppable",{version:"1.12.1",widgetEventPrefix:"drop",options:{accept:"*",addClasses:true,greedy:false,scope:"default",tolerance:"intersect",activate:null,deactivate:null,drop:null,out:null,over:null},_create:function(){var e,i=this.options,n=i.accept;this.isover=false;this.isout=true;this.accept=t.isFunction(n)?n:function(t){return t.is(n)};this.proportions=function(){if(arguments.length){e=arguments[0]}else{return e?e:e={width:this.element[0].offsetWidth,height:this.element[0].offsetHeight}}};this._addToManager(i.scope);i.addClasses&&this._addClass("ui-droppable")},_addToManager:function(e){t.ui.ddmanager.droppables[e]=t.ui.ddmanager.droppables[e]||[];t.ui.ddmanager.droppables[e].push(this)},_splice:function(t){var e=0;for(;e<t.length;e++){if(t[e]===this){t.splice(e,1)}}},_destroy:function(){var e=t.ui.ddmanager.droppables[this.options.scope];this._splice(e)},_setOption:function(e,i){if(e==="accept"){this.accept=t.isFunction(i)?i:function(t){return t.is(i)}}else if(e==="scope"){var n=t.ui.ddmanager.droppables[this.options.scope];this._splice(n);this._addToManager(i)}this._super(e,i)},_activate:function(e){var i=t.ui.ddmanager.current;this._addActiveClass();if(i){this._trigger("activate",e,this.ui(i))}},_deactivate:function(e){var i=t.ui.ddmanager.current;this._removeActiveClass();if(i){this._trigger("deactivate",e,this.ui(i))}},_over:function(e){var i=t.ui.ddmanager.current;if(!i||(i.currentItem||i.element)[0]===this.element[0]){return}if(this.accept.call(this.element[0],i.currentItem||i.element)){this._addHoverClass();this._trigger("over",e,this.ui(i))}},_out:function(e){var i=t.ui.ddmanager.current;if(!i||(i.currentItem||i.element)[0]===this.element[0]){return}if(this.accept.call(this.element[0],i.currentItem||i.element)){this._removeHoverClass();this._trigger("out",e,this.ui(i))}},_drop:function(e,i){var n=i||t.ui.ddmanager.current,s=false;if(!n||(n.currentItem||n.element)[0]===this.element[0]){return false}this.element.find(":data(ui-droppable)").not(".ui-draggable-dragging").each(function(){var i=t(this).droppable("instance");if(i.options.greedy&&!i.options.disabled&&i.options.scope===n.options.scope&&i.accept.call(i.element[0],n.currentItem||n.element)&&m(n,t.extend(i,{offset:i.element.offset()}),i.options.tolerance,e)){s=true;return false}});if(s){return false}if(this.accept.call(this.element[0],n.currentItem||n.element)){this._removeActiveClass();this._removeHoverClass();this._trigger("drop",e,this.ui(n));return this.element}return false},ui:function(t){return{draggable:t.currentItem||t.element,helper:t.helper,position:t.position,offset:t.positionAbs}},_addHoverClass:function(){this._addClass("ui-droppable-hover")},_removeHoverClass:function(){this._removeClass("ui-droppable-hover")},_addActiveClass:function(){this._addClass("ui-droppable-active")},_removeActiveClass:function(){this._removeClass("ui-droppable-active")}});var m=t.ui.intersect=function(){function t(t,e,i){return t>=e&&t<e+i}return function(e,i,n,s){if(!i.offset){return false}var r=(e.positionAbs||e.position.absolute).left+e.margins.left,o=(e.positionAbs||e.position.absolute).top+e.margins.top,a=r+e.helperProportions.width,l=o+e.helperProportions.height,h=i.offset.left,c=i.offset.top,u=h+i.proportions().width,d=c+i.proportions().height;switch(n){case"fit":return h<=r&&a<=u&&c<=o&&l<=d;case"intersect":return h<r+e.helperProportions.width/2&&a-e.helperProportions.width/2<u&&c<o+e.helperProportions.height/2&&l-e.helperProportions.height/2<d;case"pointer":return t(s.pageY,c,i.proportions().height)&&t(s.pageX,h,i.proportions().width);case"touch":return(o>=c&&o<=d||l>=c&&l<=d||o<c&&l>d)&&(r>=h&&r<=u||a>=h&&a<=u||r<h&&a>u);default:return false}}}();t.ui.ddmanager={current:null,droppables:{default:[]},prepareOffsets:function(e,i){var n,s,r=t.ui.ddmanager.droppables[e.options.scope]||[],o=i?i.type:null,a=(e.currentItem||e.element).find(":data(ui-droppable)").addBack();t:for(n=0;n<r.length;n++){if(r[n].options.disabled||e&&!r[n].accept.call(r[n].element[0],e.currentItem||e.element)){continue}for(s=0;s<a.length;s++){if(a[s]===r[n].element[0]){r[n].proportions().height=0;continue t}}r[n].visible=r[n].element.css("display")!=="none";if(!r[n].visible){continue}if(o==="mousedown"){r[n]._activate.call(r[n],i)}r[n].offset=r[n].element.offset();r[n].proportions({width:r[n].element[0].offsetWidth,height:r[n].element[0].offsetHeight})}},drop:function(e,i){var n=false;t.each((t.ui.ddmanager.droppables[e.options.scope]||[]).slice(),function(){if(!this.options){return}if(!this.options.disabled&&this.visible&&m(e,this,this.options.tolerance,i)){n=this._drop.call(this,i)||n}if(!this.options.disabled&&this.visible&&this.accept.call(this.element[0],e.currentItem||e.element)){this.isout=true;this.isover=false;this._deactivate.call(this,i)}});return n},dragStart:function(e,i){e.element.parentsUntil("body").on("scroll.droppable",function(){if(!e.options.refreshPositions){t.ui.ddmanager.prepareOffsets(e,i)}})},drag:function(e,i){if(e.options.refreshPositions){t.ui.ddmanager.prepareOffsets(e,i)}t.each(t.ui.ddmanager.droppables[e.options.scope]||[],function(){if(this.options.disabled||this.greedyChild||!this.visible){return}var n,s,r,o=m(e,this,this.options.tolerance,i),a=!o&&this.isover?"isout":o&&!this.isover?"isover":null;if(!a){return}if(this.options.greedy){s=this.options.scope;r=this.element.parents(":data(ui-droppable)").filter(function(){return t(this).droppable("instance").options.scope===s});if(r.length){n=t(r[0]).droppable("instance");n.greedyChild=a==="isover"}}if(n&&a==="isover"){n.isover=false;n.isout=true;n._out.call(n,i)}this[a]=true;this[a==="isout"?"isover":"isout"]=false;this[a==="isover"?"_over":"_out"].call(this,i);if(n&&a==="isout"){n.isout=false;n.isover=true;n._over.call(n,i)}})},dragStop:function(e,i){e.element.parentsUntil("body").off("scroll.droppable");if(!e.options.refreshPositions){t.ui.ddmanager.prepareOffsets(e,i)}}};if(t.uiBackCompat!==false){t.widget("ui.droppable",t.ui.droppable,{options:{hoverClass:false,activeClass:false},_addActiveClass:function(){this._super();if(this.options.activeClass){this.element.addClass(this.options.activeClass)}},_removeActiveClass:function(){this._super();if(this.options.activeClass){this.element.removeClass(this.options.activeClass)}},_addHoverClass:function(){this._super();if(this.options.hoverClass){this.element.addClass(this.options.hoverClass)}},_removeHoverClass:function(){this._super();if(this.options.hoverClass){this.element.removeClass(this.options.hoverClass)}}})}var g=t.ui.droppable;t.widget("ui.resizable",t.ui.mouse,{version:"1.12.1",widgetEventPrefix:"resize",options:{alsoResize:false,animate:false,animateDuration:"slow",animateEasing:"swing",aspectRatio:false,autoHide:false,classes:{"ui-resizable-se":"ui-icon ui-icon-gripsmall-diagonal-se"},containment:false,ghost:false,grid:false,handles:"e,s,se",helper:false,maxHeight:null,maxWidth:null,minHeight:10,minWidth:10,zIndex:90,resize:null,start:null,stop:null},_num:function(t){return parseFloat(t)||0},_isNumber:function(t){return!isNaN(parseFloat(t))},_hasScroll:function(e,i){if(t(e).css("overflow")==="hidden"){return false}var n=i&&i==="left"?"scrollLeft":"scrollTop",s=false;if(e[n]>0){return true}e[n]=1;s=e[n]>0;e[n]=0;return s},_create:function(){var e,i=this.options,n=this;this._addClass("ui-resizable");t.extend(this,{_aspectRatio:!!i.aspectRatio,aspectRatio:i.aspectRatio,originalElement:this.element,_proportionallyResizeElements:[],_helper:i.helper||i.ghost||i.animate?i.helper||"ui-resizable-helper":null});if(this.element[0].nodeName.match(/^(canvas|textarea|input|select|button|img)$/i)){this.element.wrap(t("<div class='ui-wrapper' style='overflow: hidden;'></div>").css({position:this.element.css("position"),width:this.element.outerWidth(),height:this.element.outerHeight(),top:this.element.css("top"),left:this.element.css("left")}));this.element=this.element.parent().data("ui-resizable",this.element.resizable("instance"));this.elementIsWrapper=true;e={marginTop:this.originalElement.css("marginTop"),marginRight:this.originalElement.css("marginRight"),marginBottom:this.originalElement.css("marginBottom"),marginLeft:this.originalElement.css("marginLeft")};this.element.css(e);this.originalElement.css("margin",0);this.originalResizeStyle=this.originalElement.css("resize");this.originalElement.css("resize","none");this._proportionallyResizeElements.push(this.originalElement.css({position:"static",zoom:1,display:"block"}));this.originalElement.css(e);this._proportionallyResize()}this._setupHandles();if(i.autoHide){t(this.element).on("mouseenter",function(){if(i.disabled){return}n._removeClass("ui-resizable-autohide");n._handles.show()}).on("mouseleave",function(){if(i.disabled){return}if(!n.resizing){n._addClass("ui-resizable-autohide");n._handles.hide()}})}this._mouseInit()},_destroy:function(){this._mouseDestroy();var e,i=function(e){t(e).removeData("resizable").removeData("ui-resizable").off(".resizable").find(".ui-resizable-handle").remove()};if(this.elementIsWrapper){i(this.element);e=this.element;this.originalElement.css({position:e.css("position"),width:e.outerWidth(),height:e.outerHeight(),top:e.css("top"),left:e.css("left")}).insertAfter(e);e.remove()}this.originalElement.css("resize",this.originalResizeStyle);i(this.originalElement);return this},_setOption:function(t,e){this._super(t,e);switch(t){case"handles":this._removeHandles();this._setupHandles();break;default:break}},_setupHandles:function(){var e=this.options,i,n,s,r,o,a=this;this.handles=e.handles||(!t(".ui-resizable-handle",this.element).length?"e,s,se":{n:".ui-resizable-n",e:".ui-resizable-e",s:".ui-resizable-s",w:".ui-resizable-w",se:".ui-resizable-se",sw:".ui-resizable-sw",ne:".ui-resizable-ne",nw:".ui-resizable-nw"});this._handles=t();if(this.handles.constructor===String){if(this.handles==="all"){this.handles="n,e,s,w,se,sw,ne,nw"}s=this.handles.split(",");this.handles={};for(n=0;n<s.length;n++){i=t.trim(s[n]);r="ui-resizable-"+i;o=t("<div>");this._addClass(o,"ui-resizable-handle "+r);o.css({zIndex:e.zIndex});this.handles[i]=".ui-resizable-"+i;this.element.append(o)}}this._renderAxis=function(e){var i,n,s,r;e=e||this.element;for(i in this.handles){if(this.handles[i].constructor===String){this.handles[i]=this.element.children(this.handles[i]).first().show()}else if(this.handles[i].jquery||this.handles[i].nodeType){this.handles[i]=t(this.handles[i]);this._on(this.handles[i],{mousedown:a._mouseDown})}if(this.elementIsWrapper&&this.originalElement[0].nodeName.match(/^(textarea|input|select|button)$/i)){n=t(this.handles[i],this.element);r=/sw|ne|nw|se|n|s/.test(i)?n.outerHeight():n.outerWidth();s=["padding",/ne|nw|n/.test(i)?"Top":/se|sw|s/.test(i)?"Bottom":/^e$/.test(i)?"Right":"Left"].join("");e.css(s,r);this._proportionallyResize()}this._handles=this._handles.add(this.handles[i])}};this._renderAxis(this.element);this._handles=this._handles.add(this.element.find(".ui-resizable-handle"));this._handles.disableSelection();this._handles.on("mouseover",function(){if(!a.resizing){if(this.className){o=this.className.match(/ui-resizable-(se|sw|ne|nw|n|e|s|w)/i)}a.axis=o&&o[1]?o[1]:"se"}});if(e.autoHide){this._handles.hide();this._addClass("ui-resizable-autohide")}},_removeHandles:function(){this._handles.remove()},_mouseCapture:function(e){var i,n,s=false;for(i in this.handles){n=t(this.handles[i])[0];if(n===e.target||t.contains(n,e.target)){s=true}}return!this.options.disabled&&s},_mouseStart:function(e){var i,n,s,r=this.options,o=this.element;this.resizing=true;this._renderProxy();i=this._num(this.helper.css("left"));n=this._num(this.helper.css("top"));if(r.containment){i+=t(r.containment).scrollLeft()||0;n+=t(r.containment).scrollTop()||0}this.offset=this.helper.offset();this.position={left:i,top:n};this.size=this._helper?{width:this.helper.width(),height:this.helper.height()}:{width:o.width(),height:o.height()};this.originalSize=this._helper?{width:o.outerWidth(),height:o.outerHeight()}:{width:o.width(),height:o.height()};this.sizeDiff={width:o.outerWidth()-o.width(),height:o.outerHeight()-o.height()};this.originalPosition={left:i,top:n};this.originalMousePosition={left:e.pageX,top:e.pageY};this.aspectRatio=typeof r.aspectRatio==="number"?r.aspectRatio:this.originalSize.width/this.originalSize.height||1;s=t(".ui-resizable-"+this.axis).css("cursor");t("body").css("cursor",s==="auto"?this.axis+"-resize":s);this._addClass("ui-resizable-resizing");this._propagate("start",e);return true},_mouseDrag:function(e){var i,n,s=this.originalMousePosition,r=this.axis,o=e.pageX-s.left||0,a=e.pageY-s.top||0,l=this._change[r];this._updatePrevProperties();if(!l){return false}i=l.apply(this,[e,o,a]);this._updateVirtualBoundaries(e.shiftKey);if(this._aspectRatio||e.shiftKey){i=this._updateRatio(i,e)}i=this._respectSize(i,e);this._updateCache(i);this._propagate("resize",e);n=this._applyChanges();if(!this._helper&&this._proportionallyResizeElements.length){this._proportionallyResize()}if(!t.isEmptyObject(n)){this._updatePrevProperties();this._trigger("resize",e,this.ui());this._applyChanges()}return false},_mouseStop:function(e){this.resizing=false;var i,n,s,r,o,a,l,h=this.options,c=this;if(this._helper){i=this._proportionallyResizeElements;n=i.length&&/textarea/i.test(i[0].nodeName);s=n&&this._hasScroll(i[0],"left")?0:c.sizeDiff.height;r=n?0:c.sizeDiff.width;o={width:c.helper.width()-r,height:c.helper.height()-s};a=parseFloat(c.element.css("left"))+(c.position.left-c.originalPosition.left)||null;l=parseFloat(c.element.css("top"))+(c.position.top-c.originalPosition.top)||null;if(!h.animate){this.element.css(t.extend(o,{top:l,left:a}))}c.helper.height(c.size.height);c.helper.width(c.size.width);if(this._helper&&!h.animate){this._proportionallyResize()}}t("body").css("cursor","auto");this._removeClass("ui-resizable-resizing");this._propagate("stop",e);if(this._helper){this.helper.remove()}return false},_updatePrevProperties:function(){this.prevPosition={top:this.position.top,left:this.position.left};this.prevSize={width:this.size.width,height:this.size.height}},_applyChanges:function(){var t={};if(this.position.top!==this.prevPosition.top){t.top=this.position.top+"px"}if(this.position.left!==this.prevPosition.left){t.left=this.position.left+"px"}if(this.size.width!==this.prevSize.width){t.width=this.size.width+"px"}if(this.size.height!==this.prevSize.height){t.height=this.size.height+"px"}this.helper.css(t);return t},_updateVirtualBoundaries:function(t){var e,i,n,s,r,o=this.options;r={minWidth:this._isNumber(o.minWidth)?o.minWidth:0,maxWidth:this._isNumber(o.maxWidth)?o.maxWidth:Infinity,minHeight:this._isNumber(o.minHeight)?o.minHeight:0,maxHeight:this._isNumber(o.maxHeight)?o.maxHeight:Infinity};if(this._aspectRatio||t){e=r.minHeight*this.aspectRatio;n=r.minWidth/this.aspectRatio;i=r.maxHeight*this.aspectRatio;s=r.maxWidth/this.aspectRatio;if(e>r.minWidth){r.minWidth=e}if(n>r.minHeight){r.minHeight=n}if(i<r.maxWidth){r.maxWidth=i}if(s<r.maxHeight){r.maxHeight=s}}this._vBoundaries=r},_updateCache:function(t){this.offset=this.helper.offset();if(this._isNumber(t.left)){this.position.left=t.left}if(this._isNumber(t.top)){this.position.top=t.top}if(this._isNumber(t.height)){this.size.height=t.height}if(this._isNumber(t.width)){this.size.width=t.width}},_updateRatio:function(t){var e=this.position,i=this.size,n=this.axis;if(this._isNumber(t.height)){t.width=t.height*this.aspectRatio}else if(this._isNumber(t.width)){t.height=t.width/this.aspectRatio}if(n==="sw"){t.left=e.left+(i.width-t.width);t.top=null}if(n==="nw"){t.top=e.top+(i.height-t.height);t.left=e.left+(i.width-t.width)}return t},_respectSize:function(t){var e=this._vBoundaries,i=this.axis,n=this._isNumber(t.width)&&e.maxWidth&&e.maxWidth<t.width,s=this._isNumber(t.height)&&e.maxHeight&&e.maxHeight<t.height,r=this._isNumber(t.width)&&e.minWidth&&e.minWidth>t.width,o=this._isNumber(t.height)&&e.minHeight&&e.minHeight>t.height,a=this.originalPosition.left+this.originalSize.width,l=this.originalPosition.top+this.originalSize.height,h=/sw|nw|w/.test(i),c=/nw|ne|n/.test(i);if(r){t.width=e.minWidth}if(o){t.height=e.minHeight}if(n){t.width=e.maxWidth}if(s){t.height=e.maxHeight}if(r&&h){t.left=a-e.minWidth}if(n&&h){t.left=a-e.maxWidth}if(o&&c){t.top=l-e.minHeight}if(s&&c){t.top=l-e.maxHeight}if(!t.width&&!t.height&&!t.left&&t.top){t.top=null}else if(!t.width&&!t.height&&!t.top&&t.left){t.left=null}return t},_getPaddingPlusBorderDimensions:function(t){var e=0,i=[],n=[t.css("borderTopWidth"),t.css("borderRightWidth"),t.css("borderBottomWidth"),t.css("borderLeftWidth")],s=[t.css("paddingTop"),t.css("paddingRight"),t.css("paddingBottom"),t.css("paddingLeft")];for(;e<4;e++){i[e]=parseFloat(n[e])||0;i[e]+=parseFloat(s[e])||0}return{height:i[0]+i[2],width:i[1]+i[3]}},_proportionallyResize:function(){if(!this._proportionallyResizeElements.length){return}var t,e=0,i=this.helper||this.element;for(;e<this._proportionallyResizeElements.length;e++){t=this._proportionallyResizeElements[e];if(!this.outerDimensions){this.outerDimensions=this._getPaddingPlusBorderDimensions(t)}t.css({height:i.height()-this.outerDimensions.height||0,width:i.width()-this.outerDimensions.width||0})}},_renderProxy:function(){var e=this.element,i=this.options;this.elementOffset=e.offset();if(this._helper){this.helper=this.helper||t("<div style='overflow:hidden;'></div>");this._addClass(this.helper,this._helper);this.helper.css({width:this.element.outerWidth(),height:this.element.outerHeight(),position:"absolute",left:this.elementOffset.left+"px",top:this.elementOffset.top+"px",zIndex:++i.zIndex});this.helper.appendTo("body").disableSelection()}else{this.helper=this.element}},_change:{e:function(t,e){return{width:this.originalSize.width+e}},w:function(t,e){var i=this.originalSize,n=this.originalPosition;return{left:n.left+e,width:i.width-e}},n:function(t,e,i){var n=this.originalSize,s=this.originalPosition;return{top:s.top+i,height:n.height-i}},s:function(t,e,i){return{height:this.originalSize.height+i}},se:function(e,i,n){return t.extend(this._change.s.apply(this,arguments),this._change.e.apply(this,[e,i,n]))},sw:function(e,i,n){return t.extend(this._change.s.apply(this,arguments),this._change.w.apply(this,[e,i,n]))},ne:function(e,i,n){return t.extend(this._change.n.apply(this,arguments),this._change.e.apply(this,[e,i,n]))},nw:function(e,i,n){return t.extend(this._change.n.apply(this,arguments),this._change.w.apply(this,[e,i,n]))}},_propagate:function(e,i){t.ui.plugin.call(this,e,[i,this.ui()]);e!=="resize"&&this._trigger(e,i,this.ui())},plugins:{},ui:function(){return{originalElement:this.originalElement,element:this.element,helper:this.helper,position:this.position,size:this.size,originalSize:this.originalSize,originalPosition:this.originalPosition}}});t.ui.plugin.add("resizable","animate",{stop:function(e){var i=t(this).resizable("instance"),n=i.options,s=i._proportionallyResizeElements,r=s.length&&/textarea/i.test(s[0].nodeName),o=r&&i._hasScroll(s[0],"left")?0:i.sizeDiff.height,a=r?0:i.sizeDiff.width,l={width:i.size.width-a,height:i.size.height-o},h=parseFloat(i.element.css("left"))+(i.position.left-i.originalPosition.left)||null,c=parseFloat(i.element.css("top"))+(i.position.top-i.originalPosition.top)||null;i.element.animate(t.extend(l,c&&h?{top:c,left:h}:{}),{duration:n.animateDuration,easing:n.animateEasing,step:function(){var n={width:parseFloat(i.element.css("width")),height:parseFloat(i.element.css("height")),top:parseFloat(i.element.css("top")),left:parseFloat(i.element.css("left"))};if(s&&s.length){t(s[0]).css({width:n.width,height:n.height})}i._updateCache(n);i._propagate("resize",e)}})}});t.ui.plugin.add("resizable","containment",{start:function(){var e,i,n,s,r,o,a,l=t(this).resizable("instance"),h=l.options,c=l.element,u=h.containment,d=u instanceof t?u.get(0):/parent/.test(u)?c.parent().get(0):u;if(!d){return}l.containerElement=t(d);if(/document/.test(u)||u===document){l.containerOffset={left:0,top:0};l.containerPosition={left:0,top:0};l.parentData={element:t(document),left:0,top:0,width:t(document).width(),height:t(document).height()||document.body.parentNode.scrollHeight}}else{e=t(d);i=[];t(["Top","Right","Left","Bottom"]).each(function(t,n){i[t]=l._num(e.css("padding"+n))});l.containerOffset=e.offset();l.containerPosition=e.position();l.containerSize={height:e.innerHeight()-i[3],width:e.innerWidth()-i[1]};n=l.containerOffset;s=l.containerSize.height;r=l.containerSize.width;o=l._hasScroll(d,"left")?d.scrollWidth:r;a=l._hasScroll(d)?d.scrollHeight:s;l.parentData={element:d,left:n.left,top:n.top,width:o,height:a}}},resize:function(e){var i,n,s,r,o=t(this).resizable("instance"),a=o.options,l=o.containerOffset,h=o.position,c=o._aspectRatio||e.shiftKey,u={top:0,left:0},d=o.containerElement,f=true;if(d[0]!==document&&/static/.test(d.css("position"))){u=l}if(h.left<(o._helper?l.left:0)){o.size.width=o.size.width+(o._helper?o.position.left-l.left:o.position.left-u.left);if(c){o.size.height=o.size.width/o.aspectRatio;f=false}o.position.left=a.helper?l.left:0}if(h.top<(o._helper?l.top:0)){o.size.height=o.size.height+(o._helper?o.position.top-l.top:o.position.top);if(c){o.size.width=o.size.height*o.aspectRatio;f=false}o.position.top=o._helper?l.top:0}s=o.containerElement.get(0)===o.element.parent().get(0);r=/relative|absolute/.test(o.containerElement.css("position"));if(s&&r){o.offset.left=o.parentData.left+o.position.left;o.offset.top=o.parentData.top+o.position.top}else{o.offset.left=o.element.offset().left;o.offset.top=o.element.offset().top}i=Math.abs(o.sizeDiff.width+(o._helper?o.offset.left-u.left:o.offset.left-l.left));n=Math.abs(o.sizeDiff.height+(o._helper?o.offset.top-u.top:o.offset.top-l.top));if(i+o.size.width>=o.parentData.width){o.size.width=o.parentData.width-i;if(c){o.size.height=o.size.width/o.aspectRatio;f=false}}if(n+o.size.height>=o.parentData.height){o.size.height=o.parentData.height-n;if(c){o.size.width=o.size.height*o.aspectRatio;f=false}}if(!f){o.position.left=o.prevPosition.left;o.position.top=o.prevPosition.top;o.size.width=o.prevSize.width;o.size.height=o.prevSize.height}},stop:function(){var e=t(this).resizable("instance"),i=e.options,n=e.containerOffset,s=e.containerPosition,r=e.containerElement,o=t(e.helper),a=o.offset(),l=o.outerWidth()-e.sizeDiff.width,h=o.outerHeight()-e.sizeDiff.height;if(e._helper&&!i.animate&&/relative/.test(r.css("position"))){t(this).css({left:a.left-s.left-n.left,width:l,height:h})}if(e._helper&&!i.animate&&/static/.test(r.css("position"))){t(this).css({left:a.left-s.left-n.left,width:l,height:h})}}});t.ui.plugin.add("resizable","alsoResize",{start:function(){var e=t(this).resizable("instance"),i=e.options;t(i.alsoResize).each(function(){var e=t(this);e.data("ui-resizable-alsoresize",{width:parseFloat(e.width()),height:parseFloat(e.height()),left:parseFloat(e.css("left")),top:parseFloat(e.css("top"))})})},resize:function(e,i){var n=t(this).resizable("instance"),s=n.options,r=n.originalSize,o=n.originalPosition,a={height:n.size.height-r.height||0,width:n.size.width-r.width||0,top:n.position.top-o.top||0,left:n.position.left-o.left||0};t(s.alsoResize).each(function(){var e=t(this),n=t(this).data("ui-resizable-alsoresize"),s={},r=e.parents(i.originalElement[0]).length?["width","height"]:["width","height","top","left"];t.each(r,function(t,e){var i=(n[e]||0)+(a[e]||0);if(i&&i>=0){s[e]=i||null}});e.css(s)})},stop:function(){t(this).removeData("ui-resizable-alsoresize")}});t.ui.plugin.add("resizable","ghost",{start:function(){var e=t(this).resizable("instance"),i=e.size;e.ghost=e.originalElement.clone();e.ghost.css({opacity:.25,display:"block",position:"relative",height:i.height,width:i.width,margin:0,left:0,top:0});e._addClass(e.ghost,"ui-resizable-ghost");if(t.uiBackCompat!==false&&typeof e.options.ghost==="string"){e.ghost.addClass(this.options.ghost)}e.ghost.appendTo(e.helper)},resize:function(){var e=t(this).resizable("instance");if(e.ghost){e.ghost.css({position:"relative",height:e.size.height,width:e.size.width})}},stop:function(){var e=t(this).resizable("instance");if(e.ghost&&e.helper){e.helper.get(0).removeChild(e.ghost.get(0))}}});t.ui.plugin.add("resizable","grid",{resize:function(){var e,i=t(this).resizable("instance"),n=i.options,s=i.size,r=i.originalSize,o=i.originalPosition,a=i.axis,l=typeof n.grid==="number"?[n.grid,n.grid]:n.grid,h=l[0]||1,c=l[1]||1,u=Math.round((s.width-r.width)/h)*h,d=Math.round((s.height-r.height)/c)*c,f=r.width+u,p=r.height+d,m=n.maxWidth&&n.maxWidth<f,g=n.maxHeight&&n.maxHeight<p,v=n.minWidth&&n.minWidth>f,y=n.minHeight&&n.minHeight>p;n.grid=l;if(v){f+=h}if(y){p+=c}if(m){f-=h}if(g){p-=c}if(/^(se|s|e)$/.test(a)){i.size.width=f;i.size.height=p}else if(/^(ne)$/.test(a)){i.size.width=f;i.size.height=p;i.position.top=o.top-d}else if(/^(sw)$/.test(a)){i.size.width=f;i.size.height=p;i.position.left=o.left-u}else{if(p-c<=0||f-h<=0){e=i._getPaddingPlusBorderDimensions(this)}if(p-c>0){i.size.height=p;i.position.top=o.top-d}else{p=c-e.height;i.size.height=p;i.position.top=o.top+r.height-p}if(f-h>0){i.size.width=f;i.position.left=o.left-u}else{f=h-e.width;i.size.width=f;i.position.left=o.left+r.width-f}}}});var v=t.ui.resizable;var y=t.widget("ui.selectable",t.ui.mouse,{version:"1.12.1",options:{appendTo:"body",autoRefresh:true,distance:0,filter:"*",tolerance:"touch",selected:null,selecting:null,start:null,stop:null,unselected:null,unselecting:null},_create:function(){var e=this;this._addClass("ui-selectable");this.dragged=false;this.refresh=function(){e.elementPos=t(e.element[0]).offset();e.selectees=t(e.options.filter,e.element[0]);e._addClass(e.selectees,"ui-selectee");e.selectees.each(function(){var i=t(this),n=i.offset(),s={left:n.left-e.elementPos.left,top:n.top-e.elementPos.top};t.data(this,"selectable-item",{element:this,$element:i,left:s.left,top:s.top,right:s.left+i.outerWidth(),bottom:s.top+i.outerHeight(),startselected:false,selected:i.hasClass("ui-selected"),selecting:i.hasClass("ui-selecting"),unselecting:i.hasClass("ui-unselecting")})})};this.refresh();this._mouseInit();this.helper=t("<div>");this._addClass(this.helper,"ui-selectable-helper")},_destroy:function(){this.selectees.removeData("selectable-item");this._mouseDestroy()},_mouseStart:function(e){var i=this,n=this.options;this.opos=[e.pageX,e.pageY];this.elementPos=t(this.element[0]).offset();if(this.options.disabled){return}this.selectees=t(n.filter,this.element[0]);this._trigger("start",e);t(n.appendTo).append(this.helper);this.helper.css({left:e.pageX,top:e.pageY,width:0,height:0});if(n.autoRefresh){this.refresh()}this.selectees.filter(".ui-selected").each(function(){var n=t.data(this,"selectable-item");n.startselected=true;if(!e.metaKey&&!e.ctrlKey){i._removeClass(n.$element,"ui-selected");n.selected=false;i._addClass(n.$element,"ui-unselecting");n.unselecting=true;i._trigger("unselecting",e,{unselecting:n.element})}});t(e.target).parents().addBack().each(function(){var n,s=t.data(this,"selectable-item");if(s){n=!e.metaKey&&!e.ctrlKey||!s.$element.hasClass("ui-selected");i._removeClass(s.$element,n?"ui-unselecting":"ui-selected")._addClass(s.$element,n?"ui-selecting":"ui-unselecting");s.unselecting=!n;s.selecting=n;s.selected=n;if(n){i._trigger("selecting",e,{selecting:s.element})}else{i._trigger("unselecting",e,{unselecting:s.element})}return false}})},_mouseDrag:function(e){this.dragged=true;if(this.options.disabled){return}var i,n=this,s=this.options,r=this.opos[0],o=this.opos[1],a=e.pageX,l=e.pageY;if(r>a){i=a;a=r;r=i}if(o>l){i=l;l=o;o=i}this.helper.css({left:r,top:o,width:a-r,height:l-o});this.selectees.each(function(){var i=t.data(this,"selectable-item"),h=false,c={};if(!i||i.element===n.element[0]){return}c.left=i.left+n.elementPos.left;c.right=i.right+n.elementPos.left;c.top=i.top+n.elementPos.top;c.bottom=i.bottom+n.elementPos.top;if(s.tolerance==="touch"){h=!(c.left>a||c.right<r||c.top>l||c.bottom<o)}else if(s.tolerance==="fit"){h=c.left>r&&c.right<a&&c.top>o&&c.bottom<l}if(h){if(i.selected){n._removeClass(i.$element,"ui-selected");i.selected=false}if(i.unselecting){n._removeClass(i.$element,"ui-unselecting");i.unselecting=false}if(!i.selecting){n._addClass(i.$element,"ui-selecting");i.selecting=true;n._trigger("selecting",e,{selecting:i.element})}}else{if(i.selecting){if((e.metaKey||e.ctrlKey)&&i.startselected){n._removeClass(i.$element,"ui-selecting");i.selecting=false;n._addClass(i.$element,"ui-selected");i.selected=true}else{n._removeClass(i.$element,"ui-selecting");i.selecting=false;if(i.startselected){n._addClass(i.$element,"ui-unselecting");i.unselecting=true}n._trigger("unselecting",e,{unselecting:i.element})}}if(i.selected){if(!e.metaKey&&!e.ctrlKey&&!i.startselected){n._removeClass(i.$element,"ui-selected");i.selected=false;n._addClass(i.$element,"ui-unselecting");i.unselecting=true;n._trigger("unselecting",e,{unselecting:i.element})}}}});return false},_mouseStop:function(e){var i=this;this.dragged=false;t(".ui-unselecting",this.element[0]).each(function(){var n=t.data(this,"selectable-item");i._removeClass(n.$element,"ui-unselecting");n.unselecting=false;n.startselected=false;i._trigger("unselected",e,{unselected:n.element})});t(".ui-selecting",this.element[0]).each(function(){var n=t.data(this,"selectable-item");i._removeClass(n.$element,"ui-selecting")._addClass(n.$element,"ui-selected");n.selecting=false;n.selected=true;n.startselected=true;i._trigger("selected",e,{selected:n.element})});this._trigger("stop",e);this.helper.remove();return false}});var b=t.widget("ui.sortable",t.ui.mouse,{version:"1.12.1",widgetEventPrefix:"sort",ready:false,options:{appendTo:"parent",axis:false,connectWith:false,containment:false,cursor:"auto",cursorAt:false,dropOnEmpty:true,forcePlaceholderSize:false,forceHelperSize:false,grid:false,handle:false,helper:"original",items:"> *",opacity:false,placeholder:false,revert:false,scroll:true,scrollSensitivity:20,scrollSpeed:20,scope:"default",tolerance:"intersect",zIndex:1e3,activate:null,beforeStop:null,change:null,deactivate:null,out:null,over:null,receive:null,remove:null,sort:null,start:null,stop:null,update:null},_isOverAxis:function(t,e,i){return t>=e&&t<e+i},_isFloating:function(t){return/left|right/.test(t.css("float"))||/inline|table-cell/.test(t.css("display"))},_create:function(){this.containerCache={};this._addClass("ui-sortable");this.refresh();this.offset=this.element.offset();this._mouseInit();this._setHandleClassName();this.ready=true},_setOption:function(t,e){this._super(t,e);if(t==="handle"){this._setHandleClassName()}},_setHandleClassName:function(){var e=this;this._removeClass(this.element.find(".ui-sortable-handle"),"ui-sortable-handle");t.each(this.items,function(){e._addClass(this.instance.options.handle?this.item.find(this.instance.options.handle):this.item,"ui-sortable-handle")})},_destroy:function(){this._mouseDestroy();for(var t=this.items.length-1;t>=0;t--){this.items[t].item.removeData(this.widgetName+"-item")}return this},_mouseCapture:function(e,i){var n=null,s=false,r=this;if(this.reverting){return false}if(this.options.disabled||this.options.type==="static"){return false}this._refreshItems(e);t(e.target).parents().each(function(){if(t.data(this,r.widgetName+"-item")===r){n=t(this);return false}});if(t.data(e.target,r.widgetName+"-item")===r){n=t(e.target)}if(!n){return false}if(this.options.handle&&!i){t(this.options.handle,n).find("*").addBack().each(function(){if(this===e.target){s=true}});if(!s){return false}}this.currentItem=n;this._removeCurrentsFromItems();return true},_mouseStart:function(e,i,n){var s,r,o=this.options;this.currentContainer=this;this.refreshPositions();this.helper=this._createHelper(e);this._cacheHelperProportions();this._cacheMargins();this.scrollParent=this.helper.scrollParent();this.offset=this.currentItem.offset();this.offset={top:this.offset.top-this.margins.top,left:this.offset.left-this.margins.left};t.extend(this.offset,{click:{left:e.pageX-this.offset.left,top:e.pageY-this.offset.top},parent:this._getParentOffset(),relative:this._getRelativeOffset()});this.helper.css("position","absolute");this.cssPosition=this.helper.css("position");this.originalPosition=this._generatePosition(e);this.originalPageX=e.pageX;this.originalPageY=e.pageY;o.cursorAt&&this._adjustOffsetFromHelper(o.cursorAt);this.domPosition={prev:this.currentItem.prev()[0],parent:this.currentItem.parent()[0]};if(this.helper[0]!==this.currentItem[0]){this.currentItem.hide()}this._createPlaceholder();if(o.containment){this._setContainment()}if(o.cursor&&o.cursor!=="auto"){r=this.document.find("body");this.storedCursor=r.css("cursor");r.css("cursor",o.cursor);this.storedStylesheet=t("<style>*{ cursor: "+o.cursor+" !important; }</style>").appendTo(r)}if(o.opacity){if(this.helper.css("opacity")){this._storedOpacity=this.helper.css("opacity")}this.helper.css("opacity",o.opacity)}if(o.zIndex){if(this.helper.css("zIndex")){this._storedZIndex=this.helper.css("zIndex")}this.helper.css("zIndex",o.zIndex)}if(this.scrollParent[0]!==this.document[0]&&this.scrollParent[0].tagName!=="HTML"){this.overflowOffset=this.scrollParent.offset()}this._trigger("start",e,this._uiHash());if(!this._preserveHelperProportions){this._cacheHelperProportions()}if(!n){for(s=this.containers.length-1;s>=0;s--){this.containers[s]._trigger("activate",e,this._uiHash(this))}}if(t.ui.ddmanager){t.ui.ddmanager.current=this}if(t.ui.ddmanager&&!o.dropBehaviour){t.ui.ddmanager.prepareOffsets(this,e)}this.dragging=true;this._addClass(this.helper,"ui-sortable-helper");this._mouseDrag(e);return true},_mouseDrag:function(e){var i,n,s,r,o=this.options,a=false;this.position=this._generatePosition(e);this.positionAbs=this._convertPositionTo("absolute");if(!this.lastPositionAbs){this.lastPositionAbs=this.positionAbs}if(this.options.scroll){if(this.scrollParent[0]!==this.document[0]&&this.scrollParent[0].tagName!=="HTML"){if(this.overflowOffset.top+this.scrollParent[0].offsetHeight-e.pageY<o.scrollSensitivity){this.scrollParent[0].scrollTop=a=this.scrollParent[0].scrollTop+o.scrollSpeed}else if(e.pageY-this.overflowOffset.top<o.scrollSensitivity){this.scrollParent[0].scrollTop=a=this.scrollParent[0].scrollTop-o.scrollSpeed}if(this.overflowOffset.left+this.scrollParent[0].offsetWidth-e.pageX<o.scrollSensitivity){this.scrollParent[0].scrollLeft=a=this.scrollParent[0].scrollLeft+o.scrollSpeed}else if(e.pageX-this.overflowOffset.left<o.scrollSensitivity){this.scrollParent[0].scrollLeft=a=this.scrollParent[0].scrollLeft-o.scrollSpeed}}else{if(e.pageY-this.document.scrollTop()<o.scrollSensitivity){a=this.document.scrollTop(this.document.scrollTop()-o.scrollSpeed)}else if(this.window.height()-(e.pageY-this.document.scrollTop())<o.scrollSensitivity){a=this.document.scrollTop(this.document.scrollTop()+o.scrollSpeed)}if(e.pageX-this.document.scrollLeft()<o.scrollSensitivity){a=this.document.scrollLeft(this.document.scrollLeft()-o.scrollSpeed)}else if(this.window.width()-(e.pageX-this.document.scrollLeft())<o.scrollSensitivity){a=this.document.scrollLeft(this.document.scrollLeft()+o.scrollSpeed)}}if(a!==false&&t.ui.ddmanager&&!o.dropBehaviour){t.ui.ddmanager.prepareOffsets(this,e)}}this.positionAbs=this._convertPositionTo("absolute");if(!this.options.axis||this.options.axis!=="y"){this.helper[0].style.left=this.position.left+"px"}if(!this.options.axis||this.options.axis!=="x"){this.helper[0].style.top=this.position.top+"px"}for(i=this.items.length-1;i>=0;i--){n=this.items[i];s=n.item[0];r=this._intersectsWithPointer(n);if(!r){continue}if(n.instance!==this.currentContainer){continue}if(s!==this.currentItem[0]&&this.placeholder[r===1?"next":"prev"]()[0]!==s&&!t.contains(this.placeholder[0],s)&&(this.options.type==="semi-dynamic"?!t.contains(this.element[0],s):true)){this.direction=r===1?"down":"up";if(this.options.tolerance==="pointer"||this._intersectsWithSides(n)){this._rearrange(e,n)}else{break}this._trigger("change",e,this._uiHash());break}}this._contactContainers(e);if(t.ui.ddmanager){t.ui.ddmanager.drag(this,e)}this._trigger("sort",e,this._uiHash());this.lastPositionAbs=this.positionAbs;return false},_mouseStop:function(e,i){if(!e){return}if(t.ui.ddmanager&&!this.options.dropBehaviour){t.ui.ddmanager.drop(this,e)}if(this.options.revert){var n=this,s=this.placeholder.offset(),r=this.options.axis,o={};if(!r||r==="x"){o.left=s.left-this.offset.parent.left-this.margins.left+(this.offsetParent[0]===this.document[0].body?0:this.offsetParent[0].scrollLeft)}if(!r||r==="y"){o.top=s.top-this.offset.parent.top-this.margins.top+(this.offsetParent[0]===this.document[0].body?0:this.offsetParent[0].scrollTop)}this.reverting=true;t(this.helper).animate(o,parseInt(this.options.revert,10)||500,function(){n._clear(e)})}else{this._clear(e,i)}return false},cancel:function(){if(this.dragging){this._mouseUp(new t.Event("mouseup",{target:null}));if(this.options.helper==="original"){this.currentItem.css(this._storedCSS);this._removeClass(this.currentItem,"ui-sortable-helper")}else{this.currentItem.show()}for(var e=this.containers.length-1;e>=0;e--){this.containers[e]._trigger("deactivate",null,this._uiHash(this));if(this.containers[e].containerCache.over){this.containers[e]._trigger("out",null,this._uiHash(this));this.containers[e].containerCache.over=0}}}if(this.placeholder){if(this.placeholder[0].parentNode){this.placeholder[0].parentNode.removeChild(this.placeholder[0])}if(this.options.helper!=="original"&&this.helper&&this.helper[0].parentNode){this.helper.remove()}t.extend(this,{helper:null,dragging:false,reverting:false,_noFinalSort:null});if(this.domPosition.prev){t(this.domPosition.prev).after(this.currentItem)}else{t(this.domPosition.parent).prepend(this.currentItem)}}return this},serialize:function(e){var i=this._getItemsAsjQuery(e&&e.connected),n=[];e=e||{};t(i).each(function(){var i=(t(e.item||this).attr(e.attribute||"id")||"").match(e.expression||/(.+)[\-=_](.+)/);if(i){n.push((e.key||i[1]+"[]")+"="+(e.key&&e.expression?i[1]:i[2]))}});if(!n.length&&e.key){n.push(e.key+"=")}return n.join("&")},toArray:function(e){var i=this._getItemsAsjQuery(e&&e.connected),n=[];e=e||{};i.each(function(){n.push(t(e.item||this).attr(e.attribute||"id")||"")});return n},_intersectsWith:function(t){var e=this.positionAbs.left,i=e+this.helperProportions.width,n=this.positionAbs.top,s=n+this.helperProportions.height,r=t.left,o=r+t.width,a=t.top,l=a+t.height,h=this.offset.click.top,c=this.offset.click.left,u=this.options.axis==="x"||n+h>a&&n+h<l,d=this.options.axis==="y"||e+c>r&&e+c<o,f=u&&d;if(this.options.tolerance==="pointer"||this.options.forcePointerForContainers||this.options.tolerance!=="pointer"&&this.helperProportions[this.floating?"width":"height"]>t[this.floating?"width":"height"]){return f}else{return r<e+this.helperProportions.width/2&&i-this.helperProportions.width/2<o&&a<n+this.helperProportions.height/2&&s-this.helperProportions.height/2<l}},_intersectsWithPointer:function(t){var e,i,n=this.options.axis==="x"||this._isOverAxis(this.positionAbs.top+this.offset.click.top,t.top,t.height),s=this.options.axis==="y"||this._isOverAxis(this.positionAbs.left+this.offset.click.left,t.left,t.width),r=n&&s;if(!r){return false}e=this._getDragVerticalDirection();i=this._getDragHorizontalDirection();return this.floating?i==="right"||e==="down"?2:1:e&&(e==="down"?2:1)},_intersectsWithSides:function(t){var e=this._isOverAxis(this.positionAbs.top+this.offset.click.top,t.top+t.height/2,t.height),i=this._isOverAxis(this.positionAbs.left+this.offset.click.left,t.left+t.width/2,t.width),n=this._getDragVerticalDirection(),s=this._getDragHorizontalDirection();if(this.floating&&s){return s==="right"&&i||s==="left"&&!i}else{return n&&(n==="down"&&e||n==="up"&&!e)}},_getDragVerticalDirection:function(){var t=this.positionAbs.top-this.lastPositionAbs.top;return t!==0&&(t>0?"down":"up")},_getDragHorizontalDirection:function(){var t=this.positionAbs.left-this.lastPositionAbs.left;return t!==0&&(t>0?"right":"left")},refresh:function(t){this._refreshItems(t);this._setHandleClassName();this.refreshPositions();return this},_connectWith:function(){var t=this.options;return t.connectWith.constructor===String?[t.connectWith]:t.connectWith},_getItemsAsjQuery:function(e){var i,n,s,r,o=[],a=[],l=this._connectWith();if(l&&e){for(i=l.length-1;i>=0;i--){s=t(l[i],this.document[0]);for(n=s.length-1;n>=0;n--){r=t.data(s[n],this.widgetFullName);if(r&&r!==this&&!r.options.disabled){a.push([t.isFunction(r.options.items)?r.options.items.call(r.element):t(r.options.items,r.element).not(".ui-sortable-helper").not(".ui-sortable-placeholder"),r])}}}}a.push([t.isFunction(this.options.items)?this.options.items.call(this.element,null,{options:this.options,item:this.currentItem}):t(this.options.items,this.element).not(".ui-sortable-helper").not(".ui-sortable-placeholder"),this]);function h(){o.push(this)}for(i=a.length-1;i>=0;i--){a[i][0].each(h)}return t(o)},_removeCurrentsFromItems:function(){var e=this.currentItem.find(":data("+this.widgetName+"-item)");this.items=t.grep(this.items,function(t){for(var i=0;i<e.length;i++){if(e[i]===t.item[0]){return false}}return true})},_refreshItems:function(e){this.items=[];this.containers=[this];var i,n,s,r,o,a,l,h,c=this.items,u=[[t.isFunction(this.options.items)?this.options.items.call(this.element[0],e,{item:this.currentItem}):t(this.options.items,this.element),this]],d=this._connectWith();if(d&&this.ready){for(i=d.length-1;i>=0;i--){s=t(d[i],this.document[0]);for(n=s.length-1;n>=0;n--){r=t.data(s[n],this.widgetFullName);if(r&&r!==this&&!r.options.disabled){u.push([t.isFunction(r.options.items)?r.options.items.call(r.element[0],e,{item:this.currentItem}):t(r.options.items,r.element),r]);this.containers.push(r)}}}}for(i=u.length-1;i>=0;i--){o=u[i][1];a=u[i][0];for(n=0,h=a.length;n<h;n++){l=t(a[n]);l.data(this.widgetName+"-item",o);c.push({item:l,instance:o,width:0,height:0,left:0,top:0})}}},refreshPositions:function(e){this.floating=this.items.length?this.options.axis==="x"||this._isFloating(this.items[0].item):false;if(this.offsetParent&&this.helper){this.offset.parent=this._getParentOffset()}var i,n,s,r;for(i=this.items.length-1;i>=0;i--){n=this.items[i];if(n.instance!==this.currentContainer&&this.currentContainer&&n.item[0]!==this.currentItem[0]){continue}s=this.options.toleranceElement?t(this.options.toleranceElement,n.item):n.item;if(!e){n.width=s.outerWidth();n.height=s.outerHeight()}r=s.offset();n.left=r.left;n.top=r.top}if(this.options.custom&&this.options.custom.refreshContainers){this.options.custom.refreshContainers.call(this)}else{for(i=this.containers.length-1;i>=0;i--){r=this.containers[i].element.offset();this.containers[i].containerCache.left=r.left;this.containers[i].containerCache.top=r.top;this.containers[i].containerCache.width=this.containers[i].element.outerWidth();this.containers[i].containerCache.height=this.containers[i].element.outerHeight()}}return this},_createPlaceholder:function(e){e=e||this;var i,n=e.options;if(!n.placeholder||n.placeholder.constructor===String){i=n.placeholder;n.placeholder={element:function(){var n=e.currentItem[0].nodeName.toLowerCase(),s=t("<"+n+">",e.document[0]);e._addClass(s,"ui-sortable-placeholder",i||e.currentItem[0].className)._removeClass(s,"ui-sortable-helper");if(n==="tbody"){e._createTrPlaceholder(e.currentItem.find("tr").eq(0),t("<tr>",e.document[0]).appendTo(s))}else if(n==="tr"){e._createTrPlaceholder(e.currentItem,s)}else if(n==="img"){s.attr("src",e.currentItem.attr("src"))}if(!i){s.css("visibility","hidden")}return s},update:function(t,s){if(i&&!n.forcePlaceholderSize){return}if(!s.height()){s.height(e.currentItem.innerHeight()-parseInt(e.currentItem.css("paddingTop")||0,10)-parseInt(e.currentItem.css("paddingBottom")||0,10))}if(!s.width()){s.width(e.currentItem.innerWidth()-parseInt(e.currentItem.css("paddingLeft")||0,10)-parseInt(e.currentItem.css("paddingRight")||0,10))}}}}e.placeholder=t(n.placeholder.element.call(e.element,e.currentItem));e.currentItem.after(e.placeholder);n.placeholder.update(e,e.placeholder)},_createTrPlaceholder:function(e,i){var n=this;e.children().each(function(){t("<td>&#160;</td>",n.document[0]).attr("colspan",t(this).attr("colspan")||1).appendTo(i)})},_contactContainers:function(e){var i,n,s,r,o,a,l,h,c,u,d=null,f=null;for(i=this.containers.length-1;i>=0;i--){if(t.contains(this.currentItem[0],this.containers[i].element[0])){continue}if(this._intersectsWith(this.containers[i].containerCache)){if(d&&t.contains(this.containers[i].element[0],d.element[0])){continue}d=this.containers[i];f=i}else{if(this.containers[i].containerCache.over){this.containers[i]._trigger("out",e,this._uiHash(this));this.containers[i].containerCache.over=0}}}if(!d){return}if(this.containers.length===1){if(!this.containers[f].containerCache.over){this.containers[f]._trigger("over",e,this._uiHash(this));this.containers[f].containerCache.over=1}}else{s=1e4;r=null;c=d.floating||this._isFloating(this.currentItem);o=c?"left":"top";a=c?"width":"height";u=c?"pageX":"pageY";for(n=this.items.length-1;n>=0;n--){if(!t.contains(this.containers[f].element[0],this.items[n].item[0])){continue}if(this.items[n].item[0]===this.currentItem[0]){continue}l=this.items[n].item.offset()[o];h=false;if(e[u]-l>this.items[n][a]/2){h=true}if(Math.abs(e[u]-l)<s){s=Math.abs(e[u]-l);r=this.items[n];this.direction=h?"up":"down"}}if(!r&&!this.options.dropOnEmpty){return}if(this.currentContainer===this.containers[f]){if(!this.currentContainer.containerCache.over){this.containers[f]._trigger("over",e,this._uiHash());this.currentContainer.containerCache.over=1}return}r?this._rearrange(e,r,null,true):this._rearrange(e,null,this.containers[f].element,true);this._trigger("change",e,this._uiHash());this.containers[f]._trigger("change",e,this._uiHash(this));this.currentContainer=this.containers[f];this.options.placeholder.update(this.currentContainer,this.placeholder);this.containers[f]._trigger("over",e,this._uiHash(this));this.containers[f].containerCache.over=1}},_createHelper:function(e){var i=this.options,n=t.isFunction(i.helper)?t(i.helper.apply(this.element[0],[e,this.currentItem])):i.helper==="clone"?this.currentItem.clone():this.currentItem;if(!n.parents("body").length){t(i.appendTo!=="parent"?i.appendTo:this.currentItem[0].parentNode)[0].appendChild(n[0])}if(n[0]===this.currentItem[0]){this._storedCSS={width:this.currentItem[0].style.width,height:this.currentItem[0].style.height,position:this.currentItem.css("position"),top:this.currentItem.css("top"),left:this.currentItem.css("left")}}if(!n[0].style.width||i.forceHelperSize){n.width(this.currentItem.width())}if(!n[0].style.height||i.forceHelperSize){n.height(this.currentItem.height())}return n},_adjustOffsetFromHelper:function(e){if(typeof e==="string"){e=e.split(" ")}if(t.isArray(e)){e={left:+e[0],top:+e[1]||0}}if("left"in e){this.offset.click.left=e.left+this.margins.left}if("right"in e){this.offset.click.left=this.helperProportions.width-e.right+this.margins.left}if("top"in e){this.offset.click.top=e.top+this.margins.top}if("bottom"in e){this.offset.click.top=this.helperProportions.height-e.bottom+this.margins.top}},_getParentOffset:function(){this.offsetParent=this.helper.offsetParent();var e=this.offsetParent.offset();if(this.cssPosition==="absolute"&&this.scrollParent[0]!==this.document[0]&&t.contains(this.scrollParent[0],this.offsetParent[0])){e.left+=this.scrollParent.scrollLeft();e.top+=this.scrollParent.scrollTop()}if(this.offsetParent[0]===this.document[0].body||this.offsetParent[0].tagName&&this.offsetParent[0].tagName.toLowerCase()==="html"&&t.ui.ie){e={top:0,left:0}}return{top:e.top+(parseInt(this.offsetParent.css("borderTopWidth"),10)||0),left:e.left+(parseInt(this.offsetParent.css("borderLeftWidth"),10)||0)}},_getRelativeOffset:function(){if(this.cssPosition==="relative"){var t=this.currentItem.position();return{top:t.top-(parseInt(this.helper.css("top"),10)||0)+this.scrollParent.scrollTop(),left:t.left-(parseInt(this.helper.css("left"),10)||0)+this.scrollParent.scrollLeft()}}else{return{top:0,left:0}}},_cacheMargins:function(){this.margins={left:parseInt(this.currentItem.css("marginLeft"),10)||0,top:parseInt(this.currentItem.css("marginTop"),10)||0}},_cacheHelperProportions:function(){this.helperProportions={width:this.helper.outerWidth(),height:this.helper.outerHeight()}},_setContainment:function(){var e,i,n,s=this.options;if(s.containment==="parent"){s.containment=this.helper[0].parentNode}if(s.containment==="document"||s.containment==="window"){this.containment=[0-this.offset.relative.left-this.offset.parent.left,0-this.offset.relative.top-this.offset.parent.top,s.containment==="document"?this.document.width():this.window.width()-this.helperProportions.width-this.margins.left,(s.containment==="document"?this.document.height()||document.body.parentNode.scrollHeight:this.window.height()||this.document[0].body.parentNode.scrollHeight)-this.helperProportions.height-this.margins.top]}if(!/^(document|window|parent)$/.test(s.containment)){e=t(s.containment)[0];i=t(s.containment).offset();n=t(e).css("overflow")!=="hidden";this.containment=[i.left+(parseInt(t(e).css("borderLeftWidth"),10)||0)+(parseInt(t(e).css("paddingLeft"),10)||0)-this.margins.left,i.top+(parseInt(t(e).css("borderTopWidth"),10)||0)+(parseInt(t(e).css("paddingTop"),10)||0)-this.margins.top,i.left+(n?Math.max(e.scrollWidth,e.offsetWidth):e.offsetWidth)-(parseInt(t(e).css("borderLeftWidth"),10)||0)-(parseInt(t(e).css("paddingRight"),10)||0)-this.helperProportions.width-this.margins.left,i.top+(n?Math.max(e.scrollHeight,e.offsetHeight):e.offsetHeight)-(parseInt(t(e).css("borderTopWidth"),10)||0)-(parseInt(t(e).css("paddingBottom"),10)||0)-this.helperProportions.height-this.margins.top]}},_convertPositionTo:function(e,i){if(!i){i=this.position}var n=e==="absolute"?1:-1,s=this.cssPosition==="absolute"&&!(this.scrollParent[0]!==this.document[0]&&t.contains(this.scrollParent[0],this.offsetParent[0]))?this.offsetParent:this.scrollParent,r=/(html|body)/i.test(s[0].tagName);return{top:i.top+this.offset.relative.top*n+this.offset.parent.top*n-(this.cssPosition==="fixed"?-this.scrollParent.scrollTop():r?0:s.scrollTop())*n,left:i.left+this.offset.relative.left*n+this.offset.parent.left*n-(this.cssPosition==="fixed"?-this.scrollParent.scrollLeft():r?0:s.scrollLeft())*n}},_generatePosition:function(e){var i,n,s=this.options,r=e.pageX,o=e.pageY,a=this.cssPosition==="absolute"&&!(this.scrollParent[0]!==this.document[0]&&t.contains(this.scrollParent[0],this.offsetParent[0]))?this.offsetParent:this.scrollParent,l=/(html|body)/i.test(a[0].tagName);if(this.cssPosition==="relative"&&!(this.scrollParent[0]!==this.document[0]&&this.scrollParent[0]!==this.offsetParent[0])){this.offset.relative=this._getRelativeOffset()}if(this.originalPosition){if(this.containment){if(e.pageX-this.offset.click.left<this.containment[0]){r=this.containment[0]+this.offset.click.left}if(e.pageY-this.offset.click.top<this.containment[1]){o=this.containment[1]+this.offset.click.top}if(e.pageX-this.offset.click.left>this.containment[2]){r=this.containment[2]+this.offset.click.left}if(e.pageY-this.offset.click.top>this.containment[3]){o=this.containment[3]+this.offset.click.top}}if(s.grid){i=this.originalPageY+Math.round((o-this.originalPageY)/s.grid[1])*s.grid[1];o=this.containment?i-this.offset.click.top>=this.containment[1]&&i-this.offset.click.top<=this.containment[3]?i:i-this.offset.click.top>=this.containment[1]?i-s.grid[1]:i+s.grid[1]:i;n=this.originalPageX+Math.round((r-this.originalPageX)/s.grid[0])*s.grid[0];r=this.containment?n-this.offset.click.left>=this.containment[0]&&n-this.offset.click.left<=this.containment[2]?n:n-this.offset.click.left>=this.containment[0]?n-s.grid[0]:n+s.grid[0]:n}}return{top:o-this.offset.click.top-this.offset.relative.top-this.offset.parent.top+(this.cssPosition==="fixed"?-this.scrollParent.scrollTop():l?0:a.scrollTop()),left:r-this.offset.click.left-this.offset.relative.left-this.offset.parent.left+(this.cssPosition==="fixed"?-this.scrollParent.scrollLeft():l?0:a.scrollLeft())}},_rearrange:function(t,e,i,n){i?i[0].appendChild(this.placeholder[0]):e.item[0].parentNode.insertBefore(this.placeholder[0],this.direction==="down"?e.item[0]:e.item[0].nextSibling);this.counter=this.counter?++this.counter:1;var s=this.counter;this._delay(function(){if(s===this.counter){this.refreshPositions(!n)}})},_clear:function(t,e){this.reverting=false;var i,n=[];if(!this._noFinalSort&&this.currentItem.parent().length){this.placeholder.before(this.currentItem)}this._noFinalSort=null;if(this.helper[0]===this.currentItem[0]){for(i in this._storedCSS){if(this._storedCSS[i]==="auto"||this._storedCSS[i]==="static"){this._storedCSS[i]=""}}this.currentItem.css(this._storedCSS);this._removeClass(this.currentItem,"ui-sortable-helper")}else{this.currentItem.show()}if(this.fromOutside&&!e){n.push(function(t){this._trigger("receive",t,this._uiHash(this.fromOutside))})}if((this.fromOutside||this.domPosition.prev!==this.currentItem.prev().not(".ui-sortable-helper")[0]||this.domPosition.parent!==this.currentItem.parent()[0])&&!e){n.push(function(t){this._trigger("update",t,this._uiHash())})}if(this!==this.currentContainer){if(!e){n.push(function(t){this._trigger("remove",t,this._uiHash())});n.push(function(t){return function(e){t._trigger("receive",e,this._uiHash(this))}}.call(this,this.currentContainer));n.push(function(t){return function(e){t._trigger("update",e,this._uiHash(this))}}.call(this,this.currentContainer))}}function s(t,e,i){return function(n){i._trigger(t,n,e._uiHash(e))}}for(i=this.containers.length-1;i>=0;i--){if(!e){n.push(s("deactivate",this,this.containers[i]))}if(this.containers[i].containerCache.over){n.push(s("out",this,this.containers[i]));this.containers[i].containerCache.over=0}}if(this.storedCursor){this.document.find("body").css("cursor",this.storedCursor);this.storedStylesheet.remove()}if(this._storedOpacity){this.helper.css("opacity",this._storedOpacity)}if(this._storedZIndex){this.helper.css("zIndex",this._storedZIndex==="auto"?"":this._storedZIndex)}this.dragging=false;if(!e){this._trigger("beforeStop",t,this._uiHash())}this.placeholder[0].parentNode.removeChild(this.placeholder[0]);if(!this.cancelHelperRemoval){if(this.helper[0]!==this.currentItem[0]){this.helper.remove()}this.helper=null}if(!e){for(i=0;i<n.length;i++){n[i].call(this,t)}this._trigger("stop",t,this._uiHash())}this.fromOutside=false;return!this.cancelHelperRemoval},_trigger:function(){if(t.Widget.prototype._trigger.apply(this,arguments)===false){this.cancel()}},_uiHash:function(e){var i=e||this;return{helper:i.helper,placeholder:i.placeholder||t([]),position:i.position,originalPosition:i.originalPosition,offset:i.positionAbs,item:i.currentItem,sender:e?e.element:null}}})});(function(t){var e=function(){var e={},i,n=65,s,r='<div class="colorpicker"><div class="colorpicker_color"><div><div></div></div></div><div class="colorpicker_hue"><div></div></div><div class="colorpicker_new_color"></div><div class="colorpicker_current_color"></div><div class="colorpicker_hex"><input type="text" maxlength="6" size="6" /></div><div class="colorpicker_rgb_r colorpicker_field"><input type="text" maxlength="3" size="3" /><span></span></div><div class="colorpicker_rgb_g colorpicker_field"><input type="text" maxlength="3" size="3" /><span></span></div><div class="colorpicker_rgb_b colorpicker_field"><input type="text" maxlength="3" size="3" /><span></span></div><div class="colorpicker_hsb_h colorpicker_field"><input type="text" maxlength="3" size="3" /><span></span></div><div class="colorpicker_hsb_s colorpicker_field"><input type="text" maxlength="3" size="3" /><span></span></div><div class="colorpicker_hsb_b colorpicker_field"><input type="text" maxlength="3" size="3" /><span></span></div><div class="colorpicker_submit"></div></div>',o={eventName:"click",onShow:function(){},onBeforeShow:function(){},onHide:function(){},onChange:function(){},onSubmit:function(){},color:"ff0000",livePreview:true,flat:false},a=function(e,i){var n=N(e);t(i).data("colorpicker").fields.eq(1).val(n.r).end().eq(2).val(n.g).end().eq(3).val(n.b).end()},l=function(e,i){t(i).data("colorpicker").fields.eq(4).val(e.h).end().eq(5).val(e.s).end().eq(6).val(e.b).end()},h=function(e,i){t(i).data("colorpicker").fields.eq(0).val(j(e)).end()},c=function(e,i){t(i).data("colorpicker").selector.css("backgroundColor","#"+j({h:e.h,s:100,b:100}));t(i).data("colorpicker").selectorIndic.css({left:parseInt(150*e.s/100,10),top:parseInt(150*(100-e.b)/100,10)})},u=function(e,i){t(i).data("colorpicker").hue.css("top",parseInt(150-150*e.h/360,10))},d=function(e,i){t(i).data("colorpicker").currentColor.css("backgroundColor","#"+j(e))},f=function(e,i){t(i).data("colorpicker").newColor.css("backgroundColor","#"+j(e))},p=function(e){var i=e.charCode||e.keyCode||-1;if(i>n&&i<=90||i==32){return false}var s=t(this).parent().parent();if(s.data("colorpicker").livePreview===true){m.apply(this)}},m=function(e){var i=t(this).parent().parent(),n;if(this.parentNode.className.indexOf("_hex")>0){i.data("colorpicker").color=n=R(L(this.value))}else if(this.parentNode.className.indexOf("_hsb")>0){i.data("colorpicker").color=n=A({h:parseInt(i.data("colorpicker").fields.eq(4).val(),10),s:parseInt(i.data("colorpicker").fields.eq(5).val(),10),b:parseInt(i.data("colorpicker").fields.eq(6).val(),10)})}else{i.data("colorpicker").color=n=z(H({r:parseInt(i.data("colorpicker").fields.eq(1).val(),10),g:parseInt(i.data("colorpicker").fields.eq(2).val(),10),b:parseInt(i.data("colorpicker").fields.eq(3).val(),10)}))}if(e){a(n,i.get(0));h(n,i.get(0));l(n,i.get(0))}c(n,i.get(0));u(n,i.get(0));f(n,i.get(0));i.data("colorpicker").onChange.apply(i,[n,j(n),N(n)])},g=function(e){var i=t(this).parent().parent();i.data("colorpicker").fields.parent().removeClass("colorpicker_focus")},v=function(){n=this.parentNode.className.indexOf("_hex")>0?70:65;t(this).parent().parent().data("colorpicker").fields.parent().removeClass("colorpicker_focus");t(this).parent().addClass("colorpicker_focus")},y=function(e){var i=t(this).parent().find("input").focus();var n={el:t(this).parent().addClass("colorpicker_slider"),max:this.parentNode.className.indexOf("_hsb_h")>0?360:this.parentNode.className.indexOf("_hsb")>0?100:255,y:e.pageY,field:i,val:parseInt(i.val(),10),preview:t(this).parent().parent().data("colorpicker").livePreview};t(document).bind("mouseup",n,w);t(document).bind("mousemove",n,b)},b=function(t){t.data.field.val(Math.max(0,Math.min(t.data.max,parseInt(t.data.val+t.pageY-t.data.y,10))));if(t.data.preview){m.apply(t.data.field.get(0),[true])}return false},w=function(e){m.apply(e.data.field.get(0),[true]);e.data.el.removeClass("colorpicker_slider").find("input").focus();t(document).unbind("mouseup",w);t(document).unbind("mousemove",b);return false},x=function(e){var i={cal:t(this).parent(),y:t(this).offset().top};i.preview=i.cal.data("colorpicker").livePreview;t(document).bind("mouseup",i,k);t(document).bind("mousemove",i,_)},_=function(t){m.apply(t.data.cal.data("colorpicker").fields.eq(4).val(parseInt(360*(150-Math.max(0,Math.min(150,t.pageY-t.data.y)))/150,10)).get(0),[t.data.preview]);return false},k=function(e){a(e.data.cal.data("colorpicker").color,e.data.cal.get(0));h(e.data.cal.data("colorpicker").color,e.data.cal.get(0));t(document).unbind("mouseup",k);t(document).unbind("mousemove",_);return false},C=function(e){var i={cal:t(this).parent(),pos:t(this).offset()};i.preview=i.cal.data("colorpicker").livePreview;t(document).bind("mouseup",i,T);t(document).bind("mousemove",i,S)},S=function(t){m.apply(t.data.cal.data("colorpicker").fields.eq(6).val(parseInt(100*(150-Math.max(0,Math.min(150,t.pageY-t.data.pos.top)))/150,10)).end().eq(5).val(parseInt(100*Math.max(0,Math.min(150,t.pageX-t.data.pos.left))/150,10)).get(0),[t.data.preview]);return false},T=function(e){a(e.data.cal.data("colorpicker").color,e.data.cal.get(0));h(e.data.cal.data("colorpicker").color,e.data.cal.get(0));t(document).unbind("mouseup",T);t(document).unbind("mousemove",S);return false},D=function(e){t(this).addClass("colorpicker_focus")},M=function(e){t(this).removeClass("colorpicker_focus")},P=function(e){var i=t(this).parent();var n=i.data("colorpicker").color;i.data("colorpicker").origColor=n;d(n,i.get(0));i.data("colorpicker").onSubmit(n,j(n),N(n),i.data("colorpicker").el)},I=function(e){var i=t("#"+t(this).data("colorpickerId"));i.data("colorpicker").onBeforeShow.apply(this,[i.get(0)]);var n=t(this).offset();var s=F();var r=n.top+this.offsetHeight;var o=n.left;if(r+176>s.t+s.h){r-=this.offsetHeight+176}if(o+356>s.l+s.w){o-=356}i.css({left:o+"px",top:r+"px"});if(i.data("colorpicker").onShow.apply(this,[i.get(0)])!=false){i.show()}t(document).bind("mousedown",{cal:i},E);return false},E=function(e){if(!$(e.data.cal.get(0),e.target,e.data.cal.get(0))){if(e.data.cal.data("colorpicker").onHide.apply(this,[e.data.cal.get(0)])!=false){e.data.cal.hide()}t(document).unbind("mousedown",E)}},$=function(t,e,i){if(t==e){return true}if(t.contains){return t.contains(e)}if(t.compareDocumentPosition){return!!(t.compareDocumentPosition(e)&16)}var n=e.parentNode;while(n&&n!=i){if(n==t)return true;n=n.parentNode}return false},F=function(){var t=document.compatMode=="CSS1Compat";return{l:window.pageXOffset||(t?document.documentElement.scrollLeft:document.body.scrollLeft),t:window.pageYOffset||(t?document.documentElement.scrollTop:document.body.scrollTop),w:window.innerWidth||(t?document.documentElement.clientWidth:document.body.clientWidth),h:window.innerHeight||(t?document.documentElement.clientHeight:document.body.clientHeight)}},A=function(t){return{h:Math.min(360,Math.max(0,t.h)),s:Math.min(100,Math.max(0,t.s)),b:Math.min(100,Math.max(0,t.b))}},H=function(t){return{r:Math.min(255,Math.max(0,t.r)),g:Math.min(255,Math.max(0,t.g)),b:Math.min(255,Math.max(0,t.b))}},L=function(t){var e=6-t.length;if(e>0){var i=[];for(var n=0;n<e;n++){i.push("0")}i.push(t);t=i.join("")}return t},O=function(t){var t=parseInt(t.indexOf("#")>-1?t.substring(1):t,16);return{r:t>>16,g:(t&65280)>>8,b:t&255}},R=function(t){return z(O(t))},z=function(t){var e={h:0,s:0,b:0};var i=Math.min(t.r,t.g,t.b);var n=Math.max(t.r,t.g,t.b);var s=n-i;e.b=n;if(n!=0){}e.s=n!=0?255*s/n:0;if(e.s!=0){if(t.r==n){e.h=(t.g-t.b)/s}else if(t.g==n){e.h=2+(t.b-t.r)/s}else{e.h=4+(t.r-t.g)/s}}else{e.h=-1}e.h*=60;if(e.h<0){e.h+=360}e.s*=100/255;e.b*=100/255;return e},N=function(t){var e={};var i=Math.round(t.h);var n=Math.round(t.s*255/100);var s=Math.round(t.b*255/100);if(n==0){e.r=e.g=e.b=s}else{var r=s;var o=(255-n)*s/255;var a=(r-o)*(i%60)/60;if(i==360)i=0;if(i<60){e.r=r;e.b=o;e.g=o+a}else if(i<120){e.g=r;e.b=o;e.r=r-a}else if(i<180){e.g=r;e.r=o;e.b=o+a}else if(i<240){e.b=r;e.r=o;e.g=r-a}else if(i<300){e.b=r;e.g=o;e.r=o+a}else if(i<360){e.r=r;e.g=o;e.b=r-a}else{e.r=0;e.g=0;e.b=0}}return{r:Math.round(e.r),g:Math.round(e.g),b:Math.round(e.b)}},B=function(e){var i=[e.r.toString(16),e.g.toString(16),e.b.toString(16)];t.each(i,function(t,e){if(e.length==1){i[t]="0"+e}});return i.join("")},j=function(t){return B(N(t))},W=function(){var e=t(this).parent();var i=e.data("colorpicker").origColor;e.data("colorpicker").color=i;a(i,e.get(0));h(i,e.get(0));l(i,e.get(0));c(i,e.get(0));u(i,e.get(0));f(i,e.get(0))};return{init:function(e){e=t.extend({},o,e||{});if(typeof e.color=="string"){e.color=R(e.color)}else if(e.color.r!=undefined&&e.color.g!=undefined&&e.color.b!=undefined){e.color=z(e.color)}else if(e.color.h!=undefined&&e.color.s!=undefined&&e.color.b!=undefined){e.color=A(e.color)}else{return this}return this.each(function(){if(!t(this).data("colorpickerId")){var i=t.extend({},e);i.origColor=e.color;var n="collorpicker_"+parseInt(Math.random()*1e3);t(this).data("colorpickerId",n);var s=t(r).attr("id",n);if(i.flat){s.appendTo(this).show()}else{s.appendTo(document.body)}i.fields=s.find("input").bind("keyup",p).bind("change",m).bind("blur",g).bind("focus",v);s.find("span").bind("mousedown",y).end().find(">div.colorpicker_current_color").bind("click",W);i.selector=s.find("div.colorpicker_color").bind("mousedown",C);i.selectorIndic=i.selector.find("div div");i.el=this;i.hue=s.find("div.colorpicker_hue div");s.find("div.colorpicker_hue").bind("mousedown",x);i.newColor=s.find("div.colorpicker_new_color");i.currentColor=s.find("div.colorpicker_current_color");s.data("colorpicker",i);s.find("div.colorpicker_submit").bind("mouseenter",D).bind("mouseleave",M).bind("click",P);a(i.color,s.get(0));l(i.color,s.get(0));h(i.color,s.get(0));u(i.color,s.get(0));c(i.color,s.get(0));d(i.color,s.get(0));f(i.color,s.get(0));if(i.flat){s.css({position:"relative",display:"block"})}else{t(this).bind(i.eventName,I)}}})},showPicker:function(){return this.each(function(){if(t(this).data("colorpickerId")){I.apply(this)}})},hidePicker:function(){return this.each(function(){if(t(this).data("colorpickerId")){t("#"+t(this).data("colorpickerId")).hide()}})},setColor:function(e){if(typeof e=="string"){e=R(e)}else if(e.r!=undefined&&e.g!=undefined&&e.b!=undefined){e=z(e)}else if(e.h!=undefined&&e.s!=undefined&&e.b!=undefined){e=A(e)}else{return this}return this.each(function(){if(t(this).data("colorpickerId")){var i=t("#"+t(this).data("colorpickerId"));i.data("colorpicker").color=e;i.data("colorpicker").origColor=e;a(e,i.get(0));l(e,i.get(0));h(e,i.get(0));u(e,i.get(0));c(e,i.get(0));d(e,i.get(0));f(e,i.get(0))}})}}}();t.fn.extend({ColorPicker:e.init,ColorPickerHide:e.hidePicker,ColorPickerShow:e.showPicker,ColorPickerSetColor:e.setColor})})(jQuery);$(document).ready(function(){selectLine();selectAll();actionAnConfirmAllButton();openModalAfterClick();showInputField();sendSms();confirmCode();modalHide();orders=[]});function selectLine(){$(document).on("click",".payment-orders-list table > tbody > tr > td:not(:has(.confirm-small))",function(){var t=$(this).parent().find(".checkbox-list");if(t.prop("checked")===true){t.prop("checked",false)}else{t.prop("checked",true)}t.change()});$(document).on("click",".payment-orders-list .checkbox-list",function(){if($(this).prop("checked")===true){$(this).prop("checked",false)}else{$(this).prop("checked",true)}})}function selectAll(){$(document).on("click",".payment-orders-list .select-all",function(){var t=$(".payment-orders-list table > tbody > tr .checkbox-list");if($(this).hasClass("checked-all")){t.prop("checked",false);$(this).removeClass("checked-all")}else{t.prop("checked",true);$(this).addClass("checked-all")}t.change()})}function actionAnConfirmAllButton(){var t=$(".payment-orders-list table > tbody > tr .checkbox-list");t.change(function(){var e=true;var i=0;t.each(function(){if($(this).prop("checked")){i++}});if(i===0){e=false}var n=$(".payment-orders-list .confirm-all");if(e===true){n.removeAttr("disabled").removeClass("disabled")}else{n.attr("disabled","true").addClass("disabled")}})}function openModalAfterClick(){$(document).on("click",".payment-orders-list .confirm-all",function(){hideFields();var t=$(".payment-orders-list table > tbody > tr .checkbox-list");var e=0;t.each(function(){if($(this).prop("checked")===true){e+=parseFloat($(this).parent().parent().find("td:nth-child(4)").html().split(" ").join(""))}});$(".confirm-modal-form .orders-sum").html(e.toFixed(2));var i=$(".payment-orders-list table > tbody > tr .confirm-small");orders=[];$(i).each(function(){if($(this).parent().parent().find("input.checkbox-list").prop("checked")===true){orders.push(parseInt($(this).attr("data-id")))}});$(".confirm-modal-form").modal("show")});$(document).on("click",".payment-orders-list .confirm-small",function(){hideFields();var t=0;t+=parseFloat($(this).parent().parent().find("td:nth-child(4)").html().split(" ").join(""));$(".confirm-modal-form .orders-sum").html(t.toFixed(2));orders=[];$orderId=$(this).attr("data-id");orders=[parseInt($orderId)];$(".confirm-modal-form").modal("show")})}function showInputField(t){$(t).fadeOut(function(){$(".confirm-modal-form .div-form-control, .confirm-modal-form .button-send").fadeIn()})}function showString(t,e){$(t).html(e);$(t).fadeIn()}function hideString(t){$(t).fadeOut()}function hideFields(){if($(".confirm-modal-form  .error-field").css("display")==="block"){$(".confirm-modal-form  .error-field").fadeOut()}if($(".confirm-modal-form  .success-field").css("display")==="block"){$(".confirm-modal-form  .success-field").fadeOut()}}function sendSms(){$(document).on("click",".confirm-modal-form .confirm-send-sms",function(){hideFields();var t=new FormData;t.append("AjaxForm[orders]",JSON.stringify(orders));$.ajax({type:"POST",url:"/partner/payment-orders/execute-orders",enctype:"multipart/form-data",processData:false,contentType:false,data:t,success:function(t){showInputField(".confirm-modal-form .confirm-send-sms")},error:function(t){showString(".confirm-modal-form .error-field",t.responseJSON[0])}})})}function confirmCode(){$(document).on("click",".confirm-modal-form  .button-send",function(){var t=$(".confirm-modal-form .div-form-control input").val();hideString(".confirm-modal-form .error-field");hideString(".confirm-modal-form .success-field");$.ajax({type:"POST",url:"/partner/payment-orders/confirm-code",data:"code="+t,success:function(t){$(".confirm-modal-form .div-form-control, .confirm-modal-form .button-send").fadeOut(function(){showString(".confirm-modal-form .success-field",t[0]);setTimeout(function(){location.reload()},2e3)})},error:function(t){showString(".confirm-modal-form .error-field",t.responseJSON[0])}})})}function modalHide(){$(".confirm-modal-form").on("hidden.bs.modal",function(t){$(".confirm-modal-form .div-form-control, .confirm-modal-form .button-send").fadeOut(function(){$(".confirm-modal-form .confirm-send-sms").fadeIn();$(".confirm-modal-form .div-form-control .form-control ").val("")})})}(function(t){var e={columns:1,search:false,searchOptions:{delay:250,showOptGroups:false,searchText:true,searchValue:false,onSearch:function(t){}},texts:{placeholder:"Select options",search:"Search",selectedOptions:" selected",selectAll:"Select all",unselectAll:"Unselect all",noneSelected:"None Selected"},selectAll:false,selectGroup:false,minHeight:200,maxHeight:null,maxWidth:null,maxPlaceholderWidth:null,maxPlaceholderOpts:10,showCheckbox:true,checkboxAutoFit:false,optionAttributes:[],onLoad:function(t){},onOptionClick:function(t,e){},onControlClose:function(t){},onSelectAll:function(t,e){},onPlaceholder:function(t,e,i){}};var i=1;var n=1;if(typeof Array.prototype.map!=="function"){Array.prototype.map=function(e,i){if(typeof i==="undefined"){i=this}return t.isArray(i)?t.map(i,e):[]}}if(typeof String.prototype.trim!=="function"){String.prototype.trim=function(){return this.replace(/^\s+|\s+$/g,"")}}function s(n,s){this.element=n;this.options=t.extend(true,{},e,s);this.updateSelectAll=true;this.updatePlaceholder=true;this.listNumber=i;i=i+1;if(!t(this.element).attr("multiple")){throw new Error("[jQuery-MultiSelect] Select list must be a multiselect list in order to use this plugin")}if(this.options.search){if(!this.options.searchOptions.searchText&&!this.options.searchOptions.searchValue){throw new Error("[jQuery-MultiSelect] Either searchText or searchValue should be true.")}}if("placeholder"in this.options){this.options.texts.placeholder=this.options.placeholder;delete this.options.placeholder}if("default"in this.options.searchOptions){this.options.texts.search=this.options.searchOptions["default"];delete this.options.searchOptions["default"]}this.load()}s.prototype={load:function(){var e=this;if(e.element.nodeName!="SELECT"||t(e.element).hasClass("jqmsLoaded")){return true}t(e.element).addClass("jqmsLoaded ms-list-"+e.listNumber).data("plugin_multiselect-instance",e);t(e.element).after('<div id="ms-list-'+e.listNumber+'" class="ms-options-wrap"><button type="button"><span>None Selected</span></button><div class="ms-options"><ul></ul></div></div>');var i=t(e.element).siblings("#ms-list-"+e.listNumber+".ms-options-wrap").find("> button:first-child");var n=t(e.element).siblings("#ms-list-"+e.listNumber+".ms-options-wrap").find("> .ms-options");var s=n.find("> ul");if(!e.options.showCheckbox){n.addClass("hide-checkbox")}else if(e.options.checkboxAutoFit){n.addClass("checkbox-autofit")}if(t(e.element).prop("disabled")){i.prop("disabled",true)}if(e.options.maxPlaceholderWidth){i.css("maxWidth",e.options.maxPlaceholderWidth)}if(e.options.maxHeight){var r=e.options.maxHeight}else{var r=t(window).height()-n.offset().top+t(window).scrollTop()-20}r=r<e.options.minHeight?e.options.minHeight:r;n.css({maxWidth:e.options.maxWidth,minHeight:e.options.minHeight,maxHeight:r});n.on("touchmove mousewheel DOMMouseScroll",function(e){if(t(this).outerHeight()<t(this)[0].scrollHeight){var i=e.originalEvent,n=i.wheelDelta||-i.detail;if(t(this).outerHeight()+t(this)[0].scrollTop>t(this)[0].scrollHeight){e.preventDefault();this.scrollTop+=n<0?1:-1}}});t(document).off("click.ms-hideopts").on("click.ms-hideopts",function(e){if(!t(e.target).closest(".ms-options-wrap").length){t(".ms-options-wrap.ms-active > .ms-options").each(function(){t(this).closest(".ms-options-wrap").removeClass("ms-active");var e=t(this).closest(".ms-options-wrap").attr("id");var i=t(this).parent().siblings("."+e+".jqmsLoaded").data("plugin_multiselect-instance");if(typeof i.options.onControlClose=="function"){i.options.onControlClose(i.element)}})}}).on("keydown",function(e){if((e.keyCode||e.which)==27){t(this).trigger("click.ms-hideopts")}});i.on("keydown",function(t){var e=t.keyCode||t.which;if(e==13||e==32){i.trigger("mousedown")}});i.on("mousedown",function(i){if(i.which&&i.which!=1){return true}t(".ms-options-wrap.ms-active").each(function(){if(t(this).siblings("."+t(this).attr("id")+".jqmsLoaded")[0]!=n.parent().siblings(".ms-list-"+e.listNumber+".jqmsLoaded")[0]){t(this).removeClass("ms-active");var i=t(this).siblings("."+t(this).attr("id")+".jqmsLoaded").data("plugin_multiselect-instance");if(typeof i.options.onControlClose=="function"){i.options.onControlClose(i.element)}}});n.closest(".ms-options-wrap").toggleClass("ms-active");if(n.closest(".ms-options-wrap").hasClass("ms-active")){n.css("maxHeight","");if(e.options.maxHeight){var s=e.options.maxHeight}else{var s=t(window).height()-n.offset().top+t(window).scrollTop()-20}if(s){s=s<e.options.minHeight?e.options.minHeight:s;n.css("maxHeight",s)}}else if(typeof e.options.onControlClose=="function"){e.options.onControlClose(e.element)}}).click(function(t){t.preventDefault()});if(e.options.texts.placeholder){i.find("span").text(e.options.texts.placeholder)}if(e.options.search){s.before('<div class="ms-search"><input type="text" value="" placeholder="'+e.options.texts.search+'" /></div>');var o=n.find(".ms-search input");o.on("keyup",function(){if(t(this).data("lastsearch")==t(this).val()){return true}if(t(this).data("searchTimeout")){clearTimeout(t(this).data("searchTimeout"))}var i=t(this);t(this).data("searchTimeout",setTimeout(function(){i.data("lastsearch",i.val());if(typeof e.options.searchOptions.onSearch=="function"){e.options.searchOptions.onSearch(e.element)}var n=t.trim(o.val().toLowerCase());if(n){s.find('li[data-search-term*="'+n+'"]:not(.optgroup)').removeClass("ms-hidden");s.find('li:not([data-search-term*="'+n+'"], .optgroup)').addClass("ms-hidden")}else{s.find(".ms-hidden").removeClass("ms-hidden")}if(!e.options.searchOptions.showOptGroups){s.find(".optgroup").each(function(){if(t(this).find("li:not(.ms-hidden)").length){t(this).show()}else{t(this).hide()}})}e._updateSelectAllText()},e.options.searchOptions.delay))})}if(e.options.selectAll){s.before('<a href="#" class="ms-selectall global">'+e.options.texts.selectAll+"</a>")}n.on("click",".ms-selectall",function(i){i.preventDefault();e.updateSelectAll=false;e.updatePlaceholder=false;var r=n.parent().siblings(".ms-list-"+e.listNumber+".jqmsLoaded");if(t(this).hasClass("global")){if(s.find("li:not(.optgroup, .selected, .ms-hidden)").length){s.find("li:not(.optgroup, .selected, .ms-hidden)").addClass("selected");s.find('li.selected input[type="checkbox"]:not(:disabled)').prop("checked",true)}else{s.find("li:not(.optgroup, .ms-hidden).selected").removeClass("selected");s.find('li:not(.optgroup, .ms-hidden, .selected) input[type="checkbox"]:not(:disabled)').prop("checked",false)}}else if(t(this).closest("li").hasClass("optgroup")){var o=t(this).closest("li.optgroup");if(o.find("li:not(.selected, .ms-hidden)").length){o.find("li:not(.selected, .ms-hidden)").addClass("selected");o.find('li.selected input[type="checkbox"]:not(:disabled)').prop("checked",true)}else{o.find("li:not(.ms-hidden).selected").removeClass("selected");o.find('li:not(.ms-hidden, .selected) input[type="checkbox"]:not(:disabled)').prop("checked",false)}}var a=[];s.find('li.selected input[type="checkbox"]').each(function(){a.push(t(this).val())});r.val(a).trigger("change");e.updateSelectAll=true;e.updatePlaceholder=true;if(typeof e.options.onSelectAll=="function"){e.options.onSelectAll(e.element,a.length)}e._updateSelectAllText();e._updatePlaceholderText()});var a=[];t(e.element).children().each(function(){if(this.nodeName=="OPTGROUP"){var i=[];t(this).children("option").each(function(){var n={};for(var s=0;s<e.options.optionAttributes.length;s++){var r=e.options.optionAttributes[s];if(t(this).attr(r)!==undefined){n[r]=t(this).attr(r)}}i.push({name:t(this).text(),value:t(this).val(),checked:t(this).prop("selected"),attributes:n})});a.push({label:t(this).attr("label"),options:i})}else if(this.nodeName=="OPTION"){var n={};for(var s=0;s<e.options.optionAttributes.length;s++){var r=e.options.optionAttributes[s];if(t(this).attr(r)!==undefined){n[r]=t(this).attr(r)}}a.push({name:t(this).text(),value:t(this).val(),checked:t(this).prop("selected"),attributes:n})}else{return true}});e.loadOptions(a,true,false);n.on("click",'input[type="checkbox"]',function(){t(this).closest("li").toggleClass("selected");var i=n.parent().siblings(".ms-list-"+e.listNumber+".jqmsLoaded");i.find('option[value="'+e._escapeSelector(t(this).val())+'"]').prop("selected",t(this).is(":checked")).closest("select").trigger("change");if(typeof e.options.onOptionClick=="function"){e.options.onOptionClick(e.element,this)}e._updateSelectAllText();e._updatePlaceholderText()});n.on("focusin",'input[type="checkbox"]',function(){t(this).closest("label").addClass("focused")}).on("focusout",'input[type="checkbox"]',function(){t(this).closest("label").removeClass("focused")});if(typeof e.options.onLoad==="function"){e.options.onLoad(e.element)}t(e.element).hide()},loadOptions:function(e,i,n){i=typeof i=="boolean"?i:true;n=typeof n=="boolean"?n:true;var s=this;var r=t(s.element);var o=r.siblings("#ms-list-"+s.listNumber+".ms-options-wrap").find("> .ms-options > ul");var a=r.siblings("#ms-list-"+s.listNumber+".ms-options-wrap").find("> .ms-options");if(i){o.find("> li").remove();if(n){r.find("> *").remove()}}var l=[];for(var h in e){if(!e.hasOwnProperty(h)){continue}var c=e[h];var u=t("<li/>");var d=true;if(c.hasOwnProperty("value")){if(s.options.showCheckbox&&s.options.checkboxAutoFit){u.addClass("ms-reflow")}s._addOption(u,c);if(n){var f=t('<option value="'+c.value+'">'+c.name+"</option>");if(c.hasOwnProperty("attributes")&&Object.keys(c.attributes).length){f.attr(c.attributes)}if(c.checked){f.prop("selected",true)}r.append(f)}}else if(c.hasOwnProperty("options")){var p=t('<optgroup label="'+c.label+'"></optgroup>');o.find("> li.optgroup > span.label").each(function(){if(t(this).text()==c.label){u=t(this).closest(".optgroup");d=false}});if(n){if(r.find('optgroup[label="'+c.label+'"]').length){p=r.find('optgroup[label="'+c.label+'"]')}else{r.append(p)}}if(d){u.addClass("optgroup");u.append('<span class="label">'+c.label+"</span>");u.find("> .label").css({clear:"both"});if(s.options.selectGroup){u.append('<a href="#" class="ms-selectall">'+s.options.texts.selectAll+"</a>")}u.append("<ul/>")}for(var m in c.options){if(!c.options.hasOwnProperty(m)){continue}var g=c.options[m];var v=t("<li/>");if(s.options.showCheckbox&&s.options.checkboxAutoFit){v.addClass("ms-reflow")}if(!g.hasOwnProperty("value")){continue}s._addOption(v,g);u.find("> ul").append(v);if(n){var f=t('<option value="'+g.value+'">'+g.name+"</option>");if(g.hasOwnProperty("attributes")&&Object.keys(g.attributes).length){f.attr(g.attributes)}if(g.checked){f.prop("selected",true)}p.append(f)}}}else{continue}if(d){l.push(u)}}o.append(l);if(s.options.checkboxAutoFit&&s.options.showCheckbox&&!a.hasClass("hide-checkbox")){var y=o.find('.ms-reflow:eq(0) input[type="checkbox"]');if(y.length){var b=y.outerWidth();b=b?b:15;o.find(".ms-reflow label").css("padding-left",parseInt(y.closest("label").css("padding-left"))*2+b);o.find(".ms-reflow").removeClass("ms-reflow")}}s._updatePlaceholderText();a.find("ul").css({"column-count":"","column-gap":"","-webkit-column-count":"","-webkit-column-gap":"","-moz-column-count":"","-moz-column-gap":""});if(r.find("optgroup").length){o.find("> li:not(.optgroup)").css({float:"left",width:100/s.options.columns+"%"});o.find("li.optgroup").css({clear:"both"}).find("> ul").css({"column-count":s.options.columns,"column-gap":0,"-webkit-column-count":s.options.columns,"-webkit-column-gap":0,"-moz-column-count":s.options.columns,"-moz-column-gap":0});if(this._ieVersion()&&this._ieVersion()<10){o.find("li.optgroup > ul > li").css({float:"left",width:100/s.options.columns+"%"})}}else{o.css({"column-count":s.options.columns,"column-gap":0,"-webkit-column-count":s.options.columns,"-webkit-column-gap":0,"-moz-column-count":s.options.columns,"-moz-column-gap":0});if(this._ieVersion()&&this._ieVersion()<10){o.find("> li").css({float:"left",width:100/s.options.columns+"%"})}}s._updateSelectAllText()},settings:function(e){this.options=t.extend(true,{},this.options,e);this.reload()},unload:function(){t(this.element).siblings("#ms-list-"+this.listNumber+".ms-options-wrap").remove();t(this.element).show(function(){t(this).css("display","").removeClass("jqmsLoaded")})},reload:function(){t(this.element).siblings("#ms-list-"+this.listNumber+".ms-options-wrap").remove();t(this.element).removeClass("jqmsLoaded");this.load()},reset:function(){var e=[];t(this.element).find("option").each(function(){if(t(this).prop("defaultSelected")){e.push(t(this).val())}});t(this.element).val(e);this.reload()},disable:function(e){e=typeof e==="boolean"?e:true;t(this.element).prop("disabled",e);t(this.element).siblings("#ms-list-"+this.listNumber+".ms-options-wrap").find("button:first-child").prop("disabled",e)},_updateSelectAllText:function(){if(!this.updateSelectAll){return}var e=this;if(!e.options.selectAll&&!e.options.selectGroup){return}var i=t(e.element).siblings("#ms-list-"+e.listNumber+".ms-options-wrap").find("> .ms-options");i.find(".ms-selectall").each(function(){var i=t(this).parent().find("li:not(.optgroup,.selected,.ms-hidden)");t(this).text(i.length?e.options.texts.selectAll:e.options.texts.unselectAll)})},_updatePlaceholderText:function(){if(!this.updatePlaceholder){return}var e=this;var i=t(e.element);var n=i.val()?i.val():[];var s=i.siblings("#ms-list-"+e.listNumber+".ms-options-wrap").find("> button:first-child");var r=s.find("span");var o=i.siblings("#ms-list-"+e.listNumber+".ms-options-wrap").find("> .ms-options");if(i.find("option:selected:disabled").length){n=[];i.find("option:selected").each(function(){n.push(t(this).val())})}var a=[];for(var l in n){if(!n.hasOwnProperty(l)){continue}a.push(t.trim(i.find('option[value="'+e._escapeSelector(n[l])+'"]').text()));if(a.length>=e.options.maxPlaceholderOpts){break}}r.text(a.join(", "));if(a.length){o.closest(".ms-options-wrap").addClass("ms-has-selections");if(typeof e.options.onPlaceholder=="function"){e.options.onPlaceholder(e.element,r,a)}}else{o.closest(".ms-options-wrap").removeClass("ms-has-selections")}if(!a.length){r.text(e.options.texts.placeholder)}else if(r.width()>s.width()||a.length!=n.length){r.text(n.length+e.options.texts.selectedOptions)}},_addOption:function(e,i){var s=this;var r=t("<label/>",{for:"ms-opt-"+n,text:i.name});var o=t("<input>",{type:"checkbox",title:i.name,id:"ms-opt-"+n,value:i.value});if(i.hasOwnProperty("attributes")&&Object.keys(i.attributes).length){o.attr(i.attributes)}if(i.checked){e.addClass("default selected");o.prop("checked",true)}r.prepend(o);var a="";if(s.options.searchOptions.searchText){a+=" "+i.name.toLowerCase()}if(s.options.searchOptions.searchValue){a+=" "+i.value.toLowerCase()}e.attr("data-search-term",t.trim(a)).prepend(r);n=n+1},_ieVersion:function(){var t=navigator.userAgent.toLowerCase();return t.indexOf("msie")!=-1?parseInt(t.split("msie")[1]):false},_escapeSelector:function(e){if(typeof t.escapeSelector=="function"){return t.escapeSelector(e)}else{return e.replace(/[!"#$%&'()*+,.\/:;<=>?@[\\\]^`{|}~]/g,"\\$&")}}};t.fn.multiselect=function(e){if(!this.length){return}var i=arguments;var n;if(e===undefined||typeof e==="object"){return this.each(function(){if(!t.data(this,"plugin_multiselect")){t.data(this,"plugin_multiselect",new s(this,e))}})}else if(typeof e==="string"&&e[0]!=="_"&&e!=="init"){this.each(function(){var r=t.data(this,"plugin_multiselect");if(r instanceof s&&typeof r[e]==="function"){n=r[e].apply(r,Array.prototype.slice.call(i,1))}if(e==="unload"){t.data(this,"plugin_multiselect",null)}});return n}}})(jQuery);(function(t){"use strict";let e={start:function(e,i=""){t(e).multiselect({columns:1,search:true,selectAll:true,optionAttributes:["data-partner"],maxHeight:225,minHeight:20,texts:{placeholder:i,search:" ",selectedOptions:" ",selectAll:" ",unselectAll:"   ",noneSelected:"  "}})},changeMerchant:function(e,i,n){let s=t(i).next();let r=t(e).find("option:selected").attr("data-ismfo");let o=t(s).find("input");t(o).each(function(){if(t(this).attr(n)!==r&&r!=="-1"){t(this).parent().parent("li").remove()}})},otch:function(){this.start(".multiselect-field");t(document).on("change",".form-control[name=IdPart]",function(){t(".multiselect-field").multiselect("reset");e.changeMerchant(".form-control[name=IdPart]",".multiselect-field","data-partner")})},statList:function(){this.start(".multiselect-field");this.start(".multiselect-status","");t(document).on("change",".form-control[name=IdPart]",function(){t(".multiselect-field").multiselect("reset");e.changeMerchant(".form-control[name=IdPart]",".multiselect-field","data-partner")})},statSale:function(){this.start(".multiselect-sale")},statRecurrentpaysdata:function(){this.start(".multiselect-recurrentpaysdata")},orderIndex:function(){this.start(".multiselect-order")},statMerchantusluga:function(){this.start(".multiselect-field");this.start(".multiselect-status","");t(document).on("change",".form-control[name=IdPart]",function(){t(".multiselect-field").multiselect("reset");e.changeMerchant(".form-control[name=IdPart]",".multiselect-field","data-partner")})}};window.multiselect=e})(jQuery||$);(function(t){"use strict";window.antifraud={start_script:function(){this.activate_date_fields();t(document).on("submit","#statlistform",function(t){t.preventDefault();antifraud.click_search()});t(document).on("click",".send-pjax",function(){antifraud.modal_open(this)});t(document).on("pjax:error",function(t,e,i,n){t.preventDefault()})},activate_date_fields:function(){t('[name="calDay"],[name="calWeek"],[name="calMon"]').on("click",function(){t('[name="calDay"]').removeClass("active");t('[name="calWeek"]').removeClass("active");t('[name="calMon"]').removeClass("active");t(this).addClass("active");let e,i;e=moment(new Date).hour(23).minute(59).seconds(59);i=moment(new Date).hour(0).minute(0).seconds(0);if(t(this).attr("name")=="calDay"){t('[name="datefrom"]').data("DateTimePicker").date(i);t('[name="dateto"]').data("DateTimePicker").date(e)}else if(t(this).attr("name")=="calWeek"){i=i.subtract(7,"days");t('[name="datefrom"]').data("DateTimePicker").date(i);t('[name="dateto"]').data("DateTimePicker").date(e)}else if(t(this).attr("name")=="calMon"){i=i.subtract(1,"months");t('[name="datefrom"]').data("DateTimePicker").date(i);t('[name="dateto"]').data("DateTimePicker").date(e)}});t('[name="datefrom"],[name="dateto"]').datetimepicker({format:"DD.MM.YYYY HH:mm",showClose:true})},click_search:function(){let e=t("#statlistform").serialize();t.pjax.reload({type:"GET",url:"/partner/antifraud/ajax-index-list",container:"#some_pjax_id",data:e,push:false,replace:false,timeout:1e4,cache:false,scrollTo:false})},modal_open:function(e){let i=t(e).attr("data-user-hash");let n=t(e).attr("data-transaction-id");let s="user_hash="+i+"&transaction_id="+n;t.pjax.reload({type:"GET",url:"/partner/antifraud/ajax-modal-info",container:"#pjax_modal",data:s,push:false,replace:false,timeout:1e4,cache:false,scrollTo:false});t("#transaction_info").modal("show")}};window.antifraud_setting={start_script:function(){this.send_refund()},send_refund:function(){t(document).on("submit","#settings-antifraud-refund",function(e){e.preventDefault();let i=t(this).serialize();t.ajax({method:"post",url:"/partner/antifraud/settings",data:i,success:function(e){if(e.status===1){swal({title:"",text:e.message,type:"success"},function(){t("#statlistform").trigger("submit")})}else{swal({title:"",text:e.data.first_error[0],type:"error"},function(){t("#statlistform").trigger("submit");t.each(e.data.errors,function(e,i){let n=t('#settings-antifraud-refund input[name= "'+e+'"]');n.parent().addClass("has-error")})})}},error:function(e){t("#statlistform").closest(".ibox-content").toggleClass("sk-loading");swal({title:"",text:"  .    . .",type:"error"},function(){t("#statlistform").closest(".ibox-content").toggleClass("sk-loading")})}})})}}})($||jQuery);(function(t){"use strict";let e=0;let i={list:function(){t('[name="datefrom"]').datetimepicker({format:"MM.YYYY"}).on("dp.change",function(){t("#actlistform").trigger("submit")});t("#actidpatner").on("change",function(){t("#actlistform").trigger("submit")});t("#actlistform").on("submit",function(e){e.preventDefault();let i=t("#actlistform");t.ajax({url:"/partner/stat/act-list",method:"POST",data:i.serialize(),beforeSend:function(){t("#actlistdata").html("");i.closest(".ibox-content").toggleClass("sk-loading")},success:function(e){i.closest(".ibox-content").toggleClass("sk-loading");if(e.status==1){t("#actlistdata").html(e.data)}else{toastr.error(e.message,"")}},error:function(){i.closest(".ibox-content").toggleClass("sk-loading")}});return false});t("#actlistdata").on("click","#btnFormirAct",function(e){let i=t("#actlistform");t.ajax({url:"/partner/stat/act-create",method:"POST",data:i.serialize(),beforeSend:function(){i.closest(".ibox-content").toggleClass("sk-loading")},success:function(e){i.closest(".ibox-content").toggleClass("sk-loading");if(e.status==1){toastr.success("OK"," ");t("#actlistform").trigger("submit")}else{toastr.error(e.message,"")}},error:function(){i.closest(".ibox-content").toggleClass("sk-loading")}});return false}).on("click","#btnPubAct",function(e){let i=t("#actlistform");t.ajax({url:"/partner/stat/act-pub",method:"POST",data:i.serialize(),beforeSend:function(){i.closest(".ibox-content").toggleClass("sk-loading")},success:function(e){i.closest(".ibox-content").toggleClass("sk-loading");if(e.status==1){toastr.success("OK"," ");t("#actlistform").trigger("submit")}else{toastr.error(e.message,"")}},error:function(){i.closest(".ibox-content").toggleClass("sk-loading")}});return false}).on("click",'[data-click="schetsend"]',function(){if(confirm(" ?")){let e=t(this).attr("data-id");let i=t("#actlistform");t.ajax({url:"/partner/stat/act-createschet",method:"POST",data:{ActId:e},beforeSend:function(){i.closest(".ibox-content").toggleClass("sk-loading")},success:function(e){i.closest(".ibox-content").toggleClass("sk-loading");if(e.status==1){toastr.success("OK",e.message);t("#actlistform").trigger("submit")}else{toastr.error(e.message,"")}},error:function(){i.closest(".ibox-content").toggleClass("sk-loading")}})}return false});t("#actlistform").trigger("submit")},edit:function(){t("#btnSaveAct").on("click",function(e){let i=t("#formEditAct");t.ajax({url:"/partner/stat/act-save",method:"POST",data:i.serialize(),beforeSend:function(){i.closest(".ibox-content").toggleClass("sk-loading")},success:function(t){i.closest(".ibox-content").toggleClass("sk-loading");if(t.status==1){toastr.success("OK","   .")}else{toastr.error(t.message,"")}},error:function(){i.closest(".ibox-content").toggleClass("sk-loading")}});return false})}};window.act=i})(jQuery||$);(function(t){"use strict";let e={init:function(){t("#addnewsform").on("submit",function(e){e.preventDefault();let i=t("#addnewsform");t.ajax({url:"/partner/default/addnews",method:"POST",data:i.serialize(),beforeSend:function(){t("#submitnews").prop("disabled",true)},success:function(e){i.closest(".ibox-content").toggleClass("sk-loading");if(e.status==1){window.location.reload()}else{t("#submitnews").prop("disabled",false);toastr.error(e.message,"")}},error:function(){t("#submitnews").prop("disabled",false)}});return false});t('[data-click="delnews"]').off().on("click",function(){let e=t(this).attr("data-id");if(confirm(" ?")){t.ajax({url:"/partner/default/delnews",method:"POST",data:{id:e},beforeSend:function(){},success:function(t){if(t.status==1){window.location.reload()}else{toastr.error(t.message,"")}},error:function(){}})}return false});setTimeout(function e(){t.ajax({url:"/partner/default/alerts",method:"GET",success:function(t){if(t.status==1&&t.data.length>0){t.data.forEach(function(t,e){toastr.warning(t.body,t.head,{timeOut:3e4,positionClass:"toast-top-full-width"})})}}})},500)}};window.news=e})(jQuery||$);