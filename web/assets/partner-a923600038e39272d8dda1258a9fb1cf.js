!function(o){"use strict";function t(){var t=document.createElement("mm"),e={WebkitTransition:"webkitTransitionEnd",MozTransition:"transitionend",OTransition:"oTransitionEnd otransitionend",transition:"transitionend"};for(var i in e)if(void 0!==t.style[i])return{end:e[i]};return!1}function e(n){return this.each(function(){var t=o(this),e=t.data("mm"),i=o.extend({},a.DEFAULTS,t.data(),"object"==typeof n&&n);e||t.data("mm",e=new a(this,i)),"string"==typeof n&&e[n]()})}o.fn.emulateTransitionEnd=function(t){var e=!1,i=this;o(this).one("mmTransitionEnd",function(){e=!0});var n=function(){e||o(i).trigger(r.end)};return setTimeout(n,t),this};var r=t();r&&(o.event.special.mmTransitionEnd={bindType:r.end,delegateType:r.end,handle:function(t){return o(t.target).is(this)?t.handleObj.handler.apply(this,arguments):void 0}});var a=function(t,e){this.$element=o(t),this.options=o.extend({},a.DEFAULTS,e),this.transitioning=null,this.init()};a.TRANSITION_DURATION=350,a.DEFAULTS={toggle:!0,doubleTapToGo:!1,activeClass:"active"},a.prototype.init=function(){var s=this,r=this.options.activeClass;this.$element.find("li."+r).has("ul").children("ul").addClass("collapse in"),this.$element.find("li").not("."+r).has("ul").children("ul").addClass("collapse"),this.options.doubleTapToGo&&this.$element.find("li."+r).has("ul").children("a").addClass("doubleTapToGo"),this.$element.find("li").has("ul").children("a").on("click.metisMenu",function(t){var e=o(this),i=e.parent("li"),n=i.children("ul");return t.preventDefault(),i.hasClass(r)?s.hide(n):s.show(n),s.options.doubleTapToGo&&s.doubleTapToGo(e)&&"#"!==e.attr("href")&&""!==e.attr("href")?(t.stopPropagation(),void(document.location=e.attr("href"))):void 0})},a.prototype.doubleTapToGo=function(t){var e=this.$element;return t.hasClass("doubleTapToGo")?(t.removeClass("doubleTapToGo"),!0):t.parent().children("ul").length?(e.find(".doubleTapToGo").removeClass("doubleTapToGo"),t.addClass("doubleTapToGo"),!1):void 0},a.prototype.show=function(t){var e=this.options.activeClass,i=o(t),n=i.parent("li");if(!this.transitioning&&!i.hasClass("in")){n.addClass(e),this.options.toggle&&this.hide(n.siblings().children("ul.in")),i.removeClass("collapse").addClass("collapsing").height(0),this.transitioning=1;var s=function(){i.removeClass("collapsing").addClass("collapse in").height(""),this.transitioning=0};return r?void i.one("mmTransitionEnd",o.proxy(s,this)).emulateTransitionEnd(a.TRANSITION_DURATION).height(i[0].scrollHeight):s.call(this)}},a.prototype.hide=function(t){var e=this.options.activeClass,i=o(t);if(!this.transitioning&&i.hasClass("in")){i.parent("li").removeClass(e),i.height(i.height())[0].offsetHeight,i.addClass("collapsing").removeClass("collapse").removeClass("in"),this.transitioning=1;var n=function(){this.transitioning=0,i.removeClass("collapsing").addClass("collapse")};return r?void i.height(0).one("mmTransitionEnd",o.proxy(n,this)).emulateTransitionEnd(a.TRANSITION_DURATION):n.call(this)}};var i=o.fn.metisMenu;o.fn.metisMenu=e,o.fn.metisMenu.Constructor=a,o.fn.metisMenu.noConflict=function(){return o.fn.metisMenu=i,this}}(jQuery);(function(_){_.fn.extend({slimScroll:function(w){var x=_.extend({width:"auto",height:"250px",size:"7px",color:"#000",position:"right",distance:"1px",start:"top",opacity:.4,alwaysVisible:!1,disableFadeOut:!1,railVisible:!1,railColor:"#333",railOpacity:.2,railDraggable:!0,railClass:"slimScrollRail",barClass:"slimScrollBar",wrapperClass:"slimScrollDiv",allowPageScroll:!1,wheelStep:20,touchScrollStep:200,borderRadius:"7px",railBorderRadius:"7px"},w);this.each(function(){function e(t){if(s){t=t||window.event;var e=0;t.wheelDelta&&(e=-t.wheelDelta/120);t.detail&&(e=t.detail/3);_(t.target||t.srcTarget||t.srcElement).closest("."+x.wrapperClass).is(m.parent())&&n(e,!0);t.preventDefault&&!p&&t.preventDefault();p||(t.returnValue=!1)}}function n(t,e,i){p=!1;var n=t,s=m.outerHeight()-v.outerHeight();e&&(n=parseInt(v.css("top"))+t*parseInt(x.wheelStep)/100*v.outerHeight(),n=Math.min(Math.max(n,0),s),n=0<t?Math.ceil(n):Math.floor(n),v.css({top:n+"px"}));d=parseInt(v.css("top"))/(m.outerHeight()-v.outerHeight());n=d*(m[0].scrollHeight-m.outerHeight());i&&(n=t,t=n/m[0].scrollHeight*m.outerHeight(),t=Math.min(Math.max(t,0),s),v.css({top:t+"px"}));m.scrollTop(n);m.trigger("slimscrolling",~~n);r();o()}function i(){u=Math.max(m.outerHeight()/m[0].scrollHeight*m.outerHeight(),30);v.css({height:u+"px"});var t=u==m.outerHeight()?"none":"block";v.css({display:t})}function r(){i();clearTimeout(c);d==~~d?(p=x.allowPageScroll,f!=d&&m.trigger("slimscroll",0==~~d?"top":"bottom")):p=!1;f=d;u>=m.outerHeight()?p=!0:(v.stop(!0,!0).fadeIn("fast"),x.railVisible&&y.stop(!0,!0).fadeIn("fast"))}function o(){x.alwaysVisible||(c=setTimeout(function(){x.disableFadeOut&&s||a||l||(v.fadeOut("slow"),y.fadeOut("slow"))},1e3))}var s,a,l,c,h,u,d,f,p=!1,m=_(this);if(m.parent().hasClass(x.wrapperClass)){var g=m.scrollTop(),v=m.closest("."+x.barClass),y=m.closest("."+x.railClass);i();if(_.isPlainObject(w)){if("height"in w&&"auto"==w.height){m.parent().css("height","auto");m.css("height","auto");var b=m.parent().parent().height();m.parent().css("height",b);m.css("height",b)}if("scrollTo"in w)g=parseInt(x.scrollTo);else if("scrollBy"in w)g+=parseInt(x.scrollBy);else if("destroy"in w){v.remove();y.remove();m.unwrap();return}n(g,!1,!0)}}else if(!(_.isPlainObject(w)&&"destroy"in w)){x.height="auto"==x.height?m.parent().height():x.height;g=_("<div></div>").addClass(x.wrapperClass).css({position:"relative",overflow:"hidden",width:x.width,height:x.height});m.css({overflow:"hidden",width:x.width,height:x.height});var y=_("<div></div>").addClass(x.railClass).css({width:x.size,height:"100%",position:"absolute",top:0,display:x.alwaysVisible&&x.railVisible?"block":"none","border-radius":x.railBorderRadius,background:x.railColor,opacity:x.railOpacity,zIndex:90}),v=_("<div></div>").addClass(x.barClass).css({background:x.color,width:x.size,position:"absolute",top:0,opacity:x.opacity,display:x.alwaysVisible?"block":"none","border-radius":x.borderRadius,BorderRadius:x.borderRadius,MozBorderRadius:x.borderRadius,WebkitBorderRadius:x.borderRadius,zIndex:99}),b="right"==x.position?{right:x.distance}:{left:x.distance};y.css(b);v.css(b);m.wrap(g);m.parent().append(v);m.parent().append(y);x.railDraggable&&v.bind("mousedown",function(e){var i=_(document);l=!0;t=parseFloat(v.css("top"));pageY=e.pageY;i.bind("mousemove.slimscroll",function(e){currTop=t+e.pageY-pageY;v.css("top",currTop);n(0,v.position().top,!1)});i.bind("mouseup.slimscroll",function(t){l=!1;o();i.unbind(".slimscroll")});return!1}).bind("selectstart.slimscroll",function(t){t.stopPropagation();t.preventDefault();return!1});y.hover(function(){r()},function(){o()});v.hover(function(){a=!0},function(){a=!1});m.hover(function(){s=!0;r();o()},function(){s=!1;o()});m.bind("touchstart",function(t,e){t.originalEvent.touches.length&&(h=t.originalEvent.touches[0].pageY)});m.bind("touchmove",function(t){p||t.originalEvent.preventDefault();t.originalEvent.touches.length&&(n((h-t.originalEvent.touches[0].pageY)/x.touchScrollStep,!0),h=t.originalEvent.touches[0].pageY)});i();"bottom"===x.start?(v.css({top:m.outerHeight()-v.outerHeight()}),n(0,!0)):"top"!==x.start&&(n(_(x.start).position().top,null,!0),x.alwaysVisible||v.hide());window.addEventListener?(this.addEventListener("DOMMouseScroll",e,!1),this.addEventListener("mousewheel",e,!1)):document.attachEvent("onmousewheel",e)}});return this}});_.fn.extend({slimscroll:_.fn.slimScroll})})(jQuery);(function(a,n,g){var v=function(t,e){var i=n.createElementNS("http://www.w3.org/2000/svg",t);a.each(e,function(t,e){i.setAttribute(t,e)});return i},t="createElementNS"in n&&v("svg",{}).createSVGRect,f=1/(window.devicePixelRatio||1),l=a.fn.peity=function(r,o){t&&this.each(function(){var t=a(this),e=t.data("peity");if(e)r&&(e.type=r),a.extend(e.opts,o);else{var i=l.defaults[r],n={};a.each(t.data(),function(t,e){t in i&&(n[t]=e)});var s=a.extend({},i,n,o),e=new c(t,r,s);t.change(function(){e.draw()}).data("peity",e)}e.draw()});return this},c=function(t,e,i){this.$el=t;this.type=e;this.opts=i},e=c.prototype;e.draw=function(){l.graphers[this.type].call(this,this.opts)};e.fill=function(){var i=this.opts.fill,t=i;a.isFunction(t)||(t=function(t,e){return i[e%i.length]});return t};e.prepare=function(t,e){var i;this.svg?i=a(this.svg).empty():(this.svg=v("svg",{class:"peity"}),this.$el.hide().after(this.svg),i=a(this.svg).data("peity",this));this.svg.setAttribute("height",e);this.svg.setAttribute("width",t);return i};e.values=function(){return a.map(this.$el.text().split(this.opts.delimiter),function(t){return parseFloat(t)})};l.defaults={};l.graphers={};l.register=function(t,e,i){this.defaults[t]=e;this.graphers[t]=i};l.register("pie",{delimiter:null,diameter:16,fill:["#ff9900","#fff4dd","#ffc66e"]},function(t){if(!t.delimiter){var e=this.$el.text().match(/[^0-9\.]/);t.delimiter=e?e[0]:","}e=this.values();if("/"==t.delimiter)var i=e[0],e=[i,g.max(0,e[1]-i)];for(var n=0,i=e.length,s=0;n<i;n++)s+=e[n];for(var t=this.prepare(t.width||t.diameter,t.height||t.diameter),n=t.width(),r=t.height(),t=n/2,r=r/2,o=g.min(t,r),a=g.PI,l=this.fill(),c=-a/2,n=0;n<i;n++){var h=e[n],u=h/s,d;if(0!=u){if(1==u)d=v("circle",{cx:t,cy:r,r:o});else{d=2*u*a;var u=c+d,f=o*g.cos(c)+t,c=o*g.sin(c)+r,p=o*g.cos(u)+t,m=o*g.sin(u)+r;d=v("path",{d:["M",t,r,"L",f,c,"A",o,o,0,d>a?1:0,1,p,m,"Z"].join(" ")});c=u}d.setAttribute("fill",l.call(this,h,n,e));this.svg.appendChild(d)}}});l.register("line",{delimiter:",",fill:"#c6d9fd",height:16,max:null,min:0,stroke:"#4d89f9",strokeWidth:1,width:32},function(t){var e=this.values();1==e.length&&e.push(e[0]);for(var i=g.max.apply(g,e.concat([t.max])),n=g.min.apply(g,e.concat([t.min])),s=this.prepare(t.width,t.height),r=s.width(),s=s.height()-t.strokeWidth,o=r/(e.length-1),i=i-n,a=0==i?s:s/i,l=s+n*a,i=[0,l],c=0;c<e.length;c++)i.push(c*o,s-a*(e[c]-n)+t.strokeWidth/2);i.push(r,l);e=v("polygon",{fill:t.fill,points:i.join(" ")});this.svg.appendChild(e);t.strokeWidth&&(t=v("polyline",{fill:"transparent",points:i.slice(2,i.length-2).join(" "),stroke:t.stroke,"stroke-width":t.strokeWidth,"stroke-linecap":"square"}),this.svg.appendChild(t))});l.register("bar",{delimiter:",",fill:["#4D89F9"],gap:1,height:16,max:null,min:0,width:32},function(t){for(var e=this.values(),i=g.max.apply(g,e.concat([t.max])),n=g.min.apply(g,e.concat([t.min])),s=this.prepare(t.width,t.height),r=s.width(),s=s.height(),o=i-n,a=0==o?0:s/o,t=t.gap,r=(r+t)/e.length,l=this.fill(),c=0;c<e.length;c++){var h=e[c],u=s-a*(h-n),d=a*h;if(0==d){if(d=f,0>=n&&0<i||0==o)u-=f}else 0>d&&(u+=d,d=-d);h=v("rect",{fill:l.call(this,h,c,e),x:c*r,y:u,width:r-t,height:d});this.svg.appendChild(h)}})})(jQuery,document,Math);$(document).ready(function(){if($(this).width()<769){$("body").addClass("body-small")}else{$("body").removeClass("body-small")}import("/insasset/js/plugins/metisMenu/jquery.metisMenu.js").then(function(t){$("#side-menu").metisMenu()});$(".collapse-link").on("click",function(){var t=$(this).closest("div.ibox");var e=$(this).find("i");var i=t.children(".ibox-content");i.slideToggle(200);e.toggleClass("fa-chevron-up").toggleClass("fa-chevron-down");t.toggleClass("").toggleClass("border-bottom");setTimeout(function(){t.resize();t.find("[id^=map-]").resize()},50)});$(".close-link").on("click",function(){var t=$(this).closest("div.ibox");t.remove()});$(".fullscreen-link").on("click",function(){var t=$(this).closest("div.ibox");var e=$(this).find("i");$("body").toggleClass("fullscreen-ibox-mode");e.toggleClass("fa-expand").toggleClass("fa-compress");t.toggleClass("fullscreen");setTimeout(function(){$(window).trigger("resize")},100)});$(".close-canvas-menu").on("click",function(){$("body").toggleClass("mini-navbar");SmoothlyMenu()});$("body.canvas-menu .sidebar-collapse").slimScroll({height:"100%",railOpacity:.9});$(".right-sidebar-toggle").on("click",function(){$("#right-sidebar").toggleClass("sidebar-open")});$(".sidebar-container").slimScroll({height:"100%",railOpacity:.4,wheelStep:10});$(".open-small-chat").on("click",function(){$(this).children().toggleClass("fa-comments").toggleClass("fa-remove");$(".small-chat-box").toggleClass("active")});$(".small-chat-box .content").slimScroll({height:"234px",railOpacity:.4});$(".check-link").on("click",function(){var t=$(this).find("i");var e=$(this).next("span");t.toggleClass("fa-check-square").toggleClass("fa-square-o");e.toggleClass("todo-completed");return false});$(".navbar-minimalize").on("click",function(t){t.preventDefault();$("body").toggleClass("mini-navbar");SmoothlyMenu()});$(".tooltip-demo").tooltip({selector:"[data-toggle=tooltip]",container:"body"});function t(){var t=$("body > #wrapper").height()-61;$(".sidebar-panel").css("min-height",t+"px");var e=$("nav.navbar-default").height();var i=$("#page-wrapper").height();if(e>i){$("#page-wrapper").css("min-height",e+"px")}if(e<i){$("#page-wrapper").css("min-height",$(window).height()+"px")}if($("body").hasClass("fixed-nav")){if(e>i){$("#page-wrapper").css("min-height",e+"px")}else{$("#page-wrapper").css("min-height",$(window).height()-60+"px")}}}t();$(window).bind("load",function(){if($("body").hasClass("fixed-sidebar")){$(".sidebar-collapse").slimScroll({height:"100%",railOpacity:.9})}});$(window).scroll(function(){if($(window).scrollTop()>0&&!$("body").hasClass("fixed-nav")){$("#right-sidebar").addClass("sidebar-top")}else{$("#right-sidebar").removeClass("sidebar-top")}});$(window).bind("load resize scroll",function(){if(!$("body").hasClass("body-small")){t()}});$("[data-toggle=popover]").popover();$(".full-height-scroll").slimscroll({height:"100%"})});$(window).bind("resize",function(){if($(this).width()<769){$("body").addClass("body-small")}else{$("body").removeClass("body-small")}});$(document).ready(function(){if(localStorageSupport()){var t=localStorage.getItem("collapse_menu");var e=localStorage.getItem("fixedsidebar");var i=localStorage.getItem("fixednavbar");var n=localStorage.getItem("boxedlayout");var s=localStorage.getItem("fixedfooter");var r=$("body");if(e=="on"){r.addClass("fixed-sidebar");$(".sidebar-collapse").slimScroll({height:"100%",railOpacity:.9})}if(t=="on"){if(r.hasClass("fixed-sidebar")){if(!r.hasClass("body-small")){r.addClass("mini-navbar")}}else{if(!r.hasClass("body-small")){r.addClass("mini-navbar")}}}if(i=="on"){$(".navbar-static-top").removeClass("navbar-static-top").addClass("navbar-fixed-top");r.addClass("fixed-nav")}if(n=="on"){r.addClass("boxed-layout")}if(s=="on"){$(".footer").addClass("fixed")}}});function localStorageSupport(){return"localStorage"in window&&window["localStorage"]!==null}function animationHover(t,e){t=$(t);t.hover(function(){t.addClass("animated "+e)},function(){window.setTimeout(function(){t.removeClass("animated "+e)},2e3)})}function SmoothlyMenu(){if(!$("body").hasClass("mini-navbar")||$("body").hasClass("body-small")){$("#side-menu").hide();setTimeout(function(){$("#side-menu").fadeIn(400)},200)}else if($("body").hasClass("fixed-sidebar")){$("#side-menu").hide();setTimeout(function(){$("#side-menu").fadeIn(400)},100)}else{$("#side-menu").removeAttr("style")}}function WinMove(){var t="[class*=col]";var e=".ibox-title";var i="[class*=col]";$(t).sortable({handle:e,connectWith:i,tolerance:"pointer",forcePlaceholderSize:true,opacity:.8}).disableSelection()}(function(f){f.gritter={};f.gritter.options={position:"",class_name:"",fade_in_speed:"medium",fade_out_speed:1e3,time:6e3};f.gritter.add=function(e){try{return p.add(e||{})}catch(t){var i="Gritter Error: "+t;typeof console!="undefined"&&console.error?console.error(i,e):alert(i)}};f.gritter.remove=function(t,e){p.removeSpecific(t,e||{})};f.gritter.removeAll=function(t){p.stop(t||{})};var p={position:"",fade_in_speed:"",fade_out_speed:"",time:"",_custom_timer:0,_item_count:0,_is_setup:0,_tpl_close:'<a class="gritter-close" href="#" tabindex="1">Close Notification</a>',_tpl_title:'<span class="gritter-title">[[title]]</span>',_tpl_item:'<div id="gritter-item-[[number]]" class="gritter-item-wrapper [[item_class]]" style="display:none" role="alert"><div class="gritter-top"></div><div class="gritter-item">[[close]][[image]]<div class="[[class_name]]">[[title]]<p>[[text]]</p></div><div style="clear:both"></div></div><div class="gritter-bottom"></div></div>',_tpl_wrap:'<div id="gritter-notice-wrapper"></div>',add:function(i){if(typeof i=="string"){i={text:i}}if(i.text===null){throw'You must supply "text" parameter.'}if(!this._is_setup){this._runSetup()}var t=i.title,e=i.text,n=i.image||"",s=i.sticky||false,r=i.class_name||f.gritter.options.class_name,o=f.gritter.options.position,a=i.time||"";this._verifyWrapper();this._item_count++;var l=this._item_count,c=this._tpl_item;f(["before_open","after_open","before_close","after_close"]).each(function(t,e){p["_"+e+"_"+l]=f.isFunction(i[e])?i[e]:function(){}});this._custom_timer=0;if(a){this._custom_timer=a}var h=n!=""?'<img alt="image" src="'+n+'" class="gritter-image" />':"",u=n!=""?"gritter-with-image":"gritter-without-image";if(t){t=this._str_replace("[[title]]",t,this._tpl_title)}else{t=""}c=this._str_replace(["[[title]]","[[text]]","[[close]]","[[image]]","[[number]]","[[class_name]]","[[item_class]]"],[t,e,this._tpl_close,h,this._item_count,u,r],c);if(this["_before_open_"+l]()===false){return false}f("#gritter-notice-wrapper").addClass(o).append(c);var d=f("#gritter-item-"+this._item_count);d.fadeIn(this.fade_in_speed,function(){p["_after_open_"+l](f(this))});if(!s){this._setFadeTimer(d,l)}f(d).bind("mouseenter mouseleave",function(t){if(t.type=="mouseenter"){if(!s){p._restoreItemIfFading(f(this),l)}}else{if(!s){p._setFadeTimer(f(this),l)}}p._hoverState(f(this),t.type)});f(d).find(".gritter-close").click(function(){p.removeSpecific(l,{},null,true);return false});return l},_countRemoveWrapper:function(t,e,i){e.remove();this["_after_close_"+t](e,i);if(f(".gritter-item-wrapper").length==0){f("#gritter-notice-wrapper").remove()}},_fade:function(t,e,i,n){var i=i||{},s=typeof i.fade!="undefined"?i.fade:true,r=i.speed||this.fade_out_speed,o=n;this["_before_close_"+e](t,o);if(n){t.unbind("mouseenter mouseleave")}if(s){t.animate({opacity:0},r,function(){t.animate({height:0},300,function(){p._countRemoveWrapper(e,t,o)})})}else{this._countRemoveWrapper(e,t)}},_hoverState:function(t,e){if(e=="mouseenter"){t.addClass("hover");t.find(".gritter-close").show()}else{t.removeClass("hover");t.find(".gritter-close").hide()}},removeSpecific:function(t,e,i,n){if(!i){var i=f("#gritter-item-"+t)}this._fade(i,t,e||{},n)},_restoreItemIfFading:function(t,e){clearTimeout(this["_int_id_"+e]);t.stop().css({opacity:"",height:""})},_runSetup:function(){for(opt in f.gritter.options){this[opt]=f.gritter.options[opt]}this._is_setup=1},_setFadeTimer:function(t,e){var i=this._custom_timer?this._custom_timer:this.time;this["_int_id_"+e]=setTimeout(function(){p._fade(t,e)},i)},stop:function(t){var e=f.isFunction(t.before_close)?t.before_close:function(){};var i=f.isFunction(t.after_close)?t.after_close:function(){};var n=f("#gritter-notice-wrapper");e(n);n.fadeOut(function(){f(this).remove();i()})},_str_replace:function(t,e,i,n){var s=0,r=0,o="",a="",l=0,c=0,h=[].concat(t),u=[].concat(e),d=i,f=u instanceof Array,p=d instanceof Array;d=[].concat(d);if(n){this.window[n]=0}for(s=0,l=d.length;s<l;s++){if(d[s]===""){continue}for(r=0,c=h.length;r<c;r++){o=d[s]+"";a=f?u[r]!==undefined?u[r]:"":u[0];d[s]=o.split(h[r]).join(a);if(n&&d[s]!==o){this.window[n]+=(o.length-d[s].length)/h[r].length}}}return p?d:d[0]},_verifyWrapper:function(){if(f("#gritter-notice-wrapper").length==0){f("body").append(this._tpl_wrap)}}}})(jQuery);(function(D,Y,q){(function(t){typeof define=="function"&&define.amd?define(["jquery"],t):jQuery&&!jQuery.fn.sparkline&&t(jQuery)})(function(L){"use strict";var o={},t,e,v,R,w,z,N,B,h,_,i,n,r,u,j,d,s,a,F,W,l,c,f,p,x,m,g,y,b,k,C,S,T=0;t=function(){return{common:{type:"line",lineColor:"#00f",fillColor:"#cdf",defaultPixelsPerValue:3,width:"auto",height:"auto",composite:!1,tagValuesAttribute:"values",tagOptionsPrefix:"spark",enableTagOptions:!1,enableHighlight:!0,highlightLighten:1.4,tooltipSkipNull:!0,tooltipPrefix:"",tooltipSuffix:"",disableHiddenCheck:!1,numberFormatter:!1,numberDigitGroupCount:3,numberDigitGroupSep:",",numberDecimalMark:".",disableTooltips:!1,disableInteraction:!1},line:{spotColor:"#f80",highlightSpotColor:"#5f5",highlightLineColor:"#f22",spotRadius:1.5,minSpotColor:"#f80",maxSpotColor:"#f80",lineWidth:1,normalRangeMin:q,normalRangeMax:q,normalRangeColor:"#ccc",drawNormalOnTop:!1,chartRangeMin:q,chartRangeMax:q,chartRangeMinX:q,chartRangeMaxX:q,tooltipFormat:new v('<span style="color: {{color}}">&#9679;</span> {{prefix}}{{y}}{{suffix}}')},bar:{barColor:"#3366cc",negBarColor:"#f44",stackedBarColor:["#3366cc","#dc3912","#ff9900","#109618","#66aa00","#dd4477","#0099c6","#990099"],zeroColor:q,nullColor:q,zeroAxis:!0,barWidth:4,barSpacing:1,chartRangeMax:q,chartRangeMin:q,chartRangeClip:!1,colorMap:q,tooltipFormat:new v('<span style="color: {{color}}">&#9679;</span> {{prefix}}{{value}}{{suffix}}')},tristate:{barWidth:4,barSpacing:1,posBarColor:"#6f6",negBarColor:"#f44",zeroBarColor:"#999",colorMap:{},tooltipFormat:new v('<span style="color: {{color}}">&#9679;</span> {{value:map}}'),tooltipValueLookups:{map:{"-1":"Loss",0:"Draw",1:"Win"}}},discrete:{lineHeight:"auto",thresholdColor:q,thresholdValue:0,chartRangeMax:q,chartRangeMin:q,chartRangeClip:!1,tooltipFormat:new v("{{prefix}}{{value}}{{suffix}}")},bullet:{targetColor:"#f33",targetWidth:3,performanceColor:"#33f",rangeColors:["#d3dafe","#a8b6ff","#7f94ff"],base:q,tooltipFormat:new v("{{fieldkey:fields}} - {{value}}"),tooltipValueLookups:{fields:{r:"Range",p:"Performance",t:"Target"}}},pie:{offset:0,sliceColors:["#3366cc","#dc3912","#ff9900","#109618","#66aa00","#dd4477","#0099c6","#990099"],borderWidth:0,borderColor:"#000",tooltipFormat:new v('<span style="color: {{color}}">&#9679;</span> {{value}} ({{percent.1}}%)')},box:{raw:!1,boxLineColor:"#000",boxFillColor:"#cdf",whiskerColor:"#000",outlierLineColor:"#333",outlierFillColor:"#fff",medianColor:"#f00",showOutliers:!0,outlierIQR:1.5,spotRadius:1.5,target:q,targetColor:"#4a2",chartRangeMax:q,chartRangeMin:q,tooltipFormat:new v("{{field:fields}}: {{value}}"),tooltipFormatFieldlistKey:"field",tooltipValueLookups:{fields:{lq:"Lower Quartile",med:"Median",uq:"Upper Quartile",lo:"Left Outlier",ro:"Right Outlier",lw:"Left Whisker",rw:"Right Whisker"}}}}},m='.jqstooltip { position: absolute;left: 0px;top: 0px;visibility: hidden;background: rgb(0, 0, 0) transparent;background-color: rgba(0,0,0,0.6);filter:progid:DXImageTransform.Microsoft.gradient(startColorstr=#99000000, endColorstr=#99000000);-ms-filter: "progid:DXImageTransform.Microsoft.gradient(startColorstr=#99000000, endColorstr=#99000000)";color: white;font: 10px arial, san serif;text-align: left;white-space: nowrap;padding: 5px;border: 1px solid white;z-index: 10000;}.jqsfield { color: white;font: 10px arial, san serif;text-align: left;}',e=function(){var t,e;return t=function(){this.init.apply(this,arguments)},arguments.length>1?(arguments[0]?(t.prototype=L.extend(new arguments[0],arguments[arguments.length-1]),t._super=arguments[0].prototype):t.prototype=arguments[arguments.length-1],arguments.length>2&&(e=Array.prototype.slice.call(arguments,1,-1),e.unshift(t.prototype),L.extend.apply(L,e))):t.prototype=arguments[0],t.prototype.cls=t,t},L.SPFormatClass=v=e({fre:/\{\{([\w.]+?)(:(.+?))?\}\}/g,precre:/(\w+)\.(\d+)/,init:function(t,e){this.format=t,this.fclass=e},render:function(t,e,i){var n=this,s=t,r,o,a,l,c;return this.format.replace(this.fre,function(){var t;return o=arguments[1],a=arguments[3],r=n.precre.exec(o),r?(c=r[2],o=r[1]):c=!1,l=s[o],l===q?"":a&&e&&e[a]?(t=e[a],t.get?e[a].get(l)||l:e[a][l]||l):(h(l)&&(i.get("numberFormatter")?l=i.get("numberFormatter")(l):l=u(l,c,i.get("numberDigitGroupCount"),i.get("numberDigitGroupSep"),i.get("numberDecimalMark"))),l)})}}),L.spformat=function(t,e){return new v(t,e)},R=function(t,e,i){return t<e?e:t>i?i:t},w=function(t,e){var i;return e===2?(i=Y.floor(t.length/2),t.length%2?t[i]:(t[i-1]+t[i])/2):t.length%2?(i=(t.length*e+e)/4,i%1?(t[Y.floor(i)]+t[Y.floor(i)-1])/2:t[i-1]):(i=(t.length*e+2)/4,i%1?(t[Y.floor(i)]+t[Y.floor(i)-1])/2:t[i-1])},z=function(t){var e;switch(t){case"undefined":t=q;break;case"null":t=null;break;case"true":t=!0;break;case"false":t=!1;break;default:e=parseFloat(t),t==e&&(t=e)}return t},N=function(t){var e,i=[];for(e=t.length;e--;)i[e]=z(t[e]);return i},B=function(t,e){var i,n,s=[];for(i=0,n=t.length;i<n;i++)t[i]!==e&&s.push(t[i]);return s},h=function(t){return!isNaN(parseFloat(t))&&isFinite(t)},u=function(t,e,i,n,s){var r,o;t=(e===!1?parseFloat(t).toString():t.toFixed(e)).split(""),r=(r=L.inArray(".",t))<0?t.length:r,r<t.length&&(t[r]=s);for(o=r-i;o>0;o-=i)t.splice(o,0,n);return t.join("")},_=function(t,e,i){var n;for(n=e.length;n--;){if(i&&e[n]===null)continue;if(e[n]!==t)return!1}return!0},i=function(t){var e=0,i;for(i=t.length;i--;)e+=typeof t[i]=="number"?t[i]:0;return e},r=function(t){return L.isArray(t)?t:[t]},n=function(t){var e;D.createStyleSheet?D.createStyleSheet().cssText=t:(e=D.createElement("style"),e.type="text/css",D.getElementsByTagName("head")[0].appendChild(e),e[typeof D.body.style.WebkitAppearance=="string"?"innerText":"innerHTML"]=t)},L.fn.simpledraw=function(t,e,i,n){var s,r;if(i&&(s=this.data("_jqs_vcanvas")))return s;if(L.fn.sparkline.canvas===!1)return!1;if(L.fn.sparkline.canvas===q){var o=D.createElement("canvas");if(!o.getContext||!o.getContext("2d")){if(!D.namespaces||!!D.namespaces.v)return L.fn.sparkline.canvas=!1,!1;D.namespaces.add("v","urn:schemas-microsoft-com:vml","#default#VML"),L.fn.sparkline.canvas=function(t,e,i,n){return new C(t,e,i)}}else L.fn.sparkline.canvas=function(t,e,i,n){return new k(t,e,i,n)}}return t===q&&(t=L(this).innerWidth()),e===q&&(e=L(this).innerHeight()),s=L.fn.sparkline.canvas(t,e,this,n),r=L(this).data("_jqs_mhandler"),r&&r.registerCanvas(s),s},L.fn.cleardraw=function(){var t=this.data("_jqs_vcanvas");t&&t.reset()},L.RangeMapClass=j=e({init:function(t){var e,i,n=[];for(e in t)t.hasOwnProperty(e)&&typeof e=="string"&&e.indexOf(":")>-1&&(i=e.split(":"),i[0]=i[0].length===0?-Infinity:parseFloat(i[0]),i[1]=i[1].length===0?Infinity:parseFloat(i[1]),i[2]=t[e],n.push(i));this.map=t,this.rangelist=n||!1},get:function(t){var e=this.rangelist,i,n,s;if((s=this.map[t])!==q)return s;if(e)for(i=e.length;i--;){n=e[i];if(n[0]<=t&&n[1]>=t)return n[2]}return q}}),L.range_map=function(t){return new j(t)},d=e({init:function(t,e){var i=L(t);this.$el=i,this.options=e,this.currentPageX=0,this.currentPageY=0,this.el=t,this.splist=[],this.tooltip=null,this.over=!1,this.displayTooltips=!e.get("disableTooltips"),this.highlightEnabled=!e.get("disableHighlight")},registerSparkline:function(t){this.splist.push(t),this.over&&this.updateDisplay()},registerCanvas:function(t){var e=L(t.canvas);this.canvas=t,this.$canvas=e,e.mouseenter(L.proxy(this.mouseenter,this)),e.mouseleave(L.proxy(this.mouseleave,this)),e.click(L.proxy(this.mouseclick,this))},reset:function(t){this.splist=[],this.tooltip&&t&&(this.tooltip.remove(),this.tooltip=q)},mouseclick:function(t){var e=L.Event("sparklineClick");e.originalEvent=t,e.sparklines=this.splist,this.$el.trigger(e)},mouseenter:function(t){L(D.body).unbind("mousemove.jqs"),L(D.body).bind("mousemove.jqs",L.proxy(this.mousemove,this)),this.over=!0,this.currentPageX=t.pageX,this.currentPageY=t.pageY,this.currentEl=t.target,!this.tooltip&&this.displayTooltips&&(this.tooltip=new s(this.options),this.tooltip.updatePosition(t.pageX,t.pageY)),this.updateDisplay()},mouseleave:function(){L(D.body).unbind("mousemove.jqs");var t=this.splist,e=t.length,i=!1,n,s;this.over=!1,this.currentEl=null,this.tooltip&&(this.tooltip.remove(),this.tooltip=null);for(s=0;s<e;s++)n=t[s],n.clearRegionHighlight()&&(i=!0);i&&this.canvas.render()},mousemove:function(t){this.currentPageX=t.pageX,this.currentPageY=t.pageY,this.currentEl=t.target,this.tooltip&&this.tooltip.updatePosition(t.pageX,t.pageY),this.updateDisplay()},updateDisplay:function(){var t=this.splist,e=t.length,i=!1,n=this.$canvas.offset(),s=this.currentPageX-n.left,r=this.currentPageY-n.top,o,a,l,c,h;if(!this.over)return;for(l=0;l<e;l++)a=t[l],c=a.setRegionHighlight(this.currentEl,s,r),c&&(i=!0);if(i){h=L.Event("sparklineRegionChange"),h.sparklines=this.splist,this.$el.trigger(h);if(this.tooltip){o="";for(l=0;l<e;l++)a=t[l],o+=a.getCurrentRegionTooltip();this.tooltip.setContent(o)}this.disableHighlight||this.canvas.render()}c===null&&this.mouseleave()}}),s=e({sizeStyle:"position: static !important;display: block !important;visibility: hidden !important;float: left !important;",init:function(t){var e=t.get("tooltipClassname","jqstooltip"),i=this.sizeStyle,n;this.container=t.get("tooltipContainer")||D.body,this.tooltipOffsetX=t.get("tooltipOffsetX",10),this.tooltipOffsetY=t.get("tooltipOffsetY",12),L("#jqssizetip").remove(),L("#jqstooltip").remove(),this.sizetip=L("<div/>",{id:"jqssizetip",style:i,class:e}),this.tooltip=L("<div/>",{id:"jqstooltip",class:e}).appendTo(this.container),n=this.tooltip.offset(),this.offsetLeft=n.left,this.offsetTop=n.top,this.hidden=!0,L(window).unbind("resize.jqs scroll.jqs"),L(window).bind("resize.jqs scroll.jqs",L.proxy(this.updateWindowDims,this)),this.updateWindowDims()},updateWindowDims:function(){this.scrollTop=L(window).scrollTop(),this.scrollLeft=L(window).scrollLeft(),this.scrollRight=this.scrollLeft+L(window).width(),this.updatePosition()},getSize:function(t){this.sizetip.html(t).appendTo(this.container),this.width=this.sizetip.width()+1,this.height=this.sizetip.height(),this.sizetip.remove()},setContent:function(t){if(!t){this.tooltip.css("visibility","hidden"),this.hidden=!0;return}this.getSize(t),this.tooltip.html(t).css({width:this.width,height:this.height,visibility:"visible"}),this.hidden&&(this.hidden=!1,this.updatePosition())},updatePosition:function(t,e){if(t===q){if(this.mousex===q)return;t=this.mousex-this.offsetLeft,e=this.mousey-this.offsetTop}else this.mousex=t-=this.offsetLeft,this.mousey=e-=this.offsetTop;if(!this.height||!this.width||this.hidden)return;e-=this.height+this.tooltipOffsetY,t+=this.tooltipOffsetX,e<this.scrollTop&&(e=this.scrollTop),t<this.scrollLeft?t=this.scrollLeft:t+this.width>this.scrollRight&&(t=this.scrollRight-this.width),this.tooltip.css({left:t,top:e})},remove:function(){this.tooltip.remove(),this.sizetip.remove(),this.sizetip=this.tooltip=q,L(window).unbind("resize.jqs scroll.jqs")}}),g=function(){n(m)},L(g),S=[],L.fn.sparkline=function(c,i){return this.each(function(){var a=new L.fn.sparkline.options(this,i),l=L(this),t,e;t=function(){var t,e,i,n,s,r,o;if(c==="html"||c===q){o=this.getAttribute(a.get("tagValuesAttribute"));if(o===q||o===null)o=l.html();t=o.replace(/(^\s*<!--)|(-->\s*$)|\s+/g,"").split(",")}else t=c;e=a.get("width")==="auto"?t.length*a.get("defaultPixelsPerValue"):a.get("width");if(a.get("height")==="auto"){if(!a.get("composite")||!L.data(this,"_jqs_vcanvas"))n=D.createElement("span"),n.innerHTML="a",l.html(n),i=L(n).innerHeight()||L(n).height(),L(n).remove(),n=null}else i=a.get("height");a.get("disableInteraction")?s=!1:(s=L.data(this,"_jqs_mhandler"),s?a.get("composite")||s.reset():(s=new d(this,a),L.data(this,"_jqs_mhandler",s)));if(a.get("composite")&&!L.data(this,"_jqs_vcanvas")){L.data(this,"_jqs_errnotify")||(alert("Attempted to attach a composite sparkline to an element with no existing sparkline"),L.data(this,"_jqs_errnotify",!0));return}r=new L.fn.sparkline[a.get("type")](this,t,a,e,i),r.render(),s&&s.registerSparkline(r)};if(L(this).html()&&!a.get("disableHiddenCheck")&&L(this).is(":hidden")||!L(this).parents("body").length){if(!a.get("composite")&&L.data(this,"_jqs_pending"))for(e=S.length;e;e--)S[e-1][0]==this&&S.splice(e-1,1);S.push([this,t]),L.data(this,"_jqs_pending",!0)}else t.call(this)})},L.fn.sparkline.defaults=t(),L.sparkline_display_visible=function(){var t,e,i,n=[];for(e=0,i=S.length;e<i;e++)t=S[e][0],L(t).is(":visible")&&!L(t).parents().is(":hidden")?(S[e][1].call(t),L.data(S[e][0],"_jqs_pending",!1),n.push(e)):!L(t).closest("html").length&&!L.data(t,"_jqs_pending")&&(L.data(S[e][0],"_jqs_pending",!1),n.push(e));for(e=n.length;e;e--)S.splice(n[e-1],1)},L.fn.sparkline.options=e({init:function(t,e){var i,n,s,r;this.userOptions=e=e||{},this.tag=t,this.tagValCache={},n=L.fn.sparkline.defaults,s=n.common,this.tagOptionsPrefix=e.enableTagOptions&&(e.tagOptionsPrefix||s.tagOptionsPrefix),r=this.getTagSetting("type"),r===o?i=n[e.type||s.type]:i=n[r],this.mergedOptions=L.extend({},s,i,e)},getTagSetting:function(t){var e=this.tagOptionsPrefix,i,n,s,r;if(e===!1||e===q)return o;if(this.tagValCache.hasOwnProperty(t))i=this.tagValCache.key;else{i=this.tag.getAttribute(e+t);if(i===q||i===null)i=o;else if(i.substr(0,1)==="["){i=i.substr(1,i.length-2).split(",");for(n=i.length;n--;)i[n]=z(i[n].replace(/(^\s*)|(\s*$)/g,""))}else if(i.substr(0,1)==="{"){s=i.substr(1,i.length-2).split(","),i={};for(n=s.length;n--;)r=s[n].split(":",2),i[r[0].replace(/(^\s*)|(\s*$)/g,"")]=z(r[1].replace(/(^\s*)|(\s*$)/g,""))}else i=z(i);this.tagValCache.key=i}return i},get:function(t,e){var i=this.getTagSetting(t),n;return i!==o?i:(n=this.mergedOptions[t])===q?e:n}}),L.fn.sparkline._base=e({disabled:!1,init:function(t,e,i,n,s){this.el=t,this.$el=L(t),this.values=e,this.options=i,this.width=n,this.height=s,this.currentRegion=q},initTarget:function(){var t=!this.options.get("disableInteraction");(this.target=this.$el.simpledraw(this.width,this.height,this.options.get("composite"),t))?(this.canvasWidth=this.target.pixelWidth,this.canvasHeight=this.target.pixelHeight):this.disabled=!0},render:function(){return this.disabled?(this.el.innerHTML="",!1):!0},getRegion:function(t,e){},setRegionHighlight:function(t,e,i){var n=this.currentRegion,s=!this.options.get("disableHighlight"),r;return e>this.canvasWidth||i>this.canvasHeight||e<0||i<0?null:(r=this.getRegion(t,e,i),n!==r?(n!==q&&s&&this.removeHighlight(),this.currentRegion=r,r!==q&&s&&this.renderHighlight(),!0):!1)},clearRegionHighlight:function(){return this.currentRegion!==q?(this.removeHighlight(),this.currentRegion=q,!0):!1},renderHighlight:function(){this.changeHighlight(!0)},removeHighlight:function(){this.changeHighlight(!1)},changeHighlight:function(t){},getCurrentRegionTooltip:function(){var t=this.options,e="",i=[],n,s,r,o,a,l,c,h,u,d,f,p,m,g;if(this.currentRegion===q)return"";n=this.getCurrentRegionFields(),f=t.get("tooltipFormatter");if(f)return f(this,t,n);t.get("tooltipChartTitle")&&(e+='<div class="jqs jqstitle">'+t.get("tooltipChartTitle")+"</div>\n"),s=this.options.get("tooltipFormat");if(!s)return"";L.isArray(s)||(s=[s]),L.isArray(n)||(n=[n]),c=this.options.get("tooltipFormatFieldlist"),h=this.options.get("tooltipFormatFieldlistKey");if(c&&h){u=[];for(l=n.length;l--;)d=n[l][h],(g=L.inArray(d,c))!=-1&&(u[g]=n[l]);n=u}r=s.length,m=n.length;for(l=0;l<r;l++){p=s[l],typeof p=="string"&&(p=new v(p)),o=p.fclass||"jqsfield";for(g=0;g<m;g++)if(!n[g].isNull||!t.get("tooltipSkipNull"))L.extend(n[g],{prefix:t.get("tooltipPrefix"),suffix:t.get("tooltipSuffix")}),a=p.render(n[g],t.get("tooltipValueLookups"),t),i.push('<div class="'+o+'">'+a+"</div>")}return i.length?e+i.join("\n"):""},getCurrentRegionFields:function(){},calcHighlightColor:function(t,e){var i=e.get("highlightColor"),n=e.get("highlightLighten"),s,r,o,a;if(i)return i;if(n){s=/^#([0-9a-f])([0-9a-f])([0-9a-f])$/i.exec(t)||/^#([0-9a-f]{2})([0-9a-f]{2})([0-9a-f]{2})$/i.exec(t);if(s){o=[],r=t.length===4?16:1;for(a=0;a<3;a++)o[a]=R(Y.round(parseInt(s[a+1],16)*r*n),0,255);return"rgb("+o.join(",")+")"}}return t}}),a={changeHighlight:function(t){var e=this.currentRegion,i=this.target,n=this.regionShapes[e],s;n&&(s=this.renderRegion(e,t),L.isArray(s)||L.isArray(n)?(i.replaceWithShapes(n,s),this.regionShapes[e]=L.map(s,function(t){return t.id})):(i.replaceWithShape(n,s),this.regionShapes[e]=s.id))},render:function(){var t=this.values,e=this.target,i=this.regionShapes,n,s,r,o;if(!this.cls._super.render.call(this))return;for(r=t.length;r--;){n=this.renderRegion(r);if(n)if(L.isArray(n)){s=[];for(o=n.length;o--;)n[o].append(),s.push(n[o].id);i[r]=s}else n.append(),i[r]=n.id;else i[r]=null}e.render()}},L.fn.sparkline.line=F=e(L.fn.sparkline._base,{type:"line",init:function(t,e,i,n,s){F._super.init.call(this,t,e,i,n,s),this.vertices=[],this.regionMap=[],this.xvalues=[],this.yvalues=[],this.yminmax=[],this.hightlightSpotId=null,this.lastShapeId=null,this.initTarget()},getRegion:function(t,e,i){var n,s=this.regionMap;for(n=s.length;n--;)if(s[n]!==null&&e>=s[n][0]&&e<=s[n][1])return s[n][2];return q},getCurrentRegionFields:function(){var t=this.currentRegion;return{isNull:this.yvalues[t]===null,x:this.xvalues[t],y:this.yvalues[t],color:this.options.get("lineColor"),fillColor:this.options.get("fillColor"),offset:t}},renderHighlight:function(){var t=this.currentRegion,e=this.target,i=this.vertices[t],n=this.options,s=n.get("spotRadius"),r=n.get("highlightSpotColor"),o=n.get("highlightLineColor"),a,l;if(!i)return;s&&r&&(a=e.drawCircle(i[0],i[1],s,q,r),this.highlightSpotId=a.id,e.insertAfterShape(this.lastShapeId,a)),o&&(l=e.drawLine(i[0],this.canvasTop,i[0],this.canvasTop+this.canvasHeight,o),this.highlightLineId=l.id,e.insertAfterShape(this.lastShapeId,l))},removeHighlight:function(){var t=this.target;this.highlightSpotId&&(t.removeShapeId(this.highlightSpotId),this.highlightSpotId=null),this.highlightLineId&&(t.removeShapeId(this.highlightLineId),this.highlightLineId=null)},scanValues:function(){var t=this.values,e=t.length,i=this.xvalues,n=this.yvalues,s=this.yminmax,r,o,a,l,c;for(r=0;r<e;r++)o=t[r],a=typeof t[r]=="string",l=typeof t[r]=="object"&&t[r]instanceof Array,c=a&&t[r].split(":"),a&&c.length===2?(i.push(Number(c[0])),n.push(Number(c[1])),s.push(Number(c[1]))):l?(i.push(o[0]),n.push(o[1]),s.push(o[1])):(i.push(r),t[r]===null||t[r]==="null"?n.push(null):(n.push(Number(o)),s.push(Number(o))));this.options.get("xvalues")&&(i=this.options.get("xvalues")),this.maxy=this.maxyorg=Y.max.apply(Y,s),this.miny=this.minyorg=Y.min.apply(Y,s),this.maxx=Y.max.apply(Y,i),this.minx=Y.min.apply(Y,i),this.xvalues=i,this.yvalues=n,this.yminmax=s},processRangeOptions:function(){var t=this.options,e=t.get("normalRangeMin"),i=t.get("normalRangeMax");e!==q&&(e<this.miny&&(this.miny=e),i>this.maxy&&(this.maxy=i)),t.get("chartRangeMin")!==q&&(t.get("chartRangeClip")||t.get("chartRangeMin")<this.miny)&&(this.miny=t.get("chartRangeMin")),t.get("chartRangeMax")!==q&&(t.get("chartRangeClip")||t.get("chartRangeMax")>this.maxy)&&(this.maxy=t.get("chartRangeMax")),t.get("chartRangeMinX")!==q&&(t.get("chartRangeClipX")||t.get("chartRangeMinX")<this.minx)&&(this.minx=t.get("chartRangeMinX")),t.get("chartRangeMaxX")!==q&&(t.get("chartRangeClipX")||t.get("chartRangeMaxX")>this.maxx)&&(this.maxx=t.get("chartRangeMaxX"))},drawNormalRange:function(t,e,i,n,s){var r=this.options.get("normalRangeMin"),o=this.options.get("normalRangeMax"),a=e+Y.round(i-i*((o-this.miny)/s)),l=Y.round(i*(o-r)/s);this.target.drawRect(t,a,n,l,q,this.options.get("normalRangeColor")).append()},render:function(){var t=this.options,e=this.target,i=this.canvasWidth,n=this.canvasHeight,s=this.vertices,r=t.get("spotRadius"),o=this.regionMap,a,l,c,h,u,d,f,p,m,g,v,y,b,w,x,_,k,C,S,T,D,M,P,I,E;if(!F._super.render.call(this))return;this.scanValues(),this.processRangeOptions(),P=this.xvalues,I=this.yvalues;if(!this.yminmax.length||this.yvalues.length<2)return;h=u=0,a=this.maxx-this.minx===0?1:this.maxx-this.minx,l=this.maxy-this.miny===0?1:this.maxy-this.miny,c=this.yvalues.length-1,r&&(i<r*4||n<r*4)&&(r=0);if(r){D=t.get("highlightSpotColor")&&!t.get("disableInteraction");if(D||t.get("minSpotColor")||t.get("spotColor")&&I[c]===this.miny)n-=Y.ceil(r);if(D||t.get("maxSpotColor")||t.get("spotColor")&&I[c]===this.maxy)n-=Y.ceil(r),h+=Y.ceil(r);if(D||(t.get("minSpotColor")||t.get("maxSpotColor"))&&(I[0]===this.miny||I[0]===this.maxy))u+=Y.ceil(r),i-=Y.ceil(r);if(D||t.get("spotColor")||t.get("minSpotColor")||t.get("maxSpotColor")&&(I[c]===this.miny||I[c]===this.maxy))i-=Y.ceil(r)}n--,t.get("normalRangeMin")!==q&&!t.get("drawNormalOnTop")&&this.drawNormalRange(u,h,n,i,l),f=[],p=[f],w=x=null,_=I.length;for(E=0;E<_;E++)m=P[E],v=P[E+1],g=I[E],y=u+Y.round((m-this.minx)*(i/a)),b=E<_-1?u+Y.round((v-this.minx)*(i/a)):i,x=y+(b-y)/2,o[E]=[w||0,x,E],w=x,g===null?E&&(I[E-1]!==null&&(f=[],p.push(f)),s.push(null)):(g<this.miny&&(g=this.miny),g>this.maxy&&(g=this.maxy),f.length||f.push([y,h+n]),d=[y,h+Y.round(n-n*((g-this.miny)/l))],f.push(d),s.push(d));k=[],C=[],S=p.length;for(E=0;E<S;E++)f=p[E],f.length&&(t.get("fillColor")&&(f.push([f[f.length-1][0],h+n]),C.push(f.slice(0)),f.pop()),f.length>2&&(f[0]=[f[0][0],f[1][1]]),k.push(f));S=C.length;for(E=0;E<S;E++)e.drawShape(C[E],t.get("fillColor"),t.get("fillColor")).append();t.get("normalRangeMin")!==q&&t.get("drawNormalOnTop")&&this.drawNormalRange(u,h,n,i,l),S=k.length;for(E=0;E<S;E++)e.drawShape(k[E],t.get("lineColor"),q,t.get("lineWidth")).append();if(r&&t.get("valueSpots")){T=t.get("valueSpots"),T.get===q&&(T=new j(T));for(E=0;E<_;E++)M=T.get(I[E]),M&&e.drawCircle(u+Y.round((P[E]-this.minx)*(i/a)),h+Y.round(n-n*((I[E]-this.miny)/l)),r,q,M).append()}r&&t.get("spotColor")&&I[c]!==null&&e.drawCircle(u+Y.round((P[P.length-1]-this.minx)*(i/a)),h+Y.round(n-n*((I[c]-this.miny)/l)),r,q,t.get("spotColor")).append(),this.maxy!==this.minyorg&&(r&&t.get("minSpotColor")&&(m=P[L.inArray(this.minyorg,I)],e.drawCircle(u+Y.round((m-this.minx)*(i/a)),h+Y.round(n-n*((this.minyorg-this.miny)/l)),r,q,t.get("minSpotColor")).append()),r&&t.get("maxSpotColor")&&(m=P[L.inArray(this.maxyorg,I)],e.drawCircle(u+Y.round((m-this.minx)*(i/a)),h+Y.round(n-n*((this.maxyorg-this.miny)/l)),r,q,t.get("maxSpotColor")).append())),this.lastShapeId=e.getLastShapeId(),this.canvasTop=h,e.render()}}),L.fn.sparkline.bar=W=e(L.fn.sparkline._base,a,{type:"bar",init:function(t,e,i,n,s){var r=parseInt(i.get("barWidth"),10),o=parseInt(i.get("barSpacing"),10),a=i.get("chartRangeMin"),l=i.get("chartRangeMax"),c=i.get("chartRangeClip"),h=Infinity,u=-Infinity,d,f,p,m,g,v,y,b,w,x,_,k,C,S,T,D,M,P,I,E,F,$,O;W._super.init.call(this,t,e,i,n,s);for(v=0,y=e.length;v<y;v++){E=e[v],d=typeof E=="string"&&E.indexOf(":")>-1;if(d||L.isArray(E))T=!0,d&&(E=e[v]=N(E.split(":"))),E=B(E,null),f=Y.min.apply(Y,E),p=Y.max.apply(Y,E),f<h&&(h=f),p>u&&(u=p)}this.stacked=T,this.regionShapes={},this.barWidth=r,this.barSpacing=o,this.totalBarWidth=r+o,this.width=n=e.length*r+(e.length-1)*o,this.initTarget(),c&&(C=a===q?-Infinity:a,S=l===q?Infinity:l),g=[],m=T?[]:g;var A=[],H=[];for(v=0,y=e.length;v<y;v++)if(T){D=e[v],e[v]=I=[],A[v]=0,m[v]=H[v]=0;for(M=0,P=D.length;M<P;M++)E=I[M]=c?R(D[M],C,S):D[M],E!==null&&(E>0&&(A[v]+=E),h<0&&u>0?E<0?H[v]+=Y.abs(E):m[v]+=E:m[v]+=Y.abs(E-(E<0?u:h)),g.push(E))}else E=c?R(e[v],C,S):e[v],E=e[v]=z(E),E!==null&&g.push(E);this.max=k=Y.max.apply(Y,g),this.min=_=Y.min.apply(Y,g),this.stackMax=u=T?Y.max.apply(Y,A):k,this.stackMin=h=T?Y.min.apply(Y,g):_,i.get("chartRangeMin")!==q&&(i.get("chartRangeClip")||i.get("chartRangeMin")<_)&&(_=i.get("chartRangeMin")),i.get("chartRangeMax")!==q&&(i.get("chartRangeClip")||i.get("chartRangeMax")>k)&&(k=i.get("chartRangeMax")),this.zeroAxis=w=i.get("zeroAxis",!0),_<=0&&k>=0&&w?x=0:w==0?x=_:_>0?x=_:x=k,this.xaxisOffset=x,b=T?Y.max.apply(Y,m)+Y.max.apply(Y,H):k-_,this.canvasHeightEf=w&&_<0?this.canvasHeight-2:this.canvasHeight-1,_<x?($=T&&k>=0?u:k,F=($-x)/b*this.canvasHeight,F!==Y.ceil(F)&&(this.canvasHeightEf-=2,F=Y.ceil(F))):F=this.canvasHeight,this.yoffset=F,L.isArray(i.get("colorMap"))?(this.colorMapByIndex=i.get("colorMap"),this.colorMapByValue=null):(this.colorMapByIndex=null,this.colorMapByValue=i.get("colorMap"),this.colorMapByValue&&this.colorMapByValue.get===q&&(this.colorMapByValue=new j(this.colorMapByValue))),this.range=b},getRegion:function(t,e,i){var n=Y.floor(e/this.totalBarWidth);return n<0||n>=this.values.length?q:n},getCurrentRegionFields:function(){var t=this.currentRegion,e=r(this.values[t]),i=[],n,s;for(s=e.length;s--;)n=e[s],i.push({isNull:n===null,value:n,color:this.calcColor(s,n,t),offset:t});return i},calcColor:function(t,e,i){var n=this.colorMapByIndex,s=this.colorMapByValue,r=this.options,o,a;return this.stacked?o=r.get("stackedBarColor"):o=e<0?r.get("negBarColor"):r.get("barColor"),e===0&&r.get("zeroColor")!==q&&(o=r.get("zeroColor")),s&&(a=s.get(e))?o=a:n&&n.length>i&&(o=n[i]),L.isArray(o)?o[t%o.length]:o},renderRegion:function(t,e){var i=this.values[t],n=this.options,s=this.xaxisOffset,r=[],o=this.range,a=this.stacked,l=this.target,c=t*this.totalBarWidth,h=this.canvasHeightEf,u=this.yoffset,d,f,p,m,g,v,y,b,w,x;i=L.isArray(i)?i:[i],y=i.length,b=i[0],m=_(null,i),x=_(s,i,!0);if(m)return n.get("nullColor")?(p=e?n.get("nullColor"):this.calcHighlightColor(n.get("nullColor"),n),d=u>0?u-1:u,l.drawRect(c,d,this.barWidth-1,0,p,p)):q;g=u;for(v=0;v<y;v++){b=i[v];if(a&&b===s){if(!x||w)continue;w=!0}o>0?f=Y.floor(h*(Y.abs(b-s)/o))+1:f=1,b<s||b===s&&u===0?(d=g,g+=f):(d=u-f,u-=f),p=this.calcColor(v,b,t),e&&(p=this.calcHighlightColor(p,n)),r.push(l.drawRect(c,d,this.barWidth-1,f-1,p,p))}return r.length===1?r[0]:r}}),L.fn.sparkline.tristate=l=e(L.fn.sparkline._base,a,{type:"tristate",init:function(t,e,i,n,s){var r=parseInt(i.get("barWidth"),10),o=parseInt(i.get("barSpacing"),10);l._super.init.call(this,t,e,i,n,s),this.regionShapes={},this.barWidth=r,this.barSpacing=o,this.totalBarWidth=r+o,this.values=L.map(e,Number),this.width=n=e.length*r+(e.length-1)*o,L.isArray(i.get("colorMap"))?(this.colorMapByIndex=i.get("colorMap"),this.colorMapByValue=null):(this.colorMapByIndex=null,this.colorMapByValue=i.get("colorMap"),this.colorMapByValue&&this.colorMapByValue.get===q&&(this.colorMapByValue=new j(this.colorMapByValue))),this.initTarget()},getRegion:function(t,e,i){return Y.floor(e/this.totalBarWidth)},getCurrentRegionFields:function(){var t=this.currentRegion;return{isNull:this.values[t]===q,value:this.values[t],color:this.calcColor(this.values[t],t),offset:t}},calcColor:function(t,e){var i=this.values,n=this.options,s=this.colorMapByIndex,r=this.colorMapByValue,o,a;return r&&(a=r.get(t))?o=a:s&&s.length>e?o=s[e]:i[e]<0?o=n.get("negBarColor"):i[e]>0?o=n.get("posBarColor"):o=n.get("zeroBarColor"),o},renderRegion:function(t,e){var i=this.values,n=this.options,s=this.target,r,o,a,l,c,h;r=s.pixelHeight,a=Y.round(r/2),l=t*this.totalBarWidth,i[t]<0?(c=a,o=a-1):i[t]>0?(c=0,o=a-1):(c=a-1,o=2),h=this.calcColor(i[t],t);if(h===null)return;return e&&(h=this.calcHighlightColor(h,n)),s.drawRect(l,c,this.barWidth-1,o-1,h,h)}}),L.fn.sparkline.discrete=c=e(L.fn.sparkline._base,a,{type:"discrete",init:function(t,e,i,n,s){c._super.init.call(this,t,e,i,n,s),this.regionShapes={},this.values=e=L.map(e,Number),this.min=Y.min.apply(Y,e),this.max=Y.max.apply(Y,e),this.range=this.max-this.min,this.width=n=i.get("width")==="auto"?e.length*2:this.width,this.interval=Y.floor(n/e.length),this.itemWidth=n/e.length,i.get("chartRangeMin")!==q&&(i.get("chartRangeClip")||i.get("chartRangeMin")<this.min)&&(this.min=i.get("chartRangeMin")),i.get("chartRangeMax")!==q&&(i.get("chartRangeClip")||i.get("chartRangeMax")>this.max)&&(this.max=i.get("chartRangeMax")),this.initTarget(),this.target&&(this.lineHeight=i.get("lineHeight")==="auto"?Y.round(this.canvasHeight*.3):i.get("lineHeight"))},getRegion:function(t,e,i){return Y.floor(e/this.itemWidth)},getCurrentRegionFields:function(){var t=this.currentRegion;return{isNull:this.values[t]===q,value:this.values[t],offset:t}},renderRegion:function(t,e){var i=this.values,n=this.options,s=this.min,r=this.max,o=this.range,a=this.interval,l=this.target,c=this.canvasHeight,h=this.lineHeight,u=c-h,d,f,p,m;return f=R(i[t],s,r),m=t*a,d=Y.round(u-u*((f-s)/o)),p=n.get("thresholdColor")&&f<n.get("thresholdValue")?n.get("thresholdColor"):n.get("lineColor"),e&&(p=this.calcHighlightColor(p,n)),l.drawLine(m,d,m,d+h,p)}}),L.fn.sparkline.bullet=f=e(L.fn.sparkline._base,{type:"bullet",init:function(t,e,i,n,s){var r,o,a;f._super.init.call(this,t,e,i,n,s),this.values=e=N(e),a=e.slice(),a[0]=a[0]===null?a[2]:a[0],a[1]=e[1]===null?a[2]:a[1],r=Y.min.apply(Y,e),o=Y.max.apply(Y,e),i.get("base")===q?r=r<0?r:0:r=i.get("base"),this.min=r,this.max=o,this.range=o-r,this.shapes={},this.valueShapes={},this.regiondata={},this.width=n=i.get("width")==="auto"?"4.0em":n,this.target=this.$el.simpledraw(n,s,i.get("composite")),e.length||(this.disabled=!0),this.initTarget()},getRegion:function(t,e,i){var n=this.target.getShapeAt(t,e,i);return n!==q&&this.shapes[n]!==q?this.shapes[n]:q},getCurrentRegionFields:function(){var t=this.currentRegion;return{fieldkey:t.substr(0,1),value:this.values[t.substr(1)],region:t}},changeHighlight:function(t){var e=this.currentRegion,i=this.valueShapes[e],n;delete this.shapes[i];switch(e.substr(0,1)){case"r":n=this.renderRange(e.substr(1),t);break;case"p":n=this.renderPerformance(t);break;case"t":n=this.renderTarget(t)}this.valueShapes[e]=n.id,this.shapes[n.id]=e,this.target.replaceWithShape(i,n)},renderRange:function(t,e){var i=this.values[t],n=Y.round(this.canvasWidth*((i-this.min)/this.range)),s=this.options.get("rangeColors")[t-2];return e&&(s=this.calcHighlightColor(s,this.options)),this.target.drawRect(0,0,n-1,this.canvasHeight-1,s,s)},renderPerformance:function(t){var e=this.values[1],i=Y.round(this.canvasWidth*((e-this.min)/this.range)),n=this.options.get("performanceColor");return t&&(n=this.calcHighlightColor(n,this.options)),this.target.drawRect(0,Y.round(this.canvasHeight*.3),i-1,Y.round(this.canvasHeight*.4)-1,n,n)},renderTarget:function(t){var e=this.values[0],i=Y.round(this.canvasWidth*((e-this.min)/this.range)-this.options.get("targetWidth")/2),n=Y.round(this.canvasHeight*.1),s=this.canvasHeight-n*2,r=this.options.get("targetColor");return t&&(r=this.calcHighlightColor(r,this.options)),this.target.drawRect(i,n,this.options.get("targetWidth")-1,s-1,r,r)},render:function(){var t=this.values.length,e=this.target,i,n;if(!f._super.render.call(this))return;for(i=2;i<t;i++)n=this.renderRange(i).append(),this.shapes[n.id]="r"+i,this.valueShapes["r"+i]=n.id;this.values[1]!==null&&(n=this.renderPerformance().append(),this.shapes[n.id]="p1",this.valueShapes.p1=n.id),this.values[0]!==null&&(n=this.renderTarget().append(),this.shapes[n.id]="t0",this.valueShapes.t0=n.id),e.render()}}),L.fn.sparkline.pie=p=e(L.fn.sparkline._base,{type:"pie",init:function(t,e,i,n,s){var r=0,o;p._super.init.call(this,t,e,i,n,s),this.shapes={},this.valueShapes={},this.values=e=L.map(e,Number),i.get("width")==="auto"&&(this.width=this.height);if(e.length>0)for(o=e.length;o--;)r+=e[o];this.total=r,this.initTarget(),this.radius=Y.floor(Y.min(this.canvasWidth,this.canvasHeight)/2)},getRegion:function(t,e,i){var n=this.target.getShapeAt(t,e,i);return n!==q&&this.shapes[n]!==q?this.shapes[n]:q},getCurrentRegionFields:function(){var t=this.currentRegion;return{isNull:this.values[t]===q,value:this.values[t],percent:this.values[t]/this.total*100,color:this.options.get("sliceColors")[t%this.options.get("sliceColors").length],offset:t}},changeHighlight:function(t){var e=this.currentRegion,i=this.renderSlice(e,t),n=this.valueShapes[e];delete this.shapes[n],this.target.replaceWithShape(n,i),this.valueShapes[e]=i.id,this.shapes[i.id]=e},renderSlice:function(t,e){var i=this.target,n=this.options,s=this.radius,r=n.get("borderWidth"),o=n.get("offset"),a=2*Y.PI,l=this.values,c=this.total,h=o?2*Y.PI*(o/360):0,u,d,f,p,m;p=l.length;for(f=0;f<p;f++){u=h,d=h,c>0&&(d=h+a*(l[f]/c));if(t===f)return m=n.get("sliceColors")[f%n.get("sliceColors").length],e&&(m=this.calcHighlightColor(m,n)),i.drawPieSlice(s,s,s-r,u,d,q,m);h=d}},render:function(){var t=this.target,e=this.values,i=this.options,n=this.radius,s=i.get("borderWidth"),r,o;if(!p._super.render.call(this))return;s&&t.drawCircle(n,n,Y.floor(n-s/2),i.get("borderColor"),q,s).append();for(o=e.length;o--;)e[o]&&(r=this.renderSlice(o).append(),this.valueShapes[o]=r.id,this.shapes[r.id]=o);t.render()}}),L.fn.sparkline.box=x=e(L.fn.sparkline._base,{type:"box",init:function(t,e,i,n,s){x._super.init.call(this,t,e,i,n,s),this.values=L.map(e,Number),this.width=i.get("width")==="auto"?"4.0em":n,this.initTarget(),this.values.length||(this.disabled=1)},getRegion:function(){return 1},getCurrentRegionFields:function(){var t=[{field:"lq",value:this.quartiles[0]},{field:"med",value:this.quartiles[1]},{field:"uq",value:this.quartiles[2]}];return this.loutlier!==q&&t.push({field:"lo",value:this.loutlier}),this.routlier!==q&&t.push({field:"ro",value:this.routlier}),this.lwhisker!==q&&t.push({field:"lw",value:this.lwhisker}),this.rwhisker!==q&&t.push({field:"rw",value:this.rwhisker}),t},render:function(){var t=this.target,e=this.values,i=e.length,n=this.options,s=this.canvasWidth,r=this.canvasHeight,o=n.get("chartRangeMin")===q?Y.min.apply(Y,e):n.get("chartRangeMin"),a=n.get("chartRangeMax")===q?Y.max.apply(Y,e):n.get("chartRangeMax"),l=0,c,h,u,d,f,p,m,g,v,y,b;if(!x._super.render.call(this))return;if(n.get("raw"))n.get("showOutliers")&&e.length>5?(h=e[0],c=e[1],d=e[2],f=e[3],p=e[4],m=e[5],g=e[6]):(c=e[0],d=e[1],f=e[2],p=e[3],m=e[4]);else{e.sort(function(t,e){return t-e}),d=w(e,1),f=w(e,2),p=w(e,3),u=p-d;if(n.get("showOutliers")){c=m=q;for(v=0;v<i;v++)c===q&&e[v]>d-u*n.get("outlierIQR")&&(c=e[v]),e[v]<p+u*n.get("outlierIQR")&&(m=e[v]);h=e[0],g=e[i-1]}else c=e[0],m=e[i-1]}this.quartiles=[d,f,p],this.lwhisker=c,this.rwhisker=m,this.loutlier=h,this.routlier=g,b=s/(a-o+1),n.get("showOutliers")&&(l=Y.ceil(n.get("spotRadius")),s-=2*Y.ceil(n.get("spotRadius")),b=s/(a-o+1),h<c&&t.drawCircle((h-o)*b+l,r/2,n.get("spotRadius"),n.get("outlierLineColor"),n.get("outlierFillColor")).append(),g>m&&t.drawCircle((g-o)*b+l,r/2,n.get("spotRadius"),n.get("outlierLineColor"),n.get("outlierFillColor")).append()),t.drawRect(Y.round((d-o)*b+l),Y.round(r*.1),Y.round((p-d)*b),Y.round(r*.8),n.get("boxLineColor"),n.get("boxFillColor")).append(),t.drawLine(Y.round((c-o)*b+l),Y.round(r/2),Y.round((d-o)*b+l),Y.round(r/2),n.get("lineColor")).append(),t.drawLine(Y.round((c-o)*b+l),Y.round(r/4),Y.round((c-o)*b+l),Y.round(r-r/4),n.get("whiskerColor")).append(),t.drawLine(Y.round((m-o)*b+l),Y.round(r/2),Y.round((p-o)*b+l),Y.round(r/2),n.get("lineColor")).append(),t.drawLine(Y.round((m-o)*b+l),Y.round(r/4),Y.round((m-o)*b+l),Y.round(r-r/4),n.get("whiskerColor")).append(),t.drawLine(Y.round((f-o)*b+l),Y.round(r*.1),Y.round((f-o)*b+l),Y.round(r*.9),n.get("medianColor")).append(),n.get("target")&&(y=Y.ceil(n.get("spotRadius")),t.drawLine(Y.round((n.get("target")-o)*b+l),Y.round(r/2-y),Y.round((n.get("target")-o)*b+l),Y.round(r/2+y),n.get("targetColor")).append(),t.drawLine(Y.round((n.get("target")-o)*b+l-y),Y.round(r/2),Y.round((n.get("target")-o)*b+l+y),Y.round(r/2),n.get("targetColor")).append()),t.render()}}),y=e({init:function(t,e,i,n){this.target=t,this.id=e,this.type=i,this.args=n},append:function(){return this.target.appendShape(this),this}}),b=e({_pxregex:/(\d+)(px)?\s*$/i,init:function(t,e,i){if(!t)return;this.width=t,this.height=e,this.target=i,this.lastShapeId=null,i[0]&&(i=i[0]),L.data(i,"_jqs_vcanvas",this)},drawLine:function(t,e,i,n,s,r){return this.drawShape([[t,e],[i,n]],s,r)},drawShape:function(t,e,i,n){return this._genShape("Shape",[t,e,i,n])},drawCircle:function(t,e,i,n,s,r){return this._genShape("Circle",[t,e,i,n,s,r])},drawPieSlice:function(t,e,i,n,s,r,o){return this._genShape("PieSlice",[t,e,i,n,s,r,o])},drawRect:function(t,e,i,n,s,r){return this._genShape("Rect",[t,e,i,n,s,r])},getElement:function(){return this.canvas},getLastShapeId:function(){return this.lastShapeId},reset:function(){alert("reset not implemented")},_insert:function(t,e){L(e).html(t)},_calculatePixelDims:function(t,e,i){var n;n=this._pxregex.exec(e),n?this.pixelHeight=n[1]:this.pixelHeight=L(i).height(),n=this._pxregex.exec(t),n?this.pixelWidth=n[1]:this.pixelWidth=L(i).width()},_genShape:function(t,e){var i=T++;return e.unshift(i),new y(this,i,t,e)},appendShape:function(t){alert("appendShape not implemented")},replaceWithShape:function(t,e){alert("replaceWithShape not implemented")},insertAfterShape:function(t,e){alert("insertAfterShape not implemented")},removeShapeId:function(t){alert("removeShapeId not implemented")},getShapeAt:function(t,e,i){alert("getShapeAt not implemented")},render:function(){alert("render not implemented")}}),k=e(b,{init:function(t,e,i,n){k._super.init.call(this,t,e,i),this.canvas=D.createElement("canvas"),i[0]&&(i=i[0]),L.data(i,"_jqs_vcanvas",this),L(this.canvas).css({display:"inline-block",width:t,height:e,verticalAlign:"top"}),this._insert(this.canvas,i),this._calculatePixelDims(t,e,this.canvas),this.canvas.width=this.pixelWidth,this.canvas.height=this.pixelHeight,this.interact=n,this.shapes={},this.shapeseq=[],this.currentTargetShapeId=q,L(this.canvas).css({width:this.pixelWidth,height:this.pixelHeight})},_getContext:function(t,e,i){var n=this.canvas.getContext("2d");return t!==q&&(n.strokeStyle=t),n.lineWidth=i===q?1:i,e!==q&&(n.fillStyle=e),n},reset:function(){var t=this._getContext();t.clearRect(0,0,this.pixelWidth,this.pixelHeight),this.shapes={},this.shapeseq=[],this.currentTargetShapeId=q},_drawShape:function(t,e,i,n,s){var r=this._getContext(i,n,s),o,a;r.beginPath(),r.moveTo(e[0][0]+.5,e[0][1]+.5);for(o=1,a=e.length;o<a;o++)r.lineTo(e[o][0]+.5,e[o][1]+.5);i!==q&&r.stroke(),n!==q&&r.fill(),this.targetX!==q&&this.targetY!==q&&r.isPointInPath(this.targetX,this.targetY)&&(this.currentTargetShapeId=t)},_drawCircle:function(t,e,i,n,s,r,o){var a=this._getContext(s,r,o);a.beginPath(),a.arc(e,i,n,0,2*Y.PI,!1),this.targetX!==q&&this.targetY!==q&&a.isPointInPath(this.targetX,this.targetY)&&(this.currentTargetShapeId=t),s!==q&&a.stroke(),r!==q&&a.fill()},_drawPieSlice:function(t,e,i,n,s,r,o,a){var l=this._getContext(o,a);l.beginPath(),l.moveTo(e,i),l.arc(e,i,n,s,r,!1),l.lineTo(e,i),l.closePath(),o!==q&&l.stroke(),a&&l.fill(),this.targetX!==q&&this.targetY!==q&&l.isPointInPath(this.targetX,this.targetY)&&(this.currentTargetShapeId=t)},_drawRect:function(t,e,i,n,s,r,o){return this._drawShape(t,[[e,i],[e+n,i],[e+n,i+s],[e,i+s],[e,i]],r,o)},appendShape:function(t){return this.shapes[t.id]=t,this.shapeseq.push(t.id),this.lastShapeId=t.id,t.id},replaceWithShape:function(t,e){var i=this.shapeseq,n;this.shapes[e.id]=e;for(n=i.length;n--;)i[n]==t&&(i[n]=e.id);delete this.shapes[t]},replaceWithShapes:function(t,e){var i=this.shapeseq,n={},s,r,o;for(r=t.length;r--;)n[t[r]]=!0;for(r=i.length;r--;)s=i[r],n[s]&&(i.splice(r,1),delete this.shapes[s],o=r);for(r=e.length;r--;)i.splice(o,0,e[r].id),this.shapes[e[r].id]=e[r]},insertAfterShape:function(t,e){var i=this.shapeseq,n;for(n=i.length;n--;)if(i[n]===t){i.splice(n+1,0,e.id),this.shapes[e.id]=e;return}},removeShapeId:function(t){var e=this.shapeseq,i;for(i=e.length;i--;)if(e[i]===t){e.splice(i,1);break}delete this.shapes[t]},getShapeAt:function(t,e,i){return this.targetX=e,this.targetY=i,this.render(),this.currentTargetShapeId},render:function(){var t=this.shapeseq,e=this.shapes,i=t.length,n=this._getContext(),s,r,o;n.clearRect(0,0,this.pixelWidth,this.pixelHeight);for(o=0;o<i;o++)s=t[o],r=e[s],this["_draw"+r.type].apply(this,r.args);this.interact||(this.shapes={},this.shapeseq=[])}}),C=e(b,{init:function(t,e,i){var n;C._super.init.call(this,t,e,i),i[0]&&(i=i[0]),L.data(i,"_jqs_vcanvas",this),this.canvas=D.createElement("span"),L(this.canvas).css({display:"inline-block",position:"relative",overflow:"hidden",width:t,height:e,margin:"0px",padding:"0px",verticalAlign:"top"}),this._insert(this.canvas,i),this._calculatePixelDims(t,e,this.canvas),this.canvas.width=this.pixelWidth,this.canvas.height=this.pixelHeight,n='<v:group coordorigin="0 0" coordsize="'+this.pixelWidth+" "+this.pixelHeight+'"'+' style="position:absolute;top:0;left:0;width:'+this.pixelWidth+"px;height="+this.pixelHeight+'px;"></v:group>',this.canvas.insertAdjacentHTML("beforeEnd",n),this.group=L(this.canvas).children()[0],this.rendered=!1,this.prerender=""},_drawShape:function(t,e,i,n,s){var r=[],o,a,l,c,h,u,d;for(d=0,u=e.length;d<u;d++)r[d]=""+e[d][0]+","+e[d][1];return o=r.splice(0,1),s=s===q?1:s,a=i===q?' stroked="false" ':' strokeWeight="'+s+'px" strokeColor="'+i+'" ',l=n===q?' filled="false"':' fillColor="'+n+'" filled="true" ',c=r[0]===r[r.length-1]?"x ":"",h='<v:shape coordorigin="0 0" coordsize="'+this.pixelWidth+" "+this.pixelHeight+'" '+' id="jqsshape'+t+'" '+a+l+' style="position:absolute;left:0px;top:0px;height:'+this.pixelHeight+"px;width:"+this.pixelWidth+'px;padding:0px;margin:0px;" '+' path="m '+o+" l "+r.join(", ")+" "+c+'e">'+" </v:shape>",h},_drawCircle:function(t,e,i,n,s,r,o){var a,l,c;return e-=n,i-=n,a=s===q?' stroked="false" ':' strokeWeight="'+o+'px" strokeColor="'+s+'" ',l=r===q?' filled="false"':' fillColor="'+r+'" filled="true" ',c='<v:oval  id="jqsshape'+t+'" '+a+l+' style="position:absolute;top:'+i+"px; left:"+e+"px; width:"+n*2+"px; height:"+n*2+'px"></v:oval>',c},_drawPieSlice:function(t,e,i,n,s,r,o,a){var l,c,h,u,d,f,p,m;if(s===r)return"";r-s===2*Y.PI&&(s=0,r=2*Y.PI),c=e+Y.round(Y.cos(s)*n),h=i+Y.round(Y.sin(s)*n),u=e+Y.round(Y.cos(r)*n),d=i+Y.round(Y.sin(r)*n);if(c===u&&h===d){if(r-s<Y.PI)return"";c=u=e+n,h=d=i}return c===u&&h===d&&r-s<Y.PI?"":(l=[e-n,i-n,e+n,i+n,c,h,u,d],f=o===q?' stroked="false" ':' strokeWeight="1px" strokeColor="'+o+'" ',p=a===q?' filled="false"':' fillColor="'+a+'" filled="true" ',m='<v:shape coordorigin="0 0" coordsize="'+this.pixelWidth+" "+this.pixelHeight+'" '+' id="jqsshape'+t+'" '+f+p+' style="position:absolute;left:0px;top:0px;height:'+this.pixelHeight+"px;width:"+this.pixelWidth+'px;padding:0px;margin:0px;" '+' path="m '+e+","+i+" wa "+l.join(", ")+' x e">'+" </v:shape>",m)},_drawRect:function(t,e,i,n,s,r,o){return this._drawShape(t,[[e,i],[e,i+s],[e+n,i+s],[e+n,i],[e,i]],r,o)},reset:function(){this.group.innerHTML=""},appendShape:function(t){var e=this["_draw"+t.type].apply(this,t.args);return this.rendered?this.group.insertAdjacentHTML("beforeEnd",e):this.prerender+=e,this.lastShapeId=t.id,t.id},replaceWithShape:function(t,e){var i=L("#jqsshape"+t),n=this["_draw"+e.type].apply(this,e.args);i[0].outerHTML=n},replaceWithShapes:function(t,e){var i=L("#jqsshape"+t[0]),n="",s=e.length,r;for(r=0;r<s;r++)n+=this["_draw"+e[r].type].apply(this,e[r].args);i[0].outerHTML=n;for(r=1;r<t.length;r++)L("#jqsshape"+t[r]).remove()},insertAfterShape:function(t,e){var i=L("#jqsshape"+t),n=this["_draw"+e.type].apply(this,e.args);i[0].insertAdjacentHTML("afterEnd",n)},removeShapeId:function(t){var e=L("#jqsshape"+t);this.group.removeChild(e[0])},getShapeAt:function(t,e,i){var n=t.id.substr(8);return n},render:function(){this.rendered||(this.group.innerHTML=this.prerender,this.rendered=!0)}})})})(document,Math);(function(t){t(["jquery"],function($){return function(){var T;var e;var D=0;var n={error:"error",info:"info",success:"success",warning:"warning"};var t={clear:l,remove:c,error:i,getContainer:P,info:s,options:{},subscribe:r,success:o,version:"2.1.2",warning:a};var M;return t;function i(t,e,i){return p({type:n.error,iconClass:E().iconClasses.error,message:t,optionsOverride:i,title:e})}function P(t,e){if(!t){t=E()}T=$("#"+t.containerId);if(T.length){return T}if(e){T=d(t)}return T}function s(t,e,i){return p({type:n.info,iconClass:E().iconClasses.info,message:t,optionsOverride:i,title:e})}function r(t){e=t}function o(t,e,i){return p({type:n.success,iconClass:E().iconClasses.success,message:t,optionsOverride:i,title:e})}function a(t,e,i){return p({type:n.warning,iconClass:E().iconClasses.warning,message:t,optionsOverride:i,title:e})}function l(t,e){var i=E();if(!T){P(i)}if(!u(t,i,e)){h(i)}}function c(t){var e=E();if(!T){P(e)}if(t&&$(":focus",t).length===0){F(t);return}if(T.children().length){T.remove()}}function h(t){var e=T.children();for(var i=e.length-1;i>=0;i--){u($(e[i]),t)}}function u(t,e,i){var n=i&&i.force?i.force:false;if(t&&(n||$(":focus",t).length===0)){t[e.hideMethod]({duration:e.hideDuration,easing:e.hideEasing,complete:function(){F(t)}});return true}return false}function d(t){T=$("<div/>").attr("id",t.containerId).addClass(t.positionClass).attr("aria-live","polite").attr("role","alert");T.appendTo($(t.target));return T}function f(){return{tapToDismiss:true,toastClass:"toast",containerId:"toast-container",debug:false,showMethod:"fadeIn",showDuration:300,showEasing:"swing",onShown:undefined,hideMethod:"fadeOut",hideDuration:1e3,hideEasing:"swing",onHidden:undefined,closeMethod:false,closeDuration:false,closeEasing:false,extendedTimeOut:1e3,iconClasses:{error:"toast-error",info:"toast-info",success:"toast-success",warning:"toast-warning"},iconClass:"toast-info",positionClass:"toast-top-right",timeOut:5e3,titleClass:"toast-title",messageClass:"toast-message",escapeHtml:false,target:"body",closeHtml:'<button type="button">&times;</button>',newestOnTop:true,preventDuplicates:false,progressBar:false}}function I(t){if(!e){return}e(t)}function p(t){var s=E();var e=t.iconClass||s.iconClass;if(typeof t.optionsOverride!=="undefined"){s=$.extend(s,t.optionsOverride);e=t.optionsOverride.iconClass||e}if(x(s,t)){return}D++;T=P(s,true);var i=null;var r=$("<div/>");var n=$("<div/>");var o=$("<div/>");var a=$("<div/>");var l=$(s.closeHtml);var c={intervalId:null,hideEta:null,maxHideTime:null};var h={toastId:D,state:"visible",startTime:new Date,options:s,map:t};d();p();f();I(h);if(s.debug&&console){console.log(h)}return r;function u(t){if(t==null)t="";return new String(t).replace(/&/g,"&amp;").replace(/"/g,"&quot;").replace(/'/g,"&#39;").replace(/</g,"&lt;").replace(/>/g,"&gt;")}function d(){m();v();y();b();w();g()}function f(){r.hover(C,k);if(!s.onclick&&s.tapToDismiss){r.click(_)}if(s.closeButton&&l){l.click(function(t){if(t.stopPropagation){t.stopPropagation()}else if(t.cancelBubble!==undefined&&t.cancelBubble!==true){t.cancelBubble=true}_(true)})}if(s.onclick){r.click(function(t){s.onclick(t);_()})}}function p(){r.hide();r[s.showMethod]({duration:s.showDuration,easing:s.showEasing,complete:s.onShown});if(s.timeOut>0){i=setTimeout(_,s.timeOut);c.maxHideTime=parseFloat(s.timeOut);c.hideEta=(new Date).getTime()+c.maxHideTime;if(s.progressBar){c.intervalId=setInterval(S,10)}}}function m(){if(t.iconClass){r.addClass(s.toastClass).addClass(e)}}function g(){if(s.newestOnTop){T.prepend(r)}else{T.append(r)}}function v(){if(t.title){n.append(!s.escapeHtml?t.title:u(t.title)).addClass(s.titleClass);r.append(n)}}function y(){if(t.message){o.append(!s.escapeHtml?t.message:u(t.message)).addClass(s.messageClass);r.append(o)}}function b(){if(s.closeButton){l.addClass("toast-close-button").attr("role","button");r.prepend(l)}}function w(){if(s.progressBar){a.addClass("toast-progress");r.prepend(a)}}function x(t,e){if(t.preventDuplicates){if(e.message===M){return true}else{M=e.message}}return false}function _(t){var e=t&&s.closeMethod!==false?s.closeMethod:s.hideMethod;var i=t&&s.closeDuration!==false?s.closeDuration:s.hideDuration;var n=t&&s.closeEasing!==false?s.closeEasing:s.hideEasing;if($(":focus",r).length&&!t){return}clearTimeout(c.intervalId);return r[e]({duration:i,easing:n,complete:function(){F(r);if(s.onHidden&&h.state!=="hidden"){s.onHidden()}h.state="hidden";h.endTime=new Date;I(h)}})}function k(){if(s.timeOut>0||s.extendedTimeOut>0){i=setTimeout(_,s.extendedTimeOut);c.maxHideTime=parseFloat(s.extendedTimeOut);c.hideEta=(new Date).getTime()+c.maxHideTime}}function C(){clearTimeout(i);c.hideEta=0;r.stop(true,true)[s.showMethod]({duration:s.showDuration,easing:s.showEasing})}function S(){var t=(c.hideEta-(new Date).getTime())/c.maxHideTime*100;a.width(t+"%")}}function E(){return $.extend({},f(),t.options)}function F(t){if(!T){T=P()}if(t.is(":visible")){return}t.remove();t=null;if(T.children().length===0){T.remove();M=undefined}}}()})})(typeof define==="function"&&define.amd?define:function(t,e){if(typeof module!=="undefined"&&module.exports){module.exports=e(require("jquery"))}else{window.toastr=e(window.jQuery)}});(function(v){function y(t,e,i){var n=t[0],s=/er/.test(i)?_indeterminate:/bl/.test(i)?T:S,r=i==_update?{checked:n[S],disabled:n[T],indeterminate:"true"==t.attr(_indeterminate)||"false"==t.attr(_determinate)}:n[s];if(/^(ch|di|in)/.test(i)&&!r)b(t,s);else if(/^(un|en|de)/.test(i)&&r)w(t,s);else if(i==_update)for(var o in r)r[o]?b(t,o,!0):w(t,o,!0);else if(!e||"toggle"==i){if(!e)t[_callback]("ifClicked");r?n[_type]!==C&&w(t,s):b(t,s)}}function b(t,e,i){var n=t[0],s=t.parent(),r=e==S,o=e==_indeterminate,a=e==T,l=o?_determinate:r?g:"enabled",c=f(t,l+p(n[_type])),h=f(t,e+p(n[_type]));if(!0!==n[e]){if(!i&&e==S&&n[_type]==C&&n.name){var u=t.closest("form"),d='input[name="'+n.name+'"]',d=u.length?u.find(d):v(d);d.each(function(){this!==n&&v(this).data(_)&&w(v(this),e)})}o?(n[e]=!0,n[S]&&w(t,S,"force")):(i||(n[e]=!0),r&&n[_indeterminate]&&w(t,_indeterminate,!1));m(t,r,e,i)}n[T]&&f(t,_cursor,!0)&&s.find("."+k).css(_cursor,"default");s[_add](h||f(t,e)||"");s.attr("role")&&!o&&s.attr("aria-"+(a?T:S),"true");s[_remove](c||f(t,l)||"")}function w(t,e,i){var n=t[0],s=t.parent(),r=e==S,o=e==_indeterminate,a=e==T,l=o?_determinate:r?g:"enabled",c=f(t,l+p(n[_type])),h=f(t,e+p(n[_type]));if(!1!==n[e]){if(o||!i||"force"==i)n[e]=!1;m(t,r,l,i)}!n[T]&&f(t,_cursor,!0)&&s.find("."+k).css(_cursor,"pointer");s[_remove](h||f(t,e)||"");s.attr("role")&&!o&&s.attr("aria-"+(a?T:S),"false");s[_add](c||f(t,l)||"")}function x(t,e){if(t.data(_)){t.parent().html(t.attr("style",t.data(_).s||""));if(e)t[_callback](e);t.off(".i").unwrap();v(_label+'[for="'+t[0].id+'"]').add(t.closest(_label)).off(".i")}}function f(t,e,i){if(t.data(_))return t.data(_).o[e+(i?"":"Class")]}function p(t){return t.charAt(0).toUpperCase()+t.slice(1)}function m(t,e,i,n){if(!n){if(e)t[_callback]("ifToggled");t[_callback]("ifChanged")[_callback]("if"+p(i))}}var _="iCheck",k=_+"-helper",C="radio",S="checked",g="un"+S,T="disabled";_determinate="determinate";_indeterminate="in"+_determinate;_update="update";_type="type";_click="click";_touch="touchbegin.i touchend.i";_add="addClass";_remove="removeClass";_callback="trigger";_label="label";_cursor="cursor";_mobile=/ipad|iphone|ipod|android|blackberry|windows phone|opera mini|silk/i.test(navigator.userAgent);v.fn[_]=function(e,i){var n='input[type="checkbox"], input[type="'+C+'"]',s=v(),t=function(t){t.each(function(){var t=v(this);s=t.is(n)?s.add(t):s.add(t.find(n))})};if(/^(check|uncheck|toggle|indeterminate|determinate|disable|enable|update|destroy)$/i.test(e))return e=e.toLowerCase(),t(this),s.each(function(){var t=v(this);"destroy"==e?x(t,"ifDestroyed"):y(t,!0,e);v.isFunction(i)&&i()});if("object"!=typeof e&&e)return this;var h=v.extend({checkedClass:S,disabledClass:T,indeterminateClass:_indeterminate,labelHover:!0},e),r=h.handle,u=h.hoverClass||"hover",d=h.focusClass||"focus",f=h.activeClass||"active",p=!!h.labelHover,m=h.labelHoverClass||"hover",g=(""+h.increaseArea).replace("%","")|0;if("checkbox"==r||r==C)n='input[type="'+r+'"]';-50>g&&(g=-50);t(this);return s.each(function(){var n=v(this);x(n);var s=this,t=s.id,e=-g+"%",i=100+2*g+"%",i={position:"absolute",top:e,left:e,display:"block",width:i,height:i,margin:0,padding:0,background:"#fff",border:0,opacity:0},e=_mobile?{position:"absolute",visibility:"hidden"}:g?i:{position:"absolute",opacity:0},r="checkbox"==s[_type]?h.checkboxClass||"icheckbox":h.radioClass||"i"+C,o=v(_label+'[for="'+t+'"]').add(n.closest(_label)),a=!!h.aria,l=_+"-"+Math.random().toString(36).substr(2,6),c='<div class="'+r+'" '+(a?'role="'+s[_type]+'" ':"");a&&o.each(function(){c+='aria-labelledby="';this.id?c+=this.id:(this.id=l,c+=l);c+='"'});c=n.wrap(c+"/>")[_callback]("ifCreated").parent().append(h.insert);i=v('<ins class="'+k+'"/>').css(i).appendTo(c);n.data(_,{o:h,s:n.attr("style")}).css(e);h.inheritClass&&c[_add](s.className||"");h.inheritID&&t&&c.attr("id",_+"-"+t);"static"==c.css("position")&&c.css("position","relative");y(n,!0,_update);if(o.length)o.on(_click+".i mouseover.i mouseout.i "+_touch,function(t){var e=t[_type],i=v(this);if(!s[T]){if(e==_click){if(v(t.target).is("a"))return;y(n,!1,!0)}else p&&(/ut|nd/.test(e)?(c[_remove](u),i[_remove](m)):(c[_add](u),i[_add](m)));if(_mobile)t.stopPropagation();else return!1}});n.on(_click+".i focus.i blur.i keyup.i keydown.i keypress.i",function(t){var e=t[_type];t=t.keyCode;if(e==_click)return!1;if("keydown"==e&&32==t)return s[_type]==C&&s[S]||(s[S]?w(n,S):b(n,S)),!1;if("keyup"==e&&s[_type]==C)!s[S]&&b(n,S);else if(/us|ur/.test(e))c["blur"==e?_remove:_add](d)});i.on(_click+" mousedown mouseup mouseover mouseout "+_touch,function(t){var e=t[_type],i=/wn|up/.test(e)?f:u;if(!s[T]){if(e==_click)y(n,!1,!0);else{if(/wn|er|in/.test(e))c[_add](i);else c[_remove](i+" "+f);if(o.length&&p&&i==u)o[/ut|nd/.test(e)?_remove:_add](m)}if(_mobile)t.stopPropagation();else return!1}})})}})(window.jQuery||window.Zepto);(function(t,e){typeof exports==="object"&&typeof module!=="undefined"?module.exports=e():typeof define==="function"&&define.amd?define(e):t.moment=e()})(this,function(){"use strict";var O;function c(){return O.apply(null,arguments)}function L(t){O=t}function s(t){return Object.prototype.toString.call(t)==="[object Array]"}function R(t){return t instanceof Date||Object.prototype.toString.call(t)==="[object Date]"}function z(t,e){var i=[],n;for(n=0;n<t.length;++n){i.push(e(t[n],n))}return i}function a(t,e){return Object.prototype.hasOwnProperty.call(t,e)}function N(t,e){for(var i in e){if(a(e,i)){t[i]=e[i]}}if(a(e,"toString")){t.toString=e.toString}if(a(e,"valueOf")){t.valueOf=e.valueOf}return t}function B(t,e,i,n){return He(t,e,i,n,true).utc()}function j(){return{empty:false,unusedTokens:[],unusedInput:[],overflow:-2,charsLeftOver:0,nullInput:false,invalidMonth:null,invalidFormat:false,userInvalidated:false,iso:false}}function h(t){if(t._pf==null){t._pf=j()}return t._pf}function W(t){if(t._isValid==null){var e=h(t);t._isValid=!isNaN(t._d.getTime())&&e.overflow<0&&!e.empty&&!e.invalidMonth&&!e.invalidWeekday&&!e.nullInput&&!e.invalidFormat&&!e.userInvalidated;if(t._strict){t._isValid=t._isValid&&e.charsLeftOver===0&&e.unusedTokens.length===0&&e.bigHour===undefined}}return t._isValid}function Y(t){var e=B(NaN);if(t!=null){N(h(e),t)}else{h(e).userInvalidated=true}return e}function r(t){return t===void 0}var q=c.momentProperties=[];function U(t,e){var i,n,s;if(!r(e._isAMomentObject)){t._isAMomentObject=e._isAMomentObject}if(!r(e._i)){t._i=e._i}if(!r(e._f)){t._f=e._f}if(!r(e._l)){t._l=e._l}if(!r(e._strict)){t._strict=e._strict}if(!r(e._tzm)){t._tzm=e._tzm}if(!r(e._isUTC)){t._isUTC=e._isUTC}if(!r(e._offset)){t._offset=e._offset}if(!r(e._pf)){t._pf=h(e)}if(!r(e._locale)){t._locale=e._locale}if(q.length>0){for(i in q){n=q[i];s=e[n];if(!r(s)){t[n]=s}}}return t}var V=false;function G(t){U(this,t);this._d=new Date(t._d!=null?t._d.getTime():NaN);if(V===false){V=true;c.updateOffset(this);V=false}}function o(t){return t instanceof G||t!=null&&t._isAMomentObject!=null}function f(t){if(t<0){return Math.ceil(t)}else{return Math.floor(t)}}function l(t){var e=+t,i=0;if(e!==0&&isFinite(e)){i=f(e)}return i}function X(t,e,i){var n=Math.min(t.length,e.length),s=Math.abs(t.length-e.length),r=0,o;for(o=0;o<n;o++){if(i&&t[o]!==e[o]||!i&&l(t[o])!==l(e[o])){r++}}return r+s}function K(){}var i={};var Q;function Z(t){return t?t.toLowerCase().replace("_","-"):t}function J(t){var e=0,i,n,s,r;while(e<t.length){r=Z(t[e]).split("-");i=r.length;n=Z(t[e+1]);n=n?n.split("-"):null;while(i>0){s=tt(r.slice(0,i).join("-"));if(s){return s}if(n&&n.length>=i&&X(r,n,true)>=i-1){break}i--}e++}return null}function tt(t){var e=null;if(!i[t]&&typeof module!=="undefined"&&module&&module.exports){try{e=Q._abbr;require("./locale/"+t);et(e)}catch(t){}}return i[t]}function et(t,e){var i;if(t){if(r(e)){i=u(t)}else{i=it(t,e)}if(i){Q=i}}return Q._abbr}function it(t,e){if(e!==null){e.abbr=t;i[t]=i[t]||new K;i[t].set(e);et(t);return i[t]}else{delete i[t];return null}}function u(t){var e;if(t&&t._locale&&t._locale._abbr){t=t._locale._abbr}if(!t){return Q}if(!s(t)){e=tt(t);if(e){return e}t=[t]}return J(t)}var nt={};function t(t,e){var i=t.toLowerCase();nt[i]=nt[i+"s"]=nt[e]=t}function d(t){return typeof t==="string"?nt[t]||nt[t.toLowerCase()]:undefined}function st(t){var e={},i,n;for(n in t){if(a(t,n)){i=d(n);if(i){e[i]=t[n]}}}return e}function p(t){return t instanceof Function||Object.prototype.toString.call(t)==="[object Function]"}function rt(e,i){return function(t){if(t!=null){at(this,e,t);c.updateOffset(this,i);return this}else{return ot(this,e)}}}function ot(t,e){return t.isValid()?t._d["get"+(t._isUTC?"UTC":"")+e]():NaN}function at(t,e,i){if(t.isValid()){t._d["set"+(t._isUTC?"UTC":"")+e](i)}}function lt(t,e){var i;if(typeof t==="object"){for(i in t){this.set(i,t[i])}}else{t=d(t);if(p(this[t])){return this[t](e)}}return this}function m(t,e,i){var n=""+Math.abs(t),s=e-n.length,r=t>=0;return(r?i?"+":"":"-")+Math.pow(10,Math.max(0,s)).toString().substr(1)+n}var ct=/(\[[^\[]*\])|(\\)?([Hh]mm(ss)?|Mo|MM?M?M?|Do|DDDo|DD?D?D?|ddd?d?|do?|w[o|w]?|W[o|W]?|Qo?|YYYYYY|YYYYY|YYYY|YY|gg(ggg?)?|GG(GGG?)?|e|E|a|A|hh?|HH?|mm?|ss?|S{1,9}|x|X|zz?|ZZ?|.)/g;var ht=/(\[[^\[]*\])|(\\)?(LTS|LT|LL?L?L?|l{1,4})/g;var ut={};var dt={};function n(t,e,i,n){var s=n;if(typeof n==="string"){s=function(){return this[n]()}}if(t){dt[t]=s}if(e){dt[e[0]]=function(){return m(s.apply(this,arguments),e[1],e[2])}}if(i){dt[i]=function(){return this.localeData().ordinal(s.apply(this,arguments),t)}}}function ft(t){if(t.match(/\[[\s\S]/)){return t.replace(/^\[|\]$/g,"")}return t.replace(/\\/g,"")}function pt(i){var n=i.match(ct),s,r;for(s=0,r=n.length;s<r;s++){if(dt[n[s]]){n[s]=dt[n[s]]}else{n[s]=ft(n[s])}}return function(t){var e="";for(s=0;s<r;s++){e+=n[s]instanceof Function?n[s].call(t,i):n[s]}return e}}function mt(t,e){if(!t.isValid()){return t.localeData().invalidDate()}e=gt(e,t.localeData());ut[e]=ut[e]||pt(e);return ut[e](t)}function gt(t,e){var i=5;function n(t){return e.longDateFormat(t)||t}ht.lastIndex=0;while(i>=0&&ht.test(t)){t=t.replace(ht,n);ht.lastIndex=0;i-=1}return t}var vt=/\d/;var e=/\d\d/;var yt=/\d{3}/;var bt=/\d{4}/;var wt=/[+-]?\d{6}/;var g=/\d\d?/;var xt=/\d\d\d\d?/;var _t=/\d\d\d\d\d\d?/;var kt=/\d{1,3}/;var Ct=/\d{1,4}/;var St=/[+-]?\d{1,6}/;var Tt=/\d+/;var Dt=/[+-]?\d+/;var Mt=/Z|[+-]\d\d:?\d\d/gi;var Pt=/Z|[+-]\d\d(?::?\d\d)?/gi;var It=/[+-]?\d+(\.\d{1,3})?/;var Et=/[0-9]*['a-z\u00A0-\u05FF\u0700-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF]+|[\u0600-\u06FF\/]+(\s*?[\u0600-\u06FF]+){1,2}/i;var Ft={};function v(t,i,n){Ft[t]=p(i)?i:function(t,e){return t&&n?n:i}}function $t(t,e){if(!a(Ft,t)){return new RegExp(At(t))}return Ft[t](e._strict,e._locale)}function At(t){return Ht(t.replace("\\","").replace(/\\(\[)|\\(\])|\[([^\]\[]*)\]|\\(.)/g,function(t,e,i,n,s){return e||i||n||s}))}function Ht(t){return t.replace(/[-\/\\^$*+?.()|[\]{}]/g,"\\$&")}var Ot={};function y(t,i){var e,n=i;if(typeof t==="string"){t=[t]}if(typeof i==="number"){n=function(t,e){e[i]=l(t)}}for(e=0;e<t.length;e++){Ot[t[e]]=n}}function Lt(t,s){y(t,function(t,e,i,n){i._w=i._w||{};s(t,i._w,i,n)})}function Rt(t,e,i){if(e!=null&&a(Ot,t)){Ot[t](e,i._a,i,t)}}var b=0;var w=1;var x=2;var _=3;var k=4;var C=5;var S=6;var zt=7;var Nt=8;function Bt(t,e){return new Date(Date.UTC(t,e+1,0)).getUTCDate()}n("M",["MM",2],"Mo",function(){return this.month()+1});n("MMM",0,0,function(t){return this.localeData().monthsShort(this,t)});n("MMMM",0,0,function(t){return this.localeData().months(this,t)});t("month","M");v("M",g);v("MM",g,e);v("MMM",function(t,e){return e.monthsShortRegex(t)});v("MMMM",function(t,e){return e.monthsRegex(t)});y(["M","MM"],function(t,e){e[w]=l(t)-1});y(["MMM","MMMM"],function(t,e,i,n){var s=i._locale.monthsParse(t,n,i._strict);if(s!=null){e[w]=s}else{h(i).invalidMonth=t}});var jt=/D[oD]?(\[[^\[\]]*\]|\s+)+MMMM?/;var Wt="January_February_March_April_May_June_July_August_September_October_November_December".split("_");function Yt(t,e){return s(this._months)?this._months[t.month()]:this._months[jt.test(e)?"format":"standalone"][t.month()]}var qt="Jan_Feb_Mar_Apr_May_Jun_Jul_Aug_Sep_Oct_Nov_Dec".split("_");function Ut(t,e){return s(this._monthsShort)?this._monthsShort[t.month()]:this._monthsShort[jt.test(e)?"format":"standalone"][t.month()]}function Vt(t,e,i){var n,s,r;if(!this._monthsParse){this._monthsParse=[];this._longMonthsParse=[];this._shortMonthsParse=[]}for(n=0;n<12;n++){s=B([2e3,n]);if(i&&!this._longMonthsParse[n]){this._longMonthsParse[n]=new RegExp("^"+this.months(s,"").replace(".","")+"$","i");this._shortMonthsParse[n]=new RegExp("^"+this.monthsShort(s,"").replace(".","")+"$","i")}if(!i&&!this._monthsParse[n]){r="^"+this.months(s,"")+"|^"+this.monthsShort(s,"");this._monthsParse[n]=new RegExp(r.replace(".",""),"i")}if(i&&e==="MMMM"&&this._longMonthsParse[n].test(t)){return n}else if(i&&e==="MMM"&&this._shortMonthsParse[n].test(t)){return n}else if(!i&&this._monthsParse[n].test(t)){return n}}}function Gt(t,e){var i;if(!t.isValid()){return t}if(typeof e==="string"){e=t.localeData().monthsParse(e);if(typeof e!=="number"){return t}}i=Math.min(t.date(),Bt(t.year(),e));t._d["set"+(t._isUTC?"UTC":"")+"Month"](e,i);return t}function Xt(t){if(t!=null){Gt(this,t);c.updateOffset(this,true);return this}else{return ot(this,"Month")}}function Kt(){return Bt(this.year(),this.month())}var Qt=Et;function Zt(t){if(this._monthsParseExact){if(!a(this,"_monthsRegex")){ee.call(this)}if(t){return this._monthsShortStrictRegex}else{return this._monthsShortRegex}}else{return this._monthsShortStrictRegex&&t?this._monthsShortStrictRegex:this._monthsShortRegex}}var Jt=Et;function te(t){if(this._monthsParseExact){if(!a(this,"_monthsRegex")){ee.call(this)}if(t){return this._monthsStrictRegex}else{return this._monthsRegex}}else{return this._monthsStrictRegex&&t?this._monthsStrictRegex:this._monthsRegex}}function ee(){function t(t,e){return e.length-t.length}var e=[],i=[],n=[],s,r;for(s=0;s<12;s++){r=B([2e3,s]);e.push(this.monthsShort(r,""));i.push(this.months(r,""));n.push(this.months(r,""));n.push(this.monthsShort(r,""))}e.sort(t);i.sort(t);n.sort(t);for(s=0;s<12;s++){e[s]=Ht(e[s]);i[s]=Ht(i[s]);n[s]=Ht(n[s])}this._monthsRegex=new RegExp("^("+n.join("|")+")","i");this._monthsShortRegex=this._monthsRegex;this._monthsStrictRegex=new RegExp("^("+i.join("|")+")$","i");this._monthsShortStrictRegex=new RegExp("^("+e.join("|")+")$","i")}function ie(t){var e;var i=t._a;if(i&&h(t).overflow===-2){e=i[w]<0||i[w]>11?w:i[x]<1||i[x]>Bt(i[b],i[w])?x:i[_]<0||i[_]>24||i[_]===24&&(i[k]!==0||i[C]!==0||i[S]!==0)?_:i[k]<0||i[k]>59?k:i[C]<0||i[C]>59?C:i[S]<0||i[S]>999?S:-1;if(h(t)._overflowDayOfYear&&(e<b||e>x)){e=x}if(h(t)._overflowWeeks&&e===-1){e=zt}if(h(t)._overflowWeekday&&e===-1){e=Nt}h(t).overflow=e}return t}function ne(t){if(c.suppressDeprecationWarnings===false&&typeof console!=="undefined"&&console.warn){console.warn("Deprecation warning: "+t)}}function T(t,e){var i=true;return N(function(){if(i){ne(t+"\nArguments: "+Array.prototype.slice.call(arguments).join(", ")+"\n"+(new Error).stack);i=false}return e.apply(this,arguments)},e)}var se={};function re(t,e){if(!se[t]){ne(e);se[t]=true}}c.suppressDeprecationWarnings=false;var oe=/^\s*((?:[+-]\d{6}|\d{4})-(?:\d\d-\d\d|W\d\d-\d|W\d\d|\d\d\d|\d\d))(?:(T| )(\d\d(?::\d\d(?::\d\d(?:[.,]\d+)?)?)?)([\+\-]\d\d(?::?\d\d)?|\s*Z)?)?/;var ae=/^\s*((?:[+-]\d{6}|\d{4})(?:\d\d\d\d|W\d\d\d|W\d\d|\d\d\d|\d\d))(?:(T| )(\d\d(?:\d\d(?:\d\d(?:[.,]\d+)?)?)?)([\+\-]\d\d(?::?\d\d)?|\s*Z)?)?/;var le=/Z|[+-]\d\d(?::?\d\d)?/;var ce=[["YYYYYY-MM-DD",/[+-]\d{6}-\d\d-\d\d/],["YYYY-MM-DD",/\d{4}-\d\d-\d\d/],["GGGG-[W]WW-E",/\d{4}-W\d\d-\d/],["GGGG-[W]WW",/\d{4}-W\d\d/,false],["YYYY-DDD",/\d{4}-\d{3}/],["YYYY-MM",/\d{4}-\d\d/,false],["YYYYYYMMDD",/[+-]\d{10}/],["YYYYMMDD",/\d{8}/],["GGGG[W]WWE",/\d{4}W\d{3}/],["GGGG[W]WW",/\d{4}W\d{2}/,false],["YYYYDDD",/\d{7}/]];var he=[["HH:mm:ss.SSSS",/\d\d:\d\d:\d\d\.\d+/],["HH:mm:ss,SSSS",/\d\d:\d\d:\d\d,\d+/],["HH:mm:ss",/\d\d:\d\d:\d\d/],["HH:mm",/\d\d:\d\d/],["HHmmss.SSSS",/\d\d\d\d\d\d\.\d+/],["HHmmss,SSSS",/\d\d\d\d\d\d,\d+/],["HHmmss",/\d\d\d\d\d\d/],["HHmm",/\d\d\d\d/],["HH",/\d\d/]];var ue=/^\/?Date\((\-?\d+)/i;function de(t){var e,i,n=t._i,s=oe.exec(n)||ae.exec(n),r,o,a,l;if(s){h(t).iso=true;for(e=0,i=ce.length;e<i;e++){if(ce[e][1].exec(s[1])){o=ce[e][0];r=ce[e][2]!==false;break}}if(o==null){t._isValid=false;return}if(s[3]){for(e=0,i=he.length;e<i;e++){if(he[e][1].exec(s[3])){a=(s[2]||" ")+he[e][0];break}}if(a==null){t._isValid=false;return}}if(!r&&a!=null){t._isValid=false;return}if(s[4]){if(le.exec(s[4])){l="Z"}else{t._isValid=false;return}}t._f=o+(a||"")+(l||"");Me(t)}else{t._isValid=false}}function fe(t){var e=ue.exec(t._i);if(e!==null){t._d=new Date(+e[1]);return}de(t);if(t._isValid===false){delete t._isValid;c.createFromInputFallback(t)}}c.createFromInputFallback=T("moment construction falls back to js Date. This is "+"discouraged and will be removed in upcoming major "+"release. Please refer to "+"https://github.com/moment/moment/issues/1407 for more info.",function(t){t._d=new Date(t._i+(t._useUTC?" UTC":""))});function pe(t,e,i,n,s,r,o){var a=new Date(t,e,i,n,s,r,o);if(t<100&&t>=0&&isFinite(a.getFullYear())){a.setFullYear(t)}return a}function me(t){var e=new Date(Date.UTC.apply(null,arguments));if(t<100&&t>=0&&isFinite(e.getUTCFullYear())){e.setUTCFullYear(t)}return e}n("Y",0,0,function(){var t=this.year();return t<=9999?""+t:"+"+t});n(0,["YY",2],0,function(){return this.year()%100});n(0,["YYYY",4],0,"year");n(0,["YYYYY",5],0,"year");n(0,["YYYYYY",6,true],0,"year");t("year","y");v("Y",Dt);v("YY",g,e);v("YYYY",Ct,bt);v("YYYYY",St,wt);v("YYYYYY",St,wt);y(["YYYYY","YYYYYY"],b);y("YYYY",function(t,e){e[b]=t.length===2?c.parseTwoDigitYear(t):l(t)});y("YY",function(t,e){e[b]=c.parseTwoDigitYear(t)});y("Y",function(t,e){e[b]=parseInt(t,10)});function ge(t){return ve(t)?366:365}function ve(t){return t%4===0&&t%100!==0||t%400===0}c.parseTwoDigitYear=function(t){return l(t)+(l(t)>68?1900:2e3)};var ye=rt("FullYear",false);function be(){return ve(this.year())}function we(t,e,i){var n=7+e-i,s=(7+me(t,0,n).getUTCDay()-e)%7;return-s+n-1}function xe(t,e,i,n,s){var r=(7+i-n)%7,o=we(t,n,s),a=1+7*(e-1)+r+o,l,c;if(a<=0){l=t-1;c=ge(l)+a}else if(a>ge(t)){l=t+1;c=a-ge(t)}else{l=t;c=a}return{year:l,dayOfYear:c}}function _e(t,e,i){var n=we(t.year(),e,i),s=Math.floor((t.dayOfYear()-n-1)/7)+1,r,o;if(s<1){o=t.year()-1;r=s+ke(o,e,i)}else if(s>ke(t.year(),e,i)){r=s-ke(t.year(),e,i);o=t.year()+1}else{o=t.year();r=s}return{week:r,year:o}}function ke(t,e,i){var n=we(t,e,i),s=we(t+1,e,i);return(ge(t)-n+s)/7}function Ce(t,e,i){if(t!=null){return t}if(e!=null){return e}return i}function Se(t){var e=new Date(c.now());if(t._useUTC){return[e.getUTCFullYear(),e.getUTCMonth(),e.getUTCDate()]}return[e.getFullYear(),e.getMonth(),e.getDate()]}function Te(t){var e,i,n=[],s,r;if(t._d){return}s=Se(t);if(t._w&&t._a[x]==null&&t._a[w]==null){De(t)}if(t._dayOfYear){r=Ce(t._a[b],s[b]);if(t._dayOfYear>ge(r)){h(t)._overflowDayOfYear=true}i=me(r,0,t._dayOfYear);t._a[w]=i.getUTCMonth();t._a[x]=i.getUTCDate()}for(e=0;e<3&&t._a[e]==null;++e){t._a[e]=n[e]=s[e]}for(;e<7;e++){t._a[e]=n[e]=t._a[e]==null?e===2?1:0:t._a[e]}if(t._a[_]===24&&t._a[k]===0&&t._a[C]===0&&t._a[S]===0){t._nextDay=true;t._a[_]=0}t._d=(t._useUTC?me:pe).apply(null,n);if(t._tzm!=null){t._d.setUTCMinutes(t._d.getUTCMinutes()-t._tzm)}if(t._nextDay){t._a[_]=24}}function De(t){var e,i,n,s,r,o,a,l;e=t._w;if(e.GG!=null||e.W!=null||e.E!=null){r=1;o=4;i=Ce(e.GG,t._a[b],_e(D(),1,4).year);n=Ce(e.W,1);s=Ce(e.E,1);if(s<1||s>7){l=true}}else{r=t._locale._week.dow;o=t._locale._week.doy;i=Ce(e.gg,t._a[b],_e(D(),r,o).year);n=Ce(e.w,1);if(e.d!=null){s=e.d;if(s<0||s>6){l=true}}else if(e.e!=null){s=e.e+r;if(e.e<0||e.e>6){l=true}}else{s=r}}if(n<1||n>ke(i,r,o)){h(t)._overflowWeeks=true}else if(l!=null){h(t)._overflowWeekday=true}else{a=xe(i,n,s,r,o);t._a[b]=a.year;t._dayOfYear=a.dayOfYear}}c.ISO_8601=function(){};function Me(t){if(t._f===c.ISO_8601){de(t);return}t._a=[];h(t).empty=true;var e=""+t._i,i,n,s,r,o,a=e.length,l=0;s=gt(t._f,t._locale).match(ct)||[];for(i=0;i<s.length;i++){r=s[i];n=(e.match($t(r,t))||[])[0];if(n){o=e.substr(0,e.indexOf(n));if(o.length>0){h(t).unusedInput.push(o)}e=e.slice(e.indexOf(n)+n.length);l+=n.length}if(dt[r]){if(n){h(t).empty=false}else{h(t).unusedTokens.push(r)}Rt(r,n,t)}else if(t._strict&&!n){h(t).unusedTokens.push(r)}}h(t).charsLeftOver=a-l;if(e.length>0){h(t).unusedInput.push(e)}if(h(t).bigHour===true&&t._a[_]<=12&&t._a[_]>0){h(t).bigHour=undefined}t._a[_]=Pe(t._locale,t._a[_],t._meridiem);Te(t);ie(t)}function Pe(t,e,i){var n;if(i==null){return e}if(t.meridiemHour!=null){return t.meridiemHour(e,i)}else if(t.isPM!=null){n=t.isPM(i);if(n&&e<12){e+=12}if(!n&&e===12){e=0}return e}else{return e}}function Ie(t){var e,i,n,s,r;if(t._f.length===0){h(t).invalidFormat=true;t._d=new Date(NaN);return}for(s=0;s<t._f.length;s++){r=0;e=U({},t);if(t._useUTC!=null){e._useUTC=t._useUTC}e._f=t._f[s];Me(e);if(!W(e)){continue}r+=h(e).charsLeftOver;r+=h(e).unusedTokens.length*10;h(e).score=r;if(n==null||r<n){n=r;i=e}}N(t,i||e)}function Ee(t){if(t._d){return}var e=st(t._i);t._a=z([e.year,e.month,e.day||e.date,e.hour,e.minute,e.second,e.millisecond],function(t){return t&&parseInt(t,10)});Te(t)}function Fe(t){var e=new G(ie($e(t)));if(e._nextDay){e.add(1,"d");e._nextDay=undefined}return e}function $e(t){var e=t._i,i=t._f;t._locale=t._locale||u(t._l);if(e===null||i===undefined&&e===""){return Y({nullInput:true})}if(typeof e==="string"){t._i=e=t._locale.preparse(e)}if(o(e)){return new G(ie(e))}else if(s(i)){Ie(t)}else if(i){Me(t)}else if(R(e)){t._d=e}else{Ae(t)}if(!W(t)){t._d=null}return t}function Ae(t){var e=t._i;if(e===undefined){t._d=new Date(c.now())}else if(R(e)){t._d=new Date(+e)}else if(typeof e==="string"){fe(t)}else if(s(e)){t._a=z(e.slice(0),function(t){return parseInt(t,10)});Te(t)}else if(typeof e==="object"){Ee(t)}else if(typeof e==="number"){t._d=new Date(e)}else{c.createFromInputFallback(t)}}function He(t,e,i,n,s){var r={};if(typeof i==="boolean"){n=i;i=undefined}r._isAMomentObject=true;r._useUTC=r._isUTC=s;r._l=i;r._i=t;r._f=e;r._strict=n;return Fe(r)}function D(t,e,i,n){return He(t,e,i,n,false)}var Oe=T("moment().min is deprecated, use moment.min instead. https://github.com/moment/moment/issues/1548",function(){var t=D.apply(null,arguments);if(this.isValid()&&t.isValid()){return t<this?this:t}else{return Y()}});var Le=T("moment().max is deprecated, use moment.max instead. https://github.com/moment/moment/issues/1548",function(){var t=D.apply(null,arguments);if(this.isValid()&&t.isValid()){return t>this?this:t}else{return Y()}});function Re(t,e){var i,n;if(e.length===1&&s(e[0])){e=e[0]}if(!e.length){return D()}i=e[0];for(n=1;n<e.length;++n){if(!e[n].isValid()||e[n][t](i)){i=e[n]}}return i}function ze(){var t=[].slice.call(arguments,0);return Re("isBefore",t)}function Ne(){var t=[].slice.call(arguments,0);return Re("isAfter",t)}var Be=function(){return Date.now?Date.now():+new Date};function je(t){var e=st(t),i=e.year||0,n=e.quarter||0,s=e.month||0,r=e.week||0,o=e.day||0,a=e.hour||0,l=e.minute||0,c=e.second||0,h=e.millisecond||0;this._milliseconds=+h+c*1e3+l*6e4+a*36e5;this._days=+o+r*7;this._months=+s+n*3+i*12;this._data={};this._locale=u();this._bubble()}function We(t){return t instanceof je}function Ye(t,i){n(t,0,0,function(){var t=this.utcOffset();var e="+";if(t<0){t=-t;e="-"}return e+m(~~(t/60),2)+i+m(~~t%60,2)})}Ye("Z",":");Ye("ZZ","");v("Z",Pt);v("ZZ",Pt);y(["Z","ZZ"],function(t,e,i){i._useUTC=true;i._tzm=Ue(Pt,t)});var qe=/([\+\-]|\d\d)/gi;function Ue(t,e){var i=(e||"").match(t)||[];var n=i[i.length-1]||[];var s=(n+"").match(qe)||["-",0,0];var r=+(s[1]*60)+l(s[2]);return s[0]==="+"?r:-r}function Ve(t,e){var i,n;if(e._isUTC){i=e.clone();n=(o(t)||R(t)?+t:+D(t))-+i;i._d.setTime(+i._d+n);c.updateOffset(i,false);return i}else{return D(t).local()}}function Ge(t){return-Math.round(t._d.getTimezoneOffset()/15)*15}c.updateOffset=function(){};function Xe(t,e){var i=this._offset||0,n;if(!this.isValid()){return t!=null?this:NaN}if(t!=null){if(typeof t==="string"){t=Ue(Pt,t)}else if(Math.abs(t)<16){t=t*60}if(!this._isUTC&&e){n=Ge(this)}this._offset=t;this._isUTC=true;if(n!=null){this.add(n,"m")}if(i!==t){if(!e||this._changeInProgress){di(this,M(t-i,"m"),1,false)}else if(!this._changeInProgress){this._changeInProgress=true;c.updateOffset(this,true);this._changeInProgress=null}}return this}else{return this._isUTC?i:Ge(this)}}function Ke(t,e){if(t!=null){if(typeof t!=="string"){t=-t}this.utcOffset(t,e);return this}else{return-this.utcOffset()}}function Qe(t){return this.utcOffset(0,t)}function Ze(t){if(this._isUTC){this.utcOffset(0,t);this._isUTC=false;if(t){this.subtract(Ge(this),"m")}}return this}function Je(){if(this._tzm){this.utcOffset(this._tzm)}else if(typeof this._i==="string"){this.utcOffset(Ue(Mt,this._i))}return this}function ti(t){if(!this.isValid()){return false}t=t?D(t).utcOffset():0;return(this.utcOffset()-t)%60===0}function ei(){return this.utcOffset()>this.clone().month(0).utcOffset()||this.utcOffset()>this.clone().month(5).utcOffset()}function ii(){if(!r(this._isDSTShifted)){return this._isDSTShifted}var t={};U(t,this);t=$e(t);if(t._a){var e=t._isUTC?B(t._a):D(t._a);this._isDSTShifted=this.isValid()&&X(t._a,e.toArray())>0}else{this._isDSTShifted=false}return this._isDSTShifted}function ni(){return this.isValid()?!this._isUTC:false}function si(){return this.isValid()?this._isUTC:false}function ri(){return this.isValid()?this._isUTC&&this._offset===0:false}var oi=/^(\-)?(?:(\d*)[. ])?(\d+)\:(\d+)(?:\:(\d+)\.?(\d{3})?\d*)?$/;var ai=/^(-)?P(?:(?:([0-9,.]*)Y)?(?:([0-9,.]*)M)?(?:([0-9,.]*)D)?(?:T(?:([0-9,.]*)H)?(?:([0-9,.]*)M)?(?:([0-9,.]*)S)?)?|([0-9,.]*)W)$/;function M(t,e){var i=t,n=null,s,r,o;if(We(t)){i={ms:t._milliseconds,d:t._days,M:t._months}}else if(typeof t==="number"){i={};if(e){i[e]=t}else{i.milliseconds=t}}else if(!!(n=oi.exec(t))){s=n[1]==="-"?-1:1;i={y:0,d:l(n[x])*s,h:l(n[_])*s,m:l(n[k])*s,s:l(n[C])*s,ms:l(n[S])*s}}else if(!!(n=ai.exec(t))){s=n[1]==="-"?-1:1;i={y:li(n[2],s),M:li(n[3],s),d:li(n[4],s),h:li(n[5],s),m:li(n[6],s),s:li(n[7],s),w:li(n[8],s)}}else if(i==null){i={}}else if(typeof i==="object"&&("from"in i||"to"in i)){o=hi(D(i.from),D(i.to));i={};i.ms=o.milliseconds;i.M=o.months}r=new je(i);if(We(t)&&a(t,"_locale")){r._locale=t._locale}return r}M.fn=je.prototype;function li(t,e){var i=t&&parseFloat(t.replace(",","."));return(isNaN(i)?0:i)*e}function ci(t,e){var i={milliseconds:0,months:0};i.months=e.month()-t.month()+(e.year()-t.year())*12;if(t.clone().add(i.months,"M").isAfter(e)){--i.months}i.milliseconds=+e-+t.clone().add(i.months,"M");return i}function hi(t,e){var i;if(!(t.isValid()&&e.isValid())){return{milliseconds:0,months:0}}e=Ve(e,t);if(t.isBefore(e)){i=ci(t,e)}else{i=ci(e,t);i.milliseconds=-i.milliseconds;i.months=-i.months}return i}function ui(s,r){return function(t,e){var i,n;if(e!==null&&!isNaN(+e)){re(r,"moment()."+r+"(period, number) is deprecated. Please use moment()."+r+"(number, period).");n=t;t=e;e=n}t=typeof t==="string"?+t:t;i=M(t,e);di(this,i,s);return this}}function di(t,e,i,n){var s=e._milliseconds,r=e._days,o=e._months;if(!t.isValid()){return}n=n==null?true:n;if(s){t._d.setTime(+t._d+s*i)}if(r){at(t,"Date",ot(t,"Date")+r*i)}if(o){Gt(t,ot(t,"Month")+o*i)}if(n){c.updateOffset(t,r||o)}}var fi=ui(1,"add");var pi=ui(-1,"subtract");function mi(t,e){var i=t||D(),n=Ve(i,this).startOf("day"),s=this.diff(n,"days",true),r=s<-6?"sameElse":s<-1?"lastWeek":s<0?"lastDay":s<1?"sameDay":s<2?"nextDay":s<7?"nextWeek":"sameElse";var o=e&&(p(e[r])?e[r]():e[r]);return this.format(o||this.localeData().calendar(r,this,D(i)))}function gi(){return new G(this)}function vi(t,e){var i=o(t)?t:D(t);if(!(this.isValid()&&i.isValid())){return false}e=d(!r(e)?e:"millisecond");if(e==="millisecond"){return+this>+i}else{return+i<+this.clone().startOf(e)}}function yi(t,e){var i=o(t)?t:D(t);if(!(this.isValid()&&i.isValid())){return false}e=d(!r(e)?e:"millisecond");if(e==="millisecond"){return+this<+i}else{return+this.clone().endOf(e)<+i}}function bi(t,e,i){return this.isAfter(t,i)&&this.isBefore(e,i)}function wi(t,e){var i=o(t)?t:D(t),n;if(!(this.isValid()&&i.isValid())){return false}e=d(e||"millisecond");if(e==="millisecond"){return+this===+i}else{n=+i;return+this.clone().startOf(e)<=n&&n<=+this.clone().endOf(e)}}function xi(t,e){return this.isSame(t,e)||this.isAfter(t,e)}function _i(t,e){return this.isSame(t,e)||this.isBefore(t,e)}function ki(t,e,i){var n,s,r,o;if(!this.isValid()){return NaN}n=Ve(t,this);if(!n.isValid()){return NaN}s=(n.utcOffset()-this.utcOffset())*6e4;e=d(e);if(e==="year"||e==="month"||e==="quarter"){o=Ci(this,n);if(e==="quarter"){o=o/3}else if(e==="year"){o=o/12}}else{r=this-n;o=e==="second"?r/1e3:e==="minute"?r/6e4:e==="hour"?r/36e5:e==="day"?(r-s)/864e5:e==="week"?(r-s)/6048e5:r}return i?o:f(o)}function Ci(t,e){var i=(e.year()-t.year())*12+(e.month()-t.month()),n=t.clone().add(i,"months"),s,r;if(e-n<0){s=t.clone().add(i-1,"months");r=(e-n)/(n-s)}else{s=t.clone().add(i+1,"months");r=(e-n)/(s-n)}return-(i+r)}c.defaultFormat="YYYY-MM-DDTHH:mm:ssZ";function Si(){return this.clone().locale("en").format("ddd MMM DD YYYY HH:mm:ss [GMT]ZZ")}function Ti(){var t=this.clone().utc();if(0<t.year()&&t.year()<=9999){if(p(Date.prototype.toISOString)){return this.toDate().toISOString()}else{return mt(t,"YYYY-MM-DD[T]HH:mm:ss.SSS[Z]")}}else{return mt(t,"YYYYYY-MM-DD[T]HH:mm:ss.SSS[Z]")}}function Di(t){var e=mt(this,t||c.defaultFormat);return this.localeData().postformat(e)}function Mi(t,e){if(this.isValid()&&(o(t)&&t.isValid()||D(t).isValid())){return M({to:this,from:t}).locale(this.locale()).humanize(!e)}else{return this.localeData().invalidDate()}}function Pi(t){return this.from(D(),t)}function Ii(t,e){if(this.isValid()&&(o(t)&&t.isValid()||D(t).isValid())){return M({from:this,to:t}).locale(this.locale()).humanize(!e)}else{return this.localeData().invalidDate()}}function Ei(t){return this.to(D(),t)}function Fi(t){var e;if(t===undefined){return this._locale._abbr}else{e=u(t);if(e!=null){this._locale=e}return this}}var $i=T("moment().lang() is deprecated. Instead, use moment().localeData() to get the language configuration. Use moment().locale() to change languages.",function(t){if(t===undefined){return this.localeData()}else{return this.locale(t)}});function Ai(){return this._locale}function Hi(t){t=d(t);switch(t){case"year":this.month(0);case"quarter":case"month":this.date(1);case"week":case"isoWeek":case"day":this.hours(0);case"hour":this.minutes(0);case"minute":this.seconds(0);case"second":this.milliseconds(0)}if(t==="week"){this.weekday(0)}if(t==="isoWeek"){this.isoWeekday(1)}if(t==="quarter"){this.month(Math.floor(this.month()/3)*3)}return this}function Oi(t){t=d(t);if(t===undefined||t==="millisecond"){return this}return this.startOf(t).add(1,t==="isoWeek"?"week":t).subtract(1,"ms")}function Li(){return+this._d-(this._offset||0)*6e4}function Ri(){return Math.floor(+this/1e3)}function zi(){return this._offset?new Date(+this):this._d}function Ni(){var t=this;return[t.year(),t.month(),t.date(),t.hour(),t.minute(),t.second(),t.millisecond()]}function Bi(){var t=this;return{years:t.year(),months:t.month(),date:t.date(),hours:t.hours(),minutes:t.minutes(),seconds:t.seconds(),milliseconds:t.milliseconds()}}function ji(){return this.isValid()?this.toISOString():"null"}function Wi(){return W(this)}function Yi(){return N({},h(this))}function qi(){return h(this).overflow}function Ui(){return{input:this._i,format:this._f,locale:this._locale,isUTC:this._isUTC,strict:this._strict}}n(0,["gg",2],0,function(){return this.weekYear()%100});n(0,["GG",2],0,function(){return this.isoWeekYear()%100});function Vi(t,e){n(0,[t,t.length],0,e)}Vi("gggg","weekYear");Vi("ggggg","weekYear");Vi("GGGG","isoWeekYear");Vi("GGGGG","isoWeekYear");t("weekYear","gg");t("isoWeekYear","GG");v("G",Dt);v("g",Dt);v("GG",g,e);v("gg",g,e);v("GGGG",Ct,bt);v("gggg",Ct,bt);v("GGGGG",St,wt);v("ggggg",St,wt);Lt(["gggg","ggggg","GGGG","GGGGG"],function(t,e,i,n){e[n.substr(0,2)]=l(t)});Lt(["gg","GG"],function(t,e,i,n){e[n]=c.parseTwoDigitYear(t)});function Gi(t){return Zi.call(this,t,this.week(),this.weekday(),this.localeData()._week.dow,this.localeData()._week.doy)}function Xi(t){return Zi.call(this,t,this.isoWeek(),this.isoWeekday(),1,4)}function Ki(){return ke(this.year(),1,4)}function Qi(){var t=this.localeData()._week;return ke(this.year(),t.dow,t.doy)}function Zi(t,e,i,n,s){var r;if(t==null){return _e(this,n,s).year}else{r=ke(t,n,s);if(e>r){e=r}return Ji.call(this,t,e,i,n,s)}}function Ji(t,e,i,n,s){var r=xe(t,e,i,n,s),o=me(r.year,0,r.dayOfYear);this.year(o.getUTCFullYear());this.month(o.getUTCMonth());this.date(o.getUTCDate());return this}n("Q",0,"Qo","quarter");t("quarter","Q");v("Q",vt);y("Q",function(t,e){e[w]=(l(t)-1)*3});function tn(t){return t==null?Math.ceil((this.month()+1)/3):this.month((t-1)*3+this.month()%3)}n("w",["ww",2],"wo","week");n("W",["WW",2],"Wo","isoWeek");t("week","w");t("isoWeek","W");v("w",g);v("ww",g,e);v("W",g);v("WW",g,e);Lt(["w","ww","W","WW"],function(t,e,i,n){e[n.substr(0,1)]=l(t)});function en(t){return _e(t,this._week.dow,this._week.doy).week}var nn={dow:0,doy:6};function sn(){return this._week.dow}function rn(){return this._week.doy}function on(t){var e=this.localeData().week(this);return t==null?e:this.add((t-e)*7,"d")}function an(t){var e=_e(this,1,4).week;return t==null?e:this.add((t-e)*7,"d")}n("D",["DD",2],"Do","date");t("date","D");v("D",g);v("DD",g,e);v("Do",function(t,e){return t?e._ordinalParse:e._ordinalParseLenient});y(["D","DD"],x);y("Do",function(t,e){e[x]=l(t.match(g)[0],10)});var ln=rt("Date",true);n("d",0,"do","day");n("dd",0,0,function(t){return this.localeData().weekdaysMin(this,t)});n("ddd",0,0,function(t){return this.localeData().weekdaysShort(this,t)});n("dddd",0,0,function(t){return this.localeData().weekdays(this,t)});n("e",0,0,"weekday");n("E",0,0,"isoWeekday");t("day","d");t("weekday","e");t("isoWeekday","E");v("d",g);v("e",g);v("E",g);v("dd",Et);v("ddd",Et);v("dddd",Et);Lt(["dd","ddd","dddd"],function(t,e,i,n){var s=i._locale.weekdaysParse(t,n,i._strict);if(s!=null){e.d=s}else{h(i).invalidWeekday=t}});Lt(["d","e","E"],function(t,e,i,n){e[n]=l(t)});function cn(t,e){if(typeof t!=="string"){return t}if(!isNaN(t)){return parseInt(t,10)}t=e.weekdaysParse(t);if(typeof t==="number"){return t}return null}var hn="Sunday_Monday_Tuesday_Wednesday_Thursday_Friday_Saturday".split("_");function un(t,e){return s(this._weekdays)?this._weekdays[t.day()]:this._weekdays[this._weekdays.isFormat.test(e)?"format":"standalone"][t.day()]}var dn="Sun_Mon_Tue_Wed_Thu_Fri_Sat".split("_");function fn(t){return this._weekdaysShort[t.day()]}var pn="Su_Mo_Tu_We_Th_Fr_Sa".split("_");function mn(t){return this._weekdaysMin[t.day()]}function gn(t,e,i){var n,s,r;if(!this._weekdaysParse){this._weekdaysParse=[];this._minWeekdaysParse=[];this._shortWeekdaysParse=[];this._fullWeekdaysParse=[]}for(n=0;n<7;n++){s=D([2e3,1]).day(n);if(i&&!this._fullWeekdaysParse[n]){this._fullWeekdaysParse[n]=new RegExp("^"+this.weekdays(s,"").replace(".",".?")+"$","i");this._shortWeekdaysParse[n]=new RegExp("^"+this.weekdaysShort(s,"").replace(".",".?")+"$","i");this._minWeekdaysParse[n]=new RegExp("^"+this.weekdaysMin(s,"").replace(".",".?")+"$","i")}if(!this._weekdaysParse[n]){r="^"+this.weekdays(s,"")+"|^"+this.weekdaysShort(s,"")+"|^"+this.weekdaysMin(s,"");this._weekdaysParse[n]=new RegExp(r.replace(".",""),"i")}if(i&&e==="dddd"&&this._fullWeekdaysParse[n].test(t)){return n}else if(i&&e==="ddd"&&this._shortWeekdaysParse[n].test(t)){return n}else if(i&&e==="dd"&&this._minWeekdaysParse[n].test(t)){return n}else if(!i&&this._weekdaysParse[n].test(t)){return n}}}function vn(t){if(!this.isValid()){return t!=null?this:NaN}var e=this._isUTC?this._d.getUTCDay():this._d.getDay();if(t!=null){t=cn(t,this.localeData());return this.add(t-e,"d")}else{return e}}function yn(t){if(!this.isValid()){return t!=null?this:NaN}var e=(this.day()+7-this.localeData()._week.dow)%7;return t==null?e:this.add(t-e,"d")}function bn(t){if(!this.isValid()){return t!=null?this:NaN}return t==null?this.day()||7:this.day(this.day()%7?t:t-7)}n("DDD",["DDDD",3],"DDDo","dayOfYear");t("dayOfYear","DDD");v("DDD",kt);v("DDDD",yt);y(["DDD","DDDD"],function(t,e,i){i._dayOfYear=l(t)});function wn(t){var e=Math.round((this.clone().startOf("day")-this.clone().startOf("year"))/864e5)+1;return t==null?e:this.add(t-e,"d")}function xn(){return this.hours()%12||12}n("H",["HH",2],0,"hour");n("h",["hh",2],0,xn);n("hmm",0,0,function(){return""+xn.apply(this)+m(this.minutes(),2)});n("hmmss",0,0,function(){return""+xn.apply(this)+m(this.minutes(),2)+m(this.seconds(),2)});n("Hmm",0,0,function(){return""+this.hours()+m(this.minutes(),2)});n("Hmmss",0,0,function(){return""+this.hours()+m(this.minutes(),2)+m(this.seconds(),2)});function _n(t,e){n(t,0,0,function(){return this.localeData().meridiem(this.hours(),this.minutes(),e)})}_n("a",true);_n("A",false);t("hour","h");function kn(t,e){return e._meridiemParse}v("a",kn);v("A",kn);v("H",g);v("h",g);v("HH",g,e);v("hh",g,e);v("hmm",xt);v("hmmss",_t);v("Hmm",xt);v("Hmmss",_t);y(["H","HH"],_);y(["a","A"],function(t,e,i){i._isPm=i._locale.isPM(t);i._meridiem=t});y(["h","hh"],function(t,e,i){e[_]=l(t);h(i).bigHour=true});y("hmm",function(t,e,i){var n=t.length-2;e[_]=l(t.substr(0,n));e[k]=l(t.substr(n));h(i).bigHour=true});y("hmmss",function(t,e,i){var n=t.length-4;var s=t.length-2;e[_]=l(t.substr(0,n));e[k]=l(t.substr(n,2));e[C]=l(t.substr(s));h(i).bigHour=true});y("Hmm",function(t,e,i){var n=t.length-2;e[_]=l(t.substr(0,n));e[k]=l(t.substr(n))});y("Hmmss",function(t,e,i){var n=t.length-4;var s=t.length-2;e[_]=l(t.substr(0,n));e[k]=l(t.substr(n,2));e[C]=l(t.substr(s))});function Cn(t){return(t+"").toLowerCase().charAt(0)==="p"}var Sn=/[ap]\.?m?\.?/i;function Tn(t,e,i){if(t>11){return i?"pm":"PM"}else{return i?"am":"AM"}}var Dn=rt("Hours",true);n("m",["mm",2],0,"minute");t("minute","m");v("m",g);v("mm",g,e);y(["m","mm"],k);var Mn=rt("Minutes",false);n("s",["ss",2],0,"second");t("second","s");v("s",g);v("ss",g,e);y(["s","ss"],C);var Pn=rt("Seconds",false);n("S",0,0,function(){return~~(this.millisecond()/100)});n(0,["SS",2],0,function(){return~~(this.millisecond()/10)});n(0,["SSS",3],0,"millisecond");n(0,["SSSS",4],0,function(){return this.millisecond()*10});n(0,["SSSSS",5],0,function(){return this.millisecond()*100});n(0,["SSSSSS",6],0,function(){return this.millisecond()*1e3});n(0,["SSSSSSS",7],0,function(){return this.millisecond()*1e4});n(0,["SSSSSSSS",8],0,function(){return this.millisecond()*1e5});n(0,["SSSSSSSSS",9],0,function(){return this.millisecond()*1e6});t("millisecond","ms");v("S",kt,vt);v("SS",kt,e);v("SSS",kt,yt);var P;for(P="SSSS";P.length<=9;P+="S"){v(P,Tt)}function In(t,e){e[S]=l(("0."+t)*1e3)}for(P="S";P.length<=9;P+="S"){y(P,In)}var En=rt("Milliseconds",false);n("z",0,0,"zoneAbbr");n("zz",0,0,"zoneName");function Fn(){return this._isUTC?"UTC":""}function $n(){return this._isUTC?"Coordinated Universal Time":""}var I=G.prototype;I.add=fi;I.calendar=mi;I.clone=gi;I.diff=ki;I.endOf=Oi;I.format=Di;I.from=Mi;I.fromNow=Pi;I.to=Ii;I.toNow=Ei;I.get=lt;I.invalidAt=qi;I.isAfter=vi;I.isBefore=yi;I.isBetween=bi;I.isSame=wi;I.isSameOrAfter=xi;I.isSameOrBefore=_i;I.isValid=Wi;I.lang=$i;I.locale=Fi;I.localeData=Ai;I.max=Le;I.min=Oe;I.parsingFlags=Yi;I.set=lt;I.startOf=Hi;I.subtract=pi;I.toArray=Ni;I.toObject=Bi;I.toDate=zi;I.toISOString=Ti;I.toJSON=ji;I.toString=Si;I.unix=Ri;I.valueOf=Li;I.creationData=Ui;I.year=ye;I.isLeapYear=be;I.weekYear=Gi;I.isoWeekYear=Xi;I.quarter=I.quarters=tn;I.month=Xt;I.daysInMonth=Kt;I.week=I.weeks=on;I.isoWeek=I.isoWeeks=an;I.weeksInYear=Qi;I.isoWeeksInYear=Ki;I.date=ln;I.day=I.days=vn;I.weekday=yn;I.isoWeekday=bn;I.dayOfYear=wn;I.hour=I.hours=Dn;I.minute=I.minutes=Mn;I.second=I.seconds=Pn;I.millisecond=I.milliseconds=En;I.utcOffset=Xe;I.utc=Qe;I.local=Ze;I.parseZone=Je;I.hasAlignedHourOffset=ti;I.isDST=ei;I.isDSTShifted=ii;I.isLocal=ni;I.isUtcOffset=si;I.isUtc=ri;I.isUTC=ri;I.zoneAbbr=Fn;I.zoneName=$n;I.dates=T("dates accessor is deprecated. Use date instead.",ln);I.months=T("months accessor is deprecated. Use month instead",Xt);I.years=T("years accessor is deprecated. Use year instead",ye);I.zone=T("moment().zone is deprecated, use moment().utcOffset instead. https://github.com/moment/moment/issues/1779",Ke);var An=I;function Hn(t){return D(t*1e3)}function On(){return D.apply(null,arguments).parseZone()}var Ln={sameDay:"[Today at] LT",nextDay:"[Tomorrow at] LT",nextWeek:"dddd [at] LT",lastDay:"[Yesterday at] LT",lastWeek:"[Last] dddd [at] LT",sameElse:"L"};function Rn(t,e,i){var n=this._calendar[t];return p(n)?n.call(e,i):n}var zn={LTS:"h:mm:ss A",LT:"h:mm A",L:"MM/DD/YYYY",LL:"MMMM D, YYYY",LLL:"MMMM D, YYYY h:mm A",LLLL:"dddd, MMMM D, YYYY h:mm A"};function Nn(t){var e=this._longDateFormat[t],i=this._longDateFormat[t.toUpperCase()];if(e||!i){return e}this._longDateFormat[t]=i.replace(/MMMM|MM|DD|dddd/g,function(t){return t.slice(1)});return this._longDateFormat[t]}var Bn="Invalid date";function jn(){return this._invalidDate}var Wn="%d";var Yn=/\d{1,2}/;function qn(t){return this._ordinal.replace("%d",t)}function Un(t){return t}var Vn={future:"in %s",past:"%s ago",s:"a few seconds",m:"a minute",mm:"%d minutes",h:"an hour",hh:"%d hours",d:"a day",dd:"%d days",M:"a month",MM:"%d months",y:"a year",yy:"%d years"};function Gn(t,e,i,n){var s=this._relativeTime[i];return p(s)?s(t,e,i,n):s.replace(/%d/i,t)}function Xn(t,e){var i=this._relativeTime[t>0?"future":"past"];return p(i)?i(e):i.replace(/%s/i,e)}function Kn(t){var e,i;for(i in t){e=t[i];if(p(e)){this[i]=e}else{this["_"+i]=e}}this._ordinalParseLenient=new RegExp(this._ordinalParse.source+"|"+/\d{1,2}/.source)}var E=K.prototype;E._calendar=Ln;E.calendar=Rn;E._longDateFormat=zn;E.longDateFormat=Nn;E._invalidDate=Bn;E.invalidDate=jn;E._ordinal=Wn;E.ordinal=qn;E._ordinalParse=Yn;E.preparse=Un;E.postformat=Un;E._relativeTime=Vn;E.relativeTime=Gn;E.pastFuture=Xn;E.set=Kn;E.months=Yt;E._months=Wt;E.monthsShort=Ut;E._monthsShort=qt;E.monthsParse=Vt;E._monthsRegex=Jt;E.monthsRegex=te;E._monthsShortRegex=Qt;E.monthsShortRegex=Zt;E.week=en;E._week=nn;E.firstDayOfYear=rn;E.firstDayOfWeek=sn;E.weekdays=un;E._weekdays=hn;E.weekdaysMin=mn;E._weekdaysMin=pn;E.weekdaysShort=fn;E._weekdaysShort=dn;E.weekdaysParse=gn;E.isPM=Cn;E._meridiemParse=Sn;E.meridiem=Tn;function Qn(t,e,i,n){var s=u();var r=B().set(n,e);return s[i](r,t)}function Zn(t,e,i,n,s){if(typeof t==="number"){e=t;t=undefined}t=t||"";if(e!=null){return Qn(t,e,i,s)}var r;var o=[];for(r=0;r<n;r++){o[r]=Qn(t,r,i,s)}return o}function Jn(t,e){return Zn(t,e,"months",12,"month")}function ts(t,e){return Zn(t,e,"monthsShort",12,"month")}function es(t,e){return Zn(t,e,"weekdays",7,"day")}function is(t,e){return Zn(t,e,"weekdaysShort",7,"day")}function ns(t,e){return Zn(t,e,"weekdaysMin",7,"day")}et("en",{ordinalParse:/\d{1,2}(th|st|nd|rd)/,ordinal:function(t){var e=t%10,i=l(t%100/10)===1?"th":e===1?"st":e===2?"nd":e===3?"rd":"th";return t+i}});c.lang=T("moment.lang is deprecated. Use moment.locale instead.",et);c.langData=T("moment.langData is deprecated. Use moment.localeData instead.",u);var F=Math.abs;function ss(){var t=this._data;this._milliseconds=F(this._milliseconds);this._days=F(this._days);this._months=F(this._months);t.milliseconds=F(t.milliseconds);t.seconds=F(t.seconds);t.minutes=F(t.minutes);t.hours=F(t.hours);t.months=F(t.months);t.years=F(t.years);return this}function rs(t,e,i,n){var s=M(e,i);t._milliseconds+=n*s._milliseconds;t._days+=n*s._days;t._months+=n*s._months;return t._bubble()}function os(t,e){return rs(this,t,e,1)}function as(t,e){return rs(this,t,e,-1)}function ls(t){if(t<0){return Math.floor(t)}else{return Math.ceil(t)}}function cs(){var t=this._milliseconds;var e=this._days;var i=this._months;var n=this._data;var s,r,o,a,l;if(!(t>=0&&e>=0&&i>=0||t<=0&&e<=0&&i<=0)){t+=ls(us(i)+e)*864e5;e=0;i=0}n.milliseconds=t%1e3;s=f(t/1e3);n.seconds=s%60;r=f(s/60);n.minutes=r%60;o=f(r/60);n.hours=o%24;e+=f(o/24);l=f(hs(e));i+=l;e-=ls(us(l));a=f(i/12);i%=12;n.days=e;n.months=i;n.years=a;return this}function hs(t){return t*4800/146097}function us(t){return t*146097/4800}function ds(t){var e;var i;var n=this._milliseconds;t=d(t);if(t==="month"||t==="year"){e=this._days+n/864e5;i=this._months+hs(e);return t==="month"?i:i/12}else{e=this._days+Math.round(us(this._months));switch(t){case"week":return e/7+n/6048e5;case"day":return e+n/864e5;case"hour":return e*24+n/36e5;case"minute":return e*1440+n/6e4;case"second":return e*86400+n/1e3;case"millisecond":return Math.floor(e*864e5)+n;default:throw new Error("Unknown unit "+t)}}}function fs(){return this._milliseconds+this._days*864e5+this._months%12*2592e6+l(this._months/12)*31536e6}function $(t){return function(){return this.as(t)}}var ps=$("ms");var ms=$("s");var gs=$("m");var vs=$("h");var ys=$("d");var bs=$("w");var ws=$("M");var xs=$("y");function _s(t){t=d(t);return this[t+"s"]()}function ks(t){return function(){return this._data[t]}}var Cs=ks("milliseconds");var Ss=ks("seconds");var Ts=ks("minutes");var Ds=ks("hours");var Ms=ks("days");var Ps=ks("months");var Is=ks("years");function Es(){return f(this.days()/7)}var Fs=Math.round;var A={s:45,m:45,h:22,d:26,M:11};function $s(t,e,i,n,s){return s.relativeTime(e||1,!!i,t,n)}function As(t,e,i){var n=M(t).abs();var s=Fs(n.as("s"));var r=Fs(n.as("m"));var o=Fs(n.as("h"));var a=Fs(n.as("d"));var l=Fs(n.as("M"));var c=Fs(n.as("y"));var h=s<A.s&&["s",s]||r<=1&&["m"]||r<A.m&&["mm",r]||o<=1&&["h"]||o<A.h&&["hh",o]||a<=1&&["d"]||a<A.d&&["dd",a]||l<=1&&["M"]||l<A.M&&["MM",l]||c<=1&&["y"]||["yy",c];h[2]=e;h[3]=+t>0;h[4]=i;return $s.apply(null,h)}function Hs(t,e){if(A[t]===undefined){return false}if(e===undefined){return A[t]}A[t]=e;return true}function Os(t){var e=this.localeData();var i=As(this,!t,e);if(t){i=e.pastFuture(+this,i)}return e.postformat(i)}var Ls=Math.abs;function Rs(){var t=Ls(this._milliseconds)/1e3;var e=Ls(this._days);var i=Ls(this._months);var n,s,r;n=f(t/60);s=f(n/60);t%=60;n%=60;r=f(i/12);i%=12;var o=r;var a=i;var l=e;var c=s;var h=n;var u=t;var d=this.asSeconds();if(!d){return"P0D"}return(d<0?"-":"")+"P"+(o?o+"Y":"")+(a?a+"M":"")+(l?l+"D":"")+(c||h||u?"T":"")+(c?c+"H":"")+(h?h+"M":"")+(u?u+"S":"")}var H=je.prototype;H.abs=ss;H.add=os;H.subtract=as;H.as=ds;H.asMilliseconds=ps;H.asSeconds=ms;H.asMinutes=gs;H.asHours=vs;H.asDays=ys;H.asWeeks=bs;H.asMonths=ws;H.asYears=xs;H.valueOf=fs;H._bubble=cs;H.get=_s;H.milliseconds=Cs;H.seconds=Ss;H.minutes=Ts;H.hours=Ds;H.days=Ms;H.weeks=Es;H.months=Ps;H.years=Is;H.humanize=Os;H.toISOString=Rs;H.toString=Rs;H.toJSON=Rs;H.locale=Fi;H.localeData=Ai;H.toIsoString=T("toIsoString() is deprecated. Please use toISOString() instead (notice the capitals)",Rs);H.lang=$i;n("X",0,0,"unix");n("x",0,0,"valueOf");v("x",Dt);v("X",It);y("X",function(t,e,i){i._d=new Date(parseFloat(t,10)*1e3)});y("x",function(t,e,i){i._d=new Date(l(t))});c.version="2.11.2";L(D);c.fn=An;c.min=ze;c.max=Ne;c.now=Be;c.utc=B;c.unix=Hn;c.months=Jn;c.isDate=R;c.locale=et;c.invalid=Y;c.duration=M;c.isMoment=o;c.weekdays=es;c.parseZone=On;c.localeData=u;c.isDuration=We;c.monthsShort=ts;c.weekdaysMin=ns;c.defineLocale=it;c.weekdaysShort=is;c.normalizeUnits=d;c.relativeTimeThreshold=Hs;c.prototype=An;var zs=c;return zs});(function(t,e){typeof exports==="object"&&typeof module!=="undefined"&&typeof require==="function"?e(require("../moment")):typeof define==="function"&&define.amd?define(["moment"],e):e(t.moment)})(this,function(t){"use strict";function s(t,e){var i=t.split("_");return e%10===1&&e%100!==11?i[0]:e%10>=2&&e%10<=4&&(e%100<10||e%100>=20)?i[1]:i[2]}function e(t,e,i){var n={mm:e?"минута_минуты_минут":"минуту_минуты_минут",hh:"час_часа_часов",dd:"день_дня_дней",MM:"месяц_месяца_месяцев",yy:"год_года_лет"};if(i==="m"){return e?"минута":"минуту"}else{return t+" "+s(n[i],+t)}}var i=[/^янв/i,/^фев/i,/^мар/i,/^апр/i,/^ма[й|я]/i,/^июн/i,/^июл/i,/^авг/i,/^сен/i,/^окт/i,/^ноя/i,/^дек/i];var n=t.defineLocale("ru",{months:{format:"Января_Февраля_Марта_Апреля_Мая_Июня_Июля_Августа_Сентября_Октября_Ноября_Декабря".split("_"),standalone:"Январь_Февраль_Март_Апрель_Май_Июнь_Июль_Август_Сентябрь_Октябрь_Ноябрь_Декабрь".split("_")},monthsShort:{format:"янв_фев_мар_апр_мая_июня_июля_авг_сен_окт_ноя_дек".split("_"),standalone:"янв_фев_март_апр_май_июнь_июль_авг_сен_окт_ноя_дек".split("_")},weekdays:{standalone:"Воскресенье_Понедельник_Вторник_Среда_Четверг_Пятница_Суббота".split("_"),format:"Воскресенье_Понедельник_Вторник_Среду_Четверг_Пятницу_Субботу".split("_"),isFormat:/\[ ?[Вв] ?(?:прошлую|следующую|эту)? ?\] ?dddd/},weekdaysShort:"Вс_Пн_Вт_Ср_Чт_Пт_Сб".split("_"),weekdaysMin:"Вс_Пн_Вт_Ср_Чт_Пт_Сб".split("_"),monthsParse:i,longMonthsParse:i,shortMonthsParse:i,longDateFormat:{LT:"HH:mm",LTS:"HH:mm:ss",L:"DD.MM.YYYY",LL:"D MMMM YYYY г.",LLL:"D MMMM YYYY г., HH:mm",LLLL:"dddd, D MMMM YYYY г., HH:mm"},calendar:{sameDay:"[Сегодня в] LT",nextDay:"[Завтра в] LT",lastDay:"[Вчера в] LT",nextWeek:function(t){if(t.week()!==this.week()){switch(this.day()){case 0:return"[В следующее] dddd [в] LT";case 1:case 2:case 4:return"[В следующий] dddd [в] LT";case 3:case 5:case 6:return"[В следующую] dddd [в] LT"}}else{if(this.day()===2){return"[Во] dddd [в] LT"}else{return"[В] dddd [в] LT"}}},lastWeek:function(t){if(t.week()!==this.week()){switch(this.day()){case 0:return"[В прошлое] dddd [в] LT";case 1:case 2:case 4:return"[В прошлый] dddd [в] LT";case 3:case 5:case 6:return"[В прошлую] dddd [в] LT"}}else{if(this.day()===2){return"[Во] dddd [в] LT"}else{return"[В] dddd [в] LT"}}},sameElse:"L"},relativeTime:{future:"через %s",past:"%s назад",s:"несколько секунд",m:e,mm:e,h:"час",hh:e,d:"день",dd:e,M:"месяц",MM:e,y:"год",yy:e},meridiemParse:/ночи|утра|дня|вечера/i,isPM:function(t){return/^(дня|вечера)$/.test(t)},meridiem:function(t,e,i){if(t<4){return"ночи"}else if(t<12){return"утра"}else if(t<17){return"дня"}else{return"вечера"}},ordinalParse:/\d{1,2}-(й|го|я)/,ordinal:function(t,e){switch(e){case"M":case"d":case"DDD":return t+"-й";case"D":return t+"-го";case"w":case"W":return t+"-я";default:return t}},week:{dow:1,doy:7}});return n});(function(t){"use strict";if(typeof define==="function"&&define.amd){define(["jquery","moment"],t)}else if(typeof exports==="object"){module.exports=t(require("jquery"),require("moment"))}else{if(typeof jQuery==="undefined"){throw"bootstrap-datetimepicker requires jQuery to be loaded first"}if(typeof moment==="undefined"){throw"bootstrap-datetimepicker requires Moment.js to be loaded first"}t(jQuery,moment)}})(function(pt,mt){"use strict";if(!mt){throw new Error("bootstrap-datetimepicker requires Moment.js to be loaded first")}var o=function(r,h){var u={},c,d,a=true,i,o=false,f=false,l,n=0,s,p,m,e=[{clsName:"days",navFnc:"M",navStep:1},{clsName:"months",navFnc:"y",navStep:1},{clsName:"years",navFnc:"y",navStep:10},{clsName:"decades",navFnc:"y",navStep:100}],g=["days","months","years","decades"],O=["top","bottom","auto"],L=["left","right","auto"],R=["default","top","bottom"],z={up:38,38:"up",down:40,40:"down",left:37,37:"left",right:39,39:"right",tab:9,9:"tab",escape:27,27:"escape",enter:13,13:"enter",pageUp:33,33:"pageUp",pageDown:34,34:"pageDown",shift:16,16:"shift",control:17,17:"control",space:32,32:"space",t:84,84:"t",delete:46,46:"delete"},v={},y=function(){return mt.tz!==undefined&&h.timeZone!==undefined&&h.timeZone!==null&&h.timeZone!==""},b=function(t){var e;if(t===undefined||t===null){e=mt()}else if(mt.isDate(t)||mt.isMoment(t)){e=mt(t)}else if(y()){e=mt.tz(t,p,h.useStrict,h.timeZone)}else{e=mt(t,p,h.useStrict)}if(y()){e.tz(h.timeZone)}return e},w=function(t){if(typeof t!=="string"||t.length>1){throw new TypeError("isEnabled expects a single character string parameter")}switch(t){case"y":return s.indexOf("Y")!==-1;case"M":return s.indexOf("M")!==-1;case"d":return s.toLowerCase().indexOf("d")!==-1;case"h":case"H":return s.toLowerCase().indexOf("h")!==-1;case"m":return s.indexOf("m")!==-1;case"s":return s.indexOf("s")!==-1;default:return false}},x=function(){return w("h")||w("m")||w("s")},_=function(){return w("y")||w("M")||w("d")},N=function(){var t=pt("<thead>").append(pt("<tr>").append(pt("<th>").addClass("prev").attr("data-action","previous").append(pt("<span>").addClass(h.icons.previous))).append(pt("<th>").addClass("picker-switch").attr("data-action","pickerSwitch").attr("colspan",h.calendarWeeks?"6":"5")).append(pt("<th>").addClass("next").attr("data-action","next").append(pt("<span>").addClass(h.icons.next)))),e=pt("<tbody>").append(pt("<tr>").append(pt("<td>").attr("colspan",h.calendarWeeks?"8":"7")));return[pt("<div>").addClass("datepicker-days").append(pt("<table>").addClass("table-condensed").append(t).append(pt("<tbody>"))),pt("<div>").addClass("datepicker-months").append(pt("<table>").addClass("table-condensed").append(t.clone()).append(e.clone())),pt("<div>").addClass("datepicker-years").append(pt("<table>").addClass("table-condensed").append(t.clone()).append(e.clone())),pt("<div>").addClass("datepicker-decades").append(pt("<table>").addClass("table-condensed").append(t.clone()).append(e.clone()))]},B=function(){var t=pt("<tr>"),e=pt("<tr>"),i=pt("<tr>");if(w("h")){t.append(pt("<td>").append(pt("<a>").attr({href:"#",tabindex:"-1",title:h.tooltips.incrementHour}).addClass("btn").attr("data-action","incrementHours").append(pt("<span>").addClass(h.icons.up))));e.append(pt("<td>").append(pt("<span>").addClass("timepicker-hour").attr({"data-time-component":"hours",title:h.tooltips.pickHour}).attr("data-action","showHours")));i.append(pt("<td>").append(pt("<a>").attr({href:"#",tabindex:"-1",title:h.tooltips.decrementHour}).addClass("btn").attr("data-action","decrementHours").append(pt("<span>").addClass(h.icons.down))))}if(w("m")){if(w("h")){t.append(pt("<td>").addClass("separator"));e.append(pt("<td>").addClass("separator").html(":"));i.append(pt("<td>").addClass("separator"))}t.append(pt("<td>").append(pt("<a>").attr({href:"#",tabindex:"-1",title:h.tooltips.incrementMinute}).addClass("btn").attr("data-action","incrementMinutes").append(pt("<span>").addClass(h.icons.up))));e.append(pt("<td>").append(pt("<span>").addClass("timepicker-minute").attr({"data-time-component":"minutes",title:h.tooltips.pickMinute}).attr("data-action","showMinutes")));i.append(pt("<td>").append(pt("<a>").attr({href:"#",tabindex:"-1",title:h.tooltips.decrementMinute}).addClass("btn").attr("data-action","decrementMinutes").append(pt("<span>").addClass(h.icons.down))))}if(w("s")){if(w("m")){t.append(pt("<td>").addClass("separator"));e.append(pt("<td>").addClass("separator").html(":"));i.append(pt("<td>").addClass("separator"))}t.append(pt("<td>").append(pt("<a>").attr({href:"#",tabindex:"-1",title:h.tooltips.incrementSecond}).addClass("btn").attr("data-action","incrementSeconds").append(pt("<span>").addClass(h.icons.up))));e.append(pt("<td>").append(pt("<span>").addClass("timepicker-second").attr({"data-time-component":"seconds",title:h.tooltips.pickSecond}).attr("data-action","showSeconds")));i.append(pt("<td>").append(pt("<a>").attr({href:"#",tabindex:"-1",title:h.tooltips.decrementSecond}).addClass("btn").attr("data-action","decrementSeconds").append(pt("<span>").addClass(h.icons.down))))}if(!l){t.append(pt("<td>").addClass("separator"));e.append(pt("<td>").append(pt("<button>").addClass("btn btn-primary").attr({"data-action":"togglePeriod",tabindex:"-1",title:h.tooltips.togglePeriod})));i.append(pt("<td>").addClass("separator"))}return pt("<div>").addClass("timepicker-picker").append(pt("<table>").addClass("table-condensed").append([t,e,i]))},j=function(){var t=pt("<div>").addClass("timepicker-hours").append(pt("<table>").addClass("table-condensed")),e=pt("<div>").addClass("timepicker-minutes").append(pt("<table>").addClass("table-condensed")),i=pt("<div>").addClass("timepicker-seconds").append(pt("<table>").addClass("table-condensed")),n=[B()];if(w("h")){n.push(t)}if(w("m")){n.push(e)}if(w("s")){n.push(i)}return n},W=function(){var t=[];if(h.showTodayButton){t.push(pt("<td>").append(pt("<a>").attr({"data-action":"today",title:h.tooltips.today}).append(pt("<span>").addClass(h.icons.today))))}if(!h.sideBySide&&_()&&x()){t.push(pt("<td>").append(pt("<a>").attr({"data-action":"togglePicker",title:h.tooltips.selectTime}).append(pt("<span>").addClass(h.icons.time))))}if(h.showClear){t.push(pt("<td>").append(pt("<a>").attr({"data-action":"clear",title:h.tooltips.clear}).append(pt("<span>").addClass(h.icons.clear))))}if(h.showClose){t.push(pt("<td>").append(pt("<a>").attr({"data-action":"close",title:h.tooltips.close}).append(pt("<span>").addClass(h.icons.close))))}return pt("<table>").addClass("table-condensed").append(pt("<tbody>").append(pt("<tr>").append(t)))},Y=function(){var t=pt("<div>").addClass("bootstrap-datetimepicker-widget dropdown-menu"),e=pt("<div>").addClass("datepicker").append(N()),i=pt("<div>").addClass("timepicker").append(j()),n=pt("<ul>").addClass("list-unstyled"),s=pt("<li>").addClass("picker-switch"+(h.collapse?" accordion-toggle":"")).append(W());if(h.inline){t.removeClass("dropdown-menu")}if(l){t.addClass("usetwentyfour")}if(w("s")&&!l){t.addClass("wider")}if(h.sideBySide&&_()&&x()){t.addClass("timepicker-sbs");if(h.toolbarPlacement==="top"){t.append(s)}t.append(pt("<div>").addClass("row").append(e.addClass("col-md-6")).append(i.addClass("col-md-6")));if(h.toolbarPlacement==="bottom"){t.append(s)}return t}if(h.toolbarPlacement==="top"){n.append(s)}if(_()){n.append(pt("<li>").addClass(h.collapse&&x()?"collapse in":"").append(e))}if(h.toolbarPlacement==="default"){n.append(s)}if(x()){n.append(pt("<li>").addClass(h.collapse&&_()?"collapse":"").append(i))}if(h.toolbarPlacement==="bottom"){n.append(s)}return t.append(n)},q=function(){var i,n={};if(r.is("input")||h.inline){i=r.data()}else{i=r.find("input").data()}if(i.dateOptions&&i.dateOptions instanceof Object){n=pt.extend(true,n,i.dateOptions)}pt.each(h,function(t){var e="date"+t.charAt(0).toUpperCase()+t.slice(1);if(i[e]!==undefined){n[t]=i[e]}});return n},k=function(){var t=(o||r).position(),e=(o||r).offset(),i=h.widgetPositioning.vertical,n=h.widgetPositioning.horizontal,s;if(h.widgetParent){s=h.widgetParent.append(f)}else if(r.is("input")){s=r.after(f).parent()}else if(h.inline){s=r.append(f);return}else{s=r;r.children().first().after(f)}if(i==="auto"){if(e.top+f.height()*1.5>=pt(window).height()+pt(window).scrollTop()&&f.height()+r.outerHeight()<e.top){i="top"}else{i="bottom"}}if(n==="auto"){if(s.width()<e.left+f.outerWidth()/2&&e.left+f.outerWidth()>pt(window).width()){n="right"}else{n="left"}}if(i==="top"){f.addClass("top").removeClass("bottom")}else{f.addClass("bottom").removeClass("top")}if(n==="right"){f.addClass("pull-right")}else{f.removeClass("pull-right")}if(s.css("position")==="static"){s=s.parents().filter(function(){return pt(this).css("position")!=="static"}).first()}if(s.length===0){throw new Error("datetimepicker component should be placed within a non-static positioned container")}f.css({top:i==="top"?"auto":t.top+r.outerHeight(),bottom:i==="top"?s.outerHeight()-(s===r?0:t.top):"auto",left:n==="left"?s===r?0:t.left:"auto",right:n==="left"?"auto":s.outerWidth()-r.outerWidth()-(s===r?0:t.left)})},C=function(t){if(t.type==="dp.change"&&(t.date&&t.date.isSame(t.oldDate)||!t.date&&!t.oldDate)){return}r.trigger(t)},S=function(t){if(t==="y"){t="YYYY"}C({type:"dp.update",change:t,viewDate:d.clone()})},T=function(t){if(!f){return}if(t){m=Math.max(n,Math.min(3,m+t))}f.find(".datepicker > div").hide().filter(".datepicker-"+e[m].clsName).show()},U=function(){var t=pt("<tr>"),e=d.clone().startOf("w").startOf("d");if(h.calendarWeeks===true){t.append(pt("<th>").addClass("cw").text("#"))}while(e.isBefore(d.clone().endOf("w"))){t.append(pt("<th>").addClass("dow").text(e.format("dd")));e.add(1,"d")}f.find(".datepicker-days thead").append(t)},V=function(t){return h.disabledDates[t.format("YYYY-MM-DD")]===true},G=function(t){return h.enabledDates[t.format("YYYY-MM-DD")]===true},X=function(t){return h.disabledHours[t.format("H")]===true},K=function(t){return h.enabledHours[t.format("H")]===true},D=function(t,e){if(!t.isValid()){return false}if(h.disabledDates&&e==="d"&&V(t)){return false}if(h.enabledDates&&e==="d"&&!G(t)){return false}if(h.minDate&&t.isBefore(h.minDate,e)){return false}if(h.maxDate&&t.isAfter(h.maxDate,e)){return false}if(h.daysOfWeekDisabled&&e==="d"&&h.daysOfWeekDisabled.indexOf(t.day())!==-1){return false}if(h.disabledHours&&(e==="h"||e==="m"||e==="s")&&X(t)){return false}if(h.enabledHours&&(e==="h"||e==="m"||e==="s")&&!K(t)){return false}if(h.disabledTimeIntervals&&(e==="h"||e==="m"||e==="s")){var i=false;pt.each(h.disabledTimeIntervals,function(){if(t.isBetween(this[0],this[1])){i=true;return false}});if(i){return false}}return true},Q=function(){var t=[],e=d.clone().startOf("y").startOf("d");while(e.isSame(d,"y")){t.push(pt("<span>").attr("data-action","selectMonth").addClass("month").text(e.format("MMM")));e.add(1,"M")}f.find(".datepicker-months td").empty().append(t)},Z=function(){var t=f.find(".datepicker-months"),e=t.find("th"),i=t.find("tbody").find("span");e.eq(0).find("span").attr("title",h.tooltips.prevYear);e.eq(1).attr("title",h.tooltips.selectYear);e.eq(2).find("span").attr("title",h.tooltips.nextYear);t.find(".disabled").removeClass("disabled");if(!D(d.clone().subtract(1,"y"),"y")){e.eq(0).addClass("disabled")}e.eq(1).text(d.year());if(!D(d.clone().add(1,"y"),"y")){e.eq(2).addClass("disabled")}i.removeClass("active");if(c.isSame(d,"y")&&!a){i.eq(c.month()).addClass("active")}i.each(function(t){if(!D(d.clone().month(t),"M")){pt(this).addClass("disabled")}})},J=function(){var t=f.find(".datepicker-years"),e=t.find("th"),i=d.clone().subtract(5,"y"),n=d.clone().add(6,"y"),s="";e.eq(0).find("span").attr("title",h.tooltips.prevDecade);e.eq(1).attr("title",h.tooltips.selectDecade);e.eq(2).find("span").attr("title",h.tooltips.nextDecade);t.find(".disabled").removeClass("disabled");if(h.minDate&&h.minDate.isAfter(i,"y")){e.eq(0).addClass("disabled")}e.eq(1).text(i.year()+"-"+n.year());if(h.maxDate&&h.maxDate.isBefore(n,"y")){e.eq(2).addClass("disabled")}while(!i.isAfter(n,"y")){s+='<span data-action="selectYear" class="year'+(i.isSame(c,"y")&&!a?" active":"")+(!D(i,"y")?" disabled":"")+'">'+i.year()+"</span>";i.add(1,"y")}t.find("td").html(s)},tt=function(){var t=f.find(".datepicker-decades"),e=t.find("th"),i=mt({y:d.year()-d.year()%100-1}),n=i.clone().add(100,"y"),s=i.clone(),r=false,o=false,a,l="";e.eq(0).find("span").attr("title",h.tooltips.prevCentury);e.eq(2).find("span").attr("title",h.tooltips.nextCentury);t.find(".disabled").removeClass("disabled");if(i.isSame(mt({y:1900}))||h.minDate&&h.minDate.isAfter(i,"y")){e.eq(0).addClass("disabled")}e.eq(1).text(i.year()+"-"+n.year());if(i.isSame(mt({y:2e3}))||h.maxDate&&h.maxDate.isBefore(n,"y")){e.eq(2).addClass("disabled")}while(!i.isAfter(n,"y")){a=i.year()+12;r=h.minDate&&h.minDate.isAfter(i,"y")&&h.minDate.year()<=a;o=h.maxDate&&h.maxDate.isAfter(i,"y")&&h.maxDate.year()<=a;l+='<span data-action="selectDecade" class="decade'+(c.isAfter(i)&&c.year()<=a?" active":"")+(!D(i,"y")&&!r&&!o?" disabled":"")+'" data-selection="'+(i.year()+6)+'">'+(i.year()+1)+" - "+(i.year()+12)+"</span>";i.add(12,"y")}l+="<span></span><span></span><span></span>";t.find("td").html(l);e.eq(1).text(s.year()+1+"-"+i.year())},M=function(){var t=f.find(".datepicker-days"),e=t.find("th"),i,n=[],s,r=[],o;if(!_()){return}e.eq(0).find("span").attr("title",h.tooltips.prevMonth);e.eq(1).attr("title",h.tooltips.selectMonth);e.eq(2).find("span").attr("title",h.tooltips.nextMonth);t.find(".disabled").removeClass("disabled");e.eq(1).text(d.format(h.dayViewHeaderFormat));if(!D(d.clone().subtract(1,"M"),"M")){e.eq(0).addClass("disabled")}if(!D(d.clone().add(1,"M"),"M")){e.eq(2).addClass("disabled")}i=d.clone().startOf("M").startOf("w").startOf("d");for(o=0;o<42;o++){if(i.weekday()===0){s=pt("<tr>");if(h.calendarWeeks){s.append('<td class="cw">'+i.week()+"</td>")}n.push(s)}r=["day"];if(i.isBefore(d,"M")){r.push("old")}if(i.isAfter(d,"M")){r.push("new")}if(i.isSame(c,"d")&&!a){r.push("active")}if(!D(i,"d")){r.push("disabled")}if(i.isSame(b(),"d")){r.push("today")}if(i.day()===0||i.day()===6){r.push("weekend")}C({type:"dp.classify",date:i,classNames:r});s.append('<td data-action="selectDay" data-day="'+i.format("L")+'" class="'+r.join(" ")+'">'+i.date()+"</td>");i.add(1,"d")}t.find("tbody").empty().append(n);Z();J();tt()},et=function(){var t=f.find(".timepicker-hours table"),e=d.clone().startOf("d"),i=[],n=pt("<tr>");if(d.hour()>11&&!l){e.hour(12)}while(e.isSame(d,"d")&&(l||d.hour()<12&&e.hour()<12||d.hour()>11)){if(e.hour()%4===0){n=pt("<tr>");i.push(n)}n.append('<td data-action="selectHour" class="hour'+(!D(e,"h")?" disabled":"")+'">'+e.format(l?"HH":"hh")+"</td>");e.add(1,"h")}t.empty().append(i)},it=function(){var t=f.find(".timepicker-minutes table"),e=d.clone().startOf("h"),i=[],n=pt("<tr>"),s=h.stepping===1?5:h.stepping;while(d.isSame(e,"h")){if(e.minute()%(s*4)===0){n=pt("<tr>");i.push(n)}n.append('<td data-action="selectMinute" class="minute'+(!D(e,"m")?" disabled":"")+'">'+e.format("mm")+"</td>");e.add(s,"m")}t.empty().append(i)},nt=function(){var t=f.find(".timepicker-seconds table"),e=d.clone().startOf("m"),i=[],n=pt("<tr>");while(d.isSame(e,"m")){if(e.second()%20===0){n=pt("<tr>");i.push(n)}n.append('<td data-action="selectSecond" class="second'+(!D(e,"s")?" disabled":"")+'">'+e.format("ss")+"</td>");e.add(5,"s")}t.empty().append(i)},st=function(){var t,e,i=f.find(".timepicker span[data-time-component]");if(!l){t=f.find(".timepicker [data-action=togglePeriod]");e=c.clone().add(c.hours()>=12?-12:12,"h");t.text(c.format("A"));if(D(e,"h")){t.removeClass("disabled")}else{t.addClass("disabled")}}i.filter("[data-time-component=hours]").text(c.format(l?"HH":"hh"));i.filter("[data-time-component=minutes]").text(c.format("mm"));i.filter("[data-time-component=seconds]").text(c.format("ss"));et();it();nt()},P=function(){if(!f){return}M();st()},I=function(t){var e=a?null:c;if(!t){a=true;i.val("");r.data("date","");C({type:"dp.change",date:false,oldDate:e});P();return}t=t.clone().locale(h.locale);if(y()){t.tz(h.timeZone)}if(h.stepping!==1){t.minutes(Math.round(t.minutes()/h.stepping)*h.stepping).seconds(0);while(h.minDate&&t.isBefore(h.minDate)){t.add(h.stepping,"minutes")}}if(D(t)){c=t;d=c.clone();i.val(c.format(s));r.data("date",c.format(s));a=false;P();C({type:"dp.change",date:c.clone(),oldDate:e})}else{if(!h.keepInvalid){i.val(a?"":c.format(s))}else{C({type:"dp.change",date:t,oldDate:e})}C({type:"dp.error",date:t,oldDate:e})}},E=function(){var e=false;if(!f){return u}f.find(".collapse").each(function(){var t=pt(this).data("collapse");if(t&&t.transitioning){e=true;return false}return true});if(e){return u}if(o&&o.hasClass("btn")){o.toggleClass("active")}f.hide();pt(window).off("resize",k);f.off("click","[data-action]");f.off("mousedown",false);f.remove();f=false;C({type:"dp.hide",date:c.clone()});i.blur();d=c.clone();return u},rt=function(){I(null)},F=function(t){if(h.parseInputDate===undefined){if(!mt.isMoment(t)||t instanceof Date){t=b(t)}}else{t=h.parseInputDate(t)}return t},$={next:function(){var t=e[m].navFnc;d.add(e[m].navStep,t);M();S(t)},previous:function(){var t=e[m].navFnc;d.subtract(e[m].navStep,t);M();S(t)},pickerSwitch:function(){T(1)},selectMonth:function(t){var e=pt(t.target).closest("tbody").find("span").index(pt(t.target));d.month(e);if(m===n){I(c.clone().year(d.year()).month(d.month()));if(!h.inline){E()}}else{T(-1);M()}S("M")},selectYear:function(t){var e=parseInt(pt(t.target).text(),10)||0;d.year(e);if(m===n){I(c.clone().year(d.year()));if(!h.inline){E()}}else{T(-1);M()}S("YYYY")},selectDecade:function(t){var e=parseInt(pt(t.target).data("selection"),10)||0;d.year(e);if(m===n){I(c.clone().year(d.year()));if(!h.inline){E()}}else{T(-1);M()}S("YYYY")},selectDay:function(t){var e=d.clone();if(pt(t.target).is(".old")){e.subtract(1,"M")}if(pt(t.target).is(".new")){e.add(1,"M")}I(e.date(parseInt(pt(t.target).text(),10)));if(!x()&&!h.keepOpen&&!h.inline){E()}},incrementHours:function(){var t=c.clone().add(1,"h");if(D(t,"h")){I(t)}},incrementMinutes:function(){var t=c.clone().add(h.stepping,"m");if(D(t,"m")){I(t)}},incrementSeconds:function(){var t=c.clone().add(1,"s");if(D(t,"s")){I(t)}},decrementHours:function(){var t=c.clone().subtract(1,"h");if(D(t,"h")){I(t)}},decrementMinutes:function(){var t=c.clone().subtract(h.stepping,"m");if(D(t,"m")){I(t)}},decrementSeconds:function(){var t=c.clone().subtract(1,"s");if(D(t,"s")){I(t)}},togglePeriod:function(){I(c.clone().add(c.hours()>=12?-12:12,"h"))},togglePicker:function(t){var e=pt(t.target),i=e.closest("ul"),n=i.find(".in"),s=i.find(".collapse:not(.in)"),r;if(n&&n.length){r=n.data("collapse");if(r&&r.transitioning){return}if(n.collapse){n.collapse("hide");s.collapse("show")}else{n.removeClass("in");s.addClass("in")}if(e.is("span")){e.toggleClass(h.icons.time+" "+h.icons.date)}else{e.find("span").toggleClass(h.icons.time+" "+h.icons.date)}}},showPicker:function(){f.find(".timepicker > div:not(.timepicker-picker)").hide();f.find(".timepicker .timepicker-picker").show()},showHours:function(){f.find(".timepicker .timepicker-picker").hide();f.find(".timepicker .timepicker-hours").show()},showMinutes:function(){f.find(".timepicker .timepicker-picker").hide();f.find(".timepicker .timepicker-minutes").show()},showSeconds:function(){f.find(".timepicker .timepicker-picker").hide();f.find(".timepicker .timepicker-seconds").show()},selectHour:function(t){var e=parseInt(pt(t.target).text(),10);if(!l){if(c.hours()>=12){if(e!==12){e+=12}}else{if(e===12){e=0}}}I(c.clone().hours(e));$.showPicker.call(u)},selectMinute:function(t){I(c.clone().minutes(parseInt(pt(t.target).text(),10)));$.showPicker.call(u)},selectSecond:function(t){I(c.clone().seconds(parseInt(pt(t.target).text(),10)));$.showPicker.call(u)},clear:rt,today:function(){var t=b();if(D(t,"d")){I(t)}},close:E},ot=function(t){if(pt(t.currentTarget).is(".disabled")){return false}$[pt(t.currentTarget).data("action")].apply(u,arguments);return false},A=function(){var t,e={year:function(t){return t.month(0).date(1).hours(0).seconds(0).minutes(0)},month:function(t){return t.date(1).hours(0).seconds(0).minutes(0)},day:function(t){return t.hours(0).seconds(0).minutes(0)},hour:function(t){return t.seconds(0).minutes(0)},minute:function(t){return t.seconds(0)}};if(i.prop("disabled")||!h.ignoreReadonly&&i.prop("readonly")||f){return u}if(i.val()!==undefined&&i.val().trim().length!==0){I(F(i.val().trim()))}else if(a&&h.useCurrent&&(h.inline||i.is("input")&&i.val().trim().length===0)){t=b();if(typeof h.useCurrent==="string"){t=e[h.useCurrent](t)}I(t)}f=Y();U();Q();f.find(".timepicker-hours").hide();f.find(".timepicker-minutes").hide();f.find(".timepicker-seconds").hide();P();T();pt(window).on("resize",k);f.on("click","[data-action]",ot);f.on("mousedown",false);if(o&&o.hasClass("btn")){o.toggleClass("active")}k();f.show();if(h.focusOnShow&&!i.is(":focus")){i.focus()}C({type:"dp.show"});return u},t=function(){return f?E():A()},at=function(t){var e=null,i,n,s=[],r={},o=t.which,a,l,c="p";v[o]=c;for(i in v){if(v.hasOwnProperty(i)&&v[i]===c){s.push(i);if(parseInt(i,10)!==o){r[i]=true}}}for(i in h.keyBinds){if(h.keyBinds.hasOwnProperty(i)&&typeof h.keyBinds[i]==="function"){a=i.split(" ");if(a.length===s.length&&z[o]===a[a.length-1]){l=true;for(n=a.length-2;n>=0;n--){if(!(z[a[n]]in r)){l=false;break}}if(l){e=h.keyBinds[i];break}}}}if(e){e.call(u,f);t.stopPropagation();t.preventDefault()}},lt=function(t){v[t.which]="r";t.stopPropagation();t.preventDefault()},ct=function(t){var e=pt(t.target).val().trim(),i=e?F(e):null;I(i);t.stopImmediatePropagation();return false},ht=function(){i.on({change:ct,blur:h.debug?"":E,keydown:at,keyup:lt,focus:h.allowInputToggle?A:""});if(r.is("input")){i.on({focus:A})}else if(o){o.on("click",t);o.on("mousedown",false)}},ut=function(){i.off({change:ct,blur:blur,keydown:at,keyup:lt,focus:h.allowInputToggle?E:""});if(r.is("input")){i.off({focus:A})}else if(o){o.off("click",t);o.off("mousedown",false)}},dt=function(t){var e={};pt.each(t,function(){var t=F(this);if(t.isValid()){e[t.format("YYYY-MM-DD")]=true}});return Object.keys(e).length?e:false},ft=function(t){var e={};pt.each(t,function(){e[this]=true});return Object.keys(e).length?e:false},H=function(){var t=h.format||"L LT";s=t.replace(/(\[[^\[]*\])|(\\)?(LTS|LT|LL?L?L?|l{1,4})/g,function(t){var e=c.localeData().longDateFormat(t)||t;return e.replace(/(\[[^\[]*\])|(\\)?(LTS|LT|LL?L?L?|l{1,4})/g,function(t){return c.localeData().longDateFormat(t)||t})});p=h.extraFormats?h.extraFormats.slice():[];if(p.indexOf(t)<0&&p.indexOf(s)<0){p.push(s)}l=s.toLowerCase().indexOf("a")<1&&s.replace(/\[.*?\]/g,"").indexOf("h")<1;if(w("y")){n=2}if(w("M")){n=1}if(w("d")){n=0}m=Math.max(n,m);if(!a){I(c)}};u.destroy=function(){E();ut();r.removeData("DateTimePicker");r.removeData("date")};u.toggle=t;u.show=A;u.hide=E;u.disable=function(){E();if(o&&o.hasClass("btn")){o.addClass("disabled")}i.prop("disabled",true);return u};u.enable=function(){if(o&&o.hasClass("btn")){o.removeClass("disabled")}i.prop("disabled",false);return u};u.ignoreReadonly=function(t){if(arguments.length===0){return h.ignoreReadonly}if(typeof t!=="boolean"){throw new TypeError("ignoreReadonly () expects a boolean parameter")}h.ignoreReadonly=t;return u};u.options=function(t){if(arguments.length===0){return pt.extend(true,{},h)}if(!(t instanceof Object)){throw new TypeError("options() options parameter should be an object")}pt.extend(true,h,t);pt.each(h,function(t,e){if(u[t]!==undefined){u[t](e)}else{throw new TypeError("option "+t+" is not recognized!")}});return u};u.date=function(t){if(arguments.length===0){if(a){return null}return c.clone()}if(t!==null&&typeof t!=="string"&&!mt.isMoment(t)&&!(t instanceof Date)){throw new TypeError("date() parameter must be one of [null, string, moment or Date]")}I(t===null?null:F(t));return u};u.format=function(t){if(arguments.length===0){return h.format}if(typeof t!=="string"&&(typeof t!=="boolean"||t!==false)){throw new TypeError("format() expects a string or boolean:false parameter "+t)}h.format=t;if(s){H()}return u};u.timeZone=function(t){if(arguments.length===0){return h.timeZone}if(typeof t!=="string"){throw new TypeError("newZone() expects a string parameter")}h.timeZone=t;return u};u.dayViewHeaderFormat=function(t){if(arguments.length===0){return h.dayViewHeaderFormat}if(typeof t!=="string"){throw new TypeError("dayViewHeaderFormat() expects a string parameter")}h.dayViewHeaderFormat=t;return u};u.extraFormats=function(t){if(arguments.length===0){return h.extraFormats}if(t!==false&&!(t instanceof Array)){throw new TypeError("extraFormats() expects an array or false parameter")}h.extraFormats=t;if(p){H()}return u};u.disabledDates=function(t){if(arguments.length===0){return h.disabledDates?pt.extend({},h.disabledDates):h.disabledDates}if(!t){h.disabledDates=false;P();return u}if(!(t instanceof Array)){throw new TypeError("disabledDates() expects an array parameter")}h.disabledDates=dt(t);h.enabledDates=false;P();return u};u.enabledDates=function(t){if(arguments.length===0){return h.enabledDates?pt.extend({},h.enabledDates):h.enabledDates}if(!t){h.enabledDates=false;P();return u}if(!(t instanceof Array)){throw new TypeError("enabledDates() expects an array parameter")}h.enabledDates=dt(t);h.disabledDates=false;P();return u};u.daysOfWeekDisabled=function(t){if(arguments.length===0){return h.daysOfWeekDisabled.splice(0)}if(typeof t==="boolean"&&!t){h.daysOfWeekDisabled=false;P();return u}if(!(t instanceof Array)){throw new TypeError("daysOfWeekDisabled() expects an array parameter")}h.daysOfWeekDisabled=t.reduce(function(t,e){e=parseInt(e,10);if(e>6||e<0||isNaN(e)){return t}if(t.indexOf(e)===-1){t.push(e)}return t},[]).sort();if(h.useCurrent&&!h.keepInvalid){var e=0;while(!D(c,"d")){c.add(1,"d");if(e===31){throw"Tried 31 times to find a valid date"}e++}I(c)}P();return u};u.maxDate=function(t){if(arguments.length===0){return h.maxDate?h.maxDate.clone():h.maxDate}if(typeof t==="boolean"&&t===false){h.maxDate=false;P();return u}if(typeof t==="string"){if(t==="now"||t==="moment"){t=b()}}var e=F(t);if(!e.isValid()){throw new TypeError("maxDate() Could not parse date parameter: "+t)}if(h.minDate&&e.isBefore(h.minDate)){throw new TypeError("maxDate() date parameter is before options.minDate: "+e.format(s))}h.maxDate=e;if(h.useCurrent&&!h.keepInvalid&&c.isAfter(t)){I(h.maxDate)}if(d.isAfter(e)){d=e.clone().subtract(h.stepping,"m")}P();return u};u.minDate=function(t){if(arguments.length===0){return h.minDate?h.minDate.clone():h.minDate}if(typeof t==="boolean"&&t===false){h.minDate=false;P();return u}if(typeof t==="string"){if(t==="now"||t==="moment"){t=b()}}var e=F(t);if(!e.isValid()){throw new TypeError("minDate() Could not parse date parameter: "+t)}if(h.maxDate&&e.isAfter(h.maxDate)){throw new TypeError("minDate() date parameter is after options.maxDate: "+e.format(s))}h.minDate=e;if(h.useCurrent&&!h.keepInvalid&&c.isBefore(t)){I(h.minDate)}if(d.isBefore(e)){d=e.clone().add(h.stepping,"m")}P();return u};u.defaultDate=function(t){if(arguments.length===0){return h.defaultDate?h.defaultDate.clone():h.defaultDate}if(!t){h.defaultDate=false;return u}if(typeof t==="string"){if(t==="now"||t==="moment"){t=b()}else{t=b(t)}}var e=F(t);if(!e.isValid()){throw new TypeError("defaultDate() Could not parse date parameter: "+t)}if(!D(e)){throw new TypeError("defaultDate() date passed is invalid according to component setup validations")}h.defaultDate=e;if(h.defaultDate&&h.inline||i.val().trim()===""){I(h.defaultDate)}return u};u.locale=function(t){if(arguments.length===0){return h.locale}if(!mt.localeData(t)){throw new TypeError("locale() locale "+t+" is not loaded from moment locales!")}h.locale=t;c.locale(h.locale);d.locale(h.locale);if(s){H()}if(f){E();A()}return u};u.stepping=function(t){if(arguments.length===0){return h.stepping}t=parseInt(t,10);if(isNaN(t)||t<1){t=1}h.stepping=t;return u};u.useCurrent=function(t){var e=["year","month","day","hour","minute"];if(arguments.length===0){return h.useCurrent}if(typeof t!=="boolean"&&typeof t!=="string"){throw new TypeError("useCurrent() expects a boolean or string parameter")}if(typeof t==="string"&&e.indexOf(t.toLowerCase())===-1){throw new TypeError("useCurrent() expects a string parameter of "+e.join(", "))}h.useCurrent=t;return u};u.collapse=function(t){if(arguments.length===0){return h.collapse}if(typeof t!=="boolean"){throw new TypeError("collapse() expects a boolean parameter")}if(h.collapse===t){return u}h.collapse=t;if(f){E();A()}return u};u.icons=function(t){if(arguments.length===0){return pt.extend({},h.icons)}if(!(t instanceof Object)){throw new TypeError("icons() expects parameter to be an Object")}pt.extend(h.icons,t);if(f){E();A()}return u};u.tooltips=function(t){if(arguments.length===0){return pt.extend({},h.tooltips)}if(!(t instanceof Object)){throw new TypeError("tooltips() expects parameter to be an Object")}pt.extend(h.tooltips,t);if(f){E();A()}return u};u.useStrict=function(t){if(arguments.length===0){return h.useStrict}if(typeof t!=="boolean"){throw new TypeError("useStrict() expects a boolean parameter")}h.useStrict=t;return u};u.sideBySide=function(t){if(arguments.length===0){return h.sideBySide}if(typeof t!=="boolean"){throw new TypeError("sideBySide() expects a boolean parameter")}h.sideBySide=t;if(f){E();A()}return u};u.viewMode=function(t){if(arguments.length===0){return h.viewMode}if(typeof t!=="string"){throw new TypeError("viewMode() expects a string parameter")}if(g.indexOf(t)===-1){throw new TypeError("viewMode() parameter must be one of ("+g.join(", ")+") value")}h.viewMode=t;m=Math.max(g.indexOf(t),n);T();return u};u.toolbarPlacement=function(t){if(arguments.length===0){return h.toolbarPlacement}if(typeof t!=="string"){throw new TypeError("toolbarPlacement() expects a string parameter")}if(R.indexOf(t)===-1){throw new TypeError("toolbarPlacement() parameter must be one of ("+R.join(", ")+") value")}h.toolbarPlacement=t;if(f){E();A()}return u};u.widgetPositioning=function(t){if(arguments.length===0){return pt.extend({},h.widgetPositioning)}if({}.toString.call(t)!=="[object Object]"){throw new TypeError("widgetPositioning() expects an object variable")}if(t.horizontal){if(typeof t.horizontal!=="string"){throw new TypeError("widgetPositioning() horizontal variable must be a string")}t.horizontal=t.horizontal.toLowerCase();if(L.indexOf(t.horizontal)===-1){throw new TypeError("widgetPositioning() expects horizontal parameter to be one of ("+L.join(", ")+")")}h.widgetPositioning.horizontal=t.horizontal}if(t.vertical){if(typeof t.vertical!=="string"){throw new TypeError("widgetPositioning() vertical variable must be a string")}t.vertical=t.vertical.toLowerCase();if(O.indexOf(t.vertical)===-1){throw new TypeError("widgetPositioning() expects vertical parameter to be one of ("+O.join(", ")+")")}h.widgetPositioning.vertical=t.vertical}P();return u};u.calendarWeeks=function(t){if(arguments.length===0){return h.calendarWeeks}if(typeof t!=="boolean"){throw new TypeError("calendarWeeks() expects parameter to be a boolean value")}h.calendarWeeks=t;P();return u};u.showTodayButton=function(t){if(arguments.length===0){return h.showTodayButton}if(typeof t!=="boolean"){throw new TypeError("showTodayButton() expects a boolean parameter")}h.showTodayButton=t;if(f){E();A()}return u};u.showClear=function(t){if(arguments.length===0){return h.showClear}if(typeof t!=="boolean"){throw new TypeError("showClear() expects a boolean parameter")}h.showClear=t;if(f){E();A()}return u};u.widgetParent=function(t){if(arguments.length===0){return h.widgetParent}if(typeof t==="string"){t=pt(t)}if(t!==null&&(typeof t!=="string"&&!(t instanceof pt))){throw new TypeError("widgetParent() expects a string or a jQuery object parameter")}h.widgetParent=t;if(f){E();A()}return u};u.keepOpen=function(t){if(arguments.length===0){return h.keepOpen}if(typeof t!=="boolean"){throw new TypeError("keepOpen() expects a boolean parameter")}h.keepOpen=t;return u};u.focusOnShow=function(t){if(arguments.length===0){return h.focusOnShow}if(typeof t!=="boolean"){throw new TypeError("focusOnShow() expects a boolean parameter")}h.focusOnShow=t;return u};u.inline=function(t){if(arguments.length===0){return h.inline}if(typeof t!=="boolean"){throw new TypeError("inline() expects a boolean parameter")}h.inline=t;return u};u.clear=function(){rt();return u};u.keyBinds=function(t){if(arguments.length===0){return h.keyBinds}h.keyBinds=t;return u};u.getMoment=function(t){return b(t)};u.debug=function(t){if(typeof t!=="boolean"){throw new TypeError("debug() expects a boolean parameter")}h.debug=t;return u};u.allowInputToggle=function(t){if(arguments.length===0){return h.allowInputToggle}if(typeof t!=="boolean"){throw new TypeError("allowInputToggle() expects a boolean parameter")}h.allowInputToggle=t;return u};u.showClose=function(t){if(arguments.length===0){return h.showClose}if(typeof t!=="boolean"){throw new TypeError("showClose() expects a boolean parameter")}h.showClose=t;return u};u.keepInvalid=function(t){if(arguments.length===0){return h.keepInvalid}if(typeof t!=="boolean"){throw new TypeError("keepInvalid() expects a boolean parameter")}h.keepInvalid=t;return u};u.datepickerInput=function(t){if(arguments.length===0){return h.datepickerInput}if(typeof t!=="string"){throw new TypeError("datepickerInput() expects a string parameter")}h.datepickerInput=t;return u};u.parseInputDate=function(t){if(arguments.length===0){return h.parseInputDate}if(typeof t!=="function"){throw new TypeError("parseInputDate() sholud be as function")}h.parseInputDate=t;return u};u.disabledTimeIntervals=function(t){if(arguments.length===0){return h.disabledTimeIntervals?pt.extend({},h.disabledTimeIntervals):h.disabledTimeIntervals}if(!t){h.disabledTimeIntervals=false;P();return u}if(!(t instanceof Array)){throw new TypeError("disabledTimeIntervals() expects an array parameter")}h.disabledTimeIntervals=t;P();return u};u.disabledHours=function(t){if(arguments.length===0){return h.disabledHours?pt.extend({},h.disabledHours):h.disabledHours}if(!t){h.disabledHours=false;P();return u}if(!(t instanceof Array)){throw new TypeError("disabledHours() expects an array parameter")}h.disabledHours=ft(t);h.enabledHours=false;if(h.useCurrent&&!h.keepInvalid){var e=0;while(!D(c,"h")){c.add(1,"h");if(e===24){throw"Tried 24 times to find a valid date"}e++}I(c)}P();return u};u.enabledHours=function(t){if(arguments.length===0){return h.enabledHours?pt.extend({},h.enabledHours):h.enabledHours}if(!t){h.enabledHours=false;P();return u}if(!(t instanceof Array)){throw new TypeError("enabledHours() expects an array parameter")}h.enabledHours=ft(t);h.disabledHours=false;if(h.useCurrent&&!h.keepInvalid){var e=0;while(!D(c,"h")){c.add(1,"h");if(e===24){throw"Tried 24 times to find a valid date"}e++}I(c)}P();return u};u.viewDate=function(t){if(arguments.length===0){return d.clone()}if(!t){d=c.clone();return u}if(typeof t!=="string"&&!mt.isMoment(t)&&!(t instanceof Date)){throw new TypeError("viewDate() parameter must be one of [string, moment or Date]")}d=F(t);S();return u};if(r.is("input")){i=r}else{i=r.find(h.datepickerInput);if(i.length===0){i=r.find("input")}else if(!i.is("input")){throw new Error('CSS class "'+h.datepickerInput+'" cannot be applied to non input element')}}if(r.hasClass("input-group")){if(r.find(".datepickerbutton").length===0){o=r.find(".input-group-addon")}else{o=r.find(".datepickerbutton")}}if(!h.inline&&!i.is("input")){throw new Error("Could not initialize DateTimePicker without an input element")}c=b();d=c.clone();pt.extend(true,h,q());u.options(h);H();ht();if(i.prop("disabled")){u.disable()}if(i.is("input")&&i.val().trim().length!==0){I(F(i.val().trim()))}else if(h.defaultDate&&i.attr("placeholder")===undefined){I(h.defaultDate)}if(h.inline){A()}return u};pt.fn.datetimepicker=function(i){i=i||{};var n=Array.prototype.slice.call(arguments,1),s=true,t=["destroy","hide","show","toggle"],r;if(typeof i==="object"){return this.each(function(){var t=pt(this),e;if(!t.data("DateTimePicker")){e=pt.extend(true,{},pt.fn.datetimepicker.defaults,i);t.data("DateTimePicker",o(t,e))}})}else if(typeof i==="string"){this.each(function(){var t=pt(this),e=t.data("DateTimePicker");if(!e){throw new Error('bootstrap-datetimepicker("'+i+'") method was called on an element that is not using DateTimePicker')}r=e[i].apply(e,n);s=r===e});if(s||pt.inArray(i,t)>-1){return this}return r}throw new TypeError("Invalid arguments for DateTimePicker: "+i)};pt.fn.datetimepicker.defaults={timeZone:"",format:false,dayViewHeaderFormat:"MMMM YYYY",extraFormats:false,stepping:1,minDate:false,maxDate:false,useCurrent:true,collapse:true,locale:mt.locale(),defaultDate:false,disabledDates:false,enabledDates:false,icons:{time:"glyphicon glyphicon-time",date:"glyphicon glyphicon-calendar",up:"glyphicon glyphicon-chevron-up",down:"glyphicon glyphicon-chevron-down",previous:"glyphicon glyphicon-chevron-left",next:"glyphicon glyphicon-chevron-right",today:"glyphicon glyphicon-screenshot",clear:"glyphicon glyphicon-trash",close:"glyphicon glyphicon-remove"},tooltips:{today:"Go to today",clear:"Clear selection",close:"Close the picker",selectMonth:"Select Month",prevMonth:"Previous Month",nextMonth:"Next Month",selectYear:"Select Year",prevYear:"Previous Year",nextYear:"Next Year",selectDecade:"Select Decade",prevDecade:"Previous Decade",nextDecade:"Next Decade",prevCentury:"Previous Century",nextCentury:"Next Century",pickHour:"Pick Hour",incrementHour:"Increment Hour",decrementHour:"Decrement Hour",pickMinute:"Pick Minute",incrementMinute:"Increment Minute",decrementMinute:"Decrement Minute",pickSecond:"Pick Second",incrementSecond:"Increment Second",decrementSecond:"Decrement Second",togglePeriod:"Toggle Period",selectTime:"Select Time"},useStrict:false,sideBySide:false,daysOfWeekDisabled:false,calendarWeeks:false,viewMode:"days",toolbarPlacement:"default",showTodayButton:false,showClear:false,showClose:false,widgetPositioning:{horizontal:"auto",vertical:"auto"},widgetParent:null,ignoreReadonly:false,keepOpen:false,focusOnShow:true,inline:false,keepInvalid:false,datepickerInput:".datepickerinput",keyBinds:{up:function(t){if(!t){return}var e=this.date()||this.getMoment();if(t.find(".datepicker").is(":visible")){this.date(e.clone().subtract(7,"d"))}else{this.date(e.clone().add(this.stepping(),"m"))}},down:function(t){if(!t){this.show();return}var e=this.date()||this.getMoment();if(t.find(".datepicker").is(":visible")){this.date(e.clone().add(7,"d"))}else{this.date(e.clone().subtract(this.stepping(),"m"))}},"control up":function(t){if(!t){return}var e=this.date()||this.getMoment();if(t.find(".datepicker").is(":visible")){this.date(e.clone().subtract(1,"y"))}else{this.date(e.clone().add(1,"h"))}},"control down":function(t){if(!t){return}var e=this.date()||this.getMoment();if(t.find(".datepicker").is(":visible")){this.date(e.clone().add(1,"y"))}else{this.date(e.clone().subtract(1,"h"))}},left:function(t){if(!t){return}var e=this.date()||this.getMoment();if(t.find(".datepicker").is(":visible")){this.date(e.clone().subtract(1,"d"))}},right:function(t){if(!t){return}var e=this.date()||this.getMoment();if(t.find(".datepicker").is(":visible")){this.date(e.clone().add(1,"d"))}},pageUp:function(t){if(!t){return}var e=this.date()||this.getMoment();if(t.find(".datepicker").is(":visible")){this.date(e.clone().subtract(1,"M"))}},pageDown:function(t){if(!t){return}var e=this.date()||this.getMoment();if(t.find(".datepicker").is(":visible")){this.date(e.clone().add(1,"M"))}},enter:function(){this.hide()},escape:function(){this.hide()},"control space":function(t){if(!t){return}if(t.find(".timepicker").is(":visible")){t.find('.btn[data-action="togglePeriod"]').click()}},t:function(){this.date(this.getMoment())},delete:function(){this.clear()}},debug:false,allowInputToggle:false,disabledTimeIntervals:false,disabledHours:false,enabledHours:false,viewDate:false};return pt.fn.datetimepicker});if("undefined"==typeof jQuery)throw new Error("Jasny Bootstrap's JavaScript requires jQuery");+function(s){"use strict";function t(){var t=document.createElement("bootstrap"),e={WebkitTransition:"webkitTransitionEnd",MozTransition:"transitionend",OTransition:"oTransitionEnd otransitionend",transition:"transitionend"};for(var i in e)if(void 0!==t.style[i])return{end:e[i]};return!1}void 0===s.support.transition&&(s.fn.emulateTransitionEnd=function(t){var e=!1,i=this;s(this).one(s.support.transition.end,function(){e=!0});var n=function(){e||s(i).trigger(s.support.transition.end)};return setTimeout(n,t),this},s(function(){s.support.transition=t()}))}(window.jQuery),+function(a){"use strict";var s=function(t,e){this.$element=a(t),this.options=a.extend({},s.DEFAULTS,e),this.state=null,this.placement=null,this.options.recalc&&(this.calcClone(),a(window).on("resize",a.proxy(this.recalc,this))),this.options.autohide&&a(document).on("click",a.proxy(this.autohide,this)),this.options.toggle&&this.toggle(),this.options.disablescrolling&&(this.options.disableScrolling=this.options.disablescrolling,delete this.options.disablescrolling)};s.DEFAULTS={toggle:!0,placement:"auto",autohide:!0,recalc:!0,disableScrolling:!0},s.prototype.offset=function(){switch(this.placement){case"left":case"right":return this.$element.outerWidth();case"top":case"bottom":return this.$element.outerHeight()}},s.prototype.calcPlacement=function(){function t(t,e){if("auto"===s.css(e))return t;if("auto"===s.css(t))return e;var i=parseInt(s.css(t),10),n=parseInt(s.css(e),10);return i>n?e:t}if("auto"!==this.options.placement)return void(this.placement=this.options.placement);this.$element.hasClass("in")||this.$element.css("visiblity","hidden !important").addClass("in");var e=a(window).width()/this.$element.width(),i=a(window).height()/this.$element.height(),s=this.$element;this.placement=e>=i?t("left","right"):t("top","bottom"),"hidden !important"===this.$element.css("visibility")&&this.$element.removeClass("in").css("visiblity","")},s.prototype.opposite=function(t){switch(t){case"top":return"bottom";case"left":return"right";case"bottom":return"top";case"right":return"left"}},s.prototype.getCanvasElements=function(){var t=this.options.canvas?a(this.options.canvas):this.$element,e=t.find("*").filter(function(){return"fixed"===a(this).css("position")}).not(this.options.exclude);return t.add(e)},s.prototype.slide=function(t,e,i){if(!a.support.transition){var n={};return n[this.placement]="+="+e,t.animate(n,350,i)}var s=this.placement,r=this.opposite(s);t.each(function(){"auto"!==a(this).css(s)&&a(this).css(s,(parseInt(a(this).css(s),10)||0)+e),"auto"!==a(this).css(r)&&a(this).css(r,(parseInt(a(this).css(r),10)||0)-e)}),this.$element.one(a.support.transition.end,i).emulateTransitionEnd(350)},s.prototype.disableScrolling=function(){var t=a("body").width(),e="padding-"+this.opposite(this.placement);if(void 0===a("body").data("offcanvas-style")&&a("body").data("offcanvas-style",a("body").attr("style")),a("body").css("overflow","hidden"),a("body").width()>t){var i=parseInt(a("body").css(e),10)+a("body").width()-t;setTimeout(function(){a("body").css(e,i)},1)}},s.prototype.show=function(){if(!this.state){var t=a.Event("show.bs.offcanvas");if(this.$element.trigger(t),!t.isDefaultPrevented()){this.state="slide-in",this.calcPlacement();var e=this.getCanvasElements(),i=this.placement,n=this.opposite(i),s=this.offset();-1!==e.index(this.$element)&&(a(this.$element).data("offcanvas-style",a(this.$element).attr("style")||""),this.$element.css(i,-1*s),this.$element.css(i)),e.addClass("canvas-sliding").each(function(){void 0===a(this).data("offcanvas-style")&&a(this).data("offcanvas-style",a(this).attr("style")||""),"static"===a(this).css("position")&&a(this).css("position","relative"),"auto"!==a(this).css(i)&&"0px"!==a(this).css(i)||"auto"!==a(this).css(n)&&"0px"!==a(this).css(n)||a(this).css(i,0)}),this.options.disableScrolling&&this.disableScrolling();var r=function(){"slide-in"==this.state&&(this.state="slid",e.removeClass("canvas-sliding").addClass("canvas-slid"),this.$element.trigger("shown.bs.offcanvas"))};setTimeout(a.proxy(function(){this.$element.addClass("in"),this.slide(e,s,a.proxy(r,this))},this),1)}}},s.prototype.hide=function(){if("slid"===this.state){var t=a.Event("hide.bs.offcanvas");if(this.$element.trigger(t),!t.isDefaultPrevented()){this.state="slide-out";var e=a(".canvas-slid"),i=(this.placement,-1*this.offset()),n=function(){"slide-out"==this.state&&(this.state=null,this.placement=null,this.$element.removeClass("in"),e.removeClass("canvas-sliding"),e.add(this.$element).add("body").each(function(){a(this).attr("style",a(this).data("offcanvas-style")).removeData("offcanvas-style")}),this.$element.trigger("hidden.bs.offcanvas"))};e.removeClass("canvas-slid").addClass("canvas-sliding"),setTimeout(a.proxy(function(){this.slide(e,i,a.proxy(n,this))},this),1)}}},s.prototype.toggle=function(){"slide-in"!==this.state&&"slide-out"!==this.state&&this["slid"===this.state?"hide":"show"]()},s.prototype.calcClone=function(){this.$calcClone=this.$element.clone().html("").addClass("offcanvas-clone").removeClass("in").appendTo(a("body"))},s.prototype.recalc=function(){if("none"!==this.$calcClone.css("display")&&("slid"===this.state||"slide-in"===this.state)){this.state=null,this.placement=null;var t=this.getCanvasElements();this.$element.removeClass("in"),t.removeClass("canvas-slid"),t.add(this.$element).add("body").each(function(){a(this).attr("style",a(this).data("offcanvas-style")).removeData("offcanvas-style")})}},s.prototype.autohide=function(t){0===a(t.target).closest(this.$element).length&&this.hide()};var t=a.fn.offcanvas;a.fn.offcanvas=function(n){return this.each(function(){var t=a(this),e=t.data("bs.offcanvas"),i=a.extend({},s.DEFAULTS,t.data(),"object"==typeof n&&n);e||t.data("bs.offcanvas",e=new s(this,i)),"string"==typeof n&&e[n]()})},a.fn.offcanvas.Constructor=s,a.fn.offcanvas.noConflict=function(){return a.fn.offcanvas=t,this},a(document).on("click.bs.offcanvas.data-api","[data-toggle=offcanvas]",function(t){var e,i=a(this),n=i.attr("data-target")||t.preventDefault()||(e=i.attr("href"))&&e.replace(/.*(?=#[^\s]+$)/,""),s=a(n),r=s.data("bs.offcanvas"),o=r?"toggle":i.data();t.stopPropagation(),r?r.toggle():s.offcanvas(o)})}(window.jQuery),+function(n){"use strict";var s=function(t,e){this.$element=n(t),this.options=n.extend({},s.DEFAULTS,e),this.$element.on("click.bs.rowlink","td:not(.rowlink-skip)",n.proxy(this.click,this))};s.DEFAULTS={target:"a"},s.prototype.click=function(t){var e=n(t.currentTarget).closest("tr").find(this.options.target)[0];if(n(t.target)[0]!==e)if(t.preventDefault(),e.click)e.click();else if(document.createEvent){var i=document.createEvent("MouseEvents");i.initMouseEvent("click",!0,!0,window,0,0,0,0,0,!1,!1,!1,!1,0,null),e.dispatchEvent(i)}};var t=n.fn.rowlink;n.fn.rowlink=function(i){return this.each(function(){var t=n(this),e=t.data("rowlink");e||t.data("rowlink",e=new s(this,i))})},n.fn.rowlink.Constructor=s,n.fn.rowlink.noConflict=function(){return n.fn.rowlink=t,this},n(document).on("click.bs.rowlink.data-api",'[data-link="row"]',function(t){if(0===n(t.target).closest(".rowlink-skip").length){var e=n(this);e.data("rowlink")||(e.rowlink(e.data()),n(t.target).trigger("click.bs.rowlink"))}})}(window.jQuery),+function(s){"use strict";var r=void 0!==window.orientation,i=navigator.userAgent.toLowerCase().indexOf("android")>-1,e="Microsoft Internet Explorer"==window.navigator.appName,n=function(t,e){i||(this.$element=s(t),this.options=s.extend({},n.DEFAULTS,e),this.mask=String(this.options.mask),this.init(),this.listen(),this.checkVal())};n.DEFAULTS={mask:"",placeholder:"_",definitions:{9:"[0-9]",a:"[A-Za-z]","?":"[A-Za-z0-9]","*":"."}},n.prototype.init=function(){var i=this.options.definitions,n=this.mask.length;this.tests=[],this.partialPosition=this.mask.length,this.firstNonMaskPos=null,s.each(this.mask.split(""),s.proxy(function(t,e){"?"==e?(n--,this.partialPosition=t):i[e]?(this.tests.push(new RegExp(i[e])),null===this.firstNonMaskPos&&(this.firstNonMaskPos=this.tests.length-1)):this.tests.push(null)},this)),this.buffer=s.map(this.mask.split(""),s.proxy(function(t){return"?"!=t?i[t]?this.options.placeholder:t:void 0},this)),this.focusText=this.$element.val(),this.$element.data("rawMaskFn",s.proxy(function(){return s.map(this.buffer,function(t,e){return this.tests[e]&&t!=this.options.placeholder?t:null}).join("")},this))},n.prototype.listen=function(){if(!this.$element.attr("readonly")){var t=(e?"paste":"input")+".mask";this.$element.on("unmask.bs.inputmask",s.proxy(this.unmask,this)).on("focus.bs.inputmask",s.proxy(this.focusEvent,this)).on("blur.bs.inputmask",s.proxy(this.blurEvent,this)).on("keydown.bs.inputmask",s.proxy(this.keydownEvent,this)).on("keypress.bs.inputmask",s.proxy(this.keypressEvent,this)).on(t,s.proxy(this.pasteEvent,this))}},n.prototype.caret=function(e,i){if(0!==this.$element.length){if("number"==typeof e)return i="number"==typeof i?i:e,this.$element.each(function(){if(this.setSelectionRange)this.setSelectionRange(e,i);else if(this.createTextRange){var t=this.createTextRange();t.collapse(!0),t.moveEnd("character",i),t.moveStart("character",e),t.select()}});if(this.$element[0].setSelectionRange)e=this.$element[0].selectionStart,i=this.$element[0].selectionEnd;else if(document.selection&&document.selection.createRange){var t=document.selection.createRange();e=0-t.duplicate().moveStart("character",-1e5),i=e+t.text.length}return{begin:e,end:i}}},n.prototype.seekNext=function(t){for(var e=this.mask.length;++t<=e&&!this.tests[t];);return t},n.prototype.seekPrev=function(t){for(;--t>=0&&!this.tests[t];);return t},n.prototype.shiftL=function(t,e){var i=this.mask.length;if(!(0>t)){for(var n=t,s=this.seekNext(e);i>n;n++)if(this.tests[n]){if(!(i>s&&this.tests[n].test(this.buffer[s])))break;this.buffer[n]=this.buffer[s],this.buffer[s]=this.options.placeholder,s=this.seekNext(s)}this.writeBuffer(),this.caret(Math.max(this.firstNonMaskPos,t))}},n.prototype.shiftR=function(t){for(var e=this.mask.length,i=t,n=this.options.placeholder;e>i;i++)if(this.tests[i]){var s=this.seekNext(i),r=this.buffer[i];if(this.buffer[i]=n,!(e>s&&this.tests[s].test(r)))break;n=r}},n.prototype.unmask=function(){this.$element.unbind(".mask").removeData("inputmask")},n.prototype.focusEvent=function(){this.focusText=this.$element.val();var t=this.mask.length,e=this.checkVal();this.writeBuffer();var i=this,n=function(){e==t?i.caret(0,e):i.caret(e)};n(),setTimeout(n,50)},n.prototype.blurEvent=function(){this.checkVal(),this.$element.val()!==this.focusText&&this.$element.trigger("change")},n.prototype.keydownEvent=function(t){var e=t.which;if(8==e||46==e||r&&127==e){var i=this.caret(),n=i.begin,s=i.end;return s-n===0&&(n=46!=e?this.seekPrev(n):s=this.seekNext(n-1),s=46==e?this.seekNext(s):s),this.clearBuffer(n,s),this.shiftL(n,s-1),!1}return 27==e?(this.$element.val(this.focusText),this.caret(0,this.checkVal()),!1):void 0},n.prototype.keypressEvent=function(t){var e=this.mask.length,i=t.which,n=this.caret();if(t.ctrlKey||t.altKey||t.metaKey||32>i)return!0;if(i){n.end-n.begin!==0&&(this.clearBuffer(n.begin,n.end),this.shiftL(n.begin,n.end-1));var s=this.seekNext(n.begin-1);if(e>s){var r=String.fromCharCode(i);if(this.tests[s].test(r)){this.shiftR(s),this.buffer[s]=r,this.writeBuffer();var o=this.seekNext(s);this.caret(o)}}return!1}},n.prototype.pasteEvent=function(){var t=this;setTimeout(function(){t.caret(t.checkVal(!0))},0)},n.prototype.clearBuffer=function(t,e){for(var i=this.mask.length,n=t;e>n&&i>n;n++)this.tests[n]&&(this.buffer[n]=this.options.placeholder)},n.prototype.writeBuffer=function(){return this.$element.val(this.buffer.join("")).val()},n.prototype.checkVal=function(t){for(var e=this.mask.length,i=this.$element.val(),n=-1,s=0,r=0;e>s;s++)if(this.tests[s]){for(this.buffer[s]=this.options.placeholder;r++<i.length;){var o=i.charAt(r-1);if(this.tests[s].test(o)){this.buffer[s]=o,n=s;break}}if(r>i.length)break}else this.buffer[s]==i.charAt(r)&&s!=this.partialPosition&&(r++,n=s);return!t&&n+1<this.partialPosition?(this.$element.val(""),this.clearBuffer(0,e)):(t||n+1>=this.partialPosition)&&(this.writeBuffer(),t||this.$element.val(this.$element.val().substring(0,n+1))),this.partialPosition?s:this.firstNonMaskPos};var t=s.fn.inputmask;s.fn.inputmask=function(i){return this.each(function(){var t=s(this),e=t.data("inputmask");e||t.data("inputmask",e=new n(this,i))})},s.fn.inputmask.Constructor=n,s.fn.inputmask.noConflict=function(){return s.fn.inputmask=t,this},s(document).on("focus.bs.inputmask.data-api","[data-mask]",function(){var t=s(this);t.data("inputmask")||t.inputmask(t.data())})}(window.jQuery),+function(o){"use strict";var i="Microsoft Internet Explorer"==window.navigator.appName,n=function(t,e){if(this.$element=o(t),this.$input=this.$element.find(":file"),0!==this.$input.length){this.name=this.$input.attr("name")||e.name,this.$hidden=this.$element.find('input[type=hidden][name="'+this.name+'"]'),0===this.$hidden.length&&(this.$hidden=o('<input type="hidden">').insertBefore(this.$input)),this.$preview=this.$element.find(".fileinput-preview");var i=this.$preview.css("height");"inline"!==this.$preview.css("display")&&"0px"!==i&&"none"!==i&&this.$preview.css("line-height",i),this.original={exists:this.$element.hasClass("fileinput-exists"),preview:this.$preview.html(),hiddenVal:this.$hidden.val()},this.listen()}};n.prototype.listen=function(){this.$input.on("change.bs.fileinput",o.proxy(this.change,this)),o(this.$input[0].form).on("reset.bs.fileinput",o.proxy(this.reset,this)),this.$element.find('[data-trigger="fileinput"]').on("click.bs.fileinput",o.proxy(this.trigger,this)),this.$element.find('[data-dismiss="fileinput"]').on("click.bs.fileinput",o.proxy(this.clear,this))},n.prototype.change=function(t){var i=void 0===t.target.files?t.target&&t.target.value?[{name:t.target.value.replace(/^.+\\/,"")}]:[]:t.target.files;if(t.stopPropagation(),0===i.length)return void this.clear();this.$hidden.val(""),this.$hidden.attr("name",""),this.$input.attr("name",this.name);var n=i[0];if(this.$preview.length>0&&("undefined"!=typeof n.type?n.type.match(/^image\/(gif|png|jpeg)$/):n.name.match(/\.(gif|png|jpe?g)$/i))&&"undefined"!=typeof FileReader){var e=new FileReader,s=this.$preview,r=this.$element;e.onload=function(t){var e=o("<img>");e[0].src=t.target.result,i[0].result=t.target.result,r.find(".fileinput-filename").text(n.name),"none"!=s.css("max-height")&&e.css("max-height",parseInt(s.css("max-height"),10)-parseInt(s.css("padding-top"),10)-parseInt(s.css("padding-bottom"),10)-parseInt(s.css("border-top"),10)-parseInt(s.css("border-bottom"),10)),s.html(e),r.addClass("fileinput-exists").removeClass("fileinput-new"),r.trigger("change.bs.fileinput",i)},e.readAsDataURL(n)}else this.$element.find(".fileinput-filename").text(n.name),this.$preview.text(n.name),this.$element.addClass("fileinput-exists").removeClass("fileinput-new"),this.$element.trigger("change.bs.fileinput")},n.prototype.clear=function(t){if(t&&t.preventDefault(),this.$hidden.val(""),this.$hidden.attr("name",this.name),this.$input.attr("name",""),i){var e=this.$input.clone(!0);this.$input.after(e),this.$input.remove(),this.$input=e}else this.$input.val("");this.$preview.html(""),this.$element.find(".fileinput-filename").text(""),this.$element.addClass("fileinput-new").removeClass("fileinput-exists"),void 0!==t&&(this.$input.trigger("change"),this.$element.trigger("clear.bs.fileinput"))},n.prototype.reset=function(){this.clear(),this.$hidden.val(this.original.hiddenVal),this.$preview.html(this.original.preview),this.$element.find(".fileinput-filename").text(""),this.original.exists?this.$element.addClass("fileinput-exists").removeClass("fileinput-new"):this.$element.addClass("fileinput-new").removeClass("fileinput-exists"),this.$element.trigger("reset.bs.fileinput")},n.prototype.trigger=function(t){this.$input.trigger("click"),t.preventDefault()};var t=o.fn.fileinput;o.fn.fileinput=function(i){return this.each(function(){var t=o(this),e=t.data("fileinput");e||t.data("fileinput",e=new n(this,i)),"string"==typeof i&&e[i]()})},o.fn.fileinput.Constructor=n,o.fn.fileinput.noConflict=function(){return o.fn.fileinput=t,this},o(document).on("click.fileinput.data-api",'[data-provides="fileinput"]',function(t){var e=o(this);if(!e.data("fileinput")){e.fileinput(e.data());var i=o(t.target).closest('[data-dismiss="fileinput"],[data-trigger="fileinput"]');i.length>0&&(t.preventDefault(),i.trigger("click.bs.fileinput"))}})}(window.jQuery);(function(){var o,e,i,t,u,d,n,s,a=[].slice,r={}.hasOwnProperty,l=function(t,e){for(var i in e){if(r.call(e,i))t[i]=e[i]}function n(){this.constructor=t}n.prototype=e.prototype;t.prototype=new n;t.__super__=e.prototype;return t};n=function(){};e=function(){function t(){}t.prototype.addEventListener=t.prototype.on;t.prototype.on=function(t,e){this._callbacks=this._callbacks||{};if(!this._callbacks[t]){this._callbacks[t]=[]}this._callbacks[t].push(e);return this};t.prototype.emit=function(){var t,e,i,n,s,r;n=arguments[0],t=2<=arguments.length?a.call(arguments,1):[];this._callbacks=this._callbacks||{};i=this._callbacks[n];if(i){for(s=0,r=i.length;s<r;s++){e=i[s];e.apply(this,t)}}return this};t.prototype.removeListener=t.prototype.off;t.prototype.removeAllListeners=t.prototype.off;t.prototype.removeEventListener=t.prototype.off;t.prototype.off=function(t,e){var i,n,s,r,o;if(!this._callbacks||arguments.length===0){this._callbacks={};return this}n=this._callbacks[t];if(!n){return this}if(arguments.length===1){delete this._callbacks[t];return this}for(s=r=0,o=n.length;r<o;s=++r){i=n[s];if(i===e){n.splice(s,1);break}}return this};return t}();o=function(t){var H,O;l(L,t);L.prototype.Emitter=e;L.prototype.events=["drop","dragstart","dragend","dragenter","dragover","dragleave","addedfile","addedfiles","removedfile","thumbnail","error","errormultiple","processing","processingmultiple","uploadprogress","totaluploadprogress","sending","sendingmultiple","success","successmultiple","canceled","canceledmultiple","complete","completemultiple","reset","maxfilesexceeded","maxfilesreached","queuecomplete"];L.prototype.defaultOptions={url:null,method:"post",withCredentials:false,parallelUploads:2,uploadMultiple:false,maxFilesize:256,paramName:"file",createImageThumbnails:true,maxThumbnailFilesize:10,thumbnailWidth:120,thumbnailHeight:120,filesizeBase:1e3,maxFiles:null,params:{},clickable:true,ignoreHiddenFiles:true,acceptedFiles:null,acceptedMimeTypes:null,autoProcessQueue:true,autoQueue:true,addRemoveLinks:false,previewsContainer:null,hiddenInputContainer:"body",capture:null,renameFilename:null,dictDefaultMessage:"Drop files here to upload",dictFallbackMessage:"Your browser does not support drag'n'drop file uploads.",dictFallbackText:"Please use the fallback form below to upload your files like in the olden days.",dictFileTooBig:"File is too big ({{filesize}}MiB). Max filesize: {{maxFilesize}}MiB.",dictInvalidFileType:"You can't upload files of this type.",dictResponseError:"Server responded with {{statusCode}} code.",dictCancelUpload:"Cancel upload",dictCancelUploadConfirmation:"Are you sure you want to cancel this upload?",dictRemoveFile:"Remove file",dictRemoveFileConfirmation:null,dictMaxFilesExceeded:"You can not upload any more files.",accept:function(t,e){return e()},init:function(){return n},forceFallback:false,fallback:function(){var t,e,i,n,s,r;this.element.className=""+this.element.className+" dz-browser-not-supported";r=this.element.getElementsByTagName("div");for(n=0,s=r.length;n<s;n++){t=r[n];if(/(^| )dz-message($| )/.test(t.className)){e=t;t.className="dz-message";continue}}if(!e){e=L.createElement('<div class="dz-message"><span></span></div>');this.element.appendChild(e)}i=e.getElementsByTagName("span")[0];if(i){if(i.textContent!=null){i.textContent=this.options.dictFallbackMessage}else if(i.innerText!=null){i.innerText=this.options.dictFallbackMessage}}return this.element.appendChild(this.getFallbackForm())},resize:function(t){var e,i,n;e={srcX:0,srcY:0,srcWidth:t.width,srcHeight:t.height};i=t.width/t.height;e.optWidth=this.options.thumbnailWidth;e.optHeight=this.options.thumbnailHeight;if(e.optWidth==null&&e.optHeight==null){e.optWidth=e.srcWidth;e.optHeight=e.srcHeight}else if(e.optWidth==null){e.optWidth=i*e.optHeight}else if(e.optHeight==null){e.optHeight=1/i*e.optWidth}n=e.optWidth/e.optHeight;if(t.height<e.optHeight||t.width<e.optWidth){e.trgHeight=e.srcHeight;e.trgWidth=e.srcWidth}else{if(i>n){e.srcHeight=t.height;e.srcWidth=e.srcHeight*n}else{e.srcWidth=t.width;e.srcHeight=e.srcWidth/n}}e.srcX=(t.width-e.srcWidth)/2;e.srcY=(t.height-e.srcHeight)/2;return e},drop:function(t){return this.element.classList.remove("dz-drag-hover")},dragstart:n,dragend:function(t){return this.element.classList.remove("dz-drag-hover")},dragenter:function(t){return this.element.classList.add("dz-drag-hover")},dragover:function(t){return this.element.classList.add("dz-drag-hover")},dragleave:function(t){return this.element.classList.remove("dz-drag-hover")},paste:n,reset:function(){return this.element.classList.remove("dz-started")},addedfile:function(i){var t,e,n,s,r,o,a,l,c,h,u,d,f;if(this.element===this.previewsContainer){this.element.classList.add("dz-started")}if(this.previewsContainer){i.previewElement=L.createElement(this.options.previewTemplate.trim());i.previewTemplate=i.previewElement;this.previewsContainer.appendChild(i.previewElement);h=i.previewElement.querySelectorAll("[data-dz-name]");for(s=0,a=h.length;s<a;s++){t=h[s];t.textContent=this._renameFilename(i.name)}u=i.previewElement.querySelectorAll("[data-dz-size]");for(r=0,l=u.length;r<l;r++){t=u[r];t.innerHTML=this.filesize(i.size)}if(this.options.addRemoveLinks){i._removeLink=L.createElement('<a class="dz-remove" href="javascript:undefined;" data-dz-remove>'+this.options.dictRemoveFile+"</a>");i.previewElement.appendChild(i._removeLink)}e=function(e){return function(t){t.preventDefault();t.stopPropagation();if(i.status===L.UPLOADING){return L.confirm(e.options.dictCancelUploadConfirmation,function(){return e.removeFile(i)})}else{if(e.options.dictRemoveFileConfirmation){return L.confirm(e.options.dictRemoveFileConfirmation,function(){return e.removeFile(i)})}else{return e.removeFile(i)}}}}(this);d=i.previewElement.querySelectorAll("[data-dz-remove]");f=[];for(o=0,c=d.length;o<c;o++){n=d[o];f.push(n.addEventListener("click",e))}return f}},removedfile:function(t){var e;if(t.previewElement){if((e=t.previewElement)!=null){e.parentNode.removeChild(t.previewElement)}}return this._updateMaxFilesReachedClass()},thumbnail:function(e,t){var i,n,s,r;if(e.previewElement){e.previewElement.classList.remove("dz-file-preview");r=e.previewElement.querySelectorAll("[data-dz-thumbnail]");for(n=0,s=r.length;n<s;n++){i=r[n];i.alt=e.name;i.src=t}return setTimeout(function(t){return function(){return e.previewElement.classList.add("dz-image-preview")}}(this),1)}},error:function(t,e){var i,n,s,r,o;if(t.previewElement){t.previewElement.classList.add("dz-error");if(typeof e!=="String"&&e.error){e=e.error}r=t.previewElement.querySelectorAll("[data-dz-errormessage]");o=[];for(n=0,s=r.length;n<s;n++){i=r[n];o.push(i.textContent=e)}return o}},errormultiple:n,processing:function(t){if(t.previewElement){t.previewElement.classList.add("dz-processing");if(t._removeLink){return t._removeLink.textContent=this.options.dictCancelUpload}}},processingmultiple:n,uploadprogress:function(t,e,i){var n,s,r,o,a;if(t.previewElement){o=t.previewElement.querySelectorAll("[data-dz-uploadprogress]");a=[];for(s=0,r=o.length;s<r;s++){n=o[s];if(n.nodeName==="PROGRESS"){a.push(n.value=e)}else{a.push(n.style.width=""+e+"%")}}return a}},totaluploadprogress:n,sending:n,sendingmultiple:n,success:function(t){if(t.previewElement){return t.previewElement.classList.add("dz-success")}},successmultiple:n,canceled:function(t){return this.emit("error",t,"Upload canceled.")},canceledmultiple:n,complete:function(t){if(t._removeLink){t._removeLink.textContent=this.options.dictRemoveFile}if(t.previewElement){return t.previewElement.classList.add("dz-complete")}},completemultiple:n,maxfilesexceeded:n,maxfilesreached:n,queuecomplete:n,addedfiles:n,previewTemplate:'<div class="dz-preview dz-file-preview">\n  <div class="dz-image"><img data-dz-thumbnail /></div>\n  <div class="dz-details">\n    <div class="dz-size"><span data-dz-size></span></div>\n    <div class="dz-filename"><span data-dz-name></span></div>\n  </div>\n  <div class="dz-progress"><span class="dz-upload" data-dz-uploadprogress></span></div>\n  <div class="dz-error-message"><span data-dz-errormessage></span></div>\n  <div class="dz-success-mark">\n    <svg width="54px" height="54px" viewBox="0 0 54 54" version="1.1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" xmlns:sketch="http://www.bohemiancoding.com/sketch/ns">\n      <title>Check</title>\n      <defs></defs>\n      <g id="Page-1" stroke="none" stroke-width="1" fill="none" fill-rule="evenodd" sketch:type="MSPage">\n        <path d="M23.5,31.8431458 L17.5852419,25.9283877 C16.0248253,24.3679711 13.4910294,24.366835 11.9289322,25.9289322 C10.3700136,27.4878508 10.3665912,30.0234455 11.9283877,31.5852419 L20.4147581,40.0716123 C20.5133999,40.1702541 20.6159315,40.2626649 20.7218615,40.3488435 C22.2835669,41.8725651 24.794234,41.8626202 26.3461564,40.3106978 L43.3106978,23.3461564 C44.8771021,21.7797521 44.8758057,19.2483887 43.3137085,17.6862915 C41.7547899,16.1273729 39.2176035,16.1255422 37.6538436,17.6893022 L23.5,31.8431458 Z M27,53 C41.3594035,53 53,41.3594035 53,27 C53,12.6405965 41.3594035,1 27,1 C12.6405965,1 1,12.6405965 1,27 C1,41.3594035 12.6405965,53 27,53 Z" id="Oval-2" stroke-opacity="0.198794158" stroke="#747474" fill-opacity="0.816519475" fill="#FFFFFF" sketch:type="MSShapeGroup"></path>\n      </g>\n    </svg>\n  </div>\n  <div class="dz-error-mark">\n    <svg width="54px" height="54px" viewBox="0 0 54 54" version="1.1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" xmlns:sketch="http://www.bohemiancoding.com/sketch/ns">\n      <title>Error</title>\n      <defs></defs>\n      <g id="Page-1" stroke="none" stroke-width="1" fill="none" fill-rule="evenodd" sketch:type="MSPage">\n        <g id="Check-+-Oval-2" sketch:type="MSLayerGroup" stroke="#747474" stroke-opacity="0.198794158" fill="#FFFFFF" fill-opacity="0.816519475">\n          <path d="M32.6568542,29 L38.3106978,23.3461564 C39.8771021,21.7797521 39.8758057,19.2483887 38.3137085,17.6862915 C36.7547899,16.1273729 34.2176035,16.1255422 32.6538436,17.6893022 L27,23.3431458 L21.3461564,17.6893022 C19.7823965,16.1255422 17.2452101,16.1273729 15.6862915,17.6862915 C14.1241943,19.2483887 14.1228979,21.7797521 15.6893022,23.3461564 L21.3431458,29 L15.6893022,34.6538436 C14.1228979,36.2202479 14.1241943,38.7516113 15.6862915,40.3137085 C17.2452101,41.8726271 19.7823965,41.8744578 21.3461564,40.3106978 L27,34.6568542 L32.6538436,40.3106978 C34.2176035,41.8744578 36.7547899,41.8726271 38.3137085,40.3137085 C39.8758057,38.7516113 39.8771021,36.2202479 38.3106978,34.6538436 L32.6568542,29 Z M27,53 C41.3594035,53 53,41.3594035 53,27 C53,12.6405965 41.3594035,1 27,1 C12.6405965,1 1,12.6405965 1,27 C1,41.3594035 12.6405965,53 27,53 Z" id="Oval-2" sketch:type="MSShapeGroup"></path>\n        </g>\n      </g>\n    </svg>\n  </div>\n</div>'};H=function(){var t,e,i,n,s,r,o;n=arguments[0],i=2<=arguments.length?a.call(arguments,1):[];for(r=0,o=i.length;r<o;r++){e=i[r];for(t in e){s=e[t];n[t]=s}}return n};function L(t,e){var i,n,s;this.element=t;this.version=L.version;this.defaultOptions.previewTemplate=this.defaultOptions.previewTemplate.replace(/\n*/g,"");this.clickableElements=[];this.listeners=[];this.files=[];if(typeof this.element==="string"){this.element=document.querySelector(this.element)}if(!(this.element&&this.element.nodeType!=null)){throw new Error("Invalid dropzone element.")}if(this.element.dropzone){throw new Error("Dropzone already attached.")}L.instances.push(this);this.element.dropzone=this;i=(s=L.optionsForElement(this.element))!=null?s:{};this.options=H({},this.defaultOptions,i,e!=null?e:{});if(this.options.forceFallback||!L.isBrowserSupported()){return this.options.fallback.call(this)}if(this.options.url==null){this.options.url=this.element.getAttribute("action")}if(!this.options.url){throw new Error("No URL provided.")}if(this.options.acceptedFiles&&this.options.acceptedMimeTypes){throw new Error("You can't provide both 'acceptedFiles' and 'acceptedMimeTypes'. 'acceptedMimeTypes' is deprecated.")}if(this.options.acceptedMimeTypes){this.options.acceptedFiles=this.options.acceptedMimeTypes;delete this.options.acceptedMimeTypes}this.options.method=this.options.method.toUpperCase();if((n=this.getExistingFallback())&&n.parentNode){n.parentNode.removeChild(n)}if(this.options.previewsContainer!==false){if(this.options.previewsContainer){this.previewsContainer=L.getElement(this.options.previewsContainer,"previewsContainer")}else{this.previewsContainer=this.element}}if(this.options.clickable){if(this.options.clickable===true){this.clickableElements=[this.element]}else{this.clickableElements=L.getElements(this.options.clickable,"clickable")}}this.init()}L.prototype.getAcceptedFiles=function(){var t,e,i,n,s;n=this.files;s=[];for(e=0,i=n.length;e<i;e++){t=n[e];if(t.accepted){s.push(t)}}return s};L.prototype.getRejectedFiles=function(){var t,e,i,n,s;n=this.files;s=[];for(e=0,i=n.length;e<i;e++){t=n[e];if(!t.accepted){s.push(t)}}return s};L.prototype.getFilesWithStatus=function(t){var e,i,n,s,r;s=this.files;r=[];for(i=0,n=s.length;i<n;i++){e=s[i];if(e.status===t){r.push(e)}}return r};L.prototype.getQueuedFiles=function(){return this.getFilesWithStatus(L.QUEUED)};L.prototype.getUploadingFiles=function(){return this.getFilesWithStatus(L.UPLOADING)};L.prototype.getAddedFiles=function(){return this.getFilesWithStatus(L.ADDED)};L.prototype.getActiveFiles=function(){var t,e,i,n,s;n=this.files;s=[];for(e=0,i=n.length;e<i;e++){t=n[e];if(t.status===L.UPLOADING||t.status===L.QUEUED){s.push(t)}}return s};L.prototype.init=function(){var t,n,r,e,i,s,o;if(this.element.tagName==="form"){this.element.setAttribute("enctype","multipart/form-data")}if(this.element.classList.contains("dropzone")&&!this.element.querySelector(".dz-message")){this.element.appendChild(L.createElement('<div class="dz-default dz-message"><span>'+this.options.dictDefaultMessage+"</span></div>"))}if(this.clickableElements.length){r=function(s){return function(){if(s.hiddenFileInput){s.hiddenFileInput.parentNode.removeChild(s.hiddenFileInput)}s.hiddenFileInput=document.createElement("input");s.hiddenFileInput.setAttribute("type","file");if(s.options.maxFiles==null||s.options.maxFiles>1){s.hiddenFileInput.setAttribute("multiple","multiple")}s.hiddenFileInput.className="dz-hidden-input";if(s.options.acceptedFiles!=null){s.hiddenFileInput.setAttribute("accept",s.options.acceptedFiles)}if(s.options.capture!=null){s.hiddenFileInput.setAttribute("capture",s.options.capture)}s.hiddenFileInput.style.visibility="hidden";s.hiddenFileInput.style.position="absolute";s.hiddenFileInput.style.top="0";s.hiddenFileInput.style.left="0";s.hiddenFileInput.style.height="0";s.hiddenFileInput.style.width="0";document.querySelector(s.options.hiddenInputContainer).appendChild(s.hiddenFileInput);return s.hiddenFileInput.addEventListener("change",function(){var t,e,i,n;e=s.hiddenFileInput.files;if(e.length){for(i=0,n=e.length;i<n;i++){t=e[i];s.addFile(t)}}s.emit("addedfiles",e);return r()})}}(this);r()}this.URL=(s=window.URL)!=null?s:window.webkitURL;o=this.events;for(e=0,i=o.length;e<i;e++){t=o[e];this.on(t,this.options[t])}this.on("uploadprogress",function(t){return function(){return t.updateTotalUploadProgress()}}(this));this.on("removedfile",function(t){return function(){return t.updateTotalUploadProgress()}}(this));this.on("canceled",function(e){return function(t){return e.emit("complete",t)}}(this));this.on("complete",function(e){return function(t){if(e.getAddedFiles().length===0&&e.getUploadingFiles().length===0&&e.getQueuedFiles().length===0){return setTimeout(function(){return e.emit("queuecomplete")},0)}}}(this));n=function(t){t.stopPropagation();if(t.preventDefault){return t.preventDefault()}else{return t.returnValue=false}};this.listeners=[{element:this.element,events:{dragstart:function(e){return function(t){return e.emit("dragstart",t)}}(this),dragenter:function(e){return function(t){n(t);return e.emit("dragenter",t)}}(this),dragover:function(i){return function(t){var e;try{e=t.dataTransfer.effectAllowed}catch(t){}t.dataTransfer.dropEffect="move"===e||"linkMove"===e?"move":"copy";n(t);return i.emit("dragover",t)}}(this),dragleave:function(e){return function(t){return e.emit("dragleave",t)}}(this),drop:function(e){return function(t){n(t);return e.drop(t)}}(this),dragend:function(e){return function(t){return e.emit("dragend",t)}}(this)}}];this.clickableElements.forEach(function(i){return function(e){return i.listeners.push({element:e,events:{click:function(t){if(e!==i.element||(t.target===i.element||L.elementInside(t.target,i.element.querySelector(".dz-message")))){i.hiddenFileInput.click()}return true}}})}}(this));this.enable();return this.options.init.call(this)};L.prototype.destroy=function(){var t;this.disable();this.removeAllFiles(true);if((t=this.hiddenFileInput)!=null?t.parentNode:void 0){this.hiddenFileInput.parentNode.removeChild(this.hiddenFileInput);this.hiddenFileInput=null}delete this.element.dropzone;return L.instances.splice(L.instances.indexOf(this),1)};L.prototype.updateTotalUploadProgress=function(){var t,e,i,n,s,r,o,a;n=0;i=0;t=this.getActiveFiles();if(t.length){a=this.getActiveFiles();for(r=0,o=a.length;r<o;r++){e=a[r];n+=e.upload.bytesSent;i+=e.upload.total}s=100*n/i}else{s=100}return this.emit("totaluploadprogress",s,i,n)};L.prototype._getParamName=function(t){if(typeof this.options.paramName==="function"){return this.options.paramName(t)}else{return""+this.options.paramName+(this.options.uploadMultiple?"["+t+"]":"")}};L.prototype._renameFilename=function(t){if(typeof this.options.renameFilename!=="function"){return t}return this.options.renameFilename(t)};L.prototype.getFallbackForm=function(){var t,e,i,n;if(t=this.getExistingFallback()){return t}i='<div class="dz-fallback">';if(this.options.dictFallbackText){i+="<p>"+this.options.dictFallbackText+"</p>"}i+='<input type="file" name="'+this._getParamName(0)+'" '+(this.options.uploadMultiple?'multiple="multiple"':void 0)+' /><input type="submit" value="Upload!"></div>';e=L.createElement(i);if(this.element.tagName!=="FORM"){n=L.createElement('<form action="'+this.options.url+'" enctype="multipart/form-data" method="'+this.options.method+'"></form>');n.appendChild(e)}else{this.element.setAttribute("enctype","multipart/form-data");this.element.setAttribute("method",this.options.method)}return n!=null?n:e};L.prototype.getExistingFallback=function(){var t,e,i,n,s,r;e=function(t){var e,i,n;for(i=0,n=t.length;i<n;i++){e=t[i];if(/(^| )fallback($| )/.test(e.className)){return e}}};r=["div","form"];for(n=0,s=r.length;n<s;n++){i=r[n];if(t=e(this.element.getElementsByTagName(i))){return t}}};L.prototype.setupEventListeners=function(){var i,n,s,t,e,r,o;r=this.listeners;o=[];for(t=0,e=r.length;t<e;t++){i=r[t];o.push(function(){var t,e;t=i.events;e=[];for(n in t){s=t[n];e.push(i.element.addEventListener(n,s,false))}return e}())}return o};L.prototype.removeEventListeners=function(){var i,n,s,t,e,r,o;r=this.listeners;o=[];for(t=0,e=r.length;t<e;t++){i=r[t];o.push(function(){var t,e;t=i.events;e=[];for(n in t){s=t[n];e.push(i.element.removeEventListener(n,s,false))}return e}())}return o};L.prototype.disable=function(){var t,e,i,n,s;this.clickableElements.forEach(function(t){return t.classList.remove("dz-clickable")});this.removeEventListeners();n=this.files;s=[];for(e=0,i=n.length;e<i;e++){t=n[e];s.push(this.cancelUpload(t))}return s};L.prototype.enable=function(){this.clickableElements.forEach(function(t){return t.classList.add("dz-clickable")});return this.setupEventListeners()};L.prototype.filesize=function(t){var e,i,n,s,r,o,a,l;n=0;s="b";if(t>0){o=["TB","GB","MB","KB","b"];for(i=a=0,l=o.length;a<l;i=++a){r=o[i];e=Math.pow(this.options.filesizeBase,4-i)/10;if(t>=e){n=t/Math.pow(this.options.filesizeBase,4-i);s=r;break}}n=Math.round(10*n)/10}return"<strong>"+n+"</strong> "+s};L.prototype._updateMaxFilesReachedClass=function(){if(this.options.maxFiles!=null&&this.getAcceptedFiles().length>=this.options.maxFiles){if(this.getAcceptedFiles().length===this.options.maxFiles){this.emit("maxfilesreached",this.files)}return this.element.classList.add("dz-max-files-reached")}else{return this.element.classList.remove("dz-max-files-reached")}};L.prototype.drop=function(t){var e,i;if(!t.dataTransfer){return}this.emit("drop",t);e=t.dataTransfer.files;this.emit("addedfiles",e);if(e.length){i=t.dataTransfer.items;if(i&&i.length&&i[0].webkitGetAsEntry!=null){this._addFilesFromItems(i)}else{this.handleFiles(e)}}};L.prototype.paste=function(t){var e,i;if((t!=null?(i=t.clipboardData)!=null?i.items:void 0:void 0)==null){return}this.emit("paste",t);e=t.clipboardData.items;if(e.length){return this._addFilesFromItems(e)}};L.prototype.handleFiles=function(t){var e,i,n,s;s=[];for(i=0,n=t.length;i<n;i++){e=t[i];s.push(this.addFile(e))}return s};L.prototype._addFilesFromItems=function(t){var e,i,n,s,r;r=[];for(n=0,s=t.length;n<s;n++){i=t[n];if(i.webkitGetAsEntry!=null&&(e=i.webkitGetAsEntry())){if(e.isFile){r.push(this.addFile(i.getAsFile()))}else if(e.isDirectory){r.push(this._addFilesFromDirectory(e,e.name))}else{r.push(void 0)}}else if(i.getAsFile!=null){if(i.kind==null||i.kind==="file"){r.push(this.addFile(i.getAsFile()))}else{r.push(void 0)}}else{r.push(void 0)}}return r};L.prototype._addFilesFromDirectory=function(t,r){var e,i,o;e=t.createReader();i=function(t){return typeof console!=="undefined"&&console!==null?typeof console.log==="function"?console.log(t):void 0:void 0};o=function(s){return function(){return e.readEntries(function(t){var e,i,n;if(t.length>0){for(i=0,n=t.length;i<n;i++){e=t[i];if(e.isFile){e.file(function(t){if(s.options.ignoreHiddenFiles&&t.name.substring(0,1)==="."){return}t.fullPath=""+r+"/"+t.name;return s.addFile(t)})}else if(e.isDirectory){s._addFilesFromDirectory(e,""+r+"/"+e.name)}}o()}return null},i)}}(this);return o()};L.prototype.accept=function(t,e){if(t.size>this.options.maxFilesize*1024*1024){return e(this.options.dictFileTooBig.replace("{{filesize}}",Math.round(t.size/1024/10.24)/100).replace("{{maxFilesize}}",this.options.maxFilesize))}else if(!L.isValidFile(t,this.options.acceptedFiles)){return e(this.options.dictInvalidFileType)}else if(this.options.maxFiles!=null&&this.getAcceptedFiles().length>=this.options.maxFiles){e(this.options.dictMaxFilesExceeded.replace("{{maxFiles}}",this.options.maxFiles));return this.emit("maxfilesexceeded",t)}else{return this.options.accept.call(this,t,e)}};L.prototype.addFile=function(i){i.upload={progress:0,total:i.size,bytesSent:0};this.files.push(i);i.status=L.ADDED;this.emit("addedfile",i);this._enqueueThumbnail(i);return this.accept(i,function(e){return function(t){if(t){i.accepted=false;e._errorProcessing([i],t)}else{i.accepted=true;if(e.options.autoQueue){e.enqueueFile(i)}}return e._updateMaxFilesReachedClass()}}(this))};L.prototype.enqueueFiles=function(t){var e,i,n;for(i=0,n=t.length;i<n;i++){e=t[i];this.enqueueFile(e)}return null};L.prototype.enqueueFile=function(t){if(t.status===L.ADDED&&t.accepted===true){t.status=L.QUEUED;if(this.options.autoProcessQueue){return setTimeout(function(t){return function(){return t.processQueue()}}(this),0)}}else{throw new Error("This file can't be queued because it has already been processed or was rejected.")}};L.prototype._thumbnailQueue=[];L.prototype._processingThumbnail=false;L.prototype._enqueueThumbnail=function(t){if(this.options.createImageThumbnails&&t.type.match(/image.*/)&&t.size<=this.options.maxThumbnailFilesize*1024*1024){this._thumbnailQueue.push(t);return setTimeout(function(t){return function(){return t._processThumbnailQueue()}}(this),0)}};L.prototype._processThumbnailQueue=function(){if(this._processingThumbnail||this._thumbnailQueue.length===0){return}this._processingThumbnail=true;return this.createThumbnail(this._thumbnailQueue.shift(),function(t){return function(){t._processingThumbnail=false;return t._processThumbnailQueue()}}(this))};L.prototype.removeFile=function(t){if(t.status===L.UPLOADING){this.cancelUpload(t)}this.files=s(this.files,t);this.emit("removedfile",t);if(this.files.length===0){return this.emit("reset")}};L.prototype.removeAllFiles=function(t){var e,i,n,s;if(t==null){t=false}s=this.files.slice();for(i=0,n=s.length;i<n;i++){e=s[i];if(e.status!==L.UPLOADING||t){this.removeFile(e)}}return null};L.prototype.createThumbnail=function(e,i){var n;n=new FileReader;n.onload=function(t){return function(){if(e.type==="image/svg+xml"){t.emit("thumbnail",e,n.result);if(i!=null){i()}return}return t.createThumbnailFromUrl(e,n.result,i)}}(this);return n.readAsDataURL(e)};L.prototype.createThumbnailFromUrl=function(c,t,h,e){var u;u=document.createElement("img");if(e){u.crossOrigin=e}u.onload=function(l){return function(){var t,e,i,n,s,r,o,a;c.width=u.width;c.height=u.height;i=l.options.resize.call(l,c);if(i.trgWidth==null){i.trgWidth=i.optWidth}if(i.trgHeight==null){i.trgHeight=i.optHeight}t=document.createElement("canvas");e=t.getContext("2d");t.width=i.trgWidth;t.height=i.trgHeight;d(e,u,(s=i.srcX)!=null?s:0,(r=i.srcY)!=null?r:0,i.srcWidth,i.srcHeight,(o=i.trgX)!=null?o:0,(a=i.trgY)!=null?a:0,i.trgWidth,i.trgHeight);n=t.toDataURL("image/png");l.emit("thumbnail",c,n);if(h!=null){return h()}}}(this);if(h!=null){u.onerror=h}return u.src=t};L.prototype.processQueue=function(){var t,e,i,n;e=this.options.parallelUploads;i=this.getUploadingFiles().length;t=i;if(i>=e){return}n=this.getQueuedFiles();if(!(n.length>0)){return}if(this.options.uploadMultiple){return this.processFiles(n.slice(0,e-i))}else{while(t<e){if(!n.length){return}this.processFile(n.shift());t++}}};L.prototype.processFile=function(t){return this.processFiles([t])};L.prototype.processFiles=function(t){var e,i,n;for(i=0,n=t.length;i<n;i++){e=t[i];e.processing=true;e.status=L.UPLOADING;this.emit("processing",e)}if(this.options.uploadMultiple){this.emit("processingmultiple",t)}return this.uploadFiles(t)};L.prototype._getFilesWithXhr=function(s){var r,t;return t=function(){var t,e,i,n;i=this.files;n=[];for(t=0,e=i.length;t<e;t++){r=i[t];if(r.xhr===s){n.push(r)}}return n}.call(this)};L.prototype.cancelUpload=function(t){var e,i,n,s,r,o,a;if(t.status===L.UPLOADING){i=this._getFilesWithXhr(t.xhr);for(n=0,r=i.length;n<r;n++){e=i[n];e.status=L.CANCELED}t.xhr.abort();for(s=0,o=i.length;s<o;s++){e=i[s];this.emit("canceled",e)}if(this.options.uploadMultiple){this.emit("canceledmultiple",i)}}else if((a=t.status)===L.ADDED||a===L.QUEUED){t.status=L.CANCELED;this.emit("canceled",t);if(this.options.uploadMultiple){this.emit("canceledmultiple",[t])}}if(this.options.autoProcessQueue){return this.processQueue()}};O=function(){var t,e;e=arguments[0],t=2<=arguments.length?a.call(arguments,1):[];if(typeof e==="function"){return e.apply(this,t)}return e};L.prototype.uploadFile=function(t){return this.uploadFiles([t])};L.prototype.uploadFiles=function(u){var d,t,n,e,i,s,r,o,a,l,c,h,f,p,m,g,v,y,b,w,x,_,k,C,S,T,D,M,P,I,E,F,$,A;b=new XMLHttpRequest;for(w=0,C=u.length;w<C;w++){d=u[w];d.xhr=b}h=O(this.options.method,u);v=O(this.options.url,u);b.open(h,v,true);b.withCredentials=!!this.options.withCredentials;m=null;n=function(n){return function(){var t,e,i;i=[];for(t=0,e=u.length;t<e;t++){d=u[t];i.push(n._errorProcessing(u,m||n.options.dictResponseError.replace("{{statusCode}}",b.status),b))}return i}}(this);g=function(h){return function(t){var e,i,n,s,r,o,a,l,c;if(t!=null){i=100*t.loaded/t.total;for(n=0,o=u.length;n<o;n++){d=u[n];d.upload={progress:i,total:t.total,bytesSent:t.loaded}}}else{e=true;i=100;for(s=0,a=u.length;s<a;s++){d=u[s];if(!(d.upload.progress===100&&d.upload.bytesSent===d.upload.total)){e=false}d.upload.progress=i;d.upload.bytesSent=d.upload.total}if(e){return}}c=[];for(r=0,l=u.length;r<l;r++){d=u[r];c.push(h.emit("uploadprogress",d,i,d.upload.bytesSent))}return c}}(this);b.onload=function(i){return function(e){var t;if(u[0].status===L.CANCELED){return}if(b.readyState!==4){return}m=b.responseText;if(b.getResponseHeader("content-type")&&~b.getResponseHeader("content-type").indexOf("application/json")){try{m=JSON.parse(m)}catch(t){e=t;m="Invalid JSON response from server."}}g();if(!(200<=(t=b.status)&&t<300)){return n()}else{return i._finished(u,m,e)}}}(this);b.onerror=function(t){return function(){if(u[0].status===L.CANCELED){return}return n()}}(this);p=(P=b.upload)!=null?P:b;p.onprogress=g;s={Accept:"application/json","Cache-Control":"no-cache","X-Requested-With":"XMLHttpRequest"};if(this.options.headers){H(s,this.options.headers)}for(e in s){i=s[e];if(i){b.setRequestHeader(e,i)}}t=new FormData;if(this.options.params){I=this.options.params;for(c in I){y=I[c];t.append(c,y)}}for(x=0,S=u.length;x<S;x++){d=u[x];this.emit("sending",d,b,t)}if(this.options.uploadMultiple){this.emit("sendingmultiple",u,b,t)}if(this.element.tagName==="FORM"){E=this.element.querySelectorAll("input, textarea, select, button");for(_=0,T=E.length;_<T;_++){o=E[_];a=o.getAttribute("name");l=o.getAttribute("type");if(o.tagName==="SELECT"&&o.hasAttribute("multiple")){F=o.options;for(k=0,D=F.length;k<D;k++){f=F[k];if(f.selected){t.append(a,f.value)}}}else if(!l||($=l.toLowerCase())!=="checkbox"&&$!=="radio"||o.checked){t.append(a,o.value)}}}for(r=M=0,A=u.length-1;0<=A?M<=A:M>=A;r=0<=A?++M:--M){t.append(this._getParamName(r),u[r],this._renameFilename(u[r].name))}return this.submitRequest(b,t,u)};L.prototype.submitRequest=function(t,e,i){return t.send(e)};L.prototype._finished=function(t,e,i){var n,s,r;for(s=0,r=t.length;s<r;s++){n=t[s];n.status=L.SUCCESS;this.emit("success",n,e,i);this.emit("complete",n)}if(this.options.uploadMultiple){this.emit("successmultiple",t,e,i);this.emit("completemultiple",t)}if(this.options.autoProcessQueue){return this.processQueue()}};L.prototype._errorProcessing=function(t,e,i){var n,s,r;for(s=0,r=t.length;s<r;s++){n=t[s];n.status=L.ERROR;this.emit("error",n,e,i);this.emit("complete",n)}if(this.options.uploadMultiple){this.emit("errormultiple",t,e,i);this.emit("completemultiple",t)}if(this.options.autoProcessQueue){return this.processQueue()}};return L}(e);o.version="4.3.0";o.options={};o.optionsForElement=function(t){if(t.getAttribute("id")){return o.options[i(t.getAttribute("id"))]}else{return void 0}};o.instances=[];o.forElement=function(t){if(typeof t==="string"){t=document.querySelector(t)}if((t!=null?t.dropzone:void 0)==null){throw new Error("No Dropzone found for given element. This is probably because you're trying to access it before Dropzone had the time to initialize. Use the `init` option to setup any additional observers on your Dropzone.")}return t.dropzone};o.autoDiscover=true;o.discover=function(){var t,e,r,i,n,s;if(document.querySelectorAll){r=document.querySelectorAll(".dropzone")}else{r=[];t=function(t){var e,i,n,s;s=[];for(i=0,n=t.length;i<n;i++){e=t[i];if(/(^| )dropzone($| )/.test(e.className)){s.push(r.push(e))}else{s.push(void 0)}}return s};t(document.getElementsByTagName("div"));t(document.getElementsByTagName("form"))}s=[];for(i=0,n=r.length;i<n;i++){e=r[i];if(o.optionsForElement(e)!==false){s.push(new o(e))}else{s.push(void 0)}}return s};o.blacklistedBrowsers=[/opera.*Macintosh.*version\/12/i];o.isBrowserSupported=function(){var t,e,i,n,s;t=true;if(window.File&&window.FileReader&&window.FileList&&window.Blob&&window.FormData&&document.querySelector){if(!("classList"in document.createElement("a"))){t=false}else{s=o.blacklistedBrowsers;for(i=0,n=s.length;i<n;i++){e=s[i];if(e.test(navigator.userAgent)){t=false;continue}}}}else{t=false}return t};s=function(t,e){var i,n,s,r;r=[];for(n=0,s=t.length;n<s;n++){i=t[n];if(i!==e){r.push(i)}}return r};i=function(t){return t.replace(/[\-_](\w)/g,function(t){return t.charAt(1).toUpperCase()})};o.createElement=function(t){var e;e=document.createElement("div");e.innerHTML=t;return e.childNodes[0]};o.elementInside=function(t,e){if(t===e){return true}while(t=t.parentNode){if(t===e){return true}}return false};o.getElement=function(t,e){var i;if(typeof t==="string"){i=document.querySelector(t)}else if(t.nodeType!=null){i=t}if(i==null){throw new Error("Invalid `"+e+"` option provided. Please provide a CSS selector or a plain HTML element.")}return i};o.getElements=function(t,e){var i,n,s,r,o,a,l,c;if(t instanceof Array){s=[];try{for(r=0,a=t.length;r<a;r++){n=t[r];s.push(this.getElement(n,e))}}catch(t){i=t;s=null}}else if(typeof t==="string"){s=[];c=document.querySelectorAll(t);for(o=0,l=c.length;o<l;o++){n=c[o];s.push(n)}}else if(t.nodeType!=null){s=[t]}if(!(s!=null&&s.length)){throw new Error("Invalid `"+e+"` option provided. Please provide a CSS selector, a plain HTML element or a list of those.")}return s};o.confirm=function(t,e,i){if(window.confirm(t)){return e()}else if(i!=null){return i()}};o.isValidFile=function(t,e){var i,n,s,r,o;if(!e){return true}e=e.split(",");n=t.type;i=n.replace(/\/.*$/,"");for(r=0,o=e.length;r<o;r++){s=e[r];s=s.trim();if(s.charAt(0)==="."){if(t.name.toLowerCase().indexOf(s.toLowerCase(),t.name.length-s.length)!==-1){return true}}else if(/\/\*$/.test(s)){if(i===s.replace(/\/.*$/,"")){return true}}else{if(n===s){return true}}}return false};if(typeof jQuery!=="undefined"&&jQuery!==null){jQuery.fn.dropzone=function(t){return this.each(function(){return new o(this,t)})}}if(typeof module!=="undefined"&&module!==null){module.exports=o}else{window.Dropzone=o}o.ADDED="added";o.QUEUED="queued";o.ACCEPTED=o.QUEUED;o.UPLOADING="uploading";o.PROCESSING=o.UPLOADING;o.CANCELED="canceled";o.ERROR="error";o.SUCCESS="success";u=function(t){var e,i,n,s,r,o,a,l,c,h;a=t.naturalWidth;o=t.naturalHeight;i=document.createElement("canvas");i.width=1;i.height=o;n=i.getContext("2d");n.drawImage(t,0,0);s=n.getImageData(0,0,1,o).data;h=0;r=o;l=o;while(l>h){e=s[(l-1)*4+3];if(e===0){r=l}else{h=l}l=r+h>>1}c=l/o;if(c===0){return 1}else{return c}};d=function(t,e,i,n,s,r,o,a,l,c){var h;h=u(e);return t.drawImage(e,i,n,s,r,o,a,l,c/h)};t=function(e,i){var t,n,s,r,o,a,l,c,h;s=false;h=true;n=e.document;c=n.documentElement;t=n.addEventListener?"addEventListener":"attachEvent";l=n.addEventListener?"removeEventListener":"detachEvent";a=n.addEventListener?"":"on";r=function(t){if(t.type==="readystatechange"&&n.readyState!=="complete"){return}(t.type==="load"?e:n)[l](a+t.type,r,false);if(!s&&(s=true)){return i.call(e,t.type||t)}};o=function(){var e;try{c.doScroll("left")}catch(t){e=t;setTimeout(o,50);return}return r("poll")};if(n.readyState!=="complete"){if(n.createEventObject&&c.doScroll){try{h=!e.frameElement}catch(t){}if(h){o()}}n[t](a+"DOMContentLoaded",r,false);n[t](a+"readystatechange",r,false);return e[t](a+"load",r,false)}};o._autoDiscoverFunction=function(){if(o.autoDiscover){return o.discover()}};t(window,o._autoDiscoverFunction)}).call(this);(function(D,Y,q){(function(t){typeof define=="function"&&define.amd?define(["jquery"],t):jQuery&&!jQuery.fn.sparkline&&t(jQuery)})(function(L){"use strict";var o={},t,e,v,R,w,z,N,B,h,_,i,n,r,u,j,d,s,a,F,W,l,c,f,p,x,m,g,y,b,k,C,S,T=0;t=function(){return{common:{type:"line",lineColor:"#00f",fillColor:"#cdf",defaultPixelsPerValue:3,width:"auto",height:"auto",composite:!1,tagValuesAttribute:"values",tagOptionsPrefix:"spark",enableTagOptions:!1,enableHighlight:!0,highlightLighten:1.4,tooltipSkipNull:!0,tooltipPrefix:"",tooltipSuffix:"",disableHiddenCheck:!1,numberFormatter:!1,numberDigitGroupCount:3,numberDigitGroupSep:",",numberDecimalMark:".",disableTooltips:!1,disableInteraction:!1},line:{spotColor:"#f80",highlightSpotColor:"#5f5",highlightLineColor:"#f22",spotRadius:1.5,minSpotColor:"#f80",maxSpotColor:"#f80",lineWidth:1,normalRangeMin:q,normalRangeMax:q,normalRangeColor:"#ccc",drawNormalOnTop:!1,chartRangeMin:q,chartRangeMax:q,chartRangeMinX:q,chartRangeMaxX:q,tooltipFormat:new v('<span style="color: {{color}}">&#9679;</span> {{prefix}}{{y}}{{suffix}}')},bar:{barColor:"#3366cc",negBarColor:"#f44",stackedBarColor:["#3366cc","#dc3912","#ff9900","#109618","#66aa00","#dd4477","#0099c6","#990099"],zeroColor:q,nullColor:q,zeroAxis:!0,barWidth:4,barSpacing:1,chartRangeMax:q,chartRangeMin:q,chartRangeClip:!1,colorMap:q,tooltipFormat:new v('<span style="color: {{color}}">&#9679;</span> {{prefix}}{{value}}{{suffix}}')},tristate:{barWidth:4,barSpacing:1,posBarColor:"#6f6",negBarColor:"#f44",zeroBarColor:"#999",colorMap:{},tooltipFormat:new v('<span style="color: {{color}}">&#9679;</span> {{value:map}}'),tooltipValueLookups:{map:{"-1":"Loss",0:"Draw",1:"Win"}}},discrete:{lineHeight:"auto",thresholdColor:q,thresholdValue:0,chartRangeMax:q,chartRangeMin:q,chartRangeClip:!1,tooltipFormat:new v("{{prefix}}{{value}}{{suffix}}")},bullet:{targetColor:"#f33",targetWidth:3,performanceColor:"#33f",rangeColors:["#d3dafe","#a8b6ff","#7f94ff"],base:q,tooltipFormat:new v("{{fieldkey:fields}} - {{value}}"),tooltipValueLookups:{fields:{r:"Range",p:"Performance",t:"Target"}}},pie:{offset:0,sliceColors:["#3366cc","#dc3912","#ff9900","#109618","#66aa00","#dd4477","#0099c6","#990099"],borderWidth:0,borderColor:"#000",tooltipFormat:new v('<span style="color: {{color}}">&#9679;</span> {{value}} ({{percent.1}}%)')},box:{raw:!1,boxLineColor:"#000",boxFillColor:"#cdf",whiskerColor:"#000",outlierLineColor:"#333",outlierFillColor:"#fff",medianColor:"#f00",showOutliers:!0,outlierIQR:1.5,spotRadius:1.5,target:q,targetColor:"#4a2",chartRangeMax:q,chartRangeMin:q,tooltipFormat:new v("{{field:fields}}: {{value}}"),tooltipFormatFieldlistKey:"field",tooltipValueLookups:{fields:{lq:"Lower Quartile",med:"Median",uq:"Upper Quartile",lo:"Left Outlier",ro:"Right Outlier",lw:"Left Whisker",rw:"Right Whisker"}}}}},m='.jqstooltip { position: absolute;left: 0px;top: 0px;visibility: hidden;background: rgb(0, 0, 0) transparent;background-color: rgba(0,0,0,0.6);filter:progid:DXImageTransform.Microsoft.gradient(startColorstr=#99000000, endColorstr=#99000000);-ms-filter: "progid:DXImageTransform.Microsoft.gradient(startColorstr=#99000000, endColorstr=#99000000)";color: white;font: 10px arial, san serif;text-align: left;white-space: nowrap;padding: 5px;border: 1px solid white;z-index: 10000;}.jqsfield { color: white;font: 10px arial, san serif;text-align: left;}',e=function(){var t,e;return t=function(){this.init.apply(this,arguments)},arguments.length>1?(arguments[0]?(t.prototype=L.extend(new arguments[0],arguments[arguments.length-1]),t._super=arguments[0].prototype):t.prototype=arguments[arguments.length-1],arguments.length>2&&(e=Array.prototype.slice.call(arguments,1,-1),e.unshift(t.prototype),L.extend.apply(L,e))):t.prototype=arguments[0],t.prototype.cls=t,t},L.SPFormatClass=v=e({fre:/\{\{([\w.]+?)(:(.+?))?\}\}/g,precre:/(\w+)\.(\d+)/,init:function(t,e){this.format=t,this.fclass=e},render:function(t,e,i){var n=this,s=t,r,o,a,l,c;return this.format.replace(this.fre,function(){var t;return o=arguments[1],a=arguments[3],r=n.precre.exec(o),r?(c=r[2],o=r[1]):c=!1,l=s[o],l===q?"":a&&e&&e[a]?(t=e[a],t.get?e[a].get(l)||l:e[a][l]||l):(h(l)&&(i.get("numberFormatter")?l=i.get("numberFormatter")(l):l=u(l,c,i.get("numberDigitGroupCount"),i.get("numberDigitGroupSep"),i.get("numberDecimalMark"))),l)})}}),L.spformat=function(t,e){return new v(t,e)},R=function(t,e,i){return t<e?e:t>i?i:t},w=function(t,e){var i;return e===2?(i=Y.floor(t.length/2),t.length%2?t[i]:(t[i-1]+t[i])/2):t.length%2?(i=(t.length*e+e)/4,i%1?(t[Y.floor(i)]+t[Y.floor(i)-1])/2:t[i-1]):(i=(t.length*e+2)/4,i%1?(t[Y.floor(i)]+t[Y.floor(i)-1])/2:t[i-1])},z=function(t){var e;switch(t){case"undefined":t=q;break;case"null":t=null;break;case"true":t=!0;break;case"false":t=!1;break;default:e=parseFloat(t),t==e&&(t=e)}return t},N=function(t){var e,i=[];for(e=t.length;e--;)i[e]=z(t[e]);return i},B=function(t,e){var i,n,s=[];for(i=0,n=t.length;i<n;i++)t[i]!==e&&s.push(t[i]);return s},h=function(t){return!isNaN(parseFloat(t))&&isFinite(t)},u=function(t,e,i,n,s){var r,o;t=(e===!1?parseFloat(t).toString():t.toFixed(e)).split(""),r=(r=L.inArray(".",t))<0?t.length:r,r<t.length&&(t[r]=s);for(o=r-i;o>0;o-=i)t.splice(o,0,n);return t.join("")},_=function(t,e,i){var n;for(n=e.length;n--;){if(i&&e[n]===null)continue;if(e[n]!==t)return!1}return!0},i=function(t){var e=0,i;for(i=t.length;i--;)e+=typeof t[i]=="number"?t[i]:0;return e},r=function(t){return L.isArray(t)?t:[t]},n=function(t){var e;D.createStyleSheet?D.createStyleSheet().cssText=t:(e=D.createElement("style"),e.type="text/css",D.getElementsByTagName("head")[0].appendChild(e),e[typeof D.body.style.WebkitAppearance=="string"?"innerText":"innerHTML"]=t)},L.fn.simpledraw=function(t,e,i,n){var s,r;if(i&&(s=this.data("_jqs_vcanvas")))return s;if(L.fn.sparkline.canvas===!1)return!1;if(L.fn.sparkline.canvas===q){var o=D.createElement("canvas");if(!o.getContext||!o.getContext("2d")){if(!D.namespaces||!!D.namespaces.v)return L.fn.sparkline.canvas=!1,!1;D.namespaces.add("v","urn:schemas-microsoft-com:vml","#default#VML"),L.fn.sparkline.canvas=function(t,e,i,n){return new C(t,e,i)}}else L.fn.sparkline.canvas=function(t,e,i,n){return new k(t,e,i,n)}}return t===q&&(t=L(this).innerWidth()),e===q&&(e=L(this).innerHeight()),s=L.fn.sparkline.canvas(t,e,this,n),r=L(this).data("_jqs_mhandler"),r&&r.registerCanvas(s),s},L.fn.cleardraw=function(){var t=this.data("_jqs_vcanvas");t&&t.reset()},L.RangeMapClass=j=e({init:function(t){var e,i,n=[];for(e in t)t.hasOwnProperty(e)&&typeof e=="string"&&e.indexOf(":")>-1&&(i=e.split(":"),i[0]=i[0].length===0?-Infinity:parseFloat(i[0]),i[1]=i[1].length===0?Infinity:parseFloat(i[1]),i[2]=t[e],n.push(i));this.map=t,this.rangelist=n||!1},get:function(t){var e=this.rangelist,i,n,s;if((s=this.map[t])!==q)return s;if(e)for(i=e.length;i--;){n=e[i];if(n[0]<=t&&n[1]>=t)return n[2]}return q}}),L.range_map=function(t){return new j(t)},d=e({init:function(t,e){var i=L(t);this.$el=i,this.options=e,this.currentPageX=0,this.currentPageY=0,this.el=t,this.splist=[],this.tooltip=null,this.over=!1,this.displayTooltips=!e.get("disableTooltips"),this.highlightEnabled=!e.get("disableHighlight")},registerSparkline:function(t){this.splist.push(t),this.over&&this.updateDisplay()},registerCanvas:function(t){var e=L(t.canvas);this.canvas=t,this.$canvas=e,e.mouseenter(L.proxy(this.mouseenter,this)),e.mouseleave(L.proxy(this.mouseleave,this)),e.click(L.proxy(this.mouseclick,this))},reset:function(t){this.splist=[],this.tooltip&&t&&(this.tooltip.remove(),this.tooltip=q)},mouseclick:function(t){var e=L.Event("sparklineClick");e.originalEvent=t,e.sparklines=this.splist,this.$el.trigger(e)},mouseenter:function(t){L(D.body).unbind("mousemove.jqs"),L(D.body).bind("mousemove.jqs",L.proxy(this.mousemove,this)),this.over=!0,this.currentPageX=t.pageX,this.currentPageY=t.pageY,this.currentEl=t.target,!this.tooltip&&this.displayTooltips&&(this.tooltip=new s(this.options),this.tooltip.updatePosition(t.pageX,t.pageY)),this.updateDisplay()},mouseleave:function(){L(D.body).unbind("mousemove.jqs");var t=this.splist,e=t.length,i=!1,n,s;this.over=!1,this.currentEl=null,this.tooltip&&(this.tooltip.remove(),this.tooltip=null);for(s=0;s<e;s++)n=t[s],n.clearRegionHighlight()&&(i=!0);i&&this.canvas.render()},mousemove:function(t){this.currentPageX=t.pageX,this.currentPageY=t.pageY,this.currentEl=t.target,this.tooltip&&this.tooltip.updatePosition(t.pageX,t.pageY),this.updateDisplay()},updateDisplay:function(){var t=this.splist,e=t.length,i=!1,n=this.$canvas.offset(),s=this.currentPageX-n.left,r=this.currentPageY-n.top,o,a,l,c,h;if(!this.over)return;for(l=0;l<e;l++)a=t[l],c=a.setRegionHighlight(this.currentEl,s,r),c&&(i=!0);if(i){h=L.Event("sparklineRegionChange"),h.sparklines=this.splist,this.$el.trigger(h);if(this.tooltip){o="";for(l=0;l<e;l++)a=t[l],o+=a.getCurrentRegionTooltip();this.tooltip.setContent(o)}this.disableHighlight||this.canvas.render()}c===null&&this.mouseleave()}}),s=e({sizeStyle:"position: static !important;display: block !important;visibility: hidden !important;float: left !important;",init:function(t){var e=t.get("tooltipClassname","jqstooltip"),i=this.sizeStyle,n;this.container=t.get("tooltipContainer")||D.body,this.tooltipOffsetX=t.get("tooltipOffsetX",10),this.tooltipOffsetY=t.get("tooltipOffsetY",12),L("#jqssizetip").remove(),L("#jqstooltip").remove(),this.sizetip=L("<div/>",{id:"jqssizetip",style:i,class:e}),this.tooltip=L("<div/>",{id:"jqstooltip",class:e}).appendTo(this.container),n=this.tooltip.offset(),this.offsetLeft=n.left,this.offsetTop=n.top,this.hidden=!0,L(window).unbind("resize.jqs scroll.jqs"),L(window).bind("resize.jqs scroll.jqs",L.proxy(this.updateWindowDims,this)),this.updateWindowDims()},updateWindowDims:function(){this.scrollTop=L(window).scrollTop(),this.scrollLeft=L(window).scrollLeft(),this.scrollRight=this.scrollLeft+L(window).width(),this.updatePosition()},getSize:function(t){this.sizetip.html(t).appendTo(this.container),this.width=this.sizetip.width()+1,this.height=this.sizetip.height(),this.sizetip.remove()},setContent:function(t){if(!t){this.tooltip.css("visibility","hidden"),this.hidden=!0;return}this.getSize(t),this.tooltip.html(t).css({width:this.width,height:this.height,visibility:"visible"}),this.hidden&&(this.hidden=!1,this.updatePosition())},updatePosition:function(t,e){if(t===q){if(this.mousex===q)return;t=this.mousex-this.offsetLeft,e=this.mousey-this.offsetTop}else this.mousex=t-=this.offsetLeft,this.mousey=e-=this.offsetTop;if(!this.height||!this.width||this.hidden)return;e-=this.height+this.tooltipOffsetY,t+=this.tooltipOffsetX,e<this.scrollTop&&(e=this.scrollTop),t<this.scrollLeft?t=this.scrollLeft:t+this.width>this.scrollRight&&(t=this.scrollRight-this.width),this.tooltip.css({left:t,top:e})},remove:function(){this.tooltip.remove(),this.sizetip.remove(),this.sizetip=this.tooltip=q,L(window).unbind("resize.jqs scroll.jqs")}}),g=function(){n(m)},L(g),S=[],L.fn.sparkline=function(c,i){return this.each(function(){var a=new L.fn.sparkline.options(this,i),l=L(this),t,e;t=function(){var t,e,i,n,s,r,o;if(c==="html"||c===q){o=this.getAttribute(a.get("tagValuesAttribute"));if(o===q||o===null)o=l.html();t=o.replace(/(^\s*<!--)|(-->\s*$)|\s+/g,"").split(",")}else t=c;e=a.get("width")==="auto"?t.length*a.get("defaultPixelsPerValue"):a.get("width");if(a.get("height")==="auto"){if(!a.get("composite")||!L.data(this,"_jqs_vcanvas"))n=D.createElement("span"),n.innerHTML="a",l.html(n),i=L(n).innerHeight()||L(n).height(),L(n).remove(),n=null}else i=a.get("height");a.get("disableInteraction")?s=!1:(s=L.data(this,"_jqs_mhandler"),s?a.get("composite")||s.reset():(s=new d(this,a),L.data(this,"_jqs_mhandler",s)));if(a.get("composite")&&!L.data(this,"_jqs_vcanvas")){L.data(this,"_jqs_errnotify")||(alert("Attempted to attach a composite sparkline to an element with no existing sparkline"),L.data(this,"_jqs_errnotify",!0));return}r=new L.fn.sparkline[a.get("type")](this,t,a,e,i),r.render(),s&&s.registerSparkline(r)};if(L(this).html()&&!a.get("disableHiddenCheck")&&L(this).is(":hidden")||!L(this).parents("body").length){if(!a.get("composite")&&L.data(this,"_jqs_pending"))for(e=S.length;e;e--)S[e-1][0]==this&&S.splice(e-1,1);S.push([this,t]),L.data(this,"_jqs_pending",!0)}else t.call(this)})},L.fn.sparkline.defaults=t(),L.sparkline_display_visible=function(){var t,e,i,n=[];for(e=0,i=S.length;e<i;e++)t=S[e][0],L(t).is(":visible")&&!L(t).parents().is(":hidden")?(S[e][1].call(t),L.data(S[e][0],"_jqs_pending",!1),n.push(e)):!L(t).closest("html").length&&!L.data(t,"_jqs_pending")&&(L.data(S[e][0],"_jqs_pending",!1),n.push(e));for(e=n.length;e;e--)S.splice(n[e-1],1)},L.fn.sparkline.options=e({init:function(t,e){var i,n,s,r;this.userOptions=e=e||{},this.tag=t,this.tagValCache={},n=L.fn.sparkline.defaults,s=n.common,this.tagOptionsPrefix=e.enableTagOptions&&(e.tagOptionsPrefix||s.tagOptionsPrefix),r=this.getTagSetting("type"),r===o?i=n[e.type||s.type]:i=n[r],this.mergedOptions=L.extend({},s,i,e)},getTagSetting:function(t){var e=this.tagOptionsPrefix,i,n,s,r;if(e===!1||e===q)return o;if(this.tagValCache.hasOwnProperty(t))i=this.tagValCache.key;else{i=this.tag.getAttribute(e+t);if(i===q||i===null)i=o;else if(i.substr(0,1)==="["){i=i.substr(1,i.length-2).split(",");for(n=i.length;n--;)i[n]=z(i[n].replace(/(^\s*)|(\s*$)/g,""))}else if(i.substr(0,1)==="{"){s=i.substr(1,i.length-2).split(","),i={};for(n=s.length;n--;)r=s[n].split(":",2),i[r[0].replace(/(^\s*)|(\s*$)/g,"")]=z(r[1].replace(/(^\s*)|(\s*$)/g,""))}else i=z(i);this.tagValCache.key=i}return i},get:function(t,e){var i=this.getTagSetting(t),n;return i!==o?i:(n=this.mergedOptions[t])===q?e:n}}),L.fn.sparkline._base=e({disabled:!1,init:function(t,e,i,n,s){this.el=t,this.$el=L(t),this.values=e,this.options=i,this.width=n,this.height=s,this.currentRegion=q},initTarget:function(){var t=!this.options.get("disableInteraction");(this.target=this.$el.simpledraw(this.width,this.height,this.options.get("composite"),t))?(this.canvasWidth=this.target.pixelWidth,this.canvasHeight=this.target.pixelHeight):this.disabled=!0},render:function(){return this.disabled?(this.el.innerHTML="",!1):!0},getRegion:function(t,e){},setRegionHighlight:function(t,e,i){var n=this.currentRegion,s=!this.options.get("disableHighlight"),r;return e>this.canvasWidth||i>this.canvasHeight||e<0||i<0?null:(r=this.getRegion(t,e,i),n!==r?(n!==q&&s&&this.removeHighlight(),this.currentRegion=r,r!==q&&s&&this.renderHighlight(),!0):!1)},clearRegionHighlight:function(){return this.currentRegion!==q?(this.removeHighlight(),this.currentRegion=q,!0):!1},renderHighlight:function(){this.changeHighlight(!0)},removeHighlight:function(){this.changeHighlight(!1)},changeHighlight:function(t){},getCurrentRegionTooltip:function(){var t=this.options,e="",i=[],n,s,r,o,a,l,c,h,u,d,f,p,m,g;if(this.currentRegion===q)return"";n=this.getCurrentRegionFields(),f=t.get("tooltipFormatter");if(f)return f(this,t,n);t.get("tooltipChartTitle")&&(e+='<div class="jqs jqstitle">'+t.get("tooltipChartTitle")+"</div>\n"),s=this.options.get("tooltipFormat");if(!s)return"";L.isArray(s)||(s=[s]),L.isArray(n)||(n=[n]),c=this.options.get("tooltipFormatFieldlist"),h=this.options.get("tooltipFormatFieldlistKey");if(c&&h){u=[];for(l=n.length;l--;)d=n[l][h],(g=L.inArray(d,c))!=-1&&(u[g]=n[l]);n=u}r=s.length,m=n.length;for(l=0;l<r;l++){p=s[l],typeof p=="string"&&(p=new v(p)),o=p.fclass||"jqsfield";for(g=0;g<m;g++)if(!n[g].isNull||!t.get("tooltipSkipNull"))L.extend(n[g],{prefix:t.get("tooltipPrefix"),suffix:t.get("tooltipSuffix")}),a=p.render(n[g],t.get("tooltipValueLookups"),t),i.push('<div class="'+o+'">'+a+"</div>")}return i.length?e+i.join("\n"):""},getCurrentRegionFields:function(){},calcHighlightColor:function(t,e){var i=e.get("highlightColor"),n=e.get("highlightLighten"),s,r,o,a;if(i)return i;if(n){s=/^#([0-9a-f])([0-9a-f])([0-9a-f])$/i.exec(t)||/^#([0-9a-f]{2})([0-9a-f]{2})([0-9a-f]{2})$/i.exec(t);if(s){o=[],r=t.length===4?16:1;for(a=0;a<3;a++)o[a]=R(Y.round(parseInt(s[a+1],16)*r*n),0,255);return"rgb("+o.join(",")+")"}}return t}}),a={changeHighlight:function(t){var e=this.currentRegion,i=this.target,n=this.regionShapes[e],s;n&&(s=this.renderRegion(e,t),L.isArray(s)||L.isArray(n)?(i.replaceWithShapes(n,s),this.regionShapes[e]=L.map(s,function(t){return t.id})):(i.replaceWithShape(n,s),this.regionShapes[e]=s.id))},render:function(){var t=this.values,e=this.target,i=this.regionShapes,n,s,r,o;if(!this.cls._super.render.call(this))return;for(r=t.length;r--;){n=this.renderRegion(r);if(n)if(L.isArray(n)){s=[];for(o=n.length;o--;)n[o].append(),s.push(n[o].id);i[r]=s}else n.append(),i[r]=n.id;else i[r]=null}e.render()}},L.fn.sparkline.line=F=e(L.fn.sparkline._base,{type:"line",init:function(t,e,i,n,s){F._super.init.call(this,t,e,i,n,s),this.vertices=[],this.regionMap=[],this.xvalues=[],this.yvalues=[],this.yminmax=[],this.hightlightSpotId=null,this.lastShapeId=null,this.initTarget()},getRegion:function(t,e,i){var n,s=this.regionMap;for(n=s.length;n--;)if(s[n]!==null&&e>=s[n][0]&&e<=s[n][1])return s[n][2];return q},getCurrentRegionFields:function(){var t=this.currentRegion;return{isNull:this.yvalues[t]===null,x:this.xvalues[t],y:this.yvalues[t],color:this.options.get("lineColor"),fillColor:this.options.get("fillColor"),offset:t}},renderHighlight:function(){var t=this.currentRegion,e=this.target,i=this.vertices[t],n=this.options,s=n.get("spotRadius"),r=n.get("highlightSpotColor"),o=n.get("highlightLineColor"),a,l;if(!i)return;s&&r&&(a=e.drawCircle(i[0],i[1],s,q,r),this.highlightSpotId=a.id,e.insertAfterShape(this.lastShapeId,a)),o&&(l=e.drawLine(i[0],this.canvasTop,i[0],this.canvasTop+this.canvasHeight,o),this.highlightLineId=l.id,e.insertAfterShape(this.lastShapeId,l))},removeHighlight:function(){var t=this.target;this.highlightSpotId&&(t.removeShapeId(this.highlightSpotId),this.highlightSpotId=null),this.highlightLineId&&(t.removeShapeId(this.highlightLineId),this.highlightLineId=null)},scanValues:function(){var t=this.values,e=t.length,i=this.xvalues,n=this.yvalues,s=this.yminmax,r,o,a,l,c;for(r=0;r<e;r++)o=t[r],a=typeof t[r]=="string",l=typeof t[r]=="object"&&t[r]instanceof Array,c=a&&t[r].split(":"),a&&c.length===2?(i.push(Number(c[0])),n.push(Number(c[1])),s.push(Number(c[1]))):l?(i.push(o[0]),n.push(o[1]),s.push(o[1])):(i.push(r),t[r]===null||t[r]==="null"?n.push(null):(n.push(Number(o)),s.push(Number(o))));this.options.get("xvalues")&&(i=this.options.get("xvalues")),this.maxy=this.maxyorg=Y.max.apply(Y,s),this.miny=this.minyorg=Y.min.apply(Y,s),this.maxx=Y.max.apply(Y,i),this.minx=Y.min.apply(Y,i),this.xvalues=i,this.yvalues=n,this.yminmax=s},processRangeOptions:function(){var t=this.options,e=t.get("normalRangeMin"),i=t.get("normalRangeMax");e!==q&&(e<this.miny&&(this.miny=e),i>this.maxy&&(this.maxy=i)),t.get("chartRangeMin")!==q&&(t.get("chartRangeClip")||t.get("chartRangeMin")<this.miny)&&(this.miny=t.get("chartRangeMin")),t.get("chartRangeMax")!==q&&(t.get("chartRangeClip")||t.get("chartRangeMax")>this.maxy)&&(this.maxy=t.get("chartRangeMax")),t.get("chartRangeMinX")!==q&&(t.get("chartRangeClipX")||t.get("chartRangeMinX")<this.minx)&&(this.minx=t.get("chartRangeMinX")),t.get("chartRangeMaxX")!==q&&(t.get("chartRangeClipX")||t.get("chartRangeMaxX")>this.maxx)&&(this.maxx=t.get("chartRangeMaxX"))},drawNormalRange:function(t,e,i,n,s){var r=this.options.get("normalRangeMin"),o=this.options.get("normalRangeMax"),a=e+Y.round(i-i*((o-this.miny)/s)),l=Y.round(i*(o-r)/s);this.target.drawRect(t,a,n,l,q,this.options.get("normalRangeColor")).append()},render:function(){var t=this.options,e=this.target,i=this.canvasWidth,n=this.canvasHeight,s=this.vertices,r=t.get("spotRadius"),o=this.regionMap,a,l,c,h,u,d,f,p,m,g,v,y,b,w,x,_,k,C,S,T,D,M,P,I,E;if(!F._super.render.call(this))return;this.scanValues(),this.processRangeOptions(),P=this.xvalues,I=this.yvalues;if(!this.yminmax.length||this.yvalues.length<2)return;h=u=0,a=this.maxx-this.minx===0?1:this.maxx-this.minx,l=this.maxy-this.miny===0?1:this.maxy-this.miny,c=this.yvalues.length-1,r&&(i<r*4||n<r*4)&&(r=0);if(r){D=t.get("highlightSpotColor")&&!t.get("disableInteraction");if(D||t.get("minSpotColor")||t.get("spotColor")&&I[c]===this.miny)n-=Y.ceil(r);if(D||t.get("maxSpotColor")||t.get("spotColor")&&I[c]===this.maxy)n-=Y.ceil(r),h+=Y.ceil(r);if(D||(t.get("minSpotColor")||t.get("maxSpotColor"))&&(I[0]===this.miny||I[0]===this.maxy))u+=Y.ceil(r),i-=Y.ceil(r);if(D||t.get("spotColor")||t.get("minSpotColor")||t.get("maxSpotColor")&&(I[c]===this.miny||I[c]===this.maxy))i-=Y.ceil(r)}n--,t.get("normalRangeMin")!==q&&!t.get("drawNormalOnTop")&&this.drawNormalRange(u,h,n,i,l),f=[],p=[f],w=x=null,_=I.length;for(E=0;E<_;E++)m=P[E],v=P[E+1],g=I[E],y=u+Y.round((m-this.minx)*(i/a)),b=E<_-1?u+Y.round((v-this.minx)*(i/a)):i,x=y+(b-y)/2,o[E]=[w||0,x,E],w=x,g===null?E&&(I[E-1]!==null&&(f=[],p.push(f)),s.push(null)):(g<this.miny&&(g=this.miny),g>this.maxy&&(g=this.maxy),f.length||f.push([y,h+n]),d=[y,h+Y.round(n-n*((g-this.miny)/l))],f.push(d),s.push(d));k=[],C=[],S=p.length;for(E=0;E<S;E++)f=p[E],f.length&&(t.get("fillColor")&&(f.push([f[f.length-1][0],h+n]),C.push(f.slice(0)),f.pop()),f.length>2&&(f[0]=[f[0][0],f[1][1]]),k.push(f));S=C.length;for(E=0;E<S;E++)e.drawShape(C[E],t.get("fillColor"),t.get("fillColor")).append();t.get("normalRangeMin")!==q&&t.get("drawNormalOnTop")&&this.drawNormalRange(u,h,n,i,l),S=k.length;for(E=0;E<S;E++)e.drawShape(k[E],t.get("lineColor"),q,t.get("lineWidth")).append();if(r&&t.get("valueSpots")){T=t.get("valueSpots"),T.get===q&&(T=new j(T));for(E=0;E<_;E++)M=T.get(I[E]),M&&e.drawCircle(u+Y.round((P[E]-this.minx)*(i/a)),h+Y.round(n-n*((I[E]-this.miny)/l)),r,q,M).append()}r&&t.get("spotColor")&&I[c]!==null&&e.drawCircle(u+Y.round((P[P.length-1]-this.minx)*(i/a)),h+Y.round(n-n*((I[c]-this.miny)/l)),r,q,t.get("spotColor")).append(),this.maxy!==this.minyorg&&(r&&t.get("minSpotColor")&&(m=P[L.inArray(this.minyorg,I)],e.drawCircle(u+Y.round((m-this.minx)*(i/a)),h+Y.round(n-n*((this.minyorg-this.miny)/l)),r,q,t.get("minSpotColor")).append()),r&&t.get("maxSpotColor")&&(m=P[L.inArray(this.maxyorg,I)],e.drawCircle(u+Y.round((m-this.minx)*(i/a)),h+Y.round(n-n*((this.maxyorg-this.miny)/l)),r,q,t.get("maxSpotColor")).append())),this.lastShapeId=e.getLastShapeId(),this.canvasTop=h,e.render()}}),L.fn.sparkline.bar=W=e(L.fn.sparkline._base,a,{type:"bar",init:function(t,e,i,n,s){var r=parseInt(i.get("barWidth"),10),o=parseInt(i.get("barSpacing"),10),a=i.get("chartRangeMin"),l=i.get("chartRangeMax"),c=i.get("chartRangeClip"),h=Infinity,u=-Infinity,d,f,p,m,g,v,y,b,w,x,_,k,C,S,T,D,M,P,I,E,F,$,O;W._super.init.call(this,t,e,i,n,s);for(v=0,y=e.length;v<y;v++){E=e[v],d=typeof E=="string"&&E.indexOf(":")>-1;if(d||L.isArray(E))T=!0,d&&(E=e[v]=N(E.split(":"))),E=B(E,null),f=Y.min.apply(Y,E),p=Y.max.apply(Y,E),f<h&&(h=f),p>u&&(u=p)}this.stacked=T,this.regionShapes={},this.barWidth=r,this.barSpacing=o,this.totalBarWidth=r+o,this.width=n=e.length*r+(e.length-1)*o,this.initTarget(),c&&(C=a===q?-Infinity:a,S=l===q?Infinity:l),g=[],m=T?[]:g;var A=[],H=[];for(v=0,y=e.length;v<y;v++)if(T){D=e[v],e[v]=I=[],A[v]=0,m[v]=H[v]=0;for(M=0,P=D.length;M<P;M++)E=I[M]=c?R(D[M],C,S):D[M],E!==null&&(E>0&&(A[v]+=E),h<0&&u>0?E<0?H[v]+=Y.abs(E):m[v]+=E:m[v]+=Y.abs(E-(E<0?u:h)),g.push(E))}else E=c?R(e[v],C,S):e[v],E=e[v]=z(E),E!==null&&g.push(E);this.max=k=Y.max.apply(Y,g),this.min=_=Y.min.apply(Y,g),this.stackMax=u=T?Y.max.apply(Y,A):k,this.stackMin=h=T?Y.min.apply(Y,g):_,i.get("chartRangeMin")!==q&&(i.get("chartRangeClip")||i.get("chartRangeMin")<_)&&(_=i.get("chartRangeMin")),i.get("chartRangeMax")!==q&&(i.get("chartRangeClip")||i.get("chartRangeMax")>k)&&(k=i.get("chartRangeMax")),this.zeroAxis=w=i.get("zeroAxis",!0),_<=0&&k>=0&&w?x=0:w==0?x=_:_>0?x=_:x=k,this.xaxisOffset=x,b=T?Y.max.apply(Y,m)+Y.max.apply(Y,H):k-_,this.canvasHeightEf=w&&_<0?this.canvasHeight-2:this.canvasHeight-1,_<x?($=T&&k>=0?u:k,F=($-x)/b*this.canvasHeight,F!==Y.ceil(F)&&(this.canvasHeightEf-=2,F=Y.ceil(F))):F=this.canvasHeight,this.yoffset=F,L.isArray(i.get("colorMap"))?(this.colorMapByIndex=i.get("colorMap"),this.colorMapByValue=null):(this.colorMapByIndex=null,this.colorMapByValue=i.get("colorMap"),this.colorMapByValue&&this.colorMapByValue.get===q&&(this.colorMapByValue=new j(this.colorMapByValue))),this.range=b},getRegion:function(t,e,i){var n=Y.floor(e/this.totalBarWidth);return n<0||n>=this.values.length?q:n},getCurrentRegionFields:function(){var t=this.currentRegion,e=r(this.values[t]),i=[],n,s;for(s=e.length;s--;)n=e[s],i.push({isNull:n===null,value:n,color:this.calcColor(s,n,t),offset:t});return i},calcColor:function(t,e,i){var n=this.colorMapByIndex,s=this.colorMapByValue,r=this.options,o,a;return this.stacked?o=r.get("stackedBarColor"):o=e<0?r.get("negBarColor"):r.get("barColor"),e===0&&r.get("zeroColor")!==q&&(o=r.get("zeroColor")),s&&(a=s.get(e))?o=a:n&&n.length>i&&(o=n[i]),L.isArray(o)?o[t%o.length]:o},renderRegion:function(t,e){var i=this.values[t],n=this.options,s=this.xaxisOffset,r=[],o=this.range,a=this.stacked,l=this.target,c=t*this.totalBarWidth,h=this.canvasHeightEf,u=this.yoffset,d,f,p,m,g,v,y,b,w,x;i=L.isArray(i)?i:[i],y=i.length,b=i[0],m=_(null,i),x=_(s,i,!0);if(m)return n.get("nullColor")?(p=e?n.get("nullColor"):this.calcHighlightColor(n.get("nullColor"),n),d=u>0?u-1:u,l.drawRect(c,d,this.barWidth-1,0,p,p)):q;g=u;for(v=0;v<y;v++){b=i[v];if(a&&b===s){if(!x||w)continue;w=!0}o>0?f=Y.floor(h*(Y.abs(b-s)/o))+1:f=1,b<s||b===s&&u===0?(d=g,g+=f):(d=u-f,u-=f),p=this.calcColor(v,b,t),e&&(p=this.calcHighlightColor(p,n)),r.push(l.drawRect(c,d,this.barWidth-1,f-1,p,p))}return r.length===1?r[0]:r}}),L.fn.sparkline.tristate=l=e(L.fn.sparkline._base,a,{type:"tristate",init:function(t,e,i,n,s){var r=parseInt(i.get("barWidth"),10),o=parseInt(i.get("barSpacing"),10);l._super.init.call(this,t,e,i,n,s),this.regionShapes={},this.barWidth=r,this.barSpacing=o,this.totalBarWidth=r+o,this.values=L.map(e,Number),this.width=n=e.length*r+(e.length-1)*o,L.isArray(i.get("colorMap"))?(this.colorMapByIndex=i.get("colorMap"),this.colorMapByValue=null):(this.colorMapByIndex=null,this.colorMapByValue=i.get("colorMap"),this.colorMapByValue&&this.colorMapByValue.get===q&&(this.colorMapByValue=new j(this.colorMapByValue))),this.initTarget()},getRegion:function(t,e,i){return Y.floor(e/this.totalBarWidth)},getCurrentRegionFields:function(){var t=this.currentRegion;return{isNull:this.values[t]===q,value:this.values[t],color:this.calcColor(this.values[t],t),offset:t}},calcColor:function(t,e){var i=this.values,n=this.options,s=this.colorMapByIndex,r=this.colorMapByValue,o,a;return r&&(a=r.get(t))?o=a:s&&s.length>e?o=s[e]:i[e]<0?o=n.get("negBarColor"):i[e]>0?o=n.get("posBarColor"):o=n.get("zeroBarColor"),o},renderRegion:function(t,e){var i=this.values,n=this.options,s=this.target,r,o,a,l,c,h;r=s.pixelHeight,a=Y.round(r/2),l=t*this.totalBarWidth,i[t]<0?(c=a,o=a-1):i[t]>0?(c=0,o=a-1):(c=a-1,o=2),h=this.calcColor(i[t],t);if(h===null)return;return e&&(h=this.calcHighlightColor(h,n)),s.drawRect(l,c,this.barWidth-1,o-1,h,h)}}),L.fn.sparkline.discrete=c=e(L.fn.sparkline._base,a,{type:"discrete",init:function(t,e,i,n,s){c._super.init.call(this,t,e,i,n,s),this.regionShapes={},this.values=e=L.map(e,Number),this.min=Y.min.apply(Y,e),this.max=Y.max.apply(Y,e),this.range=this.max-this.min,this.width=n=i.get("width")==="auto"?e.length*2:this.width,this.interval=Y.floor(n/e.length),this.itemWidth=n/e.length,i.get("chartRangeMin")!==q&&(i.get("chartRangeClip")||i.get("chartRangeMin")<this.min)&&(this.min=i.get("chartRangeMin")),i.get("chartRangeMax")!==q&&(i.get("chartRangeClip")||i.get("chartRangeMax")>this.max)&&(this.max=i.get("chartRangeMax")),this.initTarget(),this.target&&(this.lineHeight=i.get("lineHeight")==="auto"?Y.round(this.canvasHeight*.3):i.get("lineHeight"))},getRegion:function(t,e,i){return Y.floor(e/this.itemWidth)},getCurrentRegionFields:function(){var t=this.currentRegion;return{isNull:this.values[t]===q,value:this.values[t],offset:t}},renderRegion:function(t,e){var i=this.values,n=this.options,s=this.min,r=this.max,o=this.range,a=this.interval,l=this.target,c=this.canvasHeight,h=this.lineHeight,u=c-h,d,f,p,m;return f=R(i[t],s,r),m=t*a,d=Y.round(u-u*((f-s)/o)),p=n.get("thresholdColor")&&f<n.get("thresholdValue")?n.get("thresholdColor"):n.get("lineColor"),e&&(p=this.calcHighlightColor(p,n)),l.drawLine(m,d,m,d+h,p)}}),L.fn.sparkline.bullet=f=e(L.fn.sparkline._base,{type:"bullet",init:function(t,e,i,n,s){var r,o,a;f._super.init.call(this,t,e,i,n,s),this.values=e=N(e),a=e.slice(),a[0]=a[0]===null?a[2]:a[0],a[1]=e[1]===null?a[2]:a[1],r=Y.min.apply(Y,e),o=Y.max.apply(Y,e),i.get("base")===q?r=r<0?r:0:r=i.get("base"),this.min=r,this.max=o,this.range=o-r,this.shapes={},this.valueShapes={},this.regiondata={},this.width=n=i.get("width")==="auto"?"4.0em":n,this.target=this.$el.simpledraw(n,s,i.get("composite")),e.length||(this.disabled=!0),this.initTarget()},getRegion:function(t,e,i){var n=this.target.getShapeAt(t,e,i);return n!==q&&this.shapes[n]!==q?this.shapes[n]:q},getCurrentRegionFields:function(){var t=this.currentRegion;return{fieldkey:t.substr(0,1),value:this.values[t.substr(1)],region:t}},changeHighlight:function(t){var e=this.currentRegion,i=this.valueShapes[e],n;delete this.shapes[i];switch(e.substr(0,1)){case"r":n=this.renderRange(e.substr(1),t);break;case"p":n=this.renderPerformance(t);break;case"t":n=this.renderTarget(t)}this.valueShapes[e]=n.id,this.shapes[n.id]=e,this.target.replaceWithShape(i,n)},renderRange:function(t,e){var i=this.values[t],n=Y.round(this.canvasWidth*((i-this.min)/this.range)),s=this.options.get("rangeColors")[t-2];return e&&(s=this.calcHighlightColor(s,this.options)),this.target.drawRect(0,0,n-1,this.canvasHeight-1,s,s)},renderPerformance:function(t){var e=this.values[1],i=Y.round(this.canvasWidth*((e-this.min)/this.range)),n=this.options.get("performanceColor");return t&&(n=this.calcHighlightColor(n,this.options)),this.target.drawRect(0,Y.round(this.canvasHeight*.3),i-1,Y.round(this.canvasHeight*.4)-1,n,n)},renderTarget:function(t){var e=this.values[0],i=Y.round(this.canvasWidth*((e-this.min)/this.range)-this.options.get("targetWidth")/2),n=Y.round(this.canvasHeight*.1),s=this.canvasHeight-n*2,r=this.options.get("targetColor");return t&&(r=this.calcHighlightColor(r,this.options)),this.target.drawRect(i,n,this.options.get("targetWidth")-1,s-1,r,r)},render:function(){var t=this.values.length,e=this.target,i,n;if(!f._super.render.call(this))return;for(i=2;i<t;i++)n=this.renderRange(i).append(),this.shapes[n.id]="r"+i,this.valueShapes["r"+i]=n.id;this.values[1]!==null&&(n=this.renderPerformance().append(),this.shapes[n.id]="p1",this.valueShapes.p1=n.id),this.values[0]!==null&&(n=this.renderTarget().append(),this.shapes[n.id]="t0",this.valueShapes.t0=n.id),e.render()}}),L.fn.sparkline.pie=p=e(L.fn.sparkline._base,{type:"pie",init:function(t,e,i,n,s){var r=0,o;p._super.init.call(this,t,e,i,n,s),this.shapes={},this.valueShapes={},this.values=e=L.map(e,Number),i.get("width")==="auto"&&(this.width=this.height);if(e.length>0)for(o=e.length;o--;)r+=e[o];this.total=r,this.initTarget(),this.radius=Y.floor(Y.min(this.canvasWidth,this.canvasHeight)/2)},getRegion:function(t,e,i){var n=this.target.getShapeAt(t,e,i);return n!==q&&this.shapes[n]!==q?this.shapes[n]:q},getCurrentRegionFields:function(){var t=this.currentRegion;return{isNull:this.values[t]===q,value:this.values[t],percent:this.values[t]/this.total*100,color:this.options.get("sliceColors")[t%this.options.get("sliceColors").length],offset:t}},changeHighlight:function(t){var e=this.currentRegion,i=this.renderSlice(e,t),n=this.valueShapes[e];delete this.shapes[n],this.target.replaceWithShape(n,i),this.valueShapes[e]=i.id,this.shapes[i.id]=e},renderSlice:function(t,e){var i=this.target,n=this.options,s=this.radius,r=n.get("borderWidth"),o=n.get("offset"),a=2*Y.PI,l=this.values,c=this.total,h=o?2*Y.PI*(o/360):0,u,d,f,p,m;p=l.length;for(f=0;f<p;f++){u=h,d=h,c>0&&(d=h+a*(l[f]/c));if(t===f)return m=n.get("sliceColors")[f%n.get("sliceColors").length],e&&(m=this.calcHighlightColor(m,n)),i.drawPieSlice(s,s,s-r,u,d,q,m);h=d}},render:function(){var t=this.target,e=this.values,i=this.options,n=this.radius,s=i.get("borderWidth"),r,o;if(!p._super.render.call(this))return;s&&t.drawCircle(n,n,Y.floor(n-s/2),i.get("borderColor"),q,s).append();for(o=e.length;o--;)e[o]&&(r=this.renderSlice(o).append(),this.valueShapes[o]=r.id,this.shapes[r.id]=o);t.render()}}),L.fn.sparkline.box=x=e(L.fn.sparkline._base,{type:"box",init:function(t,e,i,n,s){x._super.init.call(this,t,e,i,n,s),this.values=L.map(e,Number),this.width=i.get("width")==="auto"?"4.0em":n,this.initTarget(),this.values.length||(this.disabled=1)},getRegion:function(){return 1},getCurrentRegionFields:function(){var t=[{field:"lq",value:this.quartiles[0]},{field:"med",value:this.quartiles[1]},{field:"uq",value:this.quartiles[2]}];return this.loutlier!==q&&t.push({field:"lo",value:this.loutlier}),this.routlier!==q&&t.push({field:"ro",value:this.routlier}),this.lwhisker!==q&&t.push({field:"lw",value:this.lwhisker}),this.rwhisker!==q&&t.push({field:"rw",value:this.rwhisker}),t},render:function(){var t=this.target,e=this.values,i=e.length,n=this.options,s=this.canvasWidth,r=this.canvasHeight,o=n.get("chartRangeMin")===q?Y.min.apply(Y,e):n.get("chartRangeMin"),a=n.get("chartRangeMax")===q?Y.max.apply(Y,e):n.get("chartRangeMax"),l=0,c,h,u,d,f,p,m,g,v,y,b;if(!x._super.render.call(this))return;if(n.get("raw"))n.get("showOutliers")&&e.length>5?(h=e[0],c=e[1],d=e[2],f=e[3],p=e[4],m=e[5],g=e[6]):(c=e[0],d=e[1],f=e[2],p=e[3],m=e[4]);else{e.sort(function(t,e){return t-e}),d=w(e,1),f=w(e,2),p=w(e,3),u=p-d;if(n.get("showOutliers")){c=m=q;for(v=0;v<i;v++)c===q&&e[v]>d-u*n.get("outlierIQR")&&(c=e[v]),e[v]<p+u*n.get("outlierIQR")&&(m=e[v]);h=e[0],g=e[i-1]}else c=e[0],m=e[i-1]}this.quartiles=[d,f,p],this.lwhisker=c,this.rwhisker=m,this.loutlier=h,this.routlier=g,b=s/(a-o+1),n.get("showOutliers")&&(l=Y.ceil(n.get("spotRadius")),s-=2*Y.ceil(n.get("spotRadius")),b=s/(a-o+1),h<c&&t.drawCircle((h-o)*b+l,r/2,n.get("spotRadius"),n.get("outlierLineColor"),n.get("outlierFillColor")).append(),g>m&&t.drawCircle((g-o)*b+l,r/2,n.get("spotRadius"),n.get("outlierLineColor"),n.get("outlierFillColor")).append()),t.drawRect(Y.round((d-o)*b+l),Y.round(r*.1),Y.round((p-d)*b),Y.round(r*.8),n.get("boxLineColor"),n.get("boxFillColor")).append(),t.drawLine(Y.round((c-o)*b+l),Y.round(r/2),Y.round((d-o)*b+l),Y.round(r/2),n.get("lineColor")).append(),t.drawLine(Y.round((c-o)*b+l),Y.round(r/4),Y.round((c-o)*b+l),Y.round(r-r/4),n.get("whiskerColor")).append(),t.drawLine(Y.round((m-o)*b+l),Y.round(r/2),Y.round((p-o)*b+l),Y.round(r/2),n.get("lineColor")).append(),t.drawLine(Y.round((m-o)*b+l),Y.round(r/4),Y.round((m-o)*b+l),Y.round(r-r/4),n.get("whiskerColor")).append(),t.drawLine(Y.round((f-o)*b+l),Y.round(r*.1),Y.round((f-o)*b+l),Y.round(r*.9),n.get("medianColor")).append(),n.get("target")&&(y=Y.ceil(n.get("spotRadius")),t.drawLine(Y.round((n.get("target")-o)*b+l),Y.round(r/2-y),Y.round((n.get("target")-o)*b+l),Y.round(r/2+y),n.get("targetColor")).append(),t.drawLine(Y.round((n.get("target")-o)*b+l-y),Y.round(r/2),Y.round((n.get("target")-o)*b+l+y),Y.round(r/2),n.get("targetColor")).append()),t.render()}}),y=e({init:function(t,e,i,n){this.target=t,this.id=e,this.type=i,this.args=n},append:function(){return this.target.appendShape(this),this}}),b=e({_pxregex:/(\d+)(px)?\s*$/i,init:function(t,e,i){if(!t)return;this.width=t,this.height=e,this.target=i,this.lastShapeId=null,i[0]&&(i=i[0]),L.data(i,"_jqs_vcanvas",this)},drawLine:function(t,e,i,n,s,r){return this.drawShape([[t,e],[i,n]],s,r)},drawShape:function(t,e,i,n){return this._genShape("Shape",[t,e,i,n])},drawCircle:function(t,e,i,n,s,r){return this._genShape("Circle",[t,e,i,n,s,r])},drawPieSlice:function(t,e,i,n,s,r,o){return this._genShape("PieSlice",[t,e,i,n,s,r,o])},drawRect:function(t,e,i,n,s,r){return this._genShape("Rect",[t,e,i,n,s,r])},getElement:function(){return this.canvas},getLastShapeId:function(){return this.lastShapeId},reset:function(){alert("reset not implemented")},_insert:function(t,e){L(e).html(t)},_calculatePixelDims:function(t,e,i){var n;n=this._pxregex.exec(e),n?this.pixelHeight=n[1]:this.pixelHeight=L(i).height(),n=this._pxregex.exec(t),n?this.pixelWidth=n[1]:this.pixelWidth=L(i).width()},_genShape:function(t,e){var i=T++;return e.unshift(i),new y(this,i,t,e)},appendShape:function(t){alert("appendShape not implemented")},replaceWithShape:function(t,e){alert("replaceWithShape not implemented")},insertAfterShape:function(t,e){alert("insertAfterShape not implemented")},removeShapeId:function(t){alert("removeShapeId not implemented")},getShapeAt:function(t,e,i){alert("getShapeAt not implemented")},render:function(){alert("render not implemented")}}),k=e(b,{init:function(t,e,i,n){k._super.init.call(this,t,e,i),this.canvas=D.createElement("canvas"),i[0]&&(i=i[0]),L.data(i,"_jqs_vcanvas",this),L(this.canvas).css({display:"inline-block",width:t,height:e,verticalAlign:"top"}),this._insert(this.canvas,i),this._calculatePixelDims(t,e,this.canvas),this.canvas.width=this.pixelWidth,this.canvas.height=this.pixelHeight,this.interact=n,this.shapes={},this.shapeseq=[],this.currentTargetShapeId=q,L(this.canvas).css({width:this.pixelWidth,height:this.pixelHeight})},_getContext:function(t,e,i){var n=this.canvas.getContext("2d");return t!==q&&(n.strokeStyle=t),n.lineWidth=i===q?1:i,e!==q&&(n.fillStyle=e),n},reset:function(){var t=this._getContext();t.clearRect(0,0,this.pixelWidth,this.pixelHeight),this.shapes={},this.shapeseq=[],this.currentTargetShapeId=q},_drawShape:function(t,e,i,n,s){var r=this._getContext(i,n,s),o,a;r.beginPath(),r.moveTo(e[0][0]+.5,e[0][1]+.5);for(o=1,a=e.length;o<a;o++)r.lineTo(e[o][0]+.5,e[o][1]+.5);i!==q&&r.stroke(),n!==q&&r.fill(),this.targetX!==q&&this.targetY!==q&&r.isPointInPath(this.targetX,this.targetY)&&(this.currentTargetShapeId=t)},_drawCircle:function(t,e,i,n,s,r,o){var a=this._getContext(s,r,o);a.beginPath(),a.arc(e,i,n,0,2*Y.PI,!1),this.targetX!==q&&this.targetY!==q&&a.isPointInPath(this.targetX,this.targetY)&&(this.currentTargetShapeId=t),s!==q&&a.stroke(),r!==q&&a.fill()},_drawPieSlice:function(t,e,i,n,s,r,o,a){var l=this._getContext(o,a);l.beginPath(),l.moveTo(e,i),l.arc(e,i,n,s,r,!1),l.lineTo(e,i),l.closePath(),o!==q&&l.stroke(),a&&l.fill(),this.targetX!==q&&this.targetY!==q&&l.isPointInPath(this.targetX,this.targetY)&&(this.currentTargetShapeId=t)},_drawRect:function(t,e,i,n,s,r,o){return this._drawShape(t,[[e,i],[e+n,i],[e+n,i+s],[e,i+s],[e,i]],r,o)},appendShape:function(t){return this.shapes[t.id]=t,this.shapeseq.push(t.id),this.lastShapeId=t.id,t.id},replaceWithShape:function(t,e){var i=this.shapeseq,n;this.shapes[e.id]=e;for(n=i.length;n--;)i[n]==t&&(i[n]=e.id);delete this.shapes[t]},replaceWithShapes:function(t,e){var i=this.shapeseq,n={},s,r,o;for(r=t.length;r--;)n[t[r]]=!0;for(r=i.length;r--;)s=i[r],n[s]&&(i.splice(r,1),delete this.shapes[s],o=r);for(r=e.length;r--;)i.splice(o,0,e[r].id),this.shapes[e[r].id]=e[r]},insertAfterShape:function(t,e){var i=this.shapeseq,n;for(n=i.length;n--;)if(i[n]===t){i.splice(n+1,0,e.id),this.shapes[e.id]=e;return}},removeShapeId:function(t){var e=this.shapeseq,i;for(i=e.length;i--;)if(e[i]===t){e.splice(i,1);break}delete this.shapes[t]},getShapeAt:function(t,e,i){return this.targetX=e,this.targetY=i,this.render(),this.currentTargetShapeId},render:function(){var t=this.shapeseq,e=this.shapes,i=t.length,n=this._getContext(),s,r,o;n.clearRect(0,0,this.pixelWidth,this.pixelHeight);for(o=0;o<i;o++)s=t[o],r=e[s],this["_draw"+r.type].apply(this,r.args);this.interact||(this.shapes={},this.shapeseq=[])}}),C=e(b,{init:function(t,e,i){var n;C._super.init.call(this,t,e,i),i[0]&&(i=i[0]),L.data(i,"_jqs_vcanvas",this),this.canvas=D.createElement("span"),L(this.canvas).css({display:"inline-block",position:"relative",overflow:"hidden",width:t,height:e,margin:"0px",padding:"0px",verticalAlign:"top"}),this._insert(this.canvas,i),this._calculatePixelDims(t,e,this.canvas),this.canvas.width=this.pixelWidth,this.canvas.height=this.pixelHeight,n='<v:group coordorigin="0 0" coordsize="'+this.pixelWidth+" "+this.pixelHeight+'"'+' style="position:absolute;top:0;left:0;width:'+this.pixelWidth+"px;height="+this.pixelHeight+'px;"></v:group>',this.canvas.insertAdjacentHTML("beforeEnd",n),this.group=L(this.canvas).children()[0],this.rendered=!1,this.prerender=""},_drawShape:function(t,e,i,n,s){var r=[],o,a,l,c,h,u,d;for(d=0,u=e.length;d<u;d++)r[d]=""+e[d][0]+","+e[d][1];return o=r.splice(0,1),s=s===q?1:s,a=i===q?' stroked="false" ':' strokeWeight="'+s+'px" strokeColor="'+i+'" ',l=n===q?' filled="false"':' fillColor="'+n+'" filled="true" ',c=r[0]===r[r.length-1]?"x ":"",h='<v:shape coordorigin="0 0" coordsize="'+this.pixelWidth+" "+this.pixelHeight+'" '+' id="jqsshape'+t+'" '+a+l+' style="position:absolute;left:0px;top:0px;height:'+this.pixelHeight+"px;width:"+this.pixelWidth+'px;padding:0px;margin:0px;" '+' path="m '+o+" l "+r.join(", ")+" "+c+'e">'+" </v:shape>",h},_drawCircle:function(t,e,i,n,s,r,o){var a,l,c;return e-=n,i-=n,a=s===q?' stroked="false" ':' strokeWeight="'+o+'px" strokeColor="'+s+'" ',l=r===q?' filled="false"':' fillColor="'+r+'" filled="true" ',c='<v:oval  id="jqsshape'+t+'" '+a+l+' style="position:absolute;top:'+i+"px; left:"+e+"px; width:"+n*2+"px; height:"+n*2+'px"></v:oval>',c},_drawPieSlice:function(t,e,i,n,s,r,o,a){var l,c,h,u,d,f,p,m;if(s===r)return"";r-s===2*Y.PI&&(s=0,r=2*Y.PI),c=e+Y.round(Y.cos(s)*n),h=i+Y.round(Y.sin(s)*n),u=e+Y.round(Y.cos(r)*n),d=i+Y.round(Y.sin(r)*n);if(c===u&&h===d){if(r-s<Y.PI)return"";c=u=e+n,h=d=i}return c===u&&h===d&&r-s<Y.PI?"":(l=[e-n,i-n,e+n,i+n,c,h,u,d],f=o===q?' stroked="false" ':' strokeWeight="1px" strokeColor="'+o+'" ',p=a===q?' filled="false"':' fillColor="'+a+'" filled="true" ',m='<v:shape coordorigin="0 0" coordsize="'+this.pixelWidth+" "+this.pixelHeight+'" '+' id="jqsshape'+t+'" '+f+p+' style="position:absolute;left:0px;top:0px;height:'+this.pixelHeight+"px;width:"+this.pixelWidth+'px;padding:0px;margin:0px;" '+' path="m '+e+","+i+" wa "+l.join(", ")+' x e">'+" </v:shape>",m)},_drawRect:function(t,e,i,n,s,r,o){return this._drawShape(t,[[e,i],[e,i+s],[e+n,i+s],[e+n,i],[e,i]],r,o)},reset:function(){this.group.innerHTML=""},appendShape:function(t){var e=this["_draw"+t.type].apply(this,t.args);return this.rendered?this.group.insertAdjacentHTML("beforeEnd",e):this.prerender+=e,this.lastShapeId=t.id,t.id},replaceWithShape:function(t,e){var i=L("#jqsshape"+t),n=this["_draw"+e.type].apply(this,e.args);i[0].outerHTML=n},replaceWithShapes:function(t,e){var i=L("#jqsshape"+t[0]),n="",s=e.length,r;for(r=0;r<s;r++)n+=this["_draw"+e[r].type].apply(this,e[r].args);i[0].outerHTML=n;for(r=1;r<t.length;r++)L("#jqsshape"+t[r]).remove()},insertAfterShape:function(t,e){var i=L("#jqsshape"+t),n=this["_draw"+e.type].apply(this,e.args);i[0].insertAdjacentHTML("afterEnd",n)},removeShapeId:function(t){var e=L("#jqsshape"+t);this.group.removeChild(e[0])},getShapeAt:function(t,e,i){var n=t.id.substr(8);return n},render:function(){this.rendered||(this.group.innerHTML=this.prerender,this.rendered=!0)}})})})(document,Math);!function(_,k,C){"use strict";!function r(o,a,l){function c(i,t){if(!a[i]){if(!o[i]){var e="function"==typeof require&&require;if(!t&&e)return e(i,!0);if(h)return h(i,!0);var n=new Error("Cannot find module '"+i+"'");throw n.code="MODULE_NOT_FOUND",n}var s=a[i]={exports:{}};o[i][0].call(s.exports,function(t){var e=o[i][1][t];return c(e?e:t)},s,s.exports,r,o,a,l)}return a[i].exports}for(var h="function"==typeof require&&require,t=0;t<l.length;t++)c(l[t]);return c}({1:[function(t){var d,f,s,p,e=function(t){return t&&t.__esModule?t:{default:t}},m=t("./modules/handle-dom"),g=t("./modules/utils"),v=t("./modules/handle-swal-dom"),y=t("./modules/handle-click"),i=t("./modules/handle-key"),b=e(i),n=t("./modules/default-params"),w=e(n),r=t("./modules/set-params"),x=e(r);s=p=function(){function t(t){var e=i;return e[t]===C?w["default"][t]:e[t]}var i=arguments[0];if(m.addClass(k.body,"stop-scrolling"),v.resetInput(),i===C)return g.logStr("SweetAlert expects at least 1 attribute!"),!1;var e=g.extend({},w["default"]);switch(typeof i){case"string":e.title=i,e.text=arguments[1]||"",e.type=arguments[2]||"";break;case"object":if(i.title===C)return g.logStr('Missing "title" argument!'),!1;e.title=i.title;for(var n in w["default"])e[n]=t(n);e.confirmButtonText=e.showCancelButton?"Confirm":w["default"].confirmButtonText,e.confirmButtonText=t("confirmButtonText"),e.doneFunction=arguments[1]||null;break;default:return g.logStr('Unexpected type of argument! Expected "string" or "object", got '+typeof i),!1}x["default"](e),v.fixVerticalPosition(),v.openModal(arguments[1]);for(var s=v.getModal(),r=s.querySelectorAll("button"),o=["onclick","onmouseover","onmouseout","onmousedown","onmouseup","onfocus"],a=function(t){return y.handleButton(t,e,s)},l=0;l<r.length;l++)for(var c=0;c<o.length;c++){var h=o[c];r[l][h]=a}v.getOverlay().onclick=a,d=_.onkeydown;var u=function(t){return b["default"](t,e,s)};_.onkeydown=u,_.onfocus=function(){setTimeout(function(){f!==C&&(f.focus(),f=C)},0)},p.enableButtons()},s.setDefaults=p.setDefaults=function(t){if(!t)throw new Error("userParams is required");if("object"!=typeof t)throw new Error("userParams has to be a object");g.extend(w["default"],t)},s.close=p.close=function(){var e=v.getModal();m.fadeOut(v.getOverlay(),5),m.fadeOut(e,5),m.removeClass(e,"showSweetAlert"),m.addClass(e,"hideSweetAlert"),m.removeClass(e,"visible");var t=e.querySelector(".sa-icon.sa-success");m.removeClass(t,"animate"),m.removeClass(t.querySelector(".sa-tip"),"animateSuccessTip"),m.removeClass(t.querySelector(".sa-long"),"animateSuccessLong");var i=e.querySelector(".sa-icon.sa-error");m.removeClass(i,"animateErrorIcon"),m.removeClass(i.querySelector(".sa-x-mark"),"animateXMark");var n=e.querySelector(".sa-icon.sa-warning");return m.removeClass(n,"pulseWarning"),m.removeClass(n.querySelector(".sa-body"),"pulseWarningIns"),m.removeClass(n.querySelector(".sa-dot"),"pulseWarningIns"),setTimeout(function(){var t=e.getAttribute("data-custom-class");m.removeClass(e,t)},300),m.removeClass(k.body,"stop-scrolling"),_.onkeydown=d,_.previousActiveElement&&_.previousActiveElement.focus(),f=C,clearTimeout(e.timeout),!0},s.showInputError=p.showInputError=function(t){var e=v.getModal(),i=e.querySelector(".sa-input-error");m.addClass(i,"show");var n=e.querySelector(".sa-error-container");m.addClass(n,"show"),n.querySelector("p").innerHTML=t,setTimeout(function(){s.enableButtons()},1),e.querySelector("input").focus()},s.resetInputError=p.resetInputError=function(t){if(t&&13===t.keyCode)return!1;var e=v.getModal(),i=e.querySelector(".sa-input-error");m.removeClass(i,"show");var n=e.querySelector(".sa-error-container");m.removeClass(n,"show")},s.disableButtons=p.disableButtons=function(){var t=v.getModal(),e=t.querySelector("button.confirm"),i=t.querySelector("button.cancel");e.disabled=!0,i.disabled=!0},s.enableButtons=p.enableButtons=function(){var t=v.getModal(),e=t.querySelector("button.confirm"),i=t.querySelector("button.cancel");e.disabled=!1,i.disabled=!1},"undefined"!=typeof _?_.sweetAlert=_.swal=s:g.logStr("SweetAlert is a frontend module!")},{"./modules/default-params":2,"./modules/handle-click":3,"./modules/handle-dom":4,"./modules/handle-key":5,"./modules/handle-swal-dom":6,"./modules/set-params":8,"./modules/utils":9}],2:[function(t,e,i){Object.defineProperty(i,"__esModule",{value:!0});var n={title:"",text:"",type:null,allowOutsideClick:!1,showConfirmButton:!0,showCancelButton:!1,closeOnConfirm:!0,closeOnCancel:!0,confirmButtonText:"OK",confirmButtonColor:"#8CD4F5",cancelButtonText:"Cancel",imageUrl:null,imageSize:null,timer:null,customClass:"",html:!1,animation:!0,allowEscapeKey:!0,inputType:"text",inputPlaceholder:"",inputValue:"",showLoaderOnConfirm:!1};i["default"]=n,e.exports=i["default"]},{}],3:[function(t,e,i){Object.defineProperty(i,"__esModule",{value:!0});var v=t("./utils"),y=(t("./handle-swal-dom"),t("./handle-dom")),n=function(t,e,i){function n(t){c&&e.confirmButtonColor&&(l.style.backgroundColor=t)}var s,r,o,a=t||_.event,l=a.target||a.srcElement,c=-1!==l.className.indexOf("confirm"),h=-1!==l.className.indexOf("sweet-overlay"),u=y.hasClass(i,"visible"),d=e.doneFunction&&"true"===i.getAttribute("data-has-done-function");switch(c&&e.confirmButtonColor&&(s=e.confirmButtonColor,r=v.colorLuminance(s,-.04),o=v.colorLuminance(s,-.14)),a.type){case"mouseover":n(r);break;case"mouseout":n(s);break;case"mousedown":n(o);break;case"mouseup":n(r);break;case"focus":var f=i.querySelector("button.confirm"),p=i.querySelector("button.cancel");c?p.style.boxShadow="none":f.style.boxShadow="none";break;case"click":var m=i===l,g=y.isDescendant(i,l);if(!m&&!g&&u&&!e.allowOutsideClick)break;c&&d&&u?b(i,e):d&&u||h?w(i,e):y.isDescendant(i,l)&&"BUTTON"===l.tagName&&sweetAlert.close()}},b=function(t,e){var i=!0;y.hasClass(t,"show-input")&&(i=t.querySelector("input").value,i||(i="")),e.doneFunction(i),e.closeOnConfirm&&sweetAlert.close(),e.showLoaderOnConfirm&&sweetAlert.disableButtons()},w=function(t,e){var i=String(e.doneFunction).replace(/\s/g,""),n="function("===i.substring(0,9)&&")"!==i.substring(9,10);n&&e.doneFunction(!1),e.closeOnCancel&&sweetAlert.close()};i["default"]={handleButton:n,handleConfirm:b,handleCancel:w},e.exports=i["default"]},{"./handle-dom":4,"./handle-swal-dom":6,"./utils":9}],4:[function(t,e,i){Object.defineProperty(i,"__esModule",{value:!0});var n=function(t,e){return new RegExp(" "+e+" ").test(" "+t.className+" ")},s=function(t,e){n(t,e)||(t.className+=" "+e)},r=function(t,e){var i=" "+t.className.replace(/[\t\r\n]/g," ")+" ";if(n(t,e)){for(;i.indexOf(" "+e+" ")>=0;)i=i.replace(" "+e+" "," ");t.className=i.replace(/^\s+|\s+$/g,"")}},o=function(t){var e=k.createElement("div");return e.appendChild(k.createTextNode(t)),e.innerHTML},a=function(t){t.style.opacity="",t.style.display="block"},l=function(t){if(t&&!t.length)return a(t);for(var e=0;e<t.length;++e)a(t[e])},c=function(t){t.style.opacity="",t.style.display="none"},h=function(t){if(t&&!t.length)return c(t);for(var e=0;e<t.length;++e)c(t[e])},u=function(t,e){for(var i=e.parentNode;null!==i;){if(i===t)return!0;i=i.parentNode}return!1},d=function(t){t.style.left="-9999px",t.style.display="block";var e,i=t.clientHeight;return e="undefined"!=typeof getComputedStyle?parseInt(getComputedStyle(t).getPropertyValue("padding-top"),10):parseInt(t.currentStyle.padding),t.style.left="",t.style.display="none","-"+parseInt((i+e)/2)+"px"},f=function(t,e){if(+t.style.opacity<1){e=e||16,t.style.opacity=0,t.style.display="block";var i=+new Date,n=function(t){function e(){return t.apply(this,arguments)}return e.toString=function(){return t.toString()},e}(function(){t.style.opacity=+t.style.opacity+(new Date-i)/100,i=+new Date,+t.style.opacity<1&&setTimeout(n,e)});n()}t.style.display="block"},p=function(t,e){e=e||16,t.style.opacity=1;var i=+new Date,n=function(t){function e(){return t.apply(this,arguments)}return e.toString=function(){return t.toString()},e}(function(){t.style.opacity=+t.style.opacity-(new Date-i)/100,i=+new Date,+t.style.opacity>0?setTimeout(n,e):t.style.display="none"});n()},m=function(t){if("function"==typeof MouseEvent){var e=new MouseEvent("click",{view:_,bubbles:!1,cancelable:!0});t.dispatchEvent(e)}else if(k.createEvent){var i=k.createEvent("MouseEvents");i.initEvent("click",!1,!1),t.dispatchEvent(i)}else k.createEventObject?t.fireEvent("onclick"):"function"==typeof t.onclick&&t.onclick()},g=function(t){"function"==typeof t.stopPropagation?(t.stopPropagation(),t.preventDefault()):_.event&&_.event.hasOwnProperty("cancelBubble")&&(_.event.cancelBubble=!0)};i.hasClass=n,i.addClass=s,i.removeClass=r,i.escapeHtml=o,i._show=a,i.show=l,i._hide=c,i.hide=h,i.isDescendant=u,i.getTopMargin=d,i.fadeIn=f,i.fadeOut=p,i.fireClick=m,i.stopEventPropagation=g},{}],5:[function(t,e,i){Object.defineProperty(i,"__esModule",{value:!0});var u=t("./handle-dom"),d=t("./handle-swal-dom"),n=function(t,e,i){var n=t||_.event,s=n.keyCode||n.which,r=i.querySelector("button.confirm"),o=i.querySelector("button.cancel"),a=i.querySelectorAll("button[tabindex]");if(-1!==[9,13,32,27].indexOf(s)){for(var l=n.target||n.srcElement,c=-1,h=0;h<a.length;h++)if(l===a[h]){c=h;break}9===s?(l=-1===c?r:c===a.length-1?a[0]:a[c+1],u.stopEventPropagation(n),l.focus(),e.confirmButtonColor&&d.setFocusStyle(l,e.confirmButtonColor)):13===s?("INPUT"===l.tagName&&(l=r,r.focus()),l=-1===c?r:C):27===s&&e.allowEscapeKey===!0?(l=o,u.fireClick(l,n)):l=C}};i["default"]=n,e.exports=i["default"]},{"./handle-dom":4,"./handle-swal-dom":6}],6:[function(t,e,i){var n=function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(i,"__esModule",{value:!0});var s=t("./utils"),r=t("./handle-dom"),o=t("./default-params"),a=n(o),l=t("./injected-html"),c=n(l),h=".sweet-alert",u=".sweet-overlay",d=function(){var t=k.createElement("div");for(t.innerHTML=c["default"];t.firstChild;)k.body.appendChild(t.firstChild)},f=function(t){function e(){return t.apply(this,arguments)}return e.toString=function(){return t.toString()},e}(function(){var t=k.querySelector(h);return t||(d(),t=f()),t}),p=function(){var t=f();return t?t.querySelector("input"):void 0},m=function(){return k.querySelector(u)},g=function(t,e){var i=s.hexToRgb(e);t.style.boxShadow="0 0 2px rgba("+i+", 0.8), inset 0 0 0 1px rgba(0, 0, 0, 0.05)"},v=function(t){var e=f();r.fadeIn(m(),10),r.show(e),r.addClass(e,"showSweetAlert"),r.removeClass(e,"hideSweetAlert"),_.previousActiveElement=k.activeElement;var i=e.querySelector("button.confirm");i.focus(),setTimeout(function(){r.addClass(e,"visible")},500);var n=e.getAttribute("data-timer");if("null"!==n&&""!==n){var s=t;e.timeout=setTimeout(function(){var t=(s||null)&&"true"===e.getAttribute("data-has-done-function");t?s(null):sweetAlert.close()},n)}},y=function(){var t=f(),e=p();r.removeClass(t,"show-input"),e.value=a["default"].inputValue,e.setAttribute("type",a["default"].inputType),e.setAttribute("placeholder",a["default"].inputPlaceholder),b()},b=function(t){if(t&&13===t.keyCode)return!1;var e=f(),i=e.querySelector(".sa-input-error");r.removeClass(i,"show");var n=e.querySelector(".sa-error-container");r.removeClass(n,"show")},w=function(){var t=f();t.style.marginTop=r.getTopMargin(f())};i.sweetAlertInitialize=d,i.getModal=f,i.getOverlay=m,i.getInput=p,i.setFocusStyle=g,i.openModal=v,i.resetInput=y,i.resetInputError=b,i.fixVerticalPosition=w},{"./default-params":2,"./handle-dom":4,"./injected-html":7,"./utils":9}],7:[function(t,e,i){Object.defineProperty(i,"__esModule",{value:!0});var n='<div class="sweet-overlay" tabIndex="-1"></div><div class="sweet-alert"><div class="sa-icon sa-error">\n      <span class="sa-x-mark">\n        <span class="sa-line sa-left"></span>\n        <span class="sa-line sa-right"></span>\n      </span>\n    </div><div class="sa-icon sa-warning">\n      <span class="sa-body"></span>\n      <span class="sa-dot"></span>\n    </div><div class="sa-icon sa-info"></div><div class="sa-icon sa-success">\n      <span class="sa-line sa-tip"></span>\n      <span class="sa-line sa-long"></span>\n\n      <div class="sa-placeholder"></div>\n      <div class="sa-fix"></div>\n    </div><div class="sa-icon sa-custom"></div><h2>Title</h2>\n    <p>Text</p>\n    <fieldset>\n      <input type="text" tabIndex="3" />\n      <div class="sa-input-error"></div>\n    </fieldset><div class="sa-error-container">\n      <div class="icon">!</div>\n      <p>Not valid!</p>\n    </div><div class="sa-button-container">\n      <button class="cancel" tabIndex="2">Cancel</button>\n      <div class="sa-confirm-button-container">\n        <button class="confirm" tabIndex="1">OK</button><div class="la-ball-fall">\n          <div></div>\n          <div></div>\n          <div></div>\n        </div>\n      </div>\n    </div></div>';i["default"]=n,e.exports=i["default"]},{}],8:[function(t,e,i){Object.defineProperty(i,"__esModule",{value:!0});var m=t("./utils"),g=t("./handle-swal-dom"),v=t("./handle-dom"),y=["error","warning","info","success","input","prompt"],n=function(r){var o=g.getModal(),t=o.querySelector("h2"),e=o.querySelector("p"),i=o.querySelector("button.cancel"),n=o.querySelector("button.confirm");if(t.innerHTML=r.html?r.title:v.escapeHtml(r.title).split("\n").join("<br>"),e.innerHTML=r.html?r.text:v.escapeHtml(r.text||"").split("\n").join("<br>"),r.text&&v.show(e),r.customClass)v.addClass(o,r.customClass),o.setAttribute("data-custom-class",r.customClass);else{var s=o.getAttribute("data-custom-class");v.removeClass(o,s),o.setAttribute("data-custom-class","")}if(v.hide(o.querySelectorAll(".sa-icon")),r.type&&!m.isIE8()){var a=function(){for(var t=!1,e=0;e<y.length;e++)if(r.type===y[e]){t=!0;break}if(!t)return logStr("Unknown alert type: "+r.type),{v:!1};var i=["success","error","warning","info"],n=C;-1!==i.indexOf(r.type)&&(n=o.querySelector(".sa-icon.sa-"+r.type),v.show(n));var s=g.getInput();switch(r.type){case"success":v.addClass(n,"animate"),v.addClass(n.querySelector(".sa-tip"),"animateSuccessTip"),v.addClass(n.querySelector(".sa-long"),"animateSuccessLong");break;case"error":v.addClass(n,"animateErrorIcon"),v.addClass(n.querySelector(".sa-x-mark"),"animateXMark");break;case"warning":v.addClass(n,"pulseWarning"),v.addClass(n.querySelector(".sa-body"),"pulseWarningIns"),v.addClass(n.querySelector(".sa-dot"),"pulseWarningIns");break;case"input":case"prompt":s.setAttribute("type",r.inputType),s.value=r.inputValue,s.setAttribute("placeholder",r.inputPlaceholder),v.addClass(o,"show-input"),setTimeout(function(){s.focus(),s.addEventListener("keyup",swal.resetInputError)},400)}}();if("object"==typeof a)return a.v}if(r.imageUrl){var l=o.querySelector(".sa-icon.sa-custom");l.style.backgroundImage="url("+r.imageUrl+")",v.show(l);var c=80,h=80;if(r.imageSize){var u=r.imageSize.toString().split("x"),d=u[0],f=u[1];d&&f?(c=d,h=f):logStr("Parameter imageSize expects value with format WIDTHxHEIGHT, got "+r.imageSize)}l.setAttribute("style",l.getAttribute("style")+"width:"+c+"px; height:"+h+"px")}o.setAttribute("data-has-cancel-button",r.showCancelButton),r.showCancelButton?i.style.display="inline-block":v.hide(i),o.setAttribute("data-has-confirm-button",r.showConfirmButton),r.showConfirmButton?n.style.display="inline-block":v.hide(n),r.cancelButtonText&&(i.innerHTML=v.escapeHtml(r.cancelButtonText)),r.confirmButtonText&&(n.innerHTML=v.escapeHtml(r.confirmButtonText)),r.confirmButtonColor&&(n.style.backgroundColor=r.confirmButtonColor,n.style.borderLeftColor=r.confirmLoadingButtonColor,n.style.borderRightColor=r.confirmLoadingButtonColor,g.setFocusStyle(n,r.confirmButtonColor)),o.setAttribute("data-allow-outside-click",r.allowOutsideClick);var p=r.doneFunction?!0:!1;o.setAttribute("data-has-done-function",p),r.animation?"string"==typeof r.animation?o.setAttribute("data-animation",r.animation):o.setAttribute("data-animation","pop"):o.setAttribute("data-animation","none"),o.setAttribute("data-timer",r.timer)};i["default"]=n,e.exports=i["default"]},{"./handle-dom":4,"./handle-swal-dom":6,"./utils":9}],9:[function(t,e,i){Object.defineProperty(i,"__esModule",{value:!0});var n=function(t,e){for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i]);return t},s=function(t){var e=/^#?([a-f\d]{2})([a-f\d]{2})([a-f\d]{2})$/i.exec(t);return e?parseInt(e[1],16)+", "+parseInt(e[2],16)+", "+parseInt(e[3],16):null},r=function(){return _.attachEvent&&!_.addEventListener},o=function(t){_.console&&_.console.log("SweetAlert: "+t)},a=function(t,e){t=String(t).replace(/[^0-9a-f]/gi,""),t.length<6&&(t=t[0]+t[0]+t[1]+t[1]+t[2]+t[2]),e=e||0;var i,n,s="#";for(n=0;3>n;n++)i=parseInt(t.substr(2*n,2),16),i=Math.round(Math.min(Math.max(0,i+i*e),255)).toString(16),s+=("00"+i).substr(i.length);return s};i.extend=n,i.hexToRgb=s,i.isIE8=r,i.logStr=o,i.colorLuminance=a},{}]},{},[1]),"function"==typeof define&&define.amd?define(function(){return sweetAlert}):"undefined"!=typeof module&&module.exports&&(module.exports=sweetAlert)}(window,document);!function(t){"function"==typeof define&&define.amd?define(["jquery"],t):t("object"==typeof exports?require("jquery"):jQuery)}(function(i){var t=function(){if(i&&i.fn&&i.fn.select2&&i.fn.select2.amd)var e=i.fn.select2.amd;var e;return function(){if(!e||!e.requirejs){e?s=e:e={};var t,s,h;!function(d){function f(t,e){return i.call(t,e)}function r(t,e){var i,n,s,r,o,a,l,c,h,u,d,f=e&&e.split("/"),p=x.map,m=p&&p["*"]||{};if(t&&"."===t.charAt(0))if(e){for(f=f.slice(0,f.length-1),t=t.split("/"),o=t.length-1,x.nodeIdCompat&&k.test(t[o])&&(t[o]=t[o].replace(k,"")),t=f.concat(t),h=0;h<t.length;h+=1)if(d=t[h],"."===d)t.splice(h,1),h-=1;else if(".."===d){if(1===h&&(".."===t[2]||".."===t[0]))break;h>0&&(t.splice(h-1,2),h-=2)}t=t.join("/")}else 0===t.indexOf("./")&&(t=t.substring(2));if((f||m)&&p){for(i=t.split("/"),h=i.length;h>0;h-=1){if(n=i.slice(0,h).join("/"),f)for(u=f.length;u>0;u-=1)if(s=p[f.slice(0,u).join("/")],s&&(s=s[n])){r=s,a=h;break}if(r)break;!l&&m&&m[n]&&(l=m[n],c=h)}!r&&l&&(r=l,a=c),r&&(i.splice(0,a,r),t=i.join("/"))}return t}function p(t,e){return function(){return c.apply(d,n.call(arguments,0).concat([t,e]))}}function o(e){return function(t){return r(t,e)}}function m(e){return function(t){b[e]=t}}function g(t){if(f(w,t)){var e=w[t];delete w[t],_[t]=!0,l.apply(d,e)}if(!f(b,t)&&!f(_,t))throw new Error("No "+t);return b[t]}function a(t){var e,i=t?t.indexOf("!"):-1;return i>-1&&(e=t.substring(0,i),t=t.substring(i+1,t.length)),[e,t]}function e(t){return function(){return x&&x.config&&x.config[t]||{}}}var l,c,v,y,b={},w={},x={},_={},i=Object.prototype.hasOwnProperty,n=[].slice,k=/\.js$/;v=function(t,e){var i,n=a(t),s=n[0];return t=n[1],s&&(s=r(s,e),i=g(s)),s?t=i&&i.normalize?i.normalize(t,o(e)):r(t,e):(t=r(t,e),n=a(t),s=n[0],t=n[1],s&&(i=g(s))),{f:s?s+"!"+t:t,n:t,pr:s,p:i}},y={require:function(t){return p(t)},exports:function(t){var e=b[t];return"undefined"!=typeof e?e:b[t]={}},module:function(t){return{id:t,uri:"",exports:b[t],config:e(t)}}},l=function(t,e,i,n){var s,r,o,a,l,c,h=[],u=typeof i;if(n=n||t,"undefined"===u||"function"===u){for(e=!e.length&&i.length?["require","exports","module"]:e,l=0;l<e.length;l+=1)if(a=v(e[l],n),r=a.f,"require"===r)h[l]=y.require(t);else if("exports"===r)h[l]=y.exports(t),c=!0;else if("module"===r)s=h[l]=y.module(t);else if(f(b,r)||f(w,r)||f(_,r))h[l]=g(r);else{if(!a.p)throw new Error(t+" missing "+r);a.p.load(a.n,p(n,!0),m(r),{}),h[l]=b[r]}o=i?i.apply(b[t],h):void 0,t&&(s&&s.exports!==d&&s.exports!==b[t]?b[t]=s.exports:o===d&&c||(b[t]=o))}else t&&(b[t]=i)},t=s=c=function(t,e,i,n,s){if("string"==typeof t)return y[t]?y[t](e):g(v(t,e).f);if(!t.splice){if(x=t,x.deps&&c(x.deps,x.callback),!e)return;e.splice?(t=e,e=i,i=null):t=d}return e=e||function(){},"function"==typeof i&&(i=n,n=s),n?l(d,t,e,i):setTimeout(function(){l(d,t,e,i)},4),c},c.config=function(t){return c(t)},t._defined=b,h=function(t,e,i){e.splice||(i=e,e=[]),f(b,t)||f(w,t)||(w[t]=[t,e,i])},h.amd={jQuery:!0}}(),e.requirejs=t,e.require=s,e.define=h}}(),e.define("almond",function(){}),e.define("jquery",[],function(){var t=i||$;return null==t&&console&&console.error&&console.error("Select2: An instance of jQuery or a jQuery-compatible library was not found. Make sure that you are including jQuery before Select2 on your web page."),t}),e.define("select2/utils",["jquery"],function(r){function u(t){var e=t.prototype,i=[];for(var n in e){var s=e[n];"function"==typeof s&&"constructor"!==n&&i.push(n)}return i}var t={};t.Extend=function(t,e){function i(){this.constructor=t}var n={}.hasOwnProperty;for(var s in e)n.call(e,s)&&(t[s]=e[s]);return i.prototype=e.prototype,t.prototype=new i,t.__super__=e.prototype,t},t.Decorate=function(n,s){function r(){var t=Array.prototype.unshift,e=s.prototype.constructor.length,i=n.prototype.constructor;e>0&&(t.call(arguments,n.prototype.constructor),i=s.prototype.constructor),i.apply(this,arguments)}function t(){this.constructor=r}var e=u(s),i=u(n);s.displayName=n.displayName,r.prototype=new t;for(var o=0;o<i.length;o++){var a=i[o];r.prototype[a]=n.prototype[a]}for(var l=function(t){var e=function(){};t in r.prototype&&(e=r.prototype[t]);var i=s.prototype[t];return function(){var t=Array.prototype.unshift;return t.call(arguments,e),i.apply(this,arguments)}},c=0;c<e.length;c++){var h=e[c];r.prototype[h]=l(h)}return r};var e=function(){this.listeners={}};return e.prototype.on=function(t,e){this.listeners=this.listeners||{},t in this.listeners?this.listeners[t].push(e):this.listeners[t]=[e]},e.prototype.trigger=function(t){var e=Array.prototype.slice;this.listeners=this.listeners||{},t in this.listeners&&this.invoke(this.listeners[t],e.call(arguments,1)),"*"in this.listeners&&this.invoke(this.listeners["*"],arguments)},e.prototype.invoke=function(t,e){for(var i=0,n=t.length;n>i;i++)t[i].apply(this,e)},t.Observable=e,t.generateChars=function(t){for(var e="",i=0;t>i;i++){var n=Math.floor(36*Math.random());e+=n.toString(36)}return e},t.bind=function(t,e){return function(){t.apply(e,arguments)}},t._convertData=function(t){for(var e in t){var i=e.split("-"),n=t;if(1!==i.length){for(var s=0;s<i.length;s++){var r=i[s];r=r.substring(0,1).toLowerCase()+r.substring(1),r in n||(n[r]={}),s==i.length-1&&(n[r]=t[e]),n=n[r]}delete t[e]}}return t},t.hasScroll=function(t,e){var i=r(e),n=e.style.overflowX,s=e.style.overflowY;return n!==s||"hidden"!==s&&"visible"!==s?"scroll"===n||"scroll"===s?!0:i.innerHeight()<e.scrollHeight||i.innerWidth()<e.scrollWidth:!1},t.escapeMarkup=function(t){var e={"\\":"&#92;","&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;","/":"&#47;"};return"string"!=typeof t?t:String(t).replace(/[&<>"'\/\\]/g,function(t){return e[t]})},t.appendMany=function(t,e){if("1.7"===r.fn.jquery.substr(0,3)){var i=r();r.map(e,function(t){i=i.add(t)}),e=i}t.append(e)},t}),e.define("select2/results",["jquery","./utils"],function(d,t){function n(t,e,i){this.$element=t,this.data=i,this.options=e,n.__super__.constructor.call(this)}return t.Extend(n,t.Observable),n.prototype.render=function(){var t=d('<ul class="select2-results__options" role="tree"></ul>');return this.options.get("multiple")&&t.attr("aria-multiselectable","true"),this.$results=t,t},n.prototype.clear=function(){this.$results.empty()},n.prototype.displayMessage=function(t){var e=this.options.get("escapeMarkup");this.clear(),this.hideLoading();var i=d('<li role="treeitem" class="select2-results__option"></li>'),n=this.options.get("translations").get(t.message);i.append(e(n(t.args))),this.$results.append(i)},n.prototype.append=function(t){this.hideLoading();var e=[];if(null==t.results||0===t.results.length)return void(0===this.$results.children().length&&this.trigger("results:message",{message:"noResults"}));t.results=this.sort(t.results);for(var i=0;i<t.results.length;i++){var n=t.results[i],s=this.option(n);e.push(s)}this.$results.append(e)},n.prototype.position=function(t,e){var i=e.find(".select2-results");i.append(t)},n.prototype.sort=function(t){var e=this.options.get("sorter");return e(t)},n.prototype.setClasses=function(){var s=this;this.data.current(function(t){var n=d.map(t,function(t){return t.id.toString()}),e=s.$results.find(".select2-results__option[aria-selected]");e.each(function(){var t=d(this),e=d.data(this,"data"),i=""+e.id;null!=e.element&&e.element.selected||null==e.element&&d.inArray(i,n)>-1?t.attr("aria-selected","true"):t.attr("aria-selected","false")});var i=e.filter("[aria-selected=true]");i.length>0?i.first().trigger("mouseenter"):e.first().trigger("mouseenter")})},n.prototype.showLoading=function(t){this.hideLoading();var e=this.options.get("translations").get("searching"),i={disabled:!0,loading:!0,text:e(t)},n=this.option(i);n.className+=" loading-results",this.$results.prepend(n)},n.prototype.hideLoading=function(){this.$results.find(".loading-results").remove()},n.prototype.option=function(t){var e=document.createElement("li");e.className="select2-results__option";var i={role:"treeitem","aria-selected":"false"};t.disabled&&(delete i["aria-selected"],i["aria-disabled"]="true"),null==t.id&&delete i["aria-selected"],null!=t._resultId&&(e.id=t._resultId),t.title&&(e.title=t.title),t.children&&(i.role="group",i["aria-label"]=t.text,delete i["aria-selected"]);for(var n in i){var s=i[n];e.setAttribute(n,s)}if(t.children){var r=d(e),o=document.createElement("strong");o.className="select2-results__group";{d(o)}this.template(t,o);for(var a=[],l=0;l<t.children.length;l++){var c=t.children[l],h=this.option(c);a.push(h)}var u=d("<ul></ul>",{class:"select2-results__options select2-results__options--nested"});u.append(a),r.append(o),r.append(u)}else this.template(t,e);return d.data(e,"data",t),e},n.prototype.bind=function(e){var l=this,t=e.id+"-results";this.$results.attr("id",t),e.on("results:all",function(t){l.clear(),l.append(t.data),e.isOpen()&&l.setClasses()}),e.on("results:append",function(t){l.append(t.data),e.isOpen()&&l.setClasses()}),e.on("query",function(t){l.showLoading(t)}),e.on("select",function(){e.isOpen()&&l.setClasses()}),e.on("unselect",function(){e.isOpen()&&l.setClasses()}),e.on("open",function(){l.$results.attr("aria-expanded","true"),l.$results.attr("aria-hidden","false"),l.setClasses(),l.ensureHighlightVisible()}),e.on("close",function(){l.$results.attr("aria-expanded","false"),l.$results.attr("aria-hidden","true"),l.$results.removeAttr("aria-activedescendant")}),e.on("results:toggle",function(){var t=l.getHighlightedResults();0!==t.length&&t.trigger("mouseup")}),e.on("results:select",function(){var t=l.getHighlightedResults();if(0!==t.length){var e=t.data("data");"true"==t.attr("aria-selected")?l.trigger("close"):l.trigger("select",{data:e})}}),e.on("results:previous",function(){var t=l.getHighlightedResults(),e=l.$results.find("[aria-selected]"),i=e.index(t);if(0!==i){var n=i-1;0===t.length&&(n=0);var s=e.eq(n);s.trigger("mouseenter");var r=l.$results.offset().top,o=s.offset().top,a=l.$results.scrollTop()+(o-r);0===n?l.$results.scrollTop(0):0>o-r&&l.$results.scrollTop(a)}}),e.on("results:next",function(){var t=l.getHighlightedResults(),e=l.$results.find("[aria-selected]"),i=e.index(t),n=i+1;if(!(n>=e.length)){var s=e.eq(n);s.trigger("mouseenter");var r=l.$results.offset().top+l.$results.outerHeight(!1),o=s.offset().top+s.outerHeight(!1),a=l.$results.scrollTop()+o-r;0===n?l.$results.scrollTop(0):o>r&&l.$results.scrollTop(a)}}),e.on("results:focus",function(t){t.element.addClass("select2-results__option--highlighted")}),e.on("results:message",function(t){l.displayMessage(t)}),d.fn.mousewheel&&this.$results.on("mousewheel",function(t){var e=l.$results.scrollTop(),i=l.$results.get(0).scrollHeight-l.$results.scrollTop()+t.deltaY,n=t.deltaY>0&&e-t.deltaY<=0,s=t.deltaY<0&&i<=l.$results.height();n?(l.$results.scrollTop(0),t.preventDefault(),t.stopPropagation()):s&&(l.$results.scrollTop(l.$results.get(0).scrollHeight-l.$results.height()),t.preventDefault(),t.stopPropagation())}),this.$results.on("mouseup",".select2-results__option[aria-selected]",function(t){var e=d(this),i=e.data("data");return"true"===e.attr("aria-selected")?void(l.options.get("multiple")?l.trigger("unselect",{originalEvent:t,data:i}):l.trigger("close")):void l.trigger("select",{originalEvent:t,data:i})}),this.$results.on("mouseenter",".select2-results__option[aria-selected]",function(){var t=d(this).data("data");l.getHighlightedResults().removeClass("select2-results__option--highlighted"),l.trigger("results:focus",{data:t,element:d(this)})})},n.prototype.getHighlightedResults=function(){var t=this.$results.find(".select2-results__option--highlighted");return t},n.prototype.destroy=function(){this.$results.remove()},n.prototype.ensureHighlightVisible=function(){var t=this.getHighlightedResults();if(0!==t.length){var e=this.$results.find("[aria-selected]"),i=e.index(t),n=this.$results.offset().top,s=t.offset().top,r=this.$results.scrollTop()+(s-n),o=s-n;r-=2*t.outerHeight(!1),2>=i?this.$results.scrollTop(0):(o>this.$results.outerHeight()||0>o)&&this.$results.scrollTop(r)}},n.prototype.template=function(t,e){var i=this.options.get("templateResult"),n=this.options.get("escapeMarkup"),s=i(t);null==s?e.style.display="none":"string"==typeof s?e.innerHTML=n(s):d(e).append(s)},n}),e.define("select2/keys",[],function(){var t={BACKSPACE:8,TAB:9,ENTER:13,SHIFT:16,CTRL:17,ALT:18,ESC:27,SPACE:32,PAGE_UP:33,PAGE_DOWN:34,END:35,HOME:36,LEFT:37,UP:38,RIGHT:39,DOWN:40,DELETE:46};return t}),e.define("select2/selection/base",["jquery","../utils","../keys"],function(s,t,n){function i(t,e){this.$element=t,this.options=e,i.__super__.constructor.call(this)}return t.Extend(i,t.Observable),i.prototype.render=function(){var t=s('<span class="select2-selection" role="combobox" aria-autocomplete="list" aria-haspopup="true" aria-expanded="false"></span>');return this._tabindex=0,null!=this.$element.data("old-tabindex")?this._tabindex=this.$element.data("old-tabindex"):null!=this.$element.attr("tabindex")&&(this._tabindex=this.$element.attr("tabindex")),t.attr("title",this.$element.attr("title")),t.attr("tabindex",this._tabindex),this.$selection=t,t},i.prototype.bind=function(t){var e=this,i=(t.id+"-container",t.id+"-results");this.container=t,this.$selection.on("focus",function(t){e.trigger("focus",t)}),this.$selection.on("blur",function(t){e.trigger("blur",t)}),this.$selection.on("keydown",function(t){e.trigger("keypress",t),t.which===n.SPACE&&t.preventDefault()}),t.on("results:focus",function(t){e.$selection.attr("aria-activedescendant",t.data._resultId)}),t.on("selection:update",function(t){e.update(t.data)}),t.on("open",function(){e.$selection.attr("aria-expanded","true"),e.$selection.attr("aria-owns",i),e._attachCloseHandler(t)}),t.on("close",function(){e.$selection.attr("aria-expanded","false"),e.$selection.removeAttr("aria-activedescendant"),e.$selection.removeAttr("aria-owns"),e.$selection.focus(),e._detachCloseHandler(t)}),t.on("enable",function(){e.$selection.attr("tabindex",e._tabindex)}),t.on("disable",function(){e.$selection.attr("tabindex","-1")})},i.prototype._attachCloseHandler=function(t){s(document.body).on("mousedown.select2."+t.id,function(t){var e=s(t.target),i=e.closest(".select2"),n=s(".select2.select2-container--open");n.each(function(){var t=s(this);if(this!=i[0]){var e=t.data("element");e.select2("close")}})})},i.prototype._detachCloseHandler=function(t){s(document.body).off("mousedown.select2."+t.id)},i.prototype.position=function(t,e){var i=e.find(".selection");i.append(t)},i.prototype.destroy=function(){this._detachCloseHandler(this.container)},i.prototype.update=function(){throw new Error("The `update` method must be defined in child classes.")},i}),e.define("select2/selection/single",["jquery","./base","../utils","../keys"],function(t,e,i){function n(){n.__super__.constructor.apply(this,arguments)}return i.Extend(n,e),n.prototype.render=function(){var t=n.__super__.render.call(this);return t.addClass("select2-selection--single"),t.html('<span class="select2-selection__rendered"></span><span class="select2-selection__arrow" role="presentation"><b role="presentation"></b></span>'),t},n.prototype.bind=function(t){var e=this;n.__super__.bind.apply(this,arguments);var i=t.id+"-container";this.$selection.find(".select2-selection__rendered").attr("id",i),this.$selection.attr("aria-labelledby",i),this.$selection.on("mousedown",function(t){1===t.which&&e.trigger("toggle",{originalEvent:t})}),this.$selection.on("focus",function(){}),this.$selection.on("blur",function(){}),t.on("selection:update",function(t){e.update(t.data)})},n.prototype.clear=function(){this.$selection.find(".select2-selection__rendered").empty()},n.prototype.display=function(t){var e=this.options.get("templateSelection"),i=this.options.get("escapeMarkup");return i(e(t))},n.prototype.selectionContainer=function(){return t("<span></span>")},n.prototype.update=function(t){if(0===t.length)return void this.clear();var e=t[0],i=this.display(e),n=this.$selection.find(".select2-selection__rendered");n.empty().append(i),n.prop("title",e.title||e.text)},n}),e.define("select2/selection/multiple",["jquery","./base","../utils"],function(r,t,a){function e(){e.__super__.constructor.apply(this,arguments)}return a.Extend(e,t),e.prototype.render=function(){var t=e.__super__.render.call(this);return t.addClass("select2-selection--multiple"),t.html('<ul class="select2-selection__rendered"></ul>'),t},e.prototype.bind=function(){var s=this;e.__super__.bind.apply(this,arguments),this.$selection.on("click",function(t){s.trigger("toggle",{originalEvent:t})}),this.$selection.on("click",".select2-selection__choice__remove",function(t){var e=r(this),i=e.parent(),n=i.data("data");s.trigger("unselect",{originalEvent:t,data:n})})},e.prototype.clear=function(){this.$selection.find(".select2-selection__rendered").empty()},e.prototype.display=function(t){var e=this.options.get("templateSelection"),i=this.options.get("escapeMarkup");return i(e(t))},e.prototype.selectionContainer=function(){var t=r('<li class="select2-selection__choice"><span class="select2-selection__choice__remove" role="presentation">&times;</span></li>');return t},e.prototype.update=function(t){if(this.clear(),0!==t.length){for(var e=[],i=0;i<t.length;i++){var n=t[i],s=this.display(n),r=this.selectionContainer();r.append(s),r.prop("title",n.title||n.text),r.data("data",n),e.push(r)}var o=this.$selection.find(".select2-selection__rendered");a.appendMany(o,e)}},e}),e.define("select2/selection/placeholder",["../utils"],function(){function t(t,e,i){this.placeholder=this.normalizePlaceholder(i.get("placeholder")),t.call(this,e,i)}return t.prototype.normalizePlaceholder=function(t,e){return"string"==typeof e&&(e={id:"",text:e}),e},t.prototype.createPlaceholder=function(t,e){var i=this.selectionContainer();return i.html(this.display(e)),i.addClass("select2-selection__placeholder").removeClass("select2-selection__choice"),i},t.prototype.update=function(t,e){var i=1==e.length&&e[0].id!=this.placeholder.id,n=e.length>1;if(n||i)return t.call(this,e);this.clear();var s=this.createPlaceholder(this.placeholder);this.$selection.find(".select2-selection__rendered").append(s)},t}),e.define("select2/selection/allowClear",["jquery","../keys"],function(n,s){function t(){}return t.prototype.bind=function(t,e,i){var n=this;t.call(this,e,i),null==this.placeholder&&this.options.get("debug")&&window.console&&console.error&&console.error("Select2: The `allowClear` option should be used in combination with the `placeholder` option."),this.$selection.on("mousedown",".select2-selection__clear",function(t){n._handleClear(t)}),e.on("keypress",function(t){n._handleKeyboardClear(t,e)})},t.prototype._handleClear=function(t,e){if(!this.options.get("disabled")){var i=this.$selection.find(".select2-selection__clear");if(0!==i.length){e.stopPropagation();for(var n=i.data("data"),s=0;s<n.length;s++){var r={data:n[s]};if(this.trigger("unselect",r),r.prevented)return}this.$element.val(this.placeholder.id).trigger("change"),this.trigger("toggle")}}},t.prototype._handleKeyboardClear=function(t,e,i){i.isOpen()||(e.which==s.DELETE||e.which==s.BACKSPACE)&&this._handleClear(e)},t.prototype.update=function(t,e){if(t.call(this,e),!(this.$selection.find(".select2-selection__placeholder").length>0||0===e.length)){var i=n('<span class="select2-selection__clear">&times;</span>');i.data("data",e),this.$selection.find(".select2-selection__rendered").prepend(i)}},t}),e.define("select2/selection/search",["jquery","../utils","../keys"],function(n,t,r){function e(t,e,i){t.call(this,e,i)}return e.prototype.render=function(t){var e=n('<li class="select2-search select2-search--inline"><input class="select2-search__field" type="search" tabindex="-1" autocomplete="off" autocorrect="off" autocapitalize="off" spellcheck="false" role="textbox" /></li>');this.$searchContainer=e,this.$search=e.find("input");var i=t.call(this);return i},e.prototype.bind=function(t,e,i){var s=this;t.call(this,e,i),e.on("open",function(){s.$search.attr("tabindex",0),s.$search.focus()}),e.on("close",function(){s.$search.attr("tabindex",-1),s.$search.val(""),s.$search.focus()}),e.on("enable",function(){s.$search.prop("disabled",!1)}),e.on("disable",function(){s.$search.prop("disabled",!0)}),this.$selection.on("focusin",".select2-search--inline",function(t){s.trigger("focus",t)}),this.$selection.on("focusout",".select2-search--inline",function(t){s.trigger("blur",t)}),this.$selection.on("keydown",".select2-search--inline",function(t){t.stopPropagation(),s.trigger("keypress",t),s._keyUpPrevented=t.isDefaultPrevented();var e=t.which;if(e===r.BACKSPACE&&""===s.$search.val()){var i=s.$searchContainer.prev(".select2-selection__choice");if(i.length>0){var n=i.data("data");s.searchRemoveChoice(n),t.preventDefault()}}}),this.$selection.on("input",".select2-search--inline",function(){s.$selection.off("keyup.search")}),this.$selection.on("keyup.search input",".select2-search--inline",function(t){s.handleSearch(t)})},e.prototype.createPlaceholder=function(t,e){this.$search.attr("placeholder",e.text)},e.prototype.update=function(t,e){this.$search.attr("placeholder",""),t.call(this,e),this.$selection.find(".select2-selection__rendered").append(this.$searchContainer),this.resizeSearch()},e.prototype.handleSearch=function(){if(this.resizeSearch(),!this._keyUpPrevented){var t=this.$search.val();this.trigger("query",{term:t})}this._keyUpPrevented=!1},e.prototype.searchRemoveChoice=function(t,e){this.trigger("unselect",{data:e}),this.trigger("open"),this.$search.val(e.text+" ")},e.prototype.resizeSearch=function(){this.$search.css("width","25px");var t="";if(""!==this.$search.attr("placeholder"))t=this.$selection.find(".select2-selection__rendered").innerWidth();else{var e=this.$search.val().length+1;t=.75*e+"em"}this.$search.css("width",t)},e}),e.define("select2/selection/eventRelay",["jquery"],function(o){function t(){}return t.prototype.bind=function(t,e,i){var n=this,s=["open","opening","close","closing","select","selecting","unselect","unselecting"],r=["opening","closing","selecting","unselecting"];t.call(this,e,i),e.on("*",function(t,e){if(-1!==o.inArray(t,s)){e=e||{};var i=o.Event("select2:"+t,{params:e});n.$element.trigger(i),-1!==o.inArray(t,r)&&(e.prevented=i.isDefaultPrevented())}})},t}),e.define("select2/translation",["jquery","require"],function(e,i){function n(t){this.dict=t||{}}return n.prototype.all=function(){return this.dict},n.prototype.get=function(t){return this.dict[t]},n.prototype.extend=function(t){this.dict=e.extend({},t.all(),this.dict)},n._cache={},n.loadPath=function(t){if(!(t in n._cache)){var e=i(t);n._cache[t]=e}return new n(n._cache[t])},n}),e.define("select2/diacritics",[],function(){var t={"Ⓐ":"A","Ａ":"A","À":"A","Á":"A","Â":"A","Ầ":"A","Ấ":"A","Ẫ":"A","Ẩ":"A","Ã":"A","Ā":"A","Ă":"A","Ằ":"A","Ắ":"A","Ẵ":"A","Ẳ":"A","Ȧ":"A","Ǡ":"A","Ä":"A","Ǟ":"A","Ả":"A","Å":"A","Ǻ":"A","Ǎ":"A","Ȁ":"A","Ȃ":"A","Ạ":"A","Ậ":"A","Ặ":"A","Ḁ":"A","Ą":"A","Ⱥ":"A","Ɐ":"A","Ꜳ":"AA","Æ":"AE","Ǽ":"AE","Ǣ":"AE","Ꜵ":"AO","Ꜷ":"AU","Ꜹ":"AV","Ꜻ":"AV","Ꜽ":"AY","Ⓑ":"B","Ｂ":"B","Ḃ":"B","Ḅ":"B","Ḇ":"B","Ƀ":"B","Ƃ":"B","Ɓ":"B","Ⓒ":"C","Ｃ":"C","Ć":"C","Ĉ":"C","Ċ":"C","Č":"C","Ç":"C","Ḉ":"C","Ƈ":"C","Ȼ":"C","Ꜿ":"C","Ⓓ":"D","Ｄ":"D","Ḋ":"D","Ď":"D","Ḍ":"D","Ḑ":"D","Ḓ":"D","Ḏ":"D","Đ":"D","Ƌ":"D","Ɗ":"D","Ɖ":"D","Ꝺ":"D","Ǳ":"DZ","Ǆ":"DZ","ǲ":"Dz","ǅ":"Dz","Ⓔ":"E","Ｅ":"E","È":"E","É":"E","Ê":"E","Ề":"E","Ế":"E","Ễ":"E","Ể":"E","Ẽ":"E","Ē":"E","Ḕ":"E","Ḗ":"E","Ĕ":"E","Ė":"E","Ë":"E","Ẻ":"E","Ě":"E","Ȅ":"E","Ȇ":"E","Ẹ":"E","Ệ":"E","Ȩ":"E","Ḝ":"E","Ę":"E","Ḙ":"E","Ḛ":"E","Ɛ":"E","Ǝ":"E","Ⓕ":"F","Ｆ":"F","Ḟ":"F","Ƒ":"F","Ꝼ":"F","Ⓖ":"G","Ｇ":"G","Ǵ":"G","Ĝ":"G","Ḡ":"G","Ğ":"G","Ġ":"G","Ǧ":"G","Ģ":"G","Ǥ":"G","Ɠ":"G","Ꞡ":"G","Ᵹ":"G","Ꝿ":"G","Ⓗ":"H","Ｈ":"H","Ĥ":"H","Ḣ":"H","Ḧ":"H","Ȟ":"H","Ḥ":"H","Ḩ":"H","Ḫ":"H","Ħ":"H","Ⱨ":"H","Ⱶ":"H","Ɥ":"H","Ⓘ":"I","Ｉ":"I","Ì":"I","Í":"I","Î":"I","Ĩ":"I","Ī":"I","Ĭ":"I","İ":"I","Ï":"I","Ḯ":"I","Ỉ":"I","Ǐ":"I","Ȉ":"I","Ȋ":"I","Ị":"I","Į":"I","Ḭ":"I","Ɨ":"I","Ⓙ":"J","Ｊ":"J","Ĵ":"J","Ɉ":"J","Ⓚ":"K","Ｋ":"K","Ḱ":"K","Ǩ":"K","Ḳ":"K","Ķ":"K","Ḵ":"K","Ƙ":"K","Ⱪ":"K","Ꝁ":"K","Ꝃ":"K","Ꝅ":"K","Ꞣ":"K","Ⓛ":"L","Ｌ":"L","Ŀ":"L","Ĺ":"L","Ľ":"L","Ḷ":"L","Ḹ":"L","Ļ":"L","Ḽ":"L","Ḻ":"L","Ł":"L","Ƚ":"L","Ɫ":"L","Ⱡ":"L","Ꝉ":"L","Ꝇ":"L","Ꞁ":"L","Ǉ":"LJ","ǈ":"Lj","Ⓜ":"M","Ｍ":"M","Ḿ":"M","Ṁ":"M","Ṃ":"M","Ɱ":"M","Ɯ":"M","Ⓝ":"N","Ｎ":"N","Ǹ":"N","Ń":"N","Ñ":"N","Ṅ":"N","Ň":"N","Ṇ":"N","Ņ":"N","Ṋ":"N","Ṉ":"N","Ƞ":"N","Ɲ":"N","Ꞑ":"N","Ꞥ":"N","Ǌ":"NJ","ǋ":"Nj","Ⓞ":"O","Ｏ":"O","Ò":"O","Ó":"O","Ô":"O","Ồ":"O","Ố":"O","Ỗ":"O","Ổ":"O","Õ":"O","Ṍ":"O","Ȭ":"O","Ṏ":"O","Ō":"O","Ṑ":"O","Ṓ":"O","Ŏ":"O","Ȯ":"O","Ȱ":"O","Ö":"O","Ȫ":"O","Ỏ":"O","Ő":"O","Ǒ":"O","Ȍ":"O","Ȏ":"O","Ơ":"O","Ờ":"O","Ớ":"O","Ỡ":"O","Ở":"O","Ợ":"O","Ọ":"O","Ộ":"O","Ǫ":"O","Ǭ":"O","Ø":"O","Ǿ":"O","Ɔ":"O","Ɵ":"O","Ꝋ":"O","Ꝍ":"O","Ƣ":"OI","Ꝏ":"OO","Ȣ":"OU","Ⓟ":"P","Ｐ":"P","Ṕ":"P","Ṗ":"P","Ƥ":"P","Ᵽ":"P","Ꝑ":"P","Ꝓ":"P","Ꝕ":"P","Ⓠ":"Q","Ｑ":"Q","Ꝗ":"Q","Ꝙ":"Q","Ɋ":"Q","Ⓡ":"R","Ｒ":"R","Ŕ":"R","Ṙ":"R","Ř":"R","Ȑ":"R","Ȓ":"R","Ṛ":"R","Ṝ":"R","Ŗ":"R","Ṟ":"R","Ɍ":"R","Ɽ":"R","Ꝛ":"R","Ꞧ":"R","Ꞃ":"R","Ⓢ":"S","Ｓ":"S","ẞ":"S","Ś":"S","Ṥ":"S","Ŝ":"S","Ṡ":"S","Š":"S","Ṧ":"S","Ṣ":"S","Ṩ":"S","Ș":"S","Ş":"S","Ȿ":"S","Ꞩ":"S","Ꞅ":"S","Ⓣ":"T","Ｔ":"T","Ṫ":"T","Ť":"T","Ṭ":"T","Ț":"T","Ţ":"T","Ṱ":"T","Ṯ":"T","Ŧ":"T","Ƭ":"T","Ʈ":"T","Ⱦ":"T","Ꞇ":"T","Ꜩ":"TZ","Ⓤ":"U","Ｕ":"U","Ù":"U","Ú":"U","Û":"U","Ũ":"U","Ṹ":"U","Ū":"U","Ṻ":"U","Ŭ":"U","Ü":"U","Ǜ":"U","Ǘ":"U","Ǖ":"U","Ǚ":"U","Ủ":"U","Ů":"U","Ű":"U","Ǔ":"U","Ȕ":"U","Ȗ":"U","Ư":"U","Ừ":"U","Ứ":"U","Ữ":"U","Ử":"U","Ự":"U","Ụ":"U","Ṳ":"U","Ų":"U","Ṷ":"U","Ṵ":"U","Ʉ":"U","Ⓥ":"V","Ｖ":"V","Ṽ":"V","Ṿ":"V","Ʋ":"V","Ꝟ":"V","Ʌ":"V","Ꝡ":"VY","Ⓦ":"W","Ｗ":"W","Ẁ":"W","Ẃ":"W","Ŵ":"W","Ẇ":"W","Ẅ":"W","Ẉ":"W","Ⱳ":"W","Ⓧ":"X","Ｘ":"X","Ẋ":"X","Ẍ":"X","Ⓨ":"Y","Ｙ":"Y","Ỳ":"Y","Ý":"Y","Ŷ":"Y","Ỹ":"Y","Ȳ":"Y","Ẏ":"Y","Ÿ":"Y","Ỷ":"Y","Ỵ":"Y","Ƴ":"Y","Ɏ":"Y","Ỿ":"Y","Ⓩ":"Z","Ｚ":"Z","Ź":"Z","Ẑ":"Z","Ż":"Z","Ž":"Z","Ẓ":"Z","Ẕ":"Z","Ƶ":"Z","Ȥ":"Z","Ɀ":"Z","Ⱬ":"Z","Ꝣ":"Z","ⓐ":"a","ａ":"a","ẚ":"a","à":"a","á":"a","â":"a","ầ":"a","ấ":"a","ẫ":"a","ẩ":"a","ã":"a","ā":"a","ă":"a","ằ":"a","ắ":"a","ẵ":"a","ẳ":"a","ȧ":"a","ǡ":"a","ä":"a","ǟ":"a","ả":"a","å":"a","ǻ":"a","ǎ":"a","ȁ":"a","ȃ":"a","ạ":"a","ậ":"a","ặ":"a","ḁ":"a","ą":"a","ⱥ":"a","ɐ":"a","ꜳ":"aa","æ":"ae","ǽ":"ae","ǣ":"ae","ꜵ":"ao","ꜷ":"au","ꜹ":"av","ꜻ":"av","ꜽ":"ay","ⓑ":"b","ｂ":"b","ḃ":"b","ḅ":"b","ḇ":"b","ƀ":"b","ƃ":"b","ɓ":"b","ⓒ":"c","ｃ":"c","ć":"c","ĉ":"c","ċ":"c","č":"c","ç":"c","ḉ":"c","ƈ":"c","ȼ":"c","ꜿ":"c","ↄ":"c","ⓓ":"d","ｄ":"d","ḋ":"d","ď":"d","ḍ":"d","ḑ":"d","ḓ":"d","ḏ":"d","đ":"d","ƌ":"d","ɖ":"d","ɗ":"d","ꝺ":"d","ǳ":"dz","ǆ":"dz","ⓔ":"e","ｅ":"e","è":"e","é":"e","ê":"e","ề":"e","ế":"e","ễ":"e","ể":"e","ẽ":"e","ē":"e","ḕ":"e","ḗ":"e","ĕ":"e","ė":"e","ë":"e","ẻ":"e","ě":"e","ȅ":"e","ȇ":"e","ẹ":"e","ệ":"e","ȩ":"e","ḝ":"e","ę":"e","ḙ":"e","ḛ":"e","ɇ":"e","ɛ":"e","ǝ":"e","ⓕ":"f","ｆ":"f","ḟ":"f","ƒ":"f","ꝼ":"f","ⓖ":"g","ｇ":"g","ǵ":"g","ĝ":"g","ḡ":"g","ğ":"g","ġ":"g","ǧ":"g","ģ":"g","ǥ":"g","ɠ":"g","ꞡ":"g","ᵹ":"g","ꝿ":"g","ⓗ":"h","ｈ":"h","ĥ":"h","ḣ":"h","ḧ":"h","ȟ":"h","ḥ":"h","ḩ":"h","ḫ":"h","ẖ":"h","ħ":"h","ⱨ":"h","ⱶ":"h","ɥ":"h","ƕ":"hv","ⓘ":"i","ｉ":"i","ì":"i","í":"i","î":"i","ĩ":"i","ī":"i","ĭ":"i","ï":"i","ḯ":"i","ỉ":"i","ǐ":"i","ȉ":"i","ȋ":"i","ị":"i","į":"i","ḭ":"i","ɨ":"i","ı":"i","ⓙ":"j","ｊ":"j","ĵ":"j","ǰ":"j","ɉ":"j","ⓚ":"k","ｋ":"k","ḱ":"k","ǩ":"k","ḳ":"k","ķ":"k","ḵ":"k","ƙ":"k","ⱪ":"k","ꝁ":"k","ꝃ":"k","ꝅ":"k","ꞣ":"k","ⓛ":"l","ｌ":"l","ŀ":"l","ĺ":"l","ľ":"l","ḷ":"l","ḹ":"l","ļ":"l","ḽ":"l","ḻ":"l","ſ":"l","ł":"l","ƚ":"l","ɫ":"l","ⱡ":"l","ꝉ":"l","ꞁ":"l","ꝇ":"l","ǉ":"lj","ⓜ":"m","ｍ":"m","ḿ":"m","ṁ":"m","ṃ":"m","ɱ":"m","ɯ":"m","ⓝ":"n","ｎ":"n","ǹ":"n","ń":"n","ñ":"n","ṅ":"n","ň":"n","ṇ":"n","ņ":"n","ṋ":"n","ṉ":"n","ƞ":"n","ɲ":"n","ŉ":"n","ꞑ":"n","ꞥ":"n","ǌ":"nj","ⓞ":"o","ｏ":"o","ò":"o","ó":"o","ô":"o","ồ":"o","ố":"o","ỗ":"o","ổ":"o","õ":"o","ṍ":"o","ȭ":"o","ṏ":"o","ō":"o","ṑ":"o","ṓ":"o","ŏ":"o","ȯ":"o","ȱ":"o","ö":"o","ȫ":"o","ỏ":"o","ő":"o","ǒ":"o","ȍ":"o","ȏ":"o","ơ":"o","ờ":"o","ớ":"o","ỡ":"o","ở":"o","ợ":"o","ọ":"o","ộ":"o","ǫ":"o","ǭ":"o","ø":"o","ǿ":"o","ɔ":"o","ꝋ":"o","ꝍ":"o","ɵ":"o","ƣ":"oi","ȣ":"ou","ꝏ":"oo","ⓟ":"p","ｐ":"p","ṕ":"p","ṗ":"p","ƥ":"p","ᵽ":"p","ꝑ":"p","ꝓ":"p","ꝕ":"p","ⓠ":"q","ｑ":"q","ɋ":"q","ꝗ":"q","ꝙ":"q","ⓡ":"r","ｒ":"r","ŕ":"r","ṙ":"r","ř":"r","ȑ":"r","ȓ":"r","ṛ":"r","ṝ":"r","ŗ":"r","ṟ":"r","ɍ":"r","ɽ":"r","ꝛ":"r","ꞧ":"r","ꞃ":"r","ⓢ":"s","ｓ":"s","ß":"s","ś":"s","ṥ":"s","ŝ":"s","ṡ":"s","š":"s","ṧ":"s","ṣ":"s","ṩ":"s","ș":"s","ş":"s","ȿ":"s","ꞩ":"s","ꞅ":"s","ẛ":"s","ⓣ":"t","ｔ":"t","ṫ":"t","ẗ":"t","ť":"t","ṭ":"t","ț":"t","ţ":"t","ṱ":"t","ṯ":"t","ŧ":"t","ƭ":"t","ʈ":"t","ⱦ":"t","ꞇ":"t","ꜩ":"tz","ⓤ":"u","ｕ":"u","ù":"u","ú":"u","û":"u","ũ":"u","ṹ":"u","ū":"u","ṻ":"u","ŭ":"u","ü":"u","ǜ":"u","ǘ":"u","ǖ":"u","ǚ":"u","ủ":"u","ů":"u","ű":"u","ǔ":"u","ȕ":"u","ȗ":"u","ư":"u","ừ":"u","ứ":"u","ữ":"u","ử":"u","ự":"u","ụ":"u","ṳ":"u","ų":"u","ṷ":"u","ṵ":"u","ʉ":"u","ⓥ":"v","ｖ":"v","ṽ":"v","ṿ":"v","ʋ":"v","ꝟ":"v","ʌ":"v","ꝡ":"vy","ⓦ":"w","ｗ":"w","ẁ":"w","ẃ":"w","ŵ":"w","ẇ":"w","ẅ":"w","ẘ":"w","ẉ":"w","ⱳ":"w","ⓧ":"x","ｘ":"x","ẋ":"x","ẍ":"x","ⓨ":"y","ｙ":"y","ỳ":"y","ý":"y","ŷ":"y","ỹ":"y","ȳ":"y","ẏ":"y","ÿ":"y","ỷ":"y","ẙ":"y","ỵ":"y","ƴ":"y","ɏ":"y","ỿ":"y","ⓩ":"z","ｚ":"z","ź":"z","ẑ":"z","ż":"z","ž":"z","ẓ":"z","ẕ":"z","ƶ":"z","ȥ":"z","ɀ":"z","ⱬ":"z","ꝣ":"z","Ά":"Α","Έ":"Ε","Ή":"Η","Ί":"Ι","Ϊ":"Ι","Ό":"Ο","Ύ":"Υ","Ϋ":"Υ","Ώ":"Ω","ά":"α","έ":"ε","ή":"η","ί":"ι","ϊ":"ι","ΐ":"ι","ό":"ο","ύ":"υ","ϋ":"υ","ΰ":"υ","ω":"ω","ς":"σ"};return t}),e.define("select2/data/base",["../utils"],function(n){function t(){t.__super__.constructor.call(this)}return n.Extend(t,n.Observable),t.prototype.current=function(){throw new Error("The `current` method must be defined in child classes.")},t.prototype.query=function(){throw new Error("The `query` method must be defined in child classes.")},t.prototype.bind=function(){},t.prototype.destroy=function(){},t.prototype.generateResultId=function(t,e){var i=t.id+"-result-";return i+=n.generateChars(4),i+=null!=e.id?"-"+e.id.toString():"-"+n.generateChars(4)},t}),e.define("select2/data/select",["./base","../utils","jquery"],function(t,e,a){function i(t,e){this.$element=t,this.options=e,i.__super__.constructor.call(this)}return e.Extend(i,t),i.prototype.current=function(t){var i=[],n=this;this.$element.find(":selected").each(function(){var t=a(this),e=n.item(t);i.push(e)}),t(i)},i.prototype.select=function(s){var r=this;if(s.selected=!0,a(s.element).is("option"))return s.element.selected=!0,void this.$element.trigger("change");if(this.$element.prop("multiple"))this.current(function(t){var e=[];s=[s],s.push.apply(s,t);for(var i=0;i<s.length;i++){var n=s[i].id;-1===a.inArray(n,e)&&e.push(n)}r.$element.val(e),r.$element.trigger("change")});else{var t=s.id;this.$element.val(t),this.$element.trigger("change")}},i.prototype.unselect=function(s){var r=this;if(this.$element.prop("multiple"))return s.selected=!1,a(s.element).is("option")?(s.element.selected=!1,void this.$element.trigger("change")):void this.current(function(t){for(var e=[],i=0;i<t.length;i++){var n=t[i].id;n!==s.id&&-1===a.inArray(n,e)&&e.push(n)}r.$element.val(e),r.$element.trigger("change")})},i.prototype.bind=function(t){var e=this;this.container=t,t.on("select",function(t){e.select(t.data)}),t.on("unselect",function(t){e.unselect(t.data)})},i.prototype.destroy=function(){this.$element.find("*").each(function(){a.removeData(this,"data")})},i.prototype.query=function(n,t){var s=[],r=this,e=this.$element.children();e.each(function(){var t=a(this);if(t.is("option")||t.is("optgroup")){var e=r.item(t),i=r.matches(n,e);null!==i&&s.push(i)}}),t({results:s})},i.prototype.addOptions=function(t){e.appendMany(this.$element,t)},i.prototype.option=function(t){var e;t.children?(e=document.createElement("optgroup"),e.label=t.text):(e=document.createElement("option"),void 0!==e.textContent?e.textContent=t.text:e.innerText=t.text),t.id&&(e.value=t.id),t.disabled&&(e.disabled=!0),t.selected&&(e.selected=!0),t.title&&(e.title=t.title);var i=a(e),n=this._normalizeItem(t);return n.element=e,a.data(e,"data",n),i},i.prototype.item=function(t){var e={};if(e=a.data(t[0],"data"),null!=e)return e;if(t.is("option"))e={id:t.val(),text:t.text(),disabled:t.prop("disabled"),selected:t.prop("selected"),title:t.prop("title")};else if(t.is("optgroup")){e={text:t.prop("label"),children:[],title:t.prop("title")};for(var i=t.children("option"),n=[],s=0;s<i.length;s++){var r=a(i[s]),o=this.item(r);n.push(o)}e.children=n}return e=this._normalizeItem(e),e.element=t[0],a.data(t[0],"data",e),e},i.prototype._normalizeItem=function(t){a.isPlainObject(t)||(t={id:t,text:t}),t=a.extend({},{text:""},t);var e={selected:!1,disabled:!1};return null!=t.id&&(t.id=t.id.toString()),null!=t.text&&(t.text=t.text.toString()),null==t._resultId&&t.id&&null!=this.container&&(t._resultId=this.generateResultId(this.container,t)),a.extend({},e,t)},i.prototype.matches=function(t,e){var i=this.options.get("matcher");return i(t,e)},i}),e.define("select2/data/array",["./select","../utils","jquery"],function(t,f,p){function n(t,e){var i=e.get("data")||[];n.__super__.constructor.call(this,t,e),this.addOptions(this.convertToOptions(i))}return f.Extend(n,t),n.prototype.select=function(i){var t=this.$element.find("option").filter(function(t,e){return e.value==i.id.toString()});0===t.length&&(t=this.option(i),this.addOptions(t)),n.__super__.select.call(this,i)},n.prototype.convertToOptions=function(t){function e(t){return function(){return p(this).val()==t.id}}for(var i=this,n=this.$element.find("option"),s=n.map(function(){return i.item(p(this)).id}).get(),r=[],o=0;o<t.length;o++){var a=this._normalizeItem(t[o]);if(p.inArray(a.id,s)>=0){var l=n.filter(e(a)),c=this.item(l),h=(p.extend(!0,{},c,a),this.option(c));l.replaceWith(h)}else{var u=this.option(a);if(a.children){var d=this.convertToOptions(a.children);f.appendMany(u,d)}r.push(u)}}return r},n}),e.define("select2/data/ajax",["./array","../utils","jquery"],function(i,t,r){function e(t,e){this.ajaxOptions=this._applyDefaults(e.get("ajax")),null!=this.ajaxOptions.processResults&&(this.processResults=this.ajaxOptions.processResults),i.__super__.constructor.call(this,t,e)}return t.Extend(e,i),e.prototype._applyDefaults=function(t){var e={data:function(t){return{q:t.term}},transport:function(t,e,i){var n=r.ajax(t);return n.then(e),n.fail(i),n}};return r.extend({},e,t,!0)},e.prototype.processResults=function(t){return t},e.prototype.query=function(i,n){function t(){var t=e.transport(e,function(t){var e=s.processResults(t,i);s.options.get("debug")&&window.console&&console.error&&(e&&e.results&&r.isArray(e.results)||console.error("Select2: The AJAX results did not return an array in the `results` key of the response.")),n(e)},function(){});s._request=t}var s=this;null!=this._request&&(r.isFunction(this._request.abort)&&this._request.abort(),this._request=null);var e=r.extend({type:"GET"},this.ajaxOptions);"function"==typeof e.url&&(e.url=e.url(i)),"function"==typeof e.data&&(e.data=e.data(i)),this.ajaxOptions.delay&&""!==i.term?(this._queryTimeout&&window.clearTimeout(this._queryTimeout),this._queryTimeout=window.setTimeout(t,this.ajaxOptions.delay)):t()},e}),e.define("select2/data/tags",["jquery"],function(c){function t(t,e,i){var n=i.get("tags"),s=i.get("createTag");if(void 0!==s&&(this.createTag=s),t.call(this,e,i),c.isArray(n))for(var r=0;r<n.length;r++){var o=n[r],a=this._normalizeItem(o),l=this.option(a);this.$element.append(l)}}return t.prototype.query=function(t,c,h){function u(t,e){for(var i=t.results,n=0;n<i.length;n++){var s=i[n],r=null!=s.children&&!u({results:s.children},!0),o=s.text===c.term;if(o||r)return e?!1:(t.data=i,void h(t))}if(e)return!0;var a=d.createTag(c);if(null!=a){var l=d.option(a);l.attr("data-select2-tag",!0),d.addOptions([l]),d.insertTag(i,a)}t.results=i,h(t)}var d=this;return this._removeOldTags(),null==c.term||null!=c.page?void t.call(this,c,h):void t.call(this,c,u)},t.prototype.createTag=function(t,e){var i=c.trim(e.term);return""===i?null:{id:i,text:i}},t.prototype.insertTag=function(t,e,i){e.unshift(i)},t.prototype._removeOldTags=function(){var t=(this._lastTag,this.$element.find("option[data-select2-tag]"));t.each(function(){this.selected||c(this).remove()})},t}),e.define("select2/data/tokenizer",["jquery"],function(d){function t(t,e,i){var n=i.get("tokenizer");void 0!==n&&(this.tokenizer=n),t.call(this,e,i)}return t.prototype.bind=function(t,e,i){t.call(this,e,i),this.$search=e.dropdown.$search||e.selection.$search||i.find(".select2-search__field")},t.prototype.query=function(t,e,i){function n(t){s.select(t)}var s=this;e.term=e.term||"";var r=this.tokenizer(e,this.options,n);r.term!==e.term&&(this.$search.length&&(this.$search.val(r.term),this.$search.focus()),e.term=r.term),t.call(this,e,i)},t.prototype.tokenizer=function(t,e,i,n){for(var s=i.get("tokenSeparators")||[],r=e.term,o=0,a=this.createTag||function(t){return{id:t.term,text:t.term}};o<r.length;){var l=r[o];if(-1!==d.inArray(l,s)){var c=r.substr(0,o),h=d.extend({},e,{term:c}),u=a(h);n(u),r=r.substr(o+1)||"",o=0}else o++}return{term:r}},t}),e.define("select2/data/minimumInputLength",[],function(){function t(t,e,i){this.minimumInputLength=i.get("minimumInputLength"),t.call(this,e,i)}return t.prototype.query=function(t,e,i){return e.term=e.term||"",e.term.length<this.minimumInputLength?void this.trigger("results:message",{message:"inputTooShort",args:{minimum:this.minimumInputLength,input:e.term,params:e}}):void t.call(this,e,i)},t}),e.define("select2/data/maximumInputLength",[],function(){function t(t,e,i){this.maximumInputLength=i.get("maximumInputLength"),t.call(this,e,i)}return t.prototype.query=function(t,e,i){return e.term=e.term||"",this.maximumInputLength>0&&e.term.length>this.maximumInputLength?void this.trigger("results:message",{message:"inputTooLong",args:{maximum:this.maximumInputLength,input:e.term,params:e}}):void t.call(this,e,i)},t}),e.define("select2/data/maximumSelectionLength",[],function(){function t(t,e,i){this.maximumSelectionLength=i.get("maximumSelectionLength"),t.call(this,e,i)}return t.prototype.query=function(i,n,s){var r=this;this.current(function(t){var e=null!=t?t.length:0;return r.maximumSelectionLength>0&&e>=r.maximumSelectionLength?void r.trigger("results:message",{message:"maximumSelected",args:{maximum:r.maximumSelectionLength}}):void i.call(r,n,s)})},t}),e.define("select2/dropdown",["jquery","./utils"],function(e,t){function i(t,e){this.$element=t,this.options=e,i.__super__.constructor.call(this)}return t.Extend(i,t.Observable),i.prototype.render=function(){var t=e('<span class="select2-dropdown"><span class="select2-results"></span></span>');return t.attr("dir",this.options.get("dir")),this.$dropdown=t,t},i.prototype.position=function(){},i.prototype.destroy=function(){this.$dropdown.remove()},i}),e.define("select2/dropdown/search",["jquery","../utils"],function(s){function t(){}return t.prototype.render=function(t){var e=t.call(this),i=s('<span class="select2-search select2-search--dropdown"><input class="select2-search__field" type="search" tabindex="-1" autocomplete="off" autocorrect="off" autocapitalize="off" spellcheck="false" role="textbox" /></span>');return this.$searchContainer=i,this.$search=i.find("input"),e.prepend(i),e},t.prototype.bind=function(t,e,i){var n=this;t.call(this,e,i),this.$search.on("keydown",function(t){n.trigger("keypress",t),n._keyUpPrevented=t.isDefaultPrevented()}),this.$search.on("input",function(){s(this).off("keyup")}),this.$search.on("keyup input",function(t){n.handleSearch(t)}),e.on("open",function(){n.$search.attr("tabindex",0),n.$search.focus(),window.setTimeout(function(){n.$search.focus()},0)}),e.on("close",function(){n.$search.attr("tabindex",-1),n.$search.val("")}),e.on("results:all",function(t){if(null==t.query.term||""===t.query.term){var e=n.showSearch(t);e?n.$searchContainer.removeClass("select2-search--hide"):n.$searchContainer.addClass("select2-search--hide")}})},t.prototype.handleSearch=function(){if(!this._keyUpPrevented){var t=this.$search.val();this.trigger("query",{term:t})}this._keyUpPrevented=!1},t.prototype.showSearch=function(){return!0},t}),e.define("select2/dropdown/hidePlaceholder",[],function(){function t(t,e,i,n){this.placeholder=this.normalizePlaceholder(i.get("placeholder")),t.call(this,e,i,n)}return t.prototype.append=function(t,e){e.results=this.removePlaceholder(e.results),t.call(this,e)},t.prototype.normalizePlaceholder=function(t,e){return"string"==typeof e&&(e={id:"",text:e}),e},t.prototype.removePlaceholder=function(t,e){for(var i=e.slice(0),n=e.length-1;n>=0;n--){var s=e[n];this.placeholder.id===s.id&&i.splice(n,1)}return i},t}),e.define("select2/dropdown/infiniteScroll",["jquery"],function(s){function t(t,e,i,n){this.lastParams={},t.call(this,e,i,n),this.$loadingMore=this.createLoadingMore(),this.loading=!1}return t.prototype.append=function(t,e){this.$loadingMore.remove(),this.loading=!1,t.call(this,e),this.showLoadingMore(e)&&this.$results.append(this.$loadingMore)},t.prototype.bind=function(t,e,i){var n=this;t.call(this,e,i),e.on("query",function(t){n.lastParams=t,n.loading=!0}),e.on("query:append",function(t){n.lastParams=t,n.loading=!0}),this.$results.on("scroll",function(){var t=s.contains(document.documentElement,n.$loadingMore[0]);if(!n.loading&&t){var e=n.$results.offset().top+n.$results.outerHeight(!1),i=n.$loadingMore.offset().top+n.$loadingMore.outerHeight(!1);e+50>=i&&n.loadMore()}})},t.prototype.loadMore=function(){this.loading=!0;var t=s.extend({},{page:1},this.lastParams);t.page++,this.trigger("query:append",t)},t.prototype.showLoadingMore=function(t,e){return e.pagination&&e.pagination.more},t.prototype.createLoadingMore=function(){var t=s('<li class="option load-more" role="treeitem"></li>'),e=this.options.get("translations").get("loadingMore");return t.html(e(this.lastParams)),t},t}),e.define("select2/dropdown/attachBody",["jquery","../utils"],function(u,o){function t(t,e,i){this.$dropdownParent=i.get("dropdownParent")||document.body,t.call(this,e,i)}return t.prototype.bind=function(t,e,i){var n=this,s=!1;t.call(this,e,i),e.on("open",function(){n._showDropdown(),n._attachPositioningHandler(e),s||(s=!0,e.on("results:all",function(){n._positionDropdown(),n._resizeDropdown()}),e.on("results:append",function(){n._positionDropdown(),n._resizeDropdown()}))}),e.on("close",function(){n._hideDropdown(),n._detachPositioningHandler(e)}),this.$dropdownContainer.on("mousedown",function(t){t.stopPropagation()})},t.prototype.position=function(t,e,i){e.attr("class",i.attr("class")),e.removeClass("select2"),e.addClass("select2-container--open"),e.css({position:"absolute",top:-999999}),this.$container=i},t.prototype.render=function(t){var e=u("<span></span>"),i=t.call(this);return e.append(i),this.$dropdownContainer=e,e},t.prototype._hideDropdown=function(){this.$dropdownContainer.detach()},t.prototype._attachPositioningHandler=function(t){var e=this,i="scroll.select2."+t.id,n="resize.select2."+t.id,s="orientationchange.select2."+t.id,r=this.$container.parents().filter(o.hasScroll);r.each(function(){u(this).data("select2-scroll-position",{x:u(this).scrollLeft(),y:u(this).scrollTop()})}),r.on(i,function(){var t=u(this).data("select2-scroll-position");u(this).scrollTop(t.y)}),u(window).on(i+" "+n+" "+s,function(){e._positionDropdown(),e._resizeDropdown()})},t.prototype._detachPositioningHandler=function(t){var e="scroll.select2."+t.id,i="resize.select2."+t.id,n="orientationchange.select2."+t.id,s=this.$container.parents().filter(o.hasScroll);s.off(e),u(window).off(e+" "+i+" "+n)},t.prototype._positionDropdown=function(){var t=u(window),e=this.$dropdown.hasClass("select2-dropdown--above"),i=this.$dropdown.hasClass("select2-dropdown--below"),n=null,s=(this.$container.position(),this.$container.offset());s.bottom=s.top+this.$container.outerHeight(!1);var r={height:this.$container.outerHeight(!1)};r.top=s.top,r.bottom=s.top+r.height;var o={height:this.$dropdown.outerHeight(!1)},a={top:t.scrollTop(),bottom:t.scrollTop()+t.height()},l=a.top<s.top-o.height,c=a.bottom>s.bottom+o.height,h={left:s.left,top:r.bottom};e||i||(n="below"),c||!l||e?!l&&c&&e&&(n="below"):n="above",("above"==n||e&&"below"!==n)&&(h.top=r.top-o.height),null!=n&&(this.$dropdown.removeClass("select2-dropdown--below select2-dropdown--above").addClass("select2-dropdown--"+n),this.$container.removeClass("select2-container--below select2-container--above").addClass("select2-container--"+n)),this.$dropdownContainer.css(h)},t.prototype._resizeDropdown=function(){this.$dropdownContainer.width();var t={width:this.$container.outerWidth(!1)+"px"};this.options.get("dropdownAutoWidth")&&(t.minWidth=t.width,t.width="auto"),this.$dropdown.css(t)},t.prototype._showDropdown=function(){this.$dropdownContainer.appendTo(this.$dropdownParent),this._positionDropdown(),this._resizeDropdown()},t}),e.define("select2/dropdown/minimumResultsForSearch",[],function(){function s(t){for(var e=0,i=0;i<t.length;i++){var n=t[i];n.children?e+=s(n.children):e++}return e}function t(t,e,i,n){this.minimumResultsForSearch=i.get("minimumResultsForSearch"),this.minimumResultsForSearch<0&&(this.minimumResultsForSearch=1/0),t.call(this,e,i,n)}return t.prototype.showSearch=function(t,e){return s(e.data.results)<this.minimumResultsForSearch?!1:t.call(this,e)},t}),e.define("select2/dropdown/selectOnClose",[],function(){function t(){}return t.prototype.bind=function(t,e,i){var n=this;t.call(this,e,i),e.on("close",function(){n._handleSelectOnClose()})},t.prototype._handleSelectOnClose=function(){var t=this.getHighlightedResults();t.length<1||this.trigger("select",{data:t.data("data")})},t}),e.define("select2/dropdown/closeOnSelect",[],function(){function t(){}return t.prototype.bind=function(t,e,i){var n=this;t.call(this,e,i),e.on("select",function(t){n._selectTriggered(t)}),e.on("unselect",function(t){n._selectTriggered(t)})},t.prototype._selectTriggered=function(t,e){var i=e.originalEvent;i&&i.ctrlKey||this.trigger("close")},t}),e.define("select2/i18n/en",[],function(){return{errorLoading:function(){return"The results could not be loaded."},inputTooLong:function(t){var e=t.input.length-t.maximum,i="Please delete "+e+" character";return 1!=e&&(i+="s"),i},inputTooShort:function(t){var e=t.minimum-t.input.length,i="Please enter "+e+" or more characters";return i},loadingMore:function(){return"Loading more results…"},maximumSelected:function(t){var e="You can only select "+t.maximum+" item";return 1!=t.maximum&&(e+="s"),e},noResults:function(){return"No results found"},searching:function(){return"Searching…"}}}),e.define("select2/defaults",["jquery","require","./results","./selection/single","./selection/multiple","./selection/placeholder","./selection/allowClear","./selection/search","./selection/eventRelay","./utils","./translation","./diacritics","./data/select","./data/array","./data/ajax","./data/tags","./data/tokenizer","./data/minimumInputLength","./data/maximumInputLength","./data/maximumSelectionLength","./dropdown","./dropdown/search","./dropdown/hidePlaceholder","./dropdown/infiniteScroll","./dropdown/attachBody","./dropdown/minimumResultsForSearch","./dropdown/selectOnClose","./dropdown/closeOnSelect","./i18n/en"],function(m,g,v,y,b,w,x,_,k,C,S,i,T,D,M,P,I,E,F,$,A,H,O,L,R,z,N,B,t){function e(){this.reset()}e.prototype.apply=function(e){if(e=m.extend({},this.defaults,e),null==e.dataAdapter){if(e.dataAdapter=null!=e.ajax?M:null!=e.data?D:T,e.minimumInputLength>0&&(e.dataAdapter=C.Decorate(e.dataAdapter,E)),e.maximumInputLength>0&&(e.dataAdapter=C.Decorate(e.dataAdapter,F)),e.maximumSelectionLength>0&&(e.dataAdapter=C.Decorate(e.dataAdapter,$)),e.tags&&(e.dataAdapter=C.Decorate(e.dataAdapter,P)),(null!=e.tokenSeparators||null!=e.tokenizer)&&(e.dataAdapter=C.Decorate(e.dataAdapter,I)),null!=e.query){var t=g(e.amdBase+"compat/query");e.dataAdapter=C.Decorate(e.dataAdapter,t)}if(null!=e.initSelection){var i=g(e.amdBase+"compat/initSelection");e.dataAdapter=C.Decorate(e.dataAdapter,i)}}if(null==e.resultsAdapter&&(e.resultsAdapter=v,null!=e.ajax&&(e.resultsAdapter=C.Decorate(e.resultsAdapter,L)),null!=e.placeholder&&(e.resultsAdapter=C.Decorate(e.resultsAdapter,O)),e.selectOnClose&&(e.resultsAdapter=C.Decorate(e.resultsAdapter,N))),null==e.dropdownAdapter){if(e.multiple)e.dropdownAdapter=A;else{var n=C.Decorate(A,H);e.dropdownAdapter=n}if(0!==e.minimumResultsForSearch&&(e.dropdownAdapter=C.Decorate(e.dropdownAdapter,z)),e.closeOnSelect&&(e.dropdownAdapter=C.Decorate(e.dropdownAdapter,B)),null!=e.dropdownCssClass||null!=e.dropdownCss||null!=e.adaptDropdownCssClass){var s=g(e.amdBase+"compat/dropdownCss");e.dropdownAdapter=C.Decorate(e.dropdownAdapter,s)}e.dropdownAdapter=C.Decorate(e.dropdownAdapter,R)}if(null==e.selectionAdapter){if(e.selectionAdapter=e.multiple?b:y,null!=e.placeholder&&(e.selectionAdapter=C.Decorate(e.selectionAdapter,w)),e.allowClear&&(e.selectionAdapter=C.Decorate(e.selectionAdapter,x)),e.multiple&&(e.selectionAdapter=C.Decorate(e.selectionAdapter,_)),null!=e.containerCssClass||null!=e.containerCss||null!=e.adaptContainerCssClass){var r=g(e.amdBase+"compat/containerCss");e.selectionAdapter=C.Decorate(e.selectionAdapter,r)}e.selectionAdapter=C.Decorate(e.selectionAdapter,k)}if("string"==typeof e.language)if(e.language.indexOf("-")>0){var o=e.language.split("-"),a=o[0];e.language=[e.language,a]}else e.language=[e.language];if(m.isArray(e.language)){var l=new S;e.language.push("en");for(var c=e.language,h=0;h<c.length;h++){var u=c[h],d={};try{d=S.loadPath(u)}catch(t){try{u=this.defaults.amdLanguageBase+u,d=S.loadPath(u)}catch(t){e.debug&&window.console&&console.warn&&console.warn('Select2: The language file for "'+u+'" could not be automatically loaded. A fallback will be used instead.');continue}}l.extend(d)}e.translations=l}else{var f=S.loadPath(this.defaults.amdLanguageBase+"en"),p=new S(e.language);p.extend(f),e.translations=p}return e},e.prototype.reset=function(){function l(t){function e(t){return i[t]||t}return t.replace(/[^\u0000-\u007E]/g,e)}function c(t,e){if(""===m.trim(t.term))return e;if(e.children&&e.children.length>0){for(var i=m.extend(!0,{},e),n=e.children.length-1;n>=0;n--){var s=e.children[n],r=c(t,s);null==r&&i.children.splice(n,1)}return i.children.length>0?i:c(t,i)}var o=l(e.text).toUpperCase(),a=l(t.term).toUpperCase();return o.indexOf(a)>-1?e:null}this.defaults={amdBase:"./",amdLanguageBase:"./i18n/",closeOnSelect:!0,debug:!1,dropdownAutoWidth:!1,escapeMarkup:C.escapeMarkup,language:t,matcher:c,minimumInputLength:0,maximumInputLength:0,maximumSelectionLength:0,minimumResultsForSearch:0,selectOnClose:!1,sorter:function(t){return t},templateResult:function(t){return t.text},templateSelection:function(t){return t.text},theme:"default",width:"resolve"}},e.prototype.set=function(t,e){var i=m.camelCase(t),n={};n[i]=e;var s=C._convertData(n);m.extend(this.defaults,s)};var n=new e;return n}),e.define("select2/options",["require","jquery","./defaults","./utils"],function(n,r,s,o){function t(t,e){if(this.options=t,null!=e&&this.fromElement(e),this.options=s.apply(this.options),e&&e.is("input")){var i=n(this.get("amdBase")+"compat/inputData");this.options.dataAdapter=o.Decorate(this.options.dataAdapter,i)}}return t.prototype.fromElement=function(t){var e=["select2"];null==this.options.multiple&&(this.options.multiple=t.prop("multiple")),null==this.options.disabled&&(this.options.disabled=t.prop("disabled")),null==this.options.language&&(t.prop("lang")?this.options.language=t.prop("lang").toLowerCase():t.closest("[lang]").prop("lang")&&(this.options.language=t.closest("[lang]").prop("lang"))),null==this.options.dir&&(this.options.dir=t.prop("dir")?t.prop("dir"):t.closest("[dir]").prop("dir")?t.closest("[dir]").prop("dir"):"ltr"),t.prop("disabled",this.options.disabled),t.prop("multiple",this.options.multiple),t.data("select2Tags")&&(this.options.debug&&window.console&&console.warn&&console.warn('Select2: The `data-select2-tags` attribute has been changed to use the `data-data` and `data-tags="true"` attributes and will be removed in future versions of Select2.'),t.data("data",t.data("select2Tags")),t.data("tags",!0)),t.data("ajaxUrl")&&(this.options.debug&&window.console&&console.warn&&console.warn("Select2: The `data-ajax-url` attribute has been changed to `data-ajax--url` and support for the old attribute will be removed in future versions of Select2."),t.attr("ajax--url",t.data("ajaxUrl")),t.data("ajax--url",t.data("ajaxUrl")));var i={};i=r.fn.jquery&&"1."==r.fn.jquery.substr(0,2)&&t[0].dataset?r.extend(!0,{},t[0].dataset,t.data()):t.data();var n=r.extend(!0,{},i);n=o._convertData(n);for(var s in n)r.inArray(s,e)>-1||(r.isPlainObject(this.options[s])?r.extend(this.options[s],n[s]):this.options[s]=n[s]);return this},t.prototype.get=function(t){return this.options[t]},t.prototype.set=function(t,e){this.options[t]=e},t}),e.define("select2/core",["jquery","./options","./utils","./keys"],function(s,c,i,n){var h=function(t,e){null!=t.data("select2")&&t.data("select2").destroy(),this.$element=t,this.id=this._generateId(t),e=e||{},this.options=new c(e,t),h.__super__.constructor.call(this);var i=t.attr("tabindex")||0;t.data("old-tabindex",i),t.attr("tabindex","-1");var n=this.options.get("dataAdapter");this.dataAdapter=new n(t,this.options);var s=this.render();this._placeContainer(s);var r=this.options.get("selectionAdapter");this.selection=new r(t,this.options),this.$selection=this.selection.render(),this.selection.position(this.$selection,s);var o=this.options.get("dropdownAdapter");this.dropdown=new o(t,this.options),this.$dropdown=this.dropdown.render(),this.dropdown.position(this.$dropdown,s);var a=this.options.get("resultsAdapter");this.results=new a(t,this.options,this.dataAdapter),this.$results=this.results.render(),this.results.position(this.$results,this.$dropdown);var l=this;this._bindAdapters(),this._registerDomEvents(),this._registerDataEvents(),this._registerSelectionEvents(),this._registerDropdownEvents(),this._registerResultsEvents(),this._registerEvents(),this.dataAdapter.current(function(t){l.trigger("selection:update",{data:t})}),t.addClass("select2-hidden-accessible"),t.attr("aria-hidden","true"),this._syncAttributes(),t.data("select2",this)};return i.Extend(h,i.Observable),h.prototype._generateId=function(t){var e="";return e=null!=t.attr("id")?t.attr("id"):null!=t.attr("name")?t.attr("name")+"-"+i.generateChars(2):i.generateChars(4),e="select2-"+e},h.prototype._placeContainer=function(t){t.insertAfter(this.$element);var e=this._resolveWidth(this.$element,this.options.get("width"));null!=e&&t.css("width",e)},h.prototype._resolveWidth=function(t,e){var i=/^width:(([-+]?([0-9]*\.)?[0-9]+)(px|em|ex|%|in|cm|mm|pt|pc))/i;if("resolve"==e){var n=this._resolveWidth(t,"style");return null!=n?n:this._resolveWidth(t,"element")}if("element"==e){var s=t.outerWidth(!1);return 0>=s?"auto":s+"px"}if("style"==e){var r=t.attr("style");if("string"!=typeof r)return null;for(var o=r.split(";"),a=0,l=o.length;l>a;a+=1){var c=o[a].replace(/\s/g,""),h=c.match(i);if(null!==h&&h.length>=1)return h[1]}return null}return e},h.prototype._bindAdapters=function(){this.dataAdapter.bind(this,this.$container),this.selection.bind(this,this.$container),this.dropdown.bind(this,this.$container),this.results.bind(this,this.$container)},h.prototype._registerDomEvents=function(){var e=this;this.$element.on("change.select2",function(){e.dataAdapter.current(function(t){e.trigger("selection:update",{data:t})})}),this._sync=i.bind(this._syncAttributes,this),this.$element[0].attachEvent&&this.$element[0].attachEvent("onpropertychange",this._sync);var t=window.MutationObserver||window.WebKitMutationObserver||window.MozMutationObserver;null!=t?(this._observer=new t(function(t){s.each(t,e._sync)}),this._observer.observe(this.$element[0],{attributes:!0,subtree:!1})):this.$element[0].addEventListener&&this.$element[0].addEventListener("DOMAttrModified",e._sync,!1)},h.prototype._registerDataEvents=function(){var i=this;this.dataAdapter.on("*",function(t,e){i.trigger(t,e)})},h.prototype._registerSelectionEvents=function(){var i=this,n=["toggle"];this.selection.on("toggle",function(){i.toggleDropdown()}),this.selection.on("*",function(t,e){-1===s.inArray(t,n)&&i.trigger(t,e)})},h.prototype._registerDropdownEvents=function(){var i=this;this.dropdown.on("*",function(t,e){i.trigger(t,e)})},h.prototype._registerResultsEvents=function(){var i=this;this.results.on("*",function(t,e){i.trigger(t,e)})},h.prototype._registerEvents=function(){var i=this;this.on("open",function(){i.$container.addClass("select2-container--open")}),this.on("close",function(){i.$container.removeClass("select2-container--open")}),this.on("enable",function(){i.$container.removeClass("select2-container--disabled")}),this.on("disable",function(){i.$container.addClass("select2-container--disabled")}),this.on("focus",function(){i.$container.addClass("select2-container--focus")}),this.on("blur",function(){i.$container.removeClass("select2-container--focus")}),this.on("query",function(e){i.isOpen()||i.trigger("open"),this.dataAdapter.query(e,function(t){i.trigger("results:all",{data:t,query:e})})}),this.on("query:append",function(e){this.dataAdapter.query(e,function(t){i.trigger("results:append",{data:t,query:e})})}),this.on("keypress",function(t){var e=t.which;i.isOpen()?e===n.ENTER?(i.trigger("results:select"),t.preventDefault()):e===n.SPACE&&t.ctrlKey?(i.trigger("results:toggle"),t.preventDefault()):e===n.UP?(i.trigger("results:previous"),t.preventDefault()):e===n.DOWN?(i.trigger("results:next"),t.preventDefault()):(e===n.ESC||e===n.TAB)&&(i.close(),t.preventDefault()):(e===n.ENTER||e===n.SPACE||(e===n.DOWN||e===n.UP)&&t.altKey)&&(i.open(),t.preventDefault())})},h.prototype._syncAttributes=function(){this.options.set("disabled",this.$element.prop("disabled")),this.options.get("disabled")?(this.isOpen()&&this.close(),this.trigger("disable")):this.trigger("enable")},h.prototype.trigger=function(t,e){var i=h.__super__.trigger,n={open:"opening",close:"closing",select:"selecting",unselect:"unselecting"};if(t in n){var s=n[t],r={prevented:!1,name:t,args:e};if(i.call(this,s,r),r.prevented)return void(e.prevented=!0)}i.call(this,t,e)},h.prototype.toggleDropdown=function(){this.options.get("disabled")||(this.isOpen()?this.close():this.open())},h.prototype.open=function(){this.isOpen()||(this.trigger("query",{}),this.trigger("open"))},h.prototype.close=function(){this.isOpen()&&this.trigger("close")},h.prototype.isOpen=function(){return this.$container.hasClass("select2-container--open")},h.prototype.enable=function(t){this.options.get("debug")&&window.console&&console.warn&&console.warn('Select2: The `select2("enable")` method has been deprecated and will be removed in later Select2 versions. Use $element.prop("disabled") instead.'),(null==t||0===t.length)&&(t=[!0]);var e=!t[0];this.$element.prop("disabled",e)},h.prototype.data=function(){this.options.get("debug")&&arguments.length>0&&window.console&&console.warn&&console.warn('Select2: Data can no longer be set using `select2("data")`. You should consider setting the value instead using `$element.val()`.');var e=[];return this.dataAdapter.current(function(t){e=t}),e},h.prototype.val=function(t){if(this.options.get("debug")&&window.console&&console.warn&&console.warn('Select2: The `select2("val")` method has been deprecated and will be removed in later Select2 versions. Use $element.val() instead.'),null==t||0===t.length)return this.$element.val();var e=t[0];s.isArray(e)&&(e=s.map(e,function(t){return t.toString()})),this.$element.val(e).trigger("change")},h.prototype.destroy=function(){this.$container.remove(),this.$element[0].detachEvent&&this.$element[0].detachEvent("onpropertychange",this._sync),null!=this._observer?(this._observer.disconnect(),this._observer=null):this.$element[0].removeEventListener&&this.$element[0].removeEventListener("DOMAttrModified",this._sync,!1),this._sync=null,this.$element.off(".select2"),this.$element.attr("tabindex",this.$element.data("old-tabindex")),this.$element.removeClass("select2-hidden-accessible"),this.$element.attr("aria-hidden","false"),this.$element.removeData("select2"),this.dataAdapter.destroy(),this.selection.destroy(),this.dropdown.destroy(),this.results.destroy(),this.dataAdapter=null,this.selection=null,this.dropdown=null,this.results=null},h.prototype.render=function(){var t=s('<span class="select2 select2-container"><span class="selection"></span><span class="dropdown-wrapper" aria-hidden="true"></span></span>');return t.attr("dir",this.options.get("dir")),this.$container=t,this.$container.addClass("select2-container--"+this.options.get("theme")),t.data("element",this.$element),t},h}),e.define("select2/compat/utils",["jquery"],function(o){function t(t,e,i){var n,s,r=[];n=o.trim(t.attr("class")),n&&(n=""+n,o(n.split(/\s+/)).each(function(){0===this.indexOf("select2-")&&r.push(this)})),n=o.trim(e.attr("class")),n&&(n=""+n,o(n.split(/\s+/)).each(function(){0!==this.indexOf("select2-")&&(s=i(this),null!=s&&r.push(s))})),t.attr("class",r.join(" "))}return{syncCssClasses:t}}),e.define("select2/compat/containerCss",["jquery","./utils"],function(o,a){function l(){return null}function t(){}return t.prototype.render=function(t){var e=t.call(this),i=this.options.get("containerCssClass")||"";o.isFunction(i)&&(i=i(this.$element));var n=this.options.get("adaptContainerCssClass");if(n=n||l,-1!==i.indexOf(":all:")){i=i.replace(":all","");var s=n;n=function(t){var e=s(t);return null!=e?e+" "+t:t}}var r=this.options.get("containerCss")||{};return o.isFunction(r)&&(r=r(this.$element)),a.syncCssClasses(e,this.$element,n),e.css(r),e.addClass(i),e},t}),e.define("select2/compat/dropdownCss",["jquery","./utils"],function(o,a){function l(){return null}function t(){}return t.prototype.render=function(t){var e=t.call(this),i=this.options.get("dropdownCssClass")||"";o.isFunction(i)&&(i=i(this.$element));var n=this.options.get("adaptDropdownCssClass");if(n=n||l,-1!==i.indexOf(":all:")){i=i.replace(":all","");var s=n;n=function(t){var e=s(t);return null!=e?e+" "+t:t}}var r=this.options.get("dropdownCss")||{};return o.isFunction(r)&&(r=r(this.$element)),a.syncCssClasses(e,this.$element,n),e.css(r),e.addClass(i),e},t}),e.define("select2/compat/initSelection",["jquery"],function(n){function t(t,e,i){i.get("debug")&&window.console&&console.warn&&console.warn("Select2: The `initSelection` option has been deprecated in favor of a custom data adapter that overrides the `current` method. This method is now called multiple times instead of a single time when the instance is initialized. Support will be removed for the `initSelection` option in future versions of Select2"),this.initSelection=i.get("initSelection"),this._isInitialized=!1,t.call(this,e,i)}return t.prototype.current=function(t,e){var i=this;return this._isInitialized?void t.call(this,e):void this.initSelection.call(null,this.$element,function(t){i._isInitialized=!0,n.isArray(t)||(t=[t]),e(t)})},t}),e.define("select2/compat/inputData",["jquery"],function(o){function t(t,e,i){this._currentData=[],this._valueSeparator=i.get("valueSeparator")||",","hidden"===e.prop("type")&&i.get("debug")&&console&&console.warn&&console.warn("Select2: Using a hidden input with Select2 is no longer supported and may stop working in the future. It is recommended to use a `<select>` element instead."),t.call(this,e,i)}return t.prototype.current=function(t,e){function n(t,e){var i=[];return t.selected||-1!==o.inArray(t.id,e)?(t.selected=!0,i.push(t)):t.selected=!1,t.children&&i.push.apply(i,n(t.children,e)),i}for(var i=[],s=0;s<this._currentData.length;s++){var r=this._currentData[s];i.push.apply(i,n(r,this.$element.val().split(this._valueSeparator)))}e(i)},t.prototype.select=function(t,e){if(this.options.get("multiple")){var i=this.$element.val();i+=this._valueSeparator+e.id,this.$element.val(i),this.$element.trigger("change")}else this.current(function(t){o.map(t,function(t){t.selected=!1})}),this.$element.val(e.id),this.$element.trigger("change")},t.prototype.unselect=function(t,s){var r=this;s.selected=!1,this.current(function(t){for(var e=[],i=0;i<t.length;i++){var n=t[i];s.id!=n.id&&e.push(n.id)}r.$element.val(e.join(r._valueSeparator)),r.$element.trigger("change")})},t.prototype.query=function(t,e,i){for(var n=[],s=0;s<this._currentData.length;s++){var r=this._currentData[s],o=this.matches(e,r);null!==o&&n.push(o)}i({results:n})},t.prototype.addOptions=function(t,e){var i=o.map(e,function(t){return o.data(t[0],"data")});this._currentData.push.apply(this._currentData,i)},t}),e.define("select2/compat/matcher",["jquery"],function(a){function t(o){function t(t,e){var i=a.extend(!0,{},e);if(null==t.term||""===a.trim(t.term))return i;if(e.children){for(var n=e.children.length-1;n>=0;n--){var s=e.children[n],r=o(t.term,s.text,s);r||i.children.splice(n,1)}if(i.children.length>0)return i}return o(t.term,e.text,e)?i:null}return t}return t}),e.define("select2/compat/query",[],function(){function t(t,e,i){i.get("debug")&&window.console&&console.warn&&console.warn("Select2: The `query` option has been deprecated in favor of a custom data adapter that overrides the `query` method. Support will be removed for the `query` option in future versions of Select2."),t.call(this,e,i)}return t.prototype.query=function(t,e,i){e.callback=i;var n=this.options.get("query");n.call(null,e)},t}),e.define("select2/dropdown/attachContainer",[],function(){function t(t,e,i){t.call(this,e,i)}return t.prototype.position=function(t,e,i){var n=i.find(".dropdown-wrapper");n.append(e),e.addClass("select2-dropdown--below"),i.addClass("select2-container--below")},t}),e.define("select2/dropdown/stopPropagation",[],function(){function t(){}return t.prototype.bind=function(t,e,i){t.call(this,e,i);var n=["blur","change","click","dblclick","focus","focusin","focusout","input","keydown","keyup","keypress","mousedown","mouseenter","mouseleave","mousemove","mouseover","mouseup","search","touchend","touchstart"];this.$dropdown.on(n.join(" "),function(t){t.stopPropagation()})},t}),e.define("select2/selection/stopPropagation",[],function(){function t(){}return t.prototype.bind=function(t,e,i){t.call(this,e,i);var n=["blur","change","click","dblclick","focus","focusin","focusout","input","keydown","keyup","keypress","mousedown","mouseenter","mouseleave","mousemove","mouseover","mouseup","search","touchend","touchstart"];this.$selection.on(n.join(" "),function(t){t.stopPropagation()})},t}),e.define("jquery.select2",["jquery","require","./select2/core","./select2/defaults"],function(s,t,r,e){if(t("jquery.mousewheel"),null==s.fn.select2){var o=["open","close","destroy"];s.fn.select2=function(e){if(e=e||{},"object"==typeof e)return this.each(function(){{var t=s.extend({},e,!0);new r(s(this),t)}}),this;if("string"==typeof e){var t=this.data("select2");null==t&&window.console&&console.error&&console.error("The select2('"+e+"') method was called on an element that is not using Select2.");var i=Array.prototype.slice.call(arguments,1),n=t[e](i);return s.inArray(e,o)>-1?this:n}throw new Error("Invalid arguments for Select2: "+e)}}return null==s.fn.select2.defaults&&(s.fn.select2.defaults=e),r}),function(t){"function"==typeof e.define&&e.define.amd?e.define("jquery.mousewheel",["jquery"],t):"object"==typeof exports?module.exports=t:t(i)}(function(d){function e(t){var e=t||window.event,i=v.call(arguments,1),n=0,s=0,r=0,o=0,a=0,l=0;if(t=d.event.fix(e),t.type="mousewheel","detail"in e&&(r=-1*e.detail),"wheelDelta"in e&&(r=e.wheelDelta),"wheelDeltaY"in e&&(r=e.wheelDeltaY),"wheelDeltaX"in e&&(s=-1*e.wheelDeltaX),"axis"in e&&e.axis===e.HORIZONTAL_AXIS&&(s=-1*r,r=0),n=0===r?s:r,"deltaY"in e&&(r=-1*e.deltaY,n=r),"deltaX"in e&&(s=e.deltaX,0===r&&(n=-1*s)),0!==r||0!==s){if(1===e.deltaMode){var c=d.data(this,"mousewheel-line-height");n*=c,r*=c,s*=c}else if(2===e.deltaMode){var h=d.data(this,"mousewheel-page-height");n*=h,r*=h,s*=h}if(o=Math.max(Math.abs(r),Math.abs(s)),(!g||g>o)&&(g=o,p(e,o)&&(g/=40)),p(e,o)&&(n/=40,s/=40,r/=40),n=Math[n>=1?"floor":"ceil"](n/g),s=Math[s>=1?"floor":"ceil"](s/g),r=Math[r>=1?"floor":"ceil"](r/g),y.settings.normalizeOffset&&this.getBoundingClientRect){var u=this.getBoundingClientRect();a=t.clientX-u.left,l=t.clientY-u.top}return t.deltaX=s,t.deltaY=r,t.deltaFactor=g,t.offsetX=a,t.offsetY=l,t.deltaMode=0,i.unshift(t,n,s,r),m&&clearTimeout(m),m=setTimeout(f,200),(d.event.dispatch||d.event.handle).apply(this,i)}}function f(){g=null}function p(t,e){return y.settings.adjustOldDeltas&&"mousewheel"===t.type&&e%120===0}var m,g,t=["wheel","mousewheel","DOMMouseScroll","MozMousePixelScroll"],i="onwheel"in document||document.documentMode>=9?["wheel"]:["mousewheel","DomMouseScroll","MozMousePixelScroll"],v=Array.prototype.slice;if(d.event.fixHooks)for(var n=t.length;n;)d.event.fixHooks[t[--n]]=d.event.mouseHooks;var y=d.event.special.mousewheel={version:"3.1.12",setup:function(){if(this.addEventListener)for(var t=i.length;t;)this.addEventListener(i[--t],e,!1);else this.onmousewheel=e;d.data(this,"mousewheel-line-height",y.getLineHeight(this)),d.data(this,"mousewheel-page-height",y.getPageHeight(this))},teardown:function(){if(this.removeEventListener)for(var t=i.length;t;)this.removeEventListener(i[--t],e,!1);else this.onmousewheel=null;d.removeData(this,"mousewheel-line-height"),d.removeData(this,"mousewheel-page-height")},getLineHeight:function(t){var e=d(t),i=e["offsetParent"in d.fn?"offsetParent":"parent"]();return i.length||(i=d("body")),parseInt(i.css("fontSize"),10)||parseInt(e.css("fontSize"),10)||16},getPageHeight:function(t){return d(t).height()},settings:{adjustOldDeltas:!0,normalizeOffset:!0}};d.fn.extend({mousewheel:function(t){return t?this.bind("mousewheel",t):this.trigger("mousewheel")},unmousewheel:function(t){return this.unbind("mousewheel",t)}})}),{define:e.define,require:e.require}}(),e=t.require("jquery.select2");return i.fn.select2.amd=t,e});!function(t){"function"==typeof define&&define.amd?define(["jquery"],t):"object"==typeof module&&module.exports?module.exports=t(require("jquery")):t(window.jQuery)}(function($){"use strict";var func=function(){var t=function(e){return function(t){return e===t}},e=function(t,e){return t===e},i=function(i){return function(t,e){return t[i]===e[i]}},n=function(){return!0},s=function(){return!1},r=function(t){return function(){return!t.apply(t,arguments)}},o=function(e,i){return function(t){return e(t)&&i(t)}},a=function(t){return t},l=function(t,e){return function(){return t[e].apply(t,arguments)}},c=0,h=function(t){var e=++c+"";return t?t+e:e},u=function(t){var e=$(document);return{top:t.top+e.scrollTop(),left:t.left+e.scrollLeft(),width:t.right-t.left,height:t.bottom-t.top}},d=function(t){var e={};for(var i in t)t.hasOwnProperty(i)&&(e[t[i]]=i);return e},f=function(t,e){return e=e||"",e+t.split(".").map(function(t){return t.substring(0,1).toUpperCase()+t.substring(1)}).join("")},p=function(s,r,o){var a;return function(){var t=this,e=arguments,i=function(){a=null,o||s.apply(t,e)},n=o&&!a;clearTimeout(a),a=setTimeout(i,r),n&&s.apply(t,e)}};return{eq:t,eq2:e,peq2:i,ok:n,fail:s,self:a,not:r,and:o,invoke:l,uniqueId:h,rect2bnd:u,invertObject:d,namespaceToCamel:f,debounce:p}}(),list=function(){var i=function(t){return t[0]},s=function(t){return t[t.length-1]},t=function(t){return t.slice(0,t.length-1)},r=function(t){return t.slice(1)},e=function(t,e){for(var i=0,n=t.length;n>i;i++){var s=t[i];if(e(s))return s}},n=function(t,e){for(var i=0,n=t.length;n>i;i++)if(!e(t[i]))return!1;return!0},o=function(t,e){return $.inArray(e,t)},a=function(t,e){return-1!==o(t,e)},l=function(t,i){return i=i||func.self,t.reduce(function(t,e){return t+i(e)},0)},c=function(t){for(var e=[],i=-1,n=t.length;++i<n;)e[i]=t[i];return e},h=function(t){return!t||!t.length},u=function(t,n){if(!t.length)return[];var e=r(t);return e.reduce(function(t,e){var i=s(t);return n(s(i),e)?i[i.length]=e:t[t.length]=[e],t},[[i(t)]])},d=function(t){for(var e=[],i=0,n=t.length;n>i;i++)t[i]&&e.push(t[i]);return e},f=function(t){for(var e=[],i=0,n=t.length;n>i;i++)a(e,t[i])||e.push(t[i]);return e},p=function(t,e){var i=o(t,e);return-1===i?null:t[i+1]},m=function(t,e){var i=o(t,e);return-1===i?null:t[i-1]};return{head:i,last:s,initial:t,tail:r,prev:m,next:p,find:e,contains:a,all:n,sum:l,from:c,isEmpty:h,clusterBy:u,compact:d,unique:f}}(),isSupportAmd="function"==typeof define&&define.amd,isFontInstalled=function(t){var e="Comic Sans MS"===t?"Courier New":"Comic Sans MS",i=$("<div>").css({position:"absolute",left:"-9999px",top:"-9999px",fontSize:"200px"}).text("mmmmmmmmmwwwwwww").appendTo(document.body),n=i.css("fontFamily",e).width(),s=i.css("fontFamily",t+","+e).width();return i.remove(),n!==s},userAgent=navigator.userAgent,isMSIE=/MSIE|Trident/i.test(userAgent),browserVersion;if(isMSIE){var matches=/MSIE (\d+[.]\d+)/.exec(userAgent);matches&&(browserVersion=parseFloat(matches[1])),matches=/Trident\/.*rv:([0-9]{1,}[\.0-9]{0,})/.exec(userAgent),matches&&(browserVersion=parseFloat(matches[1]))}var isEdge=/Edge\/\d+/.test(userAgent),hasCodeMirror=!!window.CodeMirror;if(!hasCodeMirror&&isSupportAmd&&"undefined"!=typeof require)if("undefined"!=typeof require.resolve)try{require.resolve("codemirror"),hasCodeMirror=!0}catch(e){}else"undefined"!=typeof eval("require").specified&&(hasCodeMirror=eval("require").specified("codemirror"));var agent={isMac:navigator.appVersion.indexOf("Mac")>-1,isMSIE:isMSIE,isEdge:isEdge,isFF:!isEdge&&/firefox/i.test(userAgent),isPhantom:/PhantomJS/i.test(userAgent),isWebkit:!isEdge&&/webkit/i.test(userAgent),isChrome:!isEdge&&/chrome/i.test(userAgent),isSafari:!isEdge&&/safari/i.test(userAgent),browserVersion:browserVersion,jqueryVersion:parseFloat($.fn.jquery),isSupportAmd:isSupportAmd,hasCodeMirror:hasCodeMirror,isFontInstalled:isFontInstalled,isW3CRangeSupport:!!document.createRange},NBSP_CHAR=String.fromCharCode(160),ZERO_WIDTH_NBSP_CHAR="\ufeff",dom=function(){var s=function(t){return t&&$(t).hasClass("note-editable")},L=function(t){return t&&$(t).hasClass("note-control-sizing")},t=function(e){return e=e.toUpperCase(),function(t){return t&&t.nodeName.toUpperCase()===e}},o=function(t){return t&&3===t.nodeType},R=function(t){return t&&1===t.nodeType},n=function(t){return t&&/^BR|^IMG|^HR|^IFRAME|^BUTTON/.test(t.nodeName.toUpperCase())},l=function(t){return s(t)?!1:t&&/^DIV|^P|^LI|^H[1-7]/.test(t.nodeName.toUpperCase())},z=function(t){return t&&/^H[1-7]/.test(t.nodeName.toUpperCase())},N=t("PRE"),e=t("LI"),B=function(t){return l(t)&&!e(t)},i=t("TABLE"),r=t("DATA"),a=function(t){return!(d(t)||c(t)||j(t)||l(t)||i(t)||u(t)||r(t))},c=function(t){return t&&/^UL|^OL/.test(t.nodeName.toUpperCase())},j=t("HR"),h=function(t){return t&&/^TD|^TH/.test(t.nodeName.toUpperCase())},u=t("BLOCKQUOTE"),d=function(t){return h(t)||u(t)||s(t)},f=t("A"),W=function(t){return a(t)&&!!y(t,l)},Y=function(t){return a(t)&&!y(t,l)},q=t("BODY"),U=function(t,e){return t.nextSibling===e||t.previousSibling===e},V=function(t,e){e=e||func.ok;var i=[];return t.previousSibling&&e(t.previousSibling)&&i.push(t.previousSibling),i.push(t),t.nextSibling&&e(t.nextSibling)&&i.push(t.nextSibling),i},p=agent.isMSIE&&agent.browserVersion<11?"&nbsp;":"<br>",m=function(t){return o(t)?t.nodeValue.length:t?t.childNodes.length:0},g=function(t){var e=m(t);return 0===e?!0:o(t)||1!==e||t.innerHTML!==p?list.all(t.childNodes,o)&&""===t.innerHTML?!0:!1:!0},v=function(t){n(t)||m(t)||(t.innerHTML=p)},y=function(t,e){for(;t;){if(e(t))return t;if(s(t))break;t=t.parentNode}return null},G=function(t,e){for(t=t.parentNode;t&&1===m(t);){if(e(t))return t;if(s(t))break;t=t.parentNode}return null},b=function(t,e){e=e||func.fail;var i=[];return y(t,function(t){return s(t)||i.push(t),e(t)}),i},X=function(t,e){var i=b(t);return list.last(i.filter(e))},K=function(t,e){for(var i=b(t),n=e;n;n=n.parentNode)if($.inArray(n,i)>-1)return n;return null},Q=function(t,e){e=e||func.fail;for(var i=[];t&&!e(t);)i.push(t),t=t.previousSibling;return i},w=function(t,e){e=e||func.fail;for(var i=[];t&&!e(t);)i.push(t),t=t.nextSibling;return i},Z=function(s,r){var o=[];return r=r||func.ok,function t(e){s!==e&&r(e)&&o.push(e);for(var i=0,n=e.childNodes.length;n>i;i++)t(e.childNodes[i])}(s),o},J=function(t,e){var i=t.parentNode,n=$("<"+e+">")[0];return i.insertBefore(n,t),n.appendChild(t),n},x=function(t,e){var i=e.nextSibling,n=e.parentNode;return i?n.insertBefore(t,i):n.appendChild(t),t},_=function(i,t){return $.each(t,function(t,e){i.appendChild(e)}),i},k=function(t){return 0===t.offset},C=function(t){return t.offset===m(t.node)},S=function(t){return k(t)||C(t)},T=function(t,e){for(;t&&t!==e;){if(0!==M(t))return!1;t=t.parentNode}return!0},D=function(t,e){if(!e)return!1;for(;t&&t!==e;){if(M(t)!==m(t.parentNode)-1)return!1;t=t.parentNode}return!0},tt=function(t,e){return k(t)&&T(t.node,e)},et=function(t,e){return C(t)&&D(t.node,e)},M=function(t){for(var e=0;t=t.previousSibling;)e+=1;return e},P=function(t){return!!(t&&t.childNodes&&t.childNodes.length)},I=function(t,e){var i,n;if(0===t.offset){if(s(t.node))return null;i=t.node.parentNode,n=M(t.node)}else P(t.node)?(i=t.node.childNodes[t.offset-1],n=m(i)):(i=t.node,n=e?0:t.offset-1);return{node:i,offset:n}},E=function(t,e){var i,n;if(m(t.node)===t.offset){if(s(t.node))return null;i=t.node.parentNode,n=M(t.node)+1}else P(t.node)?(i=t.node.childNodes[t.offset],n=0):(i=t.node,n=e?m(t.node):t.offset+1);return{node:i,offset:n}},F=function(t,e){return t.node===e.node&&t.offset===e.offset},it=function(t){if(o(t.node)||!P(t.node)||g(t.node))return!0;var e=t.node.childNodes[t.offset-1],i=t.node.childNodes[t.offset];return e&&!n(e)||i&&!n(i)?!1:!0},nt=function(t,e){for(;t;){if(e(t))return t;t=I(t)}return null},st=function(t,e){for(;t;){if(e(t))return t;t=E(t)}return null},rt=function(t){if(!o(t.node))return!1;var e=t.node.nodeValue.charAt(t.offset-1);return e&&" "!==e&&e!==NBSP_CHAR},ot=function(t,e,i,n){for(var s=t;s&&(i(s),!F(s,e));){var r=n&&t.node!==s.node&&e.node!==s.node;s=E(s,r)}},at=function(t,e){var i=b(e,func.eq(t));return i.map(M).reverse()},lt=function(t,e){for(var i=t,n=0,s=e.length;s>n;n++)i=i.childNodes.length<=e[n]?i.childNodes[i.childNodes.length-1]:i.childNodes[e[n]];return i},A=function(t,e){var i=e&&e.isSkipPaddingBlankHTML,n=e&&e.isNotSplitEdgePoint;if(S(t)&&(o(t.node)||n)){if(k(t))return t.node;if(C(t))return t.node.nextSibling}if(o(t.node))return t.node.splitText(t.offset);var s=t.node.childNodes[t.offset],r=x(t.node.cloneNode(!1),t.node);return _(r,w(s)),i||(v(t.node),v(r)),r},H=function(t,i,n){var e=b(i.node,func.eq(t));return e.length?1===e.length?A(i,n):e.reduce(function(t,e){return t===i.node&&(t=A(i,n)),A({node:e,offset:t?dom.position(t):m(e)},n)}):null},ct=function(t,e){var i,n,s=e?l:d,r=b(t.node,s),o=list.last(r)||t.node;s(o)?(i=r[r.length-2],n=o):(i=o,n=i.parentNode);var a=i&&H(i,t,{isSkipPaddingBlankHTML:e,isNotSplitEdgePoint:e});return a||n!==t.node||(a=t.node.childNodes[t.offset]),{rightNode:a,container:n}},ht=function(t){return document.createElement(t)},ut=function(t){return document.createTextNode(t)},O=function(t,e){if(t&&t.parentNode){if(t.removeNode)return t.removeNode(e);var i=t.parentNode;if(!e){var n,s,r=[];for(n=0,s=t.childNodes.length;s>n;n++)r.push(t.childNodes[n]);for(n=0,s=r.length;s>n;n++)i.insertBefore(r[n],t)}i.removeChild(t)}},dt=function(t,e){for(;t&&!s(t)&&e(t);){var i=t.parentNode;O(t),t=i}},ft=function(t,e){if(t.nodeName.toUpperCase()===e.toUpperCase())return t;var i=ht(e);return t.style.cssText&&(i.style.cssText=t.style.cssText),_(i,list.from(t.childNodes)),x(i,t),O(t),i},pt=t("TEXTAREA"),mt=function(t,e){var i=pt(t[0])?t.val():t.html();return e?i.replace(/[\n\r]/g,""):i},gt=function(t,e){var i=mt(t);if(e){var n=/<(\/?)(\b(?!!)[^>\s]*)(.*?)(\s*\/?>)/g;i=i.replace(n,function(t,e,i){i=i.toUpperCase();var n=/^DIV|^TD|^TH|^P|^LI|^H[1-7]/.test(i)&&!!e,s=/^BLOCKQUOTE|^TABLE|^TBODY|^TR|^HR|^UL|^OL/.test(i);return t+(n||s?"\n":"")}),i=$.trim(i)}return i},vt=function(t){var e=$(t),i=e.offset(),n=e.outerHeight(!0);return{left:i.left,top:i.top+n}},yt=function(e,i){Object.keys(i).forEach(function(t){e.on(t,i[t])})},bt=function(e,i){Object.keys(i).forEach(function(t){e.off(t,i[t])})};return{NBSP_CHAR:NBSP_CHAR,ZERO_WIDTH_NBSP_CHAR:ZERO_WIDTH_NBSP_CHAR,blank:p,emptyPara:"<p>"+p+"</p>",makePredByNodeName:t,isEditable:s,isControlSizing:L,isText:o,isElement:R,isVoid:n,isPara:l,isPurePara:B,isHeading:z,isInline:a,isBlock:func.not(a),isBodyInline:Y,isBody:q,isParaInline:W,isPre:N,isList:c,isTable:i,isData:r,isCell:h,isBlockquote:u,isBodyContainer:d,isAnchor:f,isDiv:t("DIV"),isLi:e,isBR:t("BR"),isSpan:t("SPAN"),isB:t("B"),isU:t("U"),isS:t("S"),isI:t("I"),isImg:t("IMG"),isTextarea:pt,isEmpty:g,isEmptyAnchor:func.and(f,g),isClosestSibling:U,withClosestSiblings:V,nodeLength:m,isLeftEdgePoint:k,isRightEdgePoint:C,isEdgePoint:S,isLeftEdgeOf:T,isRightEdgeOf:D,isLeftEdgePointOf:tt,isRightEdgePointOf:et,prevPoint:I,nextPoint:E,isSamePoint:F,isVisiblePoint:it,prevPointUntil:nt,nextPointUntil:st,isCharPoint:rt,walkPoint:ot,ancestor:y,singleChildAncestor:G,listAncestor:b,lastAncestor:X,listNext:w,listPrev:Q,listDescendant:Z,commonAncestor:K,wrap:J,insertAfter:x,appendChildNodes:_,position:M,hasChildren:P,makeOffsetPath:at,fromOffsetPath:lt,splitTree:H,splitPoint:ct,create:ht,createText:ut,remove:O,removeWhile:dt,replace:ft,html:gt,value:mt,posFromPlaceholder:vt,attachEvents:yt,detachEvents:bt}}(),Context=function(n,t){var s=this,e=$.summernote.ui;return this.memos={},this.modules={},this.layoutInfo={},this.options=t,this.initialize=function(){return this.layoutInfo=e.createLayout(n,t),this._initialize(),n.hide(),this},this.destroy=function(){this._destroy(),n.removeData("summernote"),e.removeLayout(n,this.layoutInfo)},this.reset=function(){var t=s.isDisabled();this.code(dom.emptyPara),this._destroy(),this._initialize(),t&&s.disable()},this._initialize=function(){var e=$.extend({},this.options.buttons);Object.keys(e).forEach(function(t){s.memo("button."+t,e[t])});var i=$.extend({},this.options.modules,$.summernote.plugins||{});Object.keys(i).forEach(function(t){s.module(t,i[t],!0)}),Object.keys(this.modules).forEach(function(t){s.initializeModule(t)})},this._destroy=function(){Object.keys(this.modules).reverse().forEach(function(t){s.removeModule(t)}),Object.keys(this.memos).forEach(function(t){s.removeMemo(t)})},this.code=function(t){var e=this.invoke("codeview.isActivated");return void 0===t?(this.invoke("codeview.sync"),e?this.layoutInfo.codable.val():this.layoutInfo.editable.html()):(e?this.layoutInfo.codable.val(t):this.layoutInfo.editable.html(t),n.val(t),this.triggerEvent("change",t),void 0)},this.isDisabled=function(){return"false"===this.layoutInfo.editable.attr("contenteditable")},this.enable=function(){this.layoutInfo.editable.attr("contenteditable",!0),this.invoke("toolbar.activate",!0)},this.disable=function(){this.invoke("codeview.isActivated")&&this.invoke("codeview.deactivate"),this.layoutInfo.editable.attr("contenteditable",!1),this.invoke("toolbar.deactivate",!0)},this.triggerEvent=function(){var t=list.head(arguments),e=list.tail(list.from(arguments)),i=this.options.callbacks[func.namespaceToCamel(t,"on")];i&&i.apply(n[0],e),n.trigger("summernote."+t,e)},this.initializeModule=function(t){var e=this.modules[t];e.shouldInitialize=e.shouldInitialize||func.ok,e.shouldInitialize()&&(e.initialize&&e.initialize(),e.events&&dom.attachEvents(n,e.events))},this.module=function(t,e,i){return 1===arguments.length?this.modules[t]:(this.modules[t]=new e(this),void(i||this.initializeModule(t)))},this.removeModule=function(t){var e=this.modules[t];e.shouldInitialize()&&(e.events&&dom.detachEvents(n,e.events),e.destroy&&e.destroy()),delete this.modules[t]},this.memo=function(t,e){return 1===arguments.length?this.memos[t]:void(this.memos[t]=e)},this.removeMemo=function(t){this.memos[t]&&this.memos[t].destroy&&this.memos[t].destroy(),delete this.memos[t]},this.createInvokeHandler=function(e,i){return function(t){t.preventDefault(),s.invoke(e,i||$(t.target).closest("[data-value]").data("value"))}},this.invoke=function(){var t=list.head(arguments),e=list.tail(list.from(arguments)),i=t.split("."),n=i.length>1,s=n&&list.head(i),r=n?list.last(i):list.head(i),o=this.modules[s||"editor"];return!s&&this[r]?this[r].apply(this,e):o&&o[r]&&o.shouldInitialize()?o[r].apply(o,e):void 0},this.initialize()};$.fn.extend({summernote:function(){var t=$.type(list.head(arguments)),e="string"===t,i="object"===t,s=i?list.head(arguments):{};s=$.extend({},$.summernote.options,s),s.langInfo=$.extend(!0,{},$.summernote.lang["en-US"],$.summernote.lang[s.lang]),s.icons=$.extend(!0,{},$.summernote.options.icons,s.icons),this.each(function(t,e){var i=$(e);if(!i.data("summernote")){var n=new Context(i,s);i.data("summernote",n),i.data("summernote").triggerEvent("init",n.layoutInfo)}});var n=this.first();if(n.length){var r=n.data("summernote");if(e)return r.invoke.apply(r,list.from(arguments));s.focus&&r.invoke("editor.focus")}return this}});var Renderer=function(n,s,r,o){this.render=function(t){var i=$(n);if(r&&r.contents&&i.html(r.contents),r&&r.className&&i.addClass(r.className),r&&r.data&&$.each(r.data,function(t,e){i.attr("data-"+t,e)}),r&&r.click&&i.on("click",r.click),s){var e=i.find(".note-children-container");s.forEach(function(t){t.render(e.length?e:i)})}return o&&o(i,r),r&&r.callback&&r.callback(i),t&&t.append(i),i}},renderer={create:function(i,n){return function(){var t=$.isArray(arguments[0])?arguments[0]:[],e="object"==typeof arguments[1]?arguments[1]:arguments[0];return e&&e.children&&(t=e.children),new Renderer(i,t,e,n)}}},editor=renderer.create('<div class="note-editor note-frame panel panel-default"/>'),toolbar=renderer.create('<div class="note-toolbar panel-heading"/>'),editingArea=renderer.create('<div class="note-editing-area"/>'),codable=renderer.create('<textarea class="note-codable"/>'),editable=renderer.create('<div class="note-editable panel-body" contentEditable="true"/>'),statusbar=renderer.create(['<div class="note-statusbar">','  <div class="note-resizebar">','    <div class="note-icon-bar"/>','    <div class="note-icon-bar"/>','    <div class="note-icon-bar"/>',"  </div>","</div>"].join("")),airEditor=renderer.create('<div class="note-editor"/>'),airEditable=renderer.create('<div class="note-editable" contentEditable="true"/>'),buttonGroup=renderer.create('<div class="note-btn-group btn-group">'),button=renderer.create('<button type="button" class="note-btn btn btn-default btn-sm" tabindex="-1">',function(t,e){e&&e.tooltip&&t.attr({title:e.tooltip}).tooltip({container:"body",trigger:"hover",placement:"bottom"})}),dropdown=renderer.create('<div class="dropdown-menu">',function(t,n){var e=$.isArray(n.items)?n.items.map(function(t){var e="string"==typeof t?t:t.value||"",i=n.template?n.template(t):t;return'<li><a href="#" data-value="'+e+'">'+i+"</a></li>"}).join(""):n.items;t.html(e)}),dropdownCheck=renderer.create('<div class="dropdown-menu note-check">',function(t,n){var e=$.isArray(n.items)?n.items.map(function(t){var e="string"==typeof t?t:t.value||"",i=n.template?n.template(t):t;return'<li><a href="#" data-value="'+e+'">'+icon(n.checkClassName)+" "+i+"</a></li>"}).join(""):n.items;t.html(e)}),palette=renderer.create('<div class="note-color-palette"/>',function(t,e){for(var i=[],n=0,s=e.colors.length;s>n;n++){for(var r=e.eventName,o=e.colors[n],a=[],l=0,c=o.length;c>l;l++){var h=o[l];a.push(['<button type="button" class="note-color-btn"','style="background-color:',h,'" ','data-event="',r,'" ','data-value="',h,'" ','title="',h,'" ','data-toggle="button" tabindex="-1"></button>'].join(""))}i.push('<div class="note-color-row">'+a.join("")+"</div>")}t.html(i.join("")),t.find(".note-color-btn").tooltip({container:"body",trigger:"hover",placement:"bottom"})}),dialog=renderer.create('<div class="modal" aria-hidden="false" tabindex="-1"/>',function(t,e){e.fade&&t.addClass("fade"),t.html(['<div class="modal-dialog">','  <div class="modal-content">',e.title?'    <div class="modal-header">      <button type="button" class="close" data-dismiss="modal" aria-label="Close"><span aria-hidden="true">&times;</span></button>      <h4 class="modal-title">'+e.title+"</h4>    </div>":"",'    <div class="modal-body">'+e.body+"</div>",e.footer?'    <div class="modal-footer">'+e.footer+"</div>":"","  </div>","</div>"].join(""))}),popover=renderer.create(['<div class="note-popover popover in">','  <div class="arrow"/>','  <div class="popover-content note-children-container"/>',"</div>"].join(""),function(t,e){var i="undefined"!=typeof e.direction?e.direction:"bottom";t.addClass(i),e.hideArrow&&t.find(".arrow").hide()}),icon=function(t,e){return e=e||"i","<"+e+' class="'+t+'"/>'},ui={editor:editor,toolbar:toolbar,editingArea:editingArea,codable:codable,editable:editable,statusbar:statusbar,airEditor:airEditor,airEditable:airEditable,buttonGroup:buttonGroup,button:button,dropdown:dropdown,dropdownCheck:dropdownCheck,palette:palette,dialog:dialog,popover:popover,icon:icon,toggleBtn:function(t,e){t.toggleClass("disabled",!e),t.attr("disabled",!e)},toggleBtnActive:function(t,e){t.toggleClass("active",e)},onDialogShown:function(t,e){t.one("shown.bs.modal",e)},onDialogHidden:function(t,e){t.one("hidden.bs.modal",e)},showDialog:function(t){t.modal("show")},hideDialog:function(t){t.modal("hide")},createLayout:function(t,e){var i=(e.airMode?ui.airEditor([ui.editingArea([ui.airEditable()])]):ui.editor([ui.toolbar(),ui.editingArea([ui.codable(),ui.editable()]),ui.statusbar()])).render();return i.insertAfter(t),{note:t,editor:i,toolbar:i.find(".note-toolbar"),editingArea:i.find(".note-editing-area"),editable:i.find(".note-editable"),codable:i.find(".note-codable"),statusbar:i.find(".note-statusbar")}},removeLayout:function(t,e){t.html(e.editable.html()),e.editor.remove(),t.show()}};$.summernote=$.summernote||{lang:{}},$.extend($.summernote.lang,{"en-US":{font:{bold:"Bold",italic:"Italic",underline:"Underline",clear:"Remove Font Style",height:"Line Height",name:"Font Family",strikethrough:"Strikethrough",subscript:"Subscript",superscript:"Superscript",size:"Font Size"},image:{image:"Picture",insert:"Insert Image",resizeFull:"Resize Full",resizeHalf:"Resize Half",resizeQuarter:"Resize Quarter",floatLeft:"Float Left",floatRight:"Float Right",floatNone:"Float None",shapeRounded:"Shape: Rounded",shapeCircle:"Shape: Circle",shapeThumbnail:"Shape: Thumbnail",shapeNone:"Shape: None",dragImageHere:"Drag image or text here",dropImage:"Drop image or Text",selectFromFiles:"Select from files",maximumFileSize:"Maximum file size",maximumFileSizeError:"Maximum file size exceeded.",url:"Image URL",remove:"Remove Image"},video:{video:"Video",videoLink:"Video Link",insert:"Insert Video",url:"Video URL?",providers:"(YouTube, Vimeo, Vine, Instagram, DailyMotion or Youku)"},link:{link:"Link",insert:"Insert Link",unlink:"Unlink",edit:"Edit",textToDisplay:"Text to display",url:"To what URL should this link go?",openInNewWindow:"Open in new window"},table:{table:"Table"},hr:{insert:"Insert Horizontal Rule"},style:{style:"Style",normal:"Normal",blockquote:"Quote",pre:"Code",h1:"Header 1",h2:"Header 2",h3:"Header 3",h4:"Header 4",h5:"Header 5",h6:"Header 6"},lists:{unordered:"Unordered list",ordered:"Ordered list"},options:{help:"Help",fullscreen:"Full Screen",codeview:"Code View"},paragraph:{paragraph:"Paragraph",outdent:"Outdent",indent:"Indent",left:"Align left",center:"Align center",right:"Align right",justify:"Justify full"},color:{recent:"Recent Color",more:"More Color",background:"Background Color",foreground:"Foreground Color",transparent:"Transparent",setTransparent:"Set transparent",reset:"Reset",resetToDefault:"Reset to default"},shortcut:{shortcuts:"Keyboard shortcuts",close:"Close",textFormatting:"Text formatting",action:"Action",paragraphFormatting:"Paragraph formatting",documentStyle:"Document Style",extraKeys:"Extra keys"},help:{insertParagraph:"Insert Paragraph",undo:"Undoes the last command",redo:"Redoes the last command",tab:"Tab",untab:"Untab",bold:"Set a bold style",italic:"Set a italic style",underline:"Set a underline style",strikethrough:"Set a strikethrough style",removeFormat:"Clean a style",justifyLeft:"Set left align",justifyCenter:"Set center align",justifyRight:"Set right align",justifyFull:"Set full align",insertUnorderedList:"Toggle unordered list",insertOrderedList:"Toggle ordered list",outdent:"Outdent on current paragraph",indent:"Indent on current paragraph",formatPara:"Change current block's format as a paragraph(P tag)",formatH1:"Change current block's format as H1",formatH2:"Change current block's format as H2",formatH3:"Change current block's format as H3",formatH4:"Change current block's format as H4",formatH5:"Change current block's format as H5",formatH6:"Change current block's format as H6",insertHorizontalRule:"Insert horizontal rule","linkDialog.show":"Show Link Dialog"},history:{undo:"Undo",redo:"Redo"},specialChar:{specialChar:"SPECIAL CHARACTERS",select:"Select Special characters"}}});var key=function(){var e={BACKSPACE:8,TAB:9,ENTER:13,SPACE:32,LEFT:37,UP:38,RIGHT:39,DOWN:40,NUM0:48,NUM1:49,NUM2:50,NUM3:51,NUM4:52,NUM5:53,NUM6:54,NUM7:55,NUM8:56,B:66,E:69,I:73,J:74,K:75,L:76,R:82,S:83,U:85,V:86,Y:89,Z:90,SLASH:191,LEFTBRACKET:219,BACKSLASH:220,RIGHTBRACKET:221};return{isEdit:function(t){return list.contains([e.BACKSPACE,e.TAB,e.ENTER,e.SPACE],t)},isMove:function(t){return list.contains([e.LEFT,e.UP,e.RIGHT,e.DOWN],t)},nameFromCode:func.invertObject(e),code:e}}(),range=function(){var u=function(t,e){var i,n,s=t.parentElement(),r=document.body.createTextRange(),o=list.from(s.childNodes);for(i=0;i<o.length;i++)if(!dom.isText(o[i])){if(r.moveToElementText(o[i]),r.compareEndPoints("StartToStart",t)>=0)break;n=o[i]}if(0!==i&&dom.isText(o[i-1])){var a=document.body.createTextRange(),l=null;a.moveToElementText(n||s),a.collapse(!n),l=n?n.nextSibling:s.firstChild;var c=t.duplicate();c.setEndPoint("StartToStart",a);for(var h=c.text.replace(/[\r\n]/g,"").length;h>l.nodeValue.length&&l.nextSibling;)h-=l.nodeValue.length,l=l.nextSibling;l.nodeValue;e&&l.nextSibling&&dom.isText(l.nextSibling)&&h===l.nodeValue.length&&(h-=l.nodeValue.length,l=l.nextSibling),s=l,i=h}return{cont:s,offset:i}},n=function(t){var o=function(t,e){var i,n;if(dom.isText(t)){var s=dom.listPrev(t,func.not(dom.isText)),r=list.last(s).previousSibling;i=r||t.parentNode,e+=list.sum(list.tail(s),dom.nodeLength),n=!r}else{if(i=t.childNodes[e]||t,dom.isText(i))return o(i,0);e=0,n=!1}return{node:i,collapseToStart:n,offset:e}},e=document.body.createTextRange(),i=o(t.node,t.offset);return e.moveToElementText(i.node),e.collapse(i.collapseToStart),e.moveStart("character",i.offset),e},d=function(r,s,o,a){this.sc=r,this.so=s,this.ec=o,this.eo=a;var i=function(){if(agent.isW3CRangeSupport){var t=document.createRange();return t.setStart(r,s),t.setEnd(o,a),t}var e=n({node:r,offset:s});return e.setEndPoint("EndToEnd",n({node:o,offset:a})),e};this.getPoints=function(){return{sc:r,so:s,ec:o,eo:a}},this.getStartPoint=function(){return{node:r,offset:s}},this.getEndPoint=function(){return{node:o,offset:a}},this.select=function(){var t=i();if(agent.isW3CRangeSupport){var e=document.getSelection();e.rangeCount>0&&e.removeAllRanges(),e.addRange(t)}else t.select();return this},this.scrollIntoView=function(t){var e=$(t).height();return t.scrollTop+e<this.sc.offsetTop&&(t.scrollTop+=Math.abs(t.scrollTop+e-this.sc.offsetTop)),this},this.normalize=function(){var t=function(t,e){if(dom.isVisiblePoint(t)&&!dom.isEdgePoint(t)||dom.isVisiblePoint(t)&&dom.isRightEdgePoint(t)&&!e||dom.isVisiblePoint(t)&&dom.isLeftEdgePoint(t)&&e||dom.isVisiblePoint(t)&&dom.isBlock(t.node)&&dom.isEmpty(t.node))return t;var i=dom.ancestor(t.node,dom.isBlock);if((dom.isLeftEdgePointOf(t,i)||dom.isVoid(dom.prevPoint(t).node))&&!e||(dom.isRightEdgePointOf(t,i)||dom.isVoid(dom.nextPoint(t).node))&&e){if(dom.isVisiblePoint(t))return t;e=!e}var n=e?dom.nextPointUntil(dom.nextPoint(t),dom.isVisiblePoint):dom.prevPointUntil(dom.prevPoint(t),dom.isVisiblePoint);return n||t},e=t(this.getEndPoint(),!1),i=this.isCollapsed()?e:t(this.getStartPoint(),!0);return new d(i.node,i.offset,e.node,e.offset)},this.nodes=function(i,t){i=i||func.ok;var n=t&&t.includeAncestor,s=t&&t.fullyContains,e=this.getStartPoint(),r=this.getEndPoint(),o=[],a=[];return dom.walkPoint(e,r,function(t){if(!dom.isEditable(t.node)){var e;s?(dom.isLeftEdgePoint(t)&&a.push(t.node),dom.isRightEdgePoint(t)&&list.contains(a,t.node)&&(e=t.node)):e=n?dom.ancestor(t.node,i):t.node,e&&i(e)&&o.push(e)}},!0),list.unique(o)},this.commonAncestor=function(){return dom.commonAncestor(r,o)},this.expand=function(t){var e=dom.ancestor(r,t),i=dom.ancestor(o,t);if(!e&&!i)return new d(r,s,o,a);var n=this.getPoints();return e&&(n.sc=e,n.so=0),i&&(n.ec=i,n.eo=dom.nodeLength(i)),new d(n.sc,n.so,n.ec,n.eo)},this.collapse=function(t){return t?new d(r,s,r,s):new d(o,a,o,a)},this.splitText=function(){var t=r===o,e=this.getPoints();return dom.isText(o)&&!dom.isEdgePoint(this.getEndPoint())&&o.splitText(a),dom.isText(r)&&!dom.isEdgePoint(this.getStartPoint())&&(e.sc=r.splitText(s),e.so=0,t&&(e.ec=e.sc,e.eo=a-s)),new d(e.sc,e.so,e.ec,e.eo)},this.deleteContents=function(){if(this.isCollapsed())return this;var t=this.splitText(),e=t.nodes(null,{fullyContains:!0}),n=dom.prevPointUntil(t.getStartPoint(),function(t){return!list.contains(e,t.node)}),s=[];return $.each(e,function(t,e){var i=e.parentNode;n.node!==i&&1===dom.nodeLength(i)&&s.push(i),dom.remove(e,!1)}),$.each(s,function(t,e){dom.remove(e,!1)}),new d(n.node,n.offset,n.node,n.offset).normalize()};var t=function(e){return function(){var t=dom.ancestor(r,e);return!!t&&t===dom.ancestor(o,e)}};this.isOnEditable=t(dom.isEditable),this.isOnList=t(dom.isList),this.isOnAnchor=t(dom.isAnchor),this.isOnCell=t(dom.isCell),this.isOnData=t(dom.isData),this.isLeftEdgeOf=function(t){if(!dom.isLeftEdgePoint(this.getStartPoint()))return!1;var e=dom.ancestor(this.sc,t);return e&&dom.isLeftEdgeOf(this.sc,e)},this.isCollapsed=function(){return r===o&&s===a},this.wrapBodyInlineWithPara=function(){if(dom.isBodyContainer(r)&&dom.isEmpty(r))return r.innerHTML=dom.emptyPara,new d(r.firstChild,0,r.firstChild,0);var t=this.normalize();if(dom.isParaInline(r)||dom.isPara(r))return t;var e;if(dom.isInline(t.sc)){var i=dom.listAncestor(t.sc,func.not(dom.isInline));e=list.last(i),dom.isInline(e)||(e=i[i.length-2]||t.sc.childNodes[t.so])}else e=t.sc.childNodes[t.so>0?t.so-1:0];var n=dom.listPrev(e,dom.isParaInline).reverse();if(n=n.concat(dom.listNext(e.nextSibling,dom.isParaInline)),n.length){var s=dom.wrap(list.head(n),"p");dom.appendChildNodes(s,list.tail(n))}return this.normalize()},this.insertNode=function(t){var e=this.wrapBodyInlineWithPara().deleteContents(),i=dom.splitPoint(e.getStartPoint(),dom.isInline(t));return i.rightNode?i.rightNode.parentNode.insertBefore(t,i.rightNode):i.container.appendChild(t),t},this.pasteHTML=function(t){var e=$("<div></div>").html(t)[0],i=list.from(e.childNodes),n=this.wrapBodyInlineWithPara().deleteContents();return i.reverse().map(function(t){return n.insertNode(t)}).reverse()},this.toString=function(){var t=i();return agent.isW3CRangeSupport?t.toString():t.text},this.getWordRange=function(t){var e=this.getEndPoint();if(!dom.isCharPoint(e))return this;var i=dom.prevPointUntil(e,function(t){return!dom.isCharPoint(t)});return t&&(e=dom.nextPointUntil(e,function(t){return!dom.isCharPoint(t)})),new d(i.node,i.offset,e.node,e.offset)},this.bookmark=function(t){return{s:{path:dom.makeOffsetPath(t,r),offset:s},e:{path:dom.makeOffsetPath(t,o),offset:a}}},this.paraBookmark=function(t){return{s:{path:list.tail(dom.makeOffsetPath(list.head(t),r)),offset:s},e:{path:list.tail(dom.makeOffsetPath(list.last(t),o)),offset:a}}},this.getClientRects=function(){var t=i();return t.getClientRects()}};return{create:function(t,e,i,n){if(4===arguments.length)return new d(t,e,i,n);if(2===arguments.length)return i=t,n=e,new d(t,e,i,n);var s=this.createFromSelection();return s||1!==arguments.length?s:(s=this.createFromNode(arguments[0]),s.collapse(dom.emptyPara===arguments[0].innerHTML))},createFromSelection:function(){var t,e,i,n;if(agent.isW3CRangeSupport){var s=document.getSelection();if(!s||0===s.rangeCount)return null;if(dom.isBody(s.anchorNode))return null;var r=s.getRangeAt(0);t=r.startContainer,e=r.startOffset,i=r.endContainer,n=r.endOffset}else{var o=document.selection.createRange(),a=o.duplicate();a.collapse(!1);var l=o;l.collapse(!0);var c=u(l,!0),h=u(a,!1);dom.isText(c.node)&&dom.isLeftEdgePoint(c)&&dom.isTextNode(h.node)&&dom.isRightEdgePoint(h)&&h.node.nextSibling===c.node&&(c=h),t=c.cont,e=c.offset,i=h.cont,n=h.offset}return new d(t,e,i,n)},createFromNode:function(t){var e=t,i=0,n=t,s=dom.nodeLength(n);return dom.isVoid(e)&&(i=dom.listPrev(e).length-1,e=e.parentNode),dom.isBR(n)?(s=dom.listPrev(n).length-1,n=n.parentNode):dom.isVoid(n)&&(s=dom.listPrev(n).length,n=n.parentNode),this.create(e,i,n,s)},createFromNodeBefore:function(t){return this.createFromNode(t).collapse(!0)},createFromNodeAfter:function(t){return this.createFromNode(t).collapse()},createFromBookmark:function(t,e){var i=dom.fromOffsetPath(t,e.s.path),n=e.s.offset,s=dom.fromOffsetPath(t,e.e.path),r=e.e.offset;return new d(i,n,s,r)},createFromParaBookmark:function(t,e){var i=t.s.offset,n=t.e.offset,s=dom.fromOffsetPath(list.head(e),t.s.path),r=dom.fromOffsetPath(list.last(e),t.e.path);return new d(s,i,r,n)}}}(),async=function(){var t=function(t){return $.Deferred(function(i){$.extend(new FileReader,{onload:function(t){var e=t.target.result;i.resolve(e)},onerror:function(){i.reject(this)}}).readAsDataURL(t)}).promise()},e=function(i){return $.Deferred(function(t){var e=$("<img>");e.one("load",function(){e.off("error abort"),t.resolve(e)}).one("error abort",function(){e.off("load").detach(),t.reject(e)}).css({display:"none"}).appendTo(document.body).attr("src",i)}).promise()};return{readFileAsDataURL:t,createImage:e}}(),History=function(i){var t=[],e=-1,n=i[0],s=function(){var t=range.create(n),e={s:{path:[],offset:0},e:{path:[],offset:0}};return{contents:i.html(),bookmark:t?t.bookmark(n):e}},r=function(t){null!==t.contents&&i.html(t.contents),null!==t.bookmark&&range.createFromBookmark(n,t.bookmark).select()};this.rewind=function(){i.html()!==t[e].contents&&this.recordUndo(),e=0,r(t[e])},this.reset=function(){t=[],e=-1,i.html(""),this.recordUndo()},this.undo=function(){i.html()!==t[e].contents&&this.recordUndo(),e>0&&(e--,r(t[e]))},this.redo=function(){t.length-1>e&&(e++,r(t[e]))},this.recordUndo=function(){e++,t.length>e&&(t=t.slice(0,e)),t.push(s())}},Style=function(){var n=function(i,t){if(agent.jqueryVersion<1.9){var n={};return $.each(t,function(t,e){n[e]=i.css(e)}),n}return i.css.call(i,t)};this.fromNode=function(t){var e=["font-family","font-size","text-align","list-style-type","line-height"],i=n(t,e)||{};return i["font-size"]=parseInt(i["font-size"],10),i},this.stylePara=function(t,i){$.each(t.nodes(dom.isPara,{includeAncestor:!0}),function(t,e){$(e).css(i)})},this.styleNodes=function(t,e){t=t.splitText();var i=e&&e.nodeName||"SPAN",n=!(!e||!e.expandClosestSibling),s=!(!e||!e.onlyPartialContains);if(t.isCollapsed())return[t.insertNode(dom.create(i))];var r=dom.makePredByNodeName(i),o=t.nodes(dom.isText,{fullyContains:!0}).map(function(t){return dom.singleChildAncestor(t,r)||dom.wrap(t,i)});if(n){if(s){var a=t.nodes();r=func.and(r,function(t){return list.contains(a,t)})}return o.map(function(t){var e=dom.withClosestSiblings(t,r),i=list.head(e),n=list.tail(e);return $.each(n,function(t,e){dom.appendChildNodes(i,e.childNodes),dom.remove(e)}),list.head(e)})}return o},this.current=function(t){var e=$(dom.isElement(t.sc)?t.sc:t.sc.parentNode),i=this.fromNode(e);try{i=$.extend(i,{"font-bold":document.queryCommandState("bold")?"bold":"normal","font-italic":document.queryCommandState("italic")?"italic":"normal","font-underline":document.queryCommandState("underline")?"underline":"normal","font-subscript":document.queryCommandState("subscript")?"subscript":"normal","font-superscript":document.queryCommandState("superscript")?"superscript":"normal","font-strikethrough":document.queryCommandState("strikethrough")?"strikethrough":"normal"})}catch(t){}if(t.isOnList()){var n=["circle","disc","disc-leading-zero","square"],s=$.inArray(i["list-style-type"],n)>-1;i["list-style"]=s?"unordered":"ordered"}else i["list-style"]="none";var r=dom.ancestor(t.sc,dom.isPara);if(r&&r.style["line-height"])i["line-height"]=r.style.lineHeight;else{var o=parseInt(i["line-height"],10)/parseInt(i["font-size"],10);i["line-height"]=o.toFixed(1)}return i.anchor=t.isOnAnchor()&&dom.ancestor(t.sc,dom.isAnchor),i.ancestors=dom.listAncestor(t.sc,dom.isEditable),i.range=t,i}},Bullet=function(){var l=this;this.insertOrderedList=function(t){this.toggleList("OL",t)},this.insertUnorderedList=function(t){this.toggleList("UL",t)},this.indent=function(t){var n=this,e=range.create(t).wrapBodyInlineWithPara(),i=e.nodes(dom.isPara,{includeAncestor:!0}),s=list.clusterBy(i,func.peq2("parentNode"));$.each(s,function(t,e){var i=list.head(e);dom.isLi(i)?n.wrapList(e,i.parentNode.nodeName):$.each(e,function(t,e){$(e).css("marginLeft",function(t,e){return(parseInt(e,10)||0)+25})})}),e.select()},this.outdent=function(t){var n=this,e=range.create(t).wrapBodyInlineWithPara(),i=e.nodes(dom.isPara,{includeAncestor:!0}),s=list.clusterBy(i,func.peq2("parentNode"));$.each(s,function(t,e){var i=list.head(e);dom.isLi(i)?n.releaseList([e]):$.each(e,function(t,e){$(e).css("marginLeft",function(t,e){return e=parseInt(e,10)||0,e>25?e-25:""})})}),e.select()},this.toggleList=function(i,t){var e=range.create(t).wrapBodyInlineWithPara(),n=e.nodes(dom.isPara,{includeAncestor:!0}),s=e.paraBookmark(n),r=list.clusterBy(n,func.peq2("parentNode"));if(list.find(n,dom.isPurePara)){var o=[];$.each(r,function(t,e){o=o.concat(l.wrapList(e,i))}),n=o}else{var a=e.nodes(dom.isList,{includeAncestor:!0}).filter(function(t){return!$.nodeName(t,i)});a.length?$.each(a,function(t,e){dom.replace(e,i)}):n=this.releaseList(r,!0)}range.createFromParaBookmark(s,n).select()},this.wrapList=function(t,e){var i=list.head(t),n=list.last(t),s=dom.isList(i.previousSibling)&&i.previousSibling,r=dom.isList(n.nextSibling)&&n.nextSibling,o=s||dom.insertAfter(dom.create(e||"UL"),n);return t=t.map(function(t){return dom.isPurePara(t)?dom.replace(t,"LI"):t}),dom.appendChildNodes(o,t),r&&(dom.appendChildNodes(o,list.from(r.childNodes)),dom.remove(r)),t},this.releaseList=function(t,l){var c=[];return $.each(t,function(t,e){var i=list.head(e),n=list.last(e),s=l?dom.lastAncestor(i,dom.isList):i.parentNode,r=s.childNodes.length>1?dom.splitTree(s,{node:n.parentNode,offset:dom.position(n)+1},{isSkipPaddingBlankHTML:!0}):null,o=dom.splitTree(s,{node:i.parentNode,offset:dom.position(i)},{isSkipPaddingBlankHTML:!0});e=l?dom.listDescendant(o,dom.isLi):list.from(o.childNodes).filter(dom.isLi),(l||!dom.isList(s.parentNode))&&(e=e.map(function(t){return dom.replace(t,"P")})),$.each(list.from(e).reverse(),function(t,e){dom.insertAfter(e,s)});var a=list.compact([s,o,r]);$.each(a,function(t,e){var i=[e].concat(dom.listDescendant(e,dom.isList));$.each(i.reverse(),function(t,e){dom.nodeLength(e)||dom.remove(e,!0)})}),c=c.concat(e)}),c}},Typing=function(){var o=new Bullet;this.insertTab=function(t,e){var i=dom.createText(new Array(e+1).join(dom.NBSP_CHAR));t=t.deleteContents(),t.insertNode(i,!0),t=range.create(i,e),t.select()},this.insertParagraph=function(t){var e=range.create(t);e=e.deleteContents(),e=e.wrapBodyInlineWithPara();var i,n=dom.ancestor(e.sc,dom.isPara);if(n){if(dom.isEmpty(n)&&dom.isLi(n))return void o.toggleList(n.parentNode.nodeName);if(dom.isEmpty(n)&&dom.isPara(n)&&dom.isBlockquote(n.parentNode))dom.insertAfter(n,n.parentNode),i=n;else{i=dom.splitTree(n,e.getStartPoint());var s=dom.listDescendant(n,dom.isEmptyAnchor);s=s.concat(dom.listDescendant(i,dom.isEmptyAnchor)),$.each(s,function(t,e){dom.remove(e)}),(dom.isHeading(i)||dom.isPre(i))&&dom.isEmpty(i)&&(i=dom.replace(i,"p"))}}else{var r=e.sc.childNodes[e.so];i=$(dom.emptyPara)[0],r?e.sc.insertBefore(i,r):e.sc.appendChild(i)}range.create(i,0).normalize().select().scrollIntoView(t)}},Table=function(){this.tab=function(t,e){var i=dom.ancestor(t.commonAncestor(),dom.isCell),n=dom.ancestor(i,dom.isTable),s=dom.listDescendant(n,dom.isCell),r=list[e?"prev":"next"](s,i);r&&range.create(r,0).select()},this.createTable=function(t,e,i){for(var n,s=[],r=0;t>r;r++)s.push("<td>"+dom.blank+"</td>");n=s.join("");for(var o,a=[],l=0;e>l;l++)a.push("<tr>"+n+"</tr>");o=a.join("");var c=$("<table>"+o+"</table>");return i&&i.tableClassName&&c.addClass(i.tableClassName),c[0]}},KEY_BOGUS="bogus",Editor=function(r){var n=this,e=r.layoutInfo.note,i=r.layoutInfo.editor,s=r.layoutInfo.editable,d=r.options,o=d.langInfo,a=s[0],l=null,f=new Style,c=new Table,h=new Typing,t=new Bullet,u=new History(s);this.initialize=function(){s.on("keydown",function(t){t.keyCode===key.code.ENTER&&r.triggerEvent("enter",t),r.triggerEvent("keydown",t),t.isDefaultPrevented()||(d.shortcuts?n.handleKeyMap(t):n.preventDefaultEditableShortCuts(t))}).on("keyup",function(t){r.triggerEvent("keyup",t)}).on("focus",function(t){r.triggerEvent("focus",t)}).on("blur",function(t){r.triggerEvent("blur",t)}).on("mousedown",function(t){r.triggerEvent("mousedown",t)}).on("mouseup",function(t){r.triggerEvent("mouseup",t)}).on("scroll",function(t){r.triggerEvent("scroll",t)}).on("paste",function(t){r.triggerEvent("paste",t)}),s.html(dom.html(e)||dom.emptyPara);var t=agent.isMSIE?"DOMCharacterDataModified DOMSubtreeModified DOMNodeInserted":"input";s.on(t,func.debounce(function(){r.triggerEvent("change",s.html())},250)),i.on("focusin",function(t){r.triggerEvent("focusin",t)}).on("focusout",function(t){r.triggerEvent("focusout",t)}),d.airMode||(d.width&&i.outerWidth(d.width),d.height&&s.outerHeight(d.height),d.maxHeight&&s.css("max-height",d.maxHeight),d.minHeight&&s.css("min-height",d.minHeight)),u.recordUndo()},this.destroy=function(){s.off()},this.handleKeyMap=function(t){var e=d.keyMap[agent.isMac?"mac":"pc"],i=[];t.metaKey&&i.push("CMD"),t.ctrlKey&&!t.altKey&&i.push("CTRL"),t.shiftKey&&i.push("SHIFT");var n=key.nameFromCode[t.keyCode];n&&i.push(n);var s=e[i.join("+")];s?(t.preventDefault(),r.invoke(s)):key.isEdit(t.keyCode)&&this.afterCommand()},this.preventDefaultEditableShortCuts=function(t){(t.ctrlKey||t.metaKey)&&list.contains([66,73,85],t.keyCode)&&t.preventDefault()},this.createRange=function(){return this.focus(),range.create(a)},this.saveRange=function(t){l=this.createRange(),t&&l.collapse().select()},this.restoreRange=function(){l&&(l.select(),this.focus())},this.saveTarget=function(t){s.data("target",t)},this.clearTarget=function(){s.removeData("target")},this.restoreTarget=function(){return s.data("target")},this.currentStyle=function(){var t=range.create();return t&&(t=t.normalize()),t?f.current(t):f.fromNode(s)},this.styleFromNode=function(t){return f.fromNode(t)},this.undo=function(){r.triggerEvent("before.command",s.html()),u.undo(),r.triggerEvent("change",s.html())},r.memo("help.undo",o.help.undo),this.redo=function(){r.triggerEvent("before.command",s.html()),u.redo(),r.triggerEvent("change",s.html())},r.memo("help.redo",o.help.redo);for(var p=this.beforeCommand=function(){r.triggerEvent("before.command",s.html()),n.focus()},m=this.afterCommand=function(t){u.recordUndo(),t||r.triggerEvent("change",s.html())},g=["bold","italic","underline","strikethrough","superscript","subscript","justifyLeft","justifyCenter","justifyRight","justifyFull","formatBlock","removeFormat","backColor","foreColor","fontName"],v=0,y=g.length;y>v;v++)this[g[v]]=function(e){return function(t){p(),document.execCommand(e,!1,t),m(!0)}}(g[v]),r.memo("help."+g[v],o.help[g[v]]);this.tab=function(){var t=this.createRange();t.isCollapsed()&&t.isOnCell()?c.tab(t):(p(),h.insertTab(t,d.tabSize),m())},r.memo("help.tab",o.help.tab),this.untab=function(){var t=this.createRange();t.isCollapsed()&&t.isOnCell()&&c.tab(t,!0)},r.memo("help.untab",o.help.untab),this.wrapCommand=function(t){return function(){p(),t.apply(n,arguments),m()}},this.insertParagraph=this.wrapCommand(function(){h.insertParagraph(a)}),r.memo("help.insertParagraph",o.help.insertParagraph),this.insertOrderedList=this.wrapCommand(function(){t.insertOrderedList(a)}),r.memo("help.insertOrderedList",o.help.insertOrderedList),this.insertUnorderedList=this.wrapCommand(function(){t.insertUnorderedList(a)}),r.memo("help.insertUnorderedList",o.help.insertUnorderedList),this.indent=this.wrapCommand(function(){t.indent(a)}),r.memo("help.indent",o.help.indent),this.outdent=this.wrapCommand(function(){t.outdent(a)}),r.memo("help.outdent",o.help.outdent),this.insertImage=function(t,e){return async.createImage(t,e).then(function(t){p(),"function"==typeof e?e(t):("string"==typeof e&&t.attr("data-filename",e),t.css("width",Math.min(s.width(),t.width()))),t.show(),range.create(a).insertNode(t[0]),range.createFromNodeAfter(t[0]).select(),m()}).fail(function(t){r.triggerEvent("image.upload.error",t)})},this.insertImages=function(t){$.each(t,function(t,e){var i=e.name;d.maximumImageFileSize&&d.maximumImageFileSize<e.size?r.triggerEvent("image.upload.error",o.image.maximumFileSizeError):async.readFileAsDataURL(e).then(function(t){return n.insertImage(t,i)}).fail(function(){r.triggerEvent("image.upload.error")})})},this.insertImagesOrCallback=function(t){var e=d.callbacks;e.onImageUpload?r.triggerEvent("image.upload",t):this.insertImages(t)},this.insertNode=this.wrapCommand(function(t){var e=this.createRange();e.insertNode(t),range.createFromNodeAfter(t).select()}),this.insertText=this.wrapCommand(function(t){var e=this.createRange(),i=e.insertNode(dom.createText(t));range.create(i,dom.nodeLength(i)).select()}),this.getSelectedText=function(){var t=this.createRange();return t.isOnAnchor()&&(t=range.createFromNode(dom.ancestor(t.sc,dom.isAnchor))),t.toString()},this.pasteHTML=this.wrapCommand(function(t){var e=this.createRange().pasteHTML(t);range.createFromNodeAfter(list.last(e)).select()}),this.formatBlock=this.wrapCommand(function(t){t=agent.isMSIE?"<"+t+">":t,document.execCommand("FormatBlock",!1,t)}),this.formatPara=function(){this.formatBlock("P")},r.memo("help.formatPara",o.help.formatPara);for(var v=1;6>=v;v++)this["formatH"+v]=function(t){return function(){this.formatBlock("H"+t)}}(v),r.memo("help.formatH"+v,o.help["formatH"+v]);this.fontSize=function(t){var e=this.createRange();if(e&&e.isCollapsed()){var i=f.styleNodes(e),n=list.head(i);$(i).css({"font-size":t+"px"}),n&&!dom.nodeLength(n)&&(n.innerHTML=dom.ZERO_WIDTH_NBSP_CHAR,range.createFromNodeAfter(n.firstChild).select(),s.data(KEY_BOGUS,n))}else p(),$(f.styleNodes(e)).css({"font-size":t+"px"}),m()},this.insertHorizontalRule=this.wrapCommand(function(){var t=this.createRange().insertNode(dom.create("HR"));t.nextSibling&&range.create(t.nextSibling,0).normalize().select()}),r.memo("help.insertHorizontalRule",o.help.insertHorizontalRule),this.removeBogus=function(){var t=s.data(KEY_BOGUS);if(t){var e=list.find(list.from(t.childNodes),dom.isText),i=e.nodeValue.indexOf(dom.ZERO_WIDTH_NBSP_CHAR);-1!==i&&e.deleteData(i,1),dom.isEmpty(t)&&dom.remove(t),s.removeData(KEY_BOGUS)}},this.lineHeight=this.wrapCommand(function(t){f.stylePara(this.createRange(),{lineHeight:t})}),this.unlink=function(){var t=this.createRange();if(t.isOnAnchor()){var e=dom.ancestor(t.sc,dom.isAnchor);t=range.createFromNode(e),t.select(),p(),document.execCommand("unlink"),m()}},this.createLink=this.wrapCommand(function(t){var i=t.url,e=t.text,n=t.isNewWindow,s=t.range||this.createRange(),r=s.toString()!==e;"string"==typeof i&&(i=i.trim()),d.onCreateLink&&(i=d.onCreateLink(i));var o=[];if(r){s=s.deleteContents();var a=s.insertNode($("<A>"+e+"</A>")[0]);o.push(a)}else o=f.styleNodes(s,{nodeName:"A",expandClosestSibling:!0,onlyPartialContains:!0});$.each(o,function(t,e){i=/^[A-Za-z][A-Za-z0-9+-.]*\:[\/\/]?/.test(i)?i:"http://"+i,$(e).attr("href",i),n?$(e).attr("target","_blank"):$(e).removeAttr("target")});var l=range.createFromNodeBefore(list.head(o)),c=l.getStartPoint(),h=range.createFromNodeAfter(list.last(o)),u=h.getEndPoint();range.create(c.node,c.offset,u.node,u.offset).select()}),this.getLinkInfo=function(){var t=this.createRange().expand(dom.isAnchor),e=$(list.head(t.nodes(dom.isAnchor)));return{range:t,text:t.toString(),isNewWindow:e.length?"_blank"===e.attr("target"):!1,url:e.length?e.attr("href"):""}},this.color=this.wrapCommand(function(t){var e=t.foreColor,i=t.backColor;e&&document.execCommand("foreColor",!1,e),i&&document.execCommand("backColor",!1,i)}),this.insertTable=this.wrapCommand(function(t){var e=t.split("x"),i=this.createRange().deleteContents();i.insertNode(c.createTable(e[0],e[1],d))}),this.floatMe=this.wrapCommand(function(t){var e=$(this.restoreTarget());e.css("float",t)}),this.resize=this.wrapCommand(function(t){var e=$(this.restoreTarget());e.css({width:100*t+"%",height:""})}),this.resizeTo=function(t,e,i){var n;if(i){var s=t.y/t.x,r=e.data("ratio");n={width:r>s?t.x:t.y/r,height:r>s?t.x*r:t.y}}else n={width:t.x,height:t.y};e.css(n)},this.removeMedia=this.wrapCommand(function(){var t=$(this.restoreTarget()).detach();r.triggerEvent("media.delete",t,s)}),this.hasFocus=function(){return s.is(":focus")},this.focus=function(){this.hasFocus()||s.focus()},this.isEmpty=function(){return dom.isEmpty(s[0])||dom.emptyPara===s.html()},this.empty=function(){r.invoke("code",dom.emptyPara)}},Clipboard=function(a){var i=this,t=a.layoutInfo.editable;this.events={"summernote.keydown":function(t,e){i.needKeydownHook()&&(e.ctrlKey||e.metaKey)&&e.keyCode===key.code.V&&(a.invoke("editor.saveRange"),i.$paste.focus(),setTimeout(function(){i.pasteByHook()},0))}},this.needKeydownHook=function(){return agent.isMSIE&&agent.browserVersion>10||agent.isFF},this.initialize=function(){this.needKeydownHook()?(this.$paste=$('<div tabindex="-1" />').attr("contenteditable",!0).css({position:"absolute",left:-1e5,opacity:0}),t.before(this.$paste),this.$paste.on("paste",function(t){a.triggerEvent("paste",t)})):t.on("paste",this.pasteByEvent)},this.destroy=function(){this.needKeydownHook()&&(this.$paste.remove(),this.$paste=null)},this.pasteByHook=function(){var t=this.$paste[0].firstChild;if(dom.isImg(t)){for(var e=t.src,i=atob(e.split(",")[1]),n=new Uint8Array(i.length),s=0;s<i.length;s++)n[s]=i.charCodeAt(s);var r=new Blob([n],{type:"image/png"});r.name="clipboard.png",a.invoke("editor.restoreRange"),a.invoke("editor.focus"),a.invoke("editor.insertImagesOrCallback",[r])}else{var o=$("<div />").html(this.$paste.html()).html();a.invoke("editor.restoreRange"),a.invoke("editor.focus"),o&&a.invoke("editor.pasteHTML",o)}this.$paste.empty()},this.pasteByEvent=function(t){var e=t.originalEvent.clipboardData;if(e&&e.items&&e.items.length){var i=list.head(e.items);"file"===i.kind&&-1!==i.type.indexOf("image/")&&a.invoke("editor.insertImagesOrCallback",[i.getAsFile()]),a.invoke("editor.afterCommand")}}},Dropzone=function(r){var e=$(document),o=r.layoutInfo.editor,i=r.layoutInfo.editable,t=r.options,a=t.langInfo,l={},c=$(['<div class="note-dropzone">','  <div class="note-dropzone-message"/>',"</div>"].join("")).prependTo(o),n=function(){Object.keys(l).forEach(function(t){e.off(t.substr(2).toLowerCase(),l[t])}),l={}};this.initialize=function(){t.disableDragAndDrop?(l.onDrop=function(t){t.preventDefault()},e.on("drop",l.onDrop)):this.attachDragAndDropEvent()},this.attachDragAndDropEvent=function(){var n=$(),s=c.find(".note-dropzone-message");l.onDragenter=function(t){var e=r.invoke("codeview.isActivated"),i=o.width()>0&&o.height()>0;e||n.length||!i||(o.addClass("dragover"),c.width(o.width()),c.height(o.height()),s.text(a.image.dragImageHere)),n=n.add(t.target)},l.onDragleave=function(t){n=n.not(t.target),n.length||o.removeClass("dragover")},l.onDrop=function(){n=$(),o.removeClass("dragover")},e.on("dragenter",l.onDragenter).on("dragleave",l.onDragleave).on("drop",l.onDrop),c.on("dragenter",function(){c.addClass("hover"),s.text(a.image.dropImage)}).on("dragleave",function(){c.removeClass("hover"),s.text(a.image.dragImageHere)}),c.on("drop",function(t){var n=t.originalEvent.dataTransfer;n&&n.files&&n.files.length?(t.preventDefault(),i.focus(),r.invoke("editor.insertImagesOrCallback",n.files)):$.each(n.types,function(t,e){var i=n.getData(e);e.toLowerCase().indexOf("text")>-1?r.invoke("editor.pasteHTML",i):$(i).each(function(){r.invoke("editor.insertNode",this)})})}).on("dragover",!1)},this.destroy=function(){n()}},CodeMirror;agent.hasCodeMirror&&(agent.isSupportAmd?require(["codemirror"],function(t){CodeMirror=t}):CodeMirror=window.CodeMirror);var Codeview=function(n){var s=n.layoutInfo.editor,r=n.layoutInfo.editable,o=n.layoutInfo.codable,a=n.options;this.sync=function(){var t=this.isActivated();t&&agent.hasCodeMirror&&o.data("cmEditor").save()},this.isActivated=function(){return s.hasClass("codeview")},this.toggle=function(){this.isActivated()?this.deactivate():this.activate(),n.triggerEvent("codeview.toggled")},this.activate=function(){if(o.val(dom.html(r,a.prettifyHtml)),o.height(r.height()),n.invoke("toolbar.updateCodeview",!0),s.addClass("codeview"),o.focus(),agent.hasCodeMirror){var t=CodeMirror.fromTextArea(o[0],a.codemirror);if(a.codemirror.tern){var e=new CodeMirror.TernServer(a.codemirror.tern);t.ternServer=e,t.on("cursorActivity",function(t){e.updateArgHints(t)})}t.setSize(null,r.outerHeight()),o.data("cmEditor",t)}},this.deactivate=function(){if(agent.hasCodeMirror){var t=o.data("cmEditor");o.val(t.getValue()),t.toTextArea()}var e=dom.value(o,a.prettifyHtml)||dom.emptyPara,i=r.html()!==e;r.html(e),r.height(a.height?o.height():"auto"),s.removeClass("codeview"),i&&n.triggerEvent("change",r.html(),r),r.focus(),n.invoke("toolbar.updateCodeview",!1)},this.destroy=function(){this.isActivated()&&this.deactivate()}},EDITABLE_PADDING=24,Statusbar=function(t){var e=$(document),i=t.layoutInfo.statusbar,n=t.layoutInfo.editable,s=t.options;this.initialize=function(){s.airMode||s.disableResizeEditor||i.on("mousedown",function(t){t.preventDefault(),t.stopPropagation();var i=n.offset().top-e.scrollTop();e.on("mousemove",function(t){var e=t.clientY-(i+EDITABLE_PADDING);e=s.minheight>0?Math.max(e,s.minheight):e,e=s.maxHeight>0?Math.min(e,s.maxHeight):e,n.height(e)}).one("mouseup",function(){e.off("mousemove")})})},this.destroy=function(){i.off(),i.remove()}},Fullscreen=function(e){var i=e.layoutInfo.editor,n=e.layoutInfo.toolbar,s=e.layoutInfo.editable,r=e.layoutInfo.codable,o=$(window),a=$("html, body");this.toggle=function(){var t=function(t){s.css("height",t.h),r.css("height",t.h),r.data("cmeditor")&&r.data("cmeditor").setsize(null,t.h)};i.toggleClass("fullscreen"),this.isFullscreen()?(s.data("orgHeight",s.css("height")),o.on("resize",function(){t({h:o.height()-n.outerHeight()})}).trigger("resize"),a.css("overflow","hidden")):(o.off("resize"),t({h:s.data("orgHeight")}),a.css("overflow","visible")),e.invoke("toolbar.updateFullscreen",this.isFullscreen())},this.isFullscreen=function(){return i.hasClass("fullscreen")}},Handle=function(a){var s=this,r=$(document),t=a.layoutInfo.editingArea,e=a.options;this.events={"summernote.mousedown":function(t,e){s.update(e.target)&&e.preventDefault()},"summernote.keyup summernote.scroll summernote.change summernote.dialog.shown":function(){s.update()}},this.initialize=function(){this.$handle=$(['<div class="note-handle">','<div class="note-control-selection">','<div class="note-control-selection-bg"></div>','<div class="note-control-holder note-control-nw"></div>','<div class="note-control-holder note-control-ne"></div>','<div class="note-control-holder note-control-sw"></div>','<div class="',e.disableResizeImage?"note-control-holder":"note-control-sizing",' note-control-se"></div>',e.disableResizeImage?"":'<div class="note-control-selection-info"></div>',"</div>","</div>"].join("")).prependTo(t),this.$handle.on("mousedown",function(t){if(dom.isControlSizing(t.target)){t.preventDefault(),t.stopPropagation();var e=s.$handle.find(".note-control-selection").data("target"),i=e.offset(),n=r.scrollTop();r.on("mousemove",function(t){a.invoke("editor.resizeTo",{x:t.clientX-i.left,y:t.clientY-(i.top-n)},e,!t.shiftKey),s.update(e[0])}).one("mouseup",function(t){t.preventDefault(),r.off("mousemove"),a.invoke("editor.afterCommand")}),e.data("ratio")||e.data("ratio",e.height()/e.width())}})},this.destroy=function(){this.$handle.remove()},this.update=function(t){var e=dom.isImg(t),i=this.$handle.find(".note-control-selection");if(a.invoke("imagePopover.update",t),e){var n=$(t),s=n.position(),r={w:n.outerWidth(!0),h:n.outerHeight(!0)};i.css({display:"block",left:s.left,top:s.top,width:r.w,height:r.h}).data("target",n);var o=r.w+"x"+r.h;i.find(".note-control-selection-info").text(o),a.invoke("editor.saveTarget",t)}else this.hide();return e},this.hide=function(){a.invoke("editor.clearTarget"),this.$handle.children().hide()}},AutoLink=function(s){var i=this,r="http://",o=/^([A-Za-z][A-Za-z0-9+-.]*\:[\/\/]?|mailto:[A-Z0-9._%+-]+@)?(www\.)?(.+)$/i;this.events={"summernote.keyup":function(t,e){e.isDefaultPrevented()||i.handleKeyup(e)},"summernote.keydown":function(t,e){i.handleKeydown(e)}},this.initialize=function(){this.lastWordRange=null},this.destroy=function(){this.lastWordRange=null},this.replace=function(){if(this.lastWordRange){var t=this.lastWordRange.toString(),e=t.match(o);if(e&&(e[1]||e[2])){var i=e[1]?t:r+t,n=$("<a />").html(t).attr("href",i)[0];this.lastWordRange.insertNode(n),this.lastWordRange=null,s.invoke("editor.focus")}}},this.handleKeydown=function(t){if(list.contains([key.code.ENTER,key.code.SPACE],t.keyCode)){var e=s.invoke("editor.createRange").getWordRange();this.lastWordRange=e}},this.handleKeyup=function(t){list.contains([key.code.ENTER,key.code.SPACE],t.keyCode)&&this.replace()}},AutoSync=function(t){var e=t.layoutInfo.note;this.events={"summernote.change":function(){e.val(t.invoke("code"))}},this.shouldInitialize=function(){return dom.isTextarea(e[0])}},Placeholder=function(e){var t=this,i=e.layoutInfo.editingArea,n=e.options;this.events={"summernote.init summernote.change":function(){t.update()},"summernote.codeview.toggled":function(){t.update()}},this.shouldInitialize=function(){return!!n.placeholder},this.initialize=function(){this.$placeholder=$('<div class="note-placeholder">'),this.$placeholder.on("click",function(){e.invoke("focus")}).text(n.placeholder).prependTo(i)},this.destroy=function(){this.$placeholder.remove()},this.update=function(){var t=!e.invoke("codeview.isActivated")&&e.invoke("editor.isEmpty");this.$placeholder.toggle(t)}},Buttons=function(u){var o=this,d=$.summernote.ui,r=u.layoutInfo.toolbar,h=u.options,a=h.langInfo,i=func.invertObject(h.keyMap[agent.isMac?"mac":"pc"]),l=this.representShortcut=function(t){var e=i[t];return h.shortcuts&&e?(agent.isMac&&(e=e.replace("CMD","⌘").replace("SHIFT","⇧")),e=e.replace("BACKSLASH","\\").replace("SLASH","/").replace("LEFTBRACKET","[").replace("RIGHTBRACKET","]")," ("+e+")"):""};this.initialize=function(){this.addToolbarButtons(),this.addImagePopoverButtons(),this.addLinkPopoverButtons(),this.fontInstalledMap={}},this.destroy=function(){delete this.fontInstalledMap},this.isFontInstalled=function(t){return o.fontInstalledMap.hasOwnProperty(t)||(o.fontInstalledMap[t]=agent.isFontInstalled(t)||list.contains(h.fontNamesIgnoreCheck,t)),o.fontInstalledMap[t]},this.addToolbarButtons=function(){u.memo("button.style",function(){return d.buttonGroup([d.button({className:"dropdown-toggle",contents:d.icon(h.icons.magic)+" "+d.icon(h.icons.caret,"span"),tooltip:a.style.style,data:{toggle:"dropdown"}}),d.dropdown({className:"dropdown-style",items:u.options.styleTags,template:function(t){"string"==typeof t&&(t={tag:t,title:a.style.hasOwnProperty(t)?a.style[t]:t});var e=t.tag,i=t.title,n=t.style?' style="'+t.style+'" ':"",s=t.className?' class="'+t.className+'"':"";return"<"+e+n+s+">"+i+"</"+e+">"},click:u.createInvokeHandler("editor.formatBlock")})]).render()}),u.memo("button.bold",function(){return d.button({className:"note-btn-bold",contents:d.icon(h.icons.bold),tooltip:a.font.bold+l("bold"),click:u.createInvokeHandler("editor.bold")}).render()}),u.memo("button.italic",function(){return d.button({className:"note-btn-italic",contents:d.icon(h.icons.italic),tooltip:a.font.italic+l("italic"),click:u.createInvokeHandler("editor.italic")}).render()}),u.memo("button.underline",function(){return d.button({className:"note-btn-underline",contents:d.icon(h.icons.underline),tooltip:a.font.underline+l("underline"),click:u.createInvokeHandler("editor.underline")}).render()}),u.memo("button.clear",function(){return d.button({contents:d.icon(h.icons.eraser),tooltip:a.font.clear+l("removeFormat"),click:u.createInvokeHandler("editor.removeFormat")}).render()}),u.memo("button.strikethrough",function(){return d.button({className:"note-btn-strikethrough",contents:d.icon(h.icons.strikethrough),tooltip:a.font.strikethrough+l("strikethrough"),click:u.createInvokeHandler("editor.strikethrough")}).render()}),u.memo("button.superscript",function(){return d.button({className:"note-btn-superscript",contents:d.icon(h.icons.superscript),tooltip:a.font.superscript,click:u.createInvokeHandler("editor.superscript")}).render()}),u.memo("button.subscript",function(){return d.button({className:"note-btn-subscript",contents:d.icon(h.icons.subscript),tooltip:a.font.subscript,click:u.createInvokeHandler("editor.subscript")}).render()}),u.memo("button.fontname",function(){return d.buttonGroup([d.button({className:"dropdown-toggle",contents:'<span class="note-current-fontname"/> '+d.icon(h.icons.caret,"span"),tooltip:a.font.name,data:{toggle:"dropdown"}}),d.dropdownCheck({className:"dropdown-fontname",checkClassName:h.icons.menuCheck,items:h.fontNames.filter(o.isFontInstalled),template:function(t){return'<span style="font-family:'+t+'">'+t+"</span>"},click:u.createInvokeHandler("editor.fontName")})]).render()}),u.memo("button.fontsize",function(){return d.buttonGroup([d.button({className:"dropdown-toggle",contents:'<span class="note-current-fontsize"/>'+d.icon(h.icons.caret,"span"),tooltip:a.font.size,data:{toggle:"dropdown"}}),d.dropdownCheck({className:"dropdown-fontsize",checkClassName:h.icons.menuCheck,items:h.fontSizes,click:u.createInvokeHandler("editor.fontSize")})]).render()}),u.memo("button.color",function(){return d.buttonGroup({className:"note-color",children:[d.button({className:"note-current-color-button",contents:d.icon(h.icons.font+" note-recent-color"),tooltip:a.color.recent,click:function(t){var e=$(t.currentTarget);u.invoke("editor.color",{backColor:e.attr("data-backColor"),foreColor:e.attr("data-foreColor")})},callback:function(t){var e=t.find(".note-recent-color");e.css("background-color","#FFFF00"),t.attr("data-backColor","#FFFF00")}}),d.button({className:"dropdown-toggle",contents:d.icon(h.icons.caret,"span"),tooltip:a.color.more,data:{toggle:"dropdown"}}),d.dropdown({items:["<li>",'<div class="btn-group">','  <div class="note-palette-title">'+a.color.background+"</div>","  <div>",'    <button type="button" class="note-color-reset btn btn-default" data-event="backColor" data-value="inherit">',a.color.transparent,"    </button>","  </div>",'  <div class="note-holder" data-event="backColor"/>',"</div>",'<div class="btn-group">','  <div class="note-palette-title">'+a.color.foreground+"</div>","  <div>",'    <button type="button" class="note-color-reset btn btn-default" data-event="removeFormat" data-value="foreColor">',a.color.resetToDefault,"    </button>","  </div>",'  <div class="note-holder" data-event="foreColor"/>',"</div>","</li>"].join(""),callback:function(t){t.find(".note-holder").each(function(){var t=$(this);t.append(d.palette({colors:h.colors,eventName:t.data("event")}).render())})},click:function(t){var e=$(t.target),i=e.data("event"),n=e.data("value");if(i&&n){var s="backColor"===i?"background-color":"color",r=e.closest(".note-color").find(".note-recent-color"),o=e.closest(".note-color").find(".note-current-color-button");r.css(s,n),o.attr("data-"+i,n),u.invoke("editor."+i,n)}}})]}).render()}),u.memo("button.ul",function(){return d.button({contents:d.icon(h.icons.unorderedlist),tooltip:a.lists.unordered+l("insertUnorderedList"),click:u.createInvokeHandler("editor.insertUnorderedList")}).render()}),u.memo("button.ol",function(){return d.button({contents:d.icon(h.icons.orderedlist),tooltip:a.lists.ordered+l("insertOrderedList"),click:u.createInvokeHandler("editor.insertOrderedList")}).render()});var t=d.button({contents:d.icon(h.icons.alignLeft),tooltip:a.paragraph.left+l("justifyLeft"),click:u.createInvokeHandler("editor.justifyLeft")}),e=d.button({contents:d.icon(h.icons.alignCenter),tooltip:a.paragraph.center+l("justifyCenter"),click:u.createInvokeHandler("editor.justifyCenter")}),i=d.button({contents:d.icon(h.icons.alignRight),tooltip:a.paragraph.right+l("justifyRight"),click:u.createInvokeHandler("editor.justifyRight")}),n=d.button({contents:d.icon(h.icons.alignJustify),tooltip:a.paragraph.justify+l("justifyFull"),click:u.createInvokeHandler("editor.justifyFull")}),s=d.button({contents:d.icon(h.icons.outdent),tooltip:a.paragraph.outdent+l("outdent"),click:u.createInvokeHandler("editor.outdent")}),r=d.button({contents:d.icon(h.icons.indent),tooltip:a.paragraph.indent+l("indent"),click:u.createInvokeHandler("editor.indent")});u.memo("button.justifyLeft",func.invoke(t,"render")),u.memo("button.justifyCenter",func.invoke(e,"render")),u.memo("button.justifyRight",func.invoke(i,"render")),u.memo("button.justifyFull",func.invoke(n,"render")),u.memo("button.outdent",func.invoke(s,"render")),u.memo("button.indent",func.invoke(r,"render")),u.memo("button.paragraph",function(){return d.buttonGroup([d.button({className:"dropdown-toggle",contents:d.icon(h.icons.alignLeft)+" "+d.icon(h.icons.caret,"span"),tooltip:a.paragraph.paragraph,data:{toggle:"dropdown"}}),d.dropdown([d.buttonGroup({className:"note-align",children:[t,e,i,n]}),d.buttonGroup({className:"note-list",children:[s,r]})])]).render()}),u.memo("button.height",function(){return d.buttonGroup([d.button({className:"dropdown-toggle",contents:d.icon(h.icons.textHeight)+" "+d.icon(h.icons.caret,"span"),tooltip:a.font.height,data:{toggle:"dropdown"}}),d.dropdownCheck({items:h.lineHeights,checkClassName:h.icons.menuCheck,className:"dropdown-line-height",click:u.createInvokeHandler("editor.lineHeight")})]).render()}),u.memo("button.table",function(){return d.buttonGroup([d.button({className:"dropdown-toggle",contents:d.icon(h.icons.table)+" "+d.icon(h.icons.caret,"span"),tooltip:a.table.table,data:{toggle:"dropdown"}}),d.dropdown({className:"note-table",items:['<div class="note-dimension-picker">','  <div class="note-dimension-picker-mousecatcher" data-event="insertTable" data-value="1x1"/>','  <div class="note-dimension-picker-highlighted"/>','  <div class="note-dimension-picker-unhighlighted"/>',"</div>",'<div class="note-dimension-display">1 x 1</div>'].join("")})],{callback:function(t){var e=t.find(".note-dimension-picker-mousecatcher");e.css({width:h.insertTableMaxSize.col+"em",height:h.insertTableMaxSize.row+"em"}).mousedown(u.createInvokeHandler("editor.insertTable")).on("mousemove",o.tableMoveHandler)}}).render()}),u.memo("button.link",function(){return d.button({contents:d.icon(h.icons.link),tooltip:a.link.link+l("linkDialog.show"),click:u.createInvokeHandler("linkDialog.show")}).render()}),u.memo("button.picture",function(){return d.button({contents:d.icon(h.icons.picture),tooltip:a.image.image,click:u.createInvokeHandler("imageDialog.show")}).render()}),u.memo("button.video",function(){return d.button({contents:d.icon(h.icons.video),tooltip:a.video.video,click:u.createInvokeHandler("videoDialog.show")}).render()}),u.memo("button.hr",function(){return d.button({contents:d.icon(h.icons.minus),tooltip:a.hr.insert+l("insertHorizontalRule"),click:u.createInvokeHandler("editor.insertHorizontalRule")}).render()}),u.memo("button.fullscreen",function(){return d.button({className:"btn-fullscreen",contents:d.icon(h.icons.arrowsAlt),tooltip:a.options.fullscreen,click:u.createInvokeHandler("fullscreen.toggle")}).render()}),u.memo("button.codeview",function(){return d.button({className:"btn-codeview",contents:d.icon(h.icons.code),tooltip:a.options.codeview,click:u.createInvokeHandler("codeview.toggle")}).render()}),u.memo("button.redo",function(){return d.button({contents:d.icon(h.icons.redo),tooltip:a.history.redo+l("redo"),click:u.createInvokeHandler("editor.redo")}).render()}),u.memo("button.undo",function(){return d.button({contents:d.icon(h.icons.undo),tooltip:a.history.undo+l("undo"),click:u.createInvokeHandler("editor.undo")}).render()}),u.memo("button.help",function(){return d.button({contents:d.icon(h.icons.question),tooltip:a.options.help,click:u.createInvokeHandler("helpDialog.show")}).render()})},this.addImagePopoverButtons=function(){u.memo("button.imageSize100",function(){return d.button({contents:'<span class="note-fontsize-10">100%</span>',tooltip:a.image.resizeFull,click:u.createInvokeHandler("editor.resize","1")}).render()}),u.memo("button.imageSize50",function(){return d.button({contents:'<span class="note-fontsize-10">50%</span>',tooltip:a.image.resizeHalf,click:u.createInvokeHandler("editor.resize","0.5")}).render()}),u.memo("button.imageSize25",function(){return d.button({contents:'<span class="note-fontsize-10">25%</span>',tooltip:a.image.resizeQuarter,click:u.createInvokeHandler("editor.resize","0.25")}).render()}),u.memo("button.floatLeft",function(){return d.button({contents:d.icon(h.icons.alignLeft),tooltip:a.image.floatLeft,click:u.createInvokeHandler("editor.floatMe","left")}).render()}),u.memo("button.floatRight",function(){return d.button({contents:d.icon(h.icons.alignRight),tooltip:a.image.floatRight,click:u.createInvokeHandler("editor.floatMe","right")}).render()}),u.memo("button.floatNone",function(){return d.button({contents:d.icon(h.icons.alignJustify),tooltip:a.image.floatNone,click:u.createInvokeHandler("editor.floatMe","none")}).render()}),u.memo("button.removeMedia",function(){return d.button({contents:d.icon(h.icons.trash),tooltip:a.image.remove,click:u.createInvokeHandler("editor.removeMedia")}).render()})},this.addLinkPopoverButtons=function(){u.memo("button.linkDialogShow",function(){return d.button({contents:d.icon(h.icons.link),tooltip:a.link.edit,click:u.createInvokeHandler("linkDialog.show")}).render()}),u.memo("button.unlink",function(){return d.button({contents:d.icon(h.icons.unlink),tooltip:a.link.unlink,click:u.createInvokeHandler("editor.unlink")}).render()})},this.build=function(t,e){for(var i=0,n=e.length;n>i;i++){for(var s=e[i],r=s[0],o=s[1],a=d.buttonGroup({className:"note-"+r}).render(),l=0,c=o.length;c>l;l++){var h=u.memo("button."+o[l]);h&&a.append("function"==typeof h?h(u):h)}a.appendTo(t)}},this.updateCurrentStyle=function(){var t=u.invoke("editor.currentStyle");if(this.updateBtnStates({".note-btn-bold":function(){return"bold"===t["font-bold"]},".note-btn-italic":function(){return"italic"===t["font-italic"]},".note-btn-underline":function(){return"underline"===t["font-underline"]},".note-btn-subscript":function(){return"subscript"===t["font-subscript"]},".note-btn-superscript":function(){return"superscript"===t["font-superscript"]},".note-btn-strikethrough":function(){return"strikethrough"===t["font-strikethrough"]}}),t["font-family"]){var e=t["font-family"].split(",").map(function(t){return t.replace(/[\'\"]/g,"").replace(/\s+$/,"").replace(/^\s+/,"")}),i=list.find(e,o.isFontInstalled);r.find(".dropdown-fontname li a").each(function(){var t=$(this).data("value")+""==i+"";this.className=t?"checked":""}),r.find(".note-current-fontname").text(i)}if(t["font-size"]){var n=t["font-size"];r.find(".dropdown-fontsize li a").each(function(){var t=$(this).data("value")+""==n+"";this.className=t?"checked":""}),r.find(".note-current-fontsize").text(n)}if(t["line-height"]){var s=t["line-height"];r.find(".dropdown-line-height li a").each(function(){var t=$(this).data("value")+""==s+"";this.className=t?"checked":""})}},this.updateBtnStates=function(t){$.each(t,function(t,e){d.toggleBtnActive(r.find(t),e())})},this.tableMoveHandler=function(t){var e,i=18,n=$(t.target.parentNode),s=n.next(),r=n.find(".note-dimension-picker-mousecatcher"),o=n.find(".note-dimension-picker-highlighted"),a=n.find(".note-dimension-picker-unhighlighted");if(void 0===t.offsetX){var l=$(t.target).offset();e={x:t.pageX-l.left,y:t.pageY-l.top}}else e={x:t.offsetX,y:t.offsetY};var c={c:Math.ceil(e.x/i)||1,r:Math.ceil(e.y/i)||1};o.css({width:c.c+"em",height:c.r+"em"}),r.data("value",c.c+"x"+c.r),3<c.c&&c.c<h.insertTableMaxSize.col&&a.css({width:c.c+1+"em"}),3<c.r&&c.r<h.insertTableMaxSize.row&&a.css({height:c.r+1+"em"}),s.html(c.c+" x "+c.r)}},Toolbar=function(t){var i=$.summernote.ui,e=t.layoutInfo.note,n=t.layoutInfo.toolbar,s=t.options;this.shouldInitialize=function(){return!s.airMode},this.initialize=function(){s.toolbar=s.toolbar||[],s.toolbar.length?t.invoke("buttons.build",n,s.toolbar):n.hide(),s.toolbarContainer&&n.appendTo(s.toolbarContainer),e.on("summernote.keyup summernote.mouseup summernote.change",function(){t.invoke("buttons.updateCurrentStyle")}),t.invoke("buttons.updateCurrentStyle")},this.destroy=function(){n.children().remove()},this.updateFullscreen=function(t){i.toggleBtnActive(n.find(".btn-fullscreen"),t)},this.updateCodeview=function(t){i.toggleBtnActive(n.find(".btn-codeview"),t),t?this.deactivate():this.activate()},this.activate=function(t){var e=n.find("button");t||(e=e.not(".btn-codeview")),i.toggleBtn(e,!0)},this.deactivate=function(t){var e=n.find("button");t||(e=e.not(".btn-codeview")),i.toggleBtn(e,!1)}},LinkDialog=function(l){var c=this,h=$.summernote.ui,n=l.layoutInfo.editor,s=l.options,r=s.langInfo;this.initialize=function(){var t=s.dialogsInBody?$(document.body):n,e='<div class="form-group"><label>'+r.link.textToDisplay+'</label><input class="note-link-text form-control" type="text" /></div><div class="form-group"><label>'+r.link.url+'</label><input class="note-link-url form-control" type="text" value="http://" /></div>'+(s.disableLinkTarget?"":'<div class="checkbox"><label><input type="checkbox" checked> '+r.link.openInNewWindow+"</label></div>"),i='<button href="#" class="btn btn-primary note-link-btn disabled" disabled>'+r.link.insert+"</button>";this.$dialog=h.dialog({className:"link-dialog",title:r.link.insert,fade:s.dialogsFade,body:e,footer:i}).render().appendTo(t)},this.destroy=function(){h.hideDialog(this.$dialog),this.$dialog.remove()},this.bindEnterKey=function(t,e){t.on("keypress",function(t){t.keyCode===key.code.ENTER&&e.trigger("click")})},this.toggleLinkBtn=function(t,e,i){h.toggleBtn(t,e.val()&&i.val())},this.showLinkDialog=function(a){return $.Deferred(function(i){var n=c.$dialog.find(".note-link-text"),s=c.$dialog.find(".note-link-url"),r=c.$dialog.find(".note-link-btn"),o=c.$dialog.find("input[type=checkbox]");h.onDialogShown(c.$dialog,function(){l.triggerEvent("dialog.shown"),a.url||(a.url=a.text),n.val(a.text);var t=function(){c.toggleLinkBtn(r,n,s),a.text=n.val()};n.on("input",t).on("paste",function(){setTimeout(t,0)});var e=function(){c.toggleLinkBtn(r,n,s),a.text||n.val(s.val())};s.on("input",e).on("paste",function(){setTimeout(e,0)}).val(a.url).trigger("focus"),c.toggleLinkBtn(r,n,s),c.bindEnterKey(s,r),c.bindEnterKey(n,r),o.prop("checked",a.isNewWindow),r.one("click",function(t){t.preventDefault(),i.resolve({range:a.range,url:s.val(),text:n.val(),isNewWindow:o.is(":checked")}),c.$dialog.modal("hide")})}),h.onDialogHidden(c.$dialog,function(){n.off("input paste keypress"),s.off("input paste keypress"),r.off("click"),"pending"===i.state()&&i.reject()}),h.showDialog(c.$dialog)}).promise()},this.show=function(){var t=l.invoke("editor.getLinkInfo");l.invoke("editor.saveRange"),this.showLinkDialog(t).then(function(t){l.invoke("editor.restoreRange"),l.invoke("editor.createLink",t)}).fail(function(){l.invoke("editor.restoreRange")})},l.memo("help.linkDialog.show",s.langInfo.help["linkDialog.show"])},LinkPopover=function(s){var t=this,e=$.summernote.ui,i=s.options;this.events={"summernote.keyup summernote.mouseup summernote.change summernote.scroll":function(){t.update()},"summernote.dialog.shown":function(){t.hide()}},this.shouldInitialize=function(){return!list.isEmpty(i.popover.link)},this.initialize=function(){this.$popover=e.popover({className:"note-link-popover",callback:function(t){var e=t.find(".popover-content");e.prepend('<span><a target="_blank"></a>&nbsp;</span>')}}).render().appendTo("body");var t=this.$popover.find(".popover-content");s.invoke("buttons.build",t,i.popover.link)},this.destroy=function(){this.$popover.remove()},this.update=function(){if(!s.invoke("editor.hasFocus"))return void this.hide();var t=s.invoke("editor.createRange");if(t.isCollapsed()&&t.isOnAnchor()){var e=dom.ancestor(t.sc,dom.isAnchor),i=$(e).attr("href");this.$popover.find("a").attr("href",i).html(i);var n=dom.posFromPlaceholder(e);this.$popover.css({display:"block",left:n.left,top:n.top})}else this.hide()},this.hide=function(){this.$popover.hide()}},ImageDialog=function(s){var r=this,o=$.summernote.ui,a=s.layoutInfo.editor,l=s.options,c=l.langInfo;this.initialize=function(){var t=l.dialogsInBody?$(document.body):a,e="";if(l.maximumImageFileSize){var i=Math.floor(Math.log(l.maximumImageFileSize)/Math.log(1024)),n=1*(l.maximumImageFileSize/Math.pow(1024,i)).toFixed(2)+" "+" KMGTP"[i]+"B";e="<small>"+c.image.maximumFileSize+" : "+n+"</small>"}var s='<div class="form-group note-group-select-from-files"><label>'+c.image.selectFromFiles+'</label><input class="note-image-input form-control" type="file" name="files" accept="image/*" multiple="multiple" />'+e+'</div><div class="form-group note-group-image-url" style="overflow:auto;"><label>'+c.image.url+'</label><input class="note-image-url form-control col-md-12" type="text" /></div>',r='<button href="#" class="btn btn-primary note-image-btn disabled" disabled>'+c.image.insert+"</button>";this.$dialog=o.dialog({title:c.image.insert,fade:l.dialogsFade,body:s,footer:r}).render().appendTo(t)},this.destroy=function(){o.hideDialog(this.$dialog),this.$dialog.remove()},this.bindEnterKey=function(t,e){t.on("keypress",function(t){t.keyCode===key.code.ENTER&&e.trigger("click")})},this.show=function(){s.invoke("editor.saveRange"),this.showImageDialog().then(function(t){o.hideDialog(r.$dialog),s.invoke("editor.restoreRange"),"string"==typeof t?s.invoke("editor.insertImage",t):s.invoke("editor.insertImagesOrCallback",t)}).fail(function(){s.invoke("editor.restoreRange")})},this.showImageDialog=function(){return $.Deferred(function(e){var t=r.$dialog.find(".note-image-input"),i=r.$dialog.find(".note-image-url"),n=r.$dialog.find(".note-image-btn");o.onDialogShown(r.$dialog,function(){s.triggerEvent("dialog.shown"),t.replaceWith(t.clone().on("change",function(){e.resolve(this.files||this.value)}).val("")),n.click(function(t){t.preventDefault(),e.resolve(i.val())}),i.on("keyup paste",function(){var t=i.val();o.toggleBtn(n,t)}).val("").trigger("focus"),r.bindEnterKey(i,n)}),o.onDialogHidden(r.$dialog,function(){t.off("change"),i.off("keyup paste keypress"),n.off("click"),"pending"===e.state()&&e.reject()}),o.showDialog(r.$dialog)})}},ImagePopover=function(e){var i=$.summernote.ui,n=e.options;this.shouldInitialize=function(){return!list.isEmpty(n.popover.image)},this.initialize=function(){this.$popover=i.popover({className:"note-image-popover"}).render().appendTo("body");var t=this.$popover.find(".popover-content");e.invoke("buttons.build",t,n.popover.image)},this.destroy=function(){this.$popover.remove()},this.update=function(t){if(dom.isImg(t)){var e=dom.posFromPlaceholder(t);this.$popover.css({display:"block",left:e.left,top:e.top})}else this.hide()},this.hide=function(){this.$popover.hide()}},VideoDialog=function(s){var r=this,o=$.summernote.ui,n=s.layoutInfo.editor,a=s.options,l=a.langInfo;this.initialize=function(){var t=a.dialogsInBody?$(document.body):n,e='<div class="form-group row-fluid"><label>'+l.video.url+' <small class="text-muted">'+l.video.providers+'</small></label><input class="note-video-url form-control span12" type="text" /></div>',i='<button href="#" class="btn btn-primary note-video-btn disabled" disabled>'+l.video.insert+"</button>";this.$dialog=o.dialog({title:l.video.insert,fade:a.dialogsFade,body:e,footer:i}).render().appendTo(t)},this.destroy=function(){o.hideDialog(this.$dialog),this.$dialog.remove()},this.bindEnterKey=function(t,e){t.on("keypress",function(t){t.keyCode===key.code.ENTER&&e.trigger("click")})},this.createVideoNode=function(t){var e,i=/^(?:https?:\/\/)?(?:www\.)?(?:youtu\.be\/|youtube\.com\/(?:embed\/|v\/|watch\?v=|watch\?.+&v=))((\w|-){11})(?:\S+)?$/,n=t.match(i),s=/(?:www\.|\/\/)instagram\.com\/p\/(.[a-zA-Z0-9_-]*)/,r=t.match(s),o=/\/\/vine\.co\/v\/([a-zA-Z0-9]+)/,a=t.match(o),l=/\/\/(player\.)?vimeo\.com\/([a-z]*\/)*([0-9]{6,11})[?]?.*/,c=t.match(l),h=/.+dailymotion.com\/(video|hub)\/([^_]+)[^#]*(#video=([^_&]+))?/,u=t.match(h),d=/\/\/v\.youku\.com\/v_show\/id_(\w+)=*\.html/,f=t.match(d),p=/^.+.(mp4|m4v)$/,m=t.match(p),g=/^.+.(ogg|ogv)$/,v=t.match(g),y=/^.+.(webm)$/,b=t.match(y);if(n&&11===n[1].length){var w=n[1];e=$("<iframe>").attr("frameborder",0).attr("src","//www.youtube.com/embed/"+w).attr("width","640").attr("height","360")}else if(r&&r[0].length)e=$("<iframe>").attr("frameborder",0).attr("src","https://instagram.com/p/"+r[1]+"/embed/").attr("width","612").attr("height","710").attr("scrolling","no").attr("allowtransparency","true");else if(a&&a[0].length)e=$("<iframe>").attr("frameborder",0).attr("src",a[0]+"/embed/simple").attr("width","600").attr("height","600").attr("class","vine-embed");else if(c&&c[3].length)e=$("<iframe webkitallowfullscreen mozallowfullscreen allowfullscreen>").attr("frameborder",0).attr("src","//player.vimeo.com/video/"+c[3]).attr("width","640").attr("height","360");else if(u&&u[2].length)e=$("<iframe>").attr("frameborder",0).attr("src","//www.dailymotion.com/embed/video/"+u[2]).attr("width","640").attr("height","360");else if(f&&f[1].length)e=$("<iframe webkitallowfullscreen mozallowfullscreen allowfullscreen>").attr("frameborder",0).attr("height","498").attr("width","510").attr("src","//player.youku.com/embed/"+f[1]);else{if(!(m||v||b))return!1;e=$("<video controls>").attr("src",t).attr("width","640").attr("height","360")}return e.addClass("note-video-clip"),e[0]},this.show=function(){var t=s.invoke("editor.getSelectedText");s.invoke("editor.saveRange"),this.showVideoDialog(t).then(function(t){o.hideDialog(r.$dialog),s.invoke("editor.restoreRange");var e=r.createVideoNode(t);e&&s.invoke("editor.insertNode",e)}).fail(function(){s.invoke("editor.restoreRange")})},this.showVideoDialog=function(n){return $.Deferred(function(e){var i=r.$dialog.find(".note-video-url"),t=r.$dialog.find(".note-video-btn");o.onDialogShown(r.$dialog,function(){s.triggerEvent("dialog.shown"),i.val(n).on("input",function(){o.toggleBtn(t,i.val())}).trigger("focus"),t.click(function(t){t.preventDefault(),e.resolve(i.val())}),r.bindEnterKey(i,t)}),o.onDialogHidden(r.$dialog,function(){i.off("input"),t.off("click"),"pending"===e.state()&&e.reject()}),o.showDialog(r.$dialog)})}},HelpDialog=function(s){var e=this,i=$.summernote.ui,n=s.layoutInfo.editor,r=s.options,o=r.langInfo;this.createShortCutList=function(){var n=r.keyMap[agent.isMac?"mac":"pc"];return Object.keys(n).map(function(t){var e=n[t],i=$('<div><div class="help-list-item"/></div>');return i.append($("<label><kbd>"+t+"</kdb></label>").css({width:180,"margin-right":10})).append($("<span/>").html(s.memo("help."+e)||e)),i.html()}).join("")},this.initialize=function(){var t=r.dialogsInBody?$(document.body):n,e=['<p class="text-center">','<a href="http://summernote.org/" target="_blank">Summernote 0.8.2</a> · ','<a href="https://github.com/summernote/summernote" target="_blank">Project</a> · ','<a href="https://github.com/summernote/summernote/issues" target="_blank">Issues</a>',"</p>"].join("");this.$dialog=i.dialog({title:o.options.help,fade:r.dialogsFade,body:this.createShortCutList(),footer:e,callback:function(t){t.find(".modal-body").css({"max-height":300,overflow:"scroll"})}}).render().appendTo(t)},this.destroy=function(){i.hideDialog(this.$dialog),this.$dialog.remove()},this.showHelpDialog=function(){return $.Deferred(function(t){i.onDialogShown(e.$dialog,function(){s.triggerEvent("dialog.shown"),t.resolve()}),i.showDialog(e.$dialog)}).promise()},this.show=function(){s.invoke("editor.saveRange"),this.showHelpDialog().then(function(){s.invoke("editor.restoreRange")})}},AirPopover=function(n){var i=this,e=$.summernote.ui,s=n.options,r=20;this.events={"summernote.keyup summernote.mouseup summernote.scroll":function(){i.update()},"summernote.change summernote.dialog.shown":function(){i.hide()},"summernote.focusout":function(t,e){agent.isFF||e.relatedTarget&&dom.ancestor(e.relatedTarget,func.eq(i.$popover[0]))||i.hide()}},this.shouldInitialize=function(){return s.airMode&&!list.isEmpty(s.popover.air)},this.initialize=function(){this.$popover=e.popover({className:"note-air-popover"}).render().appendTo("body");var t=this.$popover.find(".popover-content");n.invoke("buttons.build",t,s.popover.air)},this.destroy=function(){this.$popover.remove()},this.update=function(){var t=n.invoke("editor.currentStyle");if(t.range&&!t.range.isCollapsed()){var e=list.last(t.range.getClientRects());if(e){var i=func.rect2bnd(e);this.$popover.css({display:"block",left:Math.max(i.left+i.width/2,0)-r,top:i.top+i.height})}}else this.hide()},this.hide=function(){this.$popover.hide()}},HintPopover=function(s){var r=this,t=$.summernote.ui,o=5,e=s.options.hint||[],a=s.options.hintDirection||"bottom",l=$.isArray(e)?e:[e];this.events={"summernote.keyup":function(t,e){e.isDefaultPrevented()||r.handleKeyup(e)},"summernote.keydown":function(t,e){r.handleKeydown(e)},"summernote.dialog.shown":function(){r.hide()}},this.shouldInitialize=function(){return l.length>0},this.initialize=function(){this.lastWordRange=null,this.$popover=t.popover({className:"note-hint-popover",hideArrow:!0,direction:""}).render().appendTo("body"),this.$popover.hide(),this.$content=this.$popover.find(".popover-content"),this.$content.on("click",".note-hint-item",function(){r.$content.find(".active").removeClass("active"),$(this).addClass("active"),r.replace()})},this.destroy=function(){this.$popover.remove()},this.selectItem=function(t){this.$content.find(".active").removeClass("active"),t.addClass("active"),this.$content[0].scrollTop=t[0].offsetTop-this.$content.innerHeight()/2},this.moveDown=function(){var t=this.$content.find(".note-hint-item.active"),e=t.next();if(e.length)this.selectItem(e);else{var i=t.parent().next();i.length||(i=this.$content.find(".note-hint-group").first()),this.selectItem(i.find(".note-hint-item").first())}},this.moveUp=function(){var t=this.$content.find(".note-hint-item.active"),e=t.prev();if(e.length)this.selectItem(e);else{var i=t.parent().prev();i.length||(i=this.$content.find(".note-hint-group").last()),this.selectItem(i.find(".note-hint-item").last())}},this.replace=function(){var t=this.$content.find(".note-hint-item.active");if(t.length){var e=this.nodeFromItem(t);this.lastWordRange.insertNode(e),range.createFromNode(e).collapse().select(),this.lastWordRange=null,this.hide(),s.invoke("editor.focus")}},this.nodeFromItem=function(t){var e=l[t.data("index")],i=t.data("item"),n=e.content?e.content(i):i;return"string"==typeof n&&(n=dom.createText(n)),n},this.createItemTemplates=function(n,t){var s=l[n];return t.map(function(t,e){var i=$('<div class="note-hint-item"/>');return i.append(s.template?s.template(t):t+""),i.data({index:n,item:t}),0===n&&0===e&&i.addClass("active"),i})},this.handleKeydown=function(t){this.$popover.is(":visible")&&(t.keyCode===key.code.ENTER?(t.preventDefault(),this.replace()):t.keyCode===key.code.UP?(t.preventDefault(),this.moveUp()):t.keyCode===key.code.DOWN&&(t.preventDefault(),this.moveDown()))},this.searchKeyword=function(t,e,i){var n=l[t];if(n&&n.match.test(e)&&n.search){var s=n.match.exec(e);n.search(s[1],i)}else i()},this.createGroup=function(e,t){var i=$('<div class="note-hint-group note-hint-group-'+e+'"/>');return this.searchKeyword(e,t,function(t){t=t||[],t.length&&(i.html(r.createItemTemplates(e,t)),r.show())}),i},this.handleKeyup=function(t){if(list.contains([key.code.ENTER,key.code.UP,key.code.DOWN],t.keyCode)){if(t.keyCode===key.code.ENTER&&this.$popover.is(":visible"))return}else{var e=s.invoke("editor.createRange").getWordRange(),i=e.toString();if(l.length&&i){this.$content.empty();var n=func.rect2bnd(list.last(e.getClientRects()));n&&(this.$popover.hide(),this.lastWordRange=e,l.forEach(function(t,e){t.match.test(i)&&r.createGroup(e,i).appendTo(r.$content)}),"top"===a?this.$popover.css({left:n.left,top:n.top-this.$popover.outerHeight()-o}):this.$popover.css({left:n.left,top:n.top+n.height+o}))}else this.hide()}},this.show=function(){this.$popover.show()},this.hide=function(){this.$popover.hide()}};$.summernote=$.extend($.summernote,{version:"0.8.2",ui:ui,dom:dom,plugins:{},options:{modules:{editor:Editor,clipboard:Clipboard,dropzone:Dropzone,codeview:Codeview,statusbar:Statusbar,fullscreen:Fullscreen,handle:Handle,hintPopover:HintPopover,autoLink:AutoLink,autoSync:AutoSync,placeholder:Placeholder,buttons:Buttons,toolbar:Toolbar,linkDialog:LinkDialog,linkPopover:LinkPopover,imageDialog:ImageDialog,imagePopover:ImagePopover,videoDialog:VideoDialog,helpDialog:HelpDialog,airPopover:AirPopover},buttons:{},lang:"en-US",toolbar:[["style",["style"]],["font",["bold","underline","clear"]],["fontname",["fontname"]],["color",["color"]],["para",["ul","ol","paragraph"]],["table",["table"]],["insert",["link","picture","video"]],["view",["fullscreen","codeview","help"]]],popover:{image:[["imagesize",["imageSize100","imageSize50","imageSize25"]],["float",["floatLeft","floatRight","floatNone"]],["remove",["removeMedia"]]],link:[["link",["linkDialogShow","unlink"]]],air:[["color",["color"]],["font",["bold","underline","clear"]],["para",["ul","paragraph"]],["table",["table"]],["insert",["link","picture"]]]},airMode:!1,width:null,height:null,focus:!1,tabSize:4,styleWithSpan:!0,shortcuts:!0,textareaAutoSync:!0,direction:null,styleTags:["p","blockquote","pre","h1","h2","h3","h4","h5","h6"],fontNames:["Arial","Arial Black","Comic Sans MS","Courier New","Helvetica Neue","Helvetica","Impact","Lucida Grande","Tahoma","Times New Roman","Verdana"],fontSizes:["8","9","10","11","12","14","18","24","36"],colors:[["#000000","#424242","#636363","#9C9C94","#CEC6CE","#EFEFEF","#F7F7F7","#FFFFFF"],["#FF0000","#FF9C00","#FFFF00","#00FF00","#00FFFF","#0000FF","#9C00FF","#FF00FF"],["#F7C6CE","#FFE7CE","#FFEFC6","#D6EFD6","#CEDEE7","#CEE7F7","#D6D6E7","#E7D6DE"],["#E79C9C","#FFC69C","#FFE79C","#B5D6A5","#A5C6CE","#9CC6EF","#B5A5D6","#D6A5BD"],["#E76363","#F7AD6B","#FFD663","#94BD7B","#73A5AD","#6BADDE","#8C7BC6","#C67BA5"],["#CE0000","#E79439","#EFC631","#6BA54A","#4A7B8C","#3984C6","#634AA5","#A54A7B"],["#9C0000","#B56308","#BD9400","#397B21","#104A5A","#085294","#311873","#731842"],["#630000","#7B3900","#846300","#295218","#083139","#003163","#21104A","#4A1031"]],lineHeights:["1.0","1.2","1.4","1.5","1.6","1.8","2.0","3.0"],tableClassName:"table table-bordered",insertTableMaxSize:{col:10,row:10},dialogsInBody:!1,dialogsFade:!1,maximumImageFileSize:null,callbacks:{onInit:null,onFocus:null,onBlur:null,onEnter:null,onKeyup:null,onKeydown:null,onImageUpload:null,onImageUploadError:null},codemirror:{mode:"text/html",htmlMode:!0,lineNumbers:!0},keyMap:{pc:{ENTER:"insertParagraph","CTRL+Z":"undo","CTRL+Y":"redo",TAB:"tab","SHIFT+TAB":"untab","CTRL+B":"bold","CTRL+I":"italic","CTRL+U":"underline","CTRL+SHIFT+S":"strikethrough","CTRL+BACKSLASH":"removeFormat","CTRL+SHIFT+L":"justifyLeft","CTRL+SHIFT+E":"justifyCenter","CTRL+SHIFT+R":"justifyRight","CTRL+SHIFT+J":"justifyFull","CTRL+SHIFT+NUM7":"insertUnorderedList","CTRL+SHIFT+NUM8":"insertOrderedList","CTRL+LEFTBRACKET":"outdent","CTRL+RIGHTBRACKET":"indent","CTRL+NUM0":"formatPara","CTRL+NUM1":"formatH1","CTRL+NUM2":"formatH2","CTRL+NUM3":"formatH3","CTRL+NUM4":"formatH4","CTRL+NUM5":"formatH5","CTRL+NUM6":"formatH6","CTRL+ENTER":"insertHorizontalRule","CTRL+K":"linkDialog.show"},mac:{ENTER:"insertParagraph","CMD+Z":"undo","CMD+SHIFT+Z":"redo",TAB:"tab","SHIFT+TAB":"untab","CMD+B":"bold","CMD+I":"italic","CMD+U":"underline","CMD+SHIFT+S":"strikethrough","CMD+BACKSLASH":"removeFormat","CMD+SHIFT+L":"justifyLeft","CMD+SHIFT+E":"justifyCenter","CMD+SHIFT+R":"justifyRight","CMD+SHIFT+J":"justifyFull","CMD+SHIFT+NUM7":"insertUnorderedList","CMD+SHIFT+NUM8":"insertOrderedList","CMD+LEFTBRACKET":"outdent","CMD+RIGHTBRACKET":"indent","CMD+NUM0":"formatPara","CMD+NUM1":"formatH1","CMD+NUM2":"formatH2","CMD+NUM3":"formatH3","CMD+NUM4":"formatH4","CMD+NUM5":"formatH5","CMD+NUM6":"formatH6","CMD+ENTER":"insertHorizontalRule","CMD+K":"linkDialog.show"}},icons:{align:"note-icon-align",alignCenter:"note-icon-align-center",alignJustify:"note-icon-align-justify",alignLeft:"note-icon-align-left",alignRight:"note-icon-align-right",indent:"note-icon-align-indent",outdent:"note-icon-align-outdent",arrowsAlt:"note-icon-arrows-alt",bold:"note-icon-bold",caret:"note-icon-caret",circle:"note-icon-circle",close:"note-icon-close",code:"note-icon-code",eraser:"note-icon-eraser",font:"note-icon-font",frame:"note-icon-frame",italic:"note-icon-italic",link:"note-icon-link",unlink:"note-icon-chain-broken",magic:"note-icon-magic",menuCheck:"note-icon-check",minus:"note-icon-minus",orderedlist:"note-icon-orderedlist",pencil:"note-icon-pencil",picture:"note-icon-picture",question:"note-icon-question",redo:"note-icon-redo",square:"note-icon-square",strikethrough:"note-icon-strikethrough",subscript:"note-icon-subscript",superscript:"note-icon-superscript",table:"note-icon-table",textHeight:"note-icon-text-height",trash:"note-icon-trash",underline:"note-icon-underline",undo:"note-icon-undo",unorderedlist:"note-icon-unorderedlist",video:"note-icon-video"}}})});(function(t){var e="0.3.4",d="hasOwnProperty",f=/[\.\/]/,p="*",o=function(){},g=function(t,e){return t-e},v,y,b={n:{}},w=function(t,e){var i=b,n=y,s=Array.prototype.slice.call(arguments,2),r=w.listeners(t),o=0,a=!1,l,c=[],h={},u=[],d=v,f=[];v=t,y=0;for(var p=0,m=r.length;p<m;p++)"zIndex"in r[p]&&(c.push(r[p].zIndex),r[p].zIndex<0&&(h[r[p].zIndex]=r[p]));c.sort(g);while(c[o]<0){l=h[c[o++]],u.push(l.apply(e,s));if(y){y=n;return u}}for(p=0;p<m;p++){l=r[p];if("zIndex"in l)if(l.zIndex==c[o]){u.push(l.apply(e,s));if(y)break;do{o++,l=h[c[o]],l&&u.push(l.apply(e,s));if(y)break}while(l)}else h[l.zIndex]=l;else{u.push(l.apply(e,s));if(y)break}}y=n,v=d;return u.length?u:null};w.listeners=function(t){var e=t.split(f),i=b,n,s,r,o,a,l,c,h,u=[i],d=[];for(o=0,a=e.length;o<a;o++){h=[];for(l=0,c=u.length;l<c;l++){i=u[l].n,s=[i[e[o]],i[p]],r=2;while(r--)n=s[r],n&&(h.push(n),d=d.concat(n.f||[]))}u=h}return d},w.on=function(t,e){var i=t.split(f),n=b;for(var s=0,r=i.length;s<r;s++)n=n.n,!n[i[s]]&&(n[i[s]]={n:{}}),n=n[i[s]];n.f=n.f||[];for(s=0,r=n.f.length;s<r;s++)if(n.f[s]==e)return o;n.f.push(e);return function(t){+t==+t&&(e.zIndex=+t)}},w.stop=function(){y=1},w.nt=function(t){if(t)return new RegExp("(?:\\.|\\/|^)"+t+"(?:\\.|\\/|$)").test(v);return v},w.off=w.unbind=function(t,e){var i=t.split(f),n,s,r,o,a,l,c,h=[b];for(o=0,a=i.length;o<a;o++)for(l=0;l<h.length;l+=r.length-2){r=[l,1],n=h[l].n;if(i[o]!=p)n[i[o]]&&r.push(n[i[o]]);else for(s in n)n[d](s)&&r.push(n[s]);h.splice.apply(h,r)}for(o=0,a=h.length;o<a;o++){n=h[o];while(n.n){if(e){if(n.f){for(l=0,c=n.f.length;l<c;l++)if(n.f[l]==e){n.f.splice(l,1);break}!n.f.length&&delete n.f}for(s in n.n)if(n.n[d](s)&&n.n[s].f){var u=n.n[s].f;for(l=0,c=u.length;l<c;l++)if(u[l]==e){u.splice(l,1);break}!u.length&&delete n.n[s].f}}else{delete n.f;for(s in n.n)n.n[d](s)&&n.n[s].f&&delete n.n[s].f}n=n.n}}},w.once=function(e,i){var n=function(){var t=i.apply(this,arguments);w.unbind(e,n);return t};return w.on(e,n)},w.version=e,w.toString=function(){return"You are running Eve "+e},typeof module!="undefined"&&module.exports?module.exports=w:typeof define!="undefined"?define("eve",[],function(){return w}):t.eve=w})(this),function(){function o(t){for(var e=0;e<j.length;e++)j[e].el.paper==t&&j.splice(e--,1)}function k(t,e,i,n,s,r){i=N(i);var o,a,l,c=[],h,u,d,f=t.ms,p={},m={},g={};if(n)for(y=0,b=j.length;y<b;y++){var v=j[y];if(v.el.id==e.id&&v.anim==t){v.percent!=i?(j.splice(y,1),l=1):a=v,e.attr(v.totalOrigin);break}}else n=+m;for(var y=0,b=t.percents.length;y<b;y++){if(t.percents[y]==i||t.percents[y]>n*t.top){i=t.percents[y],u=t.percents[y-1]||0,f=f/t.top*(i-u),h=t.percents[y+1],o=t.anim[i];break}n&&e.attr(t.anim[t.percents[y]])}if(!!o){if(!a){for(var w in o)if(o[L](w))if(kt[L](w)||e.paper.customAttributes[L](w)){p[w]=e.attr(w),p[w]==null&&(p[w]=_t[w]),m[w]=o[w];switch(kt[w]){case z:g[w]=(m[w]-p[w])/f;break;case"colour":p[w]=O.getRGB(p[w]);var x=O.getRGB(m[w]);g[w]={r:(x.r-p[w].r)/f,g:(x.g-p[w].g)/f,b:(x.b-p[w].b)/f};break;case"path":var _=B(p[w],m[w]),k=_[1];p[w]=_[0],g[w]=[];for(y=0,b=p[w].length;y<b;y++){g[w][y]=[0];for(var C=1,S=p[w][y].length;C<S;C++)g[w][y][C]=(k[y][C]-p[w][y][C])/f}break;case"transform":var T=e._,D=pe(T[w],m[w]);if(D){p[w]=D.from,m[w]=D.to,g[w]=[],g[w].real=!0;for(y=0,b=p[w].length;y<b;y++){g[w][y]=[p[w][y][0]];for(C=1,S=p[w][y].length;C<S;C++)g[w][y][C]=(m[w][y][C]-p[w][y][C])/f}}else{var M=e.matrix||new H,P={_:{transform:T.transform},getBBox:function(){return e.getBBox(1)}};p[w]=[M.a,M.b,M.c,M.d,M.e,M.f],de(P,m[w]),m[w]=P._.transform,g[w]=[(P.matrix.a-M.a)/f,(P.matrix.b-M.b)/f,(P.matrix.c-M.c)/f,(P.matrix.d-M.d)/f,(P.matrix.e-M.e)/f,(P.matrix.f-M.f)/f]}break;case"csv":var I=R(o[w])[V](Z),E=R(p[w])[V](Z);if(w=="clip-rect"){p[w]=E,g[w]=[],y=E.length;while(y--)g[w][y]=(I[y]-p[w][y])/f}m[w]=I;break;default:I=[][U](o[w]),E=[][U](p[w]),g[w]=[],y=e.paper.customAttributes[w].length;while(y--)g[w][y]=((I[y]||0)-(E[y]||0))/f}}var F=o.easing,$=O.easing_formulas[F];if(!$){$=R(F).match(yt);if($&&$.length==5){var A=$;$=function(t){return W(t,+A[1],+A[2],+A[3],+A[4],f)}}else $=Ht}d=o.start||t.start||+new Date,v={anim:t,percent:i,timestamp:d,start:d+(t.del||0),status:0,initstatus:n||0,stop:!1,ms:f,easing:$,from:p,diff:g,to:m,el:e,callback:o.callback,prev:u,next:h,repeat:r||t.times,origin:e.attr(),totalOrigin:s},j.push(v);if(n&&!a&&!l){v.stop=!0,v.start=new Date-f*n;if(j.length==1)return Fe()}l&&(v.start=new Date-v.ms*n),j.length==1&&Ee(Fe)}else a.initstatus=n,a.start=new Date-a.ms*n;eve("raphael.anim.start."+e.id,e,t)}}function d(t,e){var i=[],n={};this.ms=e,this.times=1;if(t){for(var s in t)t[L](s)&&(n[N(s)]=t[s],i.push(N(s)));i.sort($t)}this.anim=n,this.top=i[i.length-1],this.percents=i}function W(t,e,i,n,s,r){function o(t,e){var i,n,s,r,o,a;for(s=t,a=0;a<8;a++){r=l(s)-t;if(X(r)<e)return s;o=(3*u*s+2*h)*s+c;if(X(o)<1e-6)break;s=s-r/o}i=0,n=1,s=t;if(s<i)return i;if(s>n)return n;while(i<n){r=l(s);if(X(r-t)<e)return s;t>r?i=s:n=s,s=(n-i)/2+i}return s}function a(t,e){var i=o(t,e);return((p*i+f)*i+d)*i}function l(t){return((u*t+h)*t+c)*t}var c=3*e,h=3*(n-e)-c,u=1-c-h,d=3*i,f=3*(s-i)-d,p=1-d-f;return a(t,1/(200*r))}function a(){return this.x+C+this.y+C+this.width+" × "+this.height}function h(){return this.x+C+this.y}function H(t,e,i,n,s,r){t!=null?(this.a=+t,this.b=+e,this.c=+i,this.d=+n,this.e=+s,this.f=+r):(this.a=1,this.b=0,this.c=0,this.d=1,this.e=0,this.f=0)}function u(t,e,i){t=O._path2curve(t),e=O._path2curve(e);var n,s,r,o,a,l,c,h,u,d,f=i?0:[];for(var p=0,m=t.length;p<m;p++){var g=t[p];if(g[0]=="M")n=a=g[1],s=l=g[2];else{g[0]=="C"?(u=[n,s].concat(g.slice(1)),n=u[6],s=u[7]):(u=[n,s,n,s,a,l,a,l],n=a,s=l);for(var v=0,y=e.length;v<y;v++){var b=e[v];if(b[0]=="M")r=c=b[1],o=h=b[2];else{b[0]=="C"?(d=[r,o].concat(b.slice(1)),r=d[6],o=d[7]):(d=[r,o,r,o,c,h,c,h],r=c,o=h);var w=M(u,d,i);if(i)f+=w;else{for(var x=0,_=w.length;x<_;x++)w[x].segment1=p,w[x].segment2=v,w[x].bez1=u,w[x].bez2=d;f=f.concat(w)}}}}}return f}function M(t,e,i){var n=O.bezierBBox(t),s=O.bezierBBox(e);if(!O.isBBoxIntersect(n,s))return i?0:[];var r=S.apply(0,t),o=S.apply(0,e),a=~~(r/5),l=~~(o/5),c=[],h=[],u={},d=i?0:[];for(var f=0;f<a+1;f++){var p=O.findDotsAtSegment.apply(O,t.concat(f/a));c.push({x:p.x,y:p.y,t:f/a})}for(f=0;f<l+1;f++)p=O.findDotsAtSegment.apply(O,e.concat(f/l)),h.push({x:p.x,y:p.y,t:f/l});for(f=0;f<a;f++)for(var m=0;m<l;m++){var g=c[f],v=c[f+1],y=h[m],b=h[m+1],w=X(v.x-g.x)<.001?"y":"x",x=X(b.x-y.x)<.001?"y":"x",_=P(g.x,g.y,v.x,v.y,y.x,y.y,b.x,b.y);if(_){if(u[_.x.toFixed(4)]==_.y.toFixed(4))continue;u[_.x.toFixed(4)]=_.y.toFixed(4);var k=g.t+X((_[w]-g[w])/(v[w]-g[w]))*(v.t-g.t),C=y.t+X((_[x]-y[x])/(b[x]-y[x]))*(b.t-y.t);k>=0&&k<=1&&C>=0&&C<=1&&(i?d++:d.push({x:_.x,y:_.y,t1:k,t2:C}))}}return d}function f(t,e){return M(t,e,1)}function v(t,e){return M(t,e)}function P(t,e,i,n,s,r,o,a){if(!(x(t,i)<T(s,o)||T(t,i)>x(s,o)||x(e,n)<T(r,a)||T(e,n)>x(r,a))){var l=(t*n-e*i)*(s-o)-(t-i)*(s*a-r*o),c=(t*n-e*i)*(r-a)-(e-n)*(s*a-r*o),h=(t-i)*(r-a)-(e-n)*(s-o);if(!h)return;var u=l/h,d=c/h,f=+u.toFixed(2),p=+d.toFixed(2);if(f<+T(t,i).toFixed(2)||f>+x(t,i).toFixed(2)||f<+T(s,o).toFixed(2)||f>+x(s,o).toFixed(2)||p<+T(e,n).toFixed(2)||p>+x(e,n).toFixed(2)||p<+T(r,a).toFixed(2)||p>+x(r,a).toFixed(2))return;return{x:u,y:d}}}function I(t,e,i,n,s,r,o,a,l){if(!(l<0||S(t,e,i,n,s,r,o,a)<l)){var c=1,h=c/2,u=c-h,d,f=.01;d=S(t,e,i,n,s,r,o,a,u);while(X(d-l)>f)h/=2,u+=(d<l?1:-1)*h,d=S(t,e,i,n,s,r,o,a,u);return u}}function S(t,e,i,n,s,r,o,a,l){l==null&&(l=1),l=l>1?1:l<0?0:l;var c=l/2,h=12,u=[-.1252,.1252,-.3678,.3678,-.5873,.5873,-.7699,.7699,-.9041,.9041,-.9816,.9816],d=[.2491,.2491,.2335,.2335,.2032,.2032,.1601,.1601,.1069,.1069,.0472,.0472],f=0;for(var p=0;p<h;p++){var m=c*u[p]+c,g=E(m,t,i,s,o),v=E(m,e,n,r,a),y=g*g+v*v;f+=d[p]*G.sqrt(y)}return c*f}function E(t,e,i,n,s){var r=-3*e+9*i-9*n+3*s,o=t*r+6*e-12*i+6*n;return t*o-3*e+3*i}function F(t,e){var i=[];for(var n=0,s=t.length;s-2*!e>n;n+=2){var r=[{x:+t[n-2],y:+t[n-1]},{x:+t[n],y:+t[n+1]},{x:+t[n+2],y:+t[n+3]},{x:+t[n+4],y:+t[n+5]}];e?n?s-4==n?r[3]={x:+t[0],y:+t[1]}:s-2==n&&(r[2]={x:+t[0],y:+t[1]},r[3]={x:+t[2],y:+t[3]}):r[0]={x:+t[s-2],y:+t[s-1]}:s-4==n?r[3]=r[2]:n||(r[0]={x:+t[n],y:+t[n+1]}),i.push(["C",(-r[0].x+6*r[1].x+r[2].x)/6,(-r[0].y+6*r[1].y+r[2].y)/6,(r[1].x+6*r[2].x-r[3].x)/6,(r[1].y+6*r[2].y-r[3].y)/6,r[2].x,r[2].y])}return i}function $(){return this.hex}function q(s,r,o){function a(){var t=Array.prototype.slice.call(arguments,0),e=t.join("␀"),i=a.cache=a.cache||{},n=a.count=a.count||[];if(i[L](e)){A(n,e);return o?o(i[e]):i[e]}n.length>=1e3&&delete i[n.shift()],n.push(e),i[e]=s[g](r,t);return o?o(i[e]):i[e]}return a}function A(t,e){for(var i=0,n=t.length;i<n;i++)if(t[i]===e)return t.push(t.splice(i,1)[0])}function Y(t){if(Object(t)!==t)return t;var e=new t.constructor;for(var i in t)t[L](i)&&(e[i]=Y(t[i]));return e}function O(t){if(O.is(t,"function"))return Q?t():eve.on("raphael.DOMload",t);if(O.is(t,y))return O._engine.create[g](O,t.splice(0,3+O.is(t[0],z))).add(t);var e=Array.prototype.slice.call(arguments,0);if(O.is(e[e.length-1],"function")){var i=e.pop();return Q?i.call(O._engine.create[g](O,e)):eve.on("raphael.DOMload",function(){i.call(O._engine.create[g](O,e))})}return O._engine.create[g](O,arguments)}O.version="2.1.0",O.eve=eve;var Q,Z=/[, ]+/,J={circle:1,rect:1,path:1,ellipse:1,text:1,image:1},tt=/\{(\d+)\}/g,et="prototype",L="hasOwnProperty",p={doc:document,win:window},it={was:Object.prototype[L].call(p.win,"Raphael"),is:p.win.Raphael},nt=function(){this.ca=this.customAttributes={}},t,st="appendChild",g="apply",U="concat",rt="createTouch"in p.doc,_="",C=" ",R=String,V="split",ot="click dblclick mousedown mousemove mouseout mouseover mouseup touchstart touchmove touchend touchcancel"[V](C),at={mousedown:"touchstart",mousemove:"touchmove",mouseup:"touchend"},lt=R.prototype.toLowerCase,G=Math,x=G.max,T=G.min,X=G.abs,D=G.pow,K=G.PI,z="number",ct="string",y="array",ht="toString",ut="fill",dt=Object.prototype.toString,ft={},pt="push",mt=O._ISURL=/^url\(['"]?([^\)]+?)['"]?\)$/i,gt=/^\s*((#[a-f\d]{6})|(#[a-f\d]{3})|rgba?\(\s*([\d\.]+%?\s*,\s*[\d\.]+%?\s*,\s*[\d\.]+%?(?:\s*,\s*[\d\.]+%?)?)\s*\)|hsba?\(\s*([\d\.]+(?:deg|\xb0|%)?\s*,\s*[\d\.]+%?\s*,\s*[\d\.]+(?:%?\s*,\s*[\d\.]+)?)%?\s*\)|hsla?\(\s*([\d\.]+(?:deg|\xb0|%)?\s*,\s*[\d\.]+%?\s*,\s*[\d\.]+(?:%?\s*,\s*[\d\.]+)?)%?\s*\))\s*$/i,vt={NaN:1,Infinity:1,"-Infinity":1},yt=/^(?:cubic-)?bezier\(([^,]+),([^,]+),([^,]+),([^\)]+)\)/,bt=G.round,wt="setAttribute",N=parseFloat,c=parseInt,xt=R.prototype.toUpperCase,_t=O._availableAttrs={"arrow-end":"none","arrow-start":"none",blur:0,"clip-rect":"0 0 1e9 1e9",cursor:"default",cx:0,cy:0,fill:"#fff","fill-opacity":1,font:'10px "Arial"',"font-family":'"Arial"',"font-size":"10","font-style":"normal","font-weight":400,gradient:0,height:0,href:"http://raphaeljs.com/","letter-spacing":0,opacity:1,path:"M0,0",r:0,rx:0,ry:0,src:"",stroke:"#000","stroke-dasharray":"","stroke-linecap":"butt","stroke-linejoin":"butt","stroke-miterlimit":0,"stroke-opacity":1,"stroke-width":1,target:"_blank","text-anchor":"middle",title:"Raphael",transform:"",width:0,x:0,y:0},kt=O._availableAnimAttrs={blur:z,"clip-rect":"csv",cx:z,cy:z,fill:"colour","fill-opacity":z,"font-size":z,height:z,opacity:z,path:"path",r:z,rx:z,ry:z,stroke:"colour","stroke-opacity":z,"stroke-width":z,transform:"transform",width:z,x:z,y:z},Ct=/[\x09\x0a\x0b\x0c\x0d\x20\xa0\u1680\u180e\u2000\u2001\u2002\u2003\u2004\u2005\u2006\u2007\u2008\u2009\u200a\u202f\u205f\u3000\u2028\u2029]/g,St=/[\x09\x0a\x0b\x0c\x0d\x20\xa0\u1680\u180e\u2000\u2001\u2002\u2003\u2004\u2005\u2006\u2007\u2008\u2009\u200a\u202f\u205f\u3000\u2028\u2029]*,[\x09\x0a\x0b\x0c\x0d\x20\xa0\u1680\u180e\u2000\u2001\u2002\u2003\u2004\u2005\u2006\u2007\u2008\u2009\u200a\u202f\u205f\u3000\u2028\u2029]*/,Tt={hs:1,rg:1},Dt=/,?([achlmqrstvxz]),?/gi,Mt=/([achlmrqstvz])[\x09\x0a\x0b\x0c\x0d\x20\xa0\u1680\u180e\u2000\u2001\u2002\u2003\u2004\u2005\u2006\u2007\u2008\u2009\u200a\u202f\u205f\u3000\u2028\u2029,]*((-?\d*\.?\d*(?:e[\-+]?\d+)?[\x09\x0a\x0b\x0c\x0d\x20\xa0\u1680\u180e\u2000\u2001\u2002\u2003\u2004\u2005\u2006\u2007\u2008\u2009\u200a\u202f\u205f\u3000\u2028\u2029]*,?[\x09\x0a\x0b\x0c\x0d\x20\xa0\u1680\u180e\u2000\u2001\u2002\u2003\u2004\u2005\u2006\u2007\u2008\u2009\u200a\u202f\u205f\u3000\u2028\u2029]*)+)/gi,Pt=/([rstm])[\x09\x0a\x0b\x0c\x0d\x20\xa0\u1680\u180e\u2000\u2001\u2002\u2003\u2004\u2005\u2006\u2007\u2008\u2009\u200a\u202f\u205f\u3000\u2028\u2029,]*((-?\d*\.?\d*(?:e[\-+]?\d+)?[\x09\x0a\x0b\x0c\x0d\x20\xa0\u1680\u180e\u2000\u2001\u2002\u2003\u2004\u2005\u2006\u2007\u2008\u2009\u200a\u202f\u205f\u3000\u2028\u2029]*,?[\x09\x0a\x0b\x0c\x0d\x20\xa0\u1680\u180e\u2000\u2001\u2002\u2003\u2004\u2005\u2006\u2007\u2008\u2009\u200a\u202f\u205f\u3000\u2028\u2029]*)+)/gi,It=/(-?\d*\.?\d*(?:e[\-+]?\d+)?)[\x09\x0a\x0b\x0c\x0d\x20\xa0\u1680\u180e\u2000\u2001\u2002\u2003\u2004\u2005\u2006\u2007\u2008\u2009\u200a\u202f\u205f\u3000\u2028\u2029]*,?[\x09\x0a\x0b\x0c\x0d\x20\xa0\u1680\u180e\u2000\u2001\u2002\u2003\u2004\u2005\u2006\u2007\u2008\u2009\u200a\u202f\u205f\u3000\u2028\u2029]*/gi,Et=O._radial_gradient=/^r(?:\(([^,]+?)[\x09\x0a\x0b\x0c\x0d\x20\xa0\u1680\u180e\u2000\u2001\u2002\u2003\u2004\u2005\u2006\u2007\u2008\u2009\u200a\u202f\u205f\u3000\u2028\u2029]*,[\x09\x0a\x0b\x0c\x0d\x20\xa0\u1680\u180e\u2000\u2001\u2002\u2003\u2004\u2005\u2006\u2007\u2008\u2009\u200a\u202f\u205f\u3000\u2028\u2029]*([^\)]+?)\))?/,s={},Ft=function(t,e){return t.key-e.key},$t=function(t,e){return N(t)-N(e)},At=function(){},Ht=function(t){return t},Ot=O._rectPath=function(t,e,i,n,s){if(s)return[["M",t+s,e],["l",i-s*2,0],["a",s,s,0,0,1,s,s],["l",0,n-s*2],["a",s,s,0,0,1,-s,s],["l",s*2-i,0],["a",s,s,0,0,1,-s,-s],["l",0,s*2-n],["a",s,s,0,0,1,s,-s],["z"]];return[["M",t,e],["l",i,0],["l",0,n],["l",-i,0],["z"]]},Lt=function(t,e,i,n){n==null&&(n=i);return[["M",t,e],["m",0,-n],["a",i,n,0,1,1,0,2*n],["a",i,n,0,1,1,0,-2*n],["z"]]},Rt=O._getPath={path:function(t){return t.attr("path")},circle:function(t){var e=t.attrs;return Lt(e.cx,e.cy,e.r)},ellipse:function(t){var e=t.attrs;return Lt(e.cx,e.cy,e.rx,e.ry)},rect:function(t){var e=t.attrs;return Ot(e.x,e.y,e.width,e.height,e.r)},image:function(t){var e=t.attrs;return Ot(e.x,e.y,e.width,e.height)},text:function(t){var e=t._getBBox();return Ot(e.x,e.y,e.width,e.height)}},zt=O.mapPath=function(t,e){if(!e)return t;var i,n,s,r,o,a,l;t=B(t);for(s=0,o=t.length;s<o;s++){l=t[s];for(r=1,a=l.length;r<a;r+=2)i=e.x(l[r],l[r+1]),n=e.y(l[r],l[r+1]),l[r]=i,l[r+1]=n}return t};O._g=p,O.type=p.win.SVGAngle||p.doc.implementation.hasFeature("http://www.w3.org/TR/SVG11/feature#BasicStructure","1.1")?"SVG":"VML";if(O.type=="VML"){var Nt=p.doc.createElement("div"),Bt;Nt.innerHTML='<v:shape adj="1"/>',Bt=Nt.firstChild,Bt.style.behavior="url(#default#VML)";if(!Bt||typeof Bt.adj!="object")return O.type=_;Nt=null}O.svg=!(O.vml=O.type=="VML"),O._Paper=nt,O.fn=t=nt.prototype=O.prototype,O._id=0,O._oid=0,O.is=function(t,e){e=lt.call(e);if(e=="finite")return!vt[L](+t);if(e=="array")return t instanceof Array;return e=="null"&&t===null||e==typeof t&&t!==null||e=="object"&&t===Object(t)||e=="array"&&Array.isArray&&Array.isArray(t)||dt.call(t).slice(8,-1).toLowerCase()==e},O.angle=function(t,e,i,n,s,r){if(s==null){var o=t-i,a=e-n;if(!o&&!a)return 0;return(180+G.atan2(-a,-o)*180/K+360)%360}return O.angle(t,e,s,r)-O.angle(i,n,s,r)},O.rad=function(t){return t%360*K/180},O.deg=function(t){return t*180/K%360},O.snapTo=function(t,e,i){i=O.is(i,"finite")?i:10;if(O.is(t,y)){var n=t.length;while(n--)if(X(t[n]-e)<=i)return t[n]}else{t=+t;var s=e%t;if(s<i)return e-s;if(s>t-i)return e-s+t}return e};var jt=O.createUUID=function(t,e){return function(){return"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(t,e).toUpperCase()}}(/[xy]/g,function(t){var e=G.random()*16|0,i=t=="x"?e:e&3|8;return i.toString(16)});O.setWindow=function(t){eve("raphael.setWindow",O,p.win,t),p.win=t,p.doc=p.win.document,O._engine.initWin&&O._engine.initWin(p.win)};var Wt=function(t){if(O.vml){var i=/^\s+|\s+$/g,n;try{var e=new ActiveXObject("htmlfile");e.write("<body>"),e.close(),n=e.body}catch(t){n=createPopup().document.body}var s=n.createTextRange();Wt=q(function(t){try{n.style.color=R(t).replace(i,_);var e=s.queryCommandValue("ForeColor");e=(e&255)<<16|e&65280|(e&16711680)>>>16;return"#"+("000000"+e.toString(16)).slice(-6)}catch(t){return"none"}})}else{var r=p.doc.createElement("i");r.title="Raphaël Colour Picker",r.style.display="none",p.doc.body.appendChild(r),Wt=q(function(t){r.style.color=t;return p.doc.defaultView.getComputedStyle(r,_).getPropertyValue("color")})}return Wt(t)},Yt=function(){return"hsb("+[this.h,this.s,this.b]+")"},qt=function(){return"hsl("+[this.h,this.s,this.l]+")"},Ut=function(){return this.hex},Vt=function(t,e,i){e==null&&O.is(t,"object")&&"r"in t&&"g"in t&&"b"in t&&(i=t.b,e=t.g,t=t.r);if(e==null&&O.is(t,ct)){var n=O.getRGB(t);t=n.r,e=n.g,i=n.b}if(t>1||e>1||i>1)t/=255,e/=255,i/=255;return[t,e,i]},Gt=function(t,e,i,n){t*=255,e*=255,i*=255;var s={r:t,g:e,b:i,hex:O.rgb(t,e,i),toString:Ut};O.is(n,"finite")&&(s.opacity=n);return s};O.color=function(t){var e;O.is(t,"object")&&"h"in t&&"s"in t&&"b"in t?(e=O.hsb2rgb(t),t.r=e.r,t.g=e.g,t.b=e.b,t.hex=e.hex):O.is(t,"object")&&"h"in t&&"s"in t&&"l"in t?(e=O.hsl2rgb(t),t.r=e.r,t.g=e.g,t.b=e.b,t.hex=e.hex):(O.is(t,"string")&&(t=O.getRGB(t)),O.is(t,"object")&&"r"in t&&"g"in t&&"b"in t?(e=O.rgb2hsl(t),t.h=e.h,t.s=e.s,t.l=e.l,e=O.rgb2hsb(t),t.v=e.b):(t={hex:"none"},t.r=t.g=t.b=t.h=t.s=t.v=t.l=-1)),t.toString=Ut;return t},O.hsb2rgb=function(t,e,i,n){this.is(t,"object")&&"h"in t&&"s"in t&&"b"in t&&(i=t.b,e=t.s,t=t.h,n=t.o),t*=360;var s,r,o,a,l;t=t%360/60,l=i*e,a=l*(1-X(t%2-1)),s=r=o=i-l,t=~~t,s+=[l,a,0,0,a,l][t],r+=[a,l,l,a,0,0][t],o+=[0,0,a,l,l,a][t];return Gt(s,r,o,n)},O.hsl2rgb=function(t,e,i,n){this.is(t,"object")&&"h"in t&&"s"in t&&"l"in t&&(i=t.l,e=t.s,t=t.h);if(t>1||e>1||i>1)t/=360,e/=100,i/=100;t*=360;var s,r,o,a,l;t=t%360/60,l=2*e*(i<.5?i:1-i),a=l*(1-X(t%2-1)),s=r=o=i-l/2,t=~~t,s+=[l,a,0,0,a,l][t],r+=[a,l,l,a,0,0][t],o+=[0,0,a,l,l,a][t];return Gt(s,r,o,n)},O.rgb2hsb=function(t,e,i){i=Vt(t,e,i),t=i[0],e=i[1],i=i[2];var n,s,r,o;r=x(t,e,i),o=r-T(t,e,i),n=o==0?null:r==t?(e-i)/o:r==e?(i-t)/o+2:(t-e)/o+4,n=(n+360)%6*60/360,s=o==0?0:o/r;return{h:n,s:s,b:r,toString:Yt}},O.rgb2hsl=function(t,e,i){i=Vt(t,e,i),t=i[0],e=i[1],i=i[2];var n,s,r,o,a,l;o=x(t,e,i),a=T(t,e,i),l=o-a,n=l==0?null:o==t?(e-i)/l:o==e?(i-t)/l+2:(t-e)/l+4,n=(n+360)%6*60/360,r=(o+a)/2,s=l==0?0:r<.5?l/(2*r):l/(2-2*r);return{h:n,s:s,l:r,toString:qt}},O._path2string=function(){return this.join(",").replace(Dt,"$1")};var Xt=O._preload=function(t,e){var i=p.doc.createElement("img");i.style.cssText="position:absolute;left:-9999em;top:-9999em",i.onload=function(){e.call(this),this.onload=null,p.doc.body.removeChild(this)},i.onerror=function(){p.doc.body.removeChild(this)},p.doc.body.appendChild(i),i.src=t};O.getRGB=q(function(t){if(!t||!!((t=R(t)).indexOf("-")+1))return{r:-1,g:-1,b:-1,hex:"none",error:1,toString:$};if(t=="none")return{r:-1,g:-1,b:-1,hex:"none",toString:$};!Tt[L](t.toLowerCase().substring(0,2))&&t.charAt()!="#"&&(t=Wt(t));var e,i,n,s,r,o,a,l=t.match(gt);if(l){l[2]&&(s=c(l[2].substring(5),16),n=c(l[2].substring(3,5),16),i=c(l[2].substring(1,3),16)),l[3]&&(s=c((o=l[3].charAt(3))+o,16),n=c((o=l[3].charAt(2))+o,16),i=c((o=l[3].charAt(1))+o,16)),l[4]&&(a=l[4][V](St),i=N(a[0]),a[0].slice(-1)=="%"&&(i*=2.55),n=N(a[1]),a[1].slice(-1)=="%"&&(n*=2.55),s=N(a[2]),a[2].slice(-1)=="%"&&(s*=2.55),l[1].toLowerCase().slice(0,4)=="rgba"&&(r=N(a[3])),a[3]&&a[3].slice(-1)=="%"&&(r/=100));if(l[5]){a=l[5][V](St),i=N(a[0]),a[0].slice(-1)=="%"&&(i*=2.55),n=N(a[1]),a[1].slice(-1)=="%"&&(n*=2.55),s=N(a[2]),a[2].slice(-1)=="%"&&(s*=2.55),(a[0].slice(-3)=="deg"||a[0].slice(-1)=="°")&&(i/=360),l[1].toLowerCase().slice(0,4)=="hsba"&&(r=N(a[3])),a[3]&&a[3].slice(-1)=="%"&&(r/=100);return O.hsb2rgb(i,n,s,r)}if(l[6]){a=l[6][V](St),i=N(a[0]),a[0].slice(-1)=="%"&&(i*=2.55),n=N(a[1]),a[1].slice(-1)=="%"&&(n*=2.55),s=N(a[2]),a[2].slice(-1)=="%"&&(s*=2.55),(a[0].slice(-3)=="deg"||a[0].slice(-1)=="°")&&(i/=360),l[1].toLowerCase().slice(0,4)=="hsla"&&(r=N(a[3])),a[3]&&a[3].slice(-1)=="%"&&(r/=100);return O.hsl2rgb(i,n,s,r)}l={r:i,g:n,b:s,toString:$},l.hex="#"+(16777216|s|n<<8|i<<16).toString(16).slice(1),O.is(r,"finite")&&(l.opacity=r);return l}return{r:-1,g:-1,b:-1,hex:"none",error:1,toString:$}},O),O.hsb=q(function(t,e,i){return O.hsb2rgb(t,e,i).hex}),O.hsl=q(function(t,e,i){return O.hsl2rgb(t,e,i).hex}),O.rgb=q(function(t,e,i){return"#"+(16777216|i|e<<8|t<<16).toString(16).slice(1)}),O.getColor=function(t){var e=this.getColor.start=this.getColor.start||{h:0,s:1,b:t||.75},i=this.hsb2rgb(e.h,e.s,e.b);e.h+=.075,e.h>1&&(e.h=0,e.s-=.2,e.s<=0&&(this.getColor.start={h:0,s:1,b:e.b}));return i.hex},O.getColor.reset=function(){delete this.start},O.parsePathString=function(t){if(!t)return null;var e=b(t);if(e.arr)return w(e.arr);var r={a:7,c:6,h:1,l:2,m:2,r:4,q:4,s:4,t:2,v:1,z:0},o=[];O.is(t,y)&&O.is(t[0],y)&&(o=w(t)),o.length||R(t).replace(Mt,function(t,e,i){var n=[],s=e.toLowerCase();i.replace(It,function(t,e){e&&n.push(+e)}),s=="m"&&n.length>2&&(o.push([e][U](n.splice(0,2))),s="l",e=e=="m"?"l":"L");if(s=="r")o.push([e][U](n));else while(n.length>=r[s]){o.push([e][U](n.splice(0,r[s])));if(!r[s])break}}),o.toString=O._path2string,e.arr=w(o);return o},O.parseTransformString=q(function(t){if(!t)return null;var e={r:3,s:4,t:2,m:6},r=[];O.is(t,y)&&O.is(t[0],y)&&(r=w(t)),r.length||R(t).replace(Pt,function(t,e,i){var n=[],s=lt.call(e);i.replace(It,function(t,e){e&&n.push(+e)}),r.push([e][U](n))}),r.toString=O._path2string;return r});var b=function(e){var i=b.ps=b.ps||{};i[e]?i[e].sleep=100:i[e]={sleep:100},setTimeout(function(){for(var t in i)i[L](t)&&t!=e&&(i[t].sleep--,!i[t].sleep&&delete i[t])});return i[e]};O.findDotsAtSegment=function(t,e,i,n,s,r,o,a,l){var c=1-l,h=D(c,3),u=D(c,2),d=l*l,f=d*l,p=h*t+u*3*l*i+c*3*l*l*s+f*o,m=h*e+u*3*l*n+c*3*l*l*r+f*a,g=t+2*l*(i-t)+d*(s-2*i+t),v=e+2*l*(n-e)+d*(r-2*n+e),y=i+2*l*(s-i)+d*(o-2*s+i),b=n+2*l*(r-n)+d*(a-2*r+n),w=c*t+l*i,x=c*e+l*n,_=c*s+l*o,k=c*r+l*a,C=90-G.atan2(g-y,v-b)*180/K;(g>y||v<b)&&(C+=180);return{x:p,y:m,m:{x:g,y:v},n:{x:y,y:b},start:{x:w,y:x},end:{x:_,y:k},alpha:C}},O.bezierBBox=function(t,e,i,n,s,r,o,a){O.is(t,"array")||(t=[t,e,i,n,s,r,o,a]);var l=ne.apply(null,t);return{x:l.min.x,y:l.min.y,x2:l.max.x,y2:l.max.y,width:l.max.x-l.min.x,height:l.max.y-l.min.y}},O.isPointInsideBBox=function(t,e,i){return e>=t.x&&e<=t.x2&&i>=t.y&&i<=t.y2},O.isBBoxIntersect=function(t,e){var i=O.isPointInsideBBox;return i(e,t.x,t.y)||i(e,t.x2,t.y)||i(e,t.x,t.y2)||i(e,t.x2,t.y2)||i(t,e.x,e.y)||i(t,e.x2,e.y)||i(t,e.x,e.y2)||i(t,e.x2,e.y2)||(t.x<e.x2&&t.x>e.x||e.x<t.x2&&e.x>t.x)&&(t.y<e.y2&&t.y>e.y||e.y<t.y2&&e.y>t.y)},O.pathIntersection=function(t,e){return u(t,e)},O.pathIntersectionNumber=function(t,e){return u(t,e,1)},O.isPointInsidePath=function(t,e,i){var n=O.pathBBox(t);return O.isPointInsideBBox(n,e,i)&&u(t,[["M",e,i],["H",n.x2+10]],1)%2==1},O._removedFactory=function(t){return function(){eve("raphael.log",null,"Raphaël: you are calling to method “"+t+"” of removed object",t)}};var Kt=O.pathBBox=function(t){var e=b(t);if(e.bbox)return e.bbox;if(!t)return{x:0,y:0,width:0,height:0,x2:0,y2:0};t=B(t);var i=0,n=0,s=[],r=[],o;for(var a=0,l=t.length;a<l;a++){o=t[a];if(o[0]=="M")i=o[1],n=o[2],s.push(i),r.push(n);else{var c=ne(i,n,o[1],o[2],o[3],o[4],o[5],o[6]);s=s[U](c.min.x,c.max.x),r=r[U](c.min.y,c.max.y),i=o[5],n=o[6]}}var h=T[g](0,s),u=T[g](0,r),d=x[g](0,s),f=x[g](0,r),p={x:h,y:u,x2:d,y2:f,width:d-h,height:f-u};e.bbox=Y(p);return p},w=function(t){var e=Y(t);e.toString=O._path2string;return e},Qt=O._pathToRelative=function(t){var e=b(t);if(e.rel)return w(e.rel);if(!O.is(t,y)||!O.is(t&&t[0],y))t=O.parsePathString(t);var i=[],n=0,s=0,r=0,o=0,a=0;t[0][0]=="M"&&(n=t[0][1],s=t[0][2],r=n,o=s,a++,i.push(["M",n,s]));for(var l=a,c=t.length;l<c;l++){var h=i[l]=[],u=t[l];if(u[0]!=lt.call(u[0])){h[0]=lt.call(u[0]);switch(h[0]){case"a":h[1]=u[1],h[2]=u[2],h[3]=u[3],h[4]=u[4],h[5]=u[5],h[6]=+(u[6]-n).toFixed(3),h[7]=+(u[7]-s).toFixed(3);break;case"v":h[1]=+(u[1]-s).toFixed(3);break;case"m":r=u[1],o=u[2];default:for(var d=1,f=u.length;d<f;d++)h[d]=+(u[d]-(d%2?n:s)).toFixed(3)}}else{h=i[l]=[],u[0]=="m"&&(r=u[1]+n,o=u[2]+s);for(var p=0,m=u.length;p<m;p++)i[l][p]=u[p]}var g=i[l].length;switch(i[l][0]){case"z":n=r,s=o;break;case"h":n+=+i[l][g-1];break;case"v":s+=+i[l][g-1];break;default:n+=+i[l][g-2],s+=+i[l][g-1]}}i.toString=O._path2string,e.rel=w(i);return i},Zt=O._pathToAbsolute=function(t){var e=b(t);if(e.abs)return w(e.abs);if(!O.is(t,y)||!O.is(t&&t[0],y))t=O.parsePathString(t);if(!t||!t.length)return[["M",0,0]];var i=[],n=0,s=0,r=0,o=0,a=0;t[0][0]=="M"&&(n=+t[0][1],s=+t[0][2],r=n,o=s,a++,i[0]=["M",n,s]);var l=t.length==3&&t[0][0]=="M"&&t[1][0].toUpperCase()=="R"&&t[2][0].toUpperCase()=="Z";for(var c,h,u=a,d=t.length;u<d;u++){i.push(c=[]),h=t[u];if(h[0]!=xt.call(h[0])){c[0]=xt.call(h[0]);switch(c[0]){case"A":c[1]=h[1],c[2]=h[2],c[3]=h[3],c[4]=h[4],c[5]=h[5],c[6]=+(h[6]+n),c[7]=+(h[7]+s);break;case"V":c[1]=+h[1]+s;break;case"H":c[1]=+h[1]+n;break;case"R":var f=[n,s][U](h.slice(1));for(var p=2,m=f.length;p<m;p++)f[p]=+f[p]+n,f[++p]=+f[p]+s;i.pop(),i=i[U](F(f,l));break;case"M":r=+h[1]+n,o=+h[2]+s;default:for(p=1,m=h.length;p<m;p++)c[p]=+h[p]+(p%2?n:s)}}else if(h[0]=="R")f=[n,s][U](h.slice(1)),i.pop(),i=i[U](F(f,l)),c=["R"][U](h.slice(-2));else for(var g=0,v=h.length;g<v;g++)c[g]=h[g];switch(c[0]){case"Z":n=r,s=o;break;case"H":n=c[1];break;case"V":s=c[1];break;case"M":r=c[c.length-2],o=c[c.length-1];default:n=c[c.length-2],s=c[c.length-1]}}i.toString=O._path2string,e.abs=w(i);return i},Jt=function(t,e,i,n){return[t,e,i,n,i,n]},te=function(t,e,i,n,s,r){var o=1/3,a=2/3;return[o*t+a*i,o*e+a*n,o*s+a*i,o*r+a*n,s,r]},ee=function(t,e,i,n,s,r,o,a,l,c){var h=K*120/180,u=K/180*(+s||0),d=[],f,p=q(function(t,e,i){var n=t*G.cos(i)-e*G.sin(i),s=t*G.sin(i)+e*G.cos(i);return{x:n,y:s}});if(!c){f=p(t,e,-u),t=f.x,e=f.y,f=p(a,l,-u),a=f.x,l=f.y;var O=G.cos(K/180*s),L=G.sin(K/180*s),m=(t-a)/2,g=(e-l)/2,v=m*m/(i*i)+g*g/(n*n);v>1&&(v=G.sqrt(v),i=v*i,n=v*n);var y=i*i,b=n*n,w=(r==o?-1:1)*G.sqrt(X((y*b-y*g*g-b*m*m)/(y*g*g+b*m*m))),x=w*i*g/n+(t+a)/2,_=w*-n*m/i+(e+l)/2,k=G.asin(((e-_)/n).toFixed(9)),C=G.asin(((l-_)/n).toFixed(9));k=t<x?K-k:k,C=a<x?K-C:C,k<0&&(k=K*2+k),C<0&&(C=K*2+C),o&&k>C&&(k=k-K*2),!o&&C>k&&(C=C-K*2)}else k=c[0],C=c[1],x=c[2],_=c[3];var S=C-k;if(X(S)>h){var T=C,R=a,z=l;C=k+h*(o&&C>k?1:-1),a=x+i*G.cos(C),l=_+n*G.sin(C),d=ee(a,l,i,n,s,0,o,R,z,[C,T,x,_])}S=C-k;var N=G.cos(k),B=G.sin(k),j=G.cos(C),W=G.sin(C),D=G.tan(S/4),M=4/3*i*D,P=4/3*n*D,I=[t,e],E=[t+M*B,e-P*N],F=[a+M*W,l-P*j],$=[a,l];E[0]=2*I[0]-E[0],E[1]=2*I[1]-E[1];if(c)return[E,F,$][U](d);d=[E,F,$][U](d).join()[V](",");var A=[];for(var H=0,Y=d.length;H<Y;H++)A[H]=H%2?p(d[H-1],d[H],u).y:p(d[H],d[H+1],u).x;return A},ie=function(t,e,i,n,s,r,o,a,l){var c=1-l;return{x:D(c,3)*t+D(c,2)*3*l*i+c*3*l*l*s+D(l,3)*o,y:D(c,3)*e+D(c,2)*3*l*n+c*3*l*l*r+D(l,3)*a}},ne=q(function(t,e,i,n,s,r,o,a){var l=s-2*i+t-(o-2*s+i),c=2*(i-t)-2*(s-i),h=t-i,u=(-c+G.sqrt(c*c-4*l*h))/2/l,d=(-c-G.sqrt(c*c-4*l*h))/2/l,f=[e,a],p=[t,o],m;X(u)>"1e12"&&(u=.5),X(d)>"1e12"&&(d=.5),u>0&&u<1&&(m=ie(t,e,i,n,s,r,o,a,u),p.push(m.x),f.push(m.y)),d>0&&d<1&&(m=ie(t,e,i,n,s,r,o,a,d),p.push(m.x),f.push(m.y)),l=r-2*n+e-(a-2*r+n),c=2*(n-e)-2*(r-n),h=e-n,u=(-c+G.sqrt(c*c-4*l*h))/2/l,d=(-c-G.sqrt(c*c-4*l*h))/2/l,X(u)>"1e12"&&(u=.5),X(d)>"1e12"&&(d=.5),u>0&&u<1&&(m=ie(t,e,i,n,s,r,o,a,u),p.push(m.x),f.push(m.y)),d>0&&d<1&&(m=ie(t,e,i,n,s,r,o,a,d),p.push(m.x),f.push(m.y));return{min:{x:T[g](0,p),y:T[g](0,f)},max:{x:x[g](0,p),y:x[g](0,f)}}}),B=O._path2curve=q(function(t,e){var i=!e&&b(t);if(!e&&i.curve)return w(i.curve);var r=Zt(t),o=e&&Zt(e),n={x:0,y:0,bx:0,by:0,X:0,Y:0,qx:null,qy:null},s={x:0,y:0,bx:0,by:0,X:0,Y:0,qx:null,qy:null},a=function(t,e){var i,n;if(!t)return["C",e.x,e.y,e.x,e.y,e.x,e.y];!(t[0]in{T:1,Q:1})&&(e.qx=e.qy=null);switch(t[0]){case"M":e.X=t[1],e.Y=t[2];break;case"A":t=["C"][U](ee[g](0,[e.x,e.y][U](t.slice(1))));break;case"S":i=e.x+(e.x-(e.bx||e.x)),n=e.y+(e.y-(e.by||e.y)),t=["C",i,n][U](t.slice(1));break;case"T":e.qx=e.x+(e.x-(e.qx||e.x)),e.qy=e.y+(e.y-(e.qy||e.y)),t=["C"][U](te(e.x,e.y,e.qx,e.qy,t[1],t[2]));break;case"Q":e.qx=t[1],e.qy=t[2],t=["C"][U](te(e.x,e.y,t[1],t[2],t[3],t[4]));break;case"L":t=["C"][U](Jt(e.x,e.y,t[1],t[2]));break;case"H":t=["C"][U](Jt(e.x,e.y,t[1],e.y));break;case"V":t=["C"][U](Jt(e.x,e.y,e.x,t[1]));break;case"Z":t=["C"][U](Jt(e.x,e.y,e.X,e.Y))}return t},l=function(t,e){if(t[e].length>7){t[e].shift();var i=t[e];while(i.length)t.splice(e++,0,["C"][U](i.splice(0,6)));t.splice(e,1),u=x(r.length,o&&o.length||0)}},c=function(t,e,i,n,s){t&&e&&t[s][0]=="M"&&e[s][0]!="M"&&(e.splice(s,0,["M",n.x,n.y]),i.bx=0,i.by=0,i.x=t[s][1],i.y=t[s][2],u=x(r.length,o&&o.length||0))};for(var h=0,u=x(r.length,o&&o.length||0);h<u;h++){r[h]=a(r[h],n),l(r,h),o&&(o[h]=a(o[h],s)),o&&l(o,h),c(r,o,n,s,h),c(o,r,s,n,h);var d=r[h],f=o&&o[h],p=d.length,m=o&&f.length;n.x=d[p-2],n.y=d[p-1],n.bx=N(d[p-4])||n.x,n.by=N(d[p-3])||n.y,s.bx=o&&(N(f[m-4])||s.x),s.by=o&&(N(f[m-3])||s.y),s.x=o&&f[m-2],s.y=o&&f[m-1]}o||(i.curve=w(r));return o?[r,o]:r},null,w),se=O._parseDots=q(function(t){var e=[];for(var i=0,n=t.length;i<n;i++){var s={},r=t[i].match(/^([^:]*):?([\d\.]*)/);s.color=O.getRGB(r[1]);if(s.color.error)return null;s.color=s.color.hex,r[2]&&(s.offset=r[2]+"%"),e.push(s)}for(i=1,n=e.length-1;i<n;i++)if(!e[i].offset){var o=N(e[i-1].offset||0),a=0;for(var l=i+1;l<n;l++)if(e[l].offset){a=e[l].offset;break}a||(a=100,l=n),a=N(a);var c=(a-o)/(l-i+1);for(;i<l;i++)o+=c,e[i].offset=o+"%"}return e}),re=O._tear=function(t,e){t==e.top&&(e.top=t.prev),t==e.bottom&&(e.bottom=t.next),t.next&&(t.next.prev=t.prev),t.prev&&(t.prev.next=t.next)},oe=O._tofront=function(t,e){e.top!==t&&(re(t,e),t.next=null,t.prev=e.top,e.top.next=t,e.top=t)},ae=O._toback=function(t,e){e.bottom!==t&&(re(t,e),t.next=e.bottom,t.prev=null,e.bottom.prev=t,e.bottom=t)},le=O._insertafter=function(t,e,i){re(t,i),e==i.top&&(i.top=t),e.next&&(e.next.prev=t),t.next=e.next,t.prev=e,e.next=t},ce=O._insertbefore=function(t,e,i){re(t,i),e==i.bottom&&(i.bottom=t),e.prev&&(e.prev.next=t),t.prev=e.prev,e.prev=t,t.next=e},he=O.toMatrix=function(t,e){var i=Kt(t),n={_:{transform:_},getBBox:function(){return i}};de(n,e);return n.matrix},ue=O.transformPath=function(t,e){return zt(t,he(t,e))},de=O._extractTransform=function(t,e){if(e==null)return t._.transform;e=R(e).replace(/\.{3}|\u2026/g,t._.transform||_);var i=O.parseTransformString(e),n=0,s=0,r=0,o=1,a=1,l=t._,c=new H;l.transform=i||[];if(i)for(var h=0,u=i.length;h<u;h++){var d=i[h],f=d.length,p=R(d[0]).toLowerCase(),m=d[0]!=p,g=m?c.invert():0,v,y,b,w,x;p=="t"&&f==3?m?(v=g.x(0,0),y=g.y(0,0),b=g.x(d[1],d[2]),w=g.y(d[1],d[2]),c.translate(b-v,w-y)):c.translate(d[1],d[2]):p=="r"?f==2?(x=x||t.getBBox(1),c.rotate(d[1],x.x+x.width/2,x.y+x.height/2),n+=d[1]):f==4&&(m?(b=g.x(d[2],d[3]),w=g.y(d[2],d[3]),c.rotate(d[1],b,w)):c.rotate(d[1],d[2],d[3]),n+=d[1]):p=="s"?f==2||f==3?(x=x||t.getBBox(1),c.scale(d[1],d[f-1],x.x+x.width/2,x.y+x.height/2),o*=d[1],a*=d[f-1]):f==5&&(m?(b=g.x(d[3],d[4]),w=g.y(d[3],d[4]),c.scale(d[1],d[2],b,w)):c.scale(d[1],d[2],d[3],d[4]),o*=d[1],a*=d[2]):p=="m"&&f==7&&c.add(d[1],d[2],d[3],d[4],d[5],d[6]),l.dirtyT=1,t.matrix=c}t.matrix=c,l.sx=o,l.sy=a,l.deg=n,l.dx=s=c.e,l.dy=r=c.f,o==1&&a==1&&!n&&l.bbox?(l.bbox.x+=+s,l.bbox.y+=+r):l.dirtyT=1},fe=function(t){var e=t[0];switch(e.toLowerCase()){case"t":return[e,0,0];case"m":return[e,1,0,0,1,0,0];case"r":return t.length==4?[e,0,t[2],t[3]]:[e,0];case"s":return t.length==5?[e,1,1,t[3],t[4]]:t.length==3?[e,1,1]:[e,1]}},pe=O._equaliseTransform=function(t,e){e=R(e).replace(/\.{3}|\u2026/g,t),t=O.parseTransformString(t)||[],e=O.parseTransformString(e)||[];var i=x(t.length,e.length),n=[],s=[],r=0,o,a,l,c;for(;r<i;r++){l=t[r]||fe(e[r]),c=e[r]||fe(l);if(l[0]!=c[0]||l[0].toLowerCase()=="r"&&(l[2]!=c[2]||l[3]!=c[3])||l[0].toLowerCase()=="s"&&(l[3]!=c[3]||l[4]!=c[4]))return;n[r]=[],s[r]=[];for(o=0,a=x(l.length,c.length);o<a;o++)o in l&&(n[r][o]=l[o]),o in c&&(s[r][o]=c[o])}return{from:n,to:s}};O._getContainer=function(t,e,i,n){var s;s=n==null&&!O.is(t,"object")?p.doc.getElementById(t):t;if(s!=null){if(s.tagName)return e==null?{container:s,width:s.style.pixelWidth||s.offsetWidth,height:s.style.pixelHeight||s.offsetHeight}:{container:s,width:e,height:i};return{container:1,x:t,y:e,width:i,height:n}}},O.pathToRelative=Qt,O._engine={},O.path2curve=B,O.matrix=function(t,e,i,n,s,r){return new H(t,e,i,n,s,r)},function(t){function s(t){var e=G.sqrt(r(t));t[0]&&(t[0]/=e),t[1]&&(t[1]/=e)}function r(t){return t[0]*t[0]+t[1]*t[1]}t.add=function(t,e,i,n,s,r){var o=[[],[],[]],a=[[this.a,this.c,this.e],[this.b,this.d,this.f],[0,0,1]],l=[[t,i,s],[e,n,r],[0,0,1]],c,h,u,d;t&&t instanceof H&&(l=[[t.a,t.c,t.e],[t.b,t.d,t.f],[0,0,1]]);for(c=0;c<3;c++)for(h=0;h<3;h++){d=0;for(u=0;u<3;u++)d+=a[c][u]*l[u][h];o[c][h]=d}this.a=o[0][0],this.b=o[1][0],this.c=o[0][1],this.d=o[1][1],this.e=o[0][2],this.f=o[1][2]},t.invert=function(){var t=this,e=t.a*t.d-t.b*t.c;return new H(t.d/e,-t.b/e,-t.c/e,t.a/e,(t.c*t.f-t.d*t.e)/e,(t.b*t.e-t.a*t.f)/e)},t.clone=function(){return new H(this.a,this.b,this.c,this.d,this.e,this.f)},t.translate=function(t,e){this.add(1,0,0,1,t,e)},t.scale=function(t,e,i,n){e==null&&(e=t),(i||n)&&this.add(1,0,0,1,i,n),this.add(t,0,0,e,0,0),(i||n)&&this.add(1,0,0,1,-i,-n)},t.rotate=function(t,e,i){t=O.rad(t),e=e||0,i=i||0;var n=+G.cos(t).toFixed(9),s=+G.sin(t).toFixed(9);this.add(n,s,-s,n,e,i),this.add(1,0,0,1,-e,-i)},t.x=function(t,e){return t*this.a+e*this.c+this.e},t.y=function(t,e){return t*this.b+e*this.d+this.f},t.get=function(t){return+this[R.fromCharCode(97+t)].toFixed(4)},t.toString=function(){return O.svg?"matrix("+[this.get(0),this.get(1),this.get(2),this.get(3),this.get(4),this.get(5)].join()+")":[this.get(0),this.get(2),this.get(1),this.get(3),0,0].join()},t.toFilter=function(){return"progid:DXImageTransform.Microsoft.Matrix(M11="+this.get(0)+", M12="+this.get(2)+", M21="+this.get(1)+", M22="+this.get(3)+", Dx="+this.get(4)+", Dy="+this.get(5)+", sizingmethod='auto expand')"},t.offset=function(){return[this.e.toFixed(4),this.f.toFixed(4)]},t.split=function(){var t={};t.dx=this.e,t.dy=this.f;var e=[[this.a,this.c],[this.b,this.d]];t.scalex=G.sqrt(r(e[0])),s(e[0]),t.shear=e[0][0]*e[1][0]+e[0][1]*e[1][1],e[1]=[e[1][0]-e[0][0]*t.shear,e[1][1]-e[0][1]*t.shear],t.scaley=G.sqrt(r(e[1])),s(e[1]),t.shear/=t.scaley;var i=-e[0][1],n=e[1][1];n<0?(t.rotate=O.deg(G.acos(n)),i<0&&(t.rotate=360-t.rotate)):t.rotate=O.deg(G.asin(i)),t.isSimple=!+t.shear.toFixed(9)&&(t.scalex.toFixed(9)==t.scaley.toFixed(9)||!t.rotate),t.isSuperSimple=!+t.shear.toFixed(9)&&t.scalex.toFixed(9)==t.scaley.toFixed(9)&&!t.rotate,t.noRotation=!+t.shear.toFixed(9)&&!t.rotate;return t},t.toTransformString=function(t){var e=t||this[V]();if(e.isSimple){e.scalex=+e.scalex.toFixed(4),e.scaley=+e.scaley.toFixed(4),e.rotate=+e.rotate.toFixed(4);return(e.dx||e.dy?"t"+[e.dx,e.dy]:_)+(e.scalex!=1||e.scaley!=1?"s"+[e.scalex,e.scaley,0,0]:_)+(e.rotate?"r"+[e.rotate,0,0]:_)}return"m"+[this.get(0),this.get(1),this.get(2),this.get(3),this.get(4),this.get(5)]}}(H.prototype);var me=navigator.userAgent.match(/Version\/(.*?)\s/)||navigator.userAgent.match(/Chrome\/(\d+)/);navigator.vendor=="Apple Computer, Inc."&&(me&&me[1]<4||navigator.platform.slice(0,2)=="iP")||navigator.vendor=="Google Inc."&&me&&me[1]<8?t.safari=function(){var t=this.rect(-99,-99,this.width+99,this.height+99).attr({stroke:"none"});setTimeout(function(){t.remove()})}:t.safari=At;var ge=function(){this.returnValue=!1},ve=function(){return this.originalEvent.preventDefault()},ye=function(){this.cancelBubble=!0},be=function(){return this.originalEvent.stopPropagation()},we=function(){if(p.doc.addEventListener)return function(l,c,h,u){var t=rt&&at[c]?at[c]:c,e=function(t){var e=p.doc.documentElement.scrollTop||p.doc.body.scrollTop,i=p.doc.documentElement.scrollLeft||p.doc.body.scrollLeft,n=t.clientX+i,s=t.clientY+e;if(rt&&at[L](c))for(var r=0,o=t.targetTouches&&t.targetTouches.length;r<o;r++)if(t.targetTouches[r].target==l){var a=t;t=t.targetTouches[r],t.originalEvent=a,t.preventDefault=ve,t.stopPropagation=be;break}return h.call(u,t,n,s)};l.addEventListener(t,e,!1);return function(){l.removeEventListener(t,e,!1);return!0}};if(p.doc.attachEvent)return function(t,e,r,o){var i=function(t){t=t||p.win.event;var e=p.doc.documentElement.scrollTop||p.doc.body.scrollTop,i=p.doc.documentElement.scrollLeft||p.doc.body.scrollLeft,n=t.clientX+i,s=t.clientY+e;t.preventDefault=t.preventDefault||ge,t.stopPropagation=t.stopPropagation||ye;return r.call(o,t,n,s)};t.attachEvent("on"+e,i);var n=function(){t.detachEvent("on"+e,i);return!0};return n}}(),m=[],xe=function(t){var e=t.clientX,i=t.clientY,n=p.doc.documentElement.scrollTop||p.doc.body.scrollTop,s=p.doc.documentElement.scrollLeft||p.doc.body.scrollLeft,r,o=m.length;while(o--){r=m[o];if(rt){var a=t.touches.length,l;while(a--){l=t.touches[a];if(l.identifier==r.el._drag.id){e=l.clientX,i=l.clientY,(t.originalEvent?t.originalEvent:t).preventDefault();break}}}else t.preventDefault();var c=r.el.node,h,u=c.nextSibling,d=c.parentNode,f=c.style.display;p.win.opera&&d.removeChild(c),c.style.display="none",h=r.el.paper.getElementByPoint(e,i),c.style.display=f,p.win.opera&&(u?d.insertBefore(c,u):d.appendChild(c)),h&&eve("raphael.drag.over."+r.el.id,r.el,h),e+=s,i+=n,eve("raphael.drag.move."+r.el.id,r.move_scope||r.el,e-r.el._drag.x,i-r.el._drag.y,e,i,t)}},_e=function(t){O.unmousemove(xe).unmouseup(_e);var e=m.length,i;while(e--)i=m[e],i.el._drag={},eve("raphael.drag.end."+i.el.id,i.end_scope||i.start_scope||i.move_scope||i.el,t);m=[]},r=O.el={};for(var ke=ot.length;ke--;)(function(n){O[n]=r[n]=function(t,e){O.is(t,"function")&&(this.events=this.events||[],this.events.push({name:n,f:t,unbind:we(this.shape||this.node||p.doc,n,t,e||this)}));return this},O["un"+n]=r["un"+n]=function(t){var e=this.events||[],i=e.length;while(i--)if(e[i].name==n&&e[i].f==t){e[i].unbind(),e.splice(i,1),!e.length&&delete this.events;return this}return this}})(ot[ke]);r.data=function(t,e){var i=s[this.id]=s[this.id]||{};if(arguments.length==1){if(O.is(t,"object")){for(var n in t)t[L](n)&&this.data(n,t[n]);return this}eve("raphael.data.get."+this.id,this,i[t],t);return i[t]}i[t]=e,eve("raphael.data.set."+this.id,this,e,t);return this},r.removeData=function(t){t==null?s[this.id]={}:s[this.id]&&delete s[this.id][t];return this},r.hover=function(t,e,i,n){return this.mouseover(t,i).mouseout(e,n||i)},r.unhover=function(t,e){return this.unmouseover(t).unmouseout(e)};var e=[];r.drag=function(n,s,r,o,a,l){function t(t){(t.originalEvent||t).preventDefault();var e=p.doc.documentElement.scrollTop||p.doc.body.scrollTop,i=p.doc.documentElement.scrollLeft||p.doc.body.scrollLeft;this._drag.x=t.clientX+i,this._drag.y=t.clientY+e,this._drag.id=t.identifier,!m.length&&O.mousemove(xe).mouseup(_e),m.push({el:this,move_scope:o,start_scope:a,end_scope:l}),s&&eve.on("raphael.drag.start."+this.id,s),n&&eve.on("raphael.drag.move."+this.id,n),r&&eve.on("raphael.drag.end."+this.id,r),eve("raphael.drag.start."+this.id,a||o||this,t.clientX+i,t.clientY+e,t)}this._drag={},e.push({el:this,start:t}),this.mousedown(t);return this},r.onDragOver=function(t){t?eve.on("raphael.drag.over."+this.id,t):eve.unbind("raphael.drag.over."+this.id)},r.undrag=function(){var t=e.length;while(t--)e[t].el==this&&(this.unmousedown(e[t].start),e.splice(t,1),eve.unbind("raphael.drag.*."+this.id));!e.length&&O.unmousemove(xe).unmouseup(_e)},t.circle=function(t,e,i){var n=O._engine.circle(this,t||0,e||0,i||0);this.__set__&&this.__set__.push(n);return n},t.rect=function(t,e,i,n,s){var r=O._engine.rect(this,t||0,e||0,i||0,n||0,s||0);this.__set__&&this.__set__.push(r);return r},t.ellipse=function(t,e,i,n){var s=O._engine.ellipse(this,t||0,e||0,i||0,n||0);this.__set__&&this.__set__.push(s);return s},t.path=function(t){t&&!O.is(t,ct)&&!O.is(t[0],y)&&(t+=_);var e=O._engine.path(O.format[g](O,arguments),this);this.__set__&&this.__set__.push(e);return e},t.image=function(t,e,i,n,s){var r=O._engine.image(this,t||"about:blank",e||0,i||0,n||0,s||0);this.__set__&&this.__set__.push(r);return r},t.text=function(t,e,i){var n=O._engine.text(this,t||0,e||0,R(i));this.__set__&&this.__set__.push(n);return n},t.set=function(t){!O.is(t,"array")&&(t=Array.prototype.splice.call(arguments,0,arguments.length));var e=new l(t);this.__set__&&this.__set__.push(e);return e},t.setStart=function(t){this.__set__=t||this.set()},t.setFinish=function(t){var e=this.__set__;delete this.__set__;return e},t.setSize=function(t,e){return O._engine.setSize.call(this,t,e)},t.setViewBox=function(t,e,i,n,s){return O._engine.setViewBox.call(this,t,e,i,n,s)},t.top=t.bottom=null,t.raphael=O;var Ce=function(t){var e=t.getBoundingClientRect(),i=t.ownerDocument,n=i.body,s=i.documentElement,r=s.clientTop||n.clientTop||0,o=s.clientLeft||n.clientLeft||0,a=e.top+(p.win.pageYOffset||s.scrollTop||n.scrollTop)-r,l=e.left+(p.win.pageXOffset||s.scrollLeft||n.scrollLeft)-o;return{y:a,x:l}};t.getElementByPoint=function(t,e){var i=this,n=i.canvas,s=p.doc.elementFromPoint(t,e);if(p.win.opera&&s.tagName=="svg"){var r=Ce(n),o=n.createSVGRect();o.x=t-r.x,o.y=e-r.y,o.width=o.height=1;var a=n.getIntersectionList(o,null);a.length&&(s=a[a.length-1])}if(!s)return null;while(s.parentNode&&s!=n.parentNode&&!s.raphael)s=s.parentNode;s==i.canvas.parentNode&&(s=n),s=s&&s.raphael?i.getById(s.raphaelid):null;return s},t.getById=function(t){var e=this.bottom;while(e){if(e.id==t)return e;e=e.next}return null},t.forEach=function(t,e){var i=this.bottom;while(i){if(t.call(e,i)===!1)return this;i=i.next}return this},t.getElementsByPoint=function(e,i){var n=this.set();this.forEach(function(t){t.isPointInside(e,i)&&n.push(t)});return n},r.isPointInside=function(t,e){var i=this.realPath=this.realPath||Rt[this.type](this);return O.isPointInsidePath(i,t,e)},r.getBBox=function(t){if(this.removed)return{};var e=this._;if(t){if(e.dirty||!e.bboxwt)this.realPath=Rt[this.type](this),e.bboxwt=Kt(this.realPath),e.bboxwt.toString=a,e.dirty=0;return e.bboxwt}if(e.dirty||e.dirtyT||!e.bbox){if(e.dirty||!this.realPath)e.bboxwt=0,this.realPath=Rt[this.type](this);e.bbox=Kt(zt(this.realPath,this.matrix)),e.bbox.toString=a,e.dirty=e.dirtyT=0}return e.bbox},r.clone=function(){if(this.removed)return null;var t=this.paper[this.type]().attr(this.attr());this.__set__&&this.__set__.push(t);return t},r.glow=function(t){if(this.type=="text")return null;t=t||{};var e={width:(t.width||10)+(+this.attr("stroke-width")||1),fill:t.fill||!1,opacity:t.opacity||.5,offsetx:t.offsetx||0,offsety:t.offsety||0,color:t.color||"#000"},i=e.width/2,n=this.paper,s=n.set(),r=this.realPath||Rt[this.type](this);r=this.matrix?zt(r,this.matrix):r;for(var o=1;o<i+1;o++)s.push(n.path(r).attr({stroke:e.color,fill:e.fill?e.color:"none","stroke-linejoin":"round","stroke-linecap":"round","stroke-width":+(e.width/i*o).toFixed(3),opacity:+(e.opacity/i).toFixed(3)}));return s.insertBefore(this).translate(e.offsetx,e.offsety)};var Se={},Te=function(t,e,i,n,s,r,o,a,l){return l==null?S(t,e,i,n,s,r,o,a):O.findDotsAtSegment(t,e,i,n,s,r,o,a,I(t,e,i,n,s,r,o,a,l))},De=function(f,p){return function(t,e,i){t=B(t);var n,s,r,o,a="",l={},c,h=0;for(var u=0,d=t.length;u<d;u++){r=t[u];if(r[0]=="M")n=+r[1],s=+r[2];else{o=Te(n,s,r[1],r[2],r[3],r[4],r[5],r[6]);if(h+o>e){if(p&&!l.start){c=Te(n,s,r[1],r[2],r[3],r[4],r[5],r[6],e-h),a+=["C"+c.start.x,c.start.y,c.m.x,c.m.y,c.x,c.y];if(i)return a;l.start=a,a=["M"+c.x,c.y+"C"+c.n.x,c.n.y,c.end.x,c.end.y,r[5],r[6]].join(),h+=o,n=+r[5],s=+r[6];continue}if(!f&&!p){c=Te(n,s,r[1],r[2],r[3],r[4],r[5],r[6],e-h);return{x:c.x,y:c.y,alpha:c.alpha}}}h+=o,n=+r[5],s=+r[6]}a+=r.shift()+r}l.end=a,c=f?h:p?l:O.findDotsAtSegment(n,s,r[0],r[1],r[2],r[3],r[4],r[5],1),c.alpha&&(c={x:c.x,y:c.y,alpha:c.alpha});return c}},Me=De(1),Pe=De(),Ie=De(0,1);O.getTotalLength=Me,O.getPointAtLength=Pe,O.getSubpath=function(t,e,i){if(this.getTotalLength(t)-i<1e-6)return Ie(t,e).end;var n=Ie(t,i,1);return e?Ie(n,e).end:n},r.getTotalLength=function(){if(this.type=="path"){if(this.node.getTotalLength)return this.node.getTotalLength();return Me(this.attrs.path)}},r.getPointAtLength=function(t){if(this.type=="path")return Pe(this.attrs.path,t)},r.getSubpath=function(t,e){if(this.type=="path")return O.getSubpath(this.attrs.path,t,e)};var i=O.easing_formulas={linear:function(t){return t},"<":function(t){return D(t,1.7)},">":function(t){return D(t,.48)},"<>":function(t){var e=.48-t/1.04,i=G.sqrt(.1734+e*e),n=i-e,s=D(X(n),1/3)*(n<0?-1:1),r=-i-e,o=D(X(r),1/3)*(r<0?-1:1),a=s+o+.5;return(1-a)*3*a*a+a*a*a},backIn:function(t){var e=1.70158;return t*t*((e+1)*t-e)},backOut:function(t){t=t-1;var e=1.70158;return t*t*((e+1)*t+e)+1},elastic:function(t){if(t==!!t)return t;return D(2,-10*t)*G.sin((t-.075)*2*K/.3)+1},bounce:function(t){var e=7.5625,i=2.75,n;t<1/i?n=e*t*t:t<2/i?(t-=1.5/i,n=e*t*t+.75):t<2.5/i?(t-=2.25/i,n=e*t*t+.9375):(t-=2.625/i,n=e*t*t+.984375);return n}};i.easeIn=i["ease-in"]=i["<"],i.easeOut=i["ease-out"]=i[">"],i.easeInOut=i["ease-in-out"]=i["<>"],i["back-in"]=i.backIn,i["back-out"]=i.backOut;var j=[],Ee=window.requestAnimationFrame||window.webkitRequestAnimationFrame||window.mozRequestAnimationFrame||window.oRequestAnimationFrame||window.msRequestAnimationFrame||function(t){setTimeout(t,16)},Fe=function(){var t=+new Date,e=0;for(;e<j.length;e++){var i=j[e];if(i.el.removed||i.paused)continue;var n=t-i.start,s=i.ms,r=i.easing,o=i.from,a=i.diff,l=i.to,c=i.t,h=i.el,u={},d,f={},p;i.initstatus?(n=(i.initstatus*i.anim.top-i.prev)/(i.percent-i.prev)*s,i.status=i.initstatus,delete i.initstatus,i.stop&&j.splice(e--,1)):i.status=(i.prev+(i.percent-i.prev)*(n/s))/i.anim.top;if(n<0)continue;if(n<s){var m=r(n/s);for(var g in o)if(o[L](g)){switch(kt[g]){case z:d=+o[g]+m*s*a[g];break;case"colour":d="rgb("+[$e(bt(o[g].r+m*s*a[g].r)),$e(bt(o[g].g+m*s*a[g].g)),$e(bt(o[g].b+m*s*a[g].b))].join(",")+")";break;case"path":d=[];for(var v=0,y=o[g].length;v<y;v++){d[v]=[o[g][v][0]];for(var b=1,w=o[g][v].length;b<w;b++)d[v][b]=+o[g][v][b]+m*s*a[g][v][b];d[v]=d[v].join(C)}d=d.join(C);break;case"transform":if(a[g].real){d=[];for(v=0,y=o[g].length;v<y;v++){d[v]=[o[g][v][0]];for(b=1,w=o[g][v].length;b<w;b++)d[v][b]=o[g][v][b]+m*s*a[g][v][b]}}else{var x=function(t){return+o[g][t]+m*s*a[g][t]};d=[["m",x(0),x(1),x(2),x(3),x(4),x(5)]]}break;case"csv":if(g=="clip-rect"){d=[],v=4;while(v--)d[v]=+o[g][v]+m*s*a[g][v]}break;default:var _=[][U](o[g]);d=[],v=h.paper.customAttributes[g].length;while(v--)d[v]=+_[v]+m*s*a[g][v]}u[g]=d}h.attr(u),function(t,e,i){setTimeout(function(){eve("raphael.anim.frame."+t,e,i)})}(h.id,h,i.anim)}else{(function(t,e,i){setTimeout(function(){eve("raphael.anim.frame."+e.id,e,i),eve("raphael.anim.finish."+e.id,e,i),O.is(t,"function")&&t.call(e)})})(i.callback,h,i.anim),h.attr(l),j.splice(e--,1);if(i.repeat>1&&!i.next){for(p in l)l[L](p)&&(f[p]=i.totalOrigin[p]);i.el.attr(f),k(i.anim,i.el,i.anim.percents[0],null,i.totalOrigin,i.repeat-1)}i.next&&!i.stop&&k(i.anim,i.el,i.next,null,i.totalOrigin,i.repeat)}}O.svg&&h&&h.paper&&h.paper.safari(),j.length&&Ee(Fe)},$e=function(t){return t>255?255:t<0?0:t};r.animateWith=function(t,e,i,n,s,r){var o=this;if(o.removed){r&&r.call(o);return o}var a=i instanceof d?i:O.animation(i,n,s,r),l,c;k(a,o,a.percents[0],null,o.attr());for(var h=0,u=j.length;h<u;h++)if(j[h].anim==e&&j[h].el==t){j[u-1].start=j[h].start;break}return o},r.onAnimation=function(t){t?eve.on("raphael.anim.frame."+this.id,t):eve.unbind("raphael.anim.frame."+this.id);return this},d.prototype.delay=function(t){var e=new d(this.anim,this.ms);e.times=this.times,e.del=+t||0;return e},d.prototype.repeat=function(t){var e=new d(this.anim,this.ms);e.del=this.del,e.times=G.floor(x(t,0))||1;return e},O.animation=function(t,e,i,n){if(t instanceof d)return t;if(O.is(i,"function")||!i)n=n||i||null,i=null;t=Object(t),e=+e||0;var s={},r,o;for(o in t)t[L](o)&&N(o)!=o&&N(o)+"%"!=o&&(r=!0,s[o]=t[o]);if(!r)return new d(t,e);i&&(s.easing=i),n&&(s.callback=n);return new d({100:s},e)},r.animate=function(t,e,i,n){var s=this;if(s.removed){n&&n.call(s);return s}var r=t instanceof d?t:O.animation(t,e,i,n);k(r,s,r.percents[0],null,s.attr());return s},r.setTime=function(t,e){t&&e!=null&&this.status(t,T(e,t.ms)/t.ms);return this},r.status=function(t,e){var i=[],n=0,s,r;if(e!=null){k(t,this,-1,T(e,1));return this}s=j.length;for(;n<s;n++){r=j[n];if(r.el.id==this.id&&(!t||r.anim==t)){if(t)return r.status;i.push({anim:r.anim,status:r.status})}}if(t)return 0;return i},r.pause=function(t){for(var e=0;e<j.length;e++)j[e].el.id==this.id&&(!t||j[e].anim==t)&&eve("raphael.anim.pause."+this.id,this,j[e].anim)!==!1&&(j[e].paused=!0);return this},r.resume=function(t){for(var e=0;e<j.length;e++)if(j[e].el.id==this.id&&(!t||j[e].anim==t)){var i=j[e];eve("raphael.anim.resume."+this.id,this,i.anim)!==!1&&(delete i.paused,this.status(i.anim,i.status))}return this},r.stop=function(t){for(var e=0;e<j.length;e++)j[e].el.id==this.id&&(!t||j[e].anim==t)&&eve("raphael.anim.stop."+this.id,this,j[e].anim)!==!1&&j.splice(e--,1);return this},eve.on("raphael.remove",o),eve.on("raphael.clear",o),r.toString=function(){return"Raphaël’s object"};var l=function(t){this.items=[],this.length=0,this.type="set";if(t)for(var e=0,i=t.length;e<i;e++)t[e]&&(t[e].constructor==r.constructor||t[e].constructor==l)&&(this[this.items.length]=this.items[this.items.length]=t[e],this.length++)},n=l.prototype;n.push=function(){var t,e;for(var i=0,n=arguments.length;i<n;i++)t=arguments[i],t&&(t.constructor==r.constructor||t.constructor==l)&&(e=this.items.length,this[e]=this.items[e]=t,this.length++);return this},n.pop=function(){this.length&&delete this[this.length--];return this.items.pop()},n.forEach=function(t,e){for(var i=0,n=this.items.length;i<n;i++)if(t.call(e,this.items[i],i)===!1)return this;return this};for(var Ae in r)r[L](Ae)&&(n[Ae]=function(i){return function(){var e=arguments;return this.forEach(function(t){t[i][g](t,e)})}}(Ae));n.attr=function(t,e){if(t&&O.is(t,y)&&O.is(t[0],"object"))for(var i=0,n=t.length;i<n;i++)this.items[i].attr(t[i]);else for(var s=0,r=this.items.length;s<r;s++)this.items[s].attr(t,e);return this},n.clear=function(){while(this.length)this.pop()},n.splice=function(t,e,i){t=t<0?x(this.length+t,0):t,e=x(0,T(this.length-t,e));var n=[],s=[],r=[],o;for(o=2;o<arguments.length;o++)r.push(arguments[o]);for(o=0;o<e;o++)s.push(this[t+o]);for(;o<this.length-t;o++)n.push(this[t+o]);var a=r.length;for(o=0;o<a+n.length;o++)this.items[t+o]=this[t+o]=o<a?r[o]:n[o-a];o=this.items.length=this.length-=e-a;while(this[o])delete this[o++];return new l(s)},n.exclude=function(t){for(var e=0,i=this.length;e<i;e++)if(this[e]==t){this.splice(e,1);return!0}},n.animate=function(t,e,i,n){(O.is(i,"function")||!i)&&(n=i||null);var s=this.items.length,r=s,o,a=this,l;if(!s)return this;n&&(l=function(){!--s&&n.call(a)}),i=O.is(i,ct)?i:l;var c=O.animation(t,e,i,l);o=this.items[--r].animate(c);while(r--)this.items[r]&&!this.items[r].removed&&this.items[r].animateWith(o,c,c);return this},n.insertAfter=function(t){var e=this.items.length;while(e--)this.items[e].insertAfter(t);return this},n.getBBox=function(){var t=[],e=[],i=[],n=[];for(var s=this.items.length;s--;)if(!this.items[s].removed){var r=this.items[s].getBBox();t.push(r.x),e.push(r.y),i.push(r.x+r.width),n.push(r.y+r.height)}t=T[g](0,t),e=T[g](0,e),i=x[g](0,i),n=x[g](0,n);return{x:t,y:e,x2:i,y2:n,width:i-t,height:n-e}},n.clone=function(t){t=new l;for(var e=0,i=this.items.length;e<i;e++)t.push(this.items[e].clone());return t},n.toString=function(){return"Raphaël‘s set"},O.registerFont=function(t){if(!t.face)return t;this.fonts=this.fonts||{};var e={w:t.w,face:{},glyphs:{}},i=t.face["font-family"];for(var n in t.face)t.face[L](n)&&(e.face[n]=t.face[n]);this.fonts[i]?this.fonts[i].push(e):this.fonts[i]=[e];if(!t.svg){e.face["units-per-em"]=c(t.face["units-per-em"],10);for(var s in t.glyphs)if(t.glyphs[L](s)){var r=t.glyphs[s];e.glyphs[s]={w:r.w,k:{},d:r.d&&"M"+r.d.replace(/[mlcxtrv]/g,function(t){return{l:"L",c:"C",x:"z",t:"m",r:"l",v:"c"}[t]||"M"})+"z"};if(r.k)for(var o in r.k)r[L](o)&&(e.glyphs[s].k[o]=r.k[o])}}return t},t.getFont=function(t,e,i,n){n=n||"normal",i=i||"normal",e=+e||{normal:400,bold:700,lighter:300,bolder:800}[e]||400;if(!!O.fonts){var s=O.fonts[t];if(!s){var r=new RegExp("(^|\\s)"+t.replace(/[^\w\d\s+!~.:_-]/g,_)+"(\\s|$)","i");for(var o in O.fonts)if(O.fonts[L](o)&&r.test(o)){s=O.fonts[o];break}}var a;if(s)for(var l=0,c=s.length;l<c;l++){a=s[l];if(a.face["font-weight"]==e&&(a.face["font-style"]==i||!a.face["font-style"])&&a.face["font-stretch"]==n)break}return a}},t.print=function(t,e,i,n,s,r,o){r=r||"middle",o=x(T(o||0,1),-1);var a=R(i)[V](_),l=0,c=0,h=_,u;O.is(n,i)&&(n=this.getFont(n));if(n){u=(s||16)/n.face["units-per-em"];var d=n.face.bbox[V](Z),f=+d[0],p=d[3]-d[1],m=0,g=+d[1]+(r=="baseline"?p+ +n.face.descent:p/2);for(var v=0,y=a.length;v<y;v++){if(a[v]=="\n")l=0,w=0,c=0,m+=p;else{var b=c&&n.glyphs[a[v-1]]||{},w=n.glyphs[a[v]];l+=c?(b.w||n.w)+(b.k&&b.k[a[v]]||0)+n.w*o:0,c=1}w&&w.d&&(h+=O.transformPath(w.d,["t",l*u,m*u,"s",u,u,f,g,"t",(t-f)/u,(e-g)/u]))}}return this.path(h).attr({fill:"#000",stroke:"none"})},t.add=function(t){if(O.is(t,"array")){var e=this.set(),i=0,n=t.length,s;for(;i<n;i++)s=t[i]||{},J[L](s.type)&&e.push(this[s.type]().attr(s))}return e},O.format=function(t,e){var i=O.is(e,y)?[0][U](e):arguments;t&&O.is(t,ct)&&i.length-1&&(t=t.replace(tt,function(t,e){return i[++e]==null?_:i[e]}));return t||_},O.fullfill=function(){var e=/\{([^\}]+)\}/g,n=/(?:(?:^|\.)(.+?)(?=\[|\.|$|\()|\[('|")(.+?)\2\])(\(\))?/g,s=function(t,e,i){var r=i;e.replace(n,function(t,e,i,n,s){e=e||n,r&&(e in r&&(r=r[e]),typeof r=="function"&&s&&(r=r()))}),r=(r==null||r==i?t:r)+"";return r};return function(t,i){return String(t).replace(e,function(t,e){return s(t,e,i)})}}(),O.ninja=function(){it.was?p.win.Raphael=it.is:delete Raphael;return O},O.st=n,function(t,e,i){function n(){/in/.test(t.readyState)?setTimeout(n,9):O.eve("raphael.DOMload")}t.readyState==null&&t.addEventListener&&(t.addEventListener(e,i=function(){t.removeEventListener(e,i,!1),t.readyState="complete"},!1),t.readyState="loading"),n()}(document,"DOMContentLoaded"),it.was?p.win.Raphael=O:Raphael=O,eve.on("raphael.DOMload",function(){Q=!0})}(),window.Raphael.svg&&function(S){var T="hasOwnProperty",D=String,g=parseFloat,w=parseInt,v=Math,x=v.max,_=v.abs,y=v.pow,k=/[, ]+/,d=S.eve,M="",h=" ",C="http://www.w3.org/1999/xlink",P={block:"M5,0 0,2.5 5,5z",classic:"M5,0 0,2.5 5,5 3.5,3 3.5,2z",diamond:"M2.5,0 5,2.5 2.5,5 0,2.5z",open:"M6,1 1,3.5 6,6",oval:"M2.5,0A2.5,2.5,0,0,1,2.5,5 2.5,2.5,0,0,1,2.5,0z"},I={};S.toString=function(){return"Your browser supports SVG.\nYou are running Raphaël "+this.version};var E=function(t,e){if(e){typeof t=="string"&&(t=E(t));for(var i in e)e[T](i)&&(i.substring(0,6)=="xlink:"?t.setAttributeNS(C,i.substring(6),D(e[i])):t.setAttribute(i,D(e[i])))}else t=S._g.doc.createElementNS("http://www.w3.org/2000/svg",t),t.style&&(t.style.webkitTapHighlightColor="rgba(0,0,0,0)");return t},F=function(t,e){var s="linear",i=t.id+e,r=.5,o=.5,n=t.node,a=t.paper,l=n.style,c=S._g.doc.getElementById(i);if(!c){e=D(e).replace(S._radial_gradient,function(t,e,i){s="radial";if(e&&i){r=g(e),o=g(i);var n=(o>.5)*2-1;y(r-.5,2)+y(o-.5,2)>.25&&(o=v.sqrt(.25-y(r-.5,2))*n+.5)&&o!=.5&&(o=o.toFixed(5)-1e-5*n)}return M}),e=e.split(/\s*\-\s*/);if(s=="linear"){var h=e.shift();h=-g(h);if(isNaN(h))return null;var u=[0,0,v.cos(S.rad(h)),v.sin(S.rad(h))],d=1/(x(_(u[2]),_(u[3]))||1);u[2]*=d,u[3]*=d,u[2]<0&&(u[0]=-u[2],u[2]=0),u[3]<0&&(u[1]=-u[3],u[3]=0)}var f=S._parseDots(e);if(!f)return null;i=i.replace(/[\(\)\s,\xb0#]/g,"_"),t.gradient&&i!=t.gradient.id&&(a.defs.removeChild(t.gradient),delete t.gradient);if(!t.gradient){c=E(s+"Gradient",{id:i}),t.gradient=c,E(c,s=="radial"?{fx:r,fy:o}:{x1:u[0],y1:u[1],x2:u[2],y2:u[3],gradientTransform:t.matrix.invert()}),a.defs.appendChild(c);for(var p=0,m=f.length;p<m;p++)c.appendChild(E("stop",{offset:f[p].offset?f[p].offset:p?"100%":"0%","stop-color":f[p].color||"#fff"}))}}E(n,{fill:"url(#"+i+")",opacity:1,"fill-opacity":1}),l.fill=M,l.opacity=1,l.fillOpacity=1;return 1},$=function(t){var e=t.getBBox(1);E(t.pattern,{patternTransform:t.matrix.invert()+" translate("+e.x+","+e.y+")"})},A=function(t,e,i){if(t.type=="path"){var n=D(e).toLowerCase().split("-"),s=t.paper,r=i?"end":"start",o=t.node,a=t.attrs,l=a["stroke-width"],c=n.length,h="classic",u,d,f,p,m,g=3,v=3,y=5;while(c--)switch(n[c]){case"block":case"classic":case"oval":case"diamond":case"open":case"none":h=n[c];break;case"wide":v=5;break;case"narrow":v=2;break;case"long":g=5;break;case"short":g=2}h=="open"?(g+=2,v+=2,y+=2,f=1,p=i?4:1,m={fill:"none",stroke:a.stroke}):(p=f=g/2,m={fill:a.stroke,stroke:"none"}),t._.arrows?i?(t._.arrows.endPath&&I[t._.arrows.endPath]--,t._.arrows.endMarker&&I[t._.arrows.endMarker]--):(t._.arrows.startPath&&I[t._.arrows.startPath]--,t._.arrows.startMarker&&I[t._.arrows.startMarker]--):t._.arrows={};if(h!="none"){var b="raphael-marker-"+h,w="raphael-marker-"+r+h+g+v;S._g.doc.getElementById(b)?I[b]++:(s.defs.appendChild(E(E("path"),{"stroke-linecap":"round",d:P[h],id:b})),I[b]=1);var x=S._g.doc.getElementById(w),_;x?(I[w]++,_=x.getElementsByTagName("use")[0]):(x=E(E("marker"),{id:w,markerHeight:v,markerWidth:g,orient:"auto",refX:p,refY:v/2}),_=E(E("use"),{"xlink:href":"#"+b,transform:(i?"rotate(180 "+g/2+" "+v/2+") ":M)+"scale("+g/y+","+v/y+")","stroke-width":(1/((g/y+v/y)/2)).toFixed(4)}),x.appendChild(_),s.defs.appendChild(x),I[w]=1),E(_,m);var k=f*(h!="diamond"&&h!="oval");i?(u=t._.arrows.startdx*l||0,d=S.getTotalLength(a.path)-k*l):(u=k*l,d=S.getTotalLength(a.path)-(t._.arrows.enddx*l||0)),m={},m["marker-"+r]="url(#"+w+")";if(d||u)m.d=Raphael.getSubpath(a.path,u,d);E(o,m),t._.arrows[r+"Path"]=b,t._.arrows[r+"Marker"]=w,t._.arrows[r+"dx"]=k,t._.arrows[r+"Type"]=h,t._.arrows[r+"String"]=e}else i?(u=t._.arrows.startdx*l||0,d=S.getTotalLength(a.path)-u):(u=0,d=S.getTotalLength(a.path)-(t._.arrows.enddx*l||0)),t._.arrows[r+"Path"]&&E(o,{d:Raphael.getSubpath(a.path,u,d)}),delete t._.arrows[r+"Path"],delete t._.arrows[r+"Marker"],delete t._.arrows[r+"dx"],delete t._.arrows[r+"Type"],delete t._.arrows[r+"String"];for(m in I)if(I[T](m)&&!I[m]){var C=S._g.doc.getElementById(m);C&&C.parentNode.removeChild(C)}}},a={"":[0],none:[0],"-":[3,1],".":[1,1],"-.":[3,1,1,1],"-..":[3,1,1,1,1,1],". ":[1,3],"- ":[4,3],"--":[8,3],"- .":[4,3,1,3],"--.":[8,3,1,3],"--..":[8,3,1,3,1,3]},H=function(t,e,i){e=a[D(e).toLowerCase()];if(e){var n=t.attrs["stroke-width"]||"1",s={round:n,square:n,butt:0}[t.attrs["stroke-linecap"]||i["stroke-linecap"]]||0,r=[],o=e.length;while(o--)r[o]=e[o]*n+(o%2?1:-1)*s;E(t.node,{"stroke-dasharray":r.join(",")})}},f=function(n,t){var e=n.node,i=n.attrs,s=e.style.visibility;e.style.visibility="hidden";for(var r in t)if(t[T](r)){if(!S._availableAttrs[T](r))continue;var o=t[r];i[r]=o;switch(r){case"blur":n.blur(o);break;case"href":case"title":case"target":var a=e.parentNode;if(a.tagName.toLowerCase()!="a"){var l=E("a");a.insertBefore(l,e),l.appendChild(e),a=l}r=="target"?a.setAttributeNS(C,"show",o=="blank"?"new":o):a.setAttributeNS(C,r,o);break;case"cursor":e.style.cursor=o;break;case"transform":n.transform(o);break;case"arrow-start":A(n,o);break;case"arrow-end":A(n,o,1);break;case"clip-rect":var c=D(o).split(k);if(c.length==4){n.clip&&n.clip.parentNode.parentNode.removeChild(n.clip.parentNode);var h=E("clipPath"),u=E("rect");h.id=S.createUUID(),E(u,{x:c[0],y:c[1],width:c[2],height:c[3]}),h.appendChild(u),n.paper.defs.appendChild(h),E(e,{"clip-path":"url(#"+h.id+")"}),n.clip=u}if(!o){var d=e.getAttribute("clip-path");if(d){var f=S._g.doc.getElementById(d.replace(/(^url\(#|\)$)/g,M));f&&f.parentNode.removeChild(f),E(e,{"clip-path":M}),delete n.clip}}break;case"path":n.type=="path"&&(E(e,{d:o?i.path=S._pathToAbsolute(o):"M0,0"}),n._.dirty=1,n._.arrows&&("startString"in n._.arrows&&A(n,n._.arrows.startString),"endString"in n._.arrows&&A(n,n._.arrows.endString,1)));break;case"width":e.setAttribute(r,o),n._.dirty=1;if(i.fx)r="x",o=i.x;else break;case"x":i.fx&&(o=-i.x-(i.width||0));case"rx":if(r=="rx"&&n.type=="rect")break;case"cx":e.setAttribute(r,o),n.pattern&&$(n),n._.dirty=1;break;case"height":e.setAttribute(r,o),n._.dirty=1;if(i.fy)r="y",o=i.y;else break;case"y":i.fy&&(o=-i.y-(i.height||0));case"ry":if(r=="ry"&&n.type=="rect")break;case"cy":e.setAttribute(r,o),n.pattern&&$(n),n._.dirty=1;break;case"r":n.type=="rect"?E(e,{rx:o,ry:o}):e.setAttribute(r,o),n._.dirty=1;break;case"src":n.type=="image"&&e.setAttributeNS(C,"href",o);break;case"stroke-width":if(n._.sx!=1||n._.sy!=1)o/=x(_(n._.sx),_(n._.sy))||1;n.paper._vbSize&&(o*=n.paper._vbSize),e.setAttribute(r,o),i["stroke-dasharray"]&&H(n,i["stroke-dasharray"],t),n._.arrows&&("startString"in n._.arrows&&A(n,n._.arrows.startString),"endString"in n._.arrows&&A(n,n._.arrows.endString,1));break;case"stroke-dasharray":H(n,o,t);break;case"fill":var p=D(o).match(S._ISURL);if(p){h=E("pattern");var m=E("image");h.id=S.createUUID(),E(h,{x:0,y:0,patternUnits:"userSpaceOnUse",height:1,width:1}),E(m,{x:0,y:0,"xlink:href":p[1]}),h.appendChild(m),function(i){S._preload(p[1],function(){var t=this.offsetWidth,e=this.offsetHeight;E(i,{width:t,height:e}),E(m,{width:t,height:e}),n.paper.safari()})}(h),n.paper.defs.appendChild(h),E(e,{fill:"url(#"+h.id+")"}),n.pattern=h,n.pattern&&$(n);break}var g=S.getRGB(o);if(!g.error)delete t.gradient,delete i.gradient,!S.is(i.opacity,"undefined")&&S.is(t.opacity,"undefined")&&E(e,{opacity:i.opacity}),!S.is(i["fill-opacity"],"undefined")&&S.is(t["fill-opacity"],"undefined")&&E(e,{"fill-opacity":i["fill-opacity"]});else if((n.type=="circle"||n.type=="ellipse"||D(o).charAt()!="r")&&F(n,o)){if("opacity"in i||"fill-opacity"in i){var v=S._g.doc.getElementById(e.getAttribute("fill").replace(/^url\(#|\)$/g,M));if(v){var y=v.getElementsByTagName("stop");E(y[y.length-1],{"stop-opacity":("opacity"in i?i.opacity:1)*("fill-opacity"in i?i["fill-opacity"]:1)})}}i.gradient=o,i.fill="none";break}g[T]("opacity")&&E(e,{"fill-opacity":g.opacity>1?g.opacity/100:g.opacity});case"stroke":g=S.getRGB(o),e.setAttribute(r,g.hex),r=="stroke"&&g[T]("opacity")&&E(e,{"stroke-opacity":g.opacity>1?g.opacity/100:g.opacity}),r=="stroke"&&n._.arrows&&("startString"in n._.arrows&&A(n,n._.arrows.startString),"endString"in n._.arrows&&A(n,n._.arrows.endString,1));break;case"gradient":(n.type=="circle"||n.type=="ellipse"||D(o).charAt()!="r")&&F(n,o);break;case"opacity":i.gradient&&!i[T]("stroke-opacity")&&E(e,{"stroke-opacity":o>1?o/100:o});case"fill-opacity":if(i.gradient){v=S._g.doc.getElementById(e.getAttribute("fill").replace(/^url\(#|\)$/g,M)),v&&(y=v.getElementsByTagName("stop"),E(y[y.length-1],{"stop-opacity":o}));break};default:r=="font-size"&&(o=w(o,10)+"px");var b=r.replace(/(\-.)/g,function(t){return t.substring(1).toUpperCase()});e.style[b]=o,n._.dirty=1,e.setAttribute(r,o)}}O(n,t),e.style.visibility=s},p=1.2,O=function(t,e){if(t.type=="text"&&!!(e[T]("text")||e[T]("font")||e[T]("font-size")||e[T]("x")||e[T]("y"))){var i=t.attrs,n=t.node,s=n.firstChild?w(S._g.doc.defaultView.getComputedStyle(n.firstChild,M).getPropertyValue("font-size"),10):10;if(e[T]("text")){i.text=e.text;while(n.firstChild)n.removeChild(n.firstChild);var r=D(e.text).split("\n"),o=[],a;for(var l=0,c=r.length;l<c;l++)a=E("tspan"),l&&E(a,{dy:s*p,x:i.x}),a.appendChild(S._g.doc.createTextNode(r[l])),n.appendChild(a),o[l]=a}else{o=n.getElementsByTagName("tspan");for(l=0,c=o.length;l<c;l++)l?E(o[l],{dy:s*p,x:i.x}):E(o[0],{dy:0})}E(n,{x:i.x,y:i.y}),t._.dirty=1;var h=t._getBBox(),u=i.y-(h.y+h.height/2);u&&S.is(u,"finite")&&E(o[0],{dy:u})}},l=function(t,e){var i=0,n=0;this[0]=this.node=t,t.raphael=!0,this.id=S._oid++,t.raphaelid=this.id,this.matrix=S.matrix(),this.realPath=null,this.paper=e,this.attrs=this.attrs||{},this._={transform:[],sx:1,sy:1,deg:0,dx:0,dy:0,dirty:1},!e.bottom&&(e.bottom=this),this.prev=e.top,e.top&&(e.top.next=this),e.top=this,this.next=null},t=S.el;l.prototype=t,t.constructor=l,S._engine.path=function(t,e){var i=E("path");e.canvas&&e.canvas.appendChild(i);var n=new l(i,e);n.type="path",f(n,{fill:"none",stroke:"#000",path:t});return n},t.rotate=function(t,e,i){if(this.removed)return this;t=D(t).split(k),t.length-1&&(e=g(t[1]),i=g(t[2])),t=g(t[0]),i==null&&(e=i);if(e==null||i==null){var n=this.getBBox(1);e=n.x+n.width/2,i=n.y+n.height/2}this.transform(this._.transform.concat([["r",t,e,i]]));return this},t.scale=function(t,e,i,n){if(this.removed)return this;t=D(t).split(k),t.length-1&&(e=g(t[1]),i=g(t[2]),n=g(t[3])),t=g(t[0]),e==null&&(e=t),n==null&&(i=n);if(i==null||n==null)var s=this.getBBox(1);i=i==null?s.x+s.width/2:i,n=n==null?s.y+s.height/2:n,this.transform(this._.transform.concat([["s",t,e,i,n]]));return this},t.translate=function(t,e){if(this.removed)return this;t=D(t).split(k),t.length-1&&(e=g(t[1])),t=g(t[0])||0,e=+e||0,this.transform(this._.transform.concat([["t",t,e]]));return this},t.transform=function(t){var e=this._;if(t==null)return e.transform;S._extractTransform(this,t),this.clip&&E(this.clip,{transform:this.matrix.invert()}),this.pattern&&$(this),this.node&&E(this.node,{transform:this.matrix});if(e.sx!=1||e.sy!=1){var i=this.attrs[T]("stroke-width")?this.attrs["stroke-width"]:1;this.attr({"stroke-width":i})}return this},t.hide=function(){!this.removed&&this.paper.safari(this.node.style.display="none");return this},t.show=function(){!this.removed&&this.paper.safari(this.node.style.display="");return this},t.remove=function(){if(!this.removed&&!!this.node.parentNode){var t=this.paper;t.__set__&&t.__set__.exclude(this),d.unbind("raphael.*.*."+this.id),this.gradient&&t.defs.removeChild(this.gradient),S._tear(this,t),this.node.parentNode.tagName.toLowerCase()=="a"?this.node.parentNode.parentNode.removeChild(this.node.parentNode):this.node.parentNode.removeChild(this.node);for(var e in this)this[e]=typeof this[e]=="function"?S._removedFactory(e):null;this.removed=!0}},t._getBBox=function(){if(this.node.style.display=="none"){this.show();var t=!0}var e={};try{e=this.node.getBBox()}catch(t){}finally{e=e||{}}t&&this.hide();return e},t.attr=function(t,e){if(this.removed)return this;if(t==null){var i={};for(var n in this.attrs)this.attrs[T](n)&&(i[n]=this.attrs[n]);i.gradient&&i.fill=="none"&&(i.fill=i.gradient)&&delete i.gradient,i.transform=this._.transform;return i}if(e==null&&S.is(t,"string")){if(t=="fill"&&this.attrs.fill=="none"&&this.attrs.gradient)return this.attrs.gradient;if(t=="transform")return this._.transform;var s=t.split(k),r={};for(var o=0,a=s.length;o<a;o++)t=s[o],t in this.attrs?r[t]=this.attrs[t]:S.is(this.paper.customAttributes[t],"function")?r[t]=this.paper.customAttributes[t].def:r[t]=S._availableAttrs[t];return a-1?r:r[s[0]]}if(e==null&&S.is(t,"array")){r={};for(o=0,a=t.length;o<a;o++)r[t[o]]=this.attr(t[o]);return r}if(e!=null){var l={};l[t]=e}else t!=null&&S.is(t,"object")&&(l=t);for(var c in l)d("raphael.attr."+c+"."+this.id,this,l[c]);for(c in this.paper.customAttributes)if(this.paper.customAttributes[T](c)&&l[T](c)&&S.is(this.paper.customAttributes[c],"function")){var h=this.paper.customAttributes[c].apply(this,[].concat(l[c]));this.attrs[c]=l[c];for(var u in h)h[T](u)&&(l[u]=h[u])}f(this,l);return this},t.toFront=function(){if(this.removed)return this;this.node.parentNode.tagName.toLowerCase()=="a"?this.node.parentNode.parentNode.appendChild(this.node.parentNode):this.node.parentNode.appendChild(this.node);var t=this.paper;t.top!=this&&S._tofront(this,t);return this},t.toBack=function(){if(this.removed)return this;var t=this.node.parentNode;t.tagName.toLowerCase()=="a"?t.parentNode.insertBefore(this.node.parentNode,this.node.parentNode.parentNode.firstChild):t.firstChild!=this.node&&t.insertBefore(this.node,this.node.parentNode.firstChild),S._toback(this,this.paper);var e=this.paper;return this},t.insertAfter=function(t){if(this.removed)return this;var e=t.node||t[t.length-1].node;e.nextSibling?e.parentNode.insertBefore(this.node,e.nextSibling):e.parentNode.appendChild(this.node),S._insertafter(this,t,this.paper);return this},t.insertBefore=function(t){if(this.removed)return this;var e=t.node||t[0].node;e.parentNode.insertBefore(this.node,e),S._insertbefore(this,t,this.paper);return this},t.blur=function(t){var e=this;if(+t!==0){var i=E("filter"),n=E("feGaussianBlur");e.attrs.blur=t,i.id=S.createUUID(),E(n,{stdDeviation:+t||1.5}),i.appendChild(n),e.paper.defs.appendChild(i),e._blur=i,E(e.node,{filter:"url(#"+i.id+")"})}else e._blur&&(e._blur.parentNode.removeChild(e._blur),delete e._blur,delete e.attrs.blur),e.node.removeAttribute("filter")},S._engine.circle=function(t,e,i,n){var s=E("circle");t.canvas&&t.canvas.appendChild(s);var r=new l(s,t);r.attrs={cx:e,cy:i,r:n,fill:"none",stroke:"#000"},r.type="circle",E(s,r.attrs);return r},S._engine.rect=function(t,e,i,n,s,r){var o=E("rect");t.canvas&&t.canvas.appendChild(o);var a=new l(o,t);a.attrs={x:e,y:i,width:n,height:s,r:r||0,rx:r||0,ry:r||0,fill:"none",stroke:"#000"},a.type="rect",E(o,a.attrs);return a},S._engine.ellipse=function(t,e,i,n,s){var r=E("ellipse");t.canvas&&t.canvas.appendChild(r);var o=new l(r,t);o.attrs={cx:e,cy:i,rx:n,ry:s,fill:"none",stroke:"#000"},o.type="ellipse",E(r,o.attrs);return o},S._engine.image=function(t,e,i,n,s,r){var o=E("image");E(o,{x:i,y:n,width:s,height:r,preserveAspectRatio:"none"}),o.setAttributeNS(C,"href",e),t.canvas&&t.canvas.appendChild(o);var a=new l(o,t);a.attrs={x:i,y:n,width:s,height:r,src:e},a.type="image";return a},S._engine.text=function(t,e,i,n){var s=E("text");t.canvas&&t.canvas.appendChild(s);var r=new l(s,t);r.attrs={x:e,y:i,"text-anchor":"middle",text:n,font:S._availableAttrs.font,stroke:"none",fill:"#000"},r.type="text",f(r,r.attrs);return r},S._engine.setSize=function(t,e){this.width=t||this.width,this.height=e||this.height,this.canvas.setAttribute("width",this.width),this.canvas.setAttribute("height",this.height),this._viewBox&&this.setViewBox.apply(this,this._viewBox);return this},S._engine.create=function(){var t=S._getContainer.apply(0,arguments),e=t&&t.container,i=t.x,n=t.y,s=t.width,r=t.height;if(!e)throw new Error("SVG container not found.");var o=E("svg"),a="overflow:hidden;",l;i=i||0,n=n||0,s=s||512,r=r||342,E(o,{height:r,version:1.1,width:s,xmlns:"http://www.w3.org/2000/svg"}),e==1?(o.style.cssText=a+"position:absolute;left:"+i+"px;top:"+n+"px",S._g.doc.body.appendChild(o),l=1):(o.style.cssText=a+"position:relative",e.firstChild?e.insertBefore(o,e.firstChild):e.appendChild(o)),e=new S._Paper,e.width=s,e.height=r,e.canvas=o,e.clear(),e._left=e._top=0,l&&(e.renderfix=function(){}),e.renderfix();return e},S._engine.setViewBox=function(t,e,i,n,s){d("raphael.setViewBox",this,this._viewBox,[t,e,i,n,s]);var r=x(i/this.width,n/this.height),o=this.top,a=s?"meet":"xMinYMin",l,c;t==null?(this._vbSize&&(r=1),delete this._vbSize,l="0 0 "+this.width+h+this.height):(this._vbSize=r,l=t+h+e+h+i+h+n),E(this.canvas,{viewBox:l,preserveAspectRatio:a});while(r&&o)c="stroke-width"in o.attrs?o.attrs["stroke-width"]:1,o.attr({"stroke-width":c}),o._.dirty=1,o._.dirtyT=1,o=o.prev;this._viewBox=[t,e,i,n,!!s];return this},S.prototype.renderfix=function(){var e=this.canvas,t=e.style,i;try{i=e.getScreenCTM()||e.createSVGMatrix()}catch(t){i=e.createSVGMatrix()}var n=-i.e%1,s=-i.f%1;if(n||s)n&&(this._left=(this._left+n)%1,t.left=this._left+"px"),s&&(this._top=(this._top+s)%1,t.top=this._top+"px")},S.prototype.clear=function(){S.eve("raphael.clear",this);var t=this.canvas;while(t.firstChild)t.removeChild(t.firstChild);this.bottom=this.top=null,(this.desc=E("desc")).appendChild(S._g.doc.createTextNode("Created with Raphaël "+S.version)),t.appendChild(this.desc),t.appendChild(this.defs=E("defs"))},S.prototype.remove=function(){d("raphael.remove",this),this.canvas.parentNode&&this.canvas.parentNode.removeChild(this.canvas);for(var t in this)this[t]=typeof this[t]=="function"?S._removedFactory(t):null};var e=S.st;for(var i in t)t[T](i)&&!e[T](i)&&(e[i]=function(i){return function(){var e=arguments;return this.forEach(function(t){t[i].apply(t,e)})}}(i))}(window.Raphael),window.Raphael.vml&&function(H){var O="hasOwnProperty",L=String,R=parseFloat,p=Math,z=p.round,N=p.max,B=p.min,y=p.abs,j="fill",W=/[, ]+/,d=H.eve,n=" progid:DXImageTransform.Microsoft",Y=" ",q="",u={M:"m",L:"l",C:"c",Z:"x",m:"t",l:"r",c:"v",z:"x"},f=/([clmz]),?([^clmz]*)/gi,s=/ progid:\S+Blur\([^\)]+\)/g,m=/-?[^,\s-]+/g,h="position:absolute;left:0;top:0;width:1px;height:1px",U=21600,V={path:1,rect:1,image:1},G={circle:1,ellipse:1},X=function(t){var e=/[ahqstv]/gi,i=H._pathToAbsolute;L(t).match(e)&&(i=H._path2curve),e=/[clmz]/g;if(i==H._pathToAbsolute&&!L(t).match(e)){var n=L(t).replace(f,function(t,e,i){var n=[],s=e.toLowerCase()=="m",r=u[e];i.replace(m,function(t){s&&n.length==2&&(r+=n+u[e=="m"?"l":"L"],n=[]),n.push(z(t*U))});return r+n});return n}var s=i(t),r,o;n=[];for(var a=0,l=s.length;a<l;a++){r=s[a],o=s[a][0].toLowerCase(),o=="z"&&(o="x");for(var c=1,h=r.length;c<h;c++)o+=z(r[c]*U)+(c!=h-1?",":q);n.push(o)}return n.join(Y)},b=function(t,e,i){var n=H.matrix();n.rotate(-t,.5,.5);return{dx:n.x(e,i),dy:n.y(e,i)}},K=function(t,e,i,n,s,r){var o=t._,a=t.matrix,l=o.fillpos,c=t.node,h=c.style,u=1,d="",f,p=U/e,m=U/i;h.visibility="hidden";if(!!e&&!!i){c.coordsize=y(p)+Y+y(m),h.rotation=r*(e*i<0?-1:1);if(r){var g=b(r,n,s);n=g.dx,s=g.dy}e<0&&(d+="x"),i<0&&(d+=" y")&&(u=-1),h.flip=d,c.coordorigin=n*-p+Y+s*-m;if(l||o.fillsize){var v=c.getElementsByTagName(j);v=v&&v[0],c.removeChild(v),l&&(g=b(r,a.x(l[0],l[1]),a.y(l[0],l[1])),v.position=g.dx*u+Y+g.dy*u),o.fillsize&&(v.size=o.fillsize[0]*y(e)+Y+o.fillsize[1]*y(i)),c.appendChild(v)}h.visibility="visible"}};H.toString=function(){return"Your browser doesn’t support SVG. Falling down to VML.\nYou are running Raphaël "+this.version};var Q=function(t,e,i){var n=L(e).toLowerCase().split("-"),s=i?"end":"start",r=n.length,o="classic",a="medium",l="medium";while(r--)switch(n[r]){case"block":case"classic":case"oval":case"diamond":case"open":case"none":o=n[r];break;case"wide":case"narrow":l=n[r];break;case"long":case"short":a=n[r]}var c=t.node.getElementsByTagName("stroke")[0];c[s+"arrow"]=o,c[s+"arrowlength"]=a,c[s+"arrowwidth"]=l},g=function(t,e){t.attrs=t.attrs||{};var i=t.node,n=t.attrs,s=i.style,r,o=V[t.type]&&(e.x!=n.x||e.y!=n.y||e.width!=n.width||e.height!=n.height||e.cx!=n.cx||e.cy!=n.cy||e.rx!=n.rx||e.ry!=n.ry||e.r!=n.r),a=G[t.type]&&(n.cx!=e.cx||n.cy!=e.cy||n.r!=e.r||n.rx!=e.rx||n.ry!=e.ry),l=t;for(var c in e)e[O](c)&&(n[c]=e[c]);o&&(n.path=H._getPath[t.type](t),t._.dirty=1),e.href&&(i.href=e.href),e.title&&(i.title=e.title),e.target&&(i.target=e.target),e.cursor&&(s.cursor=e.cursor),"blur"in e&&t.blur(e.blur);if(e.path&&t.type=="path"||o)i.path=X(~L(n.path).toLowerCase().indexOf("r")?H._pathToAbsolute(n.path):n.path),t.type=="image"&&(t._.fillpos=[n.x,n.y],t._.fillsize=[n.width,n.height],K(t,1,1,0,0,0));"transform"in e&&t.transform(e.transform);if(a){var h=+n.cx,u=+n.cy,d=+n.rx||+n.r||0,f=+n.ry||+n.r||0;i.path=H.format("ar{0},{1},{2},{3},{4},{1},{4},{1}x",z((h-d)*U),z((u-f)*U),z((h+d)*U),z((u+f)*U),z(h*U))}if("clip-rect"in e){var p=L(e["clip-rect"]).split(W);if(p.length==4){p[2]=+p[2]+ +p[0],p[3]=+p[3]+ +p[1];var m=i.clipRect||H._g.doc.createElement("div"),g=m.style;g.clip=H.format("rect({1}px {2}px {3}px {0}px)",p),i.clipRect||(g.position="absolute",g.top=0,g.left=0,g.width=t.paper.width+"px",g.height=t.paper.height+"px",i.parentNode.insertBefore(m,i),m.appendChild(i),i.clipRect=m)}e["clip-rect"]||i.clipRect&&(i.clipRect.style.clip="auto")}if(t.textpath){var v=t.textpath.style;e.font&&(v.font=e.font),e["font-family"]&&(v.fontFamily='"'+e["font-family"].split(",")[0].replace(/^['"]+|['"]+$/g,q)+'"'),e["font-size"]&&(v.fontSize=e["font-size"]),e["font-weight"]&&(v.fontWeight=e["font-weight"]),e["font-style"]&&(v.fontStyle=e["font-style"])}"arrow-start"in e&&Q(l,e["arrow-start"]),"arrow-end"in e&&Q(l,e["arrow-end"],1);if(e.opacity!=null||e["stroke-width"]!=null||e.fill!=null||e.src!=null||e.stroke!=null||e["stroke-width"]!=null||e["stroke-opacity"]!=null||e["fill-opacity"]!=null||e["stroke-dasharray"]!=null||e["stroke-miterlimit"]!=null||e["stroke-linejoin"]!=null||e["stroke-linecap"]!=null){var y=i.getElementsByTagName(j),b=!1;y=y&&y[0],!y&&(b=y=J(j)),t.type=="image"&&e.src&&(y.src=e.src),e.fill&&(y.on=!0);if(y.on==null||e.fill=="none"||e.fill===null)y.on=!1;if(y.on&&e.fill){var w=L(e.fill).match(H._ISURL);if(w){y.parentNode==i&&i.removeChild(y),y.rotate=!0,y.src=w[1],y.type="tile";var x=t.getBBox(1);y.position=x.x+Y+x.y,t._.fillpos=[x.x,x.y],H._preload(w[1],function(){t._.fillsize=[this.offsetWidth,this.offsetHeight]})}else y.color=H.getRGB(e.fill).hex,y.src=q,y.type="solid",H.getRGB(e.fill).error&&(l.type in{circle:1,ellipse:1}||L(e.fill).charAt()!="r")&&Z(l,e.fill,y)&&(n.fill="none",n.gradient=e.fill,y.rotate=!1)}if("fill-opacity"in e||"opacity"in e){var _=((+n["fill-opacity"]+1||2)-1)*((+n.opacity+1||2)-1)*((+H.getRGB(e.fill).o+1||2)-1);_=B(N(_,0),1),y.opacity=_,y.src&&(y.color="none")}i.appendChild(y);var k=i.getElementsByTagName("stroke")&&i.getElementsByTagName("stroke")[0],C=!1;!k&&(C=k=J("stroke"));if(e.stroke&&e.stroke!="none"||e["stroke-width"]||e["stroke-opacity"]!=null||e["stroke-dasharray"]||e["stroke-miterlimit"]||e["stroke-linejoin"]||e["stroke-linecap"])k.on=!0;(e.stroke=="none"||e.stroke===null||k.on==null||e.stroke==0||e["stroke-width"]==0)&&(k.on=!1);var S=H.getRGB(e.stroke);k.on&&e.stroke&&(k.color=S.hex),_=((+n["stroke-opacity"]+1||2)-1)*((+n.opacity+1||2)-1)*((+S.o+1||2)-1);var T=(R(e["stroke-width"])||1)*.75;_=B(N(_,0),1),e["stroke-width"]==null&&(T=n["stroke-width"]),e["stroke-width"]&&(k.weight=T),T&&T<1&&(_*=T)&&(k.weight=1),k.opacity=_,e["stroke-linejoin"]&&(k.joinstyle=e["stroke-linejoin"]||"miter"),k.miterlimit=e["stroke-miterlimit"]||8,e["stroke-linecap"]&&(k.endcap=e["stroke-linecap"]=="butt"?"flat":e["stroke-linecap"]=="square"?"square":"round");if(e["stroke-dasharray"]){var D={"-":"shortdash",".":"shortdot","-.":"shortdashdot","-..":"shortdashdotdot",". ":"dot","- ":"dash","--":"longdash","- .":"dashdot","--.":"longdashdot","--..":"longdashdotdot"};k.dashstyle=D[O](e["stroke-dasharray"])?D[e["stroke-dasharray"]]:q}C&&i.appendChild(k)}if(l.type=="text"){l.paper.canvas.style.display=q;var M=l.paper.span,P=100,I=n.font&&n.font.match(/\d+(?:\.\d*)?(?=px)/);s=M.style,n.font&&(s.font=n.font),n["font-family"]&&(s.fontFamily=n["font-family"]),n["font-weight"]&&(s.fontWeight=n["font-weight"]),n["font-style"]&&(s.fontStyle=n["font-style"]),I=R(n["font-size"]||I&&I[0])||10,s.fontSize=I*P+"px",l.textpath.string&&(M.innerHTML=L(l.textpath.string).replace(/</g,"&#60;").replace(/&/g,"&#38;").replace(/\n/g,"<br>"));var E=M.getBoundingClientRect();l.W=n.w=(E.right-E.left)/P,l.H=n.h=(E.bottom-E.top)/P,l.X=n.x,l.Y=n.y+l.H/2,("x"in e||"y"in e)&&(l.path.v=H.format("m{0},{1}l{2},{1}",z(n.x*U),z(n.y*U),z(n.x*U)+1));var F=["x","y","text","font","font-family","font-weight","font-style","font-size"];for(var $=0,A=F.length;$<A;$++)if(F[$]in e){l._.dirty=1;break}switch(n["text-anchor"]){case"start":l.textpath.style["v-text-align"]="left",l.bbx=l.W/2;break;case"end":l.textpath.style["v-text-align"]="right",l.bbx=-l.W/2;break;default:l.textpath.style["v-text-align"]="center",l.bbx=0}l.textpath.style["v-text-kern"]=!0}},Z=function(t,e,i){t.attrs=t.attrs||{};var n=t.attrs,s=Math.pow,r,o,a="linear",l=".5 .5";t.attrs.gradient=e,e=L(e).replace(H._radial_gradient,function(t,e,i){a="radial",e&&i&&(e=R(e),i=R(i),s(e-.5,2)+s(i-.5,2)>.25&&(i=p.sqrt(.25-s(e-.5,2))*((i>.5)*2-1)+.5),l=e+Y+i);return q}),e=e.split(/\s*\-\s*/);if(a=="linear"){var c=e.shift();c=-R(c);if(isNaN(c))return null}var h=H._parseDots(e);if(!h)return null;t=t.shape||t.node;if(h.length){t.removeChild(i),i.on=!0,i.method="none",i.color=h[0].color,i.color2=h[h.length-1].color;var u=[];for(var d=0,f=h.length;d<f;d++)h[d].offset&&u.push(h[d].offset+Y+h[d].color);i.colors=u.length?u.join():"0% "+i.color,a=="radial"?(i.type="gradientTitle",i.focus="100%",i.focussize="0 0",i.focusposition=l,i.angle=0):(i.type="gradient",i.angle=(270-c)%360),t.appendChild(i)}return 1},v=function(t,e){this[0]=this.node=t,t.raphael=!0,this.id=H._oid++,t.raphaelid=this.id,this.X=0,this.Y=0,this.attrs={},this.paper=e,this.matrix=H.matrix(),this._={transform:[],sx:1,sy:1,dx:0,dy:0,deg:0,dirty:1,dirtyT:1},!e.bottom&&(e.bottom=this),this.prev=e.top,e.top&&(e.top.next=this),e.top=this,this.next=null},t=H.el;v.prototype=t,t.constructor=v,t.transform=function(t){if(t==null)return this._.transform;var e=this.paper._viewBoxShift,i=e?"s"+[e.scale,e.scale]+"-1-1t"+[e.dx,e.dy]:q,n;e&&(n=t=L(t).replace(/\.{3}|\u2026/g,this._.transform||q)),H._extractTransform(this,i+t);var s=this.matrix.clone(),r=this.skew,o=this.node,a,l=~L(this.attrs.fill).indexOf("-"),c=!L(this.attrs.fill).indexOf("url(");s.translate(-.5,-.5);if(c||l||this.type=="image"){r.matrix="1 0 0 1",r.offset="0 0",a=s.split();if(l&&a.noRotation||!a.isSimple){o.style.filter=s.toFilter();var h=this.getBBox(),u=this.getBBox(1),d=h.x-u.x,f=h.y-u.y;o.coordorigin=d*-U+Y+f*-U,K(this,1,1,d,f,0)}else o.style.filter=q,K(this,a.scalex,a.scaley,a.dx,a.dy,a.rotate)}else o.style.filter=q,r.matrix=L(s),r.offset=s.offset();n&&(this._.transform=n);return this},t.rotate=function(t,e,i){if(this.removed)return this;if(t!=null){t=L(t).split(W),t.length-1&&(e=R(t[1]),i=R(t[2])),t=R(t[0]),i==null&&(e=i);if(e==null||i==null){var n=this.getBBox(1);e=n.x+n.width/2,i=n.y+n.height/2}this._.dirtyT=1,this.transform(this._.transform.concat([["r",t,e,i]]));return this}},t.translate=function(t,e){if(this.removed)return this;t=L(t).split(W),t.length-1&&(e=R(t[1])),t=R(t[0])||0,e=+e||0,this._.bbox&&(this._.bbox.x+=t,this._.bbox.y+=e),this.transform(this._.transform.concat([["t",t,e]]));return this},t.scale=function(t,e,i,n){if(this.removed)return this;t=L(t).split(W),t.length-1&&(e=R(t[1]),i=R(t[2]),n=R(t[3]),isNaN(i)&&(i=null),isNaN(n)&&(n=null)),t=R(t[0]),e==null&&(e=t),n==null&&(i=n);if(i==null||n==null)var s=this.getBBox(1);i=i==null?s.x+s.width/2:i,n=n==null?s.y+s.height/2:n,this.transform(this._.transform.concat([["s",t,e,i,n]])),this._.dirtyT=1;return this},t.hide=function(){!this.removed&&(this.node.style.display="none");return this},t.show=function(){!this.removed&&(this.node.style.display=q);return this},t._getBBox=function(){if(this.removed)return{};return{x:this.X+(this.bbx||0)-this.W/2,y:this.Y-this.H,width:this.W,height:this.H}},t.remove=function(){if(!this.removed&&!!this.node.parentNode){this.paper.__set__&&this.paper.__set__.exclude(this),H.eve.unbind("raphael.*.*."+this.id),H._tear(this,this.paper),this.node.parentNode.removeChild(this.node),this.shape&&this.shape.parentNode.removeChild(this.shape);for(var t in this)this[t]=typeof this[t]=="function"?H._removedFactory(t):null;this.removed=!0}},t.attr=function(t,e){if(this.removed)return this;if(t==null){var i={};for(var n in this.attrs)this.attrs[O](n)&&(i[n]=this.attrs[n]);i.gradient&&i.fill=="none"&&(i.fill=i.gradient)&&delete i.gradient,i.transform=this._.transform;return i}if(e==null&&H.is(t,"string")){if(t==j&&this.attrs.fill=="none"&&this.attrs.gradient)return this.attrs.gradient;var s=t.split(W),r={};for(var o=0,a=s.length;o<a;o++)t=s[o],t in this.attrs?r[t]=this.attrs[t]:H.is(this.paper.customAttributes[t],"function")?r[t]=this.paper.customAttributes[t].def:r[t]=H._availableAttrs[t];return a-1?r:r[s[0]]}if(this.attrs&&e==null&&H.is(t,"array")){r={};for(o=0,a=t.length;o<a;o++)r[t[o]]=this.attr(t[o]);return r}var l;e!=null&&(l={},l[t]=e),e==null&&H.is(t,"object")&&(l=t);for(var c in l)d("raphael.attr."+c+"."+this.id,this,l[c]);if(l){for(c in this.paper.customAttributes)if(this.paper.customAttributes[O](c)&&l[O](c)&&H.is(this.paper.customAttributes[c],"function")){var h=this.paper.customAttributes[c].apply(this,[].concat(l[c]));this.attrs[c]=l[c];for(var u in h)h[O](u)&&(l[u]=h[u])}l.text&&this.type=="text"&&(this.textpath.string=l.text),g(this,l)}return this},t.toFront=function(){!this.removed&&this.node.parentNode.appendChild(this.node),this.paper&&this.paper.top!=this&&H._tofront(this,this.paper);return this},t.toBack=function(){if(this.removed)return this;this.node.parentNode.firstChild!=this.node&&(this.node.parentNode.insertBefore(this.node,this.node.parentNode.firstChild),H._toback(this,this.paper));return this},t.insertAfter=function(t){if(this.removed)return this;t.constructor==H.st.constructor&&(t=t[t.length-1]),t.node.nextSibling?t.node.parentNode.insertBefore(this.node,t.node.nextSibling):t.node.parentNode.appendChild(this.node),H._insertafter(this,t,this.paper);return this},t.insertBefore=function(t){if(this.removed)return this;t.constructor==H.st.constructor&&(t=t[0]),t.node.parentNode.insertBefore(this.node,t.node),H._insertbefore(this,t,this.paper);return this},t.blur=function(t){var e=this.node.runtimeStyle,i=e.filter;i=i.replace(s,q),+t!==0?(this.attrs.blur=t,e.filter=i+Y+n+".Blur(pixelradius="+(+t||1.5)+")",e.margin=H.format("-{0}px 0 0 -{0}px",z(+t||1.5))):(e.filter=i,e.margin=0,delete this.attrs.blur)},H._engine.path=function(t,e){var i=J("shape");i.style.cssText=h,i.coordsize=U+Y+U,i.coordorigin=e.coordorigin;var n=new v(i,e),s={fill:"none",stroke:"#000"};t&&(s.path=t),n.type="path",n.path=[],n.Path=q,g(n,s),e.canvas.appendChild(i);var r=J("skew");r.on=!0,i.appendChild(r),n.skew=r,n.transform(q);return n},H._engine.rect=function(t,e,i,n,s,r){var o=H._rectPath(e,i,n,s,r),a=t.path(o),l=a.attrs;a.X=l.x=e,a.Y=l.y=i,a.W=l.width=n,a.H=l.height=s,l.r=r,l.path=o,a.type="rect";return a},H._engine.ellipse=function(t,e,i,n,s){var r=t.path(),o=r.attrs;r.X=e-n,r.Y=i-s,r.W=n*2,r.H=s*2,r.type="ellipse",g(r,{cx:e,cy:i,rx:n,ry:s});return r},H._engine.circle=function(t,e,i,n){var s=t.path(),r=s.attrs;s.X=e-n,s.Y=i-n,s.W=s.H=n*2,s.type="circle",g(s,{cx:e,cy:i,r:n});return s},H._engine.image=function(t,e,i,n,s,r){var o=H._rectPath(i,n,s,r),a=t.path(o).attr({stroke:"none"}),l=a.attrs,c=a.node,h=c.getElementsByTagName(j)[0];l.src=e,a.X=l.x=i,a.Y=l.y=n,a.W=l.width=s,a.H=l.height=r,l.path=o,a.type="image",h.parentNode==c&&c.removeChild(h),h.rotate=!0,h.src=e,h.type="tile",a._.fillpos=[i,n],a._.fillsize=[s,r],c.appendChild(h),K(a,1,1,0,0,0);return a},H._engine.text=function(t,e,i,n){var s=J("shape"),r=J("path"),o=J("textpath");e=e||0,i=i||0,n=n||"",r.v=H.format("m{0},{1}l{2},{1}",z(e*U),z(i*U),z(e*U)+1),r.textpathok=!0,o.string=L(n),o.on=!0,s.style.cssText=h,s.coordsize=U+Y+U,s.coordorigin="0 0";var a=new v(s,t),l={fill:"#000",stroke:"none",font:H._availableAttrs.font,text:n};a.shape=s,a.path=r,a.textpath=o,a.type="text",a.attrs.text=L(n),a.attrs.x=e,a.attrs.y=i,a.attrs.w=1,a.attrs.h=1,g(a,l),s.appendChild(o),s.appendChild(r),t.canvas.appendChild(s);var c=J("skew");c.on=!0,s.appendChild(c),a.skew=c,a.transform(q);return a},H._engine.setSize=function(t,e){var i=this.canvas.style;this.width=t,this.height=e,t==+t&&(t+="px"),e==+e&&(e+="px"),i.width=t,i.height=e,i.clip="rect(0 "+t+" "+e+" 0)",this._viewBox&&H._engine.setViewBox.apply(this,this._viewBox);return this},H._engine.setViewBox=function(t,e,i,n,s){H.eve("raphael.setViewBox",this,this._viewBox,[t,e,i,n,s]);var r=this.width,o=this.height,a=1/N(i/r,n/o),l,c;s&&(l=o/n,c=r/i,i*l<r&&(t-=(r-i*l)/2/l),n*c<o&&(e-=(o-n*c)/2/c)),this._viewBox=[t,e,i,n,!!s],this._viewBoxShift={dx:-t,dy:-e,scale:a},this.forEach(function(t){t.transform("...")});return this};var J;H._engine.initWin=function(t){var e=t.document;e.createStyleSheet().addRule(".rvml","behavior:url(#default#VML)");try{!e.namespaces.rvml&&e.namespaces.add("rvml","urn:schemas-microsoft-com:vml"),J=function(t){return e.createElement("<rvml:"+t+' class="rvml">')}}catch(t){J=function(t){return e.createElement("<"+t+' xmlns="urn:schemas-microsoft.com:vml" class="rvml">')}}},H._engine.initWin(H._g.win),H._engine.create=function(){var t=H._getContainer.apply(0,arguments),e=t.container,i=t.height,n,s=t.width,r=t.x,o=t.y;if(!e)throw new Error("VML container not found.");var a=new H._Paper,l=a.canvas=H._g.doc.createElement("div"),c=l.style;r=r||0,o=o||0,s=s||512,i=i||342,a.width=s,a.height=i,s==+s&&(s+="px"),i==+i&&(i+="px"),a.coordsize=U*1e3+Y+U*1e3,a.coordorigin="0 0",a.span=H._g.doc.createElement("span"),a.span.style.cssText="position:absolute;left:-9999em;top:-9999em;padding:0;margin:0;line-height:1;",l.appendChild(a.span),c.cssText=H.format("top:0;left:0;width:{0};height:{1};display:inline-block;position:relative;clip:rect(0 {0} {1} 0);overflow:hidden",s,i),e==1?(H._g.doc.body.appendChild(l),c.left=r+"px",c.top=o+"px",c.position="absolute"):e.firstChild?e.insertBefore(l,e.firstChild):e.appendChild(l),a.renderfix=function(){};return a},H.prototype.clear=function(){H.eve("raphael.clear",this),this.canvas.innerHTML=q,this.span=H._g.doc.createElement("span"),this.span.style.cssText="position:absolute;left:-9999em;top:-9999em;padding:0;margin:0;line-height:1;display:inline;",this.canvas.appendChild(this.span),this.bottom=this.top=null},H.prototype.remove=function(){H.eve("raphael.remove",this),this.canvas.parentNode.removeChild(this.canvas);for(var t in this)this[t]=typeof this[t]=="function"?H._removedFactory(t):null;return!0};var e=H.st;for(var i in t)t[O](i)&&!e[O](i)&&(e[i]=function(i){return function(){var e=arguments;return this.forEach(function(t){t[i].apply(t,e)})}}(i))}(window.Raphael);(function(){var g,k,t,e,a=[].slice,h=function(t,e){return function(){return t.apply(e,arguments)}},s={}.hasOwnProperty,r=function(t,e){for(var i in e){if(s.call(e,i))t[i]=e[i]}function n(){this.constructor=t}n.prototype=e.prototype;t.prototype=new n;t.__super__=e.prototype;return t},l=[].indexOf||function(t){for(var e=0,i=this.length;e<i;e++){if(e in this&&this[e]===t)return e}return-1};k=window.Morris={};g=jQuery;k.EventEmitter=function(){function t(){}t.prototype.on=function(t,e){if(this.handlers==null){this.handlers={}}if(this.handlers[t]==null){this.handlers[t]=[]}this.handlers[t].push(e);return this};t.prototype.fire=function(){var t,e,i,n,s,r,o;i=arguments[0],t=2<=arguments.length?a.call(arguments,1):[];if(this.handlers!=null&&this.handlers[i]!=null){r=this.handlers[i];o=[];for(n=0,s=r.length;n<s;n++){e=r[n];o.push(e.apply(null,t))}return o}};return t}();k.commas=function(t){var e,i,n,s;if(t!=null){n=t<0?"-":"";e=Math.abs(t);i=Math.floor(e).toFixed(0);n+=i.replace(/(?=(?:\d{3})+$)(?!^)/g,",");s=e.toString();if(s.length>i.length){n+=s.slice(i.length)}return n}else{return"-"}};k.pad2=function(t){return(t<10?"0":"")+t};k.Grid=function(t){r(e,t);function e(t){this.resizeHandler=h(this.resizeHandler,this);var o=this;if(typeof t.element==="string"){this.el=g(document.getElementById(t.element))}else{this.el=g(t.element)}if(this.el==null||this.el.length===0){throw new Error("Graph container element not found")}if(this.el.css("position")==="static"){this.el.css("position","relative")}this.options=g.extend({},this.gridDefaults,this.defaults||{},t);if(typeof this.options.units==="string"){this.options.postUnits=t.units}this.raphael=new Raphael(this.el[0]);this.elementWidth=null;this.elementHeight=null;this.dirty=false;this.selectFrom=null;if(this.init){this.init()}this.setData(this.options.data);this.el.bind("mousemove",function(t){var e,i,n,s,r;i=o.el.offset();r=t.pageX-i.left;if(o.selectFrom){e=o.data[o.hitTest(Math.min(r,o.selectFrom))]._x;n=o.data[o.hitTest(Math.max(r,o.selectFrom))]._x;s=n-e;return o.selectionRect.attr({x:e,width:s})}else{return o.fire("hovermove",r,t.pageY-i.top)}});this.el.bind("mouseleave",function(t){if(o.selectFrom){o.selectionRect.hide();o.selectFrom=null}return o.fire("hoverout")});this.el.bind("touchstart touchmove touchend",function(t){var e,i;i=t.originalEvent.touches[0]||t.originalEvent.changedTouches[0];e=o.el.offset();return o.fire("hovermove",i.pageX-e.left,i.pageY-e.top)});this.el.bind("click",function(t){var e;e=o.el.offset();return o.fire("gridclick",t.pageX-e.left,t.pageY-e.top)});if(this.options.rangeSelect){this.selectionRect=this.raphael.rect(0,0,0,this.el.innerHeight()).attr({fill:this.options.rangeSelectColor,stroke:false}).toBack().hide();this.el.bind("mousedown",function(t){var e;e=o.el.offset();return o.startRange(t.pageX-e.left)});this.el.bind("mouseup",function(t){var e;e=o.el.offset();o.endRange(t.pageX-e.left);return o.fire("hovermove",t.pageX-e.left,t.pageY-e.top)})}if(this.options.resize){g(window).bind("resize",function(t){if(o.timeoutId!=null){window.clearTimeout(o.timeoutId)}return o.timeoutId=window.setTimeout(o.resizeHandler,100)})}this.el.css("-webkit-tap-highlight-color","rgba(0,0,0,0)");if(this.postInit){this.postInit()}}e.prototype.gridDefaults={dateFormat:null,axes:true,grid:true,gridLineColor:"#aaa",gridStrokeWidth:.5,gridTextColor:"#888",gridTextSize:12,gridTextFamily:"sans-serif",gridTextWeight:"normal",hideHover:false,yLabelFormat:null,xLabelAngle:0,numLines:5,padding:25,parseTime:true,postUnits:"",preUnits:"",ymax:"auto",ymin:"auto 0",goals:[],goalStrokeWidth:1,goalLineColors:["#666633","#999966","#cc6666","#663333"],events:[],eventStrokeWidth:1,eventLineColors:["#005a04","#ccffbb","#3a5f0b","#005502"],rangeSelect:null,rangeSelectColor:"#eef",resize:false};e.prototype.setData=function(n,t){var s,r,o,e,i,a,l,c,h,u,d,f,p,m,g;if(t==null){t=true}this.options.data=n;if(n==null||n.length===0){this.data=[];this.raphael.clear();if(this.hover!=null){this.hover.hide()}return}f=this.cumulative?0:null;p=this.cumulative?0:null;if(this.options.goals.length>0){i=Math.min.apply(Math,this.options.goals);e=Math.max.apply(Math,this.options.goals);p=p!=null?Math.min(p,i):i;f=f!=null?Math.max(f,e):e}this.data=function(){var t,e,i;i=[];for(o=t=0,e=n.length;t<e;o=++t){l=n[o];a={src:l};a.label=l[this.options.xkey];if(this.options.parseTime){a.x=k.parseDate(a.label);if(this.options.dateFormat){a.label=this.options.dateFormat(a.x)}else if(typeof a.label==="number"){a.label=new Date(a.label).toString()}}else{a.x=o;if(this.options.xLabelFormat){a.label=this.options.xLabelFormat(a)}}h=0;a.y=function(){var t,e,i,n;i=this.options.ykeys;n=[];for(r=t=0,e=i.length;t<e;r=++t){d=i[r];m=l[d];if(typeof m==="string"){m=parseFloat(m)}if(m!=null&&typeof m!=="number"){m=null}if(m!=null){if(this.cumulative){h+=m}else{if(f!=null){f=Math.max(m,f);p=Math.min(m,p)}else{f=p=m}}}if(this.cumulative&&h!=null){f=Math.max(h,f);p=Math.min(h,p)}n.push(m)}return n}.call(this);i.push(a)}return i}.call(this);if(this.options.parseTime){this.data=this.data.sort(function(t,e){return(t.x>e.x)-(e.x>t.x)})}this.xmin=this.data[0].x;this.xmax=this.data[this.data.length-1].x;this.events=[];if(this.options.events.length>0){if(this.options.parseTime){this.events=function(){var t,e,i,n;i=this.options.events;n=[];for(t=0,e=i.length;t<e;t++){s=i[t];n.push(k.parseDate(s))}return n}.call(this)}else{this.events=this.options.events}this.xmax=Math.max(this.xmax,Math.max.apply(Math,this.events));this.xmin=Math.min(this.xmin,Math.min.apply(Math,this.events))}if(this.xmin===this.xmax){this.xmin-=1;this.xmax+=1}this.ymin=this.yboundary("min",p);this.ymax=this.yboundary("max",f);if(this.ymin===this.ymax){if(p){this.ymin-=1}this.ymax+=1}if((g=this.options.axes)===true||g==="both"||g==="y"||this.options.grid===true){if(this.options.ymax===this.gridDefaults.ymax&&this.options.ymin===this.gridDefaults.ymin){this.grid=this.autoGridLines(this.ymin,this.ymax,this.options.numLines);this.ymin=Math.min(this.ymin,this.grid[0]);this.ymax=Math.max(this.ymax,this.grid[this.grid.length-1])}else{c=(this.ymax-this.ymin)/(this.options.numLines-1);this.grid=function(){var t,e,i,n;n=[];for(u=t=e=this.ymin,i=this.ymax;c>0?t<=i:t>=i;u=t+=c){n.push(u)}return n}.call(this)}}this.dirty=true;if(t){return this.redraw()}};e.prototype.yboundary=function(t,e){var i,n;i=this.options["y"+t];if(typeof i==="string"){if(i.slice(0,4)==="auto"){if(i.length>5){n=parseInt(i.slice(5),10);if(e==null){return n}return Math[t](e,n)}else{if(e!=null){return e}else{return 0}}}else{return parseInt(i,10)}}else{return i}};e.prototype.autoGridLines=function(t,e,i){var n,s,r,o,a,l,c,h,u;a=e-t;u=Math.floor(Math.log(a)/Math.log(10));c=Math.pow(10,u);s=Math.floor(t/c)*c;n=Math.ceil(e/c)*c;l=(n-s)/(i-1);if(c===1&&l>1&&Math.ceil(l)!==l){l=Math.ceil(l);n=s+l*(i-1)}if(s<0&&n>0){s=Math.floor(t/l)*l;n=Math.ceil(e/l)*l}if(l<1){o=Math.floor(Math.log(l)/Math.log(10));r=function(){var t,e;e=[];for(h=t=s;l>0?t<=n:t>=n;h=t+=l){e.push(parseFloat(h.toFixed(1-o)))}return e}()}else{r=function(){var t,e;e=[];for(h=t=s;l>0?t<=n:t>=n;h=t+=l){e.push(h)}return e}()}return r};e.prototype._calc=function(){var t,s,e,n,i,r,o,a;i=this.el.width();e=this.el.height();if(this.elementWidth!==i||this.elementHeight!==e||this.dirty){this.elementWidth=i;this.elementHeight=e;this.dirty=false;this.left=this.options.padding;this.right=this.elementWidth-this.options.padding;this.top=this.options.padding;this.bottom=this.elementHeight-this.options.padding;if((o=this.options.axes)===true||o==="both"||o==="y"){r=function(){var t,e,i,n;i=this.grid;n=[];for(t=0,e=i.length;t<e;t++){s=i[t];n.push(this.measureText(this.yAxisFormat(s)).width)}return n}.call(this);this.left+=Math.max.apply(Math,r)}if((a=this.options.axes)===true||a==="both"||a==="x"){t=function(){var t,e,i;i=[];for(n=t=0,e=this.data.length;0<=e?t<e:t>e;n=0<=e?++t:--t){i.push(this.measureText(this.data[n].text,-this.options.xLabelAngle).height)}return i}.call(this);this.bottom-=Math.max.apply(Math,t)}this.width=Math.max(1,this.right-this.left);this.height=Math.max(1,this.bottom-this.top);this.dx=this.width/(this.xmax-this.xmin);this.dy=this.height/(this.ymax-this.ymin);if(this.calc){return this.calc()}}};e.prototype.transY=function(t){return this.bottom-(t-this.ymin)*this.dy};e.prototype.transX=function(t){if(this.data.length===1){return(this.left+this.right)/2}else{return this.left+(t-this.xmin)*this.dx}};e.prototype.redraw=function(){this.raphael.clear();this._calc();this.drawGrid();this.drawGoals();this.drawEvents();if(this.draw){return this.draw()}};e.prototype.measureText=function(t,e){var i,n;if(e==null){e=0}n=this.raphael.text(100,100,t).attr("font-size",this.options.gridTextSize).attr("font-family",this.options.gridTextFamily).attr("font-weight",this.options.gridTextWeight).rotate(e);i=n.getBBox();n.remove();return i};e.prototype.yAxisFormat=function(t){return this.yLabelFormat(t)};e.prototype.yLabelFormat=function(t){if(typeof this.options.yLabelFormat==="function"){return this.options.yLabelFormat(t)}else{return""+this.options.preUnits+k.commas(t)+this.options.postUnits}};e.prototype.drawGrid=function(){var t,e,i,n,s,r,o,a;if(this.options.grid===false&&((s=this.options.axes)!==true&&s!=="both"&&s!=="y")){return}r=this.grid;a=[];for(i=0,n=r.length;i<n;i++){t=r[i];e=this.transY(t);if((o=this.options.axes)===true||o==="both"||o==="y"){this.drawYAxisLabel(this.left-this.options.padding/2,e,this.yAxisFormat(t))}if(this.options.grid){a.push(this.drawGridLine("M"+this.left+","+e+"H"+(this.left+this.width)))}else{a.push(void 0)}}return a};e.prototype.drawGoals=function(){var t,e,i,n,s,r,o;r=this.options.goals;o=[];for(i=n=0,s=r.length;n<s;i=++n){e=r[i];t=this.options.goalLineColors[i%this.options.goalLineColors.length];o.push(this.drawGoal(e,t))}return o};e.prototype.drawEvents=function(){var t,e,i,n,s,r,o;r=this.events;o=[];for(i=n=0,s=r.length;n<s;i=++n){e=r[i];t=this.options.eventLineColors[i%this.options.eventLineColors.length];o.push(this.drawEvent(e,t))}return o};e.prototype.drawGoal=function(t,e){return this.raphael.path("M"+this.left+","+this.transY(t)+"H"+this.right).attr("stroke",e).attr("stroke-width",this.options.goalStrokeWidth)};e.prototype.drawEvent=function(t,e){return this.raphael.path("M"+this.transX(t)+","+this.bottom+"V"+this.top).attr("stroke",e).attr("stroke-width",this.options.eventStrokeWidth)};e.prototype.drawYAxisLabel=function(t,e,i){return this.raphael.text(t,e,i).attr("font-size",this.options.gridTextSize).attr("font-family",this.options.gridTextFamily).attr("font-weight",this.options.gridTextWeight).attr("fill",this.options.gridTextColor).attr("text-anchor","end")};e.prototype.drawGridLine=function(t){return this.raphael.path(t).attr("stroke",this.options.gridLineColor).attr("stroke-width",this.options.gridStrokeWidth)};e.prototype.startRange=function(t){this.hover.hide();this.selectFrom=t;return this.selectionRect.attr({x:t,width:0}).show()};e.prototype.endRange=function(t){var e,i;if(this.selectFrom){i=Math.min(this.selectFrom,t);e=Math.max(this.selectFrom,t);this.options.rangeSelect.call(this.el,{start:this.data[this.hitTest(i)].x,end:this.data[this.hitTest(e)].x});return this.selectFrom=null}};e.prototype.resizeHandler=function(){this.timeoutId=null;this.raphael.setSize(this.el.width(),this.el.height());return this.redraw()};return e}(k.EventEmitter);k.parseDate=function(t){var e,i,n,s,r,o,a,l,c,h,u;if(typeof t==="number"){return t}i=t.match(/^(\d+) Q(\d)$/);s=t.match(/^(\d+)-(\d+)$/);r=t.match(/^(\d+)-(\d+)-(\d+)$/);a=t.match(/^(\d+) W(\d+)$/);l=t.match(/^(\d+)-(\d+)-(\d+)[ T](\d+):(\d+)(Z|([+-])(\d\d):?(\d\d))?$/);c=t.match(/^(\d+)-(\d+)-(\d+)[ T](\d+):(\d+):(\d+(\.\d+)?)(Z|([+-])(\d\d):?(\d\d))?$/);if(i){return new Date(parseInt(i[1],10),parseInt(i[2],10)*3-1,1).getTime()}else if(s){return new Date(parseInt(s[1],10),parseInt(s[2],10)-1,1).getTime()}else if(r){return new Date(parseInt(r[1],10),parseInt(r[2],10)-1,parseInt(r[3],10)).getTime()}else if(a){h=new Date(parseInt(a[1],10),0,1);if(h.getDay()!==4){h.setMonth(0,1+(4-h.getDay()+7)%7)}return h.getTime()+parseInt(a[2],10)*6048e5}else if(l){if(!l[6]){return new Date(parseInt(l[1],10),parseInt(l[2],10)-1,parseInt(l[3],10),parseInt(l[4],10),parseInt(l[5],10)).getTime()}else{o=0;if(l[6]!=="Z"){o=parseInt(l[8],10)*60+parseInt(l[9],10);if(l[7]==="+"){o=0-o}}return Date.UTC(parseInt(l[1],10),parseInt(l[2],10)-1,parseInt(l[3],10),parseInt(l[4],10),parseInt(l[5],10)+o)}}else if(c){u=parseFloat(c[6]);e=Math.floor(u);n=Math.round((u-e)*1e3);if(!c[8]){return new Date(parseInt(c[1],10),parseInt(c[2],10)-1,parseInt(c[3],10),parseInt(c[4],10),parseInt(c[5],10),e,n).getTime()}else{o=0;if(c[8]!=="Z"){o=parseInt(c[10],10)*60+parseInt(c[11],10);if(c[9]==="+"){o=0-o}}return Date.UTC(parseInt(c[1],10),parseInt(c[2],10)-1,parseInt(c[3],10),parseInt(c[4],10),parseInt(c[5],10)+o,e,n)}}else{return new Date(parseInt(t,10),0,1).getTime()}};k.Hover=function(){t.defaults={class:"morris-hover morris-default-style"};function t(t){if(t==null){t={}}this.options=g.extend({},k.Hover.defaults,t);this.el=g("<div class='"+this.options["class"]+"'></div>");this.el.hide();this.options.parent.append(this.el)}t.prototype.update=function(t,e,i){if(!t){return this.hide()}else{this.html(t);this.show();return this.moveTo(e,i)}};t.prototype.html=function(t){return this.el.html(t)};t.prototype.moveTo=function(t,e){var i,n,s,r,o,a;o=this.options.parent.innerWidth();r=this.options.parent.innerHeight();n=this.el.outerWidth();i=this.el.outerHeight();s=Math.min(Math.max(0,t-n/2),o-n);if(e!=null){a=e-i-10;if(a<0){a=e+10;if(a+i>r){a=r/2-i/2}}}else{a=r/2-i/2}return this.el.css({left:s+"px",top:parseInt(a)+"px"})};t.prototype.show=function(){return this.el.show()};t.prototype.hide=function(){return this.el.hide()};return t}();k.Line=function(t){r(e,t);function e(t){this.hilight=h(this.hilight,this);this.onHoverOut=h(this.onHoverOut,this);this.onHoverMove=h(this.onHoverMove,this);this.onGridClick=h(this.onGridClick,this);if(!(this instanceof k.Line)){return new k.Line(t)}e.__super__.constructor.call(this,t)}e.prototype.init=function(){if(this.options.hideHover!=="always"){this.hover=new k.Hover({parent:this.el});this.on("hovermove",this.onHoverMove);this.on("hoverout",this.onHoverOut);return this.on("gridclick",this.onGridClick)}};e.prototype.defaults={lineWidth:3,pointSize:4,lineColors:["#0b62a4","#7A92A3","#4da74d","#afd8f8","#edc240","#cb4b4b","#9440ed"],pointStrokeWidths:[1],pointStrokeColors:["#ffffff"],pointFillColors:[],smooth:true,xLabels:"auto",xLabelFormat:null,xLabelMargin:24,hideHover:false};e.prototype.calc=function(){this.calcPoints();return this.generatePaths()};e.prototype.calcPoints=function(){var s,r,t,e,i,n;i=this.data;n=[];for(t=0,e=i.length;t<e;t++){s=i[t];s._x=this.transX(s.x);s._y=function(){var t,e,i,n;i=s.y;n=[];for(t=0,e=i.length;t<e;t++){r=i[t];if(r!=null){n.push(this.transY(r))}else{n.push(r)}}return n}.call(this);n.push(s._ymax=Math.min.apply(Math,[this.bottom].concat(function(){var t,e,i,n;i=s._y;n=[];for(t=0,e=i.length;t<e;t++){r=i[t];if(r!=null){n.push(r)}}return n}())))}return n};e.prototype.hitTest=function(t){var e,i,n,s,r;if(this.data.length===0){return null}r=this.data.slice(1);for(e=n=0,s=r.length;n<s;e=++n){i=r[e];if(t<(i._x+this.data[e]._x)/2){break}}return e};e.prototype.onGridClick=function(t,e){var i;i=this.hitTest(t);return this.fire("click",i,this.data[i].src,t,e)};e.prototype.onHoverMove=function(t,e){var i;i=this.hitTest(t);return this.displayHoverForRow(i)};e.prototype.onHoverOut=function(){if(this.options.hideHover!==false){return this.displayHoverForRow(null)}};e.prototype.displayHoverForRow=function(t){var e;if(t!=null){(e=this.hover).update.apply(e,this.hoverContentForRow(t));return this.hilight(t)}else{this.hover.hide();return this.hilight()}};e.prototype.hoverContentForRow=function(t){var e,i,n,s,r,o,a;n=this.data[t];e="<div class='morris-hover-row-label'>"+n.label+"</div>";a=n.y;for(i=r=0,o=a.length;r<o;i=++r){s=a[i];e+="<div class='morris-hover-point' style='color: "+this.colorFor(n,i,"label")+"'>\n  "+this.options.labels[i]+":\n  "+this.yLabelFormat(s)+"\n</div>"}if(typeof this.options.hoverCallback==="function"){e=this.options.hoverCallback(t,this.options,e,n.src)}return[e,n._x,n._ymax]};e.prototype.generatePaths=function(){var s,r,o,a;return this.paths=function(){var t,e,i,n;n=[];for(r=t=0,e=this.options.ykeys.length;0<=e?t<e:t>e;r=0<=e?++t:--t){a=typeof this.options.smooth==="boolean"?this.options.smooth:(i=this.options.ykeys[r],l.call(this.options.smooth,i)>=0);s=function(){var t,e,i,n;i=this.data;n=[];for(t=0,e=i.length;t<e;t++){o=i[t];if(o._y[r]!==void 0){n.push({x:o._x,y:o._y[r]})}}return n}.call(this);if(s.length>1){n.push(k.Line.createPath(s,a,this.bottom))}else{n.push(null)}}return n}.call(this)};e.prototype.draw=function(){var t;if((t=this.options.axes)===true||t==="both"||t==="x"){this.drawXAxis()}this.drawSeries();if(this.options.hideHover===false){return this.displayHoverForRow(this.data.length-1)}};e.prototype.drawXAxis=function(){var t,e,i,a,l,s,c,n,r,o,h=this;c=this.bottom+this.options.padding/2;l=null;a=null;t=function(t,e){var i,n,s,r,o;i=h.drawXAxisLabel(h.transX(e),c,t);o=i.getBBox();i.transform("r"+-h.options.xLabelAngle);n=i.getBBox();i.transform("t0,"+n.height/2+"...");if(h.options.xLabelAngle!==0){r=-.5*o.width*Math.cos(h.options.xLabelAngle*Math.PI/180);i.transform("t"+r+",0...")}n=i.getBBox();if((l==null||l>=n.x+n.width||a!=null&&a>=n.x)&&n.x>=0&&n.x+n.width<h.el.width()){if(h.options.xLabelAngle!==0){s=1.25*h.options.gridTextSize/Math.sin(h.options.xLabelAngle*Math.PI/180);a=n.x-s}return l=n.x-h.options.xLabelMargin}else{return i.remove()}};if(this.options.parseTime){if(this.data.length===1&&this.options.xLabels==="auto"){i=[[this.data[0].label,this.data[0].x]]}else{i=k.labelSeries(this.xmin,this.xmax,this.width,this.options.xLabels,this.options.xLabelFormat)}}else{i=function(){var t,e,i,n;i=this.data;n=[];for(t=0,e=i.length;t<e;t++){s=i[t];n.push([s.label,s.x])}return n}.call(this)}i.reverse();o=[];for(n=0,r=i.length;n<r;n++){e=i[n];o.push(t(e[0],e[1]))}return o};e.prototype.drawSeries=function(){var t,e,i,n,s,r;this.seriesPoints=[];for(t=e=n=this.options.ykeys.length-1;n<=0?e<=0:e>=0;t=n<=0?++e:--e){this._drawLineFor(t)}r=[];for(t=i=s=this.options.ykeys.length-1;s<=0?i<=0:i>=0;t=s<=0?++i:--i){r.push(this._drawPointFor(t))}return r};e.prototype._drawPointFor=function(t){var e,i,n,s,r,o;this.seriesPoints[t]=[];r=this.data;o=[];for(n=0,s=r.length;n<s;n++){i=r[n];e=null;if(i._y[t]!=null){e=this.drawLinePoint(i._x,i._y[t],this.colorFor(i,t,"point"),t)}o.push(this.seriesPoints[t].push(e))}return o};e.prototype._drawLineFor=function(t){var e;e=this.paths[t];if(e!==null){return this.drawLinePath(e,this.colorFor(null,t,"line"),t)}};e.createPath=function(t,e,i){var n,s,r,o,a,l,c,h,u,d,f,p,m,g;c="";if(e){r=k.Line.gradients(t)}h={y:null};for(o=m=0,g=t.length;m<g;o=++m){n=t[o];if(n.y!=null){if(h.y!=null){if(e){s=r[o];l=r[o-1];a=(n.x-h.x)/4;u=h.x+a;f=Math.min(i,h.y+a*l);d=n.x-a;p=Math.min(i,n.y-a*s);c+="C"+u+","+f+","+d+","+p+","+n.x+","+n.y}else{c+="L"+n.x+","+n.y}}else{if(!e||r[o]!=null){c+="M"+n.x+","+n.y}}}h=n}return c};e.gradients=function(t){var e,i,n,s,r,o,a,l;i=function(t,e){return(t.y-e.y)/(t.x-e.x)};l=[];for(n=o=0,a=t.length;o<a;n=++o){e=t[n];if(e.y!=null){s=t[n+1]||{y:null};r=t[n-1]||{y:null};if(r.y!=null&&s.y!=null){l.push(i(r,s))}else if(r.y!=null){l.push(i(r,e))}else if(s.y!=null){l.push(i(e,s))}else{l.push(null)}}else{l.push(null)}}return l};e.prototype.hilight=function(t){var e,i,n,s,r;if(this.prevHilight!==null&&this.prevHilight!==t){for(e=i=0,s=this.seriesPoints.length-1;0<=s?i<=s:i>=s;e=0<=s?++i:--i){if(this.seriesPoints[e][this.prevHilight]){this.seriesPoints[e][this.prevHilight].animate(this.pointShrinkSeries(e))}}}if(t!==null&&this.prevHilight!==t){for(e=n=0,r=this.seriesPoints.length-1;0<=r?n<=r:n>=r;e=0<=r?++n:--n){if(this.seriesPoints[e][t]){this.seriesPoints[e][t].animate(this.pointGrowSeries(e))}}}return this.prevHilight=t};e.prototype.colorFor=function(t,e,i){if(typeof this.options.lineColors==="function"){return this.options.lineColors.call(this,t,e,i)}else if(i==="point"){return this.options.pointFillColors[e%this.options.pointFillColors.length]||this.options.lineColors[e%this.options.lineColors.length]}else{return this.options.lineColors[e%this.options.lineColors.length]}};e.prototype.drawXAxisLabel=function(t,e,i){return this.raphael.text(t,e,i).attr("font-size",this.options.gridTextSize).attr("font-family",this.options.gridTextFamily).attr("font-weight",this.options.gridTextWeight).attr("fill",this.options.gridTextColor)};e.prototype.drawLinePath=function(t,e,i){return this.raphael.path(t).attr("stroke",e).attr("stroke-width",this.lineWidthForSeries(i))};e.prototype.drawLinePoint=function(t,e,i,n){return this.raphael.circle(t,e,this.pointSizeForSeries(n)).attr("fill",i).attr("stroke-width",this.pointStrokeWidthForSeries(n)).attr("stroke",this.pointStrokeColorForSeries(n))};e.prototype.pointStrokeWidthForSeries=function(t){return this.options.pointStrokeWidths[t%this.options.pointStrokeWidths.length]};e.prototype.pointStrokeColorForSeries=function(t){return this.options.pointStrokeColors[t%this.options.pointStrokeColors.length]};e.prototype.lineWidthForSeries=function(t){if(this.options.lineWidth instanceof Array){return this.options.lineWidth[t%this.options.lineWidth.length]}else{return this.options.lineWidth}};e.prototype.pointSizeForSeries=function(t){if(this.options.pointSize instanceof Array){return this.options.pointSize[t%this.options.pointSize.length]}else{return this.options.pointSize}};e.prototype.pointGrowSeries=function(t){return Raphael.animation({r:this.pointSizeForSeries(t)+3},25,"linear")};e.prototype.pointShrinkSeries=function(t){return Raphael.animation({r:this.pointSizeForSeries(t)},25,"linear")};return e}(k.Grid);k.labelSeries=function(t,e,i,n,s){var r,o,a,l,c,h,u,d,f,p,m;a=200*(e-t)/i;o=new Date(t);u=k.LABEL_SPECS[n];if(u===void 0){m=k.AUTO_LABEL_ORDER;for(f=0,p=m.length;f<p;f++){l=m[f];h=k.LABEL_SPECS[l];if(a>=h.span){u=h;break}}}if(u===void 0){u=k.LABEL_SPECS["second"]}if(s){u=g.extend({},u,{fmt:s})}r=u.start(o);c=[];while((d=r.getTime())<=e){if(d>=t){c.push([u.fmt(r),d])}u.incr(r)}return c};t=function(e){return{span:e*60*1e3,start:function(t){return new Date(t.getFullYear(),t.getMonth(),t.getDate(),t.getHours())},fmt:function(t){return""+k.pad2(t.getHours())+":"+k.pad2(t.getMinutes())},incr:function(t){return t.setUTCMinutes(t.getUTCMinutes()+e)}}};e=function(e){return{span:e*1e3,start:function(t){return new Date(t.getFullYear(),t.getMonth(),t.getDate(),t.getHours(),t.getMinutes())},fmt:function(t){return""+k.pad2(t.getHours())+":"+k.pad2(t.getMinutes())+":"+k.pad2(t.getSeconds())},incr:function(t){return t.setUTCSeconds(t.getUTCSeconds()+e)}}};k.LABEL_SPECS={decade:{span:1728e8,start:function(t){return new Date(t.getFullYear()-t.getFullYear()%10,0,1)},fmt:function(t){return""+t.getFullYear()},incr:function(t){return t.setFullYear(t.getFullYear()+10)}},year:{span:1728e7,start:function(t){return new Date(t.getFullYear(),0,1)},fmt:function(t){return""+t.getFullYear()},incr:function(t){return t.setFullYear(t.getFullYear()+1)}},month:{span:24192e5,start:function(t){return new Date(t.getFullYear(),t.getMonth(),1)},fmt:function(t){return""+t.getFullYear()+"-"+k.pad2(t.getMonth()+1)},incr:function(t){return t.setMonth(t.getMonth()+1)}},week:{span:6048e5,start:function(t){return new Date(t.getFullYear(),t.getMonth(),t.getDate())},fmt:function(t){return""+t.getFullYear()+"-"+k.pad2(t.getMonth()+1)+"-"+k.pad2(t.getDate())},incr:function(t){return t.setDate(t.getDate()+7)}},day:{span:864e5,start:function(t){return new Date(t.getFullYear(),t.getMonth(),t.getDate())},fmt:function(t){return""+t.getFullYear()+"-"+k.pad2(t.getMonth()+1)+"-"+k.pad2(t.getDate())},incr:function(t){return t.setDate(t.getDate()+1)}},hour:t(60),"30min":t(30),"15min":t(15),"10min":t(10),"5min":t(5),minute:t(1),"30sec":e(30),"15sec":e(15),"10sec":e(10),"5sec":e(5),second:e(1)};k.AUTO_LABEL_ORDER=["decade","year","month","week","day","hour","30min","15min","10min","5min","minute","30sec","15sec","10sec","5sec","second"];k.Area=function(t){var i;r(n,t);i={fillOpacity:"auto",behaveLikeLine:false};function n(t){var e;if(!(this instanceof k.Area)){return new k.Area(t)}e=g.extend({},i,t);this.cumulative=!e.behaveLikeLine;if(e.fillOpacity==="auto"){e.fillOpacity=e.behaveLikeLine?.8:1}n.__super__.constructor.call(this,e)}n.prototype.calcPoints=function(){var s,r,o,t,e,i,n;i=this.data;n=[];for(t=0,e=i.length;t<e;t++){s=i[t];s._x=this.transX(s.x);r=0;s._y=function(){var t,e,i,n;i=s.y;n=[];for(t=0,e=i.length;t<e;t++){o=i[t];if(this.options.behaveLikeLine){n.push(this.transY(o))}else{r+=o||0;n.push(this.transY(r))}}return n}.call(this);n.push(s._ymax=Math.max.apply(Math,s._y))}return n};n.prototype.drawSeries=function(){var t,e,i,n,s,r,o,a,l,c,h;this.seriesPoints=[];if(this.options.behaveLikeLine){e=function(){l=[];for(var t=0,e=this.options.ykeys.length-1;0<=e?t<=e:t>=e;0<=e?t++:t--){l.push(t)}return l}.apply(this)}else{e=function(){c=[];for(var t=a=this.options.ykeys.length-1;a<=0?t<=0:t>=0;a<=0?t++:t--){c.push(t)}return c}.apply(this)}h=[];for(s=0,r=e.length;s<r;s++){t=e[s];this._drawFillFor(t);this._drawLineFor(t);h.push(this._drawPointFor(t))}return h};n.prototype._drawFillFor=function(t){var e;e=this.paths[t];if(e!==null){e=e+("L"+this.transX(this.xmax)+","+this.bottom+"L"+this.transX(this.xmin)+","+this.bottom+"Z");return this.drawFilledPath(e,this.fillForSeries(t))}};n.prototype.fillForSeries=function(t){var e;e=Raphael.rgb2hsl(this.colorFor(this.data[t],t,"line"));return Raphael.hsl(e.h,this.options.behaveLikeLine?e.s*.9:e.s*.75,Math.min(.98,this.options.behaveLikeLine?e.l*1.2:e.l*1.25))};n.prototype.drawFilledPath=function(t,e){return this.raphael.path(t).attr("fill",e).attr("fill-opacity",this.options.fillOpacity).attr("stroke","none")};return n}(k.Line);k.Bar=function(t){r(e,t);function e(t){this.onHoverOut=h(this.onHoverOut,this);this.onHoverMove=h(this.onHoverMove,this);this.onGridClick=h(this.onGridClick,this);if(!(this instanceof k.Bar)){return new k.Bar(t)}e.__super__.constructor.call(this,g.extend({},t,{parseTime:false}))}e.prototype.init=function(){this.cumulative=this.options.stacked;if(this.options.hideHover!=="always"){this.hover=new k.Hover({parent:this.el});this.on("hovermove",this.onHoverMove);this.on("hoverout",this.onHoverOut);return this.on("gridclick",this.onGridClick)}};e.prototype.defaults={barSizeRatio:.75,barGap:3,barColors:["#0b62a4","#7a92a3","#4da74d","#afd8f8","#edc240","#cb4b4b","#9440ed"],barOpacity:1,barRadius:[0,0,0,0],xLabelMargin:50};e.prototype.calc=function(){var t;this.calcBars();if(this.options.hideHover===false){return(t=this.hover).update.apply(t,this.hoverContentForRow(this.data.length-1))}};e.prototype.calcBars=function(){var t,s,r,e,i,n,o;n=this.data;o=[];for(t=e=0,i=n.length;e<i;t=++e){s=n[t];s._x=this.left+this.width*(t+.5)/this.data.length;o.push(s._y=function(){var t,e,i,n;i=s.y;n=[];for(t=0,e=i.length;t<e;t++){r=i[t];if(r!=null){n.push(this.transY(r))}else{n.push(null)}}return n}.call(this))}return o};e.prototype.draw=function(){var t;if((t=this.options.axes)===true||t==="both"||t==="x"){this.drawXAxis()}return this.drawSeries()};e.prototype.drawXAxis=function(){var t,e,i,n,s,r,o,a,l,c,h,u,d;c=this.bottom+(this.options.xAxisLabelTopPadding||this.options.padding/2);o=null;r=null;d=[];for(t=h=0,u=this.data.length;0<=u?h<u:h>u;t=0<=u?++h:--h){a=this.data[this.data.length-1-t];e=this.drawXAxisLabel(a._x,c,a.label);l=e.getBBox();e.transform("r"+-this.options.xLabelAngle);i=e.getBBox();e.transform("t0,"+i.height/2+"...");if(this.options.xLabelAngle!==0){s=-.5*l.width*Math.cos(this.options.xLabelAngle*Math.PI/180);e.transform("t"+s+",0...")}if((o==null||o>=i.x+i.width||r!=null&&r>=i.x)&&i.x>=0&&i.x+i.width<this.el.width()){if(this.options.xLabelAngle!==0){n=1.25*this.options.gridTextSize/Math.sin(this.options.xLabelAngle*Math.PI/180);r=i.x-n}d.push(o=i.x-this.options.xLabelMargin)}else{d.push(e.remove())}}return d};e.prototype.drawSeries=function(){var s,r,o,a,l,c,h,t,u,d,f,e,p,m,g;o=this.width/this.options.data.length;t=this.options.stacked?1:this.options.ykeys.length;s=(o*this.options.barSizeRatio-this.options.barGap*(t-1))/t;if(this.options.barSize){s=Math.min(s,this.options.barSize)}e=o-s*t-this.options.barGap*(t-1);h=e/2;g=this.ymin<=0&&this.ymax>=0?this.transY(0):null;return this.bars=function(){var t,e,i,n;i=this.data;n=[];for(a=t=0,e=i.length;t<e;a=++t){u=i[a];l=0;n.push(function(){var t,e,i,n;i=u._y;n=[];for(d=t=0,e=i.length;t<e;d=++t){m=i[d];if(m!==null){if(g){p=Math.min(m,g);r=Math.max(m,g)}else{p=m;r=this.bottom}c=this.left+a*o+h;if(!this.options.stacked){c+=d*(s+this.options.barGap)}f=r-p;if(this.options.verticalGridCondition&&this.options.verticalGridCondition(u.x)){this.drawBar(this.left+a*o,this.top,o,Math.abs(this.top-this.bottom),this.options.verticalGridColor,this.options.verticalGridOpacity,this.options.barRadius)}if(this.options.stacked){p-=l}this.drawBar(c,p,s,f,this.colorFor(u,d,"bar"),this.options.barOpacity,this.options.barRadius);n.push(l+=f)}else{n.push(null)}}return n}.call(this))}return n}.call(this)};e.prototype.colorFor=function(t,e,i){var n,s;if(typeof this.options.barColors==="function"){n={x:t.x,y:t.y[e],label:t.label};s={index:e,key:this.options.ykeys[e],label:this.options.labels[e]};return this.options.barColors.call(this,n,s,i)}else{return this.options.barColors[e%this.options.barColors.length]}};e.prototype.hitTest=function(t){if(this.data.length===0){return null}t=Math.max(Math.min(t,this.right),this.left);return Math.min(this.data.length-1,Math.floor((t-this.left)/(this.width/this.data.length)))};e.prototype.onGridClick=function(t,e){var i;i=this.hitTest(t);return this.fire("click",i,this.data[i].src,t,e)};e.prototype.onHoverMove=function(t,e){var i,n;i=this.hitTest(t);return(n=this.hover).update.apply(n,this.hoverContentForRow(i))};e.prototype.onHoverOut=function(){if(this.options.hideHover!==false){return this.hover.hide()}};e.prototype.hoverContentForRow=function(t){var e,i,n,s,r,o,a,l;n=this.data[t];e="<div class='morris-hover-row-label'>"+n.label+"</div>";l=n.y;for(i=o=0,a=l.length;o<a;i=++o){r=l[i];e+="<div class='morris-hover-point' style='color: "+this.colorFor(n,i,"label")+"'>\n  "+this.options.labels[i]+":\n  "+this.yLabelFormat(r)+"\n</div>"}if(typeof this.options.hoverCallback==="function"){e=this.options.hoverCallback(t,this.options,e,n.src)}s=this.left+(t+.5)*this.width/this.data.length;return[e,s]};e.prototype.drawXAxisLabel=function(t,e,i){var n;return n=this.raphael.text(t,e,i).attr("font-size",this.options.gridTextSize).attr("font-family",this.options.gridTextFamily).attr("font-weight",this.options.gridTextWeight).attr("fill",this.options.gridTextColor)};e.prototype.drawBar=function(t,e,i,n,s,r,o){var a,l;a=Math.max.apply(Math,o);if(a===0||a>n){l=this.raphael.rect(t,e,i,n)}else{l=this.raphael.path(this.roundedRect(t,e,i,n,o))}return l.attr("fill",s).attr("fill-opacity",r).attr("stroke","none")};e.prototype.roundedRect=function(t,e,i,n,s){if(s==null){s=[0,0,0,0]}return["M",t,s[0]+e,"Q",t,e,t+s[0],e,"L",t+i-s[1],e,"Q",t+i,e,t+i,e+s[1],"L",t+i,e+n-s[2],"Q",t+i,e+n,t+i-s[2],e+n,"L",t+s[3],e+n,"Q",t,e+n,t,e+n-s[3],"Z"]};return e}(k.Grid);k.Donut=function(t){r(e,t);e.prototype.defaults={colors:["#0B62A4","#3980B5","#679DC6","#95BBD7","#B0CCE1","#095791","#095085","#083E67","#052C48","#042135"],backgroundColor:"#FFFFFF",labelColor:"#000000",formatter:k.commas,resize:false};function e(t){this.resizeHandler=h(this.resizeHandler,this);this.select=h(this.select,this);this.click=h(this.click,this);var e=this;if(!(this instanceof k.Donut)){return new k.Donut(t)}this.options=g.extend({},this.defaults,t);if(typeof t.element==="string"){this.el=g(document.getElementById(t.element))}else{this.el=g(t.element)}if(this.el===null||this.el.length===0){throw new Error("Graph placeholder not found.")}if(t.data===void 0||t.data.length===0){return}this.raphael=new Raphael(this.el[0]);if(this.options.resize){g(window).bind("resize",function(t){if(e.timeoutId!=null){window.clearTimeout(e.timeoutId)}return e.timeoutId=window.setTimeout(e.resizeHandler,100)})}this.setData(t.data)}e.prototype.redraw=function(){var t,e,i,n,s,r,o,a,l,c,h,u,d,f,p,m,g,v,y,b,w,x,_;this.raphael.clear();e=this.el.width()/2;i=this.el.height()/2;d=(Math.min(e,i)-10)/3;h=0;b=this.values;for(f=0,g=b.length;f<g;f++){u=b[f];h+=u}a=5/(2*d);t=1.9999*Math.PI-a*this.data.length;r=0;s=0;this.segments=[];w=this.values;for(n=p=0,v=w.length;p<v;n=++p){u=w[n];l=r+a+t*(u/h);c=new k.DonutSegment(e,i,d*2,d,r,l,this.data[n].color||this.options.colors[s%this.options.colors.length],this.options.backgroundColor,s,this.raphael);c.render();this.segments.push(c);c.on("hover",this.select);c.on("click",this.click);r=l;s+=1}this.text1=this.drawEmptyDonutLabel(e,i-10,this.options.labelColor,15,800);this.text2=this.drawEmptyDonutLabel(e,i+10,this.options.labelColor,14);o=Math.max.apply(Math,this.values);s=0;x=this.values;_=[];for(m=0,y=x.length;m<y;m++){u=x[m];if(u===o){this.select(s);break}_.push(s+=1)}return _};e.prototype.setData=function(t){var s;this.data=t;this.values=function(){var t,e,i,n;i=this.data;n=[];for(t=0,e=i.length;t<e;t++){s=i[t];n.push(parseFloat(s.value))}return n}.call(this);return this.redraw()};e.prototype.click=function(t){return this.fire("click",t,this.data[t])};e.prototype.select=function(t){var e,i,n,s,r,o;o=this.segments;for(s=0,r=o.length;s<r;s++){i=o[s];i.deselect()}n=this.segments[t];n.select();e=this.data[t];return this.setLabels(e.label,this.options.formatter(e.value,e))};e.prototype.setLabels=function(t,e){var i,n,s,r,o,a,l,c;i=(Math.min(this.el.width()/2,this.el.height()/2)-10)*2/3;r=1.8*i;s=i/2;n=i/3;this.text1.attr({text:t,transform:""});o=this.text1.getBBox();a=Math.min(r/o.width,s/o.height);this.text1.attr({transform:"S"+a+","+a+","+(o.x+o.width/2)+","+(o.y+o.height)});this.text2.attr({text:e,transform:""});l=this.text2.getBBox();c=Math.min(r/l.width,n/l.height);return this.text2.attr({transform:"S"+c+","+c+","+(l.x+l.width/2)+","+l.y})};e.prototype.drawEmptyDonutLabel=function(t,e,i,n,s){var r;r=this.raphael.text(t,e,"").attr("font-size",n).attr("fill",i);if(s!=null){r.attr("font-weight",s)}return r};e.prototype.resizeHandler=function(){this.timeoutId=null;this.raphael.setSize(this.el.width(),this.el.height());return this.redraw()};return e}(k.EventEmitter);k.DonutSegment=function(t){r(e,t);function e(t,e,i,n,s,r,o,a,l,c){this.cx=t;this.cy=e;this.inner=i;this.outer=n;this.color=o;this.backgroundColor=a;this.index=l;this.raphael=c;this.deselect=h(this.deselect,this);this.select=h(this.select,this);this.sin_p0=Math.sin(s);this.cos_p0=Math.cos(s);this.sin_p1=Math.sin(r);this.cos_p1=Math.cos(r);this.is_long=r-s>Math.PI?1:0;this.path=this.calcSegment(this.inner+3,this.inner+this.outer-5);this.selectedPath=this.calcSegment(this.inner+3,this.inner+this.outer);this.hilight=this.calcArc(this.inner)}e.prototype.calcArcPoints=function(t){return[this.cx+t*this.sin_p0,this.cy+t*this.cos_p0,this.cx+t*this.sin_p1,this.cy+t*this.cos_p1]};e.prototype.calcSegment=function(t,e){var i,n,s,r,o,a,l,c,h,u;h=this.calcArcPoints(t),i=h[0],s=h[1],n=h[2],r=h[3];u=this.calcArcPoints(e),o=u[0],l=u[1],a=u[2],c=u[3];return"M"+i+","+s+("A"+t+","+t+",0,"+this.is_long+",0,"+n+","+r)+("L"+a+","+c)+("A"+e+","+e+",0,"+this.is_long+",1,"+o+","+l)+"Z"};e.prototype.calcArc=function(t){var e,i,n,s,r;r=this.calcArcPoints(t),e=r[0],n=r[1],i=r[2],s=r[3];return"M"+e+","+n+("A"+t+","+t+",0,"+this.is_long+",0,"+i+","+s)};e.prototype.render=function(){var t=this;this.arc=this.drawDonutArc(this.hilight,this.color);return this.seg=this.drawDonutSegment(this.path,this.color,this.backgroundColor,function(){return t.fire("hover",t.index)},function(){return t.fire("click",t.index)})};e.prototype.drawDonutArc=function(t,e){return this.raphael.path(t).attr({stroke:e,"stroke-width":2,opacity:0})};e.prototype.drawDonutSegment=function(t,e,i,n,s){return this.raphael.path(t).attr({fill:e,stroke:i,"stroke-width":3}).hover(n).click(s)};e.prototype.select=function(){if(!this.selected){this.seg.animate({path:this.selectedPath},150,"<>");this.arc.animate({opacity:1},150,"<>");return this.selected=true}};e.prototype.deselect=function(){if(this.selected){this.seg.animate({path:this.path},150,"<>");this.arc.animate({opacity:0},150,"<>");return this.selected=false}};return e}(k.EventEmitter)}).call(this);!function(t){"function"==typeof define&&define.amd?define(["jquery"],t):t("object"==typeof exports?require("jquery"):jQuery)}(function($){"use strict";var escape=/["\\\x00-\x1f\x7f-\x9f]/g,meta={"\b":"\\b","\t":"\\t","\n":"\\n","\f":"\\f","\r":"\\r",'"':'\\"',"\\":"\\\\"},hasOwn=Object.prototype.hasOwnProperty;$.toJSON="object"==typeof JSON&&JSON.stringify?JSON.stringify:function(t){if(null===t)return"null";var e,i,n,s,r=$.type(t);if("undefined"!==r){if("number"===r||"boolean"===r)return String(t);if("string"===r)return $.quoteString(t);if("function"==typeof t.toJSON)return $.toJSON(t.toJSON());if("date"===r){var o=t.getUTCMonth()+1,a=t.getUTCDate(),l=t.getUTCFullYear(),c=t.getUTCHours(),h=t.getUTCMinutes(),u=t.getUTCSeconds(),d=t.getUTCMilliseconds();return o<10&&(o="0"+o),a<10&&(a="0"+a),c<10&&(c="0"+c),h<10&&(h="0"+h),u<10&&(u="0"+u),d<100&&(d="0"+d),d<10&&(d="0"+d),'"'+l+"-"+o+"-"+a+"T"+c+":"+h+":"+u+"."+d+'Z"'}if(e=[],$.isArray(t)){for(i=0;i<t.length;i++)e.push($.toJSON(t[i])||"null");return"["+e.join(",")+"]"}if("object"==typeof t){for(i in t)if(hasOwn.call(t,i)){if(r=typeof i,"number"===r)n='"'+i+'"';else{if("string"!==r)continue;n=$.quoteString(i)}r=typeof t[i],"function"!==r&&"undefined"!==r&&(s=$.toJSON(t[i]),e.push(n+":"+s))}return"{"+e.join(",")+"}"}}},$.evalJSON="object"==typeof JSON&&JSON.parse?JSON.parse:function(str){return eval("("+str+")")},$.secureEvalJSON="object"==typeof JSON&&JSON.parse?JSON.parse:function(str){var filtered=str.replace(/\\["\\\/bfnrtu]/g,"@").replace(/"[^"\\\n\r]*"|true|false|null|-?\d+(?:\.\d*)?(?:[eE][+\-]?\d+)?/g,"]").replace(/(?:^|:|,)(?:\s*\[)+/g,"");if(/^[\],:{}\s]*$/.test(filtered))return eval("("+str+")");throw new SyntaxError("Error parsing JSON, source is not valid.")},$.quoteString=function(t){return t.match(escape)?'"'+t.replace(escape,function(t){var e=meta[t];return"string"==typeof e?e:(e=t.charCodeAt(),"\\u00"+Math.floor(e/16).toString(16)+(e%16).toString(16))})+'"':'"'+t+'"'}});(function(s){"use strict";var n=0;var e={listinit:function(){s('a[data-action="delPoint"]').on("click",function(){var t=s(this).attr("data-id");swal({title:"Подтвердите удаление точки?",text:"Послу удаление точки её использование будет невозможно!",type:"warning",showCancelButton:true,confirmButtonColor:"#DD6B55",confirmButtonText:"Да, удалить!",cancelButtonText:"Отмена",closeOnConfirm:false},function(){e.delPoint(t)})});s('select[name="partnersel"]').on("change",function(){var t=s('select[name="magazsel"] :selected').val();var e=s(this).val();i(t,e)});s('select[name="magazsel"]').on("change",function(){var t=s('select[name="partnersel"] :selected').val();var e=s(this).val();i(e,t)});function i(t,e){if(t>0&&e>0){s('tr[data-partner = "'+e+'"][data-magaz = "'+t+'"]').show();s('tr[data-magaz][data-partner != "'+e+'"], tr[data-magaz][data-magaz != "'+t+'"]').hide();s("#PointAddBtn").attr("href","point-add/"+e)}else if(e>0){s('tr[data-partner = "'+e+'"]').show();s('tr[data-magaz][data-partner != "'+e+'"]').hide();s("#PointAddBtn").attr("href","point-add/"+e)}else if(t>0){s('tr[data-magaz = "'+t+'"]').show();s('tr[data-magaz][data-magaz != "'+t+'"]').hide()}else{s("tr[data-magaz]").show()}}},init:function(){s("#pointeditform").on("submit",function(){e.savePoint();return false});s('select[name="IsCustom"]').on("change",function(){if(s(this).val()==1){s("#siteConstructBtn").show()}else{s("#siteConstructBtn").hide()}}).trigger("change");s("#siteConstructBtn").on("click",function(){var t=s("#pointeditform").find('[name="ID"]').val();var e=s("#pointeditform").find('[name="idpart"]').val();if(t>0&&e>0){window.location="/partner/uslug/add?IdPartner="+e+"&IdUsl="+t}});s("#showKodModal").on("show.bs.modal",function(t){var e=s(t.relatedTarget).attr("data-id");s(t.currentTarget).find(".modal-body").html("<p>Код для размещения на сайте: "+'<p><code>&lt;script src="https://qroplata.ru/shop.js"&gt;&lt;/script&gt;<br>'+'&lt;a href="javascript:windowOpen.showQR({id:&apos;'+e+'&apos;});">Оплатить&lt;/a&gt;'+"</code>")});s("#modalMailInfo").on("show.bs.modal",function(t){s("#summernote").summernote({toolbar:[["style",["bold","italic","underline","clear"]],["fontsize",["fontsize"]],["color",["color"]],["para",["ul","ol","paragraph"]]]});s("#summernote").summernote("code",s('input[name="EmailShablon"]').val());s("#summernote").summernote("focus")});s("#modalMailInfoSave").on("click",function(){var t=s("#summernote").summernote("code");s("#summernote").summernote("destroy");s('input[name="EmailShablon"]').val(t);s("#modalMailInfo").modal("hide")});s("#colorpickerField1, #colorpickerField2").ColorPicker({onSubmit:function(t,e,i,n){s(n).val(e);s(n).ColorPickerHide()},onBeforeShow:function(){s(this).ColorPickerSetColor(this.value)}}).on("keyup",function(){s(this).ColorPickerSetColor(this.value)})},savePoint:function(){toastr.options={closeButton:true,progressBar:true,showMethod:"slideDown",timeOut:1e3};var t=new FormData(s("#pointeditform")[0]);if(n){n.abort()}n=s.ajax({type:"POST",url:"/partner/uslug/point-save",data:t,cache:false,contentType:false,processData:false,beforeSend:function(){s("#pointeditform").closest(".ibox-content").toggleClass("sk-loading")},success:function(t){if(t.status==1){toastr.success("Ok","Точка сохранена");if(t.id){window.location="/partner/uslug/point-edit/"+t.id}}else{toastr.error(t.error,"Ошибка")}s("#pointeditform").closest(".ibox-content").toggleClass("sk-loading")},error:function(t){s("#pointeditform").closest(".ibox-content").toggleClass("sk-loading");toastr.error("Ошибка запроса","Ошибка")}})},delPoint:function(t){if(n){n.abort()}var e=s('meta[name="csrf-token"]').attr("content");var i=s("#IdPartner").val();n=s.ajax({type:"POST",url:"/partner/uslug/point-del",data:{id:t,_csrf:e},beforeSend:function(){},success:function(t){swal({title:"Точка удалена!",text:"Точка была удалена.",type:"success"},function(){window.location="/partner/uslug/index"})},error:function(t){}})}};window.points=e})(jQuery||$);(function(l){"use strict";toastr.options={closeButton:true,progressBar:true,showMethod:"slideDown",timeOut:1e3,escapeHtml:true};let s=0;let t={login:function(){toastr.options={closeButton:true,progressBar:true,showMethod:"slideDown",timeOut:1e3,escapeHtml:true};if(s){s.abort()}s=l.ajax({type:"POST",url:"/partner/login",data:l("#loginform").serialize(),beforeSend:function(){},success:function(t){if(t.status===0){toastr.error("Неверный логин / пароль","Ошибка")}if(t.status===1){window.location.href="/partner/index"}if(t.status===2){l("#loginform .login").hide();l("#loginform .password").hide();let t=l("#loginform .token");if(t.prop("required")!==undefined){toastr.error("Неверный токен","Ошибка")}t.show().prop("required",true)}if(t.status===4){toastr.error("Неверный токен","Ошибка")}},error:function(t){if(t.status!=302){l("#loginerror").show();toastr.error("Ошибка авторизации","Ошибка");window.location.reload()}}})},changepassw:function(){l("#passwform").on("submit",function(t){toastr.options={closeButton:true,progressBar:true,showMethod:"slideDown",timeOut:1e3,escapeHtml:true};try{const e=l('[name="oldpassw"]').val();const i=l('[name="passw"]').val();const n=l('[name="passw2"]').val();if(e===i){toastr.error("Ошибка, старый и новый пароли не должны совпадать","Ошибка");return t.preventDefault()}else if(i!==n){toastr.error("Ошибка, введенные пароли не совпадают","Ошибка");return t.preventDefault()}}catch(t){console.log("ошибка валидации паролей",t)}if(s){s.abort()}s=l.ajax({type:"POST",url:"/partner/default/changepw",data:l("#passwform").serialize(),beforeSend:function(){l("#formProfileUser").closest(".ibox-content").toggleClass("sk-loading")},success:function(t){l("#formProfileUser").closest(".ibox-content").toggleClass("sk-loading");if(t.status==1){toastr.success("OK","Пароль изменен");l("#passwform").reset()}else{toastr.error("Ошибка, введенные пароли не соответствуют требованиям","Ошибка")}},error:function(){l("#formProfileUser").closest(".ibox-content").toggleClass("sk-loading");toastr.error("Ошибка запроса","Ошибка")}});return false})}};let c={statlistreq:function(t){if(s){s.abort()}s=l.ajax({type:"POST",url:"/partner/stat/listdata?page="+t,data:l("#statlistform").serialize(),beforeSend:function(){l("#statlistform").closest(".ibox-content").toggleClass("sk-loading")},success:function(t){l("#statlistform").closest(".ibox-content").toggleClass("sk-loading");if(t.status==1){l("#statlistresult").html(t.data);l(".pagination a").each(function(){l(this).removeAttr("href");l(this).attr("onclick","lk.statlistreq("+(parseInt(l(this).attr("data-page"))+1)+");")})}else{l("#statlistresult").html("<p class='text-center'>"+t.message+"</p>")}},error:function(){l("#statlistform").closest(".ibox-content").toggleClass("sk-loading");l("#statlistresult").html("<p class='text-center'>Ошибка</p>")}})},statrecalcreq:function(t){if(s){s.abort()}s=l.ajax({type:"POST",url:"/partner/stat/recalcdata?page="+t,data:l("#statrecalcform").serialize(),beforeSend:function(){l("#statrecalcform").closest(".ibox-content").toggleClass("sk-loading")},success:function(t){l("#statrecalcform").closest(".ibox-content").toggleClass("sk-loading");if(t.status==1){l("#statlistresult").html(t.data);l(".pagination a").each(function(){l(this).removeAttr("href");l(this).attr("onclick","lk.statrecalcreq("+(parseInt(l(this).attr("data-page"))+1)+");")})}else{l("#statlistresult").html("<p class='text-center'>"+t.message+"</p>")}},error:function(){l("#statrecalcform").closest(".ibox-content").toggleClass("sk-loading");l("#statlistresult").html("<p class='text-center'>Ошибка</p>")}})},statlist:function(){this.excerpt();l('[name="calDay"],[name="calWeek"],[name="calMon"]').on("click",function(){l('[name="calDay"]').removeClass("active");l('[name="calWeek"]').removeClass("active");l('[name="calMon"]').removeClass("active");l(this).addClass("active");let t,e;t=moment(new Date).hour(23).minute(59).seconds(59);e=moment(new Date).hour(0).minute(0).seconds(0);if(l(this).attr("name")=="calDay"){l('[name="datefrom"]').data("DateTimePicker").date(e);l('[name="dateto"]').data("DateTimePicker").date(t)}else if(l(this).attr("name")=="calWeek"){e=e.subtract(7,"days");l('[name="datefrom"]').data("DateTimePicker").date(e);l('[name="dateto"]').data("DateTimePicker").date(t)}else if(l(this).attr("name")=="calMon"){e=e.subtract(1,"months");l('[name="datefrom"]').data("DateTimePicker").date(e);l('[name="dateto"]').data("DateTimePicker").date(t)}});l('[name="datefrom"],[name="dateto"]').datetimepicker({format:"DD.MM.YYYY HH:mm",showClose:true});l("#statlistform").on("submit",function(){c.statlistreq(1);return false});l("#statrecalcform").on("submit",function(){c.statrecalcreq(1);return false});l("#statlistresult").on("click",'[data-action="cancelpay"]',function(){let e=parseInt(l(this).attr("data-id"));let t=l(this).attr("data-remaining-amount")||"0";let i=l(this).attr("data-refund-amount")||"0";let n=l(this).attr("data-full-amount")||"0";swal({title:"Подтвердите возврат платежа",text:"Послу возврата платежа средства будут возвращены клиенту!\nПолная сумма платежа: "+n+"\n\nВозвращено: "+i+"\nОсталось: "+t,type:"input",inputType:"number",inputValue:t,showCancelButton:true,confirmButtonColor:"#DD6B55",confirmButtonText:"Вернуть",cancelButtonText:"Отмена",closeOnConfirm:false},function(t){t=parseFloat(t);if(isNaN(t)){swal.showInputError("Укажите сумму возврата!");return false}if(s){s.abort()}s=l.ajax({type:"POST",url:"/partner/stat/reversorder",data:JSON.stringify({id:e,refundSum:t}),dataType:"json",contentType:"application/json",beforeSend:function(){l("#statlistform").closest(".ibox-content").toggleClass("sk-loading")},success:function(e){l("#statlistform").closest(".ibox-content").toggleClass("sk-loading");if(e.status==1){swal({title:"ОК",text:e.message,type:"success"},function(){l("#statlistform").trigger("submit")})}else{let t=e.errors?Object.values(e.errors).map(function(t){return t.join("\n")}).join("\n"):"Ошибка выполнения";swal({title:"Ошибка",text:t,type:"error"},function(){l("#statlistform").trigger("submit")})}},error:function(){l("#statlistform").closest(".ibox-content").toggleClass("sk-loading");swal({title:"Ошибка",text:"Ошибка запроса",type:"error"},function(){l("#statlistform").trigger("submit")})}})});return false});l("#statlistresult").on("click",'[data-action="logpay"]',function(t){t.preventDefault();let e=l(this).attr("data-id");l.ajax({data:"paySchetId="+e,method:"post",url:"/partner/stat/log",success:function(t){if(t.status===1){l(".pdf-modal .modal-body").html(t.data);l(".pdf-modal .modal-footer").hide();l(".pdf-modal .modal-header h3").html("Лог изменений");l(".pdf-modal").modal("show")}else{l("#statlistform").closest(".ibox-content").toggleClass("sk-loading");swal({title:"Ошибка",text:t.message,type:"error"},function(){l("#statlistform").closest(".ibox-content").toggleClass("sk-loading")})}},error:function(t){l("#statlistform").closest(".ibox-content").toggleClass("sk-loading");swal({title:"Ошибка",text:"Ошибка на сервере. Пожалуйста обратитесь в тех. поддержку.",type:"error"},function(){l("#statlistform").closest(".ibox-content").toggleClass("sk-loading")})}})});l("#statlistresult").on("click",'[data-action="update-status-pay"]',function(){let t=l(this).attr("data-id");swal({title:"Подтвердите запрос на обновление статуса",text:"Запрос встанет в очереь на обработку",type:"warning",showCancelButton:true,confirmButtonColor:"#DD6B55",confirmButtonText:"Да, обновить!",cancelButtonText:"Нет, не обновлять",closeOnConfirm:false},function(){if(s){s.abort()}s=l.ajax({type:"POST",url:"/partner/stat/update-status-pay",data:{id:t},beforeSend:function(){l("#statlistform").closest(".ibox-content").toggleClass("sk-loading")},success:function(t){l("#statlistform").closest(".ibox-content").toggleClass("sk-loading");if(t.status==1){swal({title:"ОК",text:t.message,type:"success"},function(){l("#statlistform").trigger("submit")})}else{swal({title:"Ошибка",text:t.message,type:"error"},function(){l("#statlistform").trigger("submit")})}},error:function(){l("#statlistform").closest(".ibox-content").toggleClass("sk-loading");swal({title:"Ошибка",text:"Ошибка запроса",type:"error"},function(){l("#statlistform").trigger("submit")})}})});return false});var i=function(t){t.preventDefault();var i=l(this);swal({title:"Внимание!",text:"Данная процедура перезапишет данные по операции внутри базы.\nНенадлежащее использование может повлечь за собой возмущение клиента или финансовые потери!!!",type:"warning",showCancelButton:true,showLoaderOnConfirm:true,closeOnConfirm:false,closeOnCancel:true,confirmButtonColor:"#DD6B55",confirmButtonText:"Сохранить",cancelButtonText:"Отмена"},function(t){if(t){var e=i.serialize();l.ajax({url:i.attr("action"),type:i.attr("method"),data:e,success:function(t){console.log(t);if(t.status===0){swal({title:"Успешно сохранено",type:"success"},function(){l("#transaction-edit-modal").modal("hide");l("#statlistform").trigger("submit")})}else{swal({title:"Ошибка",text:t.errors.join("\n"),type:"error"})}},error:function(){swal({title:"Ошибка",text:"Внутренняя ошибка сервера",type:"error"},function(){l("#transaction-edit-modal").modal("hide")})}})}else{console.log("closed")}})};l("#statlistresult").on("click",'[data-action="transaction-edit"]',function(t){t.preventDefault();l("#statlistform").closest(".ibox-content").addClass("sk-loading");var e=l(this).attr("data-id");l.ajax({url:"/partner/stat/transaction-edit-modal/"+e,success:function(t){l("#statlistform").closest(".ibox-content").removeClass("sk-loading");l("#transaction-edit-wrapper").html(t);l("#transaction-edit-modal").modal();l("#transaction-edit-modal-form").on("submit",i)},error:function(t){l("#statlistform").closest(".ibox-content").removeClass("sk-loading");console.log(t)}})})},getErrors:function(t){let e=[];for(const i in t){e.push(t[i].join("<br/>"))}return e.join("<br/>")},diffHideAll:function(){l("#registrySelectColumnGroup").css("display","none");l("#registryStatusColumnGroup").css("display","none");l("#dbColumnGroup").css("display","none");l("#registryStatuses").css("display","none");l("#allRegistryStatusSuccess").css("display","none")},diffDataReq:function(){l.ajax({type:"POST",enctype:"multipart/form-data",url:"/partner/stat/diff-data",data:new FormData(l("#diffForm")[0]),processData:false,contentType:false,beforeSend:function(){l("#diffForm").closest(".ibox-content").toggleClass("sk-loading")},success:function(t){l("#diffForm").closest(".ibox-content").toggleClass("sk-loading");if(t.status===1){l("#diffDataResult").html(t.data)}else{if(t.errors){l("#diffDataResult").html("<p class='text-center'>"+c.getErrors(t.errors)+"</p>")}else{l("#diffDataResult").html("<p class='text-center'>Ошибка</p>")}}},error:function(){l("#diffForm").closest(".ibox-content").toggleClass("sk-loading");l("#diffDataResult").html("<p class='text-center'>Ошибка</p>")}})},diffColumnsReq:function(){l.ajax({type:"POST",enctype:"multipart/form-data",url:"/partner/stat/diff-columns",data:new FormData(l("#diffForm")[0]),processData:false,contentType:false,beforeSend:function(){l("#diffForm").closest(".ibox-content").toggleClass("sk-loading")},success:function(t){if(t.status===0){l("#diffForm").closest(".ibox-content").toggleClass("sk-loading");if(t.errors){l("#diffDataResult").html("<p class='text-center'>"+c.getErrors(t.errors)+"</p>")}else{l("#diffDataResult").html("<p class='text-center'>Ошибка</p>")}return}const e=t.dbColumns;const i=t.settings;l("#registrySelectColumn").val(i?i.RegistrySelectColumn:"");l("#registryStatusColumn").val(i?i.RegistryStatusColumn:"");const n=l("#dbColumn");n.empty();for(const s of e){const r=i?i.DbColumn:"";n.append(l("<option>",{value:s,text:s,selected:s===r}))}if(i&&i.Statuses){const o=JSON.parse(i.Statuses);for(const a in o){l("#status"+a).val(o[a])}}l("#registrySelectColumnGroup").css("display","block");l("#registryStatusColumnGroup").css("display","block");l("#dbColumnGroup").css("display","block");l("#registryStatuses").css("display","block");if(i&&i.AllRegistryStatusSuccess){l("#allRegistryStatusSuccess").prop("checked",true);l("#registryStatuses").css("display","none")}else{l("#allRegistryStatusSuccess").prop("checked",false)}l("#diffForm").closest(".ibox-content").toggleClass("sk-loading")},error:function(){l("#diffForm").closest(".ibox-content").toggleClass("sk-loading");l("#diffDataResult").html("<p class='text-center'>Ошибка</p>")}})},diffFunc:function(){l("#diffForm").on("submit",function(t){t.preventDefault();c.diffDataReq()});l("#bank").change(function(){if(l("#registryFile").val()){l("#diffDataResult").html("");c.diffColumnsReq()}});l("#registryFile").change(function(t){if(!l(t.target).val()){c.diffHideAll();return}l("#diffDataResult").html("");c.diffColumnsReq()});l("#allRegistryStatusSuccess").change(function(){if(this.checked){l("#registryStatuses").css("display","none")}else{l("#registryStatuses").css("display","block")}})},excerpt:function(){l(document).on("click",".excerpt",function(t){t.preventDefault();let e=l(this).attr("data-id");l.ajax({data:"id="+e,method:"post",url:"/partner/stat/excerpt",success:function(t){if(t.status===1){l(".pdf-modal .modal-body").html(t.data);l(".pdf-modal .modal-footer").show();l(".pdf-modal .modal-footer input:first-child").attr("data-id",e);l(".pdf-modal .modal-footer input:last-child").attr("data-id",e);l(".pdf-modal .modal-header h3").text("Операция «"+t.message+"»");l(".pdf-modal").modal("show")}else{l("#statlistform").closest(".ibox-content").toggleClass("sk-loading");swal({title:"Ошибка",text:t.message,type:"error"},function(){l("#statlistform").closest(".ibox-content").toggleClass("sk-loading")})}},error:function(t){l("#statlistform").closest(".ibox-content").toggleClass("sk-loading");swal({title:"Ошибка",text:"Ошибка на сервере. Пожалуйста обратитесь в тех. поддержку.",type:"error"},function(){l("#statlistform").closest(".ibox-content").toggleClass("sk-loading")})}})});l(document).on("click",".pdf-modal .modal-footer input:first-child",function(){let t=l(this).attr("data-id");window.open("/partner/stat/export-excerpt/"+t)});l(document).on("click",".pdf-modal .modal-footer input:last-child",function(){let t=l(this).attr("data-id");let e=l(this).prev().val();l.ajax({data:"id="+t+"&email="+e,method:"post",url:"/partner/stat/send-excerpt",success:function(t){if(t.status==1){swal({title:"ОК",text:t.message,type:"success"},function(){l("#statlistform").trigger("submit");l(".pdf-modal .modal-footer input:nth-child(2)").css("color","rgb(103, 106, 108)")})}else{swal({title:"Ошибка",text:t.data.email,type:"error"},function(){l("#statlistform").trigger("submit");l(".pdf-modal .modal-footer input:nth-child(2)").css("color","red")})}},error:function(t){l("#statlistform").closest(".ibox-content").toggleClass("sk-loading");swal({title:"Ошибка",text:"Ошибка на сервере. Пожалуйста обратитесь в тех. поддержку.",type:"error"},function(){l("#statlistform").closest(".ibox-content").toggleClass("sk-loading")})}})});l(document).on("change",".pdf-modal .modal-footer input:nth-child(2)",function(){l(this).css("color","rgb(103, 106, 108)")})},mfodistribution:function(){l(document).on("submit","#partner-distribution",function(t){t.preventDefault();let e=l(this).serialize();l.ajax({method:"post",url:"/partner/settings/save-distribution",data:e,success:function(i){if(i.status===1){swal({title:"ОК",text:i.message,type:"success"},function(){l("#statlistform").trigger("submit")})}else{swal({title:"Ошибка",text:i.data.email[0].error,type:"error"},function(){l("#statlistform").trigger("submit");for(var e=0;e<i.data.email.length;e++){let t=l('#partner-distribution input[name= "email['+i.data.email[e].id+']"]');t.parent().addClass("has-error")}})}},error:function(t){l("#statlistform").closest(".ibox-content").toggleClass("sk-loading");swal({title:"Ошибка",text:"Ошибка на сервере. Пожалуйста обратитесь в тех. поддержку.",type:"error"},function(){l("#statlistform").closest(".ibox-content").toggleClass("sk-loading")})}});return false})},otchlist:function(){l('[name="datefrom"],[name="dateto"]').datetimepicker({format:"DD.MM.YYYY HH:mm",showClose:true});l("#otchlistform").on("submit",function(){if(s){s.abort()}s=l.ajax({type:"POST",url:"/partner/stat/otchdata",data:l("#otchlistform").serialize(),beforeSend:function(){l("#otchlistform").closest(".ibox-content").toggleClass("sk-loading")},success:function(t){l("#otchlistform").closest(".ibox-content").toggleClass("sk-loading");l("#otchlistresult").html(t)},error:function(){l("#otchlistform").closest(".ibox-content").toggleClass("sk-loading");l("#otchlistresult").html("Ошибка")}});return false});l("#otchetpsxls").on("click",function(){let t=l('[name="datefrom"]').val();let e=l('[name="dateto"]').val();let i=0;if(l('[name="IdPart"]')!==undefined){i=l('[name="IdPart"]').val()}l("#otchetpsxls").attr("href","/partner/stat/otchetps?datefrom="+t+"&dateto="+e+"&IdPart="+i);return true})},statgraph:function(){l('[name="datefrom"],[name="dateto"]').datetimepicker({format:"DD.MM.YYYY"});l("#saleform").on("submit",function(){c.statgraphload();return false})},statgraphload:function(){if(s){s.abort()}s=l.ajax({type:"POST",url:"/partner/stat/saledata",data:l("#saleform").serialize(),beforeSend:function(){l("#sale-graph").empty();l("#saleform").closest(".ibox-content").toggleClass("sk-loading")},success:function(t){l("#saleform").closest(".ibox-content").toggleClass("sk-loading");if(t.status==1){Morris.Line({element:"sale-graph",data:t.data,xkey:"x",ykeys:["a"],labels:["Сумма"],lineColors:["#f46f2a"],hideHover:"auto",parseTime:false,resize:true})}else{l("#sale-graph").html(t.message)}},error:function(){l("#saleform").closest(".ibox-content").toggleClass("sk-loading");l("#sale-graph").html("Ошибка запроса")}})},statgraphdraft:function(){l('[name="datefrom"],[name="dateto"]').datetimepicker({format:"DD.MM.YYYY"});l("#saleformdraft").on("submit",function(){c.statgraphdraftload();return false})},statgraphdraftload:function(){if(s){s.abort()}s=l.ajax({type:"POST",url:"/partner/stat/saledraftdata",data:l("#saleformdraft").serialize(),beforeSend:function(){l("#sale-graphdraft").empty();l("#saleformdraft").closest(".ibox-content").toggleClass("sk-loading")},success:function(t){l("#saleformdraft").closest(".ibox-content").toggleClass("sk-loading");if(t.status==1){Morris.Line({element:"sale-graphdraft",data:t.data,xkey:"x",ykeys:["a"],labels:["Средний чек"],lineColors:["#f46f2a"],hideHover:"auto",parseTime:false,resize:true})}else{l("#sale-graphdraft").html(t.message)}},error:function(){l("#saleformdraft").closest(".ibox-content").toggleClass("sk-loading");l("#sale-graphdraft").html("Ошибка запроса")}})},statgraphkonvers:function(){l('[name="datefrom"],[name="dateto"]').datetimepicker({format:"DD.MM.YYYY"});l("#saleformkonvers").on("submit",function(){c.statgraphkonversload();return false})},statgraphkonversSetPaging:function(t,e){let i=l(".sk-pagination");let n=l(".sk-pagination-item-tmp:first").clone();let s;let r=e.clone();i.empty();if(t.number_pages<2){return}n.removeClass("hidden");t.number_pages++;while(t.number_pages>0){r.find('input[name="page"]:checked').val(t.number_pages-1);s=n.clone();s.text(t.number_pages);s.attr("data_form",r.serialize());s.bind("click",function(){c.statgraphkonversload(l(this).attr("data_form"))});i.prepend(s);t.number_pages--;if(t.number_pages==t.page){s.addClass("active")}}},statgraphkonversload:function(t){if(s){s.abort()}if(typeof t!=="string"){t=l("#saleformkonvers").serialize()}s=l.ajax({type:"POST",url:"/partner/stat/salekonversdata",data:t,beforeSend:function(){l("#sale-graphkonvers").empty();l("#saleformkonvers").closest(".ibox-content").toggleClass("sk-loading")},success:function(t){l("#saleformkonvers").closest(".ibox-content").toggleClass("sk-loading");if(t.status==1){Morris.Line({element:"sale-graphkonvers",data:t.data,xkey:"x",ykeys:["a"],labels:["Конверсия"],lineColors:["#f46f2a"],hideHover:"auto",parseTime:false,resize:true});c.statgraphkonversSetPaging(t,l("#saleformkonvers"))}else{l("#sale-graphkonvers").html(t.message)}},error:function(){l("#saleformkonvers").closest(".ibox-content").toggleClass("sk-loading");l("#sale-graphkonvers").html("Ошибка запроса")}})},statgraphplatelshik:function(){l('[name="datefrom"],[name="dateto"]').datetimepicker({format:"DD.MM.YYYY"});l("#platelshikform").on("submit",function(){c.statgraphplatelshikload();return false})},statgraphplatelshikload:function(){if(s){s.abort()}s=l.ajax({type:"POST",url:"/partner/stat/platelshikdata",data:l("#platelshikform").serialize(),beforeSend:function(){l("#plat-graph-error").empty();l("#plat-graph-country").empty();l("#plat-graph-city").empty();l("#plat-graph-bank").empty();l("#plat-graph-card").empty();l(".js-graph-row").hide();l("#platelshikform").closest(".ibox-content").toggleClass("sk-loading")},success:function(t){l("#platelshikform").closest(".ibox-content").toggleClass("sk-loading");if(t.status==1){l(".js-graph-row").show();Morris.Donut({element:"plat-graph-country",data:t.country,colors:["#f46f2a"],resize:true});Morris.Donut({element:"plat-graph-city",data:t.city,colors:["#f40f36"],resize:true});Morris.Donut({element:"plat-graph-bank",data:t.bank,colors:["#f4a84c"],resize:true});Morris.Donut({element:"plat-graph-card",data:t.card,colors:["#a500f4"],resize:true})}else{l(".js-graph-row").hide();l("#plat-graph-error").html(t.message)}},error:function(){l("#platelshikform").closest(".ibox-content").toggleClass("sk-loading");l(".js-graph-row").hide();l("#plat-graph-error").html("Ошибка запроса")}})},recurrentcard:function(){l('[name="datefrom"],[name="dateto"]').datetimepicker({format:"DD.MM.YYYY"});l("#recurrentcardform").on("submit",function(t){t.preventDefault();l("#recurrentpaytabs li.active").find("a").trigger("click");return false});l("#recurrentpaytabs a").on("click",function(){let t=l(this).attr("href");l('input[name="graphtype"]').val(t[5]);c.recurrentcardformload()})},recurrentcardformload:function(){if(s){s.abort()}s=l.ajax({type:"POST",url:"/partner/stat/recurrentcarddata",data:l("#recurrentcardform").serialize(),beforeSend:function(){l("#recurrentcardform").closest(".ibox-content").toggleClass("sk-loading");l("#recurrentcardresult").parent().attr("style","background-color: #fafafa;")},success:function(t){l("#recurrentcardform").closest(".ibox-content").toggleClass("sk-loading");if(t.status==1){l("#recurrentcardresult").html(t.data);l("#recurrentcardresult").parent().attr("style","background-color: #fafafa;")}else{l("#recurrentcardresult").html(t.message)}},error:function(t){l("#recurrentcardform").closest(".ibox-content").toggleClass("sk-loading");l("#recurrentcardresult").html("Ошибка запроса")}})},mfobalance:function(){l('[name="calDay"],[name="calWeek"],[name="calMon"]').on("click",function(){l('[name="calDay"]').removeClass("active");l('[name="calWeek"]').removeClass("active");l('[name="calMon"]').removeClass("active");l(this).addClass("active");let t,e;t=moment(new Date).hour(23).minute(59).seconds(59);e=moment(new Date).hour(0).minute(0).seconds(0);if(l(this).attr("name")=="calDay"){l('[name="datefrom"]').data("DateTimePicker").date(e);l('[name="dateto"]').data("DateTimePicker").date(t)}else if(l(this).attr("name")=="calWeek"){e=e.subtract(7,"days");l('[name="datefrom"]').data("DateTimePicker").date(e);l('[name="dateto"]').data("DateTimePicker").date(t)}else if(l(this).attr("name")=="calMon"){e=e.subtract(1,"months");l('[name="datefrom"]').data("DateTimePicker").date(e);l('[name="dateto"]').data("DateTimePicker").date(t)}});l('[name="datefrom"],[name="dateto"]').datetimepicker({format:"DD.MM.YYYY HH:mm",showClose:true});l("#mfosumlistform").on("submit",function(){c.mfobalancesorderreq(0);return false})},mfobalancesorderreq:function(t){if(s){s.abort()}s=l.ajax({type:"POST",url:"/partner/mfo/balanceorder?page="+t,data:l("#mfosumlistform").serialize(),beforeSend:function(){l("#mfosumlistform").closest(".ibox-content").toggleClass("sk-loading")},success:function(t){l("#mfosumlistform").closest(".ibox-content").toggleClass("sk-loading");if(t.status==1){l("#mfobalanceresult").html(t.data);l("#vypostbeg").html(t.ostbeg);l("#vypostend").html(t.ostend)}},error:function(t){l("#mfosumlistform").closest(".ibox-content").toggleClass("sk-loading");l("#mfobalanceresult").html("Ошибка")}})},mfosettings:function(){l("#mfosettings").on("submit",function(t){t.preventDefault();let e=l("#mfosettings");let i=e.closest(".ibox-content");toastr.options={closeButton:true,progressBar:true,showMethod:"slideDown",timeOut:1e3,escapeHtml:true};if(s){s.abort()}s=l.ajax({type:"POST",url:"/partner/settings/settingssave",data:e.serialize(),beforeSend:function(){i.toggleClass("sk-loading")},success:function(t){i.toggleClass("sk-loading");if(t.status==1){toastr.success("OK","Изменения сохранены");l("#mfosettings").reset()}else{toastr.error(t.message,"Ошибка")}},error:function(t){i.toggleClass("sk-loading");toastr.error("Ошибка запроса","Ошибка")}});return false})},mfoalarms:function(){l("#alarmssettings").on("submit",function(t){t.preventDefault();let e=l("#alarmssettings");let i=e.closest(".ibox-content");toastr.options={closeButton:true,progressBar:true,showMethod:"slideDown",timeOut:1e3,escapeHtml:true};if(s){s.abort()}s=l.ajax({type:"POST",url:"/partner/settings/alarmssave",data:e.serialize(),beforeSend:function(){i.toggleClass("sk-loading")},success:function(t){i.toggleClass("sk-loading");if(t.status==1){toastr.success("OK","Изменения сохранены");l("#mfosettings").reset()}else{toastr.error(t.message,"Ошибка")}},error:function(t){i.toggleClass("sk-loading");toastr.error("Ошибка запроса","Ошибка")}});return false})},orderlist:function(){l('[name="datefrom"],[name="dateto"]').datetimepicker({format:"DD.MM.YYYY"});l("#orderform").on("submit",function(){if(s){s.abort()}s=l.ajax({type:"POST",url:"/partner/order/list",data:l("#orderform").serialize(),beforeSend:function(){l("#orderform").closest(".ibox-content").toggleClass("sk-loading")},success:function(t){l("#orderform").closest(".ibox-content").toggleClass("sk-loading");if(t.status==1){l("#orderlistresult").html(t.data)}else{l("#orderlistresult").html(t.message)}},error:function(t){l("#orderform").closest(".ibox-content").toggleClass("sk-loading");l("#orderlistresult").html("Ошибка запроса")}});return false})},orderlistdata:function(){l("#orderlisttable").off().on("click",'[data-action="cancelorder"]',function(){let t=l(this).attr("data-id");if(s){s.abort()}s=l.ajax({type:"POST",url:"/partner/order/cancel",data:{id:t},beforeSend:function(){l("#orderform").closest(".ibox-content").toggleClass("sk-loading")},success:function(t){l("#orderform").closest(".ibox-content").toggleClass("sk-loading");if(t.status==1){l("#orderform").trigger("submit")}else{toastr.error(t.message,"Ошибка")}},error:function(t){l("#orderform").closest(".ibox-content").toggleClass("sk-loading");toastr.error("Ошибка запроса","Ошибка")}});return false}).on("click",'[data-action="resendorder"]',function(){let t=l(this).attr("data-id");if(s){s.abort()}s=l.ajax({type:"POST",url:"/partner/order/resend",data:{id:t},beforeSend:function(){l("#orderform").closest(".ibox-content").toggleClass("sk-loading")},success:function(t){l("#orderform").closest(".ibox-content").toggleClass("sk-loading");if(t.status==1){toastr.success("OK","Ссылка для оплаты повторно отправлена")}else{toastr.error(t.message,"Ошибка")}},error:function(t){l("#orderform").closest(".ibox-content").toggleClass("sk-loading");toastr.error("Ошибка запроса","Ошибка")}})})},orderadd:function(){l("#saveorder").on("click",function(){let t=l("#formAddOrder");let e=t.closest(".ibox-content");toastr.options={closeButton:true,progressBar:true,showMethod:"slideDown",timeOut:1e3,escapeHtml:true};if(s){s.abort()}s=l.ajax({type:"POST",url:"/partner/order/save",data:t.serialize(),beforeSend:function(){e.toggleClass("sk-loading")},success:function(t){e.toggleClass("sk-loading");if(t.status==1){toastr.success("OK","Счет создан");window.location.href="/partner/order"}else{toastr.error(t.message,"Ошибка")}},error:function(t){e.toggleClass("sk-loading");toastr.error("Ошибка запроса","Ошибка")}});return false})},notiflist:function(t){l('[name="datefrom"],[name="dateto"]').datetimepicker({format:"DD.MM.YYYY HH:mm"});t=t||l("#notiflistform").find('[name="callback-page"]').val();l("#notiflistform").on("submit",function(){if(s){s.abort()}s=l.ajax({type:"POST",url:"/partner/callback/listitems?page="+t,data:l("#notiflistform").serialize(),beforeSend:function(){l("#notiflistform").closest(".ibox-content").toggleClass("sk-loading")},success:function(t){l("#notiflistform").closest(".ibox-content").toggleClass("sk-loading");if(t.status==1){l("#notiflistresult").html(t.data);l(".pagination a").each(function(){l(this).removeAttr("href");l(this).attr("onclick","lk.notiflistreq("+(parseInt(l(this).attr("data-page"))+1)+");")})}else{l("#notiflistresult").html(t.message)}},error:function(t){l("#notiflistform").closest(".ibox-content").toggleClass("sk-loading");l("#notiflistresult").html("Ошибка запроса")}});return false});l("#notiflistresult").on("click",'[data-action="repeatnotif"]',function(){let t=l(this).attr("data-id");if(s){s.abort()}s=l.ajax({type:"POST",url:"/partner/callback/repeat",data:{id:t},beforeSend:function(){l("#notiflistform").closest(".ibox-content").toggleClass("sk-loading")},success:function(t){l("#notiflistform").closest(".ibox-content").toggleClass("sk-loading");if(t.status==1){toastr.success("OK",t.message);l("#notiflistform").trigger("submit")}else{toastr.error("Ошибка",t.message)}},error:function(){l("#notiflistform").closest(".ibox-content").toggleClass("sk-loading");toastr.error("Ошибка запроса","Ошибка")}});return false});l("#notiflistresult").on("click",'[data-action="repeatnotif-batch"]',function(){if(s){s.abort()}s=l.ajax({type:"POST",url:"/partner/callback/repeatbatch",data:l("#notiflistform").serialize(),beforeSend:function(){l("#notiflistform").closest(".ibox-content").toggleClass("sk-loading")},success:function(t){l("#notiflistform").closest(".ibox-content").toggleClass("sk-loading");if(t.status==1){toastr.success("OK",t.message);l("#notiflistform").trigger("submit")}else{toastr.error("Ошибка",t.message)}},error:function(){l("#notiflistform").closest(".ibox-content").toggleClass("sk-loading");toastr.error("Ошибка запроса","Ошибка")}});return false})},notiflistreq:function(t){if(s){s.abort()}s=l.ajax({type:"POST",url:"/partner/callback/listitems?page="+t,data:l("#notiflistform").serialize(),beforeSend:function(){l("#notiflistform").closest(".ibox-content").toggleClass("sk-loading")},success:function(t){l("#notiflistform").closest(".ibox-content").toggleClass("sk-loading");if(t.status==1){l("#notiflistresult").html(t.data);l(".pagination a").each(function(){l(this).removeAttr("href");l(this).attr("onclick","lk.notiflistreq("+(parseInt(l(this).attr("data-page"))+1)+");")})}else{l("#notiflistresult").html("<p class='text-center'>"+data.message+"</p>")}},error:function(){l("#notiflistform").closest(".ibox-content").toggleClass("sk-loading");l("#notiflistresult").html("Ошибка запроса")}})},comisotchet:function(){l('[name="datefrom"],[name="dateto"]').datetimepicker({format:"DD.MM.YYYY HH:mm",showClose:true});l("#comisotchetform").on("submit",function(t){t.preventDefault();if(s){s.abort()}var e=window.location.pathname==="/partner/admin/comisotchet-new"?"/partner/admin/comisotchetdata-new":"/partner/admin/comisotchetdata";s=l.ajax({type:"POST",url:e,data:l("#comisotchetform").serialize(),beforeSend:function(){l("#comisotchetresult").closest(".ibox-content").toggleClass("sk-loading")},success:function(t){l("#comisotchetform").closest(".ibox-content").toggleClass("sk-loading");if(t.status==1){l("#comisotchetresult").html(t.data)}else{l("#comisotchetresult").html(t.message)}},error:function(){l("#comisotchetform").closest(".ibox-content").toggleClass("sk-loading");l("#comisotchetresult").html("Ошибка")}});return false});l("#modal-vyvyodsum__submit").on("click",function(){var t=l("#modal-vyvyodsum__summ").val()*100;var e={partner:l("#modal-vyvyodsum__submit").data("idPartner"),type:l("#modal-vyvyodsum__submit").data("type"),datefrom:l("#modal-vyvyodsum__submit").data("datefrom"),dateto:l("#modal-vyvyodsum__submit").data("dateto"),summ:t,isCron:0};s=l.ajax({type:"POST",url:"/partner/admin/vyvodvoznag",data:e,beforeSend:function(){l("#comisotchetresult").closest(".ibox-content").toggleClass("sk-loading")},success:function(t){l("#comisotchetform").closest(".ibox-content").toggleClass("sk-loading");if(t.status==1){toastr.success("OK",t.message);l("#comisotchetform").trigger("submit")}else{toastr.error("Ошибка",t.message)}l("#modal-vyvyodsum").modal("toggle")},error:function(){l("#comisotchetform").closest(".ibox-content").toggleClass("sk-loading");toastr.error("Ошибка","Ошибка запроса.");l("#modal-vyvyodsum").modal("toggle")}})});l("#comisotchetresult").off().on("click",'a[data-action="vyvyodsum"]',function(){toastr.options={closeButton:true,progressBar:true,showMethod:"slideDown",timeOut:1e3,escapeHtml:true};let t=l(this).attr("data-id");let e=l(this).attr("data-type");let i=l('[name="datefrom"]').val();let n=l('[name="dateto"]').val();let s=l(this).attr("data-summ");l("#modal-vyvyodsum__summ").val(s/100);l("#modal-vyvyodsum__submit").data("idPartner",t);l("#modal-vyvyodsum__submit").data("type",e);l("#modal-vyvyodsum__submit").data("datefrom",i);l("#modal-vyvyodsum__submit").data("dateto",n);l("#modal-vyvyodsum").modal("toggle");return false});l("#modal-perevod").on("shown.bs.modal",function(){l("#perevodform")[0].reset()});l('[name="Perechislen[IdPartner]"]').on("change",function(){let t=l(this).val();if(parseInt(t)===0)return;s=l.ajax({type:"POST",url:"/partner/admin/perevodaginfo",data:{partner:t},beforeSend:function(){l("#perevodpartner").prop("disabled",true);l('[name="Perechislen[IdPartner]"]').prop("disabled",true)},success:function(e){l('[name="Perechislen[IdPartner]"]').prop("disabled",false);if(e.status==1){l("#perevodpartner").prop("disabled",false);if(e.data.schettcb.length===0){l("#TypeSchet1").prop("disabled",true).prop("checked",false);l("#TypeSchet1Info").html("Счет отсутствует!")}else{l("#TypeSchet1").prop("disabled",false).prop("checked",true);l("#TypeSchet1Info").html(e.data.schettcb)}if(e.data.schetrs.length===0){l("#TypeSchet2").prop("disabled",true);l("#TypeSchet2Info").html("Счет отсутствует!")}else{l("#TypeSchet2").prop("disabled",false);if(e.data.schettcb.length===0){l("#TypeSchet2").prop("checked",true)}l("#TypeSchet2Info").html(e.data.schetrs+" "+e.data.schetinfo+", БИК "+e.data.schetbik)}l("#infoschet").html(e.data.urlico+"\r\nсо счета "+e.data.schetfrom);if(e.data.schettcb.length===0&&e.data.schetrs.length===0){l("#perevodpartner").prop("disabled",true)}else{l("#perevodpartner").prop("disabled",false)}let t="";if(e.data.balance.length>0){for(const i of e.data.balance){t+=`<div>${i.bank_name} <b>${i.amount}</b> ${i.currency}</div>`}}else{t+="<div>Баланс недоступен</div>"}l("#balancepartner").html(t)}else{l("#perevodpartner").prop("disabled",true);toastr.error("Ошибка",e.message)}},error:function(){l('[name="Perechislen[IdPartner]"]').prop("disabled",false);toastr.error("Ошибка","Ошибка запроса.")}})});l("#perevodpartner").on("click",function(){let t=parseFloat(l("#perevodform").find("#Summ").val());let e="Перевести средства контрагенту?\r\n\r\n"+l("#infoschet").html()+"\r\nна счет: ";if(l("#TypeSchet1").prop("checked")){e+=l("#perevodform").find("#TypeSchet1Info").html()+" (выдача)"}else{e+=l("#perevodform").find("#TypeSchet2Info").html()+" (р/с)"}e+="\r\nСумма: "+t.toFixed(2)+" руб.";swal({title:"Подтвердите перевод",text:e,showCancelButton:true,confirmButtonColor:"#f46f2a",confirmButtonText:"Подтвердить",cancelButtonText:"Отмена",closeOnConfirm:true},function(){s=l.ajax({type:"POST",url:"/partner/admin/perevodacreate",data:l("#perevodform").serialize(),beforeSend:function(){l("#perevodpartner").prop("disabled",true)},success:function(t){l("#perevodpartner").prop("disabled",false);if(t.status==1){swal({title:"OK",text:t.message,type:"success"},function(){l("#perevodform")[0].reset();l("#modal-perevod").modal("hide");l("#comisotchetform").trigger("submit")})}else{toastr.error("Ошибка",t.message)}},error:function(){l("#perevodpartner").prop("disabled",false);toastr.error("Ошибка","Ошибка запроса.")}})});return false})},banksave:function(){l("#submitbanks").on("click",function(){if(s){s.abort()}s=l.ajax({type:"POST",url:"/partner/admin/banksave",data:l("#banks").serialize(),beforeSend:function(){l("#banks").closest(".ibox-content").toggleClass("sk-loading")},success:function(t){l("#banks").closest(".ibox-content").toggleClass("sk-loading");if(t.status==1){toastr.success("OK","Комиссии сохранены")}else{toastr.error(t.message,"Ошибка")}},error:function(){l("#banks").closest(".ibox-content").toggleClass("sk-loading");toastr.error("Ошибка запроса","Ошибка")}});return false})},registerpartner:function(){let e=l("#registerpartnerform");e.on("submit",function(t){t.preventDefault();if(s){s.abort()}s=l.ajax({type:"POST",url:"/partner/partner/partner-add",data:e.serialize(),beforeSend:function(){l("#submitregpartner").prop("disabled",true)},success:function(t){l("#submitregpartner").prop("disabled",false);if(t.status==1){toastr.success("OK","Партнер добавлен");l("#modal-regpartner").modal("hide").on("hidden.bs.modal",function(){window.location.href="/partner/partner/partner-edit/"+t.id})}else{toastr.error(t.message,"Ошибка")}},error:function(){l("#submitregpartner").prop("disabled",false);toastr.error("Ошибка запроса","Ошибка")}});return false})},listpartners:function(){l("#partnertypesel0,#partnertypesel1").on("change",function(){let t=l(this).val();if(t>=0){l('tr[data-parttype = "'+t+'"]').show();l('tr[data-parttype][data-parttype != "'+t+'"]').hide()}else{l("tr[parttype]").show()}});l("#partnertypesel0").trigger("change");l("#listpartners").on("click","tr[data-click]",function(){let t=l(this).attr("data-click");window.location.href=t})},editpartner:function(){toastr.options={closeButton:true,progressBar:true,showMethod:"slideDown",timeOut:1e3,escapeHtml:true};l("#formEditCommonCont").on("submit",function(){let t=l("#formEditCommonCont");e.saveKont(t);return false});l("#formEditTehCont").on("submit",function(){let t=l("#formEditTehCont");e.saveKont(t);return false});l("#formEditFinansCont").on("submit",function(){let t=l("#formEditFinansCont");e.saveKont(t);return false});let t=document.location.toString();if(t.match("#tab")){l('.nav-tabs a[href="#'+t.split("#")[1]+'"]').tab("show")}l("#btnEditRekviz").on("click",function(){let e=l('form[name="formEditRekviz"]');l.ajax({url:"/partner/partner/rekviz-save",method:"POST",data:e.serialize(),beforeSend:function(){e.closest(".ibox-content").toggleClass("sk-loading")},success:function(t){e.closest(".ibox-content").toggleClass("sk-loading");if(t.status==0){toastr.error(t.message,"Ошибка")}else{toastr.success("OK","Реквизиты сохранены")}},error:function(){e.closest(".ibox-content").toggleClass("sk-loading")}});return false});l("#btnEditPartner").on("click",function(t){t.preventDefault();c.savepatnerpart(l("#formEditPartner"));return false});l("#btnEditPartnerStatus").on("click",function(t){t.preventDefault();c.savepatnerpart(l("#formEditPartnerStatus"));return false});l("#btnEditPartnerTkb").on("click",function(t){t.preventDefault();c.savepatnerpart(l("#formEditPartnerTkb"));return false});l("#btnEditPartnerIntegr").on("click",function(t){t.preventDefault();c.savepatnerpart(l("#formEditPartnerIntegr"));return false});l("#btnEditPartnerApplepay").on("click",function(t){t.preventDefault();let e=new FormData(l("#formEditPartnerApplepay")[0]);l.ajax({type:"POST",url:"/partner/partner/partner-applepay-save",data:e,cache:false,contentType:false,processData:false,beforeSend:function(){},success:function(t){if(t.status==0){toastr.error(t.message,"Ошибка")}else{toastr.success("OK","Ключи Apple Pay сохранены")}},error:function(){toastr.error("Ошибка запроса","Ошибка")}});return false});l("#btnEditPartnerKkm").on("click",function(t){t.preventDefault();let e=new FormData(l("#formEditPartnerKkm")[0]);l.ajax({type:"POST",url:"/partner/partner/partner-kkm-save",data:e,cache:false,contentType:false,processData:false,beforeSend:function(){},success:function(t){if(t.status==0){toastr.error(t.message,"Ошибка")}else{toastr.success("OK","Ключи ККМ сохранены")}},error:function(){toastr.error("Ошибка запроса","Ошибка")}});return false});l("#formEditMainSms").on("submit",function(t){t.preventDefault();let e=l(this);l.ajax({url:"/partner/partner/mainsms-save",method:"POST",data:e.serialize(),beforeSend:function(){e.closest(".ibox-content").toggleClass("sk-loading")},success:function(t){e.closest(".ibox-content").toggleClass("sk-loading");if(t.status==1){toastr.success("OK","Данные интеграции успешно сохранены.")}else{toastr.error(t.error,"Ошибка")}},error:function(){e.closest(".ibox-content").toggleClass("sk-loading")}});return false});l("#btnEditDistribution").on("click",function(){let e=l("#formEditDistribution");l.ajax({url:"/partner/partner/save-distribution",method:"POST",data:e.serialize(),beforeSend:function(){e.closest(".ibox-content").toggleClass("sk-loading")},success:function(t){e.closest(".ibox-content").toggleClass("sk-loading");if(t.status==0){toastr.error(t.message,"Ошибка")}else{toastr.success("OK",t.message)}},error:function(){e.closest(".ibox-content").toggleClass("sk-loading")}});return false});l("#btnOpoveshSettings").on("click",function(){let e=l("#formOpoveshSettings");s=l.ajax({type:"POST",url:"/partner/settings/settingssave",data:e.serialize(),beforeSend:function(){e.closest(".ibox-content").toggleClass("sk-loading")},success:function(t){e.closest(".ibox-content").toggleClass("sk-loading");if(t.status==1){toastr.success("OK","Изменения сохранены")}else{toastr.error(t.message,"Ошибка")}},error:function(t){e.closest(".ibox-content").toggleClass("sk-loading");toastr.error("Ошибка запроса","Ошибка")}});return false});l("#btnEditPartnerAdmin").on("click",function(){let e=l("#formEditPartnerAdmin");s=l.ajax({type:"POST",url:"/partner/partner/users-save",data:e.serialize(),beforeSend:function(){e.closest(".ibox-content").toggleClass("sk-loading")},success:function(t){e.closest(".ibox-content").toggleClass("sk-loading");if(t.status==1){toastr.success("OK","Изменения сохранены")}else{toastr.error(t.message,"Ошибка")}},error:function(t){e.closest(".ibox-content").toggleClass("sk-loading");toastr.error("Ошибка запроса","Ошибка")}});return false});l("#partner-options__submit").on("click",function(t){t.preventDefault();let e=l("#partner-options__form");s=l.ajax({type:"POST",url:"/partner/partner/options-save",data:e.serialize(),beforeSend:function(){e.closest(".ibox-content").toggleClass("sk-loading")},success:function(t){e.closest(".ibox-content").toggleClass("sk-loading");if(t.status==1){toastr.success("OK","Изменения сохранены")}else{toastr.error(t.message,"Ошибка")}},error:function(t){e.closest(".ibox-content").toggleClass("sk-loading");toastr.error("Ошибка запроса","Ошибка")}});return false});l("#partner-edit__bank-gates-table__add-button").on("click",function(t){let e=l("#partner-edit__bank-gates-edit-modal__gate-form");e.trigger("reset");e.find("input[name=Id]").val("");l("#partner-edit__bank-gates-edit-modal").modal("show");return false});l("#partner-edit__bank-gates-edit-modal__cancel-button").on("click",function(t){l('#partner-edit__bank-gates-edit-modal__gate-form [name="Id"]').val("")});l(".partner-edit__bank-gates-table__edit-button").on("click",function(t){let e=l("#partner-edit__bank-gates-edit-modal__gate-form");let i=l(this).parents("tr").data("gate");e.trigger("reset");if(i.Enable===1){e.find("input[name=Enable]").attr("checked",true)}else{e.find("input[name=Enable]").attr("checked",false)}e.find("input[name=Id]").val(i.Id);e.find("input[name=Active]").val(i.Active);e.find("input[name=Priority]").val(i.Priority);e.find("select[name=BankId]").val(i.BankId);e.find("select[name=TU]").val(i.TU);e.find("input[name=SchetNumber]").val(i.SchetNumber);e.find("select[name=SchetType]").val(i.SchetType);e.find("input[name=Login]").val(i.Login);e.find("input[name=Token]").val(i.Token);e.find("input[name=Password]").val(i.Password);e.find("input[name=AdvParam_1]").val(i.AdvParam_1);e.find("input[name=AdvParam_2]").val(i.AdvParam_2);e.find("input[name=AdvParam_3]").val(i.AdvParam_3);e.find("input[name=AdvParam_4]").val(i.AdvParam_4);e.find("select[name=CurrencyId]").val(i.CurrencyId);e.find("input[name=UseGateCompensation]").attr("checked",i.UseGateCompensation===1);e.find("select[name=FeeCurrencyId]").val(i.FeeCurrencyId).change();e.find("select[name=MinimalFeeCurrencyId]").val(i.MinimalFeeCurrencyId).change();e.find("input[name=ClientCommission]").val(i.ClientCommission);e.find("input[name=ClientFee]").val(i.ClientFee);e.find("input[name=ClientMinimalFee]").val(i.ClientMinimalFee);e.find("input[name=PartnerCommission]").val(i.PartnerCommission);e.find("input[name=PartnerFee]").val(i.PartnerFee);e.find("input[name=PartnerMinimalFee]").val(i.PartnerMinimalFee);e.find("input[name=BankCommission]").val(i.BankCommission);e.find("input[name=BankFee]").val(i.BankFee);e.find("input[name=BankMinimalFee]").val(i.BankMinimalFee);l("#partner-edit__bank-gates-edit-modal").modal("show");return false});l(".partner-edit__bank-gates-table__delete-button").on("click",function(t){if(confirm("Вы действительно хотите удалить этот элемент?")){let e=l(this);l.ajax({url:"/partner/partner/delete-gate",method:"POST",data:{id:e.attr("data-id")},success:function(t){if(t.status==0){toastr.error(t.message,"Ошибка")}else{e.closest("tr").remove();toastr.success("OK","Шлюз удалён")}},error:function(){toastr.error("Ошибка")}})}});l("#partner-edit__bank-gates-edit-modal__save-button").on("click",function(t){let e=l("#partner-edit__bank-gates-edit-modal__gate-form").serialize();l.ajax({method:"POST",url:"/partner/partner/save-gate",data:e,success:function(t){if(t.status==1){alert("Успешно сохранен");let t=l("#partner-edit__bank-gates-edit-modal__gate-form").find("input[name=PartnerId]").val();let e=l(location).attr("pathname")+l(location).attr("hash");if(e==`/partner/partner/partner-edit/${t}#tab-6`){document.location.reload()}else{window.location=`/partner/partner/partner-edit/${t}#tab-6`}}else{alert("Ошибка")}}});return false})},savepatnerpart:function(e){l.ajax({url:"/partner/partner/partner-save",method:"POST",data:e.serialize(),beforeSend:function(){e.closest(".ibox-content").toggleClass("sk-loading")},success:function(t){e.closest(".ibox-content").toggleClass("sk-loading");if(t.status==0){toastr.error(t.message,"Ошибка")}else{toastr.success("OK","Данные контрагента сохранены")}},error:function(){e.closest(".ibox-content").toggleClass("sk-loading")}})},patnerparuserslk:function(){toastr.options={closeButton:true,progressBar:true,showMethod:"slideDown",timeOut:1e3,escapeHtml:true};l("#saveUser").on("click",function(){let t=l("#formEditUser").serialize();l.ajax({url:"/partner/partner/users-save",method:"POST",data:t,beforeSend:function(){l("#saveUser").prop("disabled",true)},success:function(t){l("#saveUser").prop("disabled",false);if(t.status==1){toastr.success("OK","Пользователь сохранен");window.location.href="/partner/partner/users-edit/"+t.id}else{toastr.error(t.message,"Ошибка")}},error:function(){l("#saveUser").prop("disabled",false)}});return false});l(".select2").select2({placeholder:"Выберите разделы",allowClear:true})},partnerlistuslugi:function(){l('a[data-action="delUsluga"]').on("click",function(){let e=l(this).attr("data-id");swal({title:"Подтвердите удаление услуги?",text:"Послу удаление услуги её использование будет невозможно!",type:"warning",showCancelButton:true,confirmButtonColor:"#DD6B55",confirmButtonText:"Да, удалить!",cancelButtonText:"Отмена",closeOnConfirm:false},function(){if(s){s.abort()}let t=l('meta[name="csrf-token"]').attr("content");s=l.ajax({type:"POST",url:"/partner/partner/uslugi-del",data:{ID:e,_csrf:t},beforeSend:function(){},success:function(t){if(t.status==1){swal({title:"Услуга удалена!",text:"Услуга была удалена.",type:"success"},function(){window.location.href="/partner/partner/partner-edit/"+t.id+"#tab-2"})}else{swal({title:"Ошибка",text:t.message,type:"error"})}},error:function(t){swal({title:"Ошибка",text:"Ошибка запроса",type:"error"})}})})})},partneredituslug:function(){l("#saveUsluga").on("click",function(){toastr.options={closeButton:true,progressBar:true,showMethod:"slideDown",timeOut:1e3,escapeHtml:true};let t=l('form[name="EditUsluga"]').serialize();l.ajax({url:"/partner/partner/uslugi-save",method:"POST",data:t,beforeSend:function(){l("#saveUsluga").prop("disabled",true)},success:function(t){l("#saveUsluga").prop("disabled",false);if(t.status==0){toastr.error(t.message,"Ошибка")}else{toastr.success("OK","Услуга сохранена");window.location.href="/partner/partner/uslugi-edit/"+t.id}},error:function(){l("#saveUsluga").prop("disabled",false)}});return false})},adminsettings:function(){l("#veekenddays").on("submit",function(t){t.preventDefault();if(s){s.abort()}s=l.ajax({type:"POST",url:"/partner/settings/saveveekenddays",data:l("#veekenddays").serialize(),beforeSend:function(){l("#veekenddays").closest(".ibox-content").toggleClass("sk-loading")},success:function(t){l("#veekenddays").closest(".ibox-content").toggleClass("sk-loading");if(t.status==1){toastr.success("OK",t.message)}else{toastr.error("Ошибка",t.message)}},error:function(){l("#veekenddays").closest(".ibox-content").toggleClass("sk-loading");toastr.error("Ошибка","Ошибка запроса.")}});return false})},banksconf:function(){l("#banksconf").on("submit",function(t){t.preventDefault();if(s){s.abort()}s=l.ajax({type:"POST",url:"/partner/settings/savebankconf",data:l("#banksconf").serialize(),beforeSend:function(){l("#banksconf").closest(".ibox-content").toggleClass("sk-loading")},success:function(t){l("#banksconf").closest(".ibox-content").toggleClass("sk-loading");if(t.status==1){toastr.success("OK",t.message)}else{toastr.error("Ошибка",t.message)}},error:function(){l("#banksconf").closest(".ibox-content").toggleClass("sk-loading");toastr.error("Ошибка","Ошибка запроса.")}});return false})}};let e={listinit:function(){l('select[name="partnersel"]').on("change",function(){let t=l(this).val();if(t>0){l('tr[data-partner = "'+t+'"]').show();l('tr[data-partner][data-partner != "'+t+'"]').hide()}else{l("tr[data-partner]").show()}})},init:function(){},saveKont:function(e){l.ajax({url:"/partner/partner/cont-save",method:"POST",data:e.serialize(),beforeSend:function(){e.closest(".ibox-content").toggleClass("sk-loading")},success:function(t){e.closest(".ibox-content").toggleClass("sk-loading");if(t.status==1){toastr.success("OK","Данные сохранены")}else{toastr.error(t.error,"Ошибка")}},error:function(){e.closest(".ibox-content").toggleClass("sk-loading");toastr.error(data.error,"Ошибка")}})}};window.date_range={start:function(){l('[name="calDay"],[name="calWeek"],[name="calMon"]').on("click",function(){l('[name="calDay"]').removeClass("active");l('[name="calWeek"]').removeClass("active");l('[name="calMon"]').removeClass("active");l(this).addClass("active");let t,e;t=moment(new Date).hour(23).minute(59).seconds(59);e=moment(new Date).hour(0).minute(0).seconds(0);if(l(this).attr("name")=="calDay"){l('[name="datefrom"]').data("DateTimePicker").date(e);l('[name="dateto"]').data("DateTimePicker").date(t)}else if(l(this).attr("name")=="calWeek"){e=e.subtract(7,"days");l('[name="datefrom"]').data("DateTimePicker").date(e);l('[name="dateto"]').data("DateTimePicker").date(t)}else if(l(this).attr("name")=="calMon"){e=e.subtract(1,"months");l('[name="datefrom"]').data("DateTimePicker").date(e);l('[name="dateto"]').data("DateTimePicker").date(t)}});l('[name="datefrom"],[name="dateto"]').datetimepicker({format:"DD.MM.YYYY HH:mm",showClose:true})}};l(window).on("load",function(){const t=localStorage.getItem("sideMenuOpen");const e=window.innerWidth<=768;if(t&&e){l("body").toggleClass("mini-navbar")}const i=l(".navbar-minimalize");i.on("click",function(t){const e=localStorage.getItem("sideMenuOpen");if(e){localStorage.removeItem("sideMenuOpen")}else{localStorage.setItem("sideMenuOpen","open")}})});function i(){const r=l('[name="datefrom"]');const o=l('[name="dateto"]');if(!o.length){return}l('[name="datefrom"],[name="dateto"]').on("dp.change",function(){try{toastr.options={closeButton:true,progressBar:true,showMethod:"slideDown",timeOut:3e3,escapeHtml:true};const t="DD.MM.YYYY HH:mm";const e=moment(o.val(),t);const i=moment(r.val(),t);const n=i>e;const s=l('[type="submit"]');if(n){toastr.error("Начальная дата отчета должна быть раньше конечной");s.prop("disabled",true)}else{s.prop("disabled",false)}}catch(t){console.log("ошибка валидации дат")}})}l(window).on("load",i);document.addEventListener("DOMContentLoaded",function(){const t=document.querySelector("#partner-edit__bank-gates-edit-modal__gate-form");if(t){const s=t.querySelector("select[name=FeeCurrencyId]");const r=t.querySelector("select[name=MinimalFeeCurrencyId]");const o=t.querySelectorAll("#comissionWrapper .fixedComissionCurrency");const a=t.querySelectorAll("#comissionWrapper .minimalComissionCurrency");function i(t){const e=t.options[t.options.selectedIndex];return e}function n(t,i){try{let e;if(t){e=t.innerText}if(i){i.forEach(function(t){t.textContent=e||""})}}catch(t){console.log("ошибка изменения валюты",t)}}s.addEventListener("change",function(t){const e=i(t.target);n(e,o)});r.addEventListener("change",function(t){const e=i(t.target);n(e,a)});const e=document.querySelector("#partner-edit__bank-gates-table__add-button");if(e){e.addEventListener("click",function(){n({},o);n({},a)})}const l=document.querySelectorAll(".partner-edit__bank-gates-table__edit-button");if(l){l.forEach(function(t){t.addEventListener("click",function(){setTimeout(function(){const t=i(s);const e=i(r);n(t,o);n(e,a)},100)})})}}});window.loginNav=t;window.lk=c;window.commInfo=e})(jQuery||$);(function(t){"use strict";let e=0;let i={};window.uslugi=i})(jQuery||$);"use strict";var tplUsl={form:function(t){if(t==="two"){return'<form action="#" method="POST" id="fielsForm" class="col-xs-6 nopadding"><ul class="list-group" id="listgroupsortable" ondrop="addUsl.dropElem(event)" ondragover="addUsl.makeDroppable(event)">'+"</ul></form>"+'<form action="#" method="POST" id="fielsForm2" class="col-xs-6 nopadding"><ul class="list-group" id="listgroupsortable2" ondrop="addUsl.dropElem(event)" ondragover="addUsl.makeDroppable(event)">'+"</ul></form>"}else{return'<form action="#" method="POST" id="fielsForm">'+'<ul class="list-group" id="listgroupsortable" '+'ondrop="addUsl.dropElem(event)" ondragover="addUsl.makeDroppable(event)"></ul>'+"</form>"}},field:function(t){return' <li class="list-group-item">'+'<a href="#" class="close" onclick="addUsl.delField(this)">×</a>'+t+"</li>"},input:function(t,e,i){return'<div class="form-group">         <label>'+t+'</label>         <input type="hidden" name="inp[]" value="'+encodeURIComponent($.toJSON({type:i,label:t,coment:e}))+'">          <input type="text" class="form-control">         <span class="help-block">'+e+"</span>        </div>        "},datetime:function(t,e){return'<div class="form-group">            <label>'+t+'</label>            <input type="hidden" name="inp[]" value="'+encodeURIComponent($.toJSON({type:"datetime",label:t,coment:e}))+'">             <div class="input-group date datetimepicker">            <input type="hidden" value="">             <input type="text" class="form-control" />            <span class="input-group-addon">            <span class="glyphicon glyphicon-calendar"></span>            </span>            </div>            <span class="help-block">'+e+"</span>            </div>            "},summ:function(t){var e=parseFloat(t).toFixed(2);return'<div class="form-group">         <label class="summfield">Сумма: '+e+' руб.</label>            <input type="hidden" name="inp[]" value="'+encodeURIComponent($.toJSON({type:"summ",fixed:e}))+'">         </div>        '},statictext:function(t){return'<div class="form-group">         <p>'+t+'</p>            <input type="hidden" name="inp[]" value="'+encodeURIComponent($.toJSON({type:"statictext",label:t}))+'">         </div>        '},staticimage:function(t,e,i){var n=e[0];var s="";if(i!==undefined){var r=i[0];tplUsl.readFileSelect(r.files[0],n);s=URL.createObjectURL(r.files[0])}else{var o="/shopdata/"+$('[name="IdPartner"]').val()+"/";s=o+n+".png"}return'<div class="form-group">'+'<input type="hidden" name="valFile['+n+']" id="valFile_'+n+'" value="">'+'<img class="media-object" style="max-width: 240px" src="'+s+'">'+"</div>"+'<input type="hidden" name="inp[]" '+'value="'+encodeURIComponent($.toJSON({type:"staticimage",label:t,vals:[n]}))+'">'},selects:function(t,e,i){var n='<div class="form-group">        <label class="labelselect">'+t+'</label>        <select class="form-control" data-type="selects">';$.each(i,function(t,e){n+='<option value="'+t+'">'+e+"</option>"});n+='</select><span class="help-block">'+e+"</span></div>";n+='<input type="hidden" name="inp[]" '+'value="'+encodeURIComponent($.toJSON({type:"selects",label:t,coment:e,vals:i}))+'">';return n},radios:function(t,e,i){var n='<div class="form-group">        <label class="labelselect">'+t+'</label>        <input type="hidden" value="radiogroup" data-type="radios">';$.each(i,function(t,e){n+='<div class="radio">'+"  <label>"+'    <input type="radio" value="'+t+'">'+e+"  </label>"+"</div>"});n+='<span class="help-block">'+e+"</span></div>";n+='<input type="hidden" name="inp[]" '+'value="'+encodeURIComponent($.toJSON({type:"radios",label:t,coment:e,vals:i}))+'">';return n},checks:function(t,e,i){var n='<div class="form-group">        <label class="labelselect">'+t+'</label>        <input type="hidden" value="checkgroup" data-type="checks">';$.each(i,function(t,e){n+='<div class="checkbox">'+"  <label>"+'    <input type="checkbox" value="'+t+'">'+e+"  </label>"+"</div>"});n+='<span class="help-block">'+e+"</span></div>";n+='<input type="hidden" name="inp[]" '+'value="'+encodeURIComponent($.toJSON({type:"checks",label:t,coment:e,vals:i}))+'">';return n},readFileSelect:function(t,e){if(!t||!t.type.match("image.*")){return}var i=new FileReader;i.onload=function(t){return function(t){$("#valFile_"+e).val(t.target.result)}}(t,e);i.readAsDataURL(t)},generateUUID:function(){var i=(new Date).getTime();if(typeof performance!=="undefined"&&typeof performance.now==="function"){i+=performance.now()}return"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,function(t){var e=(i+Math.random()*16)%16|0;i=Math.floor(i/16);return(t==="x"?e:e&3|8).toString(16)})},radioimgs:function(t,i,e){var n=[];if(e!==undefined){$.each(e,function(t,e){if(e.files[0]){tplUsl.readFileSelect(e.files[0],i[t].file);n[t]=URL.createObjectURL(e.files[0])}else{n[t]=undefined}})}else{var s="/shopdata/"+$('[name="IdPartner"]').val()+"/";$.each(i,function(t,e){n[t]=s+e.file+".png"})}var r='<div class="form-group">        <label class="labelselect">'+t+'</label>        <input type="hidden" value="radiogroup" data-type="radioimgs">';$.each(i,function(t,e){r+='<input type="hidden" name="valFile['+e.file+']" id="valFile_'+e.file+'" value="">'+'<div class="radio">'+"  <label>"+'    <input type="radio" value="'+t+'" style="margin-top: 17px;">'+'<div class="media">'+'  <div class="media-left">';if(n[t]!==undefined){r+='<img class="media-object" src="'+n[t]+'">'}else{}r+="  </div>"+'  <div class="media-body">'+'    <h4 class="media-heading">'+e.val+"</h4>"+e.comment+"  </div>"+"  </label>"+"</div>"+"</div>"});r+='<input type="hidden" name="inp[]" '+'value="'+encodeURIComponent($.toJSON({type:"radioimgs",label:t,vals:i}))+'">';return r},paramInput:function(){return""+'<div class="form-group">'+'<label for="fieldLabel">Название поля</label><label id="fieldLabelLen" class="maxleninfo pull-right">70/70</label>'+'<input type="text" class="form-control" name="fieldLabel" id="fieldLabel" maxlength="70">'+"</div>"+'<div class="form-group">'+'<label for="fieldComent">Комментарий</label><label id="fieldComentLen" class="maxleninfo pull-right">70/70</label>'+'<input type="text" class="form-control" name="fieldComent" id="fieldComent" maxlength="70">'+"</div>"},paramSumm:function(){return""+'<div class="form-group">'+'<label for="fieldLabel">Сумма <small>(от 1 до 150 000 руб.)</small></label>'+'<input type="text" class="form-control summ" name="fieldLabel" id="fieldLabel" maxlength="10">'+"</div>"},paramStaticText:function(){return""+'<div class="form-group">'+'<label for="fieldLabel">Текст</label><label id="fieldLabelLen" class="maxleninfo pull-right">250/250</label>'+'<textarea class="form-control" name="fieldLabel" id="fieldLabel" maxlength="250"></textarea>'+"</div>"},paramStaticImage:function(){return""+'<div class="form-group">'+"<label>Изображение<small> (до 240x240 px)</small></label>"+'<input type="file" name="valFile[]" accept="image/*">'+"</div>"},paramSelect:function(){return""+'<div class="form-group">'+'<label for="fieldLabel">Название элемента</label><label id="fieldLabelLen" class="maxleninfo pull-right">70/70</label>'+'<input type="text" class="form-control" name="fieldLabel" id="fieldLabel" maxlength="70">'+"</div>"+'<div class="form-group">'+"<label>Значения:</label>"+tplUsl.paramSelectFld()+tplUsl.paramSelectFld()+'<div><a onclick="tplUsl.addFieldSelect(this)"><i class="fa fa-plus-circle" aria-hidden="true"></i> Добавить</a></div>'+"</div>"+'<div class="form-group">'+'<label for="fieldComent">Комментарий</label><label id="fieldComentLen" class="maxleninfo pull-right">70/70</label>'+'<input type="text" class="form-control" name="fieldComent" id="fieldComent" maxlength="70">'+"</div>"},paramSelectFld:function(){return'<div class="form-group form-inline">'+'<input type="text" class="form-control" value="" name="selval[]" style="margin-left: 15px; width: 80%;" maxlength="50">'+' <a href="#" onclick="tplUsl.delFieldSelect(this)">'+'<i class="fa fa-times-circle" aria-hidden="true"></i>'+"</a></div>"},delFieldSelect:function(t){$(t).parent().remove()},addFieldSelect:function(t){var e=$(t).parent().parent().find(".form-group").length;if(e<10){$(tplUsl.paramSelectFld()).insertBefore($(t).parent())}else{toastr.options={closeButton:true,progressBar:true,showMethod:"slideDown",timeOut:1e3};toastr.error("Доступно до 10 вариантов","Ошибка")}},paramSelectImgs:function(){return'<div class="form-group">'+'<label for="fieldLabel">Название элемента</label><label id="fieldLabelLen" class="maxleninfo pull-right">70/70</label>'+'<input type="text" class="form-control" name="fieldLabel" id="fieldLabel" maxlength="70">'+"</div>"+'<div class="form-group">'+"<label>Значения:</label>"+tplUsl.paramSelectFldImgs()+tplUsl.paramSelectFldImgs()+'<div><a onclick="tplUsl.addFieldSelectImg(this)">'+'<i class="fa fa-plus-circle" aria-hidden="true"></i> Добавить</a>'+"</div>"+"</div>"},paramSelectFldImgs:function(){return'<div class="row" style="margin-left: 15px;"><div class="col-sm-10">'+'<div class="form-group">'+'<label>Заголовок</label><label class="maxleninfo pull-right">50/50</label>'+'<input type="text" class="form-control" value="" name="selval[]" maxlength="50">'+"</div>"+'<div class="form-group">'+'<label>Описание</label><label class="maxleninfo pull-right">70/70</label>'+'<input type="text" class="form-control" value="" name="valComent[]" maxlength="70">'+"</div>"+'<div class="form-group">'+"<label>Изображение<small> (до 80x80 px)</small></label>"+'<input type="file" name="valFile[]" accept="image/*">'+"</div>"+"</div>"+'<div  class="col-sm-2" style="margin-top: 31px;"><a href="#" onclick="tplUsl.delFieldSelectImg(this)">'+'<i class="fa fa-times-circle" aria-hidden="true"></i>'+"</a></div></div>"},addFieldSelectImg:function(t){var e=$(t).parent().parent().find(".row").length;if(e<10){$(tplUsl.paramSelectFldImgs()).insertBefore($(t).parent())}else{toastr.options={closeButton:true,progressBar:true,showMethod:"slideDown",timeOut:1e3};toastr.error("Доступно до 10 вариантов","Ошибка")}},delFieldSelectImg:function(t){$(t).parent().parent().remove()}};function initAdd(){e();toastr.options={closeButton:true,progressBar:true,showMethod:"slideDown",timeOut:1e3};$('a[data-toggle="tab"]').on("shown.bs.tab",function(t){var e=$(this).attr("data-progress");$(".progress-bar").css("width",e+"%")});$("#addFeildModal").on("show.bs.modal",function(){$(".modal-dialog",this).css("width",700);if($('[name="TypeTemplate"]').val()=="two"){$(".modal-dialog",this).css("width",400)}$(".modal-body").off("keypress").off("input").on("keypress, input","input, textarea",function(t){var e=$(this).attr("maxlength");if($(this).prev(".maxleninfo")){$(this).prev(".maxleninfo").html(e-$(this).val().length+"/"+e)}});switch(addUsl.idField){case"text":case"dig":case"datetime":$("#addFeildModalLabel").html("Добавить элемент поля");$(this).find(".modal-body").html(tplUsl.paramInput);break;case"summ":$("#addFeildModalLabel").html("Добавить элемент суммы");$(this).find(".modal-body").html(tplUsl.paramSumm);$(".modal-body").find("input.summ").off("keypress").off("input").off("paste").on("keypress input paste",function(t){var e=$(this).val();return t.charCode>=48&&t.charCode<=57||t.charCode===46&&e.indexOf(".")===-1});break;case"statictext":$("#addFeildModalLabel").html("Добавить элемент контента");$(this).find(".modal-body").html(tplUsl.paramStaticText);break;case"staticimage":$("#addFeildModalLabel").html("Добавить элемент контента");$(this).find(".modal-body").html(tplUsl.paramStaticImage);break;case"selects":case"radios":case"checks":$("#addFeildModalLabel").html("Добавить элемент списка");$(this).find(".modal-body").html(tplUsl.paramSelect);break;case"radioimgs":$("#addFeildModalLabel").html("Добавить элемент списка");$(this).find(".modal-body").html(tplUsl.paramSelectImgs);break}});$(".modal-dialog").draggable();$("#addFeildModalOk").on("click",function(){if(!c())return false;var t=$("#addFeildModalBody").find('[name="fieldLabel"]').val();var e=$("#addFeildModalBody").find('[name="fieldComent"]').val();if(addUsl.typesFlt.indexOf(addUsl.idField)!==-1){var i=[];$.each($("#addFeildModalBody").find('[name="valComent[]"]'),function(t,e){i[t]=e});var n=$("#addFeildModalBody").find('[name="valFile[]"]');var s=[];$.each(n,function(t,e){s[t]=tplUsl.generateUUID()});var r=[];$.each($("#addFeildModalBody").find('[name="selval[]"]'),function(t,e){if(addUsl.idField==="radioimgs"){r[t]={val:$(e).val(),comment:$(i[t]).val(),file:s[t]}}else{r[t]=$(e).val()}});if(addUsl.idField==="staticimage"){r[0]=s[0]}var o=addUsl.addField(addUsl.idField,t,e,r,n);if(o!==""){var a=$("#"+addUsl.dropFrom).find(".list-group-item");var l=0;if(a.length>0){$.each(a,function(t,e){var i=$(e).offset().top-$(document).scrollTop()+$(e).height();if(i>addUsl.dropPosY){$(o).insertBefore(e);l=1;return false}})}if(!l){$("#"+addUsl.dropFrom).append(o)}if(addUsl.idField==="datetime"){$(".datetimepicker").datetimepicker()}}}$("#addFeildModal").modal("hide");return false});function c(){var i;switch(addUsl.idField){case"text":case"dig":case"datetime":break;case"summ":i=$("#addFeildModalBody").find('[name="fieldLabel"]').val();if(parseFloat(i)<=0||parseFloat(i)>15e4){toastr.error("Неверная сумма","Ошибка");return false}break;case"statictext":i=$("#addFeildModalBody").find('[name="fieldLabel"]').val();if(i==""){toastr.error("Введите текст","Ошибка");return false}break;case"staticimage":i=$("#addFeildModalBody").find("[name^=valFile]").val();if(i==""){toastr.error("Выберите изображение","Ошибка");return false}break;case"selects":case"radios":case"radioimgs":i=true;$.each($("#addFeildModalBody").find("[name^=selval]"),function(t,e){if(!$(e).val().length){i=false}});if(i){i=$("#addFeildModalBody").find("[name^=selval]").length;if(i<2||i>10){i=false}}if(!i){toastr.error("Необходимо добавить от 2 до 10 значениий","Ошибка");return false}break;case"checks":i=true;$.each($("#addFeildModalBody").find("[name^=selval]"),function(t,e){if(!$(e).val().length){i=false}});if(i){i=$("#addFeildModalBody").find("[name^=selval]").length;if(!i||i>10){i=false}}if(!i){toastr.error("Необходимо добавить до 10 значений","Ошибка");return false}break}return true}$('a[data-click="prototype"]').on("click",function(){addUsl.typeFrom=$(this).attr("data-id");$("#addFormModal").modal("show")});$("#addFormModal").on("show.bs.modal",function(){});$("#addFormModalOk").on("click",function(){var t="Заказ";$("#uslbody").html(tplUsl.form(addUsl.typeFrom));$("#uslname").html(t);$('[name="NameForm"]').val(t);$('[name="TypeTemplate"]').val(addUsl.typeFrom);addUsl.setSortable("listgroupsortable");if(addUsl.typeFrom==="two"){addUsl.setSortable("listgroupsortable2")}$("#addFormModal").modal("hide")});$(".modal").on("change",'[name^="valFile"]',function(){var t=this.files[0];if(t!==undefined){console.log(t.type);if(t.name.length<1){$(this).val("")}else if(t.size>2e7){toastr.error("Файл слишком большой","Ошибка");$(this).val("")}else if(t.type!=="image/png"&&t.type!=="image/jpg"&&t.type!=="image/gif"&&t.type!=="image/jpeg"){toastr.error("Можно выбрать только картинку","Ошибка");$(this).val("")}}else{$(this).val("")}});$("#uslFormSave").on("click",function(){if(!t())return false;var i=new FormData($("#uslForm")[0]);$.each($("#fielsForm").find('input[name="inp[]"]'),function(t,e){i.append("inp1["+t+"]",$(e).val())});$.each($("#fielsForm").find("input[name^=valFile]"),function(t,e){console.log(e);i.append($(e).attr("name"),$(e).val())});$.each($("#fielsForm2").find('input[name="inp[]"]'),function(t,e){i.append("inp2["+t+"]",$(e).val())});$.each($("#fielsForm2").find("input[name^=valFile]"),function(t,e){console.log(e);i.append($(e).attr("name"),$(e).val())});$.ajax({type:"POST",url:"/partner/uslug/addpost",beforeSend:function(){$("#uslFormSave").prop("disabled",true)},data:i,cache:false,contentType:false,processData:false,success:function(t){$("#uslFormSave").prop("disabled",false);if(t.status===1){toastr.success("Ok","Виджет сохранен");$('[name="IdUsl"]').val(t.idusl)}else{toastr.error("Ошибка сохранения","Ошибка")}},error:function(){$("#uslFormSave").prop("disabled",false);toastr.error("Ошибка сохранения виджета","Ошибка")}})});function t(){var t=$("#listgroupsortable").find(".list-group-item").length+$("#listgroupsortable2").find(".list-group-item").length;if(!t){toastr.error("Необходимо добавить элементы","Ошибка");return false}var e=$("#listgroupsortable").find("label.summfield").length+$("#listgroupsortable2").find("label.summfield").length;if(!e){toastr.error("Необходимо добавить элемент суммы","Ошибка");return false}return true}function e(){var t=$('[name="IdUsl"]').val();if(!t){addUsl.addSortable("two")}else{var e=$('[name="IdPartner"]').val();$.ajax({type:"GET",url:"/partner/uslug/add?IdUsl="+t+"&IdPartner="+e,beforeSend:function(){},success:function(t){if(t.status===1){addUsl.addSortable(t.CustomData.TypeTemplate);$('[name="NameForm"]').val(t.CustomData.NameForm);$("#uslname").html(t.CustomData.NameForm);$('[name="TypeTemplate"]').val(t.CustomData.TypeTemplate);var n="listgroupsortable";$.each(t.CustomData.fields1,function(t,e){var i;if(e.type==="summ"){i=addUsl.addField(e.type,e.fixed)}else{i=addUsl.addField(e.type,e.label,e.coment,e.vals,e.valsRFl)}if(i!==""){$("#"+n).append(i);if(e.type==="datetime"){$(".datetimepicker").datetimepicker({format:"DD.MM.YYYY HH:mm"})}}});n="listgroupsortable2";$.each(t.CustomData.fields2,function(t,e){var i;if(e.type==="summ"){i=addUsl.addField(e.type,e.fixed)}else{i=addUsl.addField(e.type,e.label,e.coment,e.vals,e.valsRFl)}if(i!==""){$("#"+n).append(i);if(e.type==="datetime"){$(".datetimepicker").datetimepicker()}}})}else{}},error:function(){}})}}}"use strict";var addUsl={sortable:null,sortable2:null,idField:null,typeFrom:null,typesFlt:["text","dig","datetime","summ","statictext","staticimage","selects","radios","radioimgs","checks","checkimgs"],dropFrom:"",dropPosY:0,addSortable:function(t){if(t==="one"){$("#uslbody").append(tplUsl.form("one"));addUsl.setSortable("listgroupsortable")}else{$("#uslbody").append(tplUsl.form("two"));addUsl.setSortable("listgroupsortable");addUsl.setSortable("listgroupsortable2")}},setSortable:function(t){var e=document.getElementById(t);if(e!==undefined&&t==="listgroupsortable"){addUsl.sortable=Sortable.create(e,{group:{name:"fields",pull:true,put:function(t){if(t.el.children.length<=4){return true}else{return false}}},animation:150})}if(e!==undefined&&t==="listgroupsortable2"){addUsl.sortable2=Sortable.create(e,{group:{name:"fields",pull:true,put:function(t){return t.el.children.length<=4}},animation:150})}},delField:function(t){$(t).parent().remove()},addField:function(t,e,i,n,s){var r="";switch(t){case"text":case"dig":r=tplUsl.field(tplUsl.input(e,i,t));break;case"datetime":r=tplUsl.field(tplUsl.datetime(e,i));break;case"summ":var o=$("#listgroupsortable").find("label.summfield");if(!o.length){o=$("#listgroupsortable2").find("label.summfield")}if(o){addUsl.delField(o.parent())}r=tplUsl.field(tplUsl.summ(e));break;case"statictext":r=tplUsl.field(tplUsl.statictext(e));break;case"staticimage":r=tplUsl.field(tplUsl.staticimage(e,n,s));break;case"selects":r=tplUsl.field(tplUsl.selects(e,i,n));break;case"radios":r=tplUsl.field(tplUsl.radios(e,i,n));break;case"checks":r=tplUsl.field(tplUsl.checks(e,i,n));break;case"radioimgs":r=tplUsl.field(tplUsl.radioimgs(e,n,s));break}return r},dragElem:function(t){var e=$(t.target).attr("data-id");if(!e){e=$(t.target).parent().attr("data-id")}t.dataTransfer.setData("text/plain",e)},makeDroppable:function(t){t.preventDefault()},dropElem:function(t){t.preventDefault();addUsl.dropPosY=t.pageY;addUsl.dropFrom=t.target.id;if(addUsl.dropFrom===""){addUsl.dropFrom=$(t.target).closest("ul").attr("id")}var e=t.dataTransfer.getData("text/plain");if(addUsl.typesFlt.indexOf(e)!==-1){var i=$("#"+addUsl.dropFrom).find(".list-group-item").length;if(i>4){toastr.error("Элементов слишком много","Ошибка");return false}else{addUsl.idField=t.dataTransfer.getData("text/plain");$("#addFeildModal").modal("show")}}}};(function t(e){"use strict";if(typeof define==="function"&&define.amd){define(e)}else if(typeof module!="undefined"&&typeof module.exports!="undefined"){module.exports=e()}else{window["Sortable"]=e()}})(function t(){"use strict";if(typeof window==="undefined"||!window.document){return function t(){throw new Error("Sortable.js requires a window with a document")}}var k,C,S,T,D,M,u,g,v,y,P,I,E,c,n,F,$,b={},h,l,A,a=/\s+/g,N=/left|right|inline/,H="Sortable"+(new Date).getTime(),w=window,d=w.document,B=w.parseInt,O=w.setTimeout,e=w.jQuery||w.Zepto,i=w.Polymer,j=false,W="draggable"in d.createElement("div"),Y=function(t){if(!!navigator.userAgent.match(/(?:Trident.*rv[ :]?11\.|msie)/i)){return false}t=d.createElement("x");t.style.cssText="pointer-events:auto";return t.style.pointerEvents==="auto"}(),q=false,x=Math.abs,U=Math.min,V=[],r=[],G=ot(function(t,e,i){if(i&&e.scroll){var n=i[H],s,r,o=e.scrollSensitivity,a=e.scrollSpeed,l=t.clientX,c=t.clientY,h=window.innerWidth,u=window.innerHeight,d,f,p,m;if(v!==i){g=e.scroll;v=i;y=e.scrollFn;if(g===true){g=i;do{if(g.offsetWidth<g.scrollWidth||g.offsetHeight<g.scrollHeight){break}}while(g=g.parentNode)}}if(g){s=g;r=g.getBoundingClientRect();d=(x(r.right-l)<=o)-(x(r.left-l)<=o);f=(x(r.bottom-c)<=o)-(x(r.top-c)<=o)}if(!(d||f)){d=(h-l<=o)-(l<=o);f=(u-c<=o)-(c<=o);(d||f)&&(s=w)}if(b.vx!==d||b.vy!==f||b.el!==s){b.el=s;b.vx=d;b.vy=f;clearInterval(b.pid);if(s){b.pid=setInterval(function(){m=f?f*a:0;p=d?d*a:0;if("function"===typeof y){return y.call(n,p,m,t)}if(s===w){w.scrollTo(w.pageXOffset+p,w.pageYOffset+m)}else{s.scrollTop+=m;s.scrollLeft+=p}},24)}}}},30),X=function(t){function e(n,s){if(n===void 0||n===true){n=i.name}if(typeof n==="function"){return n}else{return function(t,e){var i=e.options.group.name;return s?n:n&&(n.join?n.indexOf(i)>-1:i==n)}}}var i={};var n=t.group;if(!n||typeof n!="object"){n={name:n}}i.name=n.name;i.checkPull=e(n.pull,true);i.checkPut=e(n.put);i.revertClone=n.revertClone;t.group=i};function L(t,e){if(!(t&&t.nodeType&&t.nodeType===1)){throw"Sortable: `el` must be HTMLElement, and not "+{}.toString.call(t)}this.el=t;this.options=e=at({},e);t[H]=this;var i={group:Math.random(),sort:true,disabled:false,store:null,handle:null,scroll:true,scrollSensitivity:30,scrollSpeed:10,draggable:/[uo]l/i.test(t.nodeName)?"li":">*",ghostClass:"sortable-ghost",chosenClass:"sortable-chosen",dragClass:"sortable-drag",ignore:"a, img",filter:null,preventOnFilter:true,animation:0,setData:function(t,e){t.setData("Text",e.textContent)},dropBubble:false,dragoverBubble:false,dataIdAttr:"data-id",delay:0,forceFallback:false,fallbackClass:"sortable-fallback",fallbackOnBody:false,fallbackTolerance:0,fallbackOffset:{x:0,y:0}};for(var n in i){!(n in e)&&(e[n]=i[n])}X(e);for(var s in this){if(s.charAt(0)==="_"&&typeof this[s]==="function"){this[s]=this[s].bind(this)}}this.nativeDraggable=e.forceFallback?false:W;f(t,"mousedown",this._onTapStart);f(t,"touchstart",this._onTapStart);f(t,"pointerdown",this._onTapStart);if(this.nativeDraggable){f(t,"dragover",this);f(t,"dragenter",this)}r.push(this._onDragOver);e.store&&this.sort(e.store.get(this))}L.prototype={constructor:L,_onTapStart:function(t){var e=this,i=this.el,n=this.options,s=n.preventOnFilter,r=t.type,o=t.touches&&t.touches[0],a=(o||t).target,l=t.target.shadowRoot&&(t.path&&t.path[0])||a,c=n.filter,h;ct(i);if(k){return}if(/mousedown|pointerdown/.test(r)&&t.button!==0||n.disabled){return}if(l.isContentEditable){return}a=R(a,n.draggable,i);if(!a){return}if(u===a){return}h=_(a,n.draggable);if(typeof c==="function"){if(c.call(this,t,a,this)){m(e,l,"filter",a,i,i,h);s&&t.preventDefault();return}}else if(c){c=c.split(",").some(function(t){t=R(l,t.trim(),i);if(t){m(e,t,"filter",a,i,i,h);return true}});if(c){s&&t.preventDefault();return}}if(n.handle&&!R(l,n.handle,i)){return}this._prepareDragStart(t,o,a,h)},_prepareDragStart:function(t,e,i,n){var s=this,r=s.el,o=s.options,a=r.ownerDocument,l;if(i&&!k&&i.parentNode===r){h=t;D=r;k=i;C=k.parentNode;M=k.nextSibling;u=i;F=o.group;c=n;this._lastX=(e||t).clientX;this._lastY=(e||t).clientY;k.style["will-change"]="all";l=function(){s._disableDelayedDrag();k.draggable=s.nativeDraggable;p(k,o.chosenClass,true);s._triggerDragStart(t,e);m(s,D,"choose",k,D,D,c)};o.ignore.split(",").forEach(function(t){J(k,t.trim(),et)});f(a,"mouseup",s._onDrop);f(a,"touchend",s._onDrop);f(a,"touchcancel",s._onDrop);f(a,"pointercancel",s._onDrop);f(a,"selectstart",s);if(o.delay){f(a,"mouseup",s._disableDelayedDrag);f(a,"touchend",s._disableDelayedDrag);f(a,"touchcancel",s._disableDelayedDrag);f(a,"mousemove",s._disableDelayedDrag);f(a,"touchmove",s._disableDelayedDrag);f(a,"pointermove",s._disableDelayedDrag);s._dragStartTimer=O(l,o.delay)}else{l()}}},_disableDelayedDrag:function(){var t=this.el.ownerDocument;clearTimeout(this._dragStartTimer);s(t,"mouseup",this._disableDelayedDrag);s(t,"touchend",this._disableDelayedDrag);s(t,"touchcancel",this._disableDelayedDrag);s(t,"mousemove",this._disableDelayedDrag);s(t,"touchmove",this._disableDelayedDrag);s(t,"pointermove",this._disableDelayedDrag)},_triggerDragStart:function(t,e){e=e||(t.pointerType=="touch"?t:null);if(e){h={target:k,clientX:e.clientX,clientY:e.clientY};this._onDragStart(h,"touch")}else if(!this.nativeDraggable){this._onDragStart(h,true)}else{f(k,"dragend",this);f(D,"dragstart",this._onDragStart)}try{if(d.selection){o(function(){d.selection.empty()})}else{window.getSelection().removeAllRanges()}}catch(t){}},_dragStarted:function(){if(D&&k){var t=this.options;p(k,t.ghostClass,true);p(k,t.dragClass,false);L.active=this;m(this,D,"start",k,D,D,c)}else{this._nulling()}},_emulateDragOver:function(){if(l){if(this._lastX===l.clientX&&this._lastY===l.clientY){return}this._lastX=l.clientX;this._lastY=l.clientY;if(!Y){z(S,"display","none")}var t=d.elementFromPoint(l.clientX,l.clientY),e=t,i=r.length;if(e){do{if(e[H]){while(i--){r[i]({clientX:l.clientX,clientY:l.clientY,target:t,rootEl:e})}break}t=e}while(e=e.parentNode)}if(!Y){z(S,"display","")}}},_onTouchMove:function(t){if(h){var e=this.options,i=e.fallbackTolerance,n=e.fallbackOffset,s=t.touches?t.touches[0]:t,r=s.clientX-h.clientX+n.x,o=s.clientY-h.clientY+n.y,a=t.touches?"translate3d("+r+"px,"+o+"px,0)":"translate("+r+"px,"+o+"px)";if(!L.active){if(i&&U(x(s.clientX-this._lastX),x(s.clientY-this._lastY))<i){return}this._dragStarted()}this._appendGhost();A=true;l=s;z(S,"webkitTransform",a);z(S,"mozTransform",a);z(S,"msTransform",a);z(S,"transform",a);t.preventDefault()}},_appendGhost:function(){if(!S){var t=k.getBoundingClientRect(),e=z(k),i=this.options,n;S=k.cloneNode(true);p(S,i.ghostClass,false);p(S,i.fallbackClass,true);p(S,i.dragClass,true);z(S,"top",t.top-B(e.marginTop,10));z(S,"left",t.left-B(e.marginLeft,10));z(S,"width",t.width);z(S,"height",t.height);z(S,"opacity","0.8");z(S,"position","fixed");z(S,"zIndex","100000");z(S,"pointerEvents","none");i.fallbackOnBody&&d.body.appendChild(S)||D.appendChild(S);n=S.getBoundingClientRect();z(S,"width",t.width*2-n.width);z(S,"height",t.height*2-n.height)}},_onDragStart:function(t,e){var i=this;var n=t.dataTransfer;var s=i.options;i._offUpEvents();if(F.checkPull(i,i,k,t)){T=lt(k);T.draggable=false;T.style["will-change"]="";z(T,"display","none");p(T,i.options.chosenClass,false);i._cloneId=o(function(){D.insertBefore(T,k);m(i,D,"clone",k)})}p(k,s.dragClass,true);if(e){if(e==="touch"){f(d,"touchmove",i._onTouchMove);f(d,"touchend",i._onDrop);f(d,"touchcancel",i._onDrop);f(d,"pointermove",i._onTouchMove);f(d,"pointerup",i._onDrop)}else{f(d,"mousemove",i._onTouchMove);f(d,"mouseup",i._onDrop)}i._loopId=setInterval(i._emulateDragOver,50)}else{if(n){n.effectAllowed="move";s.setData&&s.setData.call(i,n,k)}f(d,"drop",i);f(d,"mouseover",i);i._dragStartId=o(i._dragStarted)}},_onDragOver:function(t){var e=this.el,i,n,s,r,o=this.options,a=o.group,l=L.active,c=F===a,h=false,u=o.sort;if(t.preventDefault!==void 0){t.preventDefault();!o.dragoverBubble&&t.stopPropagation()}if(k.animated){return}A=true;if(l&&!o.disabled&&(c?u||(r=!D.contains(k)):$===this||(l.lastPullMode=F.checkPull(this,l,k,t))&&a.checkPut(this,l,k,t))&&(t.rootEl===void 0||t.rootEl===this.el)){G(t,o,this.el);if(q){return}i=R(t.target,o.draggable,e);n=k.getBoundingClientRect();if($!==this){$=this;h=true}if(r){K(l,true);C=D;if(T||M){D.insertBefore(k,T||M)}else if(!u){D.appendChild(k)}return}if(e.children.length===0||e.children[0]===S||e===t.target&&nt(e,t)){if(e.children.length!==0&&e.children[0]!==S&&e===t.target){i=e.lastElementChild}if(i){if(i.animated){return}s=i.getBoundingClientRect()}K(l,c);if(tt(D,e,k,n,i,s,t)!==false){if(!k.contains(e)){e.appendChild(k);C=e}this._animate(n,k);i&&this._animate(s,i)}}else if(i&&!i.animated&&i!==k&&i.parentNode[H]!==void 0){if(P!==i){P=i;I=z(i);E=z(i.parentNode)}s=i.getBoundingClientRect();var d=s.right-s.left,f=s.bottom-s.top,p=N.test(I.cssFloat+I.display)||E.display=="flex"&&E["flex-direction"].indexOf("row")===0,m=i.offsetWidth>k.offsetWidth,g=i.offsetHeight>k.offsetHeight,v=(p?(t.clientX-s.left)/d:(t.clientY-s.top)/f)>.5,y=i.nextElementSibling,b=false;if(p){var w=k.offsetTop,x=i.offsetTop;if(w===x){b=i.previousElementSibling===k&&!m||v&&m}else if(i.previousElementSibling===k||k.previousElementSibling===i){b=(t.clientY-s.top)/f>.5}else{b=x>w}}else if(!h){b=y!==k&&!g||v&&g}var _=tt(D,e,k,n,i,s,t,b);if(_!==false){if(_===1||_===-1){b=_===1}q=true;O(it,30);K(l,c);if(!k.contains(e)){if(b&&!y){e.appendChild(k)}else{i.parentNode.insertBefore(k,b?y:i)}}C=k.parentNode;this._animate(n,k);this._animate(s,i)}}}},_animate:function(t,e){var i=this.options.animation;if(i){var n=e.getBoundingClientRect();if(t.nodeType===1){t=t.getBoundingClientRect()}z(e,"transition","none");z(e,"transform","translate3d("+(t.left-n.left)+"px,"+(t.top-n.top)+"px,0)");e.offsetWidth;z(e,"transition","all "+i+"ms");z(e,"transform","translate3d(0,0,0)");clearTimeout(e.animated);e.animated=O(function(){z(e,"transition","");z(e,"transform","");e.animated=false},i)}},_offUpEvents:function(){var t=this.el.ownerDocument;s(d,"touchmove",this._onTouchMove);s(d,"pointermove",this._onTouchMove);s(t,"mouseup",this._onDrop);s(t,"touchend",this._onDrop);s(t,"pointerup",this._onDrop);s(t,"touchcancel",this._onDrop);s(t,"pointercancel",this._onDrop);s(t,"selectstart",this)},_onDrop:function(t){var e=this.el,i=this.options;clearInterval(this._loopId);clearInterval(b.pid);clearTimeout(this._dragStartTimer);ht(this._cloneId);ht(this._dragStartId);s(d,"mouseover",this);s(d,"mousemove",this._onTouchMove);if(this.nativeDraggable){s(d,"drop",this);s(e,"dragstart",this._onDragStart)}this._offUpEvents();if(t){if(A){t.preventDefault();!i.dropBubble&&t.stopPropagation()}S&&S.parentNode&&S.parentNode.removeChild(S);if(D===C||L.active.lastPullMode!=="clone"){T&&T.parentNode&&T.parentNode.removeChild(T)}if(k){if(this.nativeDraggable){s(k,"dragend",this)}et(k);k.style["will-change"]="";p(k,this.options.ghostClass,false);p(k,this.options.chosenClass,false);m(this,D,"unchoose",k,C,D,c);if(D!==C){n=_(k,i.draggable);if(n>=0){m(null,C,"add",k,C,D,c,n);m(this,D,"remove",k,C,D,c,n);m(null,C,"sort",k,C,D,c,n);m(this,D,"sort",k,C,D,c,n)}}else{if(k.nextSibling!==M){n=_(k,i.draggable);if(n>=0){m(this,D,"update",k,C,D,c,n);m(this,D,"sort",k,C,D,c,n)}}}if(L.active){if(n==null||n===-1){n=c}m(this,D,"end",k,C,D,c,n);this.save()}}}this._nulling()},_nulling:function(){D=k=C=S=M=T=u=g=v=h=l=A=n=P=I=$=F=L.active=null;V.forEach(function(t){t.checked=true});V.length=0},handleEvent:function(t){switch(t.type){case"drop":case"dragend":this._onDrop(t);break;case"dragover":case"dragenter":if(k){this._onDragOver(t);Z(t)}break;case"mouseover":this._onDrop(t);break;case"selectstart":t.preventDefault();break}},toArray:function(){var t=[],e,i=this.el.children,n=0,s=i.length,r=this.options;for(;n<s;n++){e=i[n];if(R(e,r.draggable,this.el)){t.push(e.getAttribute(r.dataIdAttr)||st(e))}}return t},sort:function(t){var n={},s=this.el;this.toArray().forEach(function(t,e){var i=s.children[e];if(R(i,this.options.draggable,s)){n[t]=i}},this);t.forEach(function(t){if(n[t]){s.removeChild(n[t]);s.appendChild(n[t])}})},save:function(){var t=this.options.store;t&&t.set(this)},closest:function(t,e){return R(t,e||this.options.draggable,this.el)},option:function(t,e){var i=this.options;if(e===void 0){return i[t]}else{i[t]=e;if(t==="group"){X(i)}}},destroy:function(){var t=this.el;t[H]=null;s(t,"mousedown",this._onTapStart);s(t,"touchstart",this._onTapStart);s(t,"pointerdown",this._onTapStart);if(this.nativeDraggable){s(t,"dragover",this);s(t,"dragenter",this)}Array.prototype.forEach.call(t.querySelectorAll("[draggable]"),function(t){t.removeAttribute("draggable")});r.splice(r.indexOf(this._onDragOver),1);this._onDrop();this.el=t=null}};function K(t,e){if(t.lastPullMode!=="clone"){e=true}if(T&&T.state!==e){z(T,"display",e?"none":"");if(!e){if(T.state){if(t.options.group.revertClone){D.insertBefore(T,M);t._animate(k,T)}else{D.insertBefore(T,k)}}}T.state=e}}function R(t,e,i){if(t){i=i||d;do{if(e===">*"&&t.parentNode===i||rt(t,e)){return t}}while(t=Q(t))}return null}function Q(t){var e=t.host;return e&&e.nodeType?e:t.parentNode}function Z(t){if(t.dataTransfer){t.dataTransfer.dropEffect="move"}t.preventDefault()}function f(t,e,i){t.addEventListener(e,i,j)}function s(t,e,i){t.removeEventListener(e,i,j)}function p(t,e,i){if(t){if(t.classList){t.classList[i?"add":"remove"](e)}else{var n=(" "+t.className+" ").replace(a," ").replace(" "+e+" "," ");t.className=(n+(i?" "+e:"")).replace(a," ")}}}function z(t,e,i){var n=t&&t.style;if(n){if(i===void 0){if(d.defaultView&&d.defaultView.getComputedStyle){i=d.defaultView.getComputedStyle(t,"")}else if(t.currentStyle){i=t.currentStyle}return e===void 0?i:i[e]}else{if(!(e in n)){e="-webkit-"+e}n[e]=i+(typeof i==="string"?"":"px")}}}function J(t,e,i){if(t){var n=t.getElementsByTagName(e),s=0,r=n.length;if(i){for(;s<r;s++){i(n[s],s)}}return n}return[]}function m(t,e,i,n,s,r,o,a){t=t||e[H];var l=d.createEvent("Event"),c=t.options,h="on"+i.charAt(0).toUpperCase()+i.substr(1);l.initEvent(i,true,true);l.to=s||e;l.from=r||e;l.item=n||e;l.clone=T;l.oldIndex=o;l.newIndex=a;e.dispatchEvent(l);if(c[h]){c[h].call(t,l)}}function tt(t,e,i,n,s,r,o,a){var l,c=t[H],h=c.options.onMove,u;l=d.createEvent("Event");l.initEvent("move",true,true);l.to=e;l.from=t;l.dragged=i;l.draggedRect=n;l.related=s||e;l.relatedRect=r||e.getBoundingClientRect();l.willInsertAfter=a;t.dispatchEvent(l);if(h){u=h.call(c,l,o)}return u}function et(t){t.draggable=false}function it(){q=false}function nt(t,e){var i=t.lastElementChild,n=i.getBoundingClientRect();return e.clientY-(n.top+n.height)>5||e.clientX-(n.left+n.width)>5}function st(t){var e=t.tagName+t.className+t.src+t.href+t.textContent,i=e.length,n=0;while(i--){n+=e.charCodeAt(i)}return n.toString(36)}function _(t,e){var i=0;if(!t||!t.parentNode){return-1}while(t&&(t=t.previousElementSibling)){if(t.nodeName.toUpperCase()!=="TEMPLATE"&&(e===">*"||rt(t,e))){i++}}return i}function rt(t,e){if(t){e=e.split(".");var i=e.shift().toUpperCase(),n=new RegExp("\\s("+e.join("|")+")(?=\\s)","g");return(i===""||t.nodeName.toUpperCase()==i)&&(!e.length||((" "+t.className+" ").match(n)||[]).length==e.length)}return false}function ot(t,e){var i,n;return function(){if(i===void 0){i=arguments;n=this;O(function(){if(i.length===1){t.call(n,i[0])}else{t.apply(n,i)}i=void 0},e)}}}function at(t,e){if(t&&e){for(var i in e){if(e.hasOwnProperty(i)){t[i]=e[i]}}}return t}function lt(t){if(i&&i.dom){return i.dom(t).cloneNode(true)}else if(e){return e(t).clone(true)[0]}else{return t.cloneNode(true)}}function ct(t){var e=t.getElementsByTagName("input");var i=e.length;while(i--){var n=e[i];n.checked&&V.push(n)}}function o(t){return O(t,0)}function ht(t){return clearTimeout(t)}f(d,"touchmove",function(t){if(L.active){t.preventDefault()}});try{window.addEventListener("test",null,Object.defineProperty({},"passive",{get:function(){j={capture:false,passive:false}}}))}catch(t){}L.utils={on:f,off:s,css:z,find:J,is:function(t,e){return!!R(t,e,t)},extend:at,throttle:ot,closest:R,toggleClass:p,clone:lt,index:_,nextTick:o,cancelNextTick:ht};L.create=function(t,e){return new L(t,e)};L.version="1.6.1";return L});(function(t){if(typeof define==="function"&&define.amd){define(["jquery"],t)}else{t(jQuery)}})(function(b){b.ui=b.ui||{};var t=b.ui.version="1.12.1";var i=0;var a=Array.prototype.slice;b.cleanData=function(s){return function(t){var e,i,n;for(n=0;(i=t[n])!=null;n++){try{e=b._data(i,"events");if(e&&e.remove){b(i).triggerHandler("remove")}}catch(t){}}s(t)}}(b.cleanData);b.widget=function(t,i,e){var n,s,r;var o={};var a=t.split(".")[0];t=t.split(".")[1];var l=a+"-"+t;if(!e){e=i;i=b.Widget}if(b.isArray(e)){e=b.extend.apply(null,[{}].concat(e))}b.expr[":"][l.toLowerCase()]=function(t){return!!b.data(t,l)};b[a]=b[a]||{};n=b[a][t];s=b[a][t]=function(t,e){if(!this._createWidget){return new s(t,e)}if(arguments.length){this._createWidget(t,e)}};b.extend(s,n,{version:e.version,_proto:b.extend({},e),_childConstructors:[]});r=new i;r.options=b.widget.extend({},r.options);b.each(e,function(e,r){if(!b.isFunction(r)){o[e]=r;return}o[e]=function(){function n(){return i.prototype[e].apply(this,arguments)}function s(t){return i.prototype[e].apply(this,t)}return function(){var t=this._super;var e=this._superApply;var i;this._super=n;this._superApply=s;i=r.apply(this,arguments);this._super=t;this._superApply=e;return i}}()});s.prototype=b.widget.extend(r,{widgetEventPrefix:n?r.widgetEventPrefix||t:t},o,{constructor:s,namespace:a,widgetName:t,widgetFullName:l});if(n){b.each(n._childConstructors,function(t,e){var i=e.prototype;b.widget(i.namespace+"."+i.widgetName,s,e._proto)});delete n._childConstructors}else{i._childConstructors.push(s)}b.widget.bridge(t,s);return s};b.widget.extend=function(t){var e=a.call(arguments,1);var i=0;var n=e.length;var s;var r;for(;i<n;i++){for(s in e[i]){r=e[i][s];if(e[i].hasOwnProperty(s)&&r!==undefined){if(b.isPlainObject(r)){t[s]=b.isPlainObject(t[s])?b.widget.extend({},t[s],r):b.widget.extend({},r)}else{t[s]=r}}}}return t};b.widget.bridge=function(r,e){var o=e.prototype.widgetFullName||r;b.fn[r]=function(i){var t=typeof i==="string";var n=a.call(arguments,1);var s=this;if(t){if(!this.length&&i==="instance"){s=undefined}else{this.each(function(){var t;var e=b.data(this,o);if(i==="instance"){s=e;return false}if(!e){return b.error("cannot call methods on "+r+" prior to initialization; "+"attempted to call method '"+i+"'")}if(!b.isFunction(e[i])||i.charAt(0)==="_"){return b.error("no such method '"+i+"' for "+r+" widget instance")}t=e[i].apply(e,n);if(t!==e&&t!==undefined){s=t&&t.jquery?s.pushStack(t.get()):t;return false}})}}else{if(n.length){i=b.widget.extend.apply(null,[i].concat(n))}this.each(function(){var t=b.data(this,o);if(t){t.option(i||{});if(t._init){t._init()}}else{b.data(this,o,new e(i,this))}})}return s}};b.Widget=function(){};b.Widget._childConstructors=[];b.Widget.prototype={widgetName:"widget",widgetEventPrefix:"",defaultElement:"<div>",options:{classes:{},disabled:false,create:null},_createWidget:function(t,e){e=b(e||this.defaultElement||this)[0];this.element=b(e);this.uuid=i++;this.eventNamespace="."+this.widgetName+this.uuid;this.bindings=b();this.hoverable=b();this.focusable=b();this.classesElementLookup={};if(e!==this){b.data(e,this.widgetFullName,this);this._on(true,this.element,{remove:function(t){if(t.target===e){this.destroy()}}});this.document=b(e.style?e.ownerDocument:e.document||e);this.window=b(this.document[0].defaultView||this.document[0].parentWindow)}this.options=b.widget.extend({},this.options,this._getCreateOptions(),t);this._create();if(this.options.disabled){this._setOptionDisabled(this.options.disabled)}this._trigger("create",null,this._getCreateEventData());this._init()},_getCreateOptions:function(){return{}},_getCreateEventData:b.noop,_create:b.noop,_init:b.noop,destroy:function(){var i=this;this._destroy();b.each(this.classesElementLookup,function(t,e){i._removeClass(e,t)});this.element.off(this.eventNamespace).removeData(this.widgetFullName);this.widget().off(this.eventNamespace).removeAttr("aria-disabled");this.bindings.off(this.eventNamespace)},_destroy:b.noop,widget:function(){return this.element},option:function(t,e){var i=t;var n;var s;var r;if(arguments.length===0){return b.widget.extend({},this.options)}if(typeof t==="string"){i={};n=t.split(".");t=n.shift();if(n.length){s=i[t]=b.widget.extend({},this.options[t]);for(r=0;r<n.length-1;r++){s[n[r]]=s[n[r]]||{};s=s[n[r]]}t=n.pop();if(arguments.length===1){return s[t]===undefined?null:s[t]}s[t]=e}else{if(arguments.length===1){return this.options[t]===undefined?null:this.options[t]}i[t]=e}}this._setOptions(i);return this},_setOptions:function(t){var e;for(e in t){this._setOption(e,t[e])}return this},_setOption:function(t,e){if(t==="classes"){this._setOptionClasses(e)}this.options[t]=e;if(t==="disabled"){this._setOptionDisabled(e)}return this},_setOptionClasses:function(t){var e,i,n;for(e in t){n=this.classesElementLookup[e];if(t[e]===this.options.classes[e]||!n||!n.length){continue}i=b(n.get());this._removeClass(n,e);i.addClass(this._classes({element:i,keys:e,classes:t,add:true}))}},_setOptionDisabled:function(t){this._toggleClass(this.widget(),this.widgetFullName+"-disabled",null,!!t);if(t){this._removeClass(this.hoverable,null,"ui-state-hover");this._removeClass(this.focusable,null,"ui-state-focus")}},enable:function(){return this._setOptions({disabled:false})},disable:function(){return this._setOptions({disabled:true})},_classes:function(s){var r=[];var o=this;s=b.extend({element:this.element,classes:this.options.classes||{}},s);function t(t,e){var i,n;for(n=0;n<t.length;n++){i=o.classesElementLookup[t[n]]||b();if(s.add){i=b(b.unique(i.get().concat(s.element.get())))}else{i=b(i.not(s.element).get())}o.classesElementLookup[t[n]]=i;r.push(t[n]);if(e&&s.classes[t[n]]){r.push(s.classes[t[n]])}}}this._on(s.element,{remove:"_untrackClassesElement"});if(s.keys){t(s.keys.match(/\S+/g)||[],true)}if(s.extra){t(s.extra.match(/\S+/g)||[])}return r.join(" ")},_untrackClassesElement:function(i){var n=this;b.each(n.classesElementLookup,function(t,e){if(b.inArray(i.target,e)!==-1){n.classesElementLookup[t]=b(e.not(i.target).get())}})},_removeClass:function(t,e,i){return this._toggleClass(t,e,i,false)},_addClass:function(t,e,i){return this._toggleClass(t,e,i,true)},_toggleClass:function(t,e,i,n){n=typeof n==="boolean"?n:i;var s=typeof t==="string"||t===null,r={extra:s?e:i,keys:s?t:e,element:s?this.element:t,add:n};r.element.toggleClass(this._classes(r),n);return this},_on:function(o,a,t){var l;var c=this;if(typeof o!=="boolean"){t=a;a=o;o=false}if(!t){t=a;a=this.element;l=this.widget()}else{a=l=b(a);this.bindings=this.bindings.add(a)}b.each(t,function(t,e){function i(){if(!o&&(c.options.disabled===true||b(this).hasClass("ui-state-disabled"))){return}return(typeof e==="string"?c[e]:e).apply(c,arguments)}if(typeof e!=="string"){i.guid=e.guid=e.guid||i.guid||b.guid++}var n=t.match(/^([\w:-]*)\s*(.*)$/);var s=n[1]+c.eventNamespace;var r=n[2];if(r){l.on(s,r,i)}else{a.on(s,i)}})},_off:function(t,e){e=(e||"").split(" ").join(this.eventNamespace+" ")+this.eventNamespace;t.off(e).off(e);this.bindings=b(this.bindings.not(t).get());this.focusable=b(this.focusable.not(t).get());this.hoverable=b(this.hoverable.not(t).get())},_delay:function(t,e){function i(){return(typeof t==="string"?n[t]:t).apply(n,arguments)}var n=this;return setTimeout(i,e||0)},_hoverable:function(t){this.hoverable=this.hoverable.add(t);this._on(t,{mouseenter:function(t){this._addClass(b(t.currentTarget),null,"ui-state-hover")},mouseleave:function(t){this._removeClass(b(t.currentTarget),null,"ui-state-hover")}})},_focusable:function(t){this.focusable=this.focusable.add(t);this._on(t,{focusin:function(t){this._addClass(b(t.currentTarget),null,"ui-state-focus")},focusout:function(t){this._removeClass(b(t.currentTarget),null,"ui-state-focus")}})},_trigger:function(t,e,i){var n,s;var r=this.options[t];i=i||{};e=b.Event(e);e.type=(t===this.widgetEventPrefix?t:this.widgetEventPrefix+t).toLowerCase();e.target=this.element[0];s=e.originalEvent;if(s){for(n in s){if(!(n in e)){e[n]=s[n]}}}this.element.trigger(e,i);return!(b.isFunction(r)&&r.apply(this.element[0],[e].concat(i))===false||e.isDefaultPrevented())}};b.each({show:"fadeIn",hide:"fadeOut"},function(r,o){b.Widget.prototype["_"+r]=function(e,t,i){if(typeof t==="string"){t={effect:t}}var n;var s=!t?r:t===true||typeof t==="number"?o:t.effect||o;t=t||{};if(typeof t==="number"){t={duration:t}}n=!b.isEmptyObject(t);t.complete=i;if(t.delay){e.delay(t.delay)}if(n&&b.effects&&b.effects.effect[s]){e[r](t)}else if(s!==r&&e[s]){e[s](t.duration,t.easing,i)}else{e.queue(function(t){b(this)[r]();if(i){i.call(e[0])}t()})}}});var e=b.widget;var n=b.extend(b.expr[":"],{data:b.expr.createPseudo?b.expr.createPseudo(function(e){return function(t){return!!b.data(t,e)}}):function(t,e,i){return!!b.data(t,i[3])}});var s=b.fn.extend({disableSelection:function(){var t="onselectstart"in document.createElement("div")?"selectstart":"mousedown";return function(){return this.on(t+".ui-disableSelection",function(t){t.preventDefault()})}}(),enableSelection:function(){return this.off(".ui-disableSelection")}});var r=b.fn.scrollParent=function(t){var e=this.css("position"),i=e==="absolute",n=t?/(auto|scroll|hidden)/:/(auto|scroll)/,s=this.parents().filter(function(){var t=b(this);if(i&&t.css("position")==="static"){return false}return n.test(t.css("overflow")+t.css("overflow-y")+t.css("overflow-x"))}).eq(0);return e==="fixed"||!s.length?b(this[0].ownerDocument||document):s};var o=b.ui.ie=!!/msie [\w.]+/.exec(navigator.userAgent.toLowerCase());var l=false;b(document).on("mouseup",function(){l=false});var c=b.widget("ui.mouse",{version:"1.12.1",options:{cancel:"input, textarea, button, select, option",distance:1,delay:0},_mouseInit:function(){var e=this;this.element.on("mousedown."+this.widgetName,function(t){return e._mouseDown(t)}).on("click."+this.widgetName,function(t){if(true===b.data(t.target,e.widgetName+".preventClickEvent")){b.removeData(t.target,e.widgetName+".preventClickEvent");t.stopImmediatePropagation();return false}});this.started=false},_mouseDestroy:function(){this.element.off("."+this.widgetName);if(this._mouseMoveDelegate){this.document.off("mousemove."+this.widgetName,this._mouseMoveDelegate).off("mouseup."+this.widgetName,this._mouseUpDelegate)}},_mouseDown:function(t){if(l){return}this._mouseMoved=false;this._mouseStarted&&this._mouseUp(t);this._mouseDownEvent=t;var e=this,i=t.which===1,n=typeof this.options.cancel==="string"&&t.target.nodeName?b(t.target).closest(this.options.cancel).length:false;if(!i||n||!this._mouseCapture(t)){return true}this.mouseDelayMet=!this.options.delay;if(!this.mouseDelayMet){this._mouseDelayTimer=setTimeout(function(){e.mouseDelayMet=true},this.options.delay)}if(this._mouseDistanceMet(t)&&this._mouseDelayMet(t)){this._mouseStarted=this._mouseStart(t)!==false;if(!this._mouseStarted){t.preventDefault();return true}}if(true===b.data(t.target,this.widgetName+".preventClickEvent")){b.removeData(t.target,this.widgetName+".preventClickEvent")}this._mouseMoveDelegate=function(t){return e._mouseMove(t)};this._mouseUpDelegate=function(t){return e._mouseUp(t)};this.document.on("mousemove."+this.widgetName,this._mouseMoveDelegate).on("mouseup."+this.widgetName,this._mouseUpDelegate);t.preventDefault();l=true;return true},_mouseMove:function(t){if(this._mouseMoved){if(b.ui.ie&&(!document.documentMode||document.documentMode<9)&&!t.button){return this._mouseUp(t)}else if(!t.which){if(t.originalEvent.altKey||t.originalEvent.ctrlKey||t.originalEvent.metaKey||t.originalEvent.shiftKey){this.ignoreMissingWhich=true}else if(!this.ignoreMissingWhich){return this._mouseUp(t)}}}if(t.which||t.button){this._mouseMoved=true}if(this._mouseStarted){this._mouseDrag(t);return t.preventDefault()}if(this._mouseDistanceMet(t)&&this._mouseDelayMet(t)){this._mouseStarted=this._mouseStart(this._mouseDownEvent,t)!==false;this._mouseStarted?this._mouseDrag(t):this._mouseUp(t)}return!this._mouseStarted},_mouseUp:function(t){this.document.off("mousemove."+this.widgetName,this._mouseMoveDelegate).off("mouseup."+this.widgetName,this._mouseUpDelegate);if(this._mouseStarted){this._mouseStarted=false;if(t.target===this._mouseDownEvent.target){b.data(t.target,this.widgetName+".preventClickEvent",true)}this._mouseStop(t)}if(this._mouseDelayTimer){clearTimeout(this._mouseDelayTimer);delete this._mouseDelayTimer}this.ignoreMissingWhich=false;l=false;t.preventDefault()},_mouseDistanceMet:function(t){return Math.max(Math.abs(this._mouseDownEvent.pageX-t.pageX),Math.abs(this._mouseDownEvent.pageY-t.pageY))>=this.options.distance},_mouseDelayMet:function(){return this.mouseDelayMet},_mouseStart:function(){},_mouseDrag:function(){},_mouseStop:function(){},_mouseCapture:function(){return true}});var h=b.ui.plugin={add:function(t,e,i){var n,s=b.ui[t].prototype;for(n in i){s.plugins[n]=s.plugins[n]||[];s.plugins[n].push([e,i[n]])}},call:function(t,e,i,n){var s,r=t.plugins[e];if(!r){return}if(!n&&(!t.element[0].parentNode||t.element[0].parentNode.nodeType===11)){return}for(s=0;s<r.length;s++){if(t.options[r[s][0]]){r[s][1].apply(t.element,i)}}}};var u=b.ui.safeActiveElement=function(e){var i;try{i=e.activeElement}catch(t){i=e.body}if(!i){i=e.body}if(!i.nodeName){i=e.body}return i};var d=b.ui.safeBlur=function(t){if(t&&t.nodeName.toLowerCase()!=="body"){b(t).trigger("blur")}};b.widget("ui.draggable",b.ui.mouse,{version:"1.12.1",widgetEventPrefix:"drag",options:{addClasses:true,appendTo:"parent",axis:false,connectToSortable:false,containment:false,cursor:"auto",cursorAt:false,grid:false,handle:false,helper:"original",iframeFix:false,opacity:false,refreshPositions:false,revert:false,revertDuration:500,scope:"default",scroll:true,scrollSensitivity:20,scrollSpeed:20,snap:false,snapMode:"both",snapTolerance:20,stack:false,zIndex:false,drag:null,start:null,stop:null},_create:function(){if(this.options.helper==="original"){this._setPositionRelative()}if(this.options.addClasses){this._addClass("ui-draggable")}this._setHandleClassName();this._mouseInit()},_setOption:function(t,e){this._super(t,e);if(t==="handle"){this._removeHandleClassName();this._setHandleClassName()}},_destroy:function(){if((this.helper||this.element).is(".ui-draggable-dragging")){this.destroyOnClear=true;return}this._removeHandleClassName();this._mouseDestroy()},_mouseCapture:function(t){var e=this.options;if(this.helper||e.disabled||b(t.target).closest(".ui-resizable-handle").length>0){return false}this.handle=this._getHandle(t);if(!this.handle){return false}this._blurActiveElement(t);this._blockFrames(e.iframeFix===true?"iframe":e.iframeFix);return true},_blockFrames:function(t){this.iframeBlocks=this.document.find(t).map(function(){var t=b(this);return b("<div>").css("position","absolute").appendTo(t.parent()).outerWidth(t.outerWidth()).outerHeight(t.outerHeight()).offset(t.offset())[0]})},_unblockFrames:function(){if(this.iframeBlocks){this.iframeBlocks.remove();delete this.iframeBlocks}},_blurActiveElement:function(t){var e=b.ui.safeActiveElement(this.document[0]),i=b(t.target);if(i.closest(e).length){return}b.ui.safeBlur(e)},_mouseStart:function(t){var e=this.options;this.helper=this._createHelper(t);this._addClass(this.helper,"ui-draggable-dragging");this._cacheHelperProportions();if(b.ui.ddmanager){b.ui.ddmanager.current=this}this._cacheMargins();this.cssPosition=this.helper.css("position");this.scrollParent=this.helper.scrollParent(true);this.offsetParent=this.helper.offsetParent();this.hasFixedAncestor=this.helper.parents().filter(function(){return b(this).css("position")==="fixed"}).length>0;this.positionAbs=this.element.offset();this._refreshOffsets(t);this.originalPosition=this.position=this._generatePosition(t,false);this.originalPageX=t.pageX;this.originalPageY=t.pageY;e.cursorAt&&this._adjustOffsetFromHelper(e.cursorAt);this._setContainment();if(this._trigger("start",t)===false){this._clear();return false}this._cacheHelperProportions();if(b.ui.ddmanager&&!e.dropBehaviour){b.ui.ddmanager.prepareOffsets(this,t)}this._mouseDrag(t,true);if(b.ui.ddmanager){b.ui.ddmanager.dragStart(this,t)}return true},_refreshOffsets:function(t){this.offset={top:this.positionAbs.top-this.margins.top,left:this.positionAbs.left-this.margins.left,scroll:false,parent:this._getParentOffset(),relative:this._getRelativeOffset()};this.offset.click={left:t.pageX-this.offset.left,top:t.pageY-this.offset.top}},_mouseDrag:function(t,e){if(this.hasFixedAncestor){this.offset.parent=this._getParentOffset()}this.position=this._generatePosition(t,true);this.positionAbs=this._convertPositionTo("absolute");if(!e){var i=this._uiHash();if(this._trigger("drag",t,i)===false){this._mouseUp(new b.Event("mouseup",t));return false}this.position=i.position}this.helper[0].style.left=this.position.left+"px";this.helper[0].style.top=this.position.top+"px";if(b.ui.ddmanager){b.ui.ddmanager.drag(this,t)}return false},_mouseStop:function(t){var e=this,i=false;if(b.ui.ddmanager&&!this.options.dropBehaviour){i=b.ui.ddmanager.drop(this,t)}if(this.dropped){i=this.dropped;this.dropped=false}if(this.options.revert==="invalid"&&!i||this.options.revert==="valid"&&i||this.options.revert===true||b.isFunction(this.options.revert)&&this.options.revert.call(this.element,i)){b(this.helper).animate(this.originalPosition,parseInt(this.options.revertDuration,10),function(){if(e._trigger("stop",t)!==false){e._clear()}})}else{if(this._trigger("stop",t)!==false){this._clear()}}return false},_mouseUp:function(t){this._unblockFrames();if(b.ui.ddmanager){b.ui.ddmanager.dragStop(this,t)}if(this.handleElement.is(t.target)){this.element.trigger("focus")}return b.ui.mouse.prototype._mouseUp.call(this,t)},cancel:function(){if(this.helper.is(".ui-draggable-dragging")){this._mouseUp(new b.Event("mouseup",{target:this.element[0]}))}else{this._clear()}return this},_getHandle:function(t){return this.options.handle?!!b(t.target).closest(this.element.find(this.options.handle)).length:true},_setHandleClassName:function(){this.handleElement=this.options.handle?this.element.find(this.options.handle):this.element;this._addClass(this.handleElement,"ui-draggable-handle")},_removeHandleClassName:function(){this._removeClass(this.handleElement,"ui-draggable-handle")},_createHelper:function(t){var e=this.options,i=b.isFunction(e.helper),n=i?b(e.helper.apply(this.element[0],[t])):e.helper==="clone"?this.element.clone().removeAttr("id"):this.element;if(!n.parents("body").length){n.appendTo(e.appendTo==="parent"?this.element[0].parentNode:e.appendTo)}if(i&&n[0]===this.element[0]){this._setPositionRelative()}if(n[0]!==this.element[0]&&!/(fixed|absolute)/.test(n.css("position"))){n.css("position","absolute")}return n},_setPositionRelative:function(){if(!/^(?:r|a|f)/.test(this.element.css("position"))){this.element[0].style.position="relative"}},_adjustOffsetFromHelper:function(t){if(typeof t==="string"){t=t.split(" ")}if(b.isArray(t)){t={left:+t[0],top:+t[1]||0}}if("left"in t){this.offset.click.left=t.left+this.margins.left}if("right"in t){this.offset.click.left=this.helperProportions.width-t.right+this.margins.left}if("top"in t){this.offset.click.top=t.top+this.margins.top}if("bottom"in t){this.offset.click.top=this.helperProportions.height-t.bottom+this.margins.top}},_isRootNode:function(t){return/(html|body)/i.test(t.tagName)||t===this.document[0]},_getParentOffset:function(){var t=this.offsetParent.offset(),e=this.document[0];if(this.cssPosition==="absolute"&&this.scrollParent[0]!==e&&b.contains(this.scrollParent[0],this.offsetParent[0])){t.left+=this.scrollParent.scrollLeft();t.top+=this.scrollParent.scrollTop()}if(this._isRootNode(this.offsetParent[0])){t={top:0,left:0}}return{top:t.top+(parseInt(this.offsetParent.css("borderTopWidth"),10)||0),left:t.left+(parseInt(this.offsetParent.css("borderLeftWidth"),10)||0)}},_getRelativeOffset:function(){if(this.cssPosition!=="relative"){return{top:0,left:0}}var t=this.element.position(),e=this._isRootNode(this.scrollParent[0]);return{top:t.top-(parseInt(this.helper.css("top"),10)||0)+(!e?this.scrollParent.scrollTop():0),left:t.left-(parseInt(this.helper.css("left"),10)||0)+(!e?this.scrollParent.scrollLeft():0)}},_cacheMargins:function(){this.margins={left:parseInt(this.element.css("marginLeft"),10)||0,top:parseInt(this.element.css("marginTop"),10)||0,right:parseInt(this.element.css("marginRight"),10)||0,bottom:parseInt(this.element.css("marginBottom"),10)||0}},_cacheHelperProportions:function(){this.helperProportions={width:this.helper.outerWidth(),height:this.helper.outerHeight()}},_setContainment:function(){var t,e,i,n=this.options,s=this.document[0];this.relativeContainer=null;if(!n.containment){this.containment=null;return}if(n.containment==="window"){this.containment=[b(window).scrollLeft()-this.offset.relative.left-this.offset.parent.left,b(window).scrollTop()-this.offset.relative.top-this.offset.parent.top,b(window).scrollLeft()+b(window).width()-this.helperProportions.width-this.margins.left,b(window).scrollTop()+(b(window).height()||s.body.parentNode.scrollHeight)-this.helperProportions.height-this.margins.top];return}if(n.containment==="document"){this.containment=[0,0,b(s).width()-this.helperProportions.width-this.margins.left,(b(s).height()||s.body.parentNode.scrollHeight)-this.helperProportions.height-this.margins.top];return}if(n.containment.constructor===Array){this.containment=n.containment;return}if(n.containment==="parent"){n.containment=this.helper[0].parentNode}e=b(n.containment);i=e[0];if(!i){return}t=/(scroll|auto)/.test(e.css("overflow"));this.containment=[(parseInt(e.css("borderLeftWidth"),10)||0)+(parseInt(e.css("paddingLeft"),10)||0),(parseInt(e.css("borderTopWidth"),10)||0)+(parseInt(e.css("paddingTop"),10)||0),(t?Math.max(i.scrollWidth,i.offsetWidth):i.offsetWidth)-(parseInt(e.css("borderRightWidth"),10)||0)-(parseInt(e.css("paddingRight"),10)||0)-this.helperProportions.width-this.margins.left-this.margins.right,(t?Math.max(i.scrollHeight,i.offsetHeight):i.offsetHeight)-(parseInt(e.css("borderBottomWidth"),10)||0)-(parseInt(e.css("paddingBottom"),10)||0)-this.helperProportions.height-this.margins.top-this.margins.bottom];this.relativeContainer=e},_convertPositionTo:function(t,e){if(!e){e=this.position}var i=t==="absolute"?1:-1,n=this._isRootNode(this.scrollParent[0]);return{top:e.top+this.offset.relative.top*i+this.offset.parent.top*i-(this.cssPosition==="fixed"?-this.offset.scroll.top:n?0:this.offset.scroll.top)*i,left:e.left+this.offset.relative.left*i+this.offset.parent.left*i-(this.cssPosition==="fixed"?-this.offset.scroll.left:n?0:this.offset.scroll.left)*i}},_generatePosition:function(t,e){var i,n,s,r,o=this.options,a=this._isRootNode(this.scrollParent[0]),l=t.pageX,c=t.pageY;if(!a||!this.offset.scroll){this.offset.scroll={top:this.scrollParent.scrollTop(),left:this.scrollParent.scrollLeft()}}if(e){if(this.containment){if(this.relativeContainer){n=this.relativeContainer.offset();i=[this.containment[0]+n.left,this.containment[1]+n.top,this.containment[2]+n.left,this.containment[3]+n.top]}else{i=this.containment}if(t.pageX-this.offset.click.left<i[0]){l=i[0]+this.offset.click.left}if(t.pageY-this.offset.click.top<i[1]){c=i[1]+this.offset.click.top}if(t.pageX-this.offset.click.left>i[2]){l=i[2]+this.offset.click.left}if(t.pageY-this.offset.click.top>i[3]){c=i[3]+this.offset.click.top}}if(o.grid){s=o.grid[1]?this.originalPageY+Math.round((c-this.originalPageY)/o.grid[1])*o.grid[1]:this.originalPageY;c=i?s-this.offset.click.top>=i[1]||s-this.offset.click.top>i[3]?s:s-this.offset.click.top>=i[1]?s-o.grid[1]:s+o.grid[1]:s;r=o.grid[0]?this.originalPageX+Math.round((l-this.originalPageX)/o.grid[0])*o.grid[0]:this.originalPageX;l=i?r-this.offset.click.left>=i[0]||r-this.offset.click.left>i[2]?r:r-this.offset.click.left>=i[0]?r-o.grid[0]:r+o.grid[0]:r}if(o.axis==="y"){l=this.originalPageX}if(o.axis==="x"){c=this.originalPageY}}return{top:c-this.offset.click.top-this.offset.relative.top-this.offset.parent.top+(this.cssPosition==="fixed"?-this.offset.scroll.top:a?0:this.offset.scroll.top),left:l-this.offset.click.left-this.offset.relative.left-this.offset.parent.left+(this.cssPosition==="fixed"?-this.offset.scroll.left:a?0:this.offset.scroll.left)}},_clear:function(){this._removeClass(this.helper,"ui-draggable-dragging");if(this.helper[0]!==this.element[0]&&!this.cancelHelperRemoval){this.helper.remove()}this.helper=null;this.cancelHelperRemoval=false;if(this.destroyOnClear){this.destroy()}},_trigger:function(t,e,i){i=i||this._uiHash();b.ui.plugin.call(this,t,[e,i,this],true);if(/^(drag|start|stop)/.test(t)){this.positionAbs=this._convertPositionTo("absolute");i.offset=this.positionAbs}return b.Widget.prototype._trigger.call(this,t,e,i)},plugins:{},_uiHash:function(){return{helper:this.helper,position:this.position,originalPosition:this.originalPosition,offset:this.positionAbs}}});b.ui.plugin.add("draggable","connectToSortable",{start:function(e,t,i){var n=b.extend({},t,{item:i.element});i.sortables=[];b(i.options.connectToSortable).each(function(){var t=b(this).sortable("instance");if(t&&!t.options.disabled){i.sortables.push(t);t.refreshPositions();t._trigger("activate",e,n)}})},stop:function(e,t,i){var n=b.extend({},t,{item:i.element});i.cancelHelperRemoval=false;b.each(i.sortables,function(){var t=this;if(t.isOver){t.isOver=0;i.cancelHelperRemoval=true;t.cancelHelperRemoval=false;t._storedCSS={position:t.placeholder.css("position"),top:t.placeholder.css("top"),left:t.placeholder.css("left")};t._mouseStop(e);t.options.helper=t.options._helper}else{t.cancelHelperRemoval=true;t._trigger("deactivate",e,n)}})},drag:function(i,n,s){b.each(s.sortables,function(){var t=false,e=this;e.positionAbs=s.positionAbs;e.helperProportions=s.helperProportions;e.offset.click=s.offset.click;if(e._intersectsWith(e.containerCache)){t=true;b.each(s.sortables,function(){this.positionAbs=s.positionAbs;this.helperProportions=s.helperProportions;this.offset.click=s.offset.click;if(this!==e&&this._intersectsWith(this.containerCache)&&b.contains(e.element[0],this.element[0])){t=false}return t})}if(t){if(!e.isOver){e.isOver=1;s._parent=n.helper.parent();e.currentItem=n.helper.appendTo(e.element).data("ui-sortable-item",true);e.options._helper=e.options.helper;e.options.helper=function(){return n.helper[0]};i.target=e.currentItem[0];e._mouseCapture(i,true);e._mouseStart(i,true,true);e.offset.click.top=s.offset.click.top;e.offset.click.left=s.offset.click.left;e.offset.parent.left-=s.offset.parent.left-e.offset.parent.left;e.offset.parent.top-=s.offset.parent.top-e.offset.parent.top;s._trigger("toSortable",i);s.dropped=e.element;b.each(s.sortables,function(){this.refreshPositions()});s.currentItem=s.element;e.fromOutside=s}if(e.currentItem){e._mouseDrag(i);n.position=e.position}}else{if(e.isOver){e.isOver=0;e.cancelHelperRemoval=true;e.options._revert=e.options.revert;e.options.revert=false;e._trigger("out",i,e._uiHash(e));e._mouseStop(i,true);e.options.revert=e.options._revert;e.options.helper=e.options._helper;if(e.placeholder){e.placeholder.remove()}n.helper.appendTo(s._parent);s._refreshOffsets(i);n.position=s._generatePosition(i,true);s._trigger("fromSortable",i);s.dropped=false;b.each(s.sortables,function(){this.refreshPositions()})}}})}});b.ui.plugin.add("draggable","cursor",{start:function(t,e,i){var n=b("body"),s=i.options;if(n.css("cursor")){s._cursor=n.css("cursor")}n.css("cursor",s.cursor)},stop:function(t,e,i){var n=i.options;if(n._cursor){b("body").css("cursor",n._cursor)}}});b.ui.plugin.add("draggable","opacity",{start:function(t,e,i){var n=b(e.helper),s=i.options;if(n.css("opacity")){s._opacity=n.css("opacity")}n.css("opacity",s.opacity)},stop:function(t,e,i){var n=i.options;if(n._opacity){b(e.helper).css("opacity",n._opacity)}}});b.ui.plugin.add("draggable","scroll",{start:function(t,e,i){if(!i.scrollParentNotHidden){i.scrollParentNotHidden=i.helper.scrollParent(false)}if(i.scrollParentNotHidden[0]!==i.document[0]&&i.scrollParentNotHidden[0].tagName!=="HTML"){i.overflowOffset=i.scrollParentNotHidden.offset()}},drag:function(t,e,i){var n=i.options,s=false,r=i.scrollParentNotHidden[0],o=i.document[0];if(r!==o&&r.tagName!=="HTML"){if(!n.axis||n.axis!=="x"){if(i.overflowOffset.top+r.offsetHeight-t.pageY<n.scrollSensitivity){r.scrollTop=s=r.scrollTop+n.scrollSpeed}else if(t.pageY-i.overflowOffset.top<n.scrollSensitivity){r.scrollTop=s=r.scrollTop-n.scrollSpeed}}if(!n.axis||n.axis!=="y"){if(i.overflowOffset.left+r.offsetWidth-t.pageX<n.scrollSensitivity){r.scrollLeft=s=r.scrollLeft+n.scrollSpeed}else if(t.pageX-i.overflowOffset.left<n.scrollSensitivity){r.scrollLeft=s=r.scrollLeft-n.scrollSpeed}}}else{if(!n.axis||n.axis!=="x"){if(t.pageY-b(o).scrollTop()<n.scrollSensitivity){s=b(o).scrollTop(b(o).scrollTop()-n.scrollSpeed)}else if(b(window).height()-(t.pageY-b(o).scrollTop())<n.scrollSensitivity){s=b(o).scrollTop(b(o).scrollTop()+n.scrollSpeed)}}if(!n.axis||n.axis!=="y"){if(t.pageX-b(o).scrollLeft()<n.scrollSensitivity){s=b(o).scrollLeft(b(o).scrollLeft()-n.scrollSpeed)}else if(b(window).width()-(t.pageX-b(o).scrollLeft())<n.scrollSensitivity){s=b(o).scrollLeft(b(o).scrollLeft()+n.scrollSpeed)}}}if(s!==false&&b.ui.ddmanager&&!n.dropBehaviour){b.ui.ddmanager.prepareOffsets(i,t)}}});b.ui.plugin.add("draggable","snap",{start:function(t,e,i){var n=i.options;i.snapElements=[];b(n.snap.constructor!==String?n.snap.items||":data(ui-draggable)":n.snap).each(function(){var t=b(this),e=t.offset();if(this!==i.element[0]){i.snapElements.push({item:this,width:t.outerWidth(),height:t.outerHeight(),top:e.top,left:e.left})}})},drag:function(t,e,i){var n,s,r,o,a,l,c,h,u,d,f=i.options,p=f.snapTolerance,m=e.offset.left,g=m+i.helperProportions.width,v=e.offset.top,y=v+i.helperProportions.height;for(u=i.snapElements.length-1;u>=0;u--){a=i.snapElements[u].left-i.margins.left;l=a+i.snapElements[u].width;c=i.snapElements[u].top-i.margins.top;h=c+i.snapElements[u].height;if(g<a-p||m>l+p||y<c-p||v>h+p||!b.contains(i.snapElements[u].item.ownerDocument,i.snapElements[u].item)){if(i.snapElements[u].snapping){i.options.snap.release&&i.options.snap.release.call(i.element,t,b.extend(i._uiHash(),{snapItem:i.snapElements[u].item}))}i.snapElements[u].snapping=false;continue}if(f.snapMode!=="inner"){n=Math.abs(c-y)<=p;s=Math.abs(h-v)<=p;r=Math.abs(a-g)<=p;o=Math.abs(l-m)<=p;if(n){e.position.top=i._convertPositionTo("relative",{top:c-i.helperProportions.height,left:0}).top}if(s){e.position.top=i._convertPositionTo("relative",{top:h,left:0}).top}if(r){e.position.left=i._convertPositionTo("relative",{top:0,left:a-i.helperProportions.width}).left}if(o){e.position.left=i._convertPositionTo("relative",{top:0,left:l}).left}}d=n||s||r||o;if(f.snapMode!=="outer"){n=Math.abs(c-v)<=p;s=Math.abs(h-y)<=p;r=Math.abs(a-m)<=p;o=Math.abs(l-g)<=p;if(n){e.position.top=i._convertPositionTo("relative",{top:c,left:0}).top}if(s){e.position.top=i._convertPositionTo("relative",{top:h-i.helperProportions.height,left:0}).top}if(r){e.position.left=i._convertPositionTo("relative",{top:0,left:a}).left}if(o){e.position.left=i._convertPositionTo("relative",{top:0,left:l-i.helperProportions.width}).left}}if(!i.snapElements[u].snapping&&(n||s||r||o||d)){i.options.snap.snap&&i.options.snap.snap.call(i.element,t,b.extend(i._uiHash(),{snapItem:i.snapElements[u].item}))}i.snapElements[u].snapping=n||s||r||o||d}}});b.ui.plugin.add("draggable","stack",{start:function(t,e,i){var n,s=i.options,r=b.makeArray(b(s.stack)).sort(function(t,e){return(parseInt(b(t).css("zIndex"),10)||0)-(parseInt(b(e).css("zIndex"),10)||0)});if(!r.length){return}n=parseInt(b(r[0]).css("zIndex"),10)||0;b(r).each(function(t){b(this).css("zIndex",n+t)});this.css("zIndex",n+r.length)}});b.ui.plugin.add("draggable","zIndex",{start:function(t,e,i){var n=b(e.helper),s=i.options;if(n.css("zIndex")){s._zIndex=n.css("zIndex")}n.css("zIndex",s.zIndex)},stop:function(t,e,i){var n=i.options;if(n._zIndex){b(e.helper).css("zIndex",n._zIndex)}}});var f=b.ui.draggable;b.widget("ui.droppable",{version:"1.12.1",widgetEventPrefix:"drop",options:{accept:"*",addClasses:true,greedy:false,scope:"default",tolerance:"intersect",activate:null,deactivate:null,drop:null,out:null,over:null},_create:function(){var t,e=this.options,i=e.accept;this.isover=false;this.isout=true;this.accept=b.isFunction(i)?i:function(t){return t.is(i)};this.proportions=function(){if(arguments.length){t=arguments[0]}else{return t?t:t={width:this.element[0].offsetWidth,height:this.element[0].offsetHeight}}};this._addToManager(e.scope);e.addClasses&&this._addClass("ui-droppable")},_addToManager:function(t){b.ui.ddmanager.droppables[t]=b.ui.ddmanager.droppables[t]||[];b.ui.ddmanager.droppables[t].push(this)},_splice:function(t){var e=0;for(;e<t.length;e++){if(t[e]===this){t.splice(e,1)}}},_destroy:function(){var t=b.ui.ddmanager.droppables[this.options.scope];this._splice(t)},_setOption:function(t,e){if(t==="accept"){this.accept=b.isFunction(e)?e:function(t){return t.is(e)}}else if(t==="scope"){var i=b.ui.ddmanager.droppables[this.options.scope];this._splice(i);this._addToManager(e)}this._super(t,e)},_activate:function(t){var e=b.ui.ddmanager.current;this._addActiveClass();if(e){this._trigger("activate",t,this.ui(e))}},_deactivate:function(t){var e=b.ui.ddmanager.current;this._removeActiveClass();if(e){this._trigger("deactivate",t,this.ui(e))}},_over:function(t){var e=b.ui.ddmanager.current;if(!e||(e.currentItem||e.element)[0]===this.element[0]){return}if(this.accept.call(this.element[0],e.currentItem||e.element)){this._addHoverClass();this._trigger("over",t,this.ui(e))}},_out:function(t){var e=b.ui.ddmanager.current;if(!e||(e.currentItem||e.element)[0]===this.element[0]){return}if(this.accept.call(this.element[0],e.currentItem||e.element)){this._removeHoverClass();this._trigger("out",t,this.ui(e))}},_drop:function(e,t){var i=t||b.ui.ddmanager.current,n=false;if(!i||(i.currentItem||i.element)[0]===this.element[0]){return false}this.element.find(":data(ui-droppable)").not(".ui-draggable-dragging").each(function(){var t=b(this).droppable("instance");if(t.options.greedy&&!t.options.disabled&&t.options.scope===i.options.scope&&t.accept.call(t.element[0],i.currentItem||i.element)&&p(i,b.extend(t,{offset:t.element.offset()}),t.options.tolerance,e)){n=true;return false}});if(n){return false}if(this.accept.call(this.element[0],i.currentItem||i.element)){this._removeActiveClass();this._removeHoverClass();this._trigger("drop",e,this.ui(i));return this.element}return false},ui:function(t){return{draggable:t.currentItem||t.element,helper:t.helper,position:t.position,offset:t.positionAbs}},_addHoverClass:function(){this._addClass("ui-droppable-hover")},_removeHoverClass:function(){this._removeClass("ui-droppable-hover")},_addActiveClass:function(){this._addClass("ui-droppable-active")},_removeActiveClass:function(){this._removeClass("ui-droppable-active")}});var p=b.ui.intersect=function(){function d(t,e,i){return t>=e&&t<e+i}return function(t,e,i,n){if(!e.offset){return false}var s=(t.positionAbs||t.position.absolute).left+t.margins.left,r=(t.positionAbs||t.position.absolute).top+t.margins.top,o=s+t.helperProportions.width,a=r+t.helperProportions.height,l=e.offset.left,c=e.offset.top,h=l+e.proportions().width,u=c+e.proportions().height;switch(i){case"fit":return l<=s&&o<=h&&c<=r&&a<=u;case"intersect":return l<s+t.helperProportions.width/2&&o-t.helperProportions.width/2<h&&c<r+t.helperProportions.height/2&&a-t.helperProportions.height/2<u;case"pointer":return d(n.pageY,c,e.proportions().height)&&d(n.pageX,l,e.proportions().width);case"touch":return(r>=c&&r<=u||a>=c&&a<=u||r<c&&a>u)&&(s>=l&&s<=h||o>=l&&o<=h||s<l&&o>h);default:return false}}}();b.ui.ddmanager={current:null,droppables:{default:[]},prepareOffsets:function(t,e){var i,n,s=b.ui.ddmanager.droppables[t.options.scope]||[],r=e?e.type:null,o=(t.currentItem||t.element).find(":data(ui-droppable)").addBack();t:for(i=0;i<s.length;i++){if(s[i].options.disabled||t&&!s[i].accept.call(s[i].element[0],t.currentItem||t.element)){continue}for(n=0;n<o.length;n++){if(o[n]===s[i].element[0]){s[i].proportions().height=0;continue t}}s[i].visible=s[i].element.css("display")!=="none";if(!s[i].visible){continue}if(r==="mousedown"){s[i]._activate.call(s[i],e)}s[i].offset=s[i].element.offset();s[i].proportions({width:s[i].element[0].offsetWidth,height:s[i].element[0].offsetHeight})}},drop:function(t,e){var i=false;b.each((b.ui.ddmanager.droppables[t.options.scope]||[]).slice(),function(){if(!this.options){return}if(!this.options.disabled&&this.visible&&p(t,this,this.options.tolerance,e)){i=this._drop.call(this,e)||i}if(!this.options.disabled&&this.visible&&this.accept.call(this.element[0],t.currentItem||t.element)){this.isout=true;this.isover=false;this._deactivate.call(this,e)}});return i},dragStart:function(t,e){t.element.parentsUntil("body").on("scroll.droppable",function(){if(!t.options.refreshPositions){b.ui.ddmanager.prepareOffsets(t,e)}})},drag:function(r,o){if(r.options.refreshPositions){b.ui.ddmanager.prepareOffsets(r,o)}b.each(b.ui.ddmanager.droppables[r.options.scope]||[],function(){if(this.options.disabled||this.greedyChild||!this.visible){return}var t,e,i,n=p(r,this,this.options.tolerance,o),s=!n&&this.isover?"isout":n&&!this.isover?"isover":null;if(!s){return}if(this.options.greedy){e=this.options.scope;i=this.element.parents(":data(ui-droppable)").filter(function(){return b(this).droppable("instance").options.scope===e});if(i.length){t=b(i[0]).droppable("instance");t.greedyChild=s==="isover"}}if(t&&s==="isover"){t.isover=false;t.isout=true;t._out.call(t,o)}this[s]=true;this[s==="isout"?"isover":"isout"]=false;this[s==="isover"?"_over":"_out"].call(this,o);if(t&&s==="isout"){t.isout=false;t.isover=true;t._over.call(t,o)}})},dragStop:function(t,e){t.element.parentsUntil("body").off("scroll.droppable");if(!t.options.refreshPositions){b.ui.ddmanager.prepareOffsets(t,e)}}};if(b.uiBackCompat!==false){b.widget("ui.droppable",b.ui.droppable,{options:{hoverClass:false,activeClass:false},_addActiveClass:function(){this._super();if(this.options.activeClass){this.element.addClass(this.options.activeClass)}},_removeActiveClass:function(){this._super();if(this.options.activeClass){this.element.removeClass(this.options.activeClass)}},_addHoverClass:function(){this._super();if(this.options.hoverClass){this.element.addClass(this.options.hoverClass)}},_removeHoverClass:function(){this._super();if(this.options.hoverClass){this.element.removeClass(this.options.hoverClass)}}})}var m=b.ui.droppable;b.widget("ui.resizable",b.ui.mouse,{version:"1.12.1",widgetEventPrefix:"resize",options:{alsoResize:false,animate:false,animateDuration:"slow",animateEasing:"swing",aspectRatio:false,autoHide:false,classes:{"ui-resizable-se":"ui-icon ui-icon-gripsmall-diagonal-se"},containment:false,ghost:false,grid:false,handles:"e,s,se",helper:false,maxHeight:null,maxWidth:null,minHeight:10,minWidth:10,zIndex:90,resize:null,start:null,stop:null},_num:function(t){return parseFloat(t)||0},_isNumber:function(t){return!isNaN(parseFloat(t))},_hasScroll:function(t,e){if(b(t).css("overflow")==="hidden"){return false}var i=e&&e==="left"?"scrollLeft":"scrollTop",n=false;if(t[i]>0){return true}t[i]=1;n=t[i]>0;t[i]=0;return n},_create:function(){var t,e=this.options,i=this;this._addClass("ui-resizable");b.extend(this,{_aspectRatio:!!e.aspectRatio,aspectRatio:e.aspectRatio,originalElement:this.element,_proportionallyResizeElements:[],_helper:e.helper||e.ghost||e.animate?e.helper||"ui-resizable-helper":null});if(this.element[0].nodeName.match(/^(canvas|textarea|input|select|button|img)$/i)){this.element.wrap(b("<div class='ui-wrapper' style='overflow: hidden;'></div>").css({position:this.element.css("position"),width:this.element.outerWidth(),height:this.element.outerHeight(),top:this.element.css("top"),left:this.element.css("left")}));this.element=this.element.parent().data("ui-resizable",this.element.resizable("instance"));this.elementIsWrapper=true;t={marginTop:this.originalElement.css("marginTop"),marginRight:this.originalElement.css("marginRight"),marginBottom:this.originalElement.css("marginBottom"),marginLeft:this.originalElement.css("marginLeft")};this.element.css(t);this.originalElement.css("margin",0);this.originalResizeStyle=this.originalElement.css("resize");this.originalElement.css("resize","none");this._proportionallyResizeElements.push(this.originalElement.css({position:"static",zoom:1,display:"block"}));this.originalElement.css(t);this._proportionallyResize()}this._setupHandles();if(e.autoHide){b(this.element).on("mouseenter",function(){if(e.disabled){return}i._removeClass("ui-resizable-autohide");i._handles.show()}).on("mouseleave",function(){if(e.disabled){return}if(!i.resizing){i._addClass("ui-resizable-autohide");i._handles.hide()}})}this._mouseInit()},_destroy:function(){this._mouseDestroy();var t,e=function(t){b(t).removeData("resizable").removeData("ui-resizable").off(".resizable").find(".ui-resizable-handle").remove()};if(this.elementIsWrapper){e(this.element);t=this.element;this.originalElement.css({position:t.css("position"),width:t.outerWidth(),height:t.outerHeight(),top:t.css("top"),left:t.css("left")}).insertAfter(t);t.remove()}this.originalElement.css("resize",this.originalResizeStyle);e(this.originalElement);return this},_setOption:function(t,e){this._super(t,e);switch(t){case"handles":this._removeHandles();this._setupHandles();break;default:break}},_setupHandles:function(){var t=this.options,e,i,n,s,r,o=this;this.handles=t.handles||(!b(".ui-resizable-handle",this.element).length?"e,s,se":{n:".ui-resizable-n",e:".ui-resizable-e",s:".ui-resizable-s",w:".ui-resizable-w",se:".ui-resizable-se",sw:".ui-resizable-sw",ne:".ui-resizable-ne",nw:".ui-resizable-nw"});this._handles=b();if(this.handles.constructor===String){if(this.handles==="all"){this.handles="n,e,s,w,se,sw,ne,nw"}n=this.handles.split(",");this.handles={};for(i=0;i<n.length;i++){e=b.trim(n[i]);s="ui-resizable-"+e;r=b("<div>");this._addClass(r,"ui-resizable-handle "+s);r.css({zIndex:t.zIndex});this.handles[e]=".ui-resizable-"+e;this.element.append(r)}}this._renderAxis=function(t){var e,i,n,s;t=t||this.element;for(e in this.handles){if(this.handles[e].constructor===String){this.handles[e]=this.element.children(this.handles[e]).first().show()}else if(this.handles[e].jquery||this.handles[e].nodeType){this.handles[e]=b(this.handles[e]);this._on(this.handles[e],{mousedown:o._mouseDown})}if(this.elementIsWrapper&&this.originalElement[0].nodeName.match(/^(textarea|input|select|button)$/i)){i=b(this.handles[e],this.element);s=/sw|ne|nw|se|n|s/.test(e)?i.outerHeight():i.outerWidth();n=["padding",/ne|nw|n/.test(e)?"Top":/se|sw|s/.test(e)?"Bottom":/^e$/.test(e)?"Right":"Left"].join("");t.css(n,s);this._proportionallyResize()}this._handles=this._handles.add(this.handles[e])}};this._renderAxis(this.element);this._handles=this._handles.add(this.element.find(".ui-resizable-handle"));this._handles.disableSelection();this._handles.on("mouseover",function(){if(!o.resizing){if(this.className){r=this.className.match(/ui-resizable-(se|sw|ne|nw|n|e|s|w)/i)}o.axis=r&&r[1]?r[1]:"se"}});if(t.autoHide){this._handles.hide();this._addClass("ui-resizable-autohide")}},_removeHandles:function(){this._handles.remove()},_mouseCapture:function(t){var e,i,n=false;for(e in this.handles){i=b(this.handles[e])[0];if(i===t.target||b.contains(i,t.target)){n=true}}return!this.options.disabled&&n},_mouseStart:function(t){var e,i,n,s=this.options,r=this.element;this.resizing=true;this._renderProxy();e=this._num(this.helper.css("left"));i=this._num(this.helper.css("top"));if(s.containment){e+=b(s.containment).scrollLeft()||0;i+=b(s.containment).scrollTop()||0}this.offset=this.helper.offset();this.position={left:e,top:i};this.size=this._helper?{width:this.helper.width(),height:this.helper.height()}:{width:r.width(),height:r.height()};this.originalSize=this._helper?{width:r.outerWidth(),height:r.outerHeight()}:{width:r.width(),height:r.height()};this.sizeDiff={width:r.outerWidth()-r.width(),height:r.outerHeight()-r.height()};this.originalPosition={left:e,top:i};this.originalMousePosition={left:t.pageX,top:t.pageY};this.aspectRatio=typeof s.aspectRatio==="number"?s.aspectRatio:this.originalSize.width/this.originalSize.height||1;n=b(".ui-resizable-"+this.axis).css("cursor");b("body").css("cursor",n==="auto"?this.axis+"-resize":n);this._addClass("ui-resizable-resizing");this._propagate("start",t);return true},_mouseDrag:function(t){var e,i,n=this.originalMousePosition,s=this.axis,r=t.pageX-n.left||0,o=t.pageY-n.top||0,a=this._change[s];this._updatePrevProperties();if(!a){return false}e=a.apply(this,[t,r,o]);this._updateVirtualBoundaries(t.shiftKey);if(this._aspectRatio||t.shiftKey){e=this._updateRatio(e,t)}e=this._respectSize(e,t);this._updateCache(e);this._propagate("resize",t);i=this._applyChanges();if(!this._helper&&this._proportionallyResizeElements.length){this._proportionallyResize()}if(!b.isEmptyObject(i)){this._updatePrevProperties();this._trigger("resize",t,this.ui());this._applyChanges()}return false},_mouseStop:function(t){this.resizing=false;var e,i,n,s,r,o,a,l=this.options,c=this;if(this._helper){e=this._proportionallyResizeElements;i=e.length&&/textarea/i.test(e[0].nodeName);n=i&&this._hasScroll(e[0],"left")?0:c.sizeDiff.height;s=i?0:c.sizeDiff.width;r={width:c.helper.width()-s,height:c.helper.height()-n};o=parseFloat(c.element.css("left"))+(c.position.left-c.originalPosition.left)||null;a=parseFloat(c.element.css("top"))+(c.position.top-c.originalPosition.top)||null;if(!l.animate){this.element.css(b.extend(r,{top:a,left:o}))}c.helper.height(c.size.height);c.helper.width(c.size.width);if(this._helper&&!l.animate){this._proportionallyResize()}}b("body").css("cursor","auto");this._removeClass("ui-resizable-resizing");this._propagate("stop",t);if(this._helper){this.helper.remove()}return false},_updatePrevProperties:function(){this.prevPosition={top:this.position.top,left:this.position.left};this.prevSize={width:this.size.width,height:this.size.height}},_applyChanges:function(){var t={};if(this.position.top!==this.prevPosition.top){t.top=this.position.top+"px"}if(this.position.left!==this.prevPosition.left){t.left=this.position.left+"px"}if(this.size.width!==this.prevSize.width){t.width=this.size.width+"px"}if(this.size.height!==this.prevSize.height){t.height=this.size.height+"px"}this.helper.css(t);return t},_updateVirtualBoundaries:function(t){var e,i,n,s,r,o=this.options;r={minWidth:this._isNumber(o.minWidth)?o.minWidth:0,maxWidth:this._isNumber(o.maxWidth)?o.maxWidth:Infinity,minHeight:this._isNumber(o.minHeight)?o.minHeight:0,maxHeight:this._isNumber(o.maxHeight)?o.maxHeight:Infinity};if(this._aspectRatio||t){e=r.minHeight*this.aspectRatio;n=r.minWidth/this.aspectRatio;i=r.maxHeight*this.aspectRatio;s=r.maxWidth/this.aspectRatio;if(e>r.minWidth){r.minWidth=e}if(n>r.minHeight){r.minHeight=n}if(i<r.maxWidth){r.maxWidth=i}if(s<r.maxHeight){r.maxHeight=s}}this._vBoundaries=r},_updateCache:function(t){this.offset=this.helper.offset();if(this._isNumber(t.left)){this.position.left=t.left}if(this._isNumber(t.top)){this.position.top=t.top}if(this._isNumber(t.height)){this.size.height=t.height}if(this._isNumber(t.width)){this.size.width=t.width}},_updateRatio:function(t){var e=this.position,i=this.size,n=this.axis;if(this._isNumber(t.height)){t.width=t.height*this.aspectRatio}else if(this._isNumber(t.width)){t.height=t.width/this.aspectRatio}if(n==="sw"){t.left=e.left+(i.width-t.width);t.top=null}if(n==="nw"){t.top=e.top+(i.height-t.height);t.left=e.left+(i.width-t.width)}return t},_respectSize:function(t){var e=this._vBoundaries,i=this.axis,n=this._isNumber(t.width)&&e.maxWidth&&e.maxWidth<t.width,s=this._isNumber(t.height)&&e.maxHeight&&e.maxHeight<t.height,r=this._isNumber(t.width)&&e.minWidth&&e.minWidth>t.width,o=this._isNumber(t.height)&&e.minHeight&&e.minHeight>t.height,a=this.originalPosition.left+this.originalSize.width,l=this.originalPosition.top+this.originalSize.height,c=/sw|nw|w/.test(i),h=/nw|ne|n/.test(i);if(r){t.width=e.minWidth}if(o){t.height=e.minHeight}if(n){t.width=e.maxWidth}if(s){t.height=e.maxHeight}if(r&&c){t.left=a-e.minWidth}if(n&&c){t.left=a-e.maxWidth}if(o&&h){t.top=l-e.minHeight}if(s&&h){t.top=l-e.maxHeight}if(!t.width&&!t.height&&!t.left&&t.top){t.top=null}else if(!t.width&&!t.height&&!t.top&&t.left){t.left=null}return t},_getPaddingPlusBorderDimensions:function(t){var e=0,i=[],n=[t.css("borderTopWidth"),t.css("borderRightWidth"),t.css("borderBottomWidth"),t.css("borderLeftWidth")],s=[t.css("paddingTop"),t.css("paddingRight"),t.css("paddingBottom"),t.css("paddingLeft")];for(;e<4;e++){i[e]=parseFloat(n[e])||0;i[e]+=parseFloat(s[e])||0}return{height:i[0]+i[2],width:i[1]+i[3]}},_proportionallyResize:function(){if(!this._proportionallyResizeElements.length){return}var t,e=0,i=this.helper||this.element;for(;e<this._proportionallyResizeElements.length;e++){t=this._proportionallyResizeElements[e];if(!this.outerDimensions){this.outerDimensions=this._getPaddingPlusBorderDimensions(t)}t.css({height:i.height()-this.outerDimensions.height||0,width:i.width()-this.outerDimensions.width||0})}},_renderProxy:function(){var t=this.element,e=this.options;this.elementOffset=t.offset();if(this._helper){this.helper=this.helper||b("<div style='overflow:hidden;'></div>");this._addClass(this.helper,this._helper);this.helper.css({width:this.element.outerWidth(),height:this.element.outerHeight(),position:"absolute",left:this.elementOffset.left+"px",top:this.elementOffset.top+"px",zIndex:++e.zIndex});this.helper.appendTo("body").disableSelection()}else{this.helper=this.element}},_change:{e:function(t,e){return{width:this.originalSize.width+e}},w:function(t,e){var i=this.originalSize,n=this.originalPosition;return{left:n.left+e,width:i.width-e}},n:function(t,e,i){var n=this.originalSize,s=this.originalPosition;return{top:s.top+i,height:n.height-i}},s:function(t,e,i){return{height:this.originalSize.height+i}},se:function(t,e,i){return b.extend(this._change.s.apply(this,arguments),this._change.e.apply(this,[t,e,i]))},sw:function(t,e,i){return b.extend(this._change.s.apply(this,arguments),this._change.w.apply(this,[t,e,i]))},ne:function(t,e,i){return b.extend(this._change.n.apply(this,arguments),this._change.e.apply(this,[t,e,i]))},nw:function(t,e,i){return b.extend(this._change.n.apply(this,arguments),this._change.w.apply(this,[t,e,i]))}},_propagate:function(t,e){b.ui.plugin.call(this,t,[e,this.ui()]);t!=="resize"&&this._trigger(t,e,this.ui())},plugins:{},ui:function(){return{originalElement:this.originalElement,element:this.element,helper:this.helper,position:this.position,size:this.size,originalSize:this.originalSize,originalPosition:this.originalPosition}}});b.ui.plugin.add("resizable","animate",{stop:function(e){var i=b(this).resizable("instance"),t=i.options,n=i._proportionallyResizeElements,s=n.length&&/textarea/i.test(n[0].nodeName),r=s&&i._hasScroll(n[0],"left")?0:i.sizeDiff.height,o=s?0:i.sizeDiff.width,a={width:i.size.width-o,height:i.size.height-r},l=parseFloat(i.element.css("left"))+(i.position.left-i.originalPosition.left)||null,c=parseFloat(i.element.css("top"))+(i.position.top-i.originalPosition.top)||null;i.element.animate(b.extend(a,c&&l?{top:c,left:l}:{}),{duration:t.animateDuration,easing:t.animateEasing,step:function(){var t={width:parseFloat(i.element.css("width")),height:parseFloat(i.element.css("height")),top:parseFloat(i.element.css("top")),left:parseFloat(i.element.css("left"))};if(n&&n.length){b(n[0]).css({width:t.width,height:t.height})}i._updateCache(t);i._propagate("resize",e)}})}});b.ui.plugin.add("resizable","containment",{start:function(){var i,n,t,e,s,r,o,a=b(this).resizable("instance"),l=a.options,c=a.element,h=l.containment,u=h instanceof b?h.get(0):/parent/.test(h)?c.parent().get(0):h;if(!u){return}a.containerElement=b(u);if(/document/.test(h)||h===document){a.containerOffset={left:0,top:0};a.containerPosition={left:0,top:0};a.parentData={element:b(document),left:0,top:0,width:b(document).width(),height:b(document).height()||document.body.parentNode.scrollHeight}}else{i=b(u);n=[];b(["Top","Right","Left","Bottom"]).each(function(t,e){n[t]=a._num(i.css("padding"+e))});a.containerOffset=i.offset();a.containerPosition=i.position();a.containerSize={height:i.innerHeight()-n[3],width:i.innerWidth()-n[1]};t=a.containerOffset;e=a.containerSize.height;s=a.containerSize.width;r=a._hasScroll(u,"left")?u.scrollWidth:s;o=a._hasScroll(u)?u.scrollHeight:e;a.parentData={element:u,left:t.left,top:t.top,width:r,height:o}}},resize:function(t){var e,i,n,s,r=b(this).resizable("instance"),o=r.options,a=r.containerOffset,l=r.position,c=r._aspectRatio||t.shiftKey,h={top:0,left:0},u=r.containerElement,d=true;if(u[0]!==document&&/static/.test(u.css("position"))){h=a}if(l.left<(r._helper?a.left:0)){r.size.width=r.size.width+(r._helper?r.position.left-a.left:r.position.left-h.left);if(c){r.size.height=r.size.width/r.aspectRatio;d=false}r.position.left=o.helper?a.left:0}if(l.top<(r._helper?a.top:0)){r.size.height=r.size.height+(r._helper?r.position.top-a.top:r.position.top);if(c){r.size.width=r.size.height*r.aspectRatio;d=false}r.position.top=r._helper?a.top:0}n=r.containerElement.get(0)===r.element.parent().get(0);s=/relative|absolute/.test(r.containerElement.css("position"));if(n&&s){r.offset.left=r.parentData.left+r.position.left;r.offset.top=r.parentData.top+r.position.top}else{r.offset.left=r.element.offset().left;r.offset.top=r.element.offset().top}e=Math.abs(r.sizeDiff.width+(r._helper?r.offset.left-h.left:r.offset.left-a.left));i=Math.abs(r.sizeDiff.height+(r._helper?r.offset.top-h.top:r.offset.top-a.top));if(e+r.size.width>=r.parentData.width){r.size.width=r.parentData.width-e;if(c){r.size.height=r.size.width/r.aspectRatio;d=false}}if(i+r.size.height>=r.parentData.height){r.size.height=r.parentData.height-i;if(c){r.size.width=r.size.height*r.aspectRatio;d=false}}if(!d){r.position.left=r.prevPosition.left;r.position.top=r.prevPosition.top;r.size.width=r.prevSize.width;r.size.height=r.prevSize.height}},stop:function(){var t=b(this).resizable("instance"),e=t.options,i=t.containerOffset,n=t.containerPosition,s=t.containerElement,r=b(t.helper),o=r.offset(),a=r.outerWidth()-t.sizeDiff.width,l=r.outerHeight()-t.sizeDiff.height;if(t._helper&&!e.animate&&/relative/.test(s.css("position"))){b(this).css({left:o.left-n.left-i.left,width:a,height:l})}if(t._helper&&!e.animate&&/static/.test(s.css("position"))){b(this).css({left:o.left-n.left-i.left,width:a,height:l})}}});b.ui.plugin.add("resizable","alsoResize",{start:function(){var t=b(this).resizable("instance"),e=t.options;b(e.alsoResize).each(function(){var t=b(this);t.data("ui-resizable-alsoresize",{width:parseFloat(t.width()),height:parseFloat(t.height()),left:parseFloat(t.css("left")),top:parseFloat(t.css("top"))})})},resize:function(t,i){var e=b(this).resizable("instance"),n=e.options,s=e.originalSize,r=e.originalPosition,o={height:e.size.height-s.height||0,width:e.size.width-s.width||0,top:e.position.top-r.top||0,left:e.position.left-r.left||0};b(n.alsoResize).each(function(){var t=b(this),n=b(this).data("ui-resizable-alsoresize"),s={},e=t.parents(i.originalElement[0]).length?["width","height"]:["width","height","top","left"];b.each(e,function(t,e){var i=(n[e]||0)+(o[e]||0);if(i&&i>=0){s[e]=i||null}});t.css(s)})},stop:function(){b(this).removeData("ui-resizable-alsoresize")}});b.ui.plugin.add("resizable","ghost",{start:function(){var t=b(this).resizable("instance"),e=t.size;t.ghost=t.originalElement.clone();t.ghost.css({opacity:.25,display:"block",position:"relative",height:e.height,width:e.width,margin:0,left:0,top:0});t._addClass(t.ghost,"ui-resizable-ghost");if(b.uiBackCompat!==false&&typeof t.options.ghost==="string"){t.ghost.addClass(this.options.ghost)}t.ghost.appendTo(t.helper)},resize:function(){var t=b(this).resizable("instance");if(t.ghost){t.ghost.css({position:"relative",height:t.size.height,width:t.size.width})}},stop:function(){var t=b(this).resizable("instance");if(t.ghost&&t.helper){t.helper.get(0).removeChild(t.ghost.get(0))}}});b.ui.plugin.add("resizable","grid",{resize:function(){var t,e=b(this).resizable("instance"),i=e.options,n=e.size,s=e.originalSize,r=e.originalPosition,o=e.axis,a=typeof i.grid==="number"?[i.grid,i.grid]:i.grid,l=a[0]||1,c=a[1]||1,h=Math.round((n.width-s.width)/l)*l,u=Math.round((n.height-s.height)/c)*c,d=s.width+h,f=s.height+u,p=i.maxWidth&&i.maxWidth<d,m=i.maxHeight&&i.maxHeight<f,g=i.minWidth&&i.minWidth>d,v=i.minHeight&&i.minHeight>f;i.grid=a;if(g){d+=l}if(v){f+=c}if(p){d-=l}if(m){f-=c}if(/^(se|s|e)$/.test(o)){e.size.width=d;e.size.height=f}else if(/^(ne)$/.test(o)){e.size.width=d;e.size.height=f;e.position.top=r.top-u}else if(/^(sw)$/.test(o)){e.size.width=d;e.size.height=f;e.position.left=r.left-h}else{if(f-c<=0||d-l<=0){t=e._getPaddingPlusBorderDimensions(this)}if(f-c>0){e.size.height=f;e.position.top=r.top-u}else{f=c-t.height;e.size.height=f;e.position.top=r.top+s.height-f}if(d-l>0){e.size.width=d;e.position.left=r.left-h}else{d=l-t.width;e.size.width=d;e.position.left=r.left+s.width-d}}}});var g=b.ui.resizable;var v=b.widget("ui.selectable",b.ui.mouse,{version:"1.12.1",options:{appendTo:"body",autoRefresh:true,distance:0,filter:"*",tolerance:"touch",selected:null,selecting:null,start:null,stop:null,unselected:null,unselecting:null},_create:function(){var n=this;this._addClass("ui-selectable");this.dragged=false;this.refresh=function(){n.elementPos=b(n.element[0]).offset();n.selectees=b(n.options.filter,n.element[0]);n._addClass(n.selectees,"ui-selectee");n.selectees.each(function(){var t=b(this),e=t.offset(),i={left:e.left-n.elementPos.left,top:e.top-n.elementPos.top};b.data(this,"selectable-item",{element:this,$element:t,left:i.left,top:i.top,right:i.left+t.outerWidth(),bottom:i.top+t.outerHeight(),startselected:false,selected:t.hasClass("ui-selected"),selecting:t.hasClass("ui-selecting"),unselecting:t.hasClass("ui-unselecting")})})};this.refresh();this._mouseInit();this.helper=b("<div>");this._addClass(this.helper,"ui-selectable-helper")},_destroy:function(){this.selectees.removeData("selectable-item");this._mouseDestroy()},_mouseStart:function(i){var n=this,t=this.options;this.opos=[i.pageX,i.pageY];this.elementPos=b(this.element[0]).offset();if(this.options.disabled){return}this.selectees=b(t.filter,this.element[0]);this._trigger("start",i);b(t.appendTo).append(this.helper);this.helper.css({left:i.pageX,top:i.pageY,width:0,height:0});if(t.autoRefresh){this.refresh()}this.selectees.filter(".ui-selected").each(function(){var t=b.data(this,"selectable-item");t.startselected=true;if(!i.metaKey&&!i.ctrlKey){n._removeClass(t.$element,"ui-selected");t.selected=false;n._addClass(t.$element,"ui-unselecting");t.unselecting=true;n._trigger("unselecting",i,{unselecting:t.element})}});b(i.target).parents().addBack().each(function(){var t,e=b.data(this,"selectable-item");if(e){t=!i.metaKey&&!i.ctrlKey||!e.$element.hasClass("ui-selected");n._removeClass(e.$element,t?"ui-unselecting":"ui-selected")._addClass(e.$element,t?"ui-selecting":"ui-unselecting");e.unselecting=!t;e.selecting=t;e.selected=t;if(t){n._trigger("selecting",i,{selecting:e.element})}else{n._trigger("unselecting",i,{unselecting:e.element})}return false}})},_mouseDrag:function(n){this.dragged=true;if(this.options.disabled){return}var t,s=this,r=this.options,o=this.opos[0],a=this.opos[1],l=n.pageX,c=n.pageY;if(o>l){t=l;l=o;o=t}if(a>c){t=c;c=a;a=t}this.helper.css({left:o,top:a,width:l-o,height:c-a});this.selectees.each(function(){var t=b.data(this,"selectable-item"),e=false,i={};if(!t||t.element===s.element[0]){return}i.left=t.left+s.elementPos.left;i.right=t.right+s.elementPos.left;i.top=t.top+s.elementPos.top;i.bottom=t.bottom+s.elementPos.top;if(r.tolerance==="touch"){e=!(i.left>l||i.right<o||i.top>c||i.bottom<a)}else if(r.tolerance==="fit"){e=i.left>o&&i.right<l&&i.top>a&&i.bottom<c}if(e){if(t.selected){s._removeClass(t.$element,"ui-selected");t.selected=false}if(t.unselecting){s._removeClass(t.$element,"ui-unselecting");t.unselecting=false}if(!t.selecting){s._addClass(t.$element,"ui-selecting");t.selecting=true;s._trigger("selecting",n,{selecting:t.element})}}else{if(t.selecting){if((n.metaKey||n.ctrlKey)&&t.startselected){s._removeClass(t.$element,"ui-selecting");t.selecting=false;s._addClass(t.$element,"ui-selected");t.selected=true}else{s._removeClass(t.$element,"ui-selecting");t.selecting=false;if(t.startselected){s._addClass(t.$element,"ui-unselecting");t.unselecting=true}s._trigger("unselecting",n,{unselecting:t.element})}}if(t.selected){if(!n.metaKey&&!n.ctrlKey&&!t.startselected){s._removeClass(t.$element,"ui-selected");t.selected=false;s._addClass(t.$element,"ui-unselecting");t.unselecting=true;s._trigger("unselecting",n,{unselecting:t.element})}}}});return false},_mouseStop:function(e){var i=this;this.dragged=false;b(".ui-unselecting",this.element[0]).each(function(){var t=b.data(this,"selectable-item");i._removeClass(t.$element,"ui-unselecting");t.unselecting=false;t.startselected=false;i._trigger("unselected",e,{unselected:t.element})});b(".ui-selecting",this.element[0]).each(function(){var t=b.data(this,"selectable-item");i._removeClass(t.$element,"ui-selecting")._addClass(t.$element,"ui-selected");t.selecting=false;t.selected=true;t.startselected=true;i._trigger("selected",e,{selected:t.element})});this._trigger("stop",e);this.helper.remove();return false}});var y=b.widget("ui.sortable",b.ui.mouse,{version:"1.12.1",widgetEventPrefix:"sort",ready:false,options:{appendTo:"parent",axis:false,connectWith:false,containment:false,cursor:"auto",cursorAt:false,dropOnEmpty:true,forcePlaceholderSize:false,forceHelperSize:false,grid:false,handle:false,helper:"original",items:"> *",opacity:false,placeholder:false,revert:false,scroll:true,scrollSensitivity:20,scrollSpeed:20,scope:"default",tolerance:"intersect",zIndex:1e3,activate:null,beforeStop:null,change:null,deactivate:null,out:null,over:null,receive:null,remove:null,sort:null,start:null,stop:null,update:null},_isOverAxis:function(t,e,i){return t>=e&&t<e+i},_isFloating:function(t){return/left|right/.test(t.css("float"))||/inline|table-cell/.test(t.css("display"))},_create:function(){this.containerCache={};this._addClass("ui-sortable");this.refresh();this.offset=this.element.offset();this._mouseInit();this._setHandleClassName();this.ready=true},_setOption:function(t,e){this._super(t,e);if(t==="handle"){this._setHandleClassName()}},_setHandleClassName:function(){var t=this;this._removeClass(this.element.find(".ui-sortable-handle"),"ui-sortable-handle");b.each(this.items,function(){t._addClass(this.instance.options.handle?this.item.find(this.instance.options.handle):this.item,"ui-sortable-handle")})},_destroy:function(){this._mouseDestroy();for(var t=this.items.length-1;t>=0;t--){this.items[t].item.removeData(this.widgetName+"-item")}return this},_mouseCapture:function(t,e){var i=null,n=false,s=this;if(this.reverting){return false}if(this.options.disabled||this.options.type==="static"){return false}this._refreshItems(t);b(t.target).parents().each(function(){if(b.data(this,s.widgetName+"-item")===s){i=b(this);return false}});if(b.data(t.target,s.widgetName+"-item")===s){i=b(t.target)}if(!i){return false}if(this.options.handle&&!e){b(this.options.handle,i).find("*").addBack().each(function(){if(this===t.target){n=true}});if(!n){return false}}this.currentItem=i;this._removeCurrentsFromItems();return true},_mouseStart:function(t,e,i){var n,s,r=this.options;this.currentContainer=this;this.refreshPositions();this.helper=this._createHelper(t);this._cacheHelperProportions();this._cacheMargins();this.scrollParent=this.helper.scrollParent();this.offset=this.currentItem.offset();this.offset={top:this.offset.top-this.margins.top,left:this.offset.left-this.margins.left};b.extend(this.offset,{click:{left:t.pageX-this.offset.left,top:t.pageY-this.offset.top},parent:this._getParentOffset(),relative:this._getRelativeOffset()});this.helper.css("position","absolute");this.cssPosition=this.helper.css("position");this.originalPosition=this._generatePosition(t);this.originalPageX=t.pageX;this.originalPageY=t.pageY;r.cursorAt&&this._adjustOffsetFromHelper(r.cursorAt);this.domPosition={prev:this.currentItem.prev()[0],parent:this.currentItem.parent()[0]};if(this.helper[0]!==this.currentItem[0]){this.currentItem.hide()}this._createPlaceholder();if(r.containment){this._setContainment()}if(r.cursor&&r.cursor!=="auto"){s=this.document.find("body");this.storedCursor=s.css("cursor");s.css("cursor",r.cursor);this.storedStylesheet=b("<style>*{ cursor: "+r.cursor+" !important; }</style>").appendTo(s)}if(r.opacity){if(this.helper.css("opacity")){this._storedOpacity=this.helper.css("opacity")}this.helper.css("opacity",r.opacity)}if(r.zIndex){if(this.helper.css("zIndex")){this._storedZIndex=this.helper.css("zIndex")}this.helper.css("zIndex",r.zIndex)}if(this.scrollParent[0]!==this.document[0]&&this.scrollParent[0].tagName!=="HTML"){this.overflowOffset=this.scrollParent.offset()}this._trigger("start",t,this._uiHash());if(!this._preserveHelperProportions){this._cacheHelperProportions()}if(!i){for(n=this.containers.length-1;n>=0;n--){this.containers[n]._trigger("activate",t,this._uiHash(this))}}if(b.ui.ddmanager){b.ui.ddmanager.current=this}if(b.ui.ddmanager&&!r.dropBehaviour){b.ui.ddmanager.prepareOffsets(this,t)}this.dragging=true;this._addClass(this.helper,"ui-sortable-helper");this._mouseDrag(t);return true},_mouseDrag:function(t){var e,i,n,s,r=this.options,o=false;this.position=this._generatePosition(t);this.positionAbs=this._convertPositionTo("absolute");if(!this.lastPositionAbs){this.lastPositionAbs=this.positionAbs}if(this.options.scroll){if(this.scrollParent[0]!==this.document[0]&&this.scrollParent[0].tagName!=="HTML"){if(this.overflowOffset.top+this.scrollParent[0].offsetHeight-t.pageY<r.scrollSensitivity){this.scrollParent[0].scrollTop=o=this.scrollParent[0].scrollTop+r.scrollSpeed}else if(t.pageY-this.overflowOffset.top<r.scrollSensitivity){this.scrollParent[0].scrollTop=o=this.scrollParent[0].scrollTop-r.scrollSpeed}if(this.overflowOffset.left+this.scrollParent[0].offsetWidth-t.pageX<r.scrollSensitivity){this.scrollParent[0].scrollLeft=o=this.scrollParent[0].scrollLeft+r.scrollSpeed}else if(t.pageX-this.overflowOffset.left<r.scrollSensitivity){this.scrollParent[0].scrollLeft=o=this.scrollParent[0].scrollLeft-r.scrollSpeed}}else{if(t.pageY-this.document.scrollTop()<r.scrollSensitivity){o=this.document.scrollTop(this.document.scrollTop()-r.scrollSpeed)}else if(this.window.height()-(t.pageY-this.document.scrollTop())<r.scrollSensitivity){o=this.document.scrollTop(this.document.scrollTop()+r.scrollSpeed)}if(t.pageX-this.document.scrollLeft()<r.scrollSensitivity){o=this.document.scrollLeft(this.document.scrollLeft()-r.scrollSpeed)}else if(this.window.width()-(t.pageX-this.document.scrollLeft())<r.scrollSensitivity){o=this.document.scrollLeft(this.document.scrollLeft()+r.scrollSpeed)}}if(o!==false&&b.ui.ddmanager&&!r.dropBehaviour){b.ui.ddmanager.prepareOffsets(this,t)}}this.positionAbs=this._convertPositionTo("absolute");if(!this.options.axis||this.options.axis!=="y"){this.helper[0].style.left=this.position.left+"px"}if(!this.options.axis||this.options.axis!=="x"){this.helper[0].style.top=this.position.top+"px"}for(e=this.items.length-1;e>=0;e--){i=this.items[e];n=i.item[0];s=this._intersectsWithPointer(i);if(!s){continue}if(i.instance!==this.currentContainer){continue}if(n!==this.currentItem[0]&&this.placeholder[s===1?"next":"prev"]()[0]!==n&&!b.contains(this.placeholder[0],n)&&(this.options.type==="semi-dynamic"?!b.contains(this.element[0],n):true)){this.direction=s===1?"down":"up";if(this.options.tolerance==="pointer"||this._intersectsWithSides(i)){this._rearrange(t,i)}else{break}this._trigger("change",t,this._uiHash());break}}this._contactContainers(t);if(b.ui.ddmanager){b.ui.ddmanager.drag(this,t)}this._trigger("sort",t,this._uiHash());this.lastPositionAbs=this.positionAbs;return false},_mouseStop:function(t,e){if(!t){return}if(b.ui.ddmanager&&!this.options.dropBehaviour){b.ui.ddmanager.drop(this,t)}if(this.options.revert){var i=this,n=this.placeholder.offset(),s=this.options.axis,r={};if(!s||s==="x"){r.left=n.left-this.offset.parent.left-this.margins.left+(this.offsetParent[0]===this.document[0].body?0:this.offsetParent[0].scrollLeft)}if(!s||s==="y"){r.top=n.top-this.offset.parent.top-this.margins.top+(this.offsetParent[0]===this.document[0].body?0:this.offsetParent[0].scrollTop)}this.reverting=true;b(this.helper).animate(r,parseInt(this.options.revert,10)||500,function(){i._clear(t)})}else{this._clear(t,e)}return false},cancel:function(){if(this.dragging){this._mouseUp(new b.Event("mouseup",{target:null}));if(this.options.helper==="original"){this.currentItem.css(this._storedCSS);this._removeClass(this.currentItem,"ui-sortable-helper")}else{this.currentItem.show()}for(var t=this.containers.length-1;t>=0;t--){this.containers[t]._trigger("deactivate",null,this._uiHash(this));if(this.containers[t].containerCache.over){this.containers[t]._trigger("out",null,this._uiHash(this));this.containers[t].containerCache.over=0}}}if(this.placeholder){if(this.placeholder[0].parentNode){this.placeholder[0].parentNode.removeChild(this.placeholder[0])}if(this.options.helper!=="original"&&this.helper&&this.helper[0].parentNode){this.helper.remove()}b.extend(this,{helper:null,dragging:false,reverting:false,_noFinalSort:null});if(this.domPosition.prev){b(this.domPosition.prev).after(this.currentItem)}else{b(this.domPosition.parent).prepend(this.currentItem)}}return this},serialize:function(e){var t=this._getItemsAsjQuery(e&&e.connected),i=[];e=e||{};b(t).each(function(){var t=(b(e.item||this).attr(e.attribute||"id")||"").match(e.expression||/(.+)[\-=_](.+)/);if(t){i.push((e.key||t[1]+"[]")+"="+(e.key&&e.expression?t[1]:t[2]))}});if(!i.length&&e.key){i.push(e.key+"=")}return i.join("&")},toArray:function(t){var e=this._getItemsAsjQuery(t&&t.connected),i=[];t=t||{};e.each(function(){i.push(b(t.item||this).attr(t.attribute||"id")||"")});return i},_intersectsWith:function(t){var e=this.positionAbs.left,i=e+this.helperProportions.width,n=this.positionAbs.top,s=n+this.helperProportions.height,r=t.left,o=r+t.width,a=t.top,l=a+t.height,c=this.offset.click.top,h=this.offset.click.left,u=this.options.axis==="x"||n+c>a&&n+c<l,d=this.options.axis==="y"||e+h>r&&e+h<o,f=u&&d;if(this.options.tolerance==="pointer"||this.options.forcePointerForContainers||this.options.tolerance!=="pointer"&&this.helperProportions[this.floating?"width":"height"]>t[this.floating?"width":"height"]){return f}else{return r<e+this.helperProportions.width/2&&i-this.helperProportions.width/2<o&&a<n+this.helperProportions.height/2&&s-this.helperProportions.height/2<l}},_intersectsWithPointer:function(t){var e,i,n=this.options.axis==="x"||this._isOverAxis(this.positionAbs.top+this.offset.click.top,t.top,t.height),s=this.options.axis==="y"||this._isOverAxis(this.positionAbs.left+this.offset.click.left,t.left,t.width),r=n&&s;if(!r){return false}e=this._getDragVerticalDirection();i=this._getDragHorizontalDirection();return this.floating?i==="right"||e==="down"?2:1:e&&(e==="down"?2:1)},_intersectsWithSides:function(t){var e=this._isOverAxis(this.positionAbs.top+this.offset.click.top,t.top+t.height/2,t.height),i=this._isOverAxis(this.positionAbs.left+this.offset.click.left,t.left+t.width/2,t.width),n=this._getDragVerticalDirection(),s=this._getDragHorizontalDirection();if(this.floating&&s){return s==="right"&&i||s==="left"&&!i}else{return n&&(n==="down"&&e||n==="up"&&!e)}},_getDragVerticalDirection:function(){var t=this.positionAbs.top-this.lastPositionAbs.top;return t!==0&&(t>0?"down":"up")},_getDragHorizontalDirection:function(){var t=this.positionAbs.left-this.lastPositionAbs.left;return t!==0&&(t>0?"right":"left")},refresh:function(t){this._refreshItems(t);this._setHandleClassName();this.refreshPositions();return this},_connectWith:function(){var t=this.options;return t.connectWith.constructor===String?[t.connectWith]:t.connectWith},_getItemsAsjQuery:function(t){var e,i,n,s,r=[],o=[],a=this._connectWith();if(a&&t){for(e=a.length-1;e>=0;e--){n=b(a[e],this.document[0]);for(i=n.length-1;i>=0;i--){s=b.data(n[i],this.widgetFullName);if(s&&s!==this&&!s.options.disabled){o.push([b.isFunction(s.options.items)?s.options.items.call(s.element):b(s.options.items,s.element).not(".ui-sortable-helper").not(".ui-sortable-placeholder"),s])}}}}o.push([b.isFunction(this.options.items)?this.options.items.call(this.element,null,{options:this.options,item:this.currentItem}):b(this.options.items,this.element).not(".ui-sortable-helper").not(".ui-sortable-placeholder"),this]);function l(){r.push(this)}for(e=o.length-1;e>=0;e--){o[e][0].each(l)}return b(r)},_removeCurrentsFromItems:function(){var i=this.currentItem.find(":data("+this.widgetName+"-item)");this.items=b.grep(this.items,function(t){for(var e=0;e<i.length;e++){if(i[e]===t.item[0]){return false}}return true})},_refreshItems:function(t){this.items=[];this.containers=[this];var e,i,n,s,r,o,a,l,c=this.items,h=[[b.isFunction(this.options.items)?this.options.items.call(this.element[0],t,{item:this.currentItem}):b(this.options.items,this.element),this]],u=this._connectWith();if(u&&this.ready){for(e=u.length-1;e>=0;e--){n=b(u[e],this.document[0]);for(i=n.length-1;i>=0;i--){s=b.data(n[i],this.widgetFullName);if(s&&s!==this&&!s.options.disabled){h.push([b.isFunction(s.options.items)?s.options.items.call(s.element[0],t,{item:this.currentItem}):b(s.options.items,s.element),s]);this.containers.push(s)}}}}for(e=h.length-1;e>=0;e--){r=h[e][1];o=h[e][0];for(i=0,l=o.length;i<l;i++){a=b(o[i]);a.data(this.widgetName+"-item",r);c.push({item:a,instance:r,width:0,height:0,left:0,top:0})}}},refreshPositions:function(t){this.floating=this.items.length?this.options.axis==="x"||this._isFloating(this.items[0].item):false;if(this.offsetParent&&this.helper){this.offset.parent=this._getParentOffset()}var e,i,n,s;for(e=this.items.length-1;e>=0;e--){i=this.items[e];if(i.instance!==this.currentContainer&&this.currentContainer&&i.item[0]!==this.currentItem[0]){continue}n=this.options.toleranceElement?b(this.options.toleranceElement,i.item):i.item;if(!t){i.width=n.outerWidth();i.height=n.outerHeight()}s=n.offset();i.left=s.left;i.top=s.top}if(this.options.custom&&this.options.custom.refreshContainers){this.options.custom.refreshContainers.call(this)}else{for(e=this.containers.length-1;e>=0;e--){s=this.containers[e].element.offset();this.containers[e].containerCache.left=s.left;this.containers[e].containerCache.top=s.top;this.containers[e].containerCache.width=this.containers[e].element.outerWidth();this.containers[e].containerCache.height=this.containers[e].element.outerHeight()}}return this},_createPlaceholder:function(i){i=i||this;var n,s=i.options;if(!s.placeholder||s.placeholder.constructor===String){n=s.placeholder;s.placeholder={element:function(){var t=i.currentItem[0].nodeName.toLowerCase(),e=b("<"+t+">",i.document[0]);i._addClass(e,"ui-sortable-placeholder",n||i.currentItem[0].className)._removeClass(e,"ui-sortable-helper");if(t==="tbody"){i._createTrPlaceholder(i.currentItem.find("tr").eq(0),b("<tr>",i.document[0]).appendTo(e))}else if(t==="tr"){i._createTrPlaceholder(i.currentItem,e)}else if(t==="img"){e.attr("src",i.currentItem.attr("src"))}if(!n){e.css("visibility","hidden")}return e},update:function(t,e){if(n&&!s.forcePlaceholderSize){return}if(!e.height()){e.height(i.currentItem.innerHeight()-parseInt(i.currentItem.css("paddingTop")||0,10)-parseInt(i.currentItem.css("paddingBottom")||0,10))}if(!e.width()){e.width(i.currentItem.innerWidth()-parseInt(i.currentItem.css("paddingLeft")||0,10)-parseInt(i.currentItem.css("paddingRight")||0,10))}}}}i.placeholder=b(s.placeholder.element.call(i.element,i.currentItem));i.currentItem.after(i.placeholder);s.placeholder.update(i,i.placeholder)},_createTrPlaceholder:function(t,e){var i=this;t.children().each(function(){b("<td>&#160;</td>",i.document[0]).attr("colspan",b(this).attr("colspan")||1).appendTo(e)})},_contactContainers:function(t){var e,i,n,s,r,o,a,l,c,h,u=null,d=null;for(e=this.containers.length-1;e>=0;e--){if(b.contains(this.currentItem[0],this.containers[e].element[0])){continue}if(this._intersectsWith(this.containers[e].containerCache)){if(u&&b.contains(this.containers[e].element[0],u.element[0])){continue}u=this.containers[e];d=e}else{if(this.containers[e].containerCache.over){this.containers[e]._trigger("out",t,this._uiHash(this));this.containers[e].containerCache.over=0}}}if(!u){return}if(this.containers.length===1){if(!this.containers[d].containerCache.over){this.containers[d]._trigger("over",t,this._uiHash(this));this.containers[d].containerCache.over=1}}else{n=1e4;s=null;c=u.floating||this._isFloating(this.currentItem);r=c?"left":"top";o=c?"width":"height";h=c?"pageX":"pageY";for(i=this.items.length-1;i>=0;i--){if(!b.contains(this.containers[d].element[0],this.items[i].item[0])){continue}if(this.items[i].item[0]===this.currentItem[0]){continue}a=this.items[i].item.offset()[r];l=false;if(t[h]-a>this.items[i][o]/2){l=true}if(Math.abs(t[h]-a)<n){n=Math.abs(t[h]-a);s=this.items[i];this.direction=l?"up":"down"}}if(!s&&!this.options.dropOnEmpty){return}if(this.currentContainer===this.containers[d]){if(!this.currentContainer.containerCache.over){this.containers[d]._trigger("over",t,this._uiHash());this.currentContainer.containerCache.over=1}return}s?this._rearrange(t,s,null,true):this._rearrange(t,null,this.containers[d].element,true);this._trigger("change",t,this._uiHash());this.containers[d]._trigger("change",t,this._uiHash(this));this.currentContainer=this.containers[d];this.options.placeholder.update(this.currentContainer,this.placeholder);this.containers[d]._trigger("over",t,this._uiHash(this));this.containers[d].containerCache.over=1}},_createHelper:function(t){var e=this.options,i=b.isFunction(e.helper)?b(e.helper.apply(this.element[0],[t,this.currentItem])):e.helper==="clone"?this.currentItem.clone():this.currentItem;if(!i.parents("body").length){b(e.appendTo!=="parent"?e.appendTo:this.currentItem[0].parentNode)[0].appendChild(i[0])}if(i[0]===this.currentItem[0]){this._storedCSS={width:this.currentItem[0].style.width,height:this.currentItem[0].style.height,position:this.currentItem.css("position"),top:this.currentItem.css("top"),left:this.currentItem.css("left")}}if(!i[0].style.width||e.forceHelperSize){i.width(this.currentItem.width())}if(!i[0].style.height||e.forceHelperSize){i.height(this.currentItem.height())}return i},_adjustOffsetFromHelper:function(t){if(typeof t==="string"){t=t.split(" ")}if(b.isArray(t)){t={left:+t[0],top:+t[1]||0}}if("left"in t){this.offset.click.left=t.left+this.margins.left}if("right"in t){this.offset.click.left=this.helperProportions.width-t.right+this.margins.left}if("top"in t){this.offset.click.top=t.top+this.margins.top}if("bottom"in t){this.offset.click.top=this.helperProportions.height-t.bottom+this.margins.top}},_getParentOffset:function(){this.offsetParent=this.helper.offsetParent();var t=this.offsetParent.offset();if(this.cssPosition==="absolute"&&this.scrollParent[0]!==this.document[0]&&b.contains(this.scrollParent[0],this.offsetParent[0])){t.left+=this.scrollParent.scrollLeft();t.top+=this.scrollParent.scrollTop()}if(this.offsetParent[0]===this.document[0].body||this.offsetParent[0].tagName&&this.offsetParent[0].tagName.toLowerCase()==="html"&&b.ui.ie){t={top:0,left:0}}return{top:t.top+(parseInt(this.offsetParent.css("borderTopWidth"),10)||0),left:t.left+(parseInt(this.offsetParent.css("borderLeftWidth"),10)||0)}},_getRelativeOffset:function(){if(this.cssPosition==="relative"){var t=this.currentItem.position();return{top:t.top-(parseInt(this.helper.css("top"),10)||0)+this.scrollParent.scrollTop(),left:t.left-(parseInt(this.helper.css("left"),10)||0)+this.scrollParent.scrollLeft()}}else{return{top:0,left:0}}},_cacheMargins:function(){this.margins={left:parseInt(this.currentItem.css("marginLeft"),10)||0,top:parseInt(this.currentItem.css("marginTop"),10)||0}},_cacheHelperProportions:function(){this.helperProportions={width:this.helper.outerWidth(),height:this.helper.outerHeight()}},_setContainment:function(){var t,e,i,n=this.options;if(n.containment==="parent"){n.containment=this.helper[0].parentNode}if(n.containment==="document"||n.containment==="window"){this.containment=[0-this.offset.relative.left-this.offset.parent.left,0-this.offset.relative.top-this.offset.parent.top,n.containment==="document"?this.document.width():this.window.width()-this.helperProportions.width-this.margins.left,(n.containment==="document"?this.document.height()||document.body.parentNode.scrollHeight:this.window.height()||this.document[0].body.parentNode.scrollHeight)-this.helperProportions.height-this.margins.top]}if(!/^(document|window|parent)$/.test(n.containment)){t=b(n.containment)[0];e=b(n.containment).offset();i=b(t).css("overflow")!=="hidden";this.containment=[e.left+(parseInt(b(t).css("borderLeftWidth"),10)||0)+(parseInt(b(t).css("paddingLeft"),10)||0)-this.margins.left,e.top+(parseInt(b(t).css("borderTopWidth"),10)||0)+(parseInt(b(t).css("paddingTop"),10)||0)-this.margins.top,e.left+(i?Math.max(t.scrollWidth,t.offsetWidth):t.offsetWidth)-(parseInt(b(t).css("borderLeftWidth"),10)||0)-(parseInt(b(t).css("paddingRight"),10)||0)-this.helperProportions.width-this.margins.left,e.top+(i?Math.max(t.scrollHeight,t.offsetHeight):t.offsetHeight)-(parseInt(b(t).css("borderTopWidth"),10)||0)-(parseInt(b(t).css("paddingBottom"),10)||0)-this.helperProportions.height-this.margins.top]}},_convertPositionTo:function(t,e){if(!e){e=this.position}var i=t==="absolute"?1:-1,n=this.cssPosition==="absolute"&&!(this.scrollParent[0]!==this.document[0]&&b.contains(this.scrollParent[0],this.offsetParent[0]))?this.offsetParent:this.scrollParent,s=/(html|body)/i.test(n[0].tagName);return{top:e.top+this.offset.relative.top*i+this.offset.parent.top*i-(this.cssPosition==="fixed"?-this.scrollParent.scrollTop():s?0:n.scrollTop())*i,left:e.left+this.offset.relative.left*i+this.offset.parent.left*i-(this.cssPosition==="fixed"?-this.scrollParent.scrollLeft():s?0:n.scrollLeft())*i}},_generatePosition:function(t){var e,i,n=this.options,s=t.pageX,r=t.pageY,o=this.cssPosition==="absolute"&&!(this.scrollParent[0]!==this.document[0]&&b.contains(this.scrollParent[0],this.offsetParent[0]))?this.offsetParent:this.scrollParent,a=/(html|body)/i.test(o[0].tagName);if(this.cssPosition==="relative"&&!(this.scrollParent[0]!==this.document[0]&&this.scrollParent[0]!==this.offsetParent[0])){this.offset.relative=this._getRelativeOffset()}if(this.originalPosition){if(this.containment){if(t.pageX-this.offset.click.left<this.containment[0]){s=this.containment[0]+this.offset.click.left}if(t.pageY-this.offset.click.top<this.containment[1]){r=this.containment[1]+this.offset.click.top}if(t.pageX-this.offset.click.left>this.containment[2]){s=this.containment[2]+this.offset.click.left}if(t.pageY-this.offset.click.top>this.containment[3]){r=this.containment[3]+this.offset.click.top}}if(n.grid){e=this.originalPageY+Math.round((r-this.originalPageY)/n.grid[1])*n.grid[1];r=this.containment?e-this.offset.click.top>=this.containment[1]&&e-this.offset.click.top<=this.containment[3]?e:e-this.offset.click.top>=this.containment[1]?e-n.grid[1]:e+n.grid[1]:e;i=this.originalPageX+Math.round((s-this.originalPageX)/n.grid[0])*n.grid[0];s=this.containment?i-this.offset.click.left>=this.containment[0]&&i-this.offset.click.left<=this.containment[2]?i:i-this.offset.click.left>=this.containment[0]?i-n.grid[0]:i+n.grid[0]:i}}return{top:r-this.offset.click.top-this.offset.relative.top-this.offset.parent.top+(this.cssPosition==="fixed"?-this.scrollParent.scrollTop():a?0:o.scrollTop()),left:s-this.offset.click.left-this.offset.relative.left-this.offset.parent.left+(this.cssPosition==="fixed"?-this.scrollParent.scrollLeft():a?0:o.scrollLeft())}},_rearrange:function(t,e,i,n){i?i[0].appendChild(this.placeholder[0]):e.item[0].parentNode.insertBefore(this.placeholder[0],this.direction==="down"?e.item[0]:e.item[0].nextSibling);this.counter=this.counter?++this.counter:1;var s=this.counter;this._delay(function(){if(s===this.counter){this.refreshPositions(!n)}})},_clear:function(t,e){this.reverting=false;var i,n=[];if(!this._noFinalSort&&this.currentItem.parent().length){this.placeholder.before(this.currentItem)}this._noFinalSort=null;if(this.helper[0]===this.currentItem[0]){for(i in this._storedCSS){if(this._storedCSS[i]==="auto"||this._storedCSS[i]==="static"){this._storedCSS[i]=""}}this.currentItem.css(this._storedCSS);this._removeClass(this.currentItem,"ui-sortable-helper")}else{this.currentItem.show()}if(this.fromOutside&&!e){n.push(function(t){this._trigger("receive",t,this._uiHash(this.fromOutside))})}if((this.fromOutside||this.domPosition.prev!==this.currentItem.prev().not(".ui-sortable-helper")[0]||this.domPosition.parent!==this.currentItem.parent()[0])&&!e){n.push(function(t){this._trigger("update",t,this._uiHash())})}if(this!==this.currentContainer){if(!e){n.push(function(t){this._trigger("remove",t,this._uiHash())});n.push(function(e){return function(t){e._trigger("receive",t,this._uiHash(this))}}.call(this,this.currentContainer));n.push(function(e){return function(t){e._trigger("update",t,this._uiHash(this))}}.call(this,this.currentContainer))}}function s(e,i,n){return function(t){n._trigger(e,t,i._uiHash(i))}}for(i=this.containers.length-1;i>=0;i--){if(!e){n.push(s("deactivate",this,this.containers[i]))}if(this.containers[i].containerCache.over){n.push(s("out",this,this.containers[i]));this.containers[i].containerCache.over=0}}if(this.storedCursor){this.document.find("body").css("cursor",this.storedCursor);this.storedStylesheet.remove()}if(this._storedOpacity){this.helper.css("opacity",this._storedOpacity)}if(this._storedZIndex){this.helper.css("zIndex",this._storedZIndex==="auto"?"":this._storedZIndex)}this.dragging=false;if(!e){this._trigger("beforeStop",t,this._uiHash())}this.placeholder[0].parentNode.removeChild(this.placeholder[0]);if(!this.cancelHelperRemoval){if(this.helper[0]!==this.currentItem[0]){this.helper.remove()}this.helper=null}if(!e){for(i=0;i<n.length;i++){n[i].call(this,t)}this._trigger("stop",t,this._uiHash())}this.fromOutside=false;return!this.cancelHelperRemoval},_trigger:function(){if(b.Widget.prototype._trigger.apply(this,arguments)===false){this.cancel()}},_uiHash:function(t){var e=t||this;return{helper:e.helper,placeholder:e.placeholder||b([]),position:e.position,originalPosition:e.originalPosition,offset:e.positionAbs,item:e.currentItem,sender:t?t.element:null}}})});(function(W){var t=function(){var O={},L,n=65,R,s='<div class="colorpicker"><div class="colorpicker_color"><div><div></div></div></div><div class="colorpicker_hue"><div></div></div><div class="colorpicker_new_color"></div><div class="colorpicker_current_color"></div><div class="colorpicker_hex"><input type="text" maxlength="6" size="6" /></div><div class="colorpicker_rgb_r colorpicker_field"><input type="text" maxlength="3" size="3" /><span></span></div><div class="colorpicker_rgb_g colorpicker_field"><input type="text" maxlength="3" size="3" /><span></span></div><div class="colorpicker_rgb_b colorpicker_field"><input type="text" maxlength="3" size="3" /><span></span></div><div class="colorpicker_hsb_h colorpicker_field"><input type="text" maxlength="3" size="3" /><span></span></div><div class="colorpicker_hsb_s colorpicker_field"><input type="text" maxlength="3" size="3" /><span></span></div><div class="colorpicker_hsb_b colorpicker_field"><input type="text" maxlength="3" size="3" /><span></span></div><div class="colorpicker_submit"></div></div>',t={eventName:"click",onShow:function(){},onBeforeShow:function(){},onHide:function(){},onChange:function(){},onSubmit:function(){},color:"ff0000",livePreview:true,flat:false},r=function(t,e){var i=A(t);W(e).data("colorpicker").fields.eq(1).val(i.r).end().eq(2).val(i.g).end().eq(3).val(i.b).end()},o=function(t,e){W(e).data("colorpicker").fields.eq(4).val(t.h).end().eq(5).val(t.s).end().eq(6).val(t.b).end()},a=function(t,e){W(e).data("colorpicker").fields.eq(0).val(H(t)).end()},l=function(t,e){W(e).data("colorpicker").selector.css("backgroundColor","#"+H({h:t.h,s:100,b:100}));W(e).data("colorpicker").selectorIndic.css({left:parseInt(150*t.s/100,10),top:parseInt(150*(100-t.b)/100,10)})},c=function(t,e){W(e).data("colorpicker").hue.css("top",parseInt(150-150*t.h/360,10))},h=function(t,e){W(e).data("colorpicker").currentColor.css("backgroundColor","#"+H(t))},u=function(t,e){W(e).data("colorpicker").newColor.css("backgroundColor","#"+H(t))},d=function(t){var e=t.charCode||t.keyCode||-1;if(e>n&&e<=90||e==32){return false}var i=W(this).parent().parent();if(i.data("colorpicker").livePreview===true){f.apply(this)}},f=function(t){var e=W(this).parent().parent(),i;if(this.parentNode.className.indexOf("_hex")>0){e.data("colorpicker").color=i=F(z(this.value))}else if(this.parentNode.className.indexOf("_hsb")>0){e.data("colorpicker").color=i=I({h:parseInt(e.data("colorpicker").fields.eq(4).val(),10),s:parseInt(e.data("colorpicker").fields.eq(5).val(),10),b:parseInt(e.data("colorpicker").fields.eq(6).val(),10)})}else{e.data("colorpicker").color=i=$(E({r:parseInt(e.data("colorpicker").fields.eq(1).val(),10),g:parseInt(e.data("colorpicker").fields.eq(2).val(),10),b:parseInt(e.data("colorpicker").fields.eq(3).val(),10)}))}if(t){r(i,e.get(0));a(i,e.get(0));o(i,e.get(0))}l(i,e.get(0));c(i,e.get(0));u(i,e.get(0));e.data("colorpicker").onChange.apply(e,[i,H(i),A(i)])},p=function(t){var e=W(this).parent().parent();e.data("colorpicker").fields.parent().removeClass("colorpicker_focus")},m=function(){n=this.parentNode.className.indexOf("_hex")>0?70:65;W(this).parent().parent().data("colorpicker").fields.parent().removeClass("colorpicker_focus");W(this).parent().addClass("colorpicker_focus")},g=function(t){var e=W(this).parent().find("input").focus();var i={el:W(this).parent().addClass("colorpicker_slider"),max:this.parentNode.className.indexOf("_hsb_h")>0?360:this.parentNode.className.indexOf("_hsb")>0?100:255,y:t.pageY,field:e,val:parseInt(e.val(),10),preview:W(this).parent().parent().data("colorpicker").livePreview};W(document).bind("mouseup",i,y);W(document).bind("mousemove",i,v)},v=function(t){t.data.field.val(Math.max(0,Math.min(t.data.max,parseInt(t.data.val+t.pageY-t.data.y,10))));if(t.data.preview){f.apply(t.data.field.get(0),[true])}return false},y=function(t){f.apply(t.data.field.get(0),[true]);t.data.el.removeClass("colorpicker_slider").find("input").focus();W(document).unbind("mouseup",y);W(document).unbind("mousemove",v);return false},b=function(t){var e={cal:W(this).parent(),y:W(this).offset().top};e.preview=e.cal.data("colorpicker").livePreview;W(document).bind("mouseup",e,w);W(document).bind("mousemove",e,i)},i=function(t){f.apply(t.data.cal.data("colorpicker").fields.eq(4).val(parseInt(360*(150-Math.max(0,Math.min(150,t.pageY-t.data.y)))/150,10)).get(0),[t.data.preview]);return false},w=function(t){r(t.data.cal.data("colorpicker").color,t.data.cal.get(0));a(t.data.cal.data("colorpicker").color,t.data.cal.get(0));W(document).unbind("mouseup",w);W(document).unbind("mousemove",i);return false},x=function(t){var e={cal:W(this).parent(),pos:W(this).offset()};e.preview=e.cal.data("colorpicker").livePreview;W(document).bind("mouseup",e,k);W(document).bind("mousemove",e,_)},_=function(t){f.apply(t.data.cal.data("colorpicker").fields.eq(6).val(parseInt(100*(150-Math.max(0,Math.min(150,t.pageY-t.data.pos.top)))/150,10)).end().eq(5).val(parseInt(100*Math.max(0,Math.min(150,t.pageX-t.data.pos.left))/150,10)).get(0),[t.data.preview]);return false},k=function(t){r(t.data.cal.data("colorpicker").color,t.data.cal.get(0));a(t.data.cal.data("colorpicker").color,t.data.cal.get(0));W(document).unbind("mouseup",k);W(document).unbind("mousemove",_);return false},C=function(t){W(this).addClass("colorpicker_focus")},S=function(t){W(this).removeClass("colorpicker_focus")},T=function(t){var e=W(this).parent();var i=e.data("colorpicker").color;e.data("colorpicker").origColor=i;h(i,e.get(0));e.data("colorpicker").onSubmit(i,H(i),A(i),e.data("colorpicker").el)},D=function(t){var e=W("#"+W(this).data("colorpickerId"));e.data("colorpicker").onBeforeShow.apply(this,[e.get(0)]);var i=W(this).offset();var n=P();var s=i.top+this.offsetHeight;var r=i.left;if(s+176>n.t+n.h){s-=this.offsetHeight+176}if(r+356>n.l+n.w){r-=356}e.css({left:r+"px",top:s+"px"});if(e.data("colorpicker").onShow.apply(this,[e.get(0)])!=false){e.show()}W(document).bind("mousedown",{cal:e},M);return false},M=function(t){if(!e(t.data.cal.get(0),t.target,t.data.cal.get(0))){if(t.data.cal.data("colorpicker").onHide.apply(this,[t.data.cal.get(0)])!=false){t.data.cal.hide()}W(document).unbind("mousedown",M)}},e=function(t,e,i){if(t==e){return true}if(t.contains){return t.contains(e)}if(t.compareDocumentPosition){return!!(t.compareDocumentPosition(e)&16)}var n=e.parentNode;while(n&&n!=i){if(n==t)return true;n=n.parentNode}return false},P=function(){var t=document.compatMode=="CSS1Compat";return{l:window.pageXOffset||(t?document.documentElement.scrollLeft:document.body.scrollLeft),t:window.pageYOffset||(t?document.documentElement.scrollTop:document.body.scrollTop),w:window.innerWidth||(t?document.documentElement.clientWidth:document.body.clientWidth),h:window.innerHeight||(t?document.documentElement.clientHeight:document.body.clientHeight)}},I=function(t){return{h:Math.min(360,Math.max(0,t.h)),s:Math.min(100,Math.max(0,t.s)),b:Math.min(100,Math.max(0,t.b))}},E=function(t){return{r:Math.min(255,Math.max(0,t.r)),g:Math.min(255,Math.max(0,t.g)),b:Math.min(255,Math.max(0,t.b))}},z=function(t){var e=6-t.length;if(e>0){var i=[];for(var n=0;n<e;n++){i.push("0")}i.push(t);t=i.join("")}return t},N=function(t){var t=parseInt(t.indexOf("#")>-1?t.substring(1):t,16);return{r:t>>16,g:(t&65280)>>8,b:t&255}},F=function(t){return $(N(t))},$=function(t){var e={h:0,s:0,b:0};var i=Math.min(t.r,t.g,t.b);var n=Math.max(t.r,t.g,t.b);var s=n-i;e.b=n;if(n!=0){}e.s=n!=0?255*s/n:0;if(e.s!=0){if(t.r==n){e.h=(t.g-t.b)/s}else if(t.g==n){e.h=2+(t.b-t.r)/s}else{e.h=4+(t.r-t.g)/s}}else{e.h=-1}e.h*=60;if(e.h<0){e.h+=360}e.s*=100/255;e.b*=100/255;return e},A=function(t){var e={};var i=Math.round(t.h);var n=Math.round(t.s*255/100);var s=Math.round(t.b*255/100);if(n==0){e.r=e.g=e.b=s}else{var r=s;var o=(255-n)*s/255;var a=(r-o)*(i%60)/60;if(i==360)i=0;if(i<60){e.r=r;e.b=o;e.g=o+a}else if(i<120){e.g=r;e.b=o;e.r=r-a}else if(i<180){e.g=r;e.r=o;e.b=o+a}else if(i<240){e.b=r;e.r=o;e.g=r-a}else if(i<300){e.b=r;e.g=o;e.r=o+a}else if(i<360){e.r=r;e.g=o;e.b=r-a}else{e.r=0;e.g=0;e.b=0}}return{r:Math.round(e.r),g:Math.round(e.g),b:Math.round(e.b)}},B=function(t){var i=[t.r.toString(16),t.g.toString(16),t.b.toString(16)];W.each(i,function(t,e){if(e.length==1){i[t]="0"+e}});return i.join("")},H=function(t){return B(A(t))},j=function(){var t=W(this).parent();var e=t.data("colorpicker").origColor;t.data("colorpicker").color=e;r(e,t.get(0));a(e,t.get(0));o(e,t.get(0));l(e,t.get(0));c(e,t.get(0));u(e,t.get(0))};return{init:function(n){n=W.extend({},t,n||{});if(typeof n.color=="string"){n.color=F(n.color)}else if(n.color.r!=undefined&&n.color.g!=undefined&&n.color.b!=undefined){n.color=$(n.color)}else if(n.color.h!=undefined&&n.color.s!=undefined&&n.color.b!=undefined){n.color=I(n.color)}else{return this}return this.each(function(){if(!W(this).data("colorpickerId")){var t=W.extend({},n);t.origColor=n.color;var e="collorpicker_"+parseInt(Math.random()*1e3);W(this).data("colorpickerId",e);var i=W(s).attr("id",e);if(t.flat){i.appendTo(this).show()}else{i.appendTo(document.body)}t.fields=i.find("input").bind("keyup",d).bind("change",f).bind("blur",p).bind("focus",m);i.find("span").bind("mousedown",g).end().find(">div.colorpicker_current_color").bind("click",j);t.selector=i.find("div.colorpicker_color").bind("mousedown",x);t.selectorIndic=t.selector.find("div div");t.el=this;t.hue=i.find("div.colorpicker_hue div");i.find("div.colorpicker_hue").bind("mousedown",b);t.newColor=i.find("div.colorpicker_new_color");t.currentColor=i.find("div.colorpicker_current_color");i.data("colorpicker",t);i.find("div.colorpicker_submit").bind("mouseenter",C).bind("mouseleave",S).bind("click",T);r(t.color,i.get(0));o(t.color,i.get(0));a(t.color,i.get(0));c(t.color,i.get(0));l(t.color,i.get(0));h(t.color,i.get(0));u(t.color,i.get(0));if(t.flat){i.css({position:"relative",display:"block"})}else{W(this).bind(t.eventName,D)}}})},showPicker:function(){return this.each(function(){if(W(this).data("colorpickerId")){D.apply(this)}})},hidePicker:function(){return this.each(function(){if(W(this).data("colorpickerId")){W("#"+W(this).data("colorpickerId")).hide()}})},setColor:function(e){if(typeof e=="string"){e=F(e)}else if(e.r!=undefined&&e.g!=undefined&&e.b!=undefined){e=$(e)}else if(e.h!=undefined&&e.s!=undefined&&e.b!=undefined){e=I(e)}else{return this}return this.each(function(){if(W(this).data("colorpickerId")){var t=W("#"+W(this).data("colorpickerId"));t.data("colorpicker").color=e;t.data("colorpicker").origColor=e;r(e,t.get(0));o(e,t.get(0));a(e,t.get(0));c(e,t.get(0));l(e,t.get(0));h(e,t.get(0));u(e,t.get(0))}})}}}();W.fn.extend({ColorPicker:t.init,ColorPickerHide:t.hidePicker,ColorPickerShow:t.showPicker,ColorPickerSetColor:t.setColor})})(jQuery);$(document).ready(function(){selectLine();selectAll();actionAnConfirmAllButton();openModalAfterClick();showInputField();sendSms();confirmCode();modalHide();orders=[]});function selectLine(){$(document).on("click",".payment-orders-list table > tbody > tr > td:not(:has(.confirm-small))",function(){var t=$(this).parent().find(".checkbox-list");if(t.prop("checked")===true){t.prop("checked",false)}else{t.prop("checked",true)}t.change()});$(document).on("click",".payment-orders-list .checkbox-list",function(){if($(this).prop("checked")===true){$(this).prop("checked",false)}else{$(this).prop("checked",true)}})}function selectAll(){$(document).on("click",".payment-orders-list .select-all",function(){var t=$(".payment-orders-list table > tbody > tr .checkbox-list");if($(this).hasClass("checked-all")){t.prop("checked",false);$(this).removeClass("checked-all")}else{t.prop("checked",true);$(this).addClass("checked-all")}t.change()})}function actionAnConfirmAllButton(){var n=$(".payment-orders-list table > tbody > tr .checkbox-list");n.change(function(){var t=true;var e=0;n.each(function(){if($(this).prop("checked")){e++}});if(e===0){t=false}var i=$(".payment-orders-list .confirm-all");if(t===true){i.removeAttr("disabled").removeClass("disabled")}else{i.attr("disabled","true").addClass("disabled")}})}function openModalAfterClick(){$(document).on("click",".payment-orders-list .confirm-all",function(){hideFields();var t=$(".payment-orders-list table > tbody > tr .checkbox-list");var e=0;t.each(function(){if($(this).prop("checked")===true){e+=parseFloat($(this).parent().parent().find("td:nth-child(4)").html().split(" ").join(""))}});$(".confirm-modal-form .orders-sum").html(e.toFixed(2));var i=$(".payment-orders-list table > tbody > tr .confirm-small");orders=[];$(i).each(function(){if($(this).parent().parent().find("input.checkbox-list").prop("checked")===true){orders.push(parseInt($(this).attr("data-id")))}});$(".confirm-modal-form").modal("show")});$(document).on("click",".payment-orders-list .confirm-small",function(){hideFields();var t=0;t+=parseFloat($(this).parent().parent().find("td:nth-child(4)").html().split(" ").join(""));$(".confirm-modal-form .orders-sum").html(t.toFixed(2));orders=[];$orderId=$(this).attr("data-id");orders=[parseInt($orderId)];$(".confirm-modal-form").modal("show")})}function showInputField(t){$(t).fadeOut(function(){$(".confirm-modal-form .div-form-control, .confirm-modal-form .button-send").fadeIn()})}function showString(t,e){$(t).html(e);$(t).fadeIn()}function hideString(t){$(t).fadeOut()}function hideFields(){if($(".confirm-modal-form  .error-field").css("display")==="block"){$(".confirm-modal-form  .error-field").fadeOut()}if($(".confirm-modal-form  .success-field").css("display")==="block"){$(".confirm-modal-form  .success-field").fadeOut()}}function sendSms(){$(document).on("click",".confirm-modal-form .confirm-send-sms",function(){hideFields();var t=new FormData;t.append("AjaxForm[orders]",JSON.stringify(orders));$.ajax({type:"POST",url:"/partner/payment-orders/execute-orders",enctype:"multipart/form-data",processData:false,contentType:false,data:t,success:function(t){showInputField(".confirm-modal-form .confirm-send-sms")},error:function(t){showString(".confirm-modal-form .error-field",t.responseJSON[0])}})})}function confirmCode(){$(document).on("click",".confirm-modal-form  .button-send",function(){var t=$(".confirm-modal-form .div-form-control input").val();hideString(".confirm-modal-form .error-field");hideString(".confirm-modal-form .success-field");$.ajax({type:"POST",url:"/partner/payment-orders/confirm-code",data:"code="+t,success:function(t){$(".confirm-modal-form .div-form-control, .confirm-modal-form .button-send").fadeOut(function(){showString(".confirm-modal-form .success-field",t[0]);setTimeout(function(){location.reload()},2e3)})},error:function(t){showString(".confirm-modal-form .error-field",t.responseJSON[0])}})})}function modalHide(){$(".confirm-modal-form").on("hidden.bs.modal",function(t){$(".confirm-modal-form .div-form-control, .confirm-modal-form .button-send").fadeOut(function(){$(".confirm-modal-form .confirm-send-sms").fadeIn();$(".confirm-modal-form .div-form-control .form-control ").val("")})})}(function(b){var i={columns:1,search:false,searchOptions:{delay:250,showOptGroups:false,searchText:true,searchValue:false,onSearch:function(t){}},texts:{placeholder:"Select options",search:"Search",selectedOptions:" selected",selectAll:"Select all",unselectAll:"Unselect all",noneSelected:"None Selected"},selectAll:false,selectGroup:false,minHeight:200,maxHeight:null,maxWidth:null,maxPlaceholderWidth:null,maxPlaceholderOpts:10,showCheckbox:true,checkboxAutoFit:false,optionAttributes:[],onLoad:function(t){},onOptionClick:function(t,e){},onControlClose:function(t){},onSelectAll:function(t,e){},onPlaceholder:function(t,e,i){}};var n=1;var o=1;if(typeof Array.prototype.map!=="function"){Array.prototype.map=function(t,e){if(typeof e==="undefined"){e=this}return b.isArray(e)?b.map(e,t):[]}}if(typeof String.prototype.trim!=="function"){String.prototype.trim=function(){return this.replace(/^\s+|\s+$/g,"")}}function s(t,e){this.element=t;this.options=b.extend(true,{},i,e);this.updateSelectAll=true;this.updatePlaceholder=true;this.listNumber=n;n=n+1;if(!b(this.element).attr("multiple")){throw new Error("[jQuery-MultiSelect] Select list must be a multiselect list in order to use this plugin")}if(this.options.search){if(!this.options.searchOptions.searchText&&!this.options.searchOptions.searchValue){throw new Error("[jQuery-MultiSelect] Either searchText or searchValue should be true.")}}if("placeholder"in this.options){this.options.texts.placeholder=this.options.placeholder;delete this.options.placeholder}if("default"in this.options.searchOptions){this.options.texts.search=this.options.searchOptions["default"];delete this.options.searchOptions["default"]}this.load()}s.prototype={load:function(){var s=this;if(s.element.nodeName!="SELECT"||b(s.element).hasClass("jqmsLoaded")){return true}b(s.element).addClass("jqmsLoaded ms-list-"+s.listNumber).data("plugin_multiselect-instance",s);b(s.element).after('<div id="ms-list-'+s.listNumber+'" class="ms-options-wrap"><button type="button"><span>None Selected</span></button><div class="ms-options"><ul></ul></div></div>');var i=b(s.element).siblings("#ms-list-"+s.listNumber+".ms-options-wrap").find("> button:first-child");var r=b(s.element).siblings("#ms-list-"+s.listNumber+".ms-options-wrap").find("> .ms-options");var o=r.find("> ul");if(!s.options.showCheckbox){r.addClass("hide-checkbox")}else if(s.options.checkboxAutoFit){r.addClass("checkbox-autofit")}if(b(s.element).prop("disabled")){i.prop("disabled",true)}if(s.options.maxPlaceholderWidth){i.css("maxWidth",s.options.maxPlaceholderWidth)}if(s.options.maxHeight){var t=s.options.maxHeight}else{var t=b(window).height()-r.offset().top+b(window).scrollTop()-20}t=t<s.options.minHeight?s.options.minHeight:t;r.css({maxWidth:s.options.maxWidth,minHeight:s.options.minHeight,maxHeight:t});r.on("touchmove mousewheel DOMMouseScroll",function(t){if(b(this).outerHeight()<b(this)[0].scrollHeight){var e=t.originalEvent,i=e.wheelDelta||-e.detail;if(b(this).outerHeight()+b(this)[0].scrollTop>b(this)[0].scrollHeight){t.preventDefault();this.scrollTop+=i<0?1:-1}}});b(document).off("click.ms-hideopts").on("click.ms-hideopts",function(t){if(!b(t.target).closest(".ms-options-wrap").length){b(".ms-options-wrap.ms-active > .ms-options").each(function(){b(this).closest(".ms-options-wrap").removeClass("ms-active");var t=b(this).closest(".ms-options-wrap").attr("id");var e=b(this).parent().siblings("."+t+".jqmsLoaded").data("plugin_multiselect-instance");if(typeof e.options.onControlClose=="function"){e.options.onControlClose(e.element)}})}}).on("keydown",function(t){if((t.keyCode||t.which)==27){b(this).trigger("click.ms-hideopts")}});i.on("keydown",function(t){var e=t.keyCode||t.which;if(e==13||e==32){i.trigger("mousedown")}});i.on("mousedown",function(t){if(t.which&&t.which!=1){return true}b(".ms-options-wrap.ms-active").each(function(){if(b(this).siblings("."+b(this).attr("id")+".jqmsLoaded")[0]!=r.parent().siblings(".ms-list-"+s.listNumber+".jqmsLoaded")[0]){b(this).removeClass("ms-active");var t=b(this).siblings("."+b(this).attr("id")+".jqmsLoaded").data("plugin_multiselect-instance");if(typeof t.options.onControlClose=="function"){t.options.onControlClose(t.element)}}});r.closest(".ms-options-wrap").toggleClass("ms-active");if(r.closest(".ms-options-wrap").hasClass("ms-active")){r.css("maxHeight","");if(s.options.maxHeight){var e=s.options.maxHeight}else{var e=b(window).height()-r.offset().top+b(window).scrollTop()-20}if(e){e=e<s.options.minHeight?s.options.minHeight:e;r.css("maxHeight",e)}}else if(typeof s.options.onControlClose=="function"){s.options.onControlClose(s.element)}}).click(function(t){t.preventDefault()});if(s.options.texts.placeholder){i.find("span").text(s.options.texts.placeholder)}if(s.options.search){o.before('<div class="ms-search"><input type="text" value="" placeholder="'+s.options.texts.search+'" /></div>');var n=r.find(".ms-search input");n.on("keyup",function(){if(b(this).data("lastsearch")==b(this).val()){return true}if(b(this).data("searchTimeout")){clearTimeout(b(this).data("searchTimeout"))}var e=b(this);b(this).data("searchTimeout",setTimeout(function(){e.data("lastsearch",e.val());if(typeof s.options.searchOptions.onSearch=="function"){s.options.searchOptions.onSearch(s.element)}var t=b.trim(n.val().toLowerCase());if(t){o.find('li[data-search-term*="'+t+'"]:not(.optgroup)').removeClass("ms-hidden");o.find('li:not([data-search-term*="'+t+'"], .optgroup)').addClass("ms-hidden")}else{o.find(".ms-hidden").removeClass("ms-hidden")}if(!s.options.searchOptions.showOptGroups){o.find(".optgroup").each(function(){if(b(this).find("li:not(.ms-hidden)").length){b(this).show()}else{b(this).hide()}})}s._updateSelectAllText()},s.options.searchOptions.delay))})}if(s.options.selectAll){o.before('<a href="#" class="ms-selectall global">'+s.options.texts.selectAll+"</a>")}r.on("click",".ms-selectall",function(t){t.preventDefault();s.updateSelectAll=false;s.updatePlaceholder=false;var e=r.parent().siblings(".ms-list-"+s.listNumber+".jqmsLoaded");if(b(this).hasClass("global")){if(o.find("li:not(.optgroup, .selected, .ms-hidden)").length){o.find("li:not(.optgroup, .selected, .ms-hidden)").addClass("selected");o.find('li.selected input[type="checkbox"]:not(:disabled)').prop("checked",true)}else{o.find("li:not(.optgroup, .ms-hidden).selected").removeClass("selected");o.find('li:not(.optgroup, .ms-hidden, .selected) input[type="checkbox"]:not(:disabled)').prop("checked",false)}}else if(b(this).closest("li").hasClass("optgroup")){var i=b(this).closest("li.optgroup");if(i.find("li:not(.selected, .ms-hidden)").length){i.find("li:not(.selected, .ms-hidden)").addClass("selected");i.find('li.selected input[type="checkbox"]:not(:disabled)').prop("checked",true)}else{i.find("li:not(.ms-hidden).selected").removeClass("selected");i.find('li:not(.ms-hidden, .selected) input[type="checkbox"]:not(:disabled)').prop("checked",false)}}var n=[];o.find('li.selected input[type="checkbox"]').each(function(){n.push(b(this).val())});e.val(n).trigger("change");s.updateSelectAll=true;s.updatePlaceholder=true;if(typeof s.options.onSelectAll=="function"){s.options.onSelectAll(s.element,n.length)}s._updateSelectAllText();s._updatePlaceholderText()});var a=[];b(s.element).children().each(function(){if(this.nodeName=="OPTGROUP"){var n=[];b(this).children("option").each(function(){var t={};for(var e=0;e<s.options.optionAttributes.length;e++){var i=s.options.optionAttributes[e];if(b(this).attr(i)!==undefined){t[i]=b(this).attr(i)}}n.push({name:b(this).text(),value:b(this).val(),checked:b(this).prop("selected"),attributes:t})});a.push({label:b(this).attr("label"),options:n})}else if(this.nodeName=="OPTION"){var t={};for(var e=0;e<s.options.optionAttributes.length;e++){var i=s.options.optionAttributes[e];if(b(this).attr(i)!==undefined){t[i]=b(this).attr(i)}}a.push({name:b(this).text(),value:b(this).val(),checked:b(this).prop("selected"),attributes:t})}else{return true}});s.loadOptions(a,true,false);r.on("click",'input[type="checkbox"]',function(){b(this).closest("li").toggleClass("selected");var t=r.parent().siblings(".ms-list-"+s.listNumber+".jqmsLoaded");t.find('option[value="'+s._escapeSelector(b(this).val())+'"]').prop("selected",b(this).is(":checked")).closest("select").trigger("change");if(typeof s.options.onOptionClick=="function"){s.options.onOptionClick(s.element,this)}s._updateSelectAllText();s._updatePlaceholderText()});r.on("focusin",'input[type="checkbox"]',function(){b(this).closest("label").addClass("focused")}).on("focusout",'input[type="checkbox"]',function(){b(this).closest("label").removeClass("focused")});if(typeof s.options.onLoad==="function"){s.options.onLoad(s.element)}b(s.element).hide()},loadOptions:function(t,e,i){e=typeof e=="boolean"?e:true;i=typeof i=="boolean"?i:true;var n=this;var s=b(n.element);var r=s.siblings("#ms-list-"+n.listNumber+".ms-options-wrap").find("> .ms-options > ul");var o=s.siblings("#ms-list-"+n.listNumber+".ms-options-wrap").find("> .ms-options");if(e){r.find("> li").remove();if(i){s.find("> *").remove()}}var a=[];for(var l in t){if(!t.hasOwnProperty(l)){continue}var c=t[l];var h=b("<li/>");var u=true;if(c.hasOwnProperty("value")){if(n.options.showCheckbox&&n.options.checkboxAutoFit){h.addClass("ms-reflow")}n._addOption(h,c);if(i){var d=b('<option value="'+c.value+'">'+c.name+"</option>");if(c.hasOwnProperty("attributes")&&Object.keys(c.attributes).length){d.attr(c.attributes)}if(c.checked){d.prop("selected",true)}s.append(d)}}else if(c.hasOwnProperty("options")){var f=b('<optgroup label="'+c.label+'"></optgroup>');r.find("> li.optgroup > span.label").each(function(){if(b(this).text()==c.label){h=b(this).closest(".optgroup");u=false}});if(i){if(s.find('optgroup[label="'+c.label+'"]').length){f=s.find('optgroup[label="'+c.label+'"]')}else{s.append(f)}}if(u){h.addClass("optgroup");h.append('<span class="label">'+c.label+"</span>");h.find("> .label").css({clear:"both"});if(n.options.selectGroup){h.append('<a href="#" class="ms-selectall">'+n.options.texts.selectAll+"</a>")}h.append("<ul/>")}for(var p in c.options){if(!c.options.hasOwnProperty(p)){continue}var m=c.options[p];var g=b("<li/>");if(n.options.showCheckbox&&n.options.checkboxAutoFit){g.addClass("ms-reflow")}if(!m.hasOwnProperty("value")){continue}n._addOption(g,m);h.find("> ul").append(g);if(i){var d=b('<option value="'+m.value+'">'+m.name+"</option>");if(m.hasOwnProperty("attributes")&&Object.keys(m.attributes).length){d.attr(m.attributes)}if(m.checked){d.prop("selected",true)}f.append(d)}}}else{continue}if(u){a.push(h)}}r.append(a);if(n.options.checkboxAutoFit&&n.options.showCheckbox&&!o.hasClass("hide-checkbox")){var v=r.find('.ms-reflow:eq(0) input[type="checkbox"]');if(v.length){var y=v.outerWidth();y=y?y:15;r.find(".ms-reflow label").css("padding-left",parseInt(v.closest("label").css("padding-left"))*2+y);r.find(".ms-reflow").removeClass("ms-reflow")}}n._updatePlaceholderText();o.find("ul").css({"column-count":"","column-gap":"","-webkit-column-count":"","-webkit-column-gap":"","-moz-column-count":"","-moz-column-gap":""});if(s.find("optgroup").length){r.find("> li:not(.optgroup)").css({float:"left",width:100/n.options.columns+"%"});r.find("li.optgroup").css({clear:"both"}).find("> ul").css({"column-count":n.options.columns,"column-gap":0,"-webkit-column-count":n.options.columns,"-webkit-column-gap":0,"-moz-column-count":n.options.columns,"-moz-column-gap":0});if(this._ieVersion()&&this._ieVersion()<10){r.find("li.optgroup > ul > li").css({float:"left",width:100/n.options.columns+"%"})}}else{r.css({"column-count":n.options.columns,"column-gap":0,"-webkit-column-count":n.options.columns,"-webkit-column-gap":0,"-moz-column-count":n.options.columns,"-moz-column-gap":0});if(this._ieVersion()&&this._ieVersion()<10){r.find("> li").css({float:"left",width:100/n.options.columns+"%"})}}n._updateSelectAllText()},settings:function(t){this.options=b.extend(true,{},this.options,t);this.reload()},unload:function(){b(this.element).siblings("#ms-list-"+this.listNumber+".ms-options-wrap").remove();b(this.element).show(function(){b(this).css("display","").removeClass("jqmsLoaded")})},reload:function(){b(this.element).siblings("#ms-list-"+this.listNumber+".ms-options-wrap").remove();b(this.element).removeClass("jqmsLoaded");this.load()},reset:function(){var t=[];b(this.element).find("option").each(function(){if(b(this).prop("defaultSelected")){t.push(b(this).val())}});b(this.element).val(t);this.reload()},disable:function(t){t=typeof t==="boolean"?t:true;b(this.element).prop("disabled",t);b(this.element).siblings("#ms-list-"+this.listNumber+".ms-options-wrap").find("button:first-child").prop("disabled",t)},_updateSelectAllText:function(){if(!this.updateSelectAll){return}var e=this;if(!e.options.selectAll&&!e.options.selectGroup){return}var t=b(e.element).siblings("#ms-list-"+e.listNumber+".ms-options-wrap").find("> .ms-options");t.find(".ms-selectall").each(function(){var t=b(this).parent().find("li:not(.optgroup,.selected,.ms-hidden)");b(this).text(t.length?e.options.texts.selectAll:e.options.texts.unselectAll)})},_updatePlaceholderText:function(){if(!this.updatePlaceholder){return}var t=this;var e=b(t.element);var i=e.val()?e.val():[];var n=e.siblings("#ms-list-"+t.listNumber+".ms-options-wrap").find("> button:first-child");var s=n.find("span");var r=e.siblings("#ms-list-"+t.listNumber+".ms-options-wrap").find("> .ms-options");if(e.find("option:selected:disabled").length){i=[];e.find("option:selected").each(function(){i.push(b(this).val())})}var o=[];for(var a in i){if(!i.hasOwnProperty(a)){continue}o.push(b.trim(e.find('option[value="'+t._escapeSelector(i[a])+'"]').text()));if(o.length>=t.options.maxPlaceholderOpts){break}}s.text(o.join(", "));if(o.length){r.closest(".ms-options-wrap").addClass("ms-has-selections");if(typeof t.options.onPlaceholder=="function"){t.options.onPlaceholder(t.element,s,o)}}else{r.closest(".ms-options-wrap").removeClass("ms-has-selections")}if(!o.length){s.text(t.options.texts.placeholder)}else if(s.width()>n.width()||o.length!=i.length){s.text(i.length+t.options.texts.selectedOptions)}},_addOption:function(t,e){var i=this;var n=b("<label/>",{for:"ms-opt-"+o,text:e.name});var s=b("<input>",{type:"checkbox",title:e.name,id:"ms-opt-"+o,value:e.value});if(e.hasOwnProperty("attributes")&&Object.keys(e.attributes).length){s.attr(e.attributes)}if(e.checked){t.addClass("default selected");s.prop("checked",true)}n.prepend(s);var r="";if(i.options.searchOptions.searchText){r+=" "+e.name.toLowerCase()}if(i.options.searchOptions.searchValue){r+=" "+e.value.toLowerCase()}t.attr("data-search-term",b.trim(r)).prepend(n);o=o+1},_ieVersion:function(){var t=navigator.userAgent.toLowerCase();return t.indexOf("msie")!=-1?parseInt(t.split("msie")[1]):false},_escapeSelector:function(t){if(typeof b.escapeSelector=="function"){return b.escapeSelector(t)}else{return t.replace(/[!"#$%&'()*+,.\/:;<=>?@[\\\]^`{|}~]/g,"\\$&")}}};b.fn.multiselect=function(e){if(!this.length){return}var i=arguments;var n;if(e===undefined||typeof e==="object"){return this.each(function(){if(!b.data(this,"plugin_multiselect")){b.data(this,"plugin_multiselect",new s(this,e))}})}else if(typeof e==="string"&&e[0]!=="_"&&e!=="init"){this.each(function(){var t=b.data(this,"plugin_multiselect");if(t instanceof s&&typeof t[e]==="function"){n=t[e].apply(t,Array.prototype.slice.call(i,1))}if(e==="unload"){b.data(this,"plugin_multiselect",null)}});return n}}})(jQuery);(function(o){"use strict";let t={start:function(t,e="Все"){o(t).multiselect({columns:1,search:true,selectAll:true,optionAttributes:["data-partner"],maxHeight:225,minHeight:20,texts:{placeholder:e,search:"Быстрый поиск",selectedOptions:" выбрано",selectAll:"Выбрать все",unselectAll:"Снять выбор со всех",noneSelected:"Ничего не выбрано"}})},changeMerchant:function(t,e,i){let n=o(e).next();let s=o(t).find("option:selected").attr("data-ismfo");let r=o(n).find("input");o(r).each(function(){let t=o(this).attr(i);if(t!="-1"&&t!==s&&s!=="-1"){o(this).parent().parent("li").remove()}})},otch:function(){this.start(".multiselect-field");o(document).on("change",".form-control[name=IdPart]",function(){o(".multiselect-field").multiselect("reset");t.changeMerchant(".form-control[name=IdPart]",".multiselect-field","data-partner")})},statList:function(){this.start(".multiselect-field");this.start(".multiselect-status","Все");o(document).on("change",".form-control[name=IdPart]",function(){o(".multiselect-field").multiselect("reset");t.changeMerchant(".form-control[name=IdPart]",".multiselect-field","data-partner")})},statSale:function(){this.start(".multiselect-sale")},statRecurrentpaysdata:function(){this.start(".multiselect-recurrentpaysdata")},orderIndex:function(){this.start(".multiselect-order")},statMerchantusluga:function(){this.start(".multiselect-field");this.start(".multiselect-status","Все");o(document).on("change",".form-control[name=IdPart]",function(){o(".multiselect-field").multiselect("reset");t.changeMerchant(".form-control[name=IdPart]",".multiselect-field","data-partner")})}};window.multiselect=t})(jQuery||$);(function(s){"use strict";window.antifraud={start_script:function(){this.activate_date_fields();s(document).on("submit","#statlistform",function(t){t.preventDefault();antifraud.click_search()});s(document).on("click",".send-pjax",function(){antifraud.modal_open(this)});s(document).on("pjax:error",function(t,e,i,n){t.preventDefault()})},activate_date_fields:function(){s('[name="calDay"],[name="calWeek"],[name="calMon"]').on("click",function(){s('[name="calDay"]').removeClass("active");s('[name="calWeek"]').removeClass("active");s('[name="calMon"]').removeClass("active");s(this).addClass("active");let t,e;t=moment(new Date).hour(23).minute(59).seconds(59);e=moment(new Date).hour(0).minute(0).seconds(0);if(s(this).attr("name")=="calDay"){s('[name="datefrom"]').data("DateTimePicker").date(e);s('[name="dateto"]').data("DateTimePicker").date(t)}else if(s(this).attr("name")=="calWeek"){e=e.subtract(7,"days");s('[name="datefrom"]').data("DateTimePicker").date(e);s('[name="dateto"]').data("DateTimePicker").date(t)}else if(s(this).attr("name")=="calMon"){e=e.subtract(1,"months");s('[name="datefrom"]').data("DateTimePicker").date(e);s('[name="dateto"]').data("DateTimePicker").date(t)}});s('[name="datefrom"],[name="dateto"]').datetimepicker({format:"DD.MM.YYYY HH:mm",showClose:true})},click_search:function(){let t=s("#statlistform").serialize();s.pjax.reload({type:"GET",url:"/partner/antifraud/ajax-index-list",container:"#some_pjax_id",data:t,push:false,replace:false,timeout:1e4,cache:false,scrollTo:false})},modal_open:function(t){let e=s(t).attr("data-user-hash");let i=s(t).attr("data-transaction-id");let n="user_hash="+e+"&transaction_id="+i;s.pjax.reload({type:"GET",url:"/partner/antifraud/ajax-modal-info",container:"#pjax_modal",data:n,push:false,replace:false,timeout:1e4,cache:false,scrollTo:false});s("#transaction_info").modal("show")}};window.antifraud_setting={start_script:function(){this.send_refund()},send_refund:function(){s(document).on("submit","#settings-antifraud-refund",function(t){t.preventDefault();let e=s(this).serialize();s.ajax({method:"post",url:"/partner/antifraud/settings",data:e,success:function(t){if(t.status===1){swal({title:"ОК",text:t.message,type:"success"},function(){s("#statlistform").trigger("submit")})}else{swal({title:"Ошибка",text:t.data.first_error[0],type:"error"},function(){s("#statlistform").trigger("submit");s.each(t.data.errors,function(t,e){let i=s('#settings-antifraud-refund input[name= "'+t+'"]');i.parent().addClass("has-error")})})}},error:function(t){s("#statlistform").closest(".ibox-content").toggleClass("sk-loading");swal({title:"Ошибка",text:"Ошибка на сервере. Пожалуйста обратитесь в тех. поддержку.",type:"error"},function(){s("#statlistform").closest(".ibox-content").toggleClass("sk-loading")})}})})}}})($||jQuery);(function(i){"use strict";let t=0;let e={list:function(){i('[name="datefrom"]').datetimepicker({format:"MM.YYYY"}).on("dp.change",function(){i("#actlistform").trigger("submit")});i("#actidpatner").on("change",function(){i("#actlistform").trigger("submit")});i("#actlistform").on("submit",function(t){t.preventDefault();let e=i("#actlistform");i.ajax({url:"/partner/stat/act-list",method:"POST",data:e.serialize(),beforeSend:function(){i("#actlistdata").html("");e.closest(".ibox-content").toggleClass("sk-loading")},success:function(t){e.closest(".ibox-content").toggleClass("sk-loading");if(t.status==1){i("#actlistdata").html(t.data)}else{toastr.error(t.message,"Ошибка")}},error:function(){e.closest(".ibox-content").toggleClass("sk-loading")}});return false});i("#actlistdata").on("click","#btnFormirAct",function(t){let e=i("#actlistform");i.ajax({url:"/partner/stat/act-create",method:"POST",data:e.serialize(),beforeSend:function(){e.closest(".ibox-content").toggleClass("sk-loading")},success:function(t){e.closest(".ibox-content").toggleClass("sk-loading");if(t.status==1){toastr.success("OK","Акты сформированы");i("#actlistform").trigger("submit")}else{toastr.error(t.message,"Ошибка")}},error:function(){e.closest(".ibox-content").toggleClass("sk-loading")}});return false}).on("click","#btnPubAct",function(t){let e=i("#actlistform");i.ajax({url:"/partner/stat/act-pub",method:"POST",data:e.serialize(),beforeSend:function(){e.closest(".ibox-content").toggleClass("sk-loading")},success:function(t){e.closest(".ibox-content").toggleClass("sk-loading");if(t.status==1){toastr.success("OK","Акты опубликованы");i("#actlistform").trigger("submit")}else{toastr.error(t.message,"Ошибка")}},error:function(){e.closest(".ibox-content").toggleClass("sk-loading")}});return false}).on("click",'[data-click="schetsend"]',function(){if(confirm("Выставить счет?")){let t=i(this).attr("data-id");let e=i("#actlistform");i.ajax({url:"/partner/stat/act-createschet",method:"POST",data:{ActId:t},beforeSend:function(){e.closest(".ibox-content").toggleClass("sk-loading")},success:function(t){e.closest(".ibox-content").toggleClass("sk-loading");if(t.status==1){toastr.success("OK",t.message);i("#actlistform").trigger("submit")}else{toastr.error(t.message,"Ошибка")}},error:function(){e.closest(".ibox-content").toggleClass("sk-loading")}})}return false});i("#actlistform").trigger("submit")},edit:function(){i("#btnSaveAct").on("click",function(t){let e=i("#formEditAct");i.ajax({url:"/partner/stat/act-save",method:"POST",data:e.serialize(),beforeSend:function(){e.closest(".ibox-content").toggleClass("sk-loading")},success:function(t){e.closest(".ibox-content").toggleClass("sk-loading");if(t.status==1){toastr.success("OK","Данные интеграции успешно сохранены.")}else{toastr.error(t.message,"Ошибка")}},error:function(){e.closest(".ibox-content").toggleClass("sk-loading")}});return false})}};window.act=e})(jQuery||$);(function(i){"use strict";let t={init:function(){i("#addnewsform").on("submit",function(t){t.preventDefault();let e=i("#addnewsform");i.ajax({url:"/partner/default/addnews",method:"POST",data:e.serialize(),beforeSend:function(){i("#submitnews").prop("disabled",true)},success:function(t){e.closest(".ibox-content").toggleClass("sk-loading");if(t.status==1){window.location.reload()}else{i("#submitnews").prop("disabled",false);toastr.error(t.message,"Ошибка")}},error:function(){i("#submitnews").prop("disabled",false)}});return false});i('[data-click="delnews"]').off().on("click",function(){let t=i(this).attr("data-id");if(confirm("Удалить новость?")){i.ajax({url:"/partner/default/delnews",method:"POST",data:{id:t},beforeSend:function(){},success:function(t){if(t.status==1){window.location.reload()}else{toastr.error(t.message,"Ошибка")}},error:function(){}})}return false});setTimeout(function t(){i.ajax({url:"/partner/default/alerts",method:"GET",success:function(t){if(t.status==1&&t.data.length>0){t.data.forEach(function(t,e){toastr.warning(t.body,t.head,{timeOut:3e4,positionClass:"toast-top-full-width"})})}}})},500)}};window.news=t})(jQuery||$);